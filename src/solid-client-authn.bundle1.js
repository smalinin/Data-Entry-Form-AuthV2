var solidClientAuthentication;
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/ClientAuthentication.ts":
/*!*************************************!*\
  !*** ./src/ClientAuthentication.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const solid_client_authn_core_1 = __webpack_require__(/*! @inrupt/solid-client-authn-core */ "../core/dist/index.js");
const universal_fetch_1 = __webpack_require__(/*! @inrupt/universal-fetch */ "./node_modules/@inrupt/universal-fetch/dist/index-browser.js");
const oidc_client_ext_1 = __webpack_require__(/*! @inrupt/oidc-client-ext */ "../oidc-browser/dist/index.es.js");
const globalFetch = (request, init) => (0, universal_fetch_1.fetch)(request, init);
class ClientAuthentication {
    constructor(loginHandler, redirectHandler, logoutHandler, sessionInfoManager, issuerConfigFetcher) {
        this.loginHandler = loginHandler;
        this.redirectHandler = redirectHandler;
        this.logoutHandler = logoutHandler;
        this.sessionInfoManager = sessionInfoManager;
        this.issuerConfigFetcher = issuerConfigFetcher;
        this.login = async (options, eventEmitter) => {
            var _a, _b;
            await this.sessionInfoManager.clear(options.sessionId);
            const redirectUrl = (_a = options.redirectUrl) !== null && _a !== void 0 ? _a : (0, oidc_client_ext_1.removeOidcQueryParam)(window.location.href);
            if (!(0, solid_client_authn_core_1.isValidRedirectUrl)(redirectUrl)) {
                throw new Error(`${redirectUrl} is not a valid redirect URL, it is either a malformed IRI or it includes a hash fragment.`);
            }
            await this.loginHandler.handle({
                ...options,
                redirectUrl,
                clientName: (_b = options.clientName) !== null && _b !== void 0 ? _b : options.clientId,
                eventEmitter,
            });
        };
        this.fetch = globalFetch;
        this.logout = async (sessionId) => {
            await this.logoutHandler.handle(sessionId);
            this.fetch = globalFetch;
        };
        this.getSessionInfo = async (sessionId) => {
            return this.sessionInfoManager.get(sessionId);
        };
        this.getAllSessionInfo = async () => {
            return this.sessionInfoManager.getAll();
        };
        this.validateCurrentSession = async (currentSessionId) => {
            const sessionInfo = await this.sessionInfoManager.get(currentSessionId);
            if (sessionInfo === undefined ||
                sessionInfo.clientAppId === undefined ||
                sessionInfo.issuer === undefined) {
                return null;
            }
            return sessionInfo;
        };
        this.handleIncomingRedirect = async (url, eventEmitter, tokens) => {
            try {
                const redirectInfo = await this.redirectHandler.handle(url, eventEmitter, tokens);
                this.fetch = redirectInfo.fetch.bind(window);
                this.cleanUrlAfterRedirect(url);
                return {
                    isLoggedIn: redirectInfo.isLoggedIn,
                    webId: redirectInfo.webId,
                    sessionId: redirectInfo.sessionId,
                    expirationDate: redirectInfo.expirationDate,
                    tokens: redirectInfo.tokens
                };
            }
            catch (err) {
                this.cleanUrlAfterRedirect(url);
                eventEmitter.emit(solid_client_authn_core_1.EVENTS.ERROR, "redirect", err);
                return undefined;
            }
        };
    }
    cleanUrlAfterRedirect(url) {
        const cleanedUpUrl = new URL(url);
        cleanedUpUrl.searchParams.delete("state");
        cleanedUpUrl.searchParams.delete("code");
        cleanedUpUrl.searchParams.delete("id_token");
        cleanedUpUrl.searchParams.delete("access_token");
        cleanedUpUrl.searchParams.delete("error");
        cleanedUpUrl.searchParams.delete("error_description");
        cleanedUpUrl.searchParams.delete("iss");
        window.history.replaceState(null, "", cleanedUpUrl.toString());
    }
}
exports["default"] = ClientAuthentication;


/***/ }),

/***/ "./src/Session.ts":
/*!************************!*\
  !*** ./src/Session.ts ***!
  \************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Session = exports.silentlyAuthenticate = void 0;
const solid_client_authn_core_1 = __webpack_require__(/*! @inrupt/solid-client-authn-core */ "../core/dist/index.js");
const uuid_1 = __webpack_require__(/*! uuid */ "./node_modules/uuid/dist/commonjs-browser/index.js");
const events_1 = __importDefault(__webpack_require__(/*! events */ "./node_modules/events/events.js"));
const dependencies_1 = __webpack_require__(/*! ./dependencies */ "./src/dependencies.ts");
const constant_1 = __webpack_require__(/*! ./constant */ "./src/constant.ts");
async function silentlyAuthenticate(sessionId, clientAuthn, session) {
    var _a;
    const storedSessionInfo = await clientAuthn.validateCurrentSession(sessionId);
    if (storedSessionInfo !== null) {
        window.localStorage.setItem(constant_1.KEY_CURRENT_URL, window.location.href);
        await clientAuthn.login({
            sessionId,
            prompt: "none",
            oidcIssuer: storedSessionInfo.issuer,
            redirectUrl: storedSessionInfo.redirectUrl,
            clientId: storedSessionInfo.clientAppId,
            clientSecret: storedSessionInfo.clientAppSecret,
            tokenType: (_a = storedSessionInfo.tokenType) !== null && _a !== void 0 ? _a : "DPoP",
        }, session.events);
        return true;
    }
    return false;
}
exports.silentlyAuthenticate = silentlyAuthenticate;
function isLoggedIn(sessionInfo) {
    return !!(sessionInfo === null || sessionInfo === void 0 ? void 0 : sessionInfo.isLoggedIn);
}
class Session extends events_1.default {
    constructor(sessionOptions = {}, sessionId = undefined) {
        super();
        this.tokenRequestInProgress = false;
        this.login = async (options) => {
            var _a;
            await this.clientAuthentication.login({
                sessionId: this.info.sessionId,
                ...options,
                tokenType: (_a = options.tokenType) !== null && _a !== void 0 ? _a : "DPoP",
            }, this.events);
            return new Promise(() => { });
        };
        this.fetch = async (url, init) => {
            return this.clientAuthentication.fetch(url, init);
        };
        this.internalLogout = async (emitSignal) => {
            window.localStorage.removeItem(constant_1.KEY_CURRENT_SESSION);
            await this.clientAuthentication.logout(this.info.sessionId);
            this.info.isLoggedIn = false;
            if (emitSignal) {
                this.events.emit(solid_client_authn_core_1.EVENTS.LOGOUT);
            }
        };
        this.logout = async () => this.internalLogout(true);
        this.handleIncomingRedirect = async (inputOptions = {}) => {
            var _a;
            if (this.info.isLoggedIn) {
                return this.info;
            }
            if (this.tokenRequestInProgress) {
                return undefined;
            }
            const options = typeof inputOptions === "string" ? { url: inputOptions } : inputOptions;
            const url = (_a = options.url) !== null && _a !== void 0 ? _a : window.location.href;
            const tokens = options.tokens;
            this.tokenRequestInProgress = true;
            const sessionInfo = await this.clientAuthentication.handleIncomingRedirect(url, this.events, tokens);
            if (isLoggedIn(sessionInfo)) {
                this.setSessionInfo(sessionInfo);
                const currentUrl = window.localStorage.getItem(constant_1.KEY_CURRENT_URL);
                if (currentUrl === null) {
                    this.events.emit(solid_client_authn_core_1.EVENTS.LOGIN);
                }
                else {
                    window.localStorage.removeItem(constant_1.KEY_CURRENT_URL);
                    this.events.emit(solid_client_authn_core_1.EVENTS.SESSION_RESTORED, currentUrl);
                }
            }
            else if (options.restorePreviousSession === true) {
                const storedSessionId = window.localStorage.getItem(constant_1.KEY_CURRENT_SESSION);
                if (storedSessionId !== null) {
                    const attemptedSilentAuthentication = await silentlyAuthenticate(storedSessionId, this.clientAuthentication, this);
                    if (attemptedSilentAuthentication) {
                        return new Promise(() => { });
                    }
                }
            }
            this.tokenRequestInProgress = false;
            return sessionInfo;
        };
        this.events = new Proxy(this, (0, solid_client_authn_core_1.buildProxyHandler)(Session.prototype, "events only implements ISessionEventListener"));
        if (sessionOptions.clientAuthentication) {
            this.clientAuthentication = sessionOptions.clientAuthentication;
        }
        else if (sessionOptions.secureStorage && sessionOptions.insecureStorage) {
            this.clientAuthentication = (0, dependencies_1.getClientAuthenticationWithDependencies)({
                secureStorage: sessionOptions.secureStorage,
                insecureStorage: sessionOptions.insecureStorage,
            });
        }
        else {
            this.clientAuthentication = (0, dependencies_1.getClientAuthenticationWithDependencies)({});
        }
        if (sessionOptions.sessionInfo) {
            this.info = {
                sessionId: sessionOptions.sessionInfo.sessionId,
                isLoggedIn: false,
                webId: sessionOptions.sessionInfo.webId,
            };
        }
        else {
            this.info = {
                sessionId: sessionId !== null && sessionId !== void 0 ? sessionId : (0, uuid_1.v4)(),
                isLoggedIn: false,
            };
        }
        this.events.on(solid_client_authn_core_1.EVENTS.LOGIN, () => window.localStorage.setItem(constant_1.KEY_CURRENT_SESSION, this.info.sessionId));
        this.events.on(solid_client_authn_core_1.EVENTS.SESSION_EXPIRED, () => this.internalLogout(false));
        this.events.on(solid_client_authn_core_1.EVENTS.ERROR, () => this.internalLogout(false));
    }
    onLogin(callback) {
        this.events.on(solid_client_authn_core_1.EVENTS.LOGIN, callback);
    }
    onLogout(callback) {
        this.events.on(solid_client_authn_core_1.EVENTS.LOGOUT, callback);
    }
    onError(callback) {
        this.events.on(solid_client_authn_core_1.EVENTS.ERROR, callback);
    }
    onSessionRestore(callback) {
        this.events.on(solid_client_authn_core_1.EVENTS.SESSION_RESTORED, callback);
    }
    onSessionExpiration(callback) {
        this.events.on(solid_client_authn_core_1.EVENTS.SESSION_EXPIRED, callback);
    }
    setSessionInfo(sessionInfo) {
        this.info.isLoggedIn = sessionInfo.isLoggedIn;
        this.info.webId = sessionInfo.webId;
        this.info.sessionId = sessionInfo.sessionId;
        this.info.expirationDate = sessionInfo.expirationDate;
        this.events.on(solid_client_authn_core_1.EVENTS.SESSION_EXTENDED, (expiresIn) => {
            this.info.expirationDate = Date.now() + expiresIn * 1000;
        });
    }
}
exports.Session = Session;


/***/ }),

/***/ "./src/constant.ts":
/*!*************************!*\
  !*** ./src/constant.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.KEY_CURRENT_URL = exports.KEY_CURRENT_SESSION = void 0;
const solid_client_authn_core_1 = __webpack_require__(/*! @inrupt/solid-client-authn-core */ "../core/dist/index.js");
exports.KEY_CURRENT_SESSION = `${solid_client_authn_core_1.SOLID_CLIENT_AUTHN_KEY_PREFIX}currentSession`;
exports.KEY_CURRENT_URL = `${solid_client_authn_core_1.SOLID_CLIENT_AUTHN_KEY_PREFIX}currentUrl`;


/***/ }),

/***/ "./src/defaultSession.ts":
/*!*******************************!*\
  !*** ./src/defaultSession.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.events = exports.onSessionRestore = exports.onLogout = exports.onLogin = exports.handleIncomingRedirect = exports.logout = exports.login = exports.fetch = exports.getDefaultSession = void 0;
const Session_1 = __webpack_require__(/*! ./Session */ "./src/Session.ts");
let defaultSession;
function getDefaultSession() {
    if (typeof defaultSession === "undefined") {
        defaultSession = new Session_1.Session();
    }
    return defaultSession;
}
exports.getDefaultSession = getDefaultSession;
const fetch = (...args) => {
    const session = getDefaultSession();
    return session.fetch(...args);
};
exports.fetch = fetch;
const login = (...args) => {
    const session = getDefaultSession();
    return session.login(...args);
};
exports.login = login;
const logout = (...args) => {
    const session = getDefaultSession();
    return session.logout(...args);
};
exports.logout = logout;
const handleIncomingRedirect = (...args) => {
    const session = getDefaultSession();
    return session.handleIncomingRedirect(...args);
};
exports.handleIncomingRedirect = handleIncomingRedirect;
const onLogin = (...args) => {
    const session = getDefaultSession();
    return session.onLogin(...args);
};
exports.onLogin = onLogin;
const onLogout = (...args) => {
    const session = getDefaultSession();
    return session.onLogout(...args);
};
exports.onLogout = onLogout;
const onSessionRestore = (...args) => {
    const session = getDefaultSession();
    return session.onSessionRestore(...args);
};
exports.onSessionRestore = onSessionRestore;
const events = () => {
    return getDefaultSession().events;
};
exports.events = events;


/***/ }),

/***/ "./src/dependencies.ts":
/*!*****************************!*\
  !*** ./src/dependencies.ts ***!
  \*****************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.getClientAuthenticationWithDependencies = void 0;
const solid_client_authn_core_1 = __webpack_require__(/*! @inrupt/solid-client-authn-core */ "../core/dist/index.js");
const StorageUtility_1 = __importDefault(__webpack_require__(/*! ./storage/StorageUtility */ "./src/storage/StorageUtility.ts"));
const ClientAuthentication_1 = __importDefault(__webpack_require__(/*! ./ClientAuthentication */ "./src/ClientAuthentication.ts"));
const OidcLoginHandler_1 = __importDefault(__webpack_require__(/*! ./login/oidc/OidcLoginHandler */ "./src/login/oidc/OidcLoginHandler.ts"));
const AuthorizationCodeWithPkceOidcHandler_1 = __importDefault(__webpack_require__(/*! ./login/oidc/oidcHandlers/AuthorizationCodeWithPkceOidcHandler */ "./src/login/oidc/oidcHandlers/AuthorizationCodeWithPkceOidcHandler.ts"));
const IssuerConfigFetcher_1 = __importDefault(__webpack_require__(/*! ./login/oidc/IssuerConfigFetcher */ "./src/login/oidc/IssuerConfigFetcher.ts"));
const FallbackRedirectHandler_1 = __webpack_require__(/*! ./login/oidc/incomingRedirectHandler/FallbackRedirectHandler */ "./src/login/oidc/incomingRedirectHandler/FallbackRedirectHandler.ts");
const GeneralLogoutHandler_1 = __importDefault(__webpack_require__(/*! ./logout/GeneralLogoutHandler */ "./src/logout/GeneralLogoutHandler.ts"));
const SessionInfoManager_1 = __webpack_require__(/*! ./sessionInfo/SessionInfoManager */ "./src/sessionInfo/SessionInfoManager.ts");
const AuthCodeRedirectHandler_1 = __webpack_require__(/*! ./login/oidc/incomingRedirectHandler/AuthCodeRedirectHandler */ "./src/login/oidc/incomingRedirectHandler/AuthCodeRedirectHandler.ts");
const AggregateRedirectHandler_1 = __importDefault(__webpack_require__(/*! ./login/oidc/AggregateRedirectHandler */ "./src/login/oidc/AggregateRedirectHandler.ts"));
const BrowserStorage_1 = __importDefault(__webpack_require__(/*! ./storage/BrowserStorage */ "./src/storage/BrowserStorage.ts"));
const Redirector_1 = __importDefault(__webpack_require__(/*! ./login/oidc/Redirector */ "./src/login/oidc/Redirector.ts"));
const ClientRegistrar_1 = __importDefault(__webpack_require__(/*! ./login/oidc/ClientRegistrar */ "./src/login/oidc/ClientRegistrar.ts"));
const ErrorOidcHandler_1 = __webpack_require__(/*! ./login/oidc/incomingRedirectHandler/ErrorOidcHandler */ "./src/login/oidc/incomingRedirectHandler/ErrorOidcHandler.ts");
const TokenRefresher_1 = __importDefault(__webpack_require__(/*! ./login/oidc/refresh/TokenRefresher */ "./src/login/oidc/refresh/TokenRefresher.ts"));
function getClientAuthenticationWithDependencies(dependencies) {
    const inMemoryStorage = new solid_client_authn_core_1.InMemoryStorage();
    const secureStorage = dependencies.secureStorage || inMemoryStorage;
    const insecureStorage = dependencies.insecureStorage || new BrowserStorage_1.default();
    const storageUtility = new StorageUtility_1.default(secureStorage, insecureStorage);
    const issuerConfigFetcher = new IssuerConfigFetcher_1.default(storageUtility);
    const clientRegistrar = new ClientRegistrar_1.default(storageUtility);
    const sessionInfoManager = new SessionInfoManager_1.SessionInfoManager(storageUtility);
    const tokenRefresher = new TokenRefresher_1.default(storageUtility, issuerConfigFetcher, clientRegistrar);
    const loginHandler = new OidcLoginHandler_1.default(storageUtility, new AuthorizationCodeWithPkceOidcHandler_1.default(storageUtility, new Redirector_1.default()), issuerConfigFetcher, clientRegistrar);
    const redirectHandler = new AggregateRedirectHandler_1.default([
        new ErrorOidcHandler_1.ErrorOidcHandler(),
        new AuthCodeRedirectHandler_1.AuthCodeRedirectHandler(storageUtility, sessionInfoManager, issuerConfigFetcher, clientRegistrar, tokenRefresher),
        new FallbackRedirectHandler_1.FallbackRedirectHandler(),
    ]);
    return new ClientAuthentication_1.default(loginHandler, redirectHandler, new GeneralLogoutHandler_1.default(sessionInfoManager), sessionInfoManager, issuerConfigFetcher);
}
exports.getClientAuthenticationWithDependencies = getClientAuthenticationWithDependencies;


/***/ }),

/***/ "./src/index.browser.ts":
/*!******************************!*\
  !*** ./src/index.browser.ts ***!
  \******************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const solidClientAuthentication = __importStar(__webpack_require__(/*! ./index */ "./src/index.ts"));
exports["default"] = solidClientAuthentication;


/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EVENTS = exports.InMemoryStorage = exports.ConfigurationError = exports.NotImplementedError = exports.getClientAuthenticationWithDependencies = exports.Session = void 0;
var Session_1 = __webpack_require__(/*! ./Session */ "./src/Session.ts");
Object.defineProperty(exports, "Session", ({ enumerable: true, get: function () { return Session_1.Session; } }));
var dependencies_1 = __webpack_require__(/*! ./dependencies */ "./src/dependencies.ts");
Object.defineProperty(exports, "getClientAuthenticationWithDependencies", ({ enumerable: true, get: function () { return dependencies_1.getClientAuthenticationWithDependencies; } }));
__exportStar(__webpack_require__(/*! ./defaultSession */ "./src/defaultSession.ts"), exports);
var solid_client_authn_core_1 = __webpack_require__(/*! @inrupt/solid-client-authn-core */ "../core/dist/index.js");
Object.defineProperty(exports, "NotImplementedError", ({ enumerable: true, get: function () { return solid_client_authn_core_1.NotImplementedError; } }));
Object.defineProperty(exports, "ConfigurationError", ({ enumerable: true, get: function () { return solid_client_authn_core_1.ConfigurationError; } }));
Object.defineProperty(exports, "InMemoryStorage", ({ enumerable: true, get: function () { return solid_client_authn_core_1.InMemoryStorage; } }));
Object.defineProperty(exports, "EVENTS", ({ enumerable: true, get: function () { return solid_client_authn_core_1.EVENTS; } }));


/***/ }),

/***/ "./src/login/oidc/AggregateRedirectHandler.ts":
/*!****************************************************!*\
  !*** ./src/login/oidc/AggregateRedirectHandler.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const solid_client_authn_core_1 = __webpack_require__(/*! @inrupt/solid-client-authn-core */ "../core/dist/index.js");
class AggregateRedirectHandler extends solid_client_authn_core_1.AggregateHandler {
    constructor(redirectHandlers) {
        super(redirectHandlers);
    }
}
exports["default"] = AggregateRedirectHandler;


/***/ }),

/***/ "./src/login/oidc/ClientRegistrar.ts":
/*!*******************************************!*\
  !*** ./src/login/oidc/ClientRegistrar.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const oidc_client_ext_1 = __webpack_require__(/*! @inrupt/oidc-client-ext */ "../oidc-browser/dist/index.es.js");
class ClientRegistrar {
    constructor(storageUtility) {
        this.storageUtility = storageUtility;
    }
    async getClient(options, issuerConfig) {
        const [storedClientId, storedClientSecret,] = await Promise.all([
            this.storageUtility.getForUser(options.sessionId, "clientId", {
                secure: false,
            }),
            this.storageUtility.getForUser(options.sessionId, "clientSecret", {
                secure: false,
            }),
        ]);
        if (storedClientId) {
            return {
                clientId: storedClientId,
                clientSecret: storedClientSecret,
                clientType: "dynamic",
            };
        }
        try {
            const registeredClient = await (0, oidc_client_ext_1.registerClient)(options, issuerConfig);
            const infoToSave = {
                clientId: registeredClient.clientId,
            };
            if (registeredClient.clientSecret) {
                infoToSave.clientSecret = registeredClient.clientSecret;
            }
            if (registeredClient.idTokenSignedResponseAlg) {
                infoToSave.idTokenSignedResponseAlg =
                    registeredClient.idTokenSignedResponseAlg;
            }
            await this.storageUtility.setForUser(options.sessionId, infoToSave, {
                secure: false,
            });
            return registeredClient;
        }
        catch (error) {
            throw new Error(`Client registration failed: [${error}]`);
        }
    }
}
exports["default"] = ClientRegistrar;


/***/ }),

/***/ "./src/login/oidc/IssuerConfigFetcher.ts":
/*!***********************************************!*\
  !*** ./src/login/oidc/IssuerConfigFetcher.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.WELL_KNOWN_OPENID_CONFIG = void 0;
const solid_client_authn_core_1 = __webpack_require__(/*! @inrupt/solid-client-authn-core */ "../core/dist/index.js");
const universal_fetch_1 = __webpack_require__(/*! @inrupt/universal-fetch */ "./node_modules/@inrupt/universal-fetch/dist/index-browser.js");
exports.WELL_KNOWN_OPENID_CONFIG = ".well-known/openid-configuration";
const issuerConfigKeyMap = {
    issuer: {
        toKey: "issuer",
        convertToUrl: true,
    },
    authorization_endpoint: {
        toKey: "authorizationEndpoint",
        convertToUrl: true,
    },
    token_endpoint: {
        toKey: "tokenEndpoint",
        convertToUrl: true,
    },
    userinfo_endpoint: {
        toKey: "userinfoEndpoint",
        convertToUrl: true,
    },
    jwks_uri: {
        toKey: "jwksUri",
        convertToUrl: true,
    },
    registration_endpoint: {
        toKey: "registrationEndpoint",
        convertToUrl: true,
    },
    scopes_supported: { toKey: "scopesSupported" },
    response_types_supported: { toKey: "responseTypesSupported" },
    response_modes_supported: { toKey: "responseModesSupported" },
    grant_types_supported: { toKey: "grantTypesSupported" },
    acr_values_supported: { toKey: "acrValuesSupported" },
    subject_types_supported: { toKey: "subjectTypesSupported" },
    id_token_signing_alg_values_supported: {
        toKey: "idTokenSigningAlgValuesSupported",
    },
    id_token_encryption_alg_values_supported: {
        toKey: "idTokenEncryptionAlgValuesSupported",
    },
    id_token_encryption_enc_values_supported: {
        toKey: "idTokenEncryptionEncValuesSupported",
    },
    userinfo_signing_alg_values_supported: {
        toKey: "userinfoSigningAlgValuesSupported",
    },
    userinfo_encryption_alg_values_supported: {
        toKey: "userinfoEncryptionAlgValuesSupported",
    },
    userinfo_encryption_enc_values_supported: {
        toKey: "userinfoEncryptionEncValuesSupported",
    },
    request_object_signing_alg_values_supported: {
        toKey: "requestObjectSigningAlgValuesSupported",
    },
    request_object_encryption_alg_values_supported: {
        toKey: "requestObjectEncryptionAlgValuesSupported",
    },
    request_object_encryption_enc_values_supported: {
        toKey: "requestObjectEncryptionEncValuesSupported",
    },
    token_endpoint_auth_methods_supported: {
        toKey: "tokenEndpointAuthMethodsSupported",
    },
    token_endpoint_auth_signing_alg_values_supported: {
        toKey: "tokenEndpointAuthSigningAlgValuesSupported",
    },
    display_values_supported: { toKey: "displayValuesSupported" },
    claim_types_supported: { toKey: "claimTypesSupported" },
    claims_supported: { toKey: "claimsSupported" },
    service_documentation: { toKey: "serviceDocumentation" },
    claims_locales_supported: { toKey: "claimsLocalesSupported" },
    ui_locales_supported: { toKey: "uiLocalesSupported" },
    claims_parameter_supported: { toKey: "claimsParameterSupported" },
    request_parameter_supported: { toKey: "requestParameterSupported" },
    request_uri_parameter_supported: { toKey: "requestUriParameterSupported" },
    require_request_uri_registration: { toKey: "requireRequestUriRegistration" },
    op_policy_uri: {
        toKey: "opPolicyUri",
        convertToUrl: true,
    },
    op_tos_uri: {
        toKey: "opTosUri",
        convertToUrl: true,
    },
};
function processConfig(config) {
    const parsedConfig = {};
    Object.keys(config).forEach((key) => {
        if (issuerConfigKeyMap[key]) {
            parsedConfig[issuerConfigKeyMap[key].toKey] = config[key];
        }
    });
    if (!Array.isArray(parsedConfig.scopesSupported)) {
        parsedConfig.scopesSupported = ["openid"];
    }
    return parsedConfig;
}
class IssuerConfigFetcher {
    constructor(storageUtility) {
        this.storageUtility = storageUtility;
    }
    static getLocalStorageKey(issuer) {
        return `issuerConfig:${issuer}`;
    }
    async fetchConfig(issuer) {
        let issuerConfig;
        const openIdConfigUrl = new URL(exports.WELL_KNOWN_OPENID_CONFIG, issuer.endsWith("/") ? issuer : `${issuer}/`).href;
        const issuerConfigRequestBody = await (0, universal_fetch_1.fetch)(openIdConfigUrl);
        try {
            issuerConfig = processConfig(await issuerConfigRequestBody.json());
        }
        catch (err) {
            throw new solid_client_authn_core_1.ConfigurationError(`[${issuer.toString()}] has an invalid configuration: ${err.message}`);
        }
        await this.storageUtility.set(IssuerConfigFetcher.getLocalStorageKey(issuer), JSON.stringify(issuerConfig));
        return issuerConfig;
    }
}
exports["default"] = IssuerConfigFetcher;


/***/ }),

/***/ "./src/login/oidc/OidcLoginHandler.ts":
/*!********************************************!*\
  !*** ./src/login/oidc/OidcLoginHandler.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const solid_client_authn_core_1 = __webpack_require__(/*! @inrupt/solid-client-authn-core */ "../core/dist/index.js");
function hasIssuer(options) {
    return typeof options.oidcIssuer === "string";
}
function hasRedirectUrl(options) {
    return typeof options.redirectUrl === "string";
}
class OidcLoginHandler {
    constructor(storageUtility, oidcHandler, issuerConfigFetcher, clientRegistrar) {
        this.storageUtility = storageUtility;
        this.oidcHandler = oidcHandler;
        this.issuerConfigFetcher = issuerConfigFetcher;
        this.clientRegistrar = clientRegistrar;
    }
    async canHandle(options) {
        return hasIssuer(options) && hasRedirectUrl(options);
    }
    async handle(options) {
        if (!hasIssuer(options)) {
            throw new solid_client_authn_core_1.ConfigurationError(`OidcLoginHandler requires an OIDC issuer: missing property 'oidcIssuer' in ${JSON.stringify(options)}`);
        }
        if (!hasRedirectUrl(options)) {
            throw new solid_client_authn_core_1.ConfigurationError(`OidcLoginHandler requires a redirect URL: missing property 'redirectUrl' in ${JSON.stringify(options)}`);
        }
        const issuerConfig = await this.issuerConfigFetcher.fetchConfig(options.oidcIssuer);
        const clientRegistration = await (0, solid_client_authn_core_1.handleRegistration)(options, issuerConfig, this.storageUtility, this.clientRegistrar);
        const OidcOptions = {
            issuer: issuerConfig.issuer,
            dpop: options.tokenType.toLowerCase() === "dpop",
            ...options,
            issuerConfiguration: issuerConfig,
            client: clientRegistration,
        };
        return this.oidcHandler.handle(OidcOptions);
    }
}
exports["default"] = OidcLoginHandler;


/***/ }),

/***/ "./src/login/oidc/Redirector.ts":
/*!**************************************!*\
  !*** ./src/login/oidc/Redirector.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
class Redirector {
    redirect(redirectUrl, options) {
        if (options && options.handleRedirect) {
            options.handleRedirect(redirectUrl);
        }
        else if (options && options.redirectByReplacingState) {
            window.history.replaceState({}, "", redirectUrl);
        }
        else {
            window.location.href = redirectUrl;
        }
    }
}
exports["default"] = Redirector;


/***/ }),

/***/ "./src/login/oidc/incomingRedirectHandler/AuthCodeRedirectHandler.ts":
/*!***************************************************************************!*\
  !*** ./src/login/oidc/incomingRedirectHandler/AuthCodeRedirectHandler.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AuthCodeRedirectHandler = void 0;
const universal_fetch_1 = __webpack_require__(/*! @inrupt/universal-fetch */ "./node_modules/@inrupt/universal-fetch/dist/index-browser.js");
const solid_client_authn_core_1 = __webpack_require__(/*! @inrupt/solid-client-authn-core */ "../core/dist/index.js");
const oidc_client_ext_1 = __webpack_require__(/*! @inrupt/oidc-client-ext */ "../oidc-browser/dist/index.es.js");
class AuthCodeRedirectHandler {
    constructor(storageUtility, sessionInfoManager, issuerConfigFetcher, clientRegistrar, tokerRefresher) {
        this.storageUtility = storageUtility;
        this.sessionInfoManager = sessionInfoManager;
        this.issuerConfigFetcher = issuerConfigFetcher;
        this.clientRegistrar = clientRegistrar;
        this.tokerRefresher = tokerRefresher;
    }
    async canHandle(redirectUrl) {
        try {
            const myUrl = new URL(redirectUrl);
            return (myUrl.searchParams.get("code") !== null &&
                myUrl.searchParams.get("state") !== null);
        }
        catch (e) {
            throw new Error(`[${redirectUrl}] is not a valid URL, and cannot be used as a redirect URL: ${e}`);
        }
    }
    async handle(redirectUrl, eventEmitter, stored_tokens) {
        if (!(await this.canHandle(redirectUrl))) {
            throw new Error(`AuthCodeRedirectHandler cannot handle [${redirectUrl}]: it is missing one of [code, state].`);
        }
        const url = new URL(redirectUrl);
        const oauthState = url.searchParams.get("state");
        const storedSessionId = (await this.storageUtility.getForUser(oauthState, "sessionId", {
            errorIfNull: true,
        }));
        const { issuerConfig, codeVerifier, redirectUrl: storedRedirectIri, dpop: isDpop, } = await (0, solid_client_authn_core_1.loadOidcContextFromStorage)(storedSessionId, this.storageUtility, this.issuerConfigFetcher);
        const iss = url.searchParams.get("iss");
        if (typeof iss === "string" && iss !== issuerConfig.issuer) {
            throw new Error(`The value of the iss parameter (${iss}) does not match the issuer identifier of the authorization server (${issuerConfig.issuer}). See [rfc9207](https://www.rfc-editor.org/rfc/rfc9207.html#section-2.3-3.1.1)`);
        }
        if (codeVerifier === undefined) {
            throw new Error(`The code verifier for session ${storedSessionId} is missing from storage.`);
        }
        if (storedRedirectIri === undefined) {
            throw new Error(`The redirect URL for session ${storedSessionId} is missing from storage.`);
        }
        const client = await this.clientRegistrar.getClient({ sessionId: storedSessionId }, issuerConfig);
        let tokens;
        const tokenCreatedAt = Date.now();
        if (isDpop) {
            if (stored_tokens)
                tokens = stored_tokens;
            else
                tokens = await (0, oidc_client_ext_1.getDpopToken)(issuerConfig, client, {
                    grantType: "authorization_code",
                    code: url.searchParams.get("code"),
                    codeVerifier,
                    redirectUrl: storedRedirectIri,
                });
            window.localStorage.removeItem(`oidc.${oauthState}`);
        }
        else {
            tokens = await (0, oidc_client_ext_1.getBearerToken)(url.toString());
        }
        let refreshOptions;
        if (tokens.refreshToken !== undefined) {
            refreshOptions = {
                sessionId: storedSessionId,
                refreshToken: tokens.refreshToken,
                tokenRefresher: this.tokerRefresher,
            };
        }
        const authFetch = await (0, solid_client_authn_core_1.buildAuthenticatedFetch)(universal_fetch_1.fetch, tokens.accessToken, {
            dpopKey: tokens.dpopKey,
            refreshOptions,
            eventEmitter,
            expiresIn: tokens.expiresIn,
        });
        await this.storageUtility.setForUser(storedSessionId, {
            webId: tokens.webId,
            isLoggedIn: "true",
        }, { secure: true });
        const sessionInfo = await this.sessionInfoManager.get(storedSessionId);
        if (!sessionInfo) {
            throw new Error(`Could not retrieve session: [${storedSessionId}].`);
        }
        return Object.assign(sessionInfo, {
            fetch: authFetch,
            tokens,
            expirationDate: typeof tokens.expiresIn === "number"
                ? tokenCreatedAt + tokens.expiresIn * 1000
                : null,
        });
    }
}
exports.AuthCodeRedirectHandler = AuthCodeRedirectHandler;


/***/ }),

/***/ "./src/login/oidc/incomingRedirectHandler/ErrorOidcHandler.ts":
/*!********************************************************************!*\
  !*** ./src/login/oidc/incomingRedirectHandler/ErrorOidcHandler.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ErrorOidcHandler = void 0;
const solid_client_authn_core_1 = __webpack_require__(/*! @inrupt/solid-client-authn-core */ "../core/dist/index.js");
const SessionInfoManager_1 = __webpack_require__(/*! ../../../sessionInfo/SessionInfoManager */ "./src/sessionInfo/SessionInfoManager.ts");
class ErrorOidcHandler {
    async canHandle(redirectUrl) {
        try {
            return new URL(redirectUrl).searchParams.has("error");
        }
        catch (e) {
            throw new Error(`[${redirectUrl}] is not a valid URL, and cannot be used as a redirect URL: ${e}`);
        }
    }
    async handle(redirectUrl, eventEmitter) {
        if (eventEmitter !== undefined) {
            const url = new URL(redirectUrl);
            const errorUrl = url.searchParams.get("error");
            const errorDescriptionUrl = url.searchParams.get("error_description");
            eventEmitter.emit(solid_client_authn_core_1.EVENTS.ERROR, errorUrl, errorDescriptionUrl);
        }
        return (0, SessionInfoManager_1.getUnauthenticatedSession)();
    }
}
exports.ErrorOidcHandler = ErrorOidcHandler;


/***/ }),

/***/ "./src/login/oidc/incomingRedirectHandler/FallbackRedirectHandler.ts":
/*!***************************************************************************!*\
  !*** ./src/login/oidc/incomingRedirectHandler/FallbackRedirectHandler.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FallbackRedirectHandler = void 0;
const SessionInfoManager_1 = __webpack_require__(/*! ../../../sessionInfo/SessionInfoManager */ "./src/sessionInfo/SessionInfoManager.ts");
class FallbackRedirectHandler {
    async canHandle(redirectUrl) {
        try {
            new URL(redirectUrl);
            return true;
        }
        catch (e) {
            throw new Error(`[${redirectUrl}] is not a valid URL, and cannot be used as a redirect URL: ${e}`);
        }
    }
    async handle(_redirectUrl) {
        return (0, SessionInfoManager_1.getUnauthenticatedSession)();
    }
}
exports.FallbackRedirectHandler = FallbackRedirectHandler;


/***/ }),

/***/ "./src/login/oidc/oidcHandlers/AuthorizationCodeWithPkceOidcHandler.ts":
/*!*****************************************************************************!*\
  !*** ./src/login/oidc/oidcHandlers/AuthorizationCodeWithPkceOidcHandler.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const solid_client_authn_core_1 = __webpack_require__(/*! @inrupt/solid-client-authn-core */ "../core/dist/index.js");
const oidc_client_ext_1 = __webpack_require__(/*! @inrupt/oidc-client-ext */ "../oidc-browser/dist/index.es.js");
class AuthorizationCodeWithPkceOidcHandler {
    constructor(storageUtility, redirector) {
        this.storageUtility = storageUtility;
        this.redirector = redirector;
    }
    async canHandle(oidcLoginOptions) {
        return !!(oidcLoginOptions.issuerConfiguration.grantTypesSupported &&
            oidcLoginOptions.issuerConfiguration.grantTypesSupported.indexOf("authorization_code") > -1);
    }
    async handle(oidcLoginOptions) {
        var _a;
        const oidcOptions = {
            authority: oidcLoginOptions.issuer.toString(),
            client_id: oidcLoginOptions.client.clientId,
            client_secret: oidcLoginOptions.client.clientSecret,
            redirect_uri: oidcLoginOptions.redirectUrl.toString(),
            post_logout_redirect_uri: oidcLoginOptions.redirectUrl.toString(),
            response_type: "code",
            scope: solid_client_authn_core_1.DEFAULT_SCOPES,
            filterProtocolClaims: true,
            loadUserInfo: false,
            code_verifier: true,
            prompt: (_a = oidcLoginOptions.prompt) !== null && _a !== void 0 ? _a : "consent",
        };
        const oidcClientLibrary = new oidc_client_ext_1.OidcClient(oidcOptions);
        const { redirector } = this;
        const storage = this.storageUtility;
        try {
            const signingRequest = await oidcClientLibrary.createSigninRequest();
            await Promise.all([
                storage.setForUser(signingRequest.state._id, {
                    sessionId: oidcLoginOptions.sessionId,
                }),
                storage.setForUser(oidcLoginOptions.sessionId, {
                    codeVerifier: signingRequest.state._code_verifier,
                    issuer: oidcLoginOptions.issuer.toString(),
                    redirectUrl: oidcLoginOptions.redirectUrl,
                    dpop: oidcLoginOptions.dpop ? "true" : "false",
                }),
            ]);
            redirector.redirect(signingRequest.url.toString(), {
                handleRedirect: oidcLoginOptions.handleRedirect,
            });
        }
        catch (err) {
            console.error(err);
        }
        return undefined;
    }
}
exports["default"] = AuthorizationCodeWithPkceOidcHandler;


/***/ }),

/***/ "./src/login/oidc/refresh/TokenRefresher.ts":
/*!**************************************************!*\
  !*** ./src/login/oidc/refresh/TokenRefresher.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const solid_client_authn_core_1 = __webpack_require__(/*! @inrupt/solid-client-authn-core */ "../core/dist/index.js");
const oidc_client_ext_1 = __webpack_require__(/*! @inrupt/oidc-client-ext */ "../oidc-browser/dist/index.es.js");
class TokenRefresher {
    constructor(storageUtility, issuerConfigFetcher, clientRegistrar) {
        this.storageUtility = storageUtility;
        this.issuerConfigFetcher = issuerConfigFetcher;
        this.clientRegistrar = clientRegistrar;
    }
    async refresh(sessionId, refreshToken, dpopKey, eventEmitter) {
        const oidcContext = await (0, solid_client_authn_core_1.loadOidcContextFromStorage)(sessionId, this.storageUtility, this.issuerConfigFetcher);
        const clientInfo = await this.clientRegistrar.getClient({ sessionId }, oidcContext.issuerConfig);
        if (refreshToken === undefined) {
            throw new Error(`Session [${sessionId}] has no refresh token to allow it to refresh its access token.`);
        }
        if (oidcContext.dpop && dpopKey === undefined) {
            throw new Error(`For session [${sessionId}], the key bound to the DPoP access token must be provided to refresh said access token.`);
        }
        const tokenSet = await (0, oidc_client_ext_1.refresh)(refreshToken, oidcContext.issuerConfig, clientInfo, dpopKey);
        if (tokenSet.refreshToken !== undefined) {
            eventEmitter === null || eventEmitter === void 0 ? void 0 : eventEmitter.emit(solid_client_authn_core_1.EVENTS.NEW_REFRESH_TOKEN, tokenSet.refreshToken);
            await this.storageUtility.setForUser(sessionId, {
                refreshToken: tokenSet.refreshToken,
            });
        }
        return tokenSet;
    }
}
exports["default"] = TokenRefresher;


/***/ }),

/***/ "./src/logout/GeneralLogoutHandler.ts":
/*!********************************************!*\
  !*** ./src/logout/GeneralLogoutHandler.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
class GeneralLogoutHandler {
    constructor(sessionInfoManager) {
        this.sessionInfoManager = sessionInfoManager;
    }
    async canHandle() {
        return true;
    }
    async handle(userId) {
        await this.sessionInfoManager.clear(userId);
    }
}
exports["default"] = GeneralLogoutHandler;


/***/ }),

/***/ "./src/sessionInfo/SessionInfoManager.ts":
/*!***********************************************!*\
  !*** ./src/sessionInfo/SessionInfoManager.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SessionInfoManager = exports.clear = exports.getUnauthenticatedSession = void 0;
const solid_client_authn_core_1 = __webpack_require__(/*! @inrupt/solid-client-authn-core */ "../core/dist/index.js");
const uuid_1 = __webpack_require__(/*! uuid */ "./node_modules/uuid/dist/commonjs-browser/index.js");
const oidc_client_ext_1 = __webpack_require__(/*! @inrupt/oidc-client-ext */ "../oidc-browser/dist/index.es.js");
const universal_fetch_1 = __webpack_require__(/*! @inrupt/universal-fetch */ "./node_modules/@inrupt/universal-fetch/dist/index-browser.js");
function getUnauthenticatedSession() {
    return {
        isLoggedIn: false,
        sessionId: (0, uuid_1.v4)(),
        fetch: universal_fetch_1.fetch,
    };
}
exports.getUnauthenticatedSession = getUnauthenticatedSession;
async function clear(sessionId, storage) {
    await Promise.all([
        storage.deleteAllUserData(sessionId, { secure: false }),
        storage.deleteAllUserData(sessionId, { secure: true }),
        storage.delete("clientKey", { secure: false }),
    ]);
    await (0, oidc_client_ext_1.clearOidcPersistentStorage)();
}
exports.clear = clear;
class SessionInfoManager {
    constructor(storageUtility) {
        this.storageUtility = storageUtility;
    }
    update(_sessionId, _options) {
        throw new Error("Not Implemented");
    }
    async get(sessionId) {
        var _a;
        const isLoggedIn = await this.storageUtility.getForUser(sessionId, "isLoggedIn", {
            secure: true,
        });
        const webId = await this.storageUtility.getForUser(sessionId, "webId", {
            secure: true,
        });
        const clientId = await this.storageUtility.getForUser(sessionId, "clientId", {
            secure: false,
        });
        const clientSecret = await this.storageUtility.getForUser(sessionId, "clientSecret", {
            secure: false,
        });
        const redirectUrl = await this.storageUtility.getForUser(sessionId, "redirectUrl", {
            secure: false,
        });
        const refreshToken = await this.storageUtility.getForUser(sessionId, "refreshToken", {
            secure: true,
        });
        const issuer = await this.storageUtility.getForUser(sessionId, "issuer", {
            secure: false,
        });
        const tokenType = (_a = (await this.storageUtility.getForUser(sessionId, "tokenType", {
            secure: false,
        }))) !== null && _a !== void 0 ? _a : "DPoP";
        if (!(0, solid_client_authn_core_1.isSupportedTokenType)(tokenType)) {
            throw new Error(`Tokens of type [${tokenType}] are not supported.`);
        }
        if (clientId === undefined &&
            isLoggedIn === undefined &&
            webId === undefined &&
            refreshToken === undefined) {
            return undefined;
        }
        return {
            sessionId,
            webId,
            isLoggedIn: isLoggedIn === "true",
            redirectUrl,
            refreshToken,
            issuer,
            clientAppId: clientId,
            clientAppSecret: clientSecret,
            tokenType,
        };
    }
    async getAll() {
        throw new Error("Not implemented");
    }
    async clear(sessionId) {
        return clear(sessionId, this.storageUtility);
    }
    async register(_sessionId) {
        throw new Error("Not implemented");
    }
    async getRegisteredSessionIdAll() {
        throw new Error("Not implemented");
    }
    async clearAll() {
        throw new Error("Not implemented");
    }
}
exports.SessionInfoManager = SessionInfoManager;


/***/ }),

/***/ "./src/storage/BrowserStorage.ts":
/*!***************************************!*\
  !*** ./src/storage/BrowserStorage.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
class BrowserStorage {
    get storage() {
        return window.localStorage;
    }
    async get(key) {
        return this.storage.getItem(key) || undefined;
    }
    async set(key, value) {
        this.storage.setItem(key, value);
    }
    async delete(key) {
        this.storage.removeItem(key);
    }
}
exports["default"] = BrowserStorage;


/***/ }),

/***/ "./src/storage/StorageUtility.ts":
/*!***************************************!*\
  !*** ./src/storage/StorageUtility.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const solid_client_authn_core_1 = __webpack_require__(/*! @inrupt/solid-client-authn-core */ "../core/dist/index.js");
class StorageUtilityBrowser extends solid_client_authn_core_1.StorageUtility {
    constructor(secureStorage, insecureStorage) {
        super(secureStorage, insecureStorage);
    }
}
exports["default"] = StorageUtilityBrowser;


/***/ }),

/***/ "./node_modules/@inrupt/universal-fetch/dist/index-browser.js":
/*!********************************************************************!*\
  !*** ./node_modules/@inrupt/universal-fetch/dist/index-browser.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({ value: true }));

var indexBrowser = globalThis.fetch;
const { fetch, Response, Request, Headers } = globalThis;

exports.Headers = Headers;
exports.Request = Request;
exports.Response = Response;
exports["default"] = indexBrowser;
exports.fetch = fetch;


/***/ }),

/***/ "./node_modules/events/events.js":
/*!***************************************!*\
  !*** ./node_modules/events/events.js ***!
  \***************************************/
/***/ ((module) => {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



var R = typeof Reflect === 'object' ? Reflect : null
var ReflectApply = R && typeof R.apply === 'function'
  ? R.apply
  : function ReflectApply(target, receiver, args) {
    return Function.prototype.apply.call(target, receiver, args);
  }

var ReflectOwnKeys
if (R && typeof R.ownKeys === 'function') {
  ReflectOwnKeys = R.ownKeys
} else if (Object.getOwnPropertySymbols) {
  ReflectOwnKeys = function ReflectOwnKeys(target) {
    return Object.getOwnPropertyNames(target)
      .concat(Object.getOwnPropertySymbols(target));
  };
} else {
  ReflectOwnKeys = function ReflectOwnKeys(target) {
    return Object.getOwnPropertyNames(target);
  };
}

function ProcessEmitWarning(warning) {
  if (console && console.warn) console.warn(warning);
}

var NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {
  return value !== value;
}

function EventEmitter() {
  EventEmitter.init.call(this);
}
module.exports = EventEmitter;
module.exports.once = once;

// Backwards-compat with node 0.10.x
EventEmitter.EventEmitter = EventEmitter;

EventEmitter.prototype._events = undefined;
EventEmitter.prototype._eventsCount = 0;
EventEmitter.prototype._maxListeners = undefined;

// By default EventEmitters will print a warning if more than 10 listeners are
// added to it. This is a useful default which helps finding memory leaks.
var defaultMaxListeners = 10;

function checkListener(listener) {
  if (typeof listener !== 'function') {
    throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof listener);
  }
}

Object.defineProperty(EventEmitter, 'defaultMaxListeners', {
  enumerable: true,
  get: function() {
    return defaultMaxListeners;
  },
  set: function(arg) {
    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {
      throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + arg + '.');
    }
    defaultMaxListeners = arg;
  }
});

EventEmitter.init = function() {

  if (this._events === undefined ||
      this._events === Object.getPrototypeOf(this)._events) {
    this._events = Object.create(null);
    this._eventsCount = 0;
  }

  this._maxListeners = this._maxListeners || undefined;
};

// Obviously not all Emitters should be limited to 10. This function allows
// that to be increased. Set to zero for unlimited.
EventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {
  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {
    throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + n + '.');
  }
  this._maxListeners = n;
  return this;
};

function _getMaxListeners(that) {
  if (that._maxListeners === undefined)
    return EventEmitter.defaultMaxListeners;
  return that._maxListeners;
}

EventEmitter.prototype.getMaxListeners = function getMaxListeners() {
  return _getMaxListeners(this);
};

EventEmitter.prototype.emit = function emit(type) {
  var args = [];
  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);
  var doError = (type === 'error');

  var events = this._events;
  if (events !== undefined)
    doError = (doError && events.error === undefined);
  else if (!doError)
    return false;

  // If there is no 'error' event listener then throw.
  if (doError) {
    var er;
    if (args.length > 0)
      er = args[0];
    if (er instanceof Error) {
      // Note: The comments on the `throw` lines are intentional, they show
      // up in Node's output if this results in an unhandled exception.
      throw er; // Unhandled 'error' event
    }
    // At least give some kind of context to the user
    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));
    err.context = er;
    throw err; // Unhandled 'error' event
  }

  var handler = events[type];

  if (handler === undefined)
    return false;

  if (typeof handler === 'function') {
    ReflectApply(handler, this, args);
  } else {
    var len = handler.length;
    var listeners = arrayClone(handler, len);
    for (var i = 0; i < len; ++i)
      ReflectApply(listeners[i], this, args);
  }

  return true;
};

function _addListener(target, type, listener, prepend) {
  var m;
  var events;
  var existing;

  checkListener(listener);

  events = target._events;
  if (events === undefined) {
    events = target._events = Object.create(null);
    target._eventsCount = 0;
  } else {
    // To avoid recursion in the case that type === "newListener"! Before
    // adding it to the listeners, first emit "newListener".
    if (events.newListener !== undefined) {
      target.emit('newListener', type,
                  listener.listener ? listener.listener : listener);

      // Re-assign `events` because a newListener handler could have caused the
      // this._events to be assigned to a new object
      events = target._events;
    }
    existing = events[type];
  }

  if (existing === undefined) {
    // Optimize the case of one listener. Don't need the extra array object.
    existing = events[type] = listener;
    ++target._eventsCount;
  } else {
    if (typeof existing === 'function') {
      // Adding the second element, need to change to array.
      existing = events[type] =
        prepend ? [listener, existing] : [existing, listener];
      // If we've already got an array, just append.
    } else if (prepend) {
      existing.unshift(listener);
    } else {
      existing.push(listener);
    }

    // Check for listener leak
    m = _getMaxListeners(target);
    if (m > 0 && existing.length > m && !existing.warned) {
      existing.warned = true;
      // No error code for this since it is a Warning
      // eslint-disable-next-line no-restricted-syntax
      var w = new Error('Possible EventEmitter memory leak detected. ' +
                          existing.length + ' ' + String(type) + ' listeners ' +
                          'added. Use emitter.setMaxListeners() to ' +
                          'increase limit');
      w.name = 'MaxListenersExceededWarning';
      w.emitter = target;
      w.type = type;
      w.count = existing.length;
      ProcessEmitWarning(w);
    }
  }

  return target;
}

EventEmitter.prototype.addListener = function addListener(type, listener) {
  return _addListener(this, type, listener, false);
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener;

EventEmitter.prototype.prependListener =
    function prependListener(type, listener) {
      return _addListener(this, type, listener, true);
    };

function onceWrapper() {
  if (!this.fired) {
    this.target.removeListener(this.type, this.wrapFn);
    this.fired = true;
    if (arguments.length === 0)
      return this.listener.call(this.target);
    return this.listener.apply(this.target, arguments);
  }
}

function _onceWrap(target, type, listener) {
  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };
  var wrapped = onceWrapper.bind(state);
  wrapped.listener = listener;
  state.wrapFn = wrapped;
  return wrapped;
}

EventEmitter.prototype.once = function once(type, listener) {
  checkListener(listener);
  this.on(type, _onceWrap(this, type, listener));
  return this;
};

EventEmitter.prototype.prependOnceListener =
    function prependOnceListener(type, listener) {
      checkListener(listener);
      this.prependListener(type, _onceWrap(this, type, listener));
      return this;
    };

// Emits a 'removeListener' event if and only if the listener was removed.
EventEmitter.prototype.removeListener =
    function removeListener(type, listener) {
      var list, events, position, i, originalListener;

      checkListener(listener);

      events = this._events;
      if (events === undefined)
        return this;

      list = events[type];
      if (list === undefined)
        return this;

      if (list === listener || list.listener === listener) {
        if (--this._eventsCount === 0)
          this._events = Object.create(null);
        else {
          delete events[type];
          if (events.removeListener)
            this.emit('removeListener', type, list.listener || listener);
        }
      } else if (typeof list !== 'function') {
        position = -1;

        for (i = list.length - 1; i >= 0; i--) {
          if (list[i] === listener || list[i].listener === listener) {
            originalListener = list[i].listener;
            position = i;
            break;
          }
        }

        if (position < 0)
          return this;

        if (position === 0)
          list.shift();
        else {
          spliceOne(list, position);
        }

        if (list.length === 1)
          events[type] = list[0];

        if (events.removeListener !== undefined)
          this.emit('removeListener', type, originalListener || listener);
      }

      return this;
    };

EventEmitter.prototype.off = EventEmitter.prototype.removeListener;

EventEmitter.prototype.removeAllListeners =
    function removeAllListeners(type) {
      var listeners, events, i;

      events = this._events;
      if (events === undefined)
        return this;

      // not listening for removeListener, no need to emit
      if (events.removeListener === undefined) {
        if (arguments.length === 0) {
          this._events = Object.create(null);
          this._eventsCount = 0;
        } else if (events[type] !== undefined) {
          if (--this._eventsCount === 0)
            this._events = Object.create(null);
          else
            delete events[type];
        }
        return this;
      }

      // emit removeListener for all listeners on all events
      if (arguments.length === 0) {
        var keys = Object.keys(events);
        var key;
        for (i = 0; i < keys.length; ++i) {
          key = keys[i];
          if (key === 'removeListener') continue;
          this.removeAllListeners(key);
        }
        this.removeAllListeners('removeListener');
        this._events = Object.create(null);
        this._eventsCount = 0;
        return this;
      }

      listeners = events[type];

      if (typeof listeners === 'function') {
        this.removeListener(type, listeners);
      } else if (listeners !== undefined) {
        // LIFO order
        for (i = listeners.length - 1; i >= 0; i--) {
          this.removeListener(type, listeners[i]);
        }
      }

      return this;
    };

function _listeners(target, type, unwrap) {
  var events = target._events;

  if (events === undefined)
    return [];

  var evlistener = events[type];
  if (evlistener === undefined)
    return [];

  if (typeof evlistener === 'function')
    return unwrap ? [evlistener.listener || evlistener] : [evlistener];

  return unwrap ?
    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);
}

EventEmitter.prototype.listeners = function listeners(type) {
  return _listeners(this, type, true);
};

EventEmitter.prototype.rawListeners = function rawListeners(type) {
  return _listeners(this, type, false);
};

EventEmitter.listenerCount = function(emitter, type) {
  if (typeof emitter.listenerCount === 'function') {
    return emitter.listenerCount(type);
  } else {
    return listenerCount.call(emitter, type);
  }
};

EventEmitter.prototype.listenerCount = listenerCount;
function listenerCount(type) {
  var events = this._events;

  if (events !== undefined) {
    var evlistener = events[type];

    if (typeof evlistener === 'function') {
      return 1;
    } else if (evlistener !== undefined) {
      return evlistener.length;
    }
  }

  return 0;
}

EventEmitter.prototype.eventNames = function eventNames() {
  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];
};

function arrayClone(arr, n) {
  var copy = new Array(n);
  for (var i = 0; i < n; ++i)
    copy[i] = arr[i];
  return copy;
}

function spliceOne(list, index) {
  for (; index + 1 < list.length; index++)
    list[index] = list[index + 1];
  list.pop();
}

function unwrapListeners(arr) {
  var ret = new Array(arr.length);
  for (var i = 0; i < ret.length; ++i) {
    ret[i] = arr[i].listener || arr[i];
  }
  return ret;
}

function once(emitter, name) {
  return new Promise(function (resolve, reject) {
    function errorListener(err) {
      emitter.removeListener(name, resolver);
      reject(err);
    }

    function resolver() {
      if (typeof emitter.removeListener === 'function') {
        emitter.removeListener('error', errorListener);
      }
      resolve([].slice.call(arguments));
    };

    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });
    if (name !== 'error') {
      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });
    }
  });
}

function addErrorHandlerIfEventEmitter(emitter, handler, flags) {
  if (typeof emitter.on === 'function') {
    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);
  }
}

function eventTargetAgnosticAddListener(emitter, name, listener, flags) {
  if (typeof emitter.on === 'function') {
    if (flags.once) {
      emitter.once(name, listener);
    } else {
      emitter.on(name, listener);
    }
  } else if (typeof emitter.addEventListener === 'function') {
    // EventTarget does not have `error` event semantics like Node
    // EventEmitters, we do not listen for `error` events here.
    emitter.addEventListener(name, function wrapListener(arg) {
      // IE does not have builtin `{ once: true }` support so we
      // have to do it manually.
      if (flags.once) {
        emitter.removeEventListener(name, wrapListener);
      }
      listener(arg);
    });
  } else {
    throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof emitter);
  }
}


/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
Object.defineProperty(exports, "NIL", ({
  enumerable: true,
  get: function get() {
    return _nil.default;
  }
}));
Object.defineProperty(exports, "parse", ({
  enumerable: true,
  get: function get() {
    return _parse.default;
  }
}));
Object.defineProperty(exports, "stringify", ({
  enumerable: true,
  get: function get() {
    return _stringify.default;
  }
}));
Object.defineProperty(exports, "v1", ({
  enumerable: true,
  get: function get() {
    return _v.default;
  }
}));
Object.defineProperty(exports, "v3", ({
  enumerable: true,
  get: function get() {
    return _v2.default;
  }
}));
Object.defineProperty(exports, "v4", ({
  enumerable: true,
  get: function get() {
    return _v3.default;
  }
}));
Object.defineProperty(exports, "v5", ({
  enumerable: true,
  get: function get() {
    return _v4.default;
  }
}));
Object.defineProperty(exports, "validate", ({
  enumerable: true,
  get: function get() {
    return _validate.default;
  }
}));
Object.defineProperty(exports, "version", ({
  enumerable: true,
  get: function get() {
    return _version.default;
  }
}));

var _v = _interopRequireDefault(__webpack_require__(/*! ./v1.js */ "./node_modules/uuid/dist/commonjs-browser/v1.js"));

var _v2 = _interopRequireDefault(__webpack_require__(/*! ./v3.js */ "./node_modules/uuid/dist/commonjs-browser/v3.js"));

var _v3 = _interopRequireDefault(__webpack_require__(/*! ./v4.js */ "./node_modules/uuid/dist/commonjs-browser/v4.js"));

var _v4 = _interopRequireDefault(__webpack_require__(/*! ./v5.js */ "./node_modules/uuid/dist/commonjs-browser/v5.js"));

var _nil = _interopRequireDefault(__webpack_require__(/*! ./nil.js */ "./node_modules/uuid/dist/commonjs-browser/nil.js"));

var _version = _interopRequireDefault(__webpack_require__(/*! ./version.js */ "./node_modules/uuid/dist/commonjs-browser/version.js"));

var _validate = _interopRequireDefault(__webpack_require__(/*! ./validate.js */ "./node_modules/uuid/dist/commonjs-browser/validate.js"));

var _stringify = _interopRequireDefault(__webpack_require__(/*! ./stringify.js */ "./node_modules/uuid/dist/commonjs-browser/stringify.js"));

var _parse = _interopRequireDefault(__webpack_require__(/*! ./parse.js */ "./node_modules/uuid/dist/commonjs-browser/parse.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/md5.js":
/*!********************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/md5.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

/*
 * Browser-compatible JavaScript MD5
 *
 * Modification of JavaScript MD5
 * https://github.com/blueimp/JavaScript-MD5
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * https://opensource.org/licenses/MIT
 *
 * Based on
 * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message
 * Digest Algorithm, as defined in RFC 1321.
 * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for more info.
 */
function md5(bytes) {
  if (typeof bytes === 'string') {
    const msg = unescape(encodeURIComponent(bytes)); // UTF8 escape

    bytes = new Uint8Array(msg.length);

    for (let i = 0; i < msg.length; ++i) {
      bytes[i] = msg.charCodeAt(i);
    }
  }

  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));
}
/*
 * Convert an array of little-endian words to an array of bytes
 */


function md5ToHexEncodedArray(input) {
  const output = [];
  const length32 = input.length * 32;
  const hexTab = '0123456789abcdef';

  for (let i = 0; i < length32; i += 8) {
    const x = input[i >> 5] >>> i % 32 & 0xff;
    const hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);
    output.push(hex);
  }

  return output;
}
/**
 * Calculate output length with padding and bit length
 */


function getOutputLength(inputLength8) {
  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;
}
/*
 * Calculate the MD5 of an array of little-endian words, and a bit length.
 */


function wordsToMd5(x, len) {
  /* append padding */
  x[len >> 5] |= 0x80 << len % 32;
  x[getOutputLength(len) - 1] = len;
  let a = 1732584193;
  let b = -271733879;
  let c = -1732584194;
  let d = 271733878;

  for (let i = 0; i < x.length; i += 16) {
    const olda = a;
    const oldb = b;
    const oldc = c;
    const oldd = d;
    a = md5ff(a, b, c, d, x[i], 7, -680876936);
    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);
    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);
    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);
    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);
    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);
    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);
    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);
    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);
    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);
    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);
    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);
    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);
    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);
    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);
    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);
    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);
    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);
    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);
    b = md5gg(b, c, d, a, x[i], 20, -373897302);
    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);
    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);
    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);
    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);
    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);
    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);
    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);
    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);
    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);
    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);
    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);
    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);
    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);
    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);
    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);
    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);
    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);
    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);
    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);
    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);
    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);
    d = md5hh(d, a, b, c, x[i], 11, -358537222);
    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);
    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);
    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);
    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);
    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);
    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);
    a = md5ii(a, b, c, d, x[i], 6, -198630844);
    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);
    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);
    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);
    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);
    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);
    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);
    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);
    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);
    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);
    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);
    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);
    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);
    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);
    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);
    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);
    a = safeAdd(a, olda);
    b = safeAdd(b, oldb);
    c = safeAdd(c, oldc);
    d = safeAdd(d, oldd);
  }

  return [a, b, c, d];
}
/*
 * Convert an array bytes to an array of little-endian words
 * Characters >255 have their high-byte silently ignored.
 */


function bytesToWords(input) {
  if (input.length === 0) {
    return [];
  }

  const length8 = input.length * 8;
  const output = new Uint32Array(getOutputLength(length8));

  for (let i = 0; i < length8; i += 8) {
    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;
  }

  return output;
}
/*
 * Add integers, wrapping at 2^32. This uses 16-bit operations internally
 * to work around bugs in some JS interpreters.
 */


function safeAdd(x, y) {
  const lsw = (x & 0xffff) + (y & 0xffff);
  const msw = (x >> 16) + (y >> 16) + (lsw >> 16);
  return msw << 16 | lsw & 0xffff;
}
/*
 * Bitwise rotate a 32-bit number to the left.
 */


function bitRotateLeft(num, cnt) {
  return num << cnt | num >>> 32 - cnt;
}
/*
 * These functions implement the four basic operations the algorithm uses.
 */


function md5cmn(q, a, b, x, s, t) {
  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);
}

function md5ff(a, b, c, d, x, s, t) {
  return md5cmn(b & c | ~b & d, a, b, x, s, t);
}

function md5gg(a, b, c, d, x, s, t) {
  return md5cmn(b & d | c & ~d, a, b, x, s, t);
}

function md5hh(a, b, c, d, x, s, t) {
  return md5cmn(b ^ c ^ d, a, b, x, s, t);
}

function md5ii(a, b, c, d, x, s, t) {
  return md5cmn(c ^ (b | ~d), a, b, x, s, t);
}

var _default = md5;
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/native.js":
/*!***********************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/native.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;
const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);
var _default = {
  randomUUID
};
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/nil.js":
/*!********************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/nil.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;
var _default = '00000000-0000-0000-0000-000000000000';
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/parse.js":
/*!**********************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/parse.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

var _validate = _interopRequireDefault(__webpack_require__(/*! ./validate.js */ "./node_modules/uuid/dist/commonjs-browser/validate.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function parse(uuid) {
  if (!(0, _validate.default)(uuid)) {
    throw TypeError('Invalid UUID');
  }

  let v;
  const arr = new Uint8Array(16); // Parse ########-....-....-....-............

  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;
  arr[1] = v >>> 16 & 0xff;
  arr[2] = v >>> 8 & 0xff;
  arr[3] = v & 0xff; // Parse ........-####-....-....-............

  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;
  arr[5] = v & 0xff; // Parse ........-....-####-....-............

  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;
  arr[7] = v & 0xff; // Parse ........-....-....-####-............

  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;
  arr[9] = v & 0xff; // Parse ........-....-....-....-############
  // (Use "/" to avoid 32-bit truncation when bit-shifting high-order bytes)

  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;
  arr[11] = v / 0x100000000 & 0xff;
  arr[12] = v >>> 24 & 0xff;
  arr[13] = v >>> 16 & 0xff;
  arr[14] = v >>> 8 & 0xff;
  arr[15] = v & 0xff;
  return arr;
}

var _default = parse;
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/regex.js":
/*!**********************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/regex.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;
var _default = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/rng.js":
/*!********************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/rng.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = rng;
// Unique ID creation requires a high quality random # generator. In the browser we therefore
// require the crypto API and do not support built-in fallback to lower quality random number
// generators (like Math.random()).
let getRandomValues;
const rnds8 = new Uint8Array(16);

function rng() {
  // lazy load so that environments that need to polyfill have a chance to do so
  if (!getRandomValues) {
    // getRandomValues needs to be invoked in a context where "this" is a Crypto implementation.
    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);

    if (!getRandomValues) {
      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');
    }
  }

  return getRandomValues(rnds8);
}

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/sha1.js":
/*!*********************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/sha1.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

// Adapted from Chris Veness' SHA1 code at
// http://www.movable-type.co.uk/scripts/sha1.html
function f(s, x, y, z) {
  switch (s) {
    case 0:
      return x & y ^ ~x & z;

    case 1:
      return x ^ y ^ z;

    case 2:
      return x & y ^ x & z ^ y & z;

    case 3:
      return x ^ y ^ z;
  }
}

function ROTL(x, n) {
  return x << n | x >>> 32 - n;
}

function sha1(bytes) {
  const K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];
  const H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];

  if (typeof bytes === 'string') {
    const msg = unescape(encodeURIComponent(bytes)); // UTF8 escape

    bytes = [];

    for (let i = 0; i < msg.length; ++i) {
      bytes.push(msg.charCodeAt(i));
    }
  } else if (!Array.isArray(bytes)) {
    // Convert Array-like to Array
    bytes = Array.prototype.slice.call(bytes);
  }

  bytes.push(0x80);
  const l = bytes.length / 4 + 2;
  const N = Math.ceil(l / 16);
  const M = new Array(N);

  for (let i = 0; i < N; ++i) {
    const arr = new Uint32Array(16);

    for (let j = 0; j < 16; ++j) {
      arr[j] = bytes[i * 64 + j * 4] << 24 | bytes[i * 64 + j * 4 + 1] << 16 | bytes[i * 64 + j * 4 + 2] << 8 | bytes[i * 64 + j * 4 + 3];
    }

    M[i] = arr;
  }

  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);
  M[N - 1][14] = Math.floor(M[N - 1][14]);
  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;

  for (let i = 0; i < N; ++i) {
    const W = new Uint32Array(80);

    for (let t = 0; t < 16; ++t) {
      W[t] = M[i][t];
    }

    for (let t = 16; t < 80; ++t) {
      W[t] = ROTL(W[t - 3] ^ W[t - 8] ^ W[t - 14] ^ W[t - 16], 1);
    }

    let a = H[0];
    let b = H[1];
    let c = H[2];
    let d = H[3];
    let e = H[4];

    for (let t = 0; t < 80; ++t) {
      const s = Math.floor(t / 20);
      const T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[t] >>> 0;
      e = d;
      d = c;
      c = ROTL(b, 30) >>> 0;
      b = a;
      a = T;
    }

    H[0] = H[0] + a >>> 0;
    H[1] = H[1] + b >>> 0;
    H[2] = H[2] + c >>> 0;
    H[3] = H[3] + d >>> 0;
    H[4] = H[4] + e >>> 0;
  }

  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];
}

var _default = sha1;
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/stringify.js":
/*!**************************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/stringify.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;
exports.unsafeStringify = unsafeStringify;

var _validate = _interopRequireDefault(__webpack_require__(/*! ./validate.js */ "./node_modules/uuid/dist/commonjs-browser/validate.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Convert array of 16 byte values to UUID string format of the form:
 * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
 */
const byteToHex = [];

for (let i = 0; i < 256; ++i) {
  byteToHex.push((i + 0x100).toString(16).slice(1));
}

function unsafeStringify(arr, offset = 0) {
  // Note: Be careful editing this code!  It's been tuned for performance
  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434
  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();
}

function stringify(arr, offset = 0) {
  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one
  // of the following:
  // - One or more input array values don't map to a hex octet (leading to
  // "undefined" in the uuid)
  // - Invalid input values for the RFC `version` or `variant` fields

  if (!(0, _validate.default)(uuid)) {
    throw TypeError('Stringified UUID is invalid');
  }

  return uuid;
}

var _default = stringify;
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/v1.js":
/*!*******************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/v1.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

var _rng = _interopRequireDefault(__webpack_require__(/*! ./rng.js */ "./node_modules/uuid/dist/commonjs-browser/rng.js"));

var _stringify = __webpack_require__(/*! ./stringify.js */ "./node_modules/uuid/dist/commonjs-browser/stringify.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// **`v1()` - Generate time-based UUID**
//
// Inspired by https://github.com/LiosK/UUID.js
// and http://docs.python.org/library/uuid.html
let _nodeId;

let _clockseq; // Previous uuid creation time


let _lastMSecs = 0;
let _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details

function v1(options, buf, offset) {
  let i = buf && offset || 0;
  const b = buf || new Array(16);
  options = options || {};
  let node = options.node || _nodeId;
  let clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not
  // specified.  We do this lazily to minimize issues related to insufficient
  // system entropy.  See #189

  if (node == null || clockseq == null) {
    const seedBytes = options.random || (options.rng || _rng.default)();

    if (node == null) {
      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)
      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];
    }

    if (clockseq == null) {
      // Per 4.2.2, randomize (14 bit) clockseq
      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;
    }
  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,
  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so
  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'
  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.


  let msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock
  // cycle to simulate higher resolution clock

  let nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)

  const dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression

  if (dt < 0 && options.clockseq === undefined) {
    clockseq = clockseq + 1 & 0x3fff;
  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new
  // time interval


  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {
    nsecs = 0;
  } // Per 4.2.1.2 Throw error if too many uuids are requested


  if (nsecs >= 10000) {
    throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");
  }

  _lastMSecs = msecs;
  _lastNSecs = nsecs;
  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch

  msecs += 12219292800000; // `time_low`

  const tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;
  b[i++] = tl >>> 24 & 0xff;
  b[i++] = tl >>> 16 & 0xff;
  b[i++] = tl >>> 8 & 0xff;
  b[i++] = tl & 0xff; // `time_mid`

  const tmh = msecs / 0x100000000 * 10000 & 0xfffffff;
  b[i++] = tmh >>> 8 & 0xff;
  b[i++] = tmh & 0xff; // `time_high_and_version`

  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version

  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)

  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`

  b[i++] = clockseq & 0xff; // `node`

  for (let n = 0; n < 6; ++n) {
    b[i + n] = node[n];
  }

  return buf || (0, _stringify.unsafeStringify)(b);
}

var _default = v1;
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/v3.js":
/*!*******************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/v3.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

var _v = _interopRequireDefault(__webpack_require__(/*! ./v35.js */ "./node_modules/uuid/dist/commonjs-browser/v35.js"));

var _md = _interopRequireDefault(__webpack_require__(/*! ./md5.js */ "./node_modules/uuid/dist/commonjs-browser/md5.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const v3 = (0, _v.default)('v3', 0x30, _md.default);
var _default = v3;
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/v35.js":
/*!********************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/v35.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.URL = exports.DNS = void 0;
exports["default"] = v35;

var _stringify = __webpack_require__(/*! ./stringify.js */ "./node_modules/uuid/dist/commonjs-browser/stringify.js");

var _parse = _interopRequireDefault(__webpack_require__(/*! ./parse.js */ "./node_modules/uuid/dist/commonjs-browser/parse.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function stringToBytes(str) {
  str = unescape(encodeURIComponent(str)); // UTF8 escape

  const bytes = [];

  for (let i = 0; i < str.length; ++i) {
    bytes.push(str.charCodeAt(i));
  }

  return bytes;
}

const DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';
exports.DNS = DNS;
const URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';
exports.URL = URL;

function v35(name, version, hashfunc) {
  function generateUUID(value, namespace, buf, offset) {
    var _namespace;

    if (typeof value === 'string') {
      value = stringToBytes(value);
    }

    if (typeof namespace === 'string') {
      namespace = (0, _parse.default)(namespace);
    }

    if (((_namespace = namespace) === null || _namespace === void 0 ? void 0 : _namespace.length) !== 16) {
      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');
    } // Compute hash of namespace and value, Per 4.3
    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =
    // hashfunc([...namespace, ... value])`


    let bytes = new Uint8Array(16 + value.length);
    bytes.set(namespace);
    bytes.set(value, namespace.length);
    bytes = hashfunc(bytes);
    bytes[6] = bytes[6] & 0x0f | version;
    bytes[8] = bytes[8] & 0x3f | 0x80;

    if (buf) {
      offset = offset || 0;

      for (let i = 0; i < 16; ++i) {
        buf[offset + i] = bytes[i];
      }

      return buf;
    }

    return (0, _stringify.unsafeStringify)(bytes);
  } // Function#name is not settable on some platforms (#270)


  try {
    generateUUID.name = name; // eslint-disable-next-line no-empty
  } catch (err) {} // For CommonJS default export support


  generateUUID.DNS = DNS;
  generateUUID.URL = URL;
  return generateUUID;
}

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/v4.js":
/*!*******************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/v4.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

var _native = _interopRequireDefault(__webpack_require__(/*! ./native.js */ "./node_modules/uuid/dist/commonjs-browser/native.js"));

var _rng = _interopRequireDefault(__webpack_require__(/*! ./rng.js */ "./node_modules/uuid/dist/commonjs-browser/rng.js"));

var _stringify = __webpack_require__(/*! ./stringify.js */ "./node_modules/uuid/dist/commonjs-browser/stringify.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function v4(options, buf, offset) {
  if (_native.default.randomUUID && !buf && !options) {
    return _native.default.randomUUID();
  }

  options = options || {};

  const rnds = options.random || (options.rng || _rng.default)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`


  rnds[6] = rnds[6] & 0x0f | 0x40;
  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided

  if (buf) {
    offset = offset || 0;

    for (let i = 0; i < 16; ++i) {
      buf[offset + i] = rnds[i];
    }

    return buf;
  }

  return (0, _stringify.unsafeStringify)(rnds);
}

var _default = v4;
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/v5.js":
/*!*******************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/v5.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

var _v = _interopRequireDefault(__webpack_require__(/*! ./v35.js */ "./node_modules/uuid/dist/commonjs-browser/v35.js"));

var _sha = _interopRequireDefault(__webpack_require__(/*! ./sha1.js */ "./node_modules/uuid/dist/commonjs-browser/sha1.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const v5 = (0, _v.default)('v5', 0x50, _sha.default);
var _default = v5;
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/validate.js":
/*!*************************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/validate.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

var _regex = _interopRequireDefault(__webpack_require__(/*! ./regex.js */ "./node_modules/uuid/dist/commonjs-browser/regex.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function validate(uuid) {
  return typeof uuid === 'string' && _regex.default.test(uuid);
}

var _default = validate;
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/version.js":
/*!************************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/version.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

var _validate = _interopRequireDefault(__webpack_require__(/*! ./validate.js */ "./node_modules/uuid/dist/commonjs-browser/validate.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function version(uuid) {
  if (!(0, _validate.default)(uuid)) {
    throw TypeError('Invalid UUID');
  }

  return parseInt(uuid.slice(14, 15), 16);
}

var _default = version;
exports["default"] = _default;

/***/ }),

/***/ "../core/dist/index.js":
/*!*****************************!*\
  !*** ../core/dist/index.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


var events = __webpack_require__(/*! events */ "../core/node_modules/events/events.js");
var universalFetch = __webpack_require__(/*! @inrupt/universal-fetch */ "../core/node_modules/@inrupt/universal-fetch/dist/index-browser.js");
var jose = __webpack_require__(/*! jose */ "../core/node_modules/jose/dist/browser/index.js");
var uuid = __webpack_require__(/*! uuid */ "../core/node_modules/uuid/dist/commonjs-browser/index.js");

const SOLID_CLIENT_AUTHN_KEY_PREFIX = "solidClientAuthn:";
const PREFERRED_SIGNING_ALG = ["ES256", "RS256"];
const EVENTS = {
    ERROR: "error",
    LOGIN: "login",
    LOGOUT: "logout",
    NEW_REFRESH_TOKEN: "newRefreshToken",
    SESSION_EXPIRED: "sessionExpired",
    SESSION_EXTENDED: "sessionExtended",
    SESSION_RESTORED: "sessionRestore",
    TIMEOUT_SET: "timeoutSet",
};
const REFRESH_BEFORE_EXPIRATION_SECONDS = 5;
const SCOPE_OPENID = "openid";
const SCOPE_OFFLINE = "offline_access";
const SCOPE_WEBID = "webid";
const DEFAULT_SCOPES = [SCOPE_OPENID, SCOPE_OFFLINE, SCOPE_WEBID].join(" ");

const buildProxyHandler = (toExclude, errorMessage) => ({
    get(target, prop, receiver) {
        if (!Object.getOwnPropertyNames(events.EventEmitter).includes(prop) &&
            Object.getOwnPropertyNames(toExclude).includes(prop)) {
            throw new Error(`${errorMessage}: [${prop}] is not supported`);
        }
        return Reflect.get(target, prop, receiver);
    },
});

class AggregateHandler {
    constructor(handleables) {
        this.handleables = handleables;
    }
    async getProperHandler(params) {
        const canHandleList = await Promise.all(this.handleables.map((handleable) => handleable.canHandle(...params)));
        for (let i = 0; i < canHandleList.length; i += 1) {
            if (canHandleList[i]) {
                return this.handleables[i];
            }
        }
        return null;
    }
    async canHandle(...params) {
        return (await this.getProperHandler(params)) !== null;
    }
    async handle(...params) {
        const handler = await this.getProperHandler(params);
        if (handler) {
            return handler.handle(...params);
        }
        throw new Error(`[${this.constructor.name}] cannot find a suitable handler for: ${params
            .map((param) => {
            try {
                return JSON.stringify(param);
            }
            catch (err) {
                return param.toString();
            }
        })
            .join(", ")}`);
    }
}

async function fetchJwks(jwksIri, issuerIri) {
    const jwksResponse = await universalFetch.fetch(jwksIri);
    if (jwksResponse.status !== 200) {
        throw new Error(`Could not fetch JWKS for [${issuerIri}] at [${jwksIri}]: ${jwksResponse.status} ${jwksResponse.statusText}`);
    }
    let jwk;
    try {
        jwk = (await jwksResponse.json()).keys[0];
    }
    catch (e) {
        throw new Error(`Malformed JWKS for [${issuerIri}] at [${jwksIri}]: ${e.message}`);
    }
    return jwk;
}
async function getWebidFromTokenPayload(idToken, jwksIri, issuerIri, clientId) {
    const jwk = await fetchJwks(jwksIri, issuerIri);
    let payload;
    try {
        const { payload: verifiedPayload } = await jose.jwtVerify(idToken, await jose.importJWK(jwk), {
            issuer: issuerIri,
            audience: clientId,
        });
        payload = verifiedPayload;
    }
    catch (e) {
        throw new Error(`Token verification failed: ${e.stack}`);
    }
    if (typeof payload.webid === "string") {
        return payload.webid;
    }
    if (typeof payload.sub !== "string") {
        throw new Error(`The token ${JSON.stringify(payload)} is invalid: it has no 'webid' claim and no 'sub' claim.`);
    }
    try {
        new URL(payload.sub);
        return payload.sub;
    }
    catch (e) {
        throw new Error(`The token has no 'webid' claim, and its 'sub' claim of [${payload.sub}] is invalid as a URL - error [${e}].`);
    }
}

function isValidRedirectUrl(redirectUrl) {
    try {
        const urlObject = new URL(redirectUrl);
        return urlObject.hash === "";
    }
    catch (e) {
        return false;
    }
}

function isSupportedTokenType(token) {
    return typeof token === "string" && ["DPoP", "Bearer"].includes(token);
}

const USER_SESSION_PREFIX = "solidClientAuthenticationUser";

function isValidUrl(url) {
    try {
        new URL(url);
        return true;
    }
    catch (_a) {
        return false;
    }
}
function determineSigningAlg(supported, preferred) {
    var _a;
    return ((_a = preferred.find((signingAlg) => {
        return supported.includes(signingAlg);
    })) !== null && _a !== void 0 ? _a : null);
}
function determineClientType(options, issuerConfig) {
    if (options.clientId !== undefined && !isValidUrl(options.clientId)) {
        return "static";
    }
    if (issuerConfig.scopesSupported.includes("webid") &&
        options.clientId !== undefined &&
        isValidUrl(options.clientId)) {
        return "solid-oidc";
    }
    return "dynamic";
}
async function handleRegistration(options, issuerConfig, storageUtility, clientRegistrar) {
    const clientType = determineClientType(options, issuerConfig);
    if (clientType === "dynamic") {
        return clientRegistrar.getClient({
            sessionId: options.sessionId,
            clientName: options.clientName,
            redirectUrl: options.redirectUrl,
        }, issuerConfig);
    }
    await storageUtility.setForUser(options.sessionId, {
        clientId: options.clientId,
    });
    if (options.clientSecret) {
        await storageUtility.setForUser(options.sessionId, {
            clientSecret: options.clientSecret,
        });
    }
    if (options.clientName) {
        await storageUtility.setForUser(options.sessionId, {
            clientName: options.clientName,
        });
    }
    return {
        clientId: options.clientId,
        clientSecret: options.clientSecret,
        clientName: options.clientName,
        clientType,
    };
}

async function getSessionIdFromOauthState(storageUtility, oauthState) {
    return storageUtility.getForUser(oauthState, "sessionId");
}
async function loadOidcContextFromStorage(sessionId, storageUtility, configFetcher) {
    try {
        const [issuerIri, codeVerifier, storedRedirectIri, dpop] = await Promise.all([
            storageUtility.getForUser(sessionId, "issuer", {
                errorIfNull: true,
            }),
            storageUtility.getForUser(sessionId, "codeVerifier"),
            storageUtility.getForUser(sessionId, "redirectUrl"),
            storageUtility.getForUser(sessionId, "dpop", { errorIfNull: true }),
        ]);
        await storageUtility.deleteForUser(sessionId, "codeVerifier");
        const issuerConfig = await configFetcher.fetchConfig(issuerIri);
        return {
            codeVerifier,
            redirectUrl: storedRedirectIri,
            issuerConfig,
            dpop: dpop === "true",
        };
    }
    catch (e) {
        throw new Error(`Failed to retrieve OIDC context from storage associated with session [${sessionId}]: ${e}`);
    }
}
async function saveSessionInfoToStorage(storageUtility, sessionId, webId, isLoggedIn, refreshToken, secure, dpopKey) {
    if (refreshToken !== undefined) {
        await storageUtility.setForUser(sessionId, { refreshToken }, { secure });
    }
    if (webId !== undefined) {
        await storageUtility.setForUser(sessionId, { webId }, { secure });
    }
    if (isLoggedIn !== undefined) {
        await storageUtility.setForUser(sessionId, { isLoggedIn }, { secure });
    }
    if (dpopKey !== undefined) {
        await storageUtility.setForUser(sessionId, {
            publicKey: JSON.stringify(dpopKey.publicKey),
            privateKey: JSON.stringify(await jose.exportJWK(dpopKey.privateKey)),
        }, { secure });
    }
}
class StorageUtility {
    constructor(secureStorage, insecureStorage) {
        this.secureStorage = secureStorage;
        this.insecureStorage = insecureStorage;
    }
    getKey(userId) {
        return `solidClientAuthenticationUser:${userId}`;
    }
    async getUserData(userId, secure) {
        const stored = await (secure
            ? this.secureStorage
            : this.insecureStorage).get(this.getKey(userId));
        if (stored === undefined) {
            return {};
        }
        try {
            return JSON.parse(stored);
        }
        catch (err) {
            throw new Error(`Data for user [${userId}] in [${secure ? "secure" : "unsecure"}] storage is corrupted - expected valid JSON, but got: ${stored}`);
        }
    }
    async setUserData(userId, data, secure) {
        await (secure ? this.secureStorage : this.insecureStorage).set(this.getKey(userId), JSON.stringify(data));
    }
    async get(key, options) {
        const value = await ((options === null || options === void 0 ? void 0 : options.secure)
            ? this.secureStorage
            : this.insecureStorage).get(key);
        if (value === undefined && (options === null || options === void 0 ? void 0 : options.errorIfNull)) {
            throw new Error(`[${key}] is not stored`);
        }
        return value;
    }
    async set(key, value, options) {
        return ((options === null || options === void 0 ? void 0 : options.secure) ? this.secureStorage : this.insecureStorage).set(key, value);
    }
    async delete(key, options) {
        return ((options === null || options === void 0 ? void 0 : options.secure) ? this.secureStorage : this.insecureStorage).delete(key);
    }
    async getForUser(userId, key, options) {
        const userData = await this.getUserData(userId, options === null || options === void 0 ? void 0 : options.secure);
        let value;
        if (!userData || !userData[key]) {
            value = undefined;
        }
        value = userData[key];
        if (value === undefined && (options === null || options === void 0 ? void 0 : options.errorIfNull)) {
            throw new Error(`Field [${key}] for user [${userId}] is not stored`);
        }
        return value || undefined;
    }
    async setForUser(userId, values, options) {
        let userData;
        try {
            userData = await this.getUserData(userId, options === null || options === void 0 ? void 0 : options.secure);
        }
        catch (_a) {
            userData = {};
        }
        await this.setUserData(userId, { ...userData, ...values }, options === null || options === void 0 ? void 0 : options.secure);
    }
    async deleteForUser(userId, key, options) {
        const userData = await this.getUserData(userId, options === null || options === void 0 ? void 0 : options.secure);
        delete userData[key];
        await this.setUserData(userId, userData, options === null || options === void 0 ? void 0 : options.secure);
    }
    async deleteAllUserData(userId, options) {
        await ((options === null || options === void 0 ? void 0 : options.secure) ? this.secureStorage : this.insecureStorage).delete(this.getKey(userId));
    }
}

class InMemoryStorage {
    constructor() {
        this.map = {};
    }
    async get(key) {
        return this.map[key] || undefined;
    }
    async set(key, value) {
        this.map[key] = value;
    }
    async delete(key) {
        delete this.map[key];
    }
}

class ConfigurationError extends Error {
    constructor(message) {
        super(message);
    }
}

class NotImplementedError extends Error {
    constructor(methodName) {
        super(`[${methodName}] is not implemented`);
    }
}

class InvalidResponseError extends Error {
    constructor(missingFields) {
        super(`Invalid response from OIDC provider: missing fields ${missingFields}`);
        this.missingFields = missingFields;
    }
}

class OidcProviderError extends Error {
    constructor(message, error, errorDescription) {
        super(message);
        this.error = error;
        this.errorDescription = errorDescription;
    }
}

function normalizeHTU(audience) {
    const audienceUrl = new URL(audience);
    return new URL(audienceUrl.pathname, audienceUrl.origin).toString();
}
async function createDpopHeader(audience, method, dpopKey) {
    return new jose.SignJWT({
        htu: normalizeHTU(audience),
        htm: method.toUpperCase(),
        jti: uuid.v4(),
    })
        .setProtectedHeader({
        alg: PREFERRED_SIGNING_ALG[0],
        jwk: dpopKey.publicKey,
        typ: "dpop+jwt",
    })
        .setIssuedAt()
        .sign(dpopKey.privateKey, {});
}
async function generateDpopKeyPair() {
    const { privateKey, publicKey } = await jose.generateKeyPair(PREFERRED_SIGNING_ALG[0]);
    const dpopKeyPair = {
        privateKey,
        publicKey: await jose.exportJWK(publicKey),
    };
    [dpopKeyPair.publicKey.alg] = PREFERRED_SIGNING_ALG;
    return dpopKeyPair;
}

const DEFAULT_EXPIRATION_TIME_SECONDS = 600;
function isExpectedAuthError(statusCode) {
    return [401, 403].includes(statusCode);
}
async function buildDpopFetchOptions(targetUrl, authToken, dpopKey, defaultOptions) {
    var _a;
    const headers = new universalFetch.Headers(defaultOptions === null || defaultOptions === void 0 ? void 0 : defaultOptions.headers);
    headers.set("Authorization", `DPoP ${authToken}`);
    headers.set("DPoP", await createDpopHeader(targetUrl, (_a = defaultOptions === null || defaultOptions === void 0 ? void 0 : defaultOptions.method) !== null && _a !== void 0 ? _a : "get", dpopKey));
    return {
        ...defaultOptions,
        headers,
    };
}
async function buildAuthenticatedHeaders(targetUrl, authToken, dpopKey, defaultOptions) {
    if (dpopKey !== undefined) {
        return buildDpopFetchOptions(targetUrl, authToken, dpopKey, defaultOptions);
    }
    const headers = new universalFetch.Headers(defaultOptions === null || defaultOptions === void 0 ? void 0 : defaultOptions.headers);
    headers.set("Authorization", `Bearer ${authToken}`);
    return {
        ...defaultOptions,
        headers,
    };
}
async function makeAuthenticatedRequest(unauthFetch, accessToken, url, defaultRequestInit, dpopKey) {
    return unauthFetch(url, await buildAuthenticatedHeaders(url.toString(), accessToken, dpopKey, defaultRequestInit));
}
async function refreshAccessToken(refreshOptions, dpopKey, eventEmitter) {
    var _a;
    const tokenSet = await refreshOptions.tokenRefresher.refresh(refreshOptions.sessionId, refreshOptions.refreshToken, dpopKey);
    eventEmitter === null || eventEmitter === void 0 ? void 0 : eventEmitter.emit(EVENTS.SESSION_EXTENDED, (_a = tokenSet.expiresIn) !== null && _a !== void 0 ? _a : DEFAULT_EXPIRATION_TIME_SECONDS);
    if (typeof tokenSet.refreshToken === "string") {
        eventEmitter === null || eventEmitter === void 0 ? void 0 : eventEmitter.emit(EVENTS.NEW_REFRESH_TOKEN, tokenSet.refreshToken);
    }
    return {
        accessToken: tokenSet.accessToken,
        refreshToken: tokenSet.refreshToken,
        expiresIn: tokenSet.expiresIn,
    };
}
const computeRefreshDelay = (expiresIn) => {
    if (expiresIn !== undefined) {
        return expiresIn - REFRESH_BEFORE_EXPIRATION_SECONDS > 0
            ?
                expiresIn - REFRESH_BEFORE_EXPIRATION_SECONDS
            : expiresIn;
    }
    return DEFAULT_EXPIRATION_TIME_SECONDS;
};
async function buildAuthenticatedFetch(unauthFetch, accessToken, options) {
    var _a;
    let currentAccessToken = accessToken;
    let latestTimeout;
    const currentRefreshOptions = options === null || options === void 0 ? void 0 : options.refreshOptions;
    if (currentRefreshOptions !== undefined) {
        const proactivelyRefreshToken = async () => {
            var _a, _b, _c, _d;
            try {
                const { accessToken: refreshedAccessToken, refreshToken, expiresIn, } = await refreshAccessToken(currentRefreshOptions, options.dpopKey, options.eventEmitter);
                currentAccessToken = refreshedAccessToken;
                if (refreshToken !== undefined) {
                    currentRefreshOptions.refreshToken = refreshToken;
                }
                clearTimeout(latestTimeout);
                latestTimeout = setTimeout(proactivelyRefreshToken, computeRefreshDelay(expiresIn) * 1000);
                (_a = options.eventEmitter) === null || _a === void 0 ? void 0 : _a.emit(EVENTS.TIMEOUT_SET, latestTimeout);
            }
            catch (e) {
                if (e instanceof OidcProviderError) {
                    (_b = options === null || options === void 0 ? void 0 : options.eventEmitter) === null || _b === void 0 ? void 0 : _b.emit(EVENTS.ERROR, e.error, e.errorDescription);
                    (_c = options === null || options === void 0 ? void 0 : options.eventEmitter) === null || _c === void 0 ? void 0 : _c.emit(EVENTS.SESSION_EXPIRED);
                }
                if (e instanceof InvalidResponseError &&
                    e.missingFields.includes("access_token")) {
                    (_d = options === null || options === void 0 ? void 0 : options.eventEmitter) === null || _d === void 0 ? void 0 : _d.emit(EVENTS.SESSION_EXPIRED);
                }
            }
        };
        latestTimeout = setTimeout(proactivelyRefreshToken, computeRefreshDelay(options.expiresIn) * 1000);
        (_a = options.eventEmitter) === null || _a === void 0 ? void 0 : _a.emit(EVENTS.TIMEOUT_SET, latestTimeout);
    }
    else if (options !== undefined && options.eventEmitter !== undefined) {
        const expirationTimeout = setTimeout(() => {
            options.eventEmitter.emit(EVENTS.SESSION_EXPIRED);
        }, computeRefreshDelay(options.expiresIn) * 1000);
        options.eventEmitter.emit(EVENTS.TIMEOUT_SET, expirationTimeout);
    }
    return async (url, requestInit) => {
        let response = await makeAuthenticatedRequest(unauthFetch, currentAccessToken, url, requestInit, options === null || options === void 0 ? void 0 : options.dpopKey);
        const failedButNotExpectedAuthError = !response.ok && !isExpectedAuthError(response.status);
        if (response.ok || failedButNotExpectedAuthError) {
            return response;
        }
        const hasBeenRedirected = response.url !== url;
        if (hasBeenRedirected && (options === null || options === void 0 ? void 0 : options.dpopKey) !== undefined) {
            response = await makeAuthenticatedRequest(unauthFetch, currentAccessToken, response.url, requestInit, options.dpopKey);
        }
        return response;
    };
}

const StorageUtilityGetResponse = "getResponse";
const StorageUtilityMock = {
    get: async (key, options) => StorageUtilityGetResponse,
    set: async (key, value) => {
    },
    delete: async (key) => {
    },
    getForUser: async (userId, key, options) => StorageUtilityGetResponse,
    setForUser: async (userId, values, options) => {
    },
    deleteForUser: async (userId, key, options) => {
    },
    deleteAllUserData: async (userId, options) => {
    },
};
const mockStorage = (stored) => {
    const store = stored;
    return {
        get: async (key) => {
            if (store[key] === undefined) {
                return undefined;
            }
            if (typeof store[key] === "string") {
                return store[key];
            }
            return JSON.stringify(store[key]);
        },
        set: async (key, value) => {
            store[key] = value;
        },
        delete: async (key) => {
            delete store[key];
        },
    };
};
const mockStorageUtility = (stored, isSecure = false) => {
    if (isSecure) {
        return new StorageUtility(mockStorage(stored), mockStorage({}));
    }
    return new StorageUtility(mockStorage({}), mockStorage(stored));
};

exports.AggregateHandler = AggregateHandler;
exports.ConfigurationError = ConfigurationError;
exports.DEFAULT_SCOPES = DEFAULT_SCOPES;
exports.EVENTS = EVENTS;
exports.InMemoryStorage = InMemoryStorage;
exports.InvalidResponseError = InvalidResponseError;
exports.NotImplementedError = NotImplementedError;
exports.OidcProviderError = OidcProviderError;
exports.PREFERRED_SIGNING_ALG = PREFERRED_SIGNING_ALG;
exports.REFRESH_BEFORE_EXPIRATION_SECONDS = REFRESH_BEFORE_EXPIRATION_SECONDS;
exports.SOLID_CLIENT_AUTHN_KEY_PREFIX = SOLID_CLIENT_AUTHN_KEY_PREFIX;
exports.StorageUtility = StorageUtility;
exports.StorageUtilityGetResponse = StorageUtilityGetResponse;
exports.StorageUtilityMock = StorageUtilityMock;
exports.USER_SESSION_PREFIX = USER_SESSION_PREFIX;
exports.buildAuthenticatedFetch = buildAuthenticatedFetch;
exports.buildProxyHandler = buildProxyHandler;
exports.createDpopHeader = createDpopHeader;
exports.determineSigningAlg = determineSigningAlg;
exports.fetchJwks = fetchJwks;
exports.generateDpopKeyPair = generateDpopKeyPair;
exports.getSessionIdFromOauthState = getSessionIdFromOauthState;
exports.getWebidFromTokenPayload = getWebidFromTokenPayload;
exports.handleRegistration = handleRegistration;
exports.isSupportedTokenType = isSupportedTokenType;
exports.isValidRedirectUrl = isValidRedirectUrl;
exports.loadOidcContextFromStorage = loadOidcContextFromStorage;
exports.mockStorage = mockStorage;
exports.mockStorageUtility = mockStorageUtility;
exports.saveSessionInfoToStorage = saveSessionInfoToStorage;


/***/ }),

/***/ "../core/node_modules/@inrupt/universal-fetch/dist/index-browser.js":
/*!**************************************************************************!*\
  !*** ../core/node_modules/@inrupt/universal-fetch/dist/index-browser.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({ value: true }));

var indexBrowser = globalThis.fetch;
const { fetch, Response, Request, Headers } = globalThis;

exports.Headers = Headers;
exports.Request = Request;
exports.Response = Response;
exports["default"] = indexBrowser;
exports.fetch = fetch;


/***/ }),

/***/ "../core/node_modules/events/events.js":
/*!*********************************************!*\
  !*** ../core/node_modules/events/events.js ***!
  \*********************************************/
/***/ ((module) => {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



var R = typeof Reflect === 'object' ? Reflect : null
var ReflectApply = R && typeof R.apply === 'function'
  ? R.apply
  : function ReflectApply(target, receiver, args) {
    return Function.prototype.apply.call(target, receiver, args);
  }

var ReflectOwnKeys
if (R && typeof R.ownKeys === 'function') {
  ReflectOwnKeys = R.ownKeys
} else if (Object.getOwnPropertySymbols) {
  ReflectOwnKeys = function ReflectOwnKeys(target) {
    return Object.getOwnPropertyNames(target)
      .concat(Object.getOwnPropertySymbols(target));
  };
} else {
  ReflectOwnKeys = function ReflectOwnKeys(target) {
    return Object.getOwnPropertyNames(target);
  };
}

function ProcessEmitWarning(warning) {
  if (console && console.warn) console.warn(warning);
}

var NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {
  return value !== value;
}

function EventEmitter() {
  EventEmitter.init.call(this);
}
module.exports = EventEmitter;
module.exports.once = once;

// Backwards-compat with node 0.10.x
EventEmitter.EventEmitter = EventEmitter;

EventEmitter.prototype._events = undefined;
EventEmitter.prototype._eventsCount = 0;
EventEmitter.prototype._maxListeners = undefined;

// By default EventEmitters will print a warning if more than 10 listeners are
// added to it. This is a useful default which helps finding memory leaks.
var defaultMaxListeners = 10;

function checkListener(listener) {
  if (typeof listener !== 'function') {
    throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof listener);
  }
}

Object.defineProperty(EventEmitter, 'defaultMaxListeners', {
  enumerable: true,
  get: function() {
    return defaultMaxListeners;
  },
  set: function(arg) {
    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {
      throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + arg + '.');
    }
    defaultMaxListeners = arg;
  }
});

EventEmitter.init = function() {

  if (this._events === undefined ||
      this._events === Object.getPrototypeOf(this)._events) {
    this._events = Object.create(null);
    this._eventsCount = 0;
  }

  this._maxListeners = this._maxListeners || undefined;
};

// Obviously not all Emitters should be limited to 10. This function allows
// that to be increased. Set to zero for unlimited.
EventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {
  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {
    throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + n + '.');
  }
  this._maxListeners = n;
  return this;
};

function _getMaxListeners(that) {
  if (that._maxListeners === undefined)
    return EventEmitter.defaultMaxListeners;
  return that._maxListeners;
}

EventEmitter.prototype.getMaxListeners = function getMaxListeners() {
  return _getMaxListeners(this);
};

EventEmitter.prototype.emit = function emit(type) {
  var args = [];
  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);
  var doError = (type === 'error');

  var events = this._events;
  if (events !== undefined)
    doError = (doError && events.error === undefined);
  else if (!doError)
    return false;

  // If there is no 'error' event listener then throw.
  if (doError) {
    var er;
    if (args.length > 0)
      er = args[0];
    if (er instanceof Error) {
      // Note: The comments on the `throw` lines are intentional, they show
      // up in Node's output if this results in an unhandled exception.
      throw er; // Unhandled 'error' event
    }
    // At least give some kind of context to the user
    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));
    err.context = er;
    throw err; // Unhandled 'error' event
  }

  var handler = events[type];

  if (handler === undefined)
    return false;

  if (typeof handler === 'function') {
    ReflectApply(handler, this, args);
  } else {
    var len = handler.length;
    var listeners = arrayClone(handler, len);
    for (var i = 0; i < len; ++i)
      ReflectApply(listeners[i], this, args);
  }

  return true;
};

function _addListener(target, type, listener, prepend) {
  var m;
  var events;
  var existing;

  checkListener(listener);

  events = target._events;
  if (events === undefined) {
    events = target._events = Object.create(null);
    target._eventsCount = 0;
  } else {
    // To avoid recursion in the case that type === "newListener"! Before
    // adding it to the listeners, first emit "newListener".
    if (events.newListener !== undefined) {
      target.emit('newListener', type,
                  listener.listener ? listener.listener : listener);

      // Re-assign `events` because a newListener handler could have caused the
      // this._events to be assigned to a new object
      events = target._events;
    }
    existing = events[type];
  }

  if (existing === undefined) {
    // Optimize the case of one listener. Don't need the extra array object.
    existing = events[type] = listener;
    ++target._eventsCount;
  } else {
    if (typeof existing === 'function') {
      // Adding the second element, need to change to array.
      existing = events[type] =
        prepend ? [listener, existing] : [existing, listener];
      // If we've already got an array, just append.
    } else if (prepend) {
      existing.unshift(listener);
    } else {
      existing.push(listener);
    }

    // Check for listener leak
    m = _getMaxListeners(target);
    if (m > 0 && existing.length > m && !existing.warned) {
      existing.warned = true;
      // No error code for this since it is a Warning
      // eslint-disable-next-line no-restricted-syntax
      var w = new Error('Possible EventEmitter memory leak detected. ' +
                          existing.length + ' ' + String(type) + ' listeners ' +
                          'added. Use emitter.setMaxListeners() to ' +
                          'increase limit');
      w.name = 'MaxListenersExceededWarning';
      w.emitter = target;
      w.type = type;
      w.count = existing.length;
      ProcessEmitWarning(w);
    }
  }

  return target;
}

EventEmitter.prototype.addListener = function addListener(type, listener) {
  return _addListener(this, type, listener, false);
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener;

EventEmitter.prototype.prependListener =
    function prependListener(type, listener) {
      return _addListener(this, type, listener, true);
    };

function onceWrapper() {
  if (!this.fired) {
    this.target.removeListener(this.type, this.wrapFn);
    this.fired = true;
    if (arguments.length === 0)
      return this.listener.call(this.target);
    return this.listener.apply(this.target, arguments);
  }
}

function _onceWrap(target, type, listener) {
  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };
  var wrapped = onceWrapper.bind(state);
  wrapped.listener = listener;
  state.wrapFn = wrapped;
  return wrapped;
}

EventEmitter.prototype.once = function once(type, listener) {
  checkListener(listener);
  this.on(type, _onceWrap(this, type, listener));
  return this;
};

EventEmitter.prototype.prependOnceListener =
    function prependOnceListener(type, listener) {
      checkListener(listener);
      this.prependListener(type, _onceWrap(this, type, listener));
      return this;
    };

// Emits a 'removeListener' event if and only if the listener was removed.
EventEmitter.prototype.removeListener =
    function removeListener(type, listener) {
      var list, events, position, i, originalListener;

      checkListener(listener);

      events = this._events;
      if (events === undefined)
        return this;

      list = events[type];
      if (list === undefined)
        return this;

      if (list === listener || list.listener === listener) {
        if (--this._eventsCount === 0)
          this._events = Object.create(null);
        else {
          delete events[type];
          if (events.removeListener)
            this.emit('removeListener', type, list.listener || listener);
        }
      } else if (typeof list !== 'function') {
        position = -1;

        for (i = list.length - 1; i >= 0; i--) {
          if (list[i] === listener || list[i].listener === listener) {
            originalListener = list[i].listener;
            position = i;
            break;
          }
        }

        if (position < 0)
          return this;

        if (position === 0)
          list.shift();
        else {
          spliceOne(list, position);
        }

        if (list.length === 1)
          events[type] = list[0];

        if (events.removeListener !== undefined)
          this.emit('removeListener', type, originalListener || listener);
      }

      return this;
    };

EventEmitter.prototype.off = EventEmitter.prototype.removeListener;

EventEmitter.prototype.removeAllListeners =
    function removeAllListeners(type) {
      var listeners, events, i;

      events = this._events;
      if (events === undefined)
        return this;

      // not listening for removeListener, no need to emit
      if (events.removeListener === undefined) {
        if (arguments.length === 0) {
          this._events = Object.create(null);
          this._eventsCount = 0;
        } else if (events[type] !== undefined) {
          if (--this._eventsCount === 0)
            this._events = Object.create(null);
          else
            delete events[type];
        }
        return this;
      }

      // emit removeListener for all listeners on all events
      if (arguments.length === 0) {
        var keys = Object.keys(events);
        var key;
        for (i = 0; i < keys.length; ++i) {
          key = keys[i];
          if (key === 'removeListener') continue;
          this.removeAllListeners(key);
        }
        this.removeAllListeners('removeListener');
        this._events = Object.create(null);
        this._eventsCount = 0;
        return this;
      }

      listeners = events[type];

      if (typeof listeners === 'function') {
        this.removeListener(type, listeners);
      } else if (listeners !== undefined) {
        // LIFO order
        for (i = listeners.length - 1; i >= 0; i--) {
          this.removeListener(type, listeners[i]);
        }
      }

      return this;
    };

function _listeners(target, type, unwrap) {
  var events = target._events;

  if (events === undefined)
    return [];

  var evlistener = events[type];
  if (evlistener === undefined)
    return [];

  if (typeof evlistener === 'function')
    return unwrap ? [evlistener.listener || evlistener] : [evlistener];

  return unwrap ?
    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);
}

EventEmitter.prototype.listeners = function listeners(type) {
  return _listeners(this, type, true);
};

EventEmitter.prototype.rawListeners = function rawListeners(type) {
  return _listeners(this, type, false);
};

EventEmitter.listenerCount = function(emitter, type) {
  if (typeof emitter.listenerCount === 'function') {
    return emitter.listenerCount(type);
  } else {
    return listenerCount.call(emitter, type);
  }
};

EventEmitter.prototype.listenerCount = listenerCount;
function listenerCount(type) {
  var events = this._events;

  if (events !== undefined) {
    var evlistener = events[type];

    if (typeof evlistener === 'function') {
      return 1;
    } else if (evlistener !== undefined) {
      return evlistener.length;
    }
  }

  return 0;
}

EventEmitter.prototype.eventNames = function eventNames() {
  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];
};

function arrayClone(arr, n) {
  var copy = new Array(n);
  for (var i = 0; i < n; ++i)
    copy[i] = arr[i];
  return copy;
}

function spliceOne(list, index) {
  for (; index + 1 < list.length; index++)
    list[index] = list[index + 1];
  list.pop();
}

function unwrapListeners(arr) {
  var ret = new Array(arr.length);
  for (var i = 0; i < ret.length; ++i) {
    ret[i] = arr[i].listener || arr[i];
  }
  return ret;
}

function once(emitter, name) {
  return new Promise(function (resolve, reject) {
    function errorListener(err) {
      emitter.removeListener(name, resolver);
      reject(err);
    }

    function resolver() {
      if (typeof emitter.removeListener === 'function') {
        emitter.removeListener('error', errorListener);
      }
      resolve([].slice.call(arguments));
    };

    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });
    if (name !== 'error') {
      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });
    }
  });
}

function addErrorHandlerIfEventEmitter(emitter, handler, flags) {
  if (typeof emitter.on === 'function') {
    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);
  }
}

function eventTargetAgnosticAddListener(emitter, name, listener, flags) {
  if (typeof emitter.on === 'function') {
    if (flags.once) {
      emitter.once(name, listener);
    } else {
      emitter.on(name, listener);
    }
  } else if (typeof emitter.addEventListener === 'function') {
    // EventTarget does not have `error` event semantics like Node
    // EventEmitters, we do not listen for `error` events here.
    emitter.addEventListener(name, function wrapListener(arg) {
      // IE does not have builtin `{ once: true }` support so we
      // have to do it manually.
      if (flags.once) {
        emitter.removeEventListener(name, wrapListener);
      }
      listener(arg);
    });
  } else {
    throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof emitter);
  }
}


/***/ }),

/***/ "../core/node_modules/uuid/dist/commonjs-browser/index.js":
/*!****************************************************************!*\
  !*** ../core/node_modules/uuid/dist/commonjs-browser/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
Object.defineProperty(exports, "NIL", ({
  enumerable: true,
  get: function get() {
    return _nil.default;
  }
}));
Object.defineProperty(exports, "parse", ({
  enumerable: true,
  get: function get() {
    return _parse.default;
  }
}));
Object.defineProperty(exports, "stringify", ({
  enumerable: true,
  get: function get() {
    return _stringify.default;
  }
}));
Object.defineProperty(exports, "v1", ({
  enumerable: true,
  get: function get() {
    return _v.default;
  }
}));
Object.defineProperty(exports, "v3", ({
  enumerable: true,
  get: function get() {
    return _v2.default;
  }
}));
Object.defineProperty(exports, "v4", ({
  enumerable: true,
  get: function get() {
    return _v3.default;
  }
}));
Object.defineProperty(exports, "v5", ({
  enumerable: true,
  get: function get() {
    return _v4.default;
  }
}));
Object.defineProperty(exports, "validate", ({
  enumerable: true,
  get: function get() {
    return _validate.default;
  }
}));
Object.defineProperty(exports, "version", ({
  enumerable: true,
  get: function get() {
    return _version.default;
  }
}));

var _v = _interopRequireDefault(__webpack_require__(/*! ./v1.js */ "../core/node_modules/uuid/dist/commonjs-browser/v1.js"));

var _v2 = _interopRequireDefault(__webpack_require__(/*! ./v3.js */ "../core/node_modules/uuid/dist/commonjs-browser/v3.js"));

var _v3 = _interopRequireDefault(__webpack_require__(/*! ./v4.js */ "../core/node_modules/uuid/dist/commonjs-browser/v4.js"));

var _v4 = _interopRequireDefault(__webpack_require__(/*! ./v5.js */ "../core/node_modules/uuid/dist/commonjs-browser/v5.js"));

var _nil = _interopRequireDefault(__webpack_require__(/*! ./nil.js */ "../core/node_modules/uuid/dist/commonjs-browser/nil.js"));

var _version = _interopRequireDefault(__webpack_require__(/*! ./version.js */ "../core/node_modules/uuid/dist/commonjs-browser/version.js"));

var _validate = _interopRequireDefault(__webpack_require__(/*! ./validate.js */ "../core/node_modules/uuid/dist/commonjs-browser/validate.js"));

var _stringify = _interopRequireDefault(__webpack_require__(/*! ./stringify.js */ "../core/node_modules/uuid/dist/commonjs-browser/stringify.js"));

var _parse = _interopRequireDefault(__webpack_require__(/*! ./parse.js */ "../core/node_modules/uuid/dist/commonjs-browser/parse.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "../core/node_modules/uuid/dist/commonjs-browser/md5.js":
/*!**************************************************************!*\
  !*** ../core/node_modules/uuid/dist/commonjs-browser/md5.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

/*
 * Browser-compatible JavaScript MD5
 *
 * Modification of JavaScript MD5
 * https://github.com/blueimp/JavaScript-MD5
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * https://opensource.org/licenses/MIT
 *
 * Based on
 * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message
 * Digest Algorithm, as defined in RFC 1321.
 * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for more info.
 */
function md5(bytes) {
  if (typeof bytes === 'string') {
    const msg = unescape(encodeURIComponent(bytes)); // UTF8 escape

    bytes = new Uint8Array(msg.length);

    for (let i = 0; i < msg.length; ++i) {
      bytes[i] = msg.charCodeAt(i);
    }
  }

  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));
}
/*
 * Convert an array of little-endian words to an array of bytes
 */


function md5ToHexEncodedArray(input) {
  const output = [];
  const length32 = input.length * 32;
  const hexTab = '0123456789abcdef';

  for (let i = 0; i < length32; i += 8) {
    const x = input[i >> 5] >>> i % 32 & 0xff;
    const hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);
    output.push(hex);
  }

  return output;
}
/**
 * Calculate output length with padding and bit length
 */


function getOutputLength(inputLength8) {
  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;
}
/*
 * Calculate the MD5 of an array of little-endian words, and a bit length.
 */


function wordsToMd5(x, len) {
  /* append padding */
  x[len >> 5] |= 0x80 << len % 32;
  x[getOutputLength(len) - 1] = len;
  let a = 1732584193;
  let b = -271733879;
  let c = -1732584194;
  let d = 271733878;

  for (let i = 0; i < x.length; i += 16) {
    const olda = a;
    const oldb = b;
    const oldc = c;
    const oldd = d;
    a = md5ff(a, b, c, d, x[i], 7, -680876936);
    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);
    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);
    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);
    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);
    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);
    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);
    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);
    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);
    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);
    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);
    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);
    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);
    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);
    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);
    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);
    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);
    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);
    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);
    b = md5gg(b, c, d, a, x[i], 20, -373897302);
    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);
    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);
    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);
    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);
    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);
    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);
    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);
    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);
    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);
    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);
    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);
    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);
    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);
    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);
    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);
    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);
    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);
    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);
    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);
    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);
    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);
    d = md5hh(d, a, b, c, x[i], 11, -358537222);
    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);
    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);
    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);
    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);
    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);
    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);
    a = md5ii(a, b, c, d, x[i], 6, -198630844);
    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);
    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);
    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);
    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);
    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);
    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);
    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);
    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);
    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);
    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);
    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);
    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);
    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);
    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);
    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);
    a = safeAdd(a, olda);
    b = safeAdd(b, oldb);
    c = safeAdd(c, oldc);
    d = safeAdd(d, oldd);
  }

  return [a, b, c, d];
}
/*
 * Convert an array bytes to an array of little-endian words
 * Characters >255 have their high-byte silently ignored.
 */


function bytesToWords(input) {
  if (input.length === 0) {
    return [];
  }

  const length8 = input.length * 8;
  const output = new Uint32Array(getOutputLength(length8));

  for (let i = 0; i < length8; i += 8) {
    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;
  }

  return output;
}
/*
 * Add integers, wrapping at 2^32. This uses 16-bit operations internally
 * to work around bugs in some JS interpreters.
 */


function safeAdd(x, y) {
  const lsw = (x & 0xffff) + (y & 0xffff);
  const msw = (x >> 16) + (y >> 16) + (lsw >> 16);
  return msw << 16 | lsw & 0xffff;
}
/*
 * Bitwise rotate a 32-bit number to the left.
 */


function bitRotateLeft(num, cnt) {
  return num << cnt | num >>> 32 - cnt;
}
/*
 * These functions implement the four basic operations the algorithm uses.
 */


function md5cmn(q, a, b, x, s, t) {
  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);
}

function md5ff(a, b, c, d, x, s, t) {
  return md5cmn(b & c | ~b & d, a, b, x, s, t);
}

function md5gg(a, b, c, d, x, s, t) {
  return md5cmn(b & d | c & ~d, a, b, x, s, t);
}

function md5hh(a, b, c, d, x, s, t) {
  return md5cmn(b ^ c ^ d, a, b, x, s, t);
}

function md5ii(a, b, c, d, x, s, t) {
  return md5cmn(c ^ (b | ~d), a, b, x, s, t);
}

var _default = md5;
exports["default"] = _default;

/***/ }),

/***/ "../core/node_modules/uuid/dist/commonjs-browser/native.js":
/*!*****************************************************************!*\
  !*** ../core/node_modules/uuid/dist/commonjs-browser/native.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;
const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);
var _default = {
  randomUUID
};
exports["default"] = _default;

/***/ }),

/***/ "../core/node_modules/uuid/dist/commonjs-browser/nil.js":
/*!**************************************************************!*\
  !*** ../core/node_modules/uuid/dist/commonjs-browser/nil.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;
var _default = '00000000-0000-0000-0000-000000000000';
exports["default"] = _default;

/***/ }),

/***/ "../core/node_modules/uuid/dist/commonjs-browser/parse.js":
/*!****************************************************************!*\
  !*** ../core/node_modules/uuid/dist/commonjs-browser/parse.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

var _validate = _interopRequireDefault(__webpack_require__(/*! ./validate.js */ "../core/node_modules/uuid/dist/commonjs-browser/validate.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function parse(uuid) {
  if (!(0, _validate.default)(uuid)) {
    throw TypeError('Invalid UUID');
  }

  let v;
  const arr = new Uint8Array(16); // Parse ########-....-....-....-............

  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;
  arr[1] = v >>> 16 & 0xff;
  arr[2] = v >>> 8 & 0xff;
  arr[3] = v & 0xff; // Parse ........-####-....-....-............

  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;
  arr[5] = v & 0xff; // Parse ........-....-####-....-............

  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;
  arr[7] = v & 0xff; // Parse ........-....-....-####-............

  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;
  arr[9] = v & 0xff; // Parse ........-....-....-....-############
  // (Use "/" to avoid 32-bit truncation when bit-shifting high-order bytes)

  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;
  arr[11] = v / 0x100000000 & 0xff;
  arr[12] = v >>> 24 & 0xff;
  arr[13] = v >>> 16 & 0xff;
  arr[14] = v >>> 8 & 0xff;
  arr[15] = v & 0xff;
  return arr;
}

var _default = parse;
exports["default"] = _default;

/***/ }),

/***/ "../core/node_modules/uuid/dist/commonjs-browser/regex.js":
/*!****************************************************************!*\
  !*** ../core/node_modules/uuid/dist/commonjs-browser/regex.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;
var _default = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;
exports["default"] = _default;

/***/ }),

/***/ "../core/node_modules/uuid/dist/commonjs-browser/rng.js":
/*!**************************************************************!*\
  !*** ../core/node_modules/uuid/dist/commonjs-browser/rng.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = rng;
// Unique ID creation requires a high quality random # generator. In the browser we therefore
// require the crypto API and do not support built-in fallback to lower quality random number
// generators (like Math.random()).
let getRandomValues;
const rnds8 = new Uint8Array(16);

function rng() {
  // lazy load so that environments that need to polyfill have a chance to do so
  if (!getRandomValues) {
    // getRandomValues needs to be invoked in a context where "this" is a Crypto implementation.
    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);

    if (!getRandomValues) {
      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');
    }
  }

  return getRandomValues(rnds8);
}

/***/ }),

/***/ "../core/node_modules/uuid/dist/commonjs-browser/sha1.js":
/*!***************************************************************!*\
  !*** ../core/node_modules/uuid/dist/commonjs-browser/sha1.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

// Adapted from Chris Veness' SHA1 code at
// http://www.movable-type.co.uk/scripts/sha1.html
function f(s, x, y, z) {
  switch (s) {
    case 0:
      return x & y ^ ~x & z;

    case 1:
      return x ^ y ^ z;

    case 2:
      return x & y ^ x & z ^ y & z;

    case 3:
      return x ^ y ^ z;
  }
}

function ROTL(x, n) {
  return x << n | x >>> 32 - n;
}

function sha1(bytes) {
  const K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];
  const H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];

  if (typeof bytes === 'string') {
    const msg = unescape(encodeURIComponent(bytes)); // UTF8 escape

    bytes = [];

    for (let i = 0; i < msg.length; ++i) {
      bytes.push(msg.charCodeAt(i));
    }
  } else if (!Array.isArray(bytes)) {
    // Convert Array-like to Array
    bytes = Array.prototype.slice.call(bytes);
  }

  bytes.push(0x80);
  const l = bytes.length / 4 + 2;
  const N = Math.ceil(l / 16);
  const M = new Array(N);

  for (let i = 0; i < N; ++i) {
    const arr = new Uint32Array(16);

    for (let j = 0; j < 16; ++j) {
      arr[j] = bytes[i * 64 + j * 4] << 24 | bytes[i * 64 + j * 4 + 1] << 16 | bytes[i * 64 + j * 4 + 2] << 8 | bytes[i * 64 + j * 4 + 3];
    }

    M[i] = arr;
  }

  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);
  M[N - 1][14] = Math.floor(M[N - 1][14]);
  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;

  for (let i = 0; i < N; ++i) {
    const W = new Uint32Array(80);

    for (let t = 0; t < 16; ++t) {
      W[t] = M[i][t];
    }

    for (let t = 16; t < 80; ++t) {
      W[t] = ROTL(W[t - 3] ^ W[t - 8] ^ W[t - 14] ^ W[t - 16], 1);
    }

    let a = H[0];
    let b = H[1];
    let c = H[2];
    let d = H[3];
    let e = H[4];

    for (let t = 0; t < 80; ++t) {
      const s = Math.floor(t / 20);
      const T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[t] >>> 0;
      e = d;
      d = c;
      c = ROTL(b, 30) >>> 0;
      b = a;
      a = T;
    }

    H[0] = H[0] + a >>> 0;
    H[1] = H[1] + b >>> 0;
    H[2] = H[2] + c >>> 0;
    H[3] = H[3] + d >>> 0;
    H[4] = H[4] + e >>> 0;
  }

  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];
}

var _default = sha1;
exports["default"] = _default;

/***/ }),

/***/ "../core/node_modules/uuid/dist/commonjs-browser/stringify.js":
/*!********************************************************************!*\
  !*** ../core/node_modules/uuid/dist/commonjs-browser/stringify.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;
exports.unsafeStringify = unsafeStringify;

var _validate = _interopRequireDefault(__webpack_require__(/*! ./validate.js */ "../core/node_modules/uuid/dist/commonjs-browser/validate.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Convert array of 16 byte values to UUID string format of the form:
 * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
 */
const byteToHex = [];

for (let i = 0; i < 256; ++i) {
  byteToHex.push((i + 0x100).toString(16).slice(1));
}

function unsafeStringify(arr, offset = 0) {
  // Note: Be careful editing this code!  It's been tuned for performance
  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434
  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();
}

function stringify(arr, offset = 0) {
  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one
  // of the following:
  // - One or more input array values don't map to a hex octet (leading to
  // "undefined" in the uuid)
  // - Invalid input values for the RFC `version` or `variant` fields

  if (!(0, _validate.default)(uuid)) {
    throw TypeError('Stringified UUID is invalid');
  }

  return uuid;
}

var _default = stringify;
exports["default"] = _default;

/***/ }),

/***/ "../core/node_modules/uuid/dist/commonjs-browser/v1.js":
/*!*************************************************************!*\
  !*** ../core/node_modules/uuid/dist/commonjs-browser/v1.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

var _rng = _interopRequireDefault(__webpack_require__(/*! ./rng.js */ "../core/node_modules/uuid/dist/commonjs-browser/rng.js"));

var _stringify = __webpack_require__(/*! ./stringify.js */ "../core/node_modules/uuid/dist/commonjs-browser/stringify.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// **`v1()` - Generate time-based UUID**
//
// Inspired by https://github.com/LiosK/UUID.js
// and http://docs.python.org/library/uuid.html
let _nodeId;

let _clockseq; // Previous uuid creation time


let _lastMSecs = 0;
let _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details

function v1(options, buf, offset) {
  let i = buf && offset || 0;
  const b = buf || new Array(16);
  options = options || {};
  let node = options.node || _nodeId;
  let clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not
  // specified.  We do this lazily to minimize issues related to insufficient
  // system entropy.  See #189

  if (node == null || clockseq == null) {
    const seedBytes = options.random || (options.rng || _rng.default)();

    if (node == null) {
      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)
      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];
    }

    if (clockseq == null) {
      // Per 4.2.2, randomize (14 bit) clockseq
      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;
    }
  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,
  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so
  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'
  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.


  let msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock
  // cycle to simulate higher resolution clock

  let nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)

  const dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression

  if (dt < 0 && options.clockseq === undefined) {
    clockseq = clockseq + 1 & 0x3fff;
  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new
  // time interval


  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {
    nsecs = 0;
  } // Per 4.2.1.2 Throw error if too many uuids are requested


  if (nsecs >= 10000) {
    throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");
  }

  _lastMSecs = msecs;
  _lastNSecs = nsecs;
  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch

  msecs += 12219292800000; // `time_low`

  const tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;
  b[i++] = tl >>> 24 & 0xff;
  b[i++] = tl >>> 16 & 0xff;
  b[i++] = tl >>> 8 & 0xff;
  b[i++] = tl & 0xff; // `time_mid`

  const tmh = msecs / 0x100000000 * 10000 & 0xfffffff;
  b[i++] = tmh >>> 8 & 0xff;
  b[i++] = tmh & 0xff; // `time_high_and_version`

  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version

  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)

  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`

  b[i++] = clockseq & 0xff; // `node`

  for (let n = 0; n < 6; ++n) {
    b[i + n] = node[n];
  }

  return buf || (0, _stringify.unsafeStringify)(b);
}

var _default = v1;
exports["default"] = _default;

/***/ }),

/***/ "../core/node_modules/uuid/dist/commonjs-browser/v3.js":
/*!*************************************************************!*\
  !*** ../core/node_modules/uuid/dist/commonjs-browser/v3.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

var _v = _interopRequireDefault(__webpack_require__(/*! ./v35.js */ "../core/node_modules/uuid/dist/commonjs-browser/v35.js"));

var _md = _interopRequireDefault(__webpack_require__(/*! ./md5.js */ "../core/node_modules/uuid/dist/commonjs-browser/md5.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const v3 = (0, _v.default)('v3', 0x30, _md.default);
var _default = v3;
exports["default"] = _default;

/***/ }),

/***/ "../core/node_modules/uuid/dist/commonjs-browser/v35.js":
/*!**************************************************************!*\
  !*** ../core/node_modules/uuid/dist/commonjs-browser/v35.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.URL = exports.DNS = void 0;
exports["default"] = v35;

var _stringify = __webpack_require__(/*! ./stringify.js */ "../core/node_modules/uuid/dist/commonjs-browser/stringify.js");

var _parse = _interopRequireDefault(__webpack_require__(/*! ./parse.js */ "../core/node_modules/uuid/dist/commonjs-browser/parse.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function stringToBytes(str) {
  str = unescape(encodeURIComponent(str)); // UTF8 escape

  const bytes = [];

  for (let i = 0; i < str.length; ++i) {
    bytes.push(str.charCodeAt(i));
  }

  return bytes;
}

const DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';
exports.DNS = DNS;
const URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';
exports.URL = URL;

function v35(name, version, hashfunc) {
  function generateUUID(value, namespace, buf, offset) {
    var _namespace;

    if (typeof value === 'string') {
      value = stringToBytes(value);
    }

    if (typeof namespace === 'string') {
      namespace = (0, _parse.default)(namespace);
    }

    if (((_namespace = namespace) === null || _namespace === void 0 ? void 0 : _namespace.length) !== 16) {
      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');
    } // Compute hash of namespace and value, Per 4.3
    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =
    // hashfunc([...namespace, ... value])`


    let bytes = new Uint8Array(16 + value.length);
    bytes.set(namespace);
    bytes.set(value, namespace.length);
    bytes = hashfunc(bytes);
    bytes[6] = bytes[6] & 0x0f | version;
    bytes[8] = bytes[8] & 0x3f | 0x80;

    if (buf) {
      offset = offset || 0;

      for (let i = 0; i < 16; ++i) {
        buf[offset + i] = bytes[i];
      }

      return buf;
    }

    return (0, _stringify.unsafeStringify)(bytes);
  } // Function#name is not settable on some platforms (#270)


  try {
    generateUUID.name = name; // eslint-disable-next-line no-empty
  } catch (err) {} // For CommonJS default export support


  generateUUID.DNS = DNS;
  generateUUID.URL = URL;
  return generateUUID;
}

/***/ }),

/***/ "../core/node_modules/uuid/dist/commonjs-browser/v4.js":
/*!*************************************************************!*\
  !*** ../core/node_modules/uuid/dist/commonjs-browser/v4.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

var _native = _interopRequireDefault(__webpack_require__(/*! ./native.js */ "../core/node_modules/uuid/dist/commonjs-browser/native.js"));

var _rng = _interopRequireDefault(__webpack_require__(/*! ./rng.js */ "../core/node_modules/uuid/dist/commonjs-browser/rng.js"));

var _stringify = __webpack_require__(/*! ./stringify.js */ "../core/node_modules/uuid/dist/commonjs-browser/stringify.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function v4(options, buf, offset) {
  if (_native.default.randomUUID && !buf && !options) {
    return _native.default.randomUUID();
  }

  options = options || {};

  const rnds = options.random || (options.rng || _rng.default)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`


  rnds[6] = rnds[6] & 0x0f | 0x40;
  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided

  if (buf) {
    offset = offset || 0;

    for (let i = 0; i < 16; ++i) {
      buf[offset + i] = rnds[i];
    }

    return buf;
  }

  return (0, _stringify.unsafeStringify)(rnds);
}

var _default = v4;
exports["default"] = _default;

/***/ }),

/***/ "../core/node_modules/uuid/dist/commonjs-browser/v5.js":
/*!*************************************************************!*\
  !*** ../core/node_modules/uuid/dist/commonjs-browser/v5.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

var _v = _interopRequireDefault(__webpack_require__(/*! ./v35.js */ "../core/node_modules/uuid/dist/commonjs-browser/v35.js"));

var _sha = _interopRequireDefault(__webpack_require__(/*! ./sha1.js */ "../core/node_modules/uuid/dist/commonjs-browser/sha1.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const v5 = (0, _v.default)('v5', 0x50, _sha.default);
var _default = v5;
exports["default"] = _default;

/***/ }),

/***/ "../core/node_modules/uuid/dist/commonjs-browser/validate.js":
/*!*******************************************************************!*\
  !*** ../core/node_modules/uuid/dist/commonjs-browser/validate.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

var _regex = _interopRequireDefault(__webpack_require__(/*! ./regex.js */ "../core/node_modules/uuid/dist/commonjs-browser/regex.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function validate(uuid) {
  return typeof uuid === 'string' && _regex.default.test(uuid);
}

var _default = validate;
exports["default"] = _default;

/***/ }),

/***/ "../core/node_modules/uuid/dist/commonjs-browser/version.js":
/*!******************************************************************!*\
  !*** ../core/node_modules/uuid/dist/commonjs-browser/version.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

var _validate = _interopRequireDefault(__webpack_require__(/*! ./validate.js */ "../core/node_modules/uuid/dist/commonjs-browser/validate.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function version(uuid) {
  if (!(0, _validate.default)(uuid)) {
    throw TypeError('Invalid UUID');
  }

  return parseInt(uuid.slice(14, 15), 16);
}

var _default = version;
exports["default"] = _default;

/***/ }),

/***/ "../core/node_modules/uuid/dist/esm-browser/native.js":
/*!************************************************************!*\
  !*** ../core/node_modules/uuid/dist/esm-browser/native.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  randomUUID
});

/***/ }),

/***/ "../core/node_modules/uuid/dist/esm-browser/regex.js":
/*!***********************************************************!*\
  !*** ../core/node_modules/uuid/dist/esm-browser/regex.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i);

/***/ }),

/***/ "../core/node_modules/uuid/dist/esm-browser/rng.js":
/*!*********************************************************!*\
  !*** ../core/node_modules/uuid/dist/esm-browser/rng.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ rng)
/* harmony export */ });
// Unique ID creation requires a high quality random # generator. In the browser we therefore
// require the crypto API and do not support built-in fallback to lower quality random number
// generators (like Math.random()).
let getRandomValues;
const rnds8 = new Uint8Array(16);
function rng() {
  // lazy load so that environments that need to polyfill have a chance to do so
  if (!getRandomValues) {
    // getRandomValues needs to be invoked in a context where "this" is a Crypto implementation.
    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);

    if (!getRandomValues) {
      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');
    }
  }

  return getRandomValues(rnds8);
}

/***/ }),

/***/ "../core/node_modules/uuid/dist/esm-browser/stringify.js":
/*!***************************************************************!*\
  !*** ../core/node_modules/uuid/dist/esm-browser/stringify.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "unsafeStringify": () => (/* binding */ unsafeStringify)
/* harmony export */ });
/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ "../core/node_modules/uuid/dist/esm-browser/validate.js");

/**
 * Convert array of 16 byte values to UUID string format of the form:
 * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
 */

const byteToHex = [];

for (let i = 0; i < 256; ++i) {
  byteToHex.push((i + 0x100).toString(16).slice(1));
}

function unsafeStringify(arr, offset = 0) {
  // Note: Be careful editing this code!  It's been tuned for performance
  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434
  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();
}

function stringify(arr, offset = 0) {
  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one
  // of the following:
  // - One or more input array values don't map to a hex octet (leading to
  // "undefined" in the uuid)
  // - Invalid input values for the RFC `version` or `variant` fields

  if (!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__["default"])(uuid)) {
    throw TypeError('Stringified UUID is invalid');
  }

  return uuid;
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (stringify);

/***/ }),

/***/ "../core/node_modules/uuid/dist/esm-browser/v4.js":
/*!********************************************************!*\
  !*** ../core/node_modules/uuid/dist/esm-browser/v4.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _native_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./native.js */ "../core/node_modules/uuid/dist/esm-browser/native.js");
/* harmony import */ var _rng_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rng.js */ "../core/node_modules/uuid/dist/esm-browser/rng.js");
/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./stringify.js */ "../core/node_modules/uuid/dist/esm-browser/stringify.js");




function v4(options, buf, offset) {
  if (_native_js__WEBPACK_IMPORTED_MODULE_0__["default"].randomUUID && !buf && !options) {
    return _native_js__WEBPACK_IMPORTED_MODULE_0__["default"].randomUUID();
  }

  options = options || {};
  const rnds = options.random || (options.rng || _rng_js__WEBPACK_IMPORTED_MODULE_1__["default"])(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`

  rnds[6] = rnds[6] & 0x0f | 0x40;
  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided

  if (buf) {
    offset = offset || 0;

    for (let i = 0; i < 16; ++i) {
      buf[offset + i] = rnds[i];
    }

    return buf;
  }

  return (0,_stringify_js__WEBPACK_IMPORTED_MODULE_2__.unsafeStringify)(rnds);
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (v4);

/***/ }),

/***/ "../core/node_modules/uuid/dist/esm-browser/validate.js":
/*!**************************************************************!*\
  !*** ../core/node_modules/uuid/dist/esm-browser/validate.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _regex_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./regex.js */ "../core/node_modules/uuid/dist/esm-browser/regex.js");


function validate(uuid) {
  return typeof uuid === 'string' && _regex_js__WEBPACK_IMPORTED_MODULE_0__["default"].test(uuid);
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (validate);

/***/ }),

/***/ "../oidc-browser/dist/index.es.js":
/*!****************************************!*\
  !*** ../oidc-browser/dist/index.es.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CordovaIFrameNavigator": () => (/* reexport safe */ _inrupt_oidc_client__WEBPACK_IMPORTED_MODULE_0__.CordovaIFrameNavigator),
/* harmony export */   "CordovaPopupNavigator": () => (/* reexport safe */ _inrupt_oidc_client__WEBPACK_IMPORTED_MODULE_0__.CordovaPopupNavigator),
/* harmony export */   "InMemoryWebStorage": () => (/* reexport safe */ _inrupt_oidc_client__WEBPACK_IMPORTED_MODULE_0__.InMemoryWebStorage),
/* harmony export */   "Log": () => (/* reexport safe */ _inrupt_oidc_client__WEBPACK_IMPORTED_MODULE_0__.Log),
/* harmony export */   "OidcClient": () => (/* reexport safe */ _inrupt_oidc_client__WEBPACK_IMPORTED_MODULE_0__.OidcClient),
/* harmony export */   "SessionMonitor": () => (/* reexport safe */ _inrupt_oidc_client__WEBPACK_IMPORTED_MODULE_0__.SessionMonitor),
/* harmony export */   "User": () => (/* reexport safe */ _inrupt_oidc_client__WEBPACK_IMPORTED_MODULE_0__.User),
/* harmony export */   "UserManager": () => (/* reexport safe */ _inrupt_oidc_client__WEBPACK_IMPORTED_MODULE_0__.UserManager),
/* harmony export */   "Version": () => (/* reexport safe */ _inrupt_oidc_client__WEBPACK_IMPORTED_MODULE_0__.Version),
/* harmony export */   "WebStorageStateStore": () => (/* reexport safe */ _inrupt_oidc_client__WEBPACK_IMPORTED_MODULE_0__.WebStorageStateStore),
/* harmony export */   "clearOidcPersistentStorage": () => (/* binding */ clearOidcPersistentStorage),
/* harmony export */   "getBearerToken": () => (/* binding */ getBearerToken),
/* harmony export */   "getDpopToken": () => (/* binding */ getDpopToken),
/* harmony export */   "refresh": () => (/* binding */ refresh),
/* harmony export */   "registerClient": () => (/* binding */ registerClient),
/* harmony export */   "removeOidcQueryParam": () => (/* binding */ removeOidcQueryParam)
/* harmony export */ });
/* harmony import */ var _inrupt_oidc_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @inrupt/oidc-client */ "../oidc-browser/node_modules/@inrupt/oidc-client/lib/oidc-client.min.js");
/* harmony import */ var _inrupt_oidc_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_inrupt_oidc_client__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _inrupt_solid_client_authn_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @inrupt/solid-client-authn-core */ "../core/dist/index.mjs");
/* harmony import */ var _inrupt_universal_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @inrupt/universal-fetch */ "../oidc-browser/node_modules/@inrupt/universal-fetch/dist/index-browser.mjs");





function processErrorResponse(responseBody, options) {
    var _a, _b, _c, _d;
    if (responseBody.error === "invalid_redirect_uri") {
        throw new Error(`Dynamic client registration failed: the provided redirect uri [${(_a = options.redirectUrl) === null || _a === void 0 ? void 0 : _a.toString()}] is invalid - ${(_b = responseBody.error_description) !== null && _b !== void 0 ? _b : ""}`);
    }
    if (responseBody.error === "invalid_client_metadata") {
        throw new Error(`Dynamic client registration failed: the provided client metadata ${JSON.stringify(options)} is invalid - ${(_c = responseBody.error_description) !== null && _c !== void 0 ? _c : ""}`);
    }
    throw new Error(`Dynamic client registration failed: ${responseBody.error} - ${(_d = responseBody.error_description) !== null && _d !== void 0 ? _d : ""}`);
}
function validateRegistrationResponse(responseBody, options) {
    if (responseBody.client_id === undefined) {
        throw new Error(`Dynamic client registration failed: no client_id has been found on ${JSON.stringify(responseBody)}`);
    }
    if (options.redirectUrl &&
        (responseBody.redirect_uris === undefined ||
            responseBody.redirect_uris[0] !== options.redirectUrl.toString())) {
        throw new Error(`Dynamic client registration failed: the returned redirect URIs ${JSON.stringify(responseBody.redirect_uris)} don't match the provided ${JSON.stringify([
            options.redirectUrl.toString(),
        ])}`);
    }
}
async function registerClient(options, issuerConfig) {
    var _a;
    if (!issuerConfig.registrationEndpoint) {
        throw new Error("Dynamic Registration could not be completed because the issuer has no registration endpoint.");
    }
    if (!Array.isArray(issuerConfig.idTokenSigningAlgValuesSupported)) {
        throw new Error("The OIDC issuer discovery profile is missing the 'id_token_signing_alg_values_supported' value, which is mandatory.");
    }
    const signingAlg = (0,_inrupt_solid_client_authn_core__WEBPACK_IMPORTED_MODULE_1__.determineSigningAlg)(issuerConfig.idTokenSigningAlgValuesSupported, _inrupt_solid_client_authn_core__WEBPACK_IMPORTED_MODULE_1__.PREFERRED_SIGNING_ALG);
    const config = {
        client_name: options.clientName,
        application_type: "web",
        redirect_uris: [(_a = options.redirectUrl) === null || _a === void 0 ? void 0 : _a.toString()],
        subject_type: "public",
        token_endpoint_auth_method: "client_secret_basic",
        id_token_signed_response_alg: signingAlg,
        grant_types: ["authorization_code", "refresh_token"],
    };
    const headers = {
        "Content-Type": "application/json",
    };
    const registerResponse = await fetch(issuerConfig.registrationEndpoint.toString(), {
        method: "POST",
        headers,
        body: JSON.stringify(config),
    });
    if (registerResponse.ok) {
        const responseBody = await registerResponse.json();
        validateRegistrationResponse(responseBody, options);
        return {
            clientId: responseBody.client_id,
            clientSecret: responseBody.client_secret,
            idTokenSignedResponseAlg: responseBody.id_token_signed_response_alg,
            clientType: "dynamic",
        };
    }
    if (registerResponse.status === 400) {
        processErrorResponse(await registerResponse.json(), options);
    }
    throw new Error(`Dynamic client registration failed: the server returned ${registerResponse.status} ${registerResponse.statusText} - ${await registerResponse.text()}`);
}

function hasError(value) {
    return value.error !== undefined && typeof value.error === "string";
}
function hasErrorDescription(value) {
    return (value.error_description !== undefined &&
        typeof value.error_description === "string");
}
function hasErrorUri(value) {
    return value.error_uri !== undefined && typeof value.error_uri === "string";
}
function hasAccessToken(value) {
    return (value.access_token !== undefined && typeof value.access_token === "string");
}
function hasIdToken(value) {
    return value.id_token !== undefined && typeof value.id_token === "string";
}
function hasRefreshToken(value) {
    return (value.refresh_token !== undefined && typeof value.refresh_token === "string");
}
function hasTokenType(value) {
    return value.token_type !== undefined && typeof value.token_type === "string";
}
function hasExpiresIn(value) {
    return value.expires_in === undefined || typeof value.expires_in === "number";
}
function validatePreconditions(issuer, data) {
    if (data.grantType &&
        (!issuer.grantTypesSupported ||
            !issuer.grantTypesSupported.includes(data.grantType))) {
        throw new Error(`The issuer [${issuer.issuer}] does not support the [${data.grantType}] grant`);
    }
    if (!issuer.tokenEndpoint) {
        throw new Error(`This issuer [${issuer.issuer}] does not have a token endpoint`);
    }
}
function validateTokenEndpointResponse(tokenResponse, dpop) {
    if (hasError(tokenResponse)) {
        throw new _inrupt_solid_client_authn_core__WEBPACK_IMPORTED_MODULE_1__.OidcProviderError(`Token endpoint returned error [${tokenResponse.error}]${hasErrorDescription(tokenResponse)
            ? `: ${tokenResponse.error_description}`
            : ""}${hasErrorUri(tokenResponse) ? ` (see ${tokenResponse.error_uri})` : ""}`, tokenResponse.error, hasErrorDescription(tokenResponse)
            ? tokenResponse.error_description
            : undefined);
    }
    if (!hasAccessToken(tokenResponse)) {
        throw new _inrupt_solid_client_authn_core__WEBPACK_IMPORTED_MODULE_1__.InvalidResponseError(["access_token"]);
    }
    if (!hasIdToken(tokenResponse)) {
        throw new _inrupt_solid_client_authn_core__WEBPACK_IMPORTED_MODULE_1__.InvalidResponseError(["id_token"]);
    }
    if (!hasTokenType(tokenResponse)) {
        throw new _inrupt_solid_client_authn_core__WEBPACK_IMPORTED_MODULE_1__.InvalidResponseError(["token_type"]);
    }
    if (!hasExpiresIn(tokenResponse)) {
        throw new _inrupt_solid_client_authn_core__WEBPACK_IMPORTED_MODULE_1__.InvalidResponseError(["expires_in"]);
    }
    if (!dpop && tokenResponse.token_type.toLowerCase() !== "bearer") {
        throw new Error(`Invalid token endpoint response: requested a [Bearer] token, but got a 'token_type' value of [${tokenResponse.token_type}].`);
    }
    return tokenResponse;
}
async function getTokens(issuer, client, data, dpop) {
    validatePreconditions(issuer, data);
    const headers = {
        "content-type": "application/x-www-form-urlencoded",
    };
    let dpopKey;
    if (dpop) {
        dpopKey = await (0,_inrupt_solid_client_authn_core__WEBPACK_IMPORTED_MODULE_1__.generateDpopKeyPair)();
        headers.DPoP = await (0,_inrupt_solid_client_authn_core__WEBPACK_IMPORTED_MODULE_1__.createDpopHeader)(issuer.tokenEndpoint, "POST", dpopKey);
    }
    if (client.clientSecret) {
        headers.Authorization = `Basic ${btoa(`${client.clientId}:${client.clientSecret}`)}`;
    }
    const requestBody = {
        grant_type: data.grantType,
        redirect_uri: data.redirectUrl,
        code: data.code,
        code_verifier: data.codeVerifier,
        client_id: client.clientId,
    };
    const tokenRequestInit = {
        method: "POST",
        headers,
        body: new URLSearchParams(requestBody).toString(),
    };
    const rawTokenResponse = await (0,_inrupt_universal_fetch__WEBPACK_IMPORTED_MODULE_2__.fetch)(issuer.tokenEndpoint, tokenRequestInit);
    const jsonTokenResponse = (await rawTokenResponse.json());
    const tokenResponse = validateTokenEndpointResponse(jsonTokenResponse, dpop);
    const webId = await (0,_inrupt_solid_client_authn_core__WEBPACK_IMPORTED_MODULE_1__.getWebidFromTokenPayload)(tokenResponse.id_token, issuer.jwksUri, issuer.issuer, client.clientId);
    return {
        accessToken: tokenResponse.access_token,
        idToken: tokenResponse.id_token,
        refreshToken: hasRefreshToken(tokenResponse)
            ? tokenResponse.refresh_token
            : undefined,
        webId,
        dpopKey,
        expiresIn: tokenResponse.expires_in,
    };
}
async function getBearerToken(redirectUrl) {
    let signinResponse;
    try {
        const client = new _inrupt_oidc_client__WEBPACK_IMPORTED_MODULE_0__.OidcClient({
            response_mode: "query",
            loadUserInfo: false,
        });
        signinResponse = await client.processSigninResponse(redirectUrl);
        if (client.settings.metadata === undefined) {
            throw new Error("Cannot retrieve issuer metadata from client information in storage.");
        }
        if (client.settings.metadata.jwks_uri === undefined) {
            throw new Error("Missing some issuer metadata from client information in storage: 'jwks_uri' is undefined");
        }
        if (client.settings.metadata.issuer === undefined) {
            throw new Error("Missing some issuer metadata from client information in storage: 'issuer' is undefined");
        }
        if (client.settings.client_id === undefined) {
            throw new Error("Missing some client information in storage: 'client_id' is undefined");
        }
        const webId = await (0,_inrupt_solid_client_authn_core__WEBPACK_IMPORTED_MODULE_1__.getWebidFromTokenPayload)(signinResponse.id_token, client.settings.metadata.jwks_uri, client.settings.metadata.issuer, client.settings.client_id);
        return {
            accessToken: signinResponse.access_token,
            idToken: signinResponse.id_token,
            webId,
            refreshToken: signinResponse.refresh_token,
        };
    }
    catch (err) {
        throw new Error(`Problem handling Auth Code Grant (Flow) redirect - URL [${redirectUrl}]: ${err}`);
    }
}
async function getDpopToken(issuer, client, data) {
    return getTokens(issuer, client, data, true);
}

const isValidUrl = (url) => {
    try {
        new URL(url);
        return true;
    }
    catch (_a) {
        return false;
    }
};
async function refresh(refreshToken, issuer, client, dpopKey) {
    if (client.clientId === undefined) {
        throw new Error("No client ID available when trying to refresh the access token.");
    }
    const requestBody = {
        grant_type: "refresh_token",
        refresh_token: refreshToken,
        scope: _inrupt_solid_client_authn_core__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_SCOPES,
    };
    let dpopHeader = {};
    if (dpopKey !== undefined) {
        dpopHeader = {
            DPoP: await (0,_inrupt_solid_client_authn_core__WEBPACK_IMPORTED_MODULE_1__.createDpopHeader)(issuer.tokenEndpoint, "POST", dpopKey),
        };
    }
    let authHeader = {};
    if (client.clientSecret !== undefined) {
        authHeader = {
            Authorization: `Basic ${btoa(`${client.clientId}:${client.clientSecret}`)}`,
        };
    }
    else if (isValidUrl(client.clientId)) {
        requestBody.client_id = client.clientId;
    }
    const rawResponse = await (0,_inrupt_universal_fetch__WEBPACK_IMPORTED_MODULE_2__.fetch)(issuer.tokenEndpoint, {
        method: "POST",
        body: new URLSearchParams(requestBody).toString(),
        headers: {
            ...dpopHeader,
            ...authHeader,
            "Content-Type": "application/x-www-form-urlencoded",
        },
    });
    let response;
    try {
        response = await rawResponse.json();
    }
    catch (e) {
        throw new Error(`The token endpoint of issuer ${issuer.issuer} returned a malformed response.`);
    }
    const validatedResponse = validateTokenEndpointResponse(response, dpopKey !== undefined);
    const webId = await (0,_inrupt_solid_client_authn_core__WEBPACK_IMPORTED_MODULE_1__.getWebidFromTokenPayload)(validatedResponse.id_token, issuer.jwksUri, issuer.issuer, client.clientId);
    return {
        accessToken: validatedResponse.access_token,
        idToken: validatedResponse.id_token,
        refreshToken: typeof validatedResponse.refresh_token === "string"
            ? validatedResponse.refresh_token
            : undefined,
        webId,
        dpopKey,
        expiresIn: validatedResponse.expires_in,
    };
}

function removeOidcQueryParam(redirectUrl) {
    const cleanedUrl = new URL(redirectUrl);
    cleanedUrl.searchParams.delete("code");
    cleanedUrl.searchParams.delete("state");
    cleanedUrl.hash = "";
    if (redirectUrl.includes(`${cleanedUrl.origin}/`)) {
        return cleanedUrl.href;
    }
    return `${cleanedUrl.origin}${cleanedUrl.href.substring(cleanedUrl.origin.length + 1)}`;
}
async function clearOidcPersistentStorage() {
    const client = new _inrupt_oidc_client__WEBPACK_IMPORTED_MODULE_0__.OidcClient({
        response_mode: "query",
    });
    await client.clearStaleState(new _inrupt_oidc_client__WEBPACK_IMPORTED_MODULE_0__.WebStorageStateStore({}));
    const myStorage = window.localStorage;
    const itemsToRemove = [];
    for (let i = 0; i <= myStorage.length; i += 1) {
        const key = myStorage.key(i);
        if (key &&
            (key.match(/^oidc\..+$/) ||
                key.match(/^solidClientAuthenticationUser:.+$/))) {
            itemsToRemove.push(key);
        }
    }
    itemsToRemove.forEach((key) => myStorage.removeItem(key));
}




/***/ }),

/***/ "../oidc-browser/node_modules/@inrupt/oidc-client/lib/oidc-client.min.js":
/*!*******************************************************************************!*\
  !*** ../oidc-browser/node_modules/@inrupt/oidc-client/lib/oidc-client.min.js ***!
  \*******************************************************************************/
/***/ (function(module) {

!function t(e,r){if(true)module.exports=r();else { var i, n; }}(this,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function e(){return t.default}:function e(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=22)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();var i={debug:function t(){},info:function t(){},warn:function t(){},error:function t(){}},o=void 0,s=void 0;(e.Log=function(){function t(){!function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.reset=function t(){s=3,o=i},t.debug=function t(){if(s>=4){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];o.debug.apply(o,Array.from(r))}},t.info=function t(){if(s>=3){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];o.info.apply(o,Array.from(r))}},t.warn=function t(){if(s>=2){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];o.warn.apply(o,Array.from(r))}},t.error=function t(){if(s>=1){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];o.error.apply(o,Array.from(r))}},n(t,null,[{key:"NONE",get:function t(){return 0}},{key:"ERROR",get:function t(){return 1}},{key:"WARN",get:function t(){return 2}},{key:"INFO",get:function t(){return 3}},{key:"DEBUG",get:function t(){return 4}},{key:"level",get:function t(){return s},set:function t(e){if(!(0<=e&&e<=4))throw new Error("Invalid log level");s=e}},{key:"logger",get:function t(){return o},set:function t(e){if(!e.debug&&e.info&&(e.debug=e.info),!(e.debug&&e.info&&e.warn&&e.error))throw new Error("Invalid logger");o=e}}]),t}()).reset()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();var i={setInterval:function(t){function e(e,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e){return setInterval(t,e)})),clearInterval:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return clearInterval(t)}))},o=!1,s=null;e.Global=function(){function t(){!function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)}return t._testing=function t(){o=!0},t.setXMLHttpRequest=function t(e){s=e},n(t,null,[{key:"location",get:function t(){if(!o)return location}},{key:"localStorage",get:function t(){if(!o&&"undefined"!=typeof window)return localStorage}},{key:"sessionStorage",get:function t(){if(!o&&"undefined"!=typeof window)return sessionStorage}},{key:"XMLHttpRequest",get:function t(){if(!o&&"undefined"!=typeof window)return s||XMLHttpRequest}},{key:"timer",get:function t(){if(!o)return i}}]),t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MetadataService=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0),o=r(7);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=".well-known/openid-configuration";e.MetadataService=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.JsonService;if(s(this,t),!e)throw i.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=e,this._jsonService=new r(["application/jwk-set+json"])}return t.prototype.resetSigningKeys=function t(){this._settings=this._settings||{},this._settings.signingKeys=void 0},t.prototype.getMetadata=function t(){var e=this;return this._settings.metadata?(i.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(i.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then((function(t){i.Log.debug("MetadataService.getMetadata: json received");var r=e._settings.metadataSeed||{};return e._settings.metadata=Object.assign({},r,t),e._settings.metadata}))):(i.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},t.prototype.getIssuer=function t(){return this._getMetadataProperty("issuer")},t.prototype.getAuthorizationEndpoint=function t(){return this._getMetadataProperty("authorization_endpoint")},t.prototype.getUserInfoEndpoint=function t(){return this._getMetadataProperty("userinfo_endpoint")},t.prototype.getTokenEndpoint=function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._getMetadataProperty("token_endpoint",e)},t.prototype.getCheckSessionIframe=function t(){return this._getMetadataProperty("check_session_iframe",!0)},t.prototype.getEndSessionEndpoint=function t(){return this._getMetadataProperty("end_session_endpoint",!0)},t.prototype.getRevocationEndpoint=function t(){return this._getMetadataProperty("revocation_endpoint",!0)},t.prototype.getKeysEndpoint=function t(){return this._getMetadataProperty("jwks_uri",!0)},t.prototype._getMetadataProperty=function t(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i.Log.debug("MetadataService.getMetadataProperty for: "+e),this.getMetadata().then((function(t){if(i.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),void 0===t[e]){if(!0===r)return void i.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+e);throw i.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+e),new Error("Metadata does not contain property "+e)}return t[e]}))},t.prototype.getSigningKeys=function t(){var e=this;return this._settings.signingKeys?(i.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then((function(t){return i.Log.debug("MetadataService.getSigningKeys: jwks_uri received",t),e._jsonService.getJson(t).then((function(t){if(i.Log.debug("MetadataService.getSigningKeys: key set received",t),!t.keys)throw i.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return e._settings.signingKeys=t.keys,e._settings.signingKeys}))}))},n(t,[{key:"metadataUrl",get:function t(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(a)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=a))),this._metadataUrl}}]),t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UrlUtility=void 0;var n=r(0),i=r(1);e.UrlUtility=function(){function t(){!function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.addQueryParam=function t(e,r,n){return e.indexOf("?")<0&&(e+="?"),"?"!==e[e.length-1]&&(e+="&"),e+=encodeURIComponent(r),e+="=",e+=encodeURIComponent(n)},t.parseUrlFragment=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.Global;"string"!=typeof e&&(e=o.location.href);var s=e.lastIndexOf(r);s>=0&&(e=e.substr(s+1)),"?"===r&&(s=e.indexOf("#"))>=0&&(e=e.substr(0,s));for(var a,u={},c=/([^&=]+)=([^&]*)/g,h=0;a=c.exec(e);)if(u[decodeURIComponent(a[1])]=decodeURIComponent(a[2].replace(/\+/g," ")),h++>50)return n.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",e),{error:"Response exceeded expected number of parameters"};for(var l in u)return u;return{}},t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JoseUtil=void 0;var n=r(26),i=function o(t){return t&&t.__esModule?t:{default:t}}(r(33));e.JoseUtil=(0,i.default)({jws:n.jws,KeyUtil:n.KeyUtil,X509:n.X509,crypto:n.crypto,hextob64u:n.hextob64u,b64tohex:n.b64tohex,AllowedSigningAlgs:n.AllowedSigningAlgs})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OidcClientSettings=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(0),s=r(23),a=r(6),u=r(24),c=r(2);function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=".well-known/openid-configuration",f="id_token",g="openid",d="client_secret_post";e.OidcClientSettings=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.authority,i=e.metadataUrl,o=e.metadata,l=e.signingKeys,p=e.metadataSeed,v=e.client_id,y=e.client_secret,m=e.response_type,_=void 0===m?f:m,S=e.scope,b=void 0===S?g:S,w=e.redirect_uri,F=e.post_logout_redirect_uri,E=e.client_authentication,x=void 0===E?d:E,A=e.prompt,k=e.display,P=e.max_age,C=e.ui_locales,T=e.acr_values,R=e.resource,I=e.response_mode,D=e.filterProtocolClaims,L=void 0===D||D,N=e.loadUserInfo,U=void 0===N||N,B=e.staleStateAge,O=void 0===B?900:B,j=e.clockSkew,M=void 0===j?300:j,H=e.clockService,V=void 0===H?new s.ClockService:H,K=e.userInfoJwtIssuer,q=void 0===K?"OP":K,J=e.mergeClaims,W=void 0!==J&&J,z=e.stateStore,Y=void 0===z?new a.WebStorageStateStore:z,G=e.ResponseValidatorCtor,X=void 0===G?u.ResponseValidator:G,$=e.MetadataServiceCtor,Q=void 0===$?c.MetadataService:$,Z=e.extraQueryParams,tt=void 0===Z?{}:Z,et=e.extraTokenParams,rt=void 0===et?{}:et;h(this,t),this._authority=r,this._metadataUrl=i,this._metadata=o,this._metadataSeed=p,this._signingKeys=l,this._client_id=v,this._client_secret=y,this._response_type=_,this._scope=b,this._redirect_uri=w,this._post_logout_redirect_uri=F,this._client_authentication=x,this._prompt=A,this._display=k,this._max_age=P,this._ui_locales=C,this._acr_values=T,this._resource=R,this._response_mode=I,this._filterProtocolClaims=!!L,this._loadUserInfo=!!U,this._staleStateAge=O,this._clockSkew=M,this._clockService=V,this._userInfoJwtIssuer=q,this._mergeClaims=!!W,this._stateStore=Y,this._validator=new X(this),this._metadataService=new Q(this),this._extraQueryParams="object"===(void 0===tt?"undefined":n(tt))?tt:{},this._extraTokenParams="object"===(void 0===rt?"undefined":n(rt))?rt:{}}return t.prototype.getEpochTime=function t(){return this._clockService.getEpochTime()},i(t,[{key:"client_id",get:function t(){return this._client_id},set:function t(e){if(this._client_id)throw o.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=e}},{key:"client_secret",get:function t(){return this._client_secret}},{key:"response_type",get:function t(){return this._response_type}},{key:"scope",get:function t(){return this._scope}},{key:"redirect_uri",get:function t(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function t(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function t(){return this._client_authentication}},{key:"prompt",get:function t(){return this._prompt}},{key:"display",get:function t(){return this._display}},{key:"max_age",get:function t(){return this._max_age}},{key:"ui_locales",get:function t(){return this._ui_locales}},{key:"acr_values",get:function t(){return this._acr_values}},{key:"resource",get:function t(){return this._resource}},{key:"response_mode",get:function t(){return this._response_mode}},{key:"authority",get:function t(){return this._authority},set:function t(e){if(this._authority)throw o.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=e}},{key:"metadataUrl",get:function t(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(l)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=l)),this._metadataUrl}},{key:"metadata",get:function t(){return this._metadata},set:function t(e){this._metadata=e}},{key:"metadataSeed",get:function t(){return this._metadataSeed},set:function t(e){this._metadataSeed=e}},{key:"signingKeys",get:function t(){return this._signingKeys},set:function t(e){this._signingKeys=e}},{key:"filterProtocolClaims",get:function t(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function t(){return this._loadUserInfo}},{key:"staleStateAge",get:function t(){return this._staleStateAge}},{key:"clockSkew",get:function t(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function t(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function t(){return this._mergeClaims}},{key:"stateStore",get:function t(){return this._stateStore}},{key:"validator",get:function t(){return this._validator}},{key:"metadataService",get:function t(){return this._metadataService}},{key:"extraQueryParams",get:function t(){return this._extraQueryParams},set:function t(e){"object"===(void 0===e?"undefined":n(e))?this._extraQueryParams=e:this._extraQueryParams={}}},{key:"extraTokenParams",get:function t(){return this._extraTokenParams},set:function t(e){"object"===(void 0===e?"undefined":n(e))?this._extraTokenParams=e:this._extraTokenParams={}}}]),t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebStorageStateStore=void 0;var n=r(0),i=r(1);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.WebStorageStateStore=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.prefix,n=void 0===r?"oidc.":r,s=e.store,a=void 0===s?i.Global.localStorage:s;o(this,t),this._store=a,this._prefix=n}return t.prototype.set=function t(e,r){return n.Log.debug("WebStorageStateStore.set",e),e=this._prefix+e,this._store.setItem(e,r),Promise.resolve()},t.prototype.get=function t(e){n.Log.debug("WebStorageStateStore.get",e),e=this._prefix+e;var r=this._store.getItem(e);return Promise.resolve(r)},t.prototype.remove=function t(e){n.Log.debug("WebStorageStateStore.remove",e),e=this._prefix+e;var r=this._store.getItem(e);return this._store.removeItem(e),Promise.resolve(r)},t.prototype.getAllKeys=function t(){n.Log.debug("WebStorageStateStore.getAllKeys");for(var e=[],r=0;r<this._store.length;r++){var i=this._store.key(r);0===i.indexOf(this._prefix)&&e.push(i.substr(this._prefix.length))}return Promise.resolve(e)},t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JsonService=void 0;var n=r(0),i=r(1);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.JsonService=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Global.XMLHttpRequest,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;o(this,t),e&&Array.isArray(e)?this._contentTypes=e.slice():this._contentTypes=[],this._contentTypes.push("application/json"),n&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=r,this._jwtHandler=n}return t.prototype.getJson=function t(e,r){var i=this;if(!e)throw n.Log.error("JsonService.getJson: No url passed"),new Error("url");return n.Log.debug("JsonService.getJson, url: ",e),new Promise((function(t,o){var s=new i._XMLHttpRequest;s.open("GET",e);var a=i._contentTypes,u=i._jwtHandler;s.onload=function(){if(n.Log.debug("JsonService.getJson: HTTP response received, status",s.status),200===s.status){var r=s.getResponseHeader("Content-Type");if(r){var i=a.find((function(t){if(r.startsWith(t))return!0}));if("application/jwt"==i)return void u(s).then(t,o);if(i)try{return void t(JSON.parse(s.responseText))}catch(t){return n.Log.error("JsonService.getJson: Error parsing JSON response",t.message),void o(t)}}o(Error("Invalid response Content-Type: "+r+", from URL: "+e))}else o(Error(s.statusText+" ("+s.status+")"))},s.onerror=function(){n.Log.error("JsonService.getJson: network error"),o(Error("Network Error"))},r&&(n.Log.debug("JsonService.getJson: token passed, setting Authorization header"),s.setRequestHeader("Authorization","Bearer "+r)),s.send()}))},t.prototype.postForm=function t(e,r,i){var o=this;if(!e)throw n.Log.error("JsonService.postForm: No url passed"),new Error("url");return n.Log.debug("JsonService.postForm, url: ",e),new Promise((function(t,s){var a=new o._XMLHttpRequest;a.open("POST",e);var u=o._contentTypes;a.onload=function(){if(n.Log.debug("JsonService.postForm: HTTP response received, status",a.status),200!==a.status){if(400===a.status)if(i=a.getResponseHeader("Content-Type"))if(u.find((function(t){if(i.startsWith(t))return!0})))try{var r=JSON.parse(a.responseText);if(r&&r.error)return n.Log.error("JsonService.postForm: Error from server: ",r.error),void s(new Error(r.error))}catch(t){return n.Log.error("JsonService.postForm: Error parsing JSON response",t.message),void s(t)}s(Error(a.statusText+" ("+a.status+")"))}else{var i;if((i=a.getResponseHeader("Content-Type"))&&u.find((function(t){if(i.startsWith(t))return!0})))try{return void t(JSON.parse(a.responseText))}catch(t){return n.Log.error("JsonService.postForm: Error parsing JSON response",t.message),void s(t)}s(Error("Invalid response Content-Type: "+i+", from URL: "+e))}},a.onerror=function(){n.Log.error("JsonService.postForm: network error"),s(Error("Network Error"))};var c="";for(var h in r){var l=r[h];l&&(c.length>0&&(c+="&"),c+=encodeURIComponent(h),c+="=",c+=encodeURIComponent(l))}a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),void 0!==i&&a.setRequestHeader("Authorization","Basic "+btoa(i)),a.send(c)}))},t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SigninRequest=void 0;var n=r(0),i=r(3),o=r(13);e.SigninRequest=function(){function t(e){var r=e.url,s=e.client_id,a=e.redirect_uri,u=e.response_type,c=e.scope,h=e.authority,l=e.data,f=e.prompt,g=e.display,d=e.max_age,p=e.ui_locales,v=e.id_token_hint,y=e.login_hint,m=e.acr_values,_=e.resource,S=e.response_mode,b=e.request,w=e.request_uri,F=e.extraQueryParams,E=e.request_type,x=e.client_secret,A=e.extraTokenParams,k=e.skipUserInfo;if(function P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!r)throw n.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!s)throw n.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!a)throw n.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!u)throw n.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!c)throw n.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!h)throw n.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var C=t.isOidc(u),T=t.isCode(u);S||(S=t.isCode(u)?"query":null),this.state=new o.SigninState({nonce:C,data:l,client_id:s,authority:h,redirect_uri:a,code_verifier:T,request_type:E,response_mode:S,client_secret:x,scope:c,extraTokenParams:A,skipUserInfo:k}),r=i.UrlUtility.addQueryParam(r,"client_id",s),r=i.UrlUtility.addQueryParam(r,"redirect_uri",a),r=i.UrlUtility.addQueryParam(r,"response_type",u),r=i.UrlUtility.addQueryParam(r,"scope",c),r=i.UrlUtility.addQueryParam(r,"state",this.state.id),C&&(r=i.UrlUtility.addQueryParam(r,"nonce",this.state.nonce)),T&&(r=i.UrlUtility.addQueryParam(r,"code_challenge",this.state.code_challenge),r=i.UrlUtility.addQueryParam(r,"code_challenge_method","S256"));var R={prompt:f,display:g,max_age:d,ui_locales:p,id_token_hint:v,login_hint:y,acr_values:m,resource:_,request:b,request_uri:w,response_mode:S};for(var I in R)R[I]&&(r=i.UrlUtility.addQueryParam(r,I,R[I]));for(var D in F)r=i.UrlUtility.addQueryParam(r,D,F[D]);this.url=r}return t.isOidc=function t(e){return!!e.split(/\s+/g).filter((function(t){return"id_token"===t}))[0]},t.isOAuth=function t(e){return!!e.split(/\s+/g).filter((function(t){return"token"===t}))[0]},t.isCode=function t(e){return!!e.split(/\s+/g).filter((function(t){return"code"===t}))[0]},t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.State=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0),o=function s(t){return t&&t.__esModule?t:{default:t}}(r(14));function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.State=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.id,n=e.data,i=e.created,s=e.request_type;a(this,t),this._id=r||(0,o.default)(),this._data=n,this._created="number"==typeof i&&i>0?i:parseInt(Date.now()/1e3),this._request_type=s}return t.prototype.toStorageString=function t(){return i.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},t.fromStorageString=function e(r){return i.Log.debug("State.fromStorageString"),new t(JSON.parse(r))},t.clearStaleState=function e(r,n){var o=Date.now()/1e3-n;return r.getAllKeys().then((function(e){i.Log.debug("State.clearStaleState: got keys",e);for(var n=[],s=function s(a){var c=e[a];u=r.get(c).then((function(e){var n=!1;if(e)try{var s=t.fromStorageString(e);i.Log.debug("State.clearStaleState: got item from key: ",c,s.created),s.created<=o&&(n=!0)}catch(t){i.Log.error("State.clearStaleState: Error parsing state for key",c,t.message),n=!0}else i.Log.debug("State.clearStaleState: no item in storage for key: ",c),n=!0;if(n)return i.Log.debug("State.clearStaleState: removed item for key: ",c),r.remove(c)})),n.push(u)},a=0;a<e.length;a++){var u;s(a)}return i.Log.debug("State.clearStaleState: waiting on promise count:",n.length),Promise.all(n)}))},n(t,[{key:"id",get:function t(){return this._id}},{key:"data",get:function t(){return this._data}},{key:"created",get:function t(){return this._created}},{key:"request_type",get:function t(){return this._request_type}}]),t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OidcClient=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0),o=r(5),s=r(12),a=r(8),u=r(34),c=r(35),h=r(36),l=r(13),f=r(9);function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.OidcClient=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g(this,t),e instanceof o.OidcClientSettings?this._settings=e:this._settings=new o.OidcClientSettings(e)}return t.prototype.createSigninRequest=function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.response_type,o=r.scope,s=r.redirect_uri,u=r.data,c=r.state,h=r.prompt,l=r.display,f=r.max_age,g=r.ui_locales,d=r.id_token_hint,p=r.login_hint,v=r.acr_values,y=r.resource,m=r.request,_=r.request_uri,S=r.response_mode,b=r.extraQueryParams,w=r.extraTokenParams,F=r.request_type,E=r.skipUserInfo,x=arguments[1];i.Log.debug("OidcClient.createSigninRequest");var A=this._settings.client_id;n=n||this._settings.response_type,o=o||this._settings.scope,s=s||this._settings.redirect_uri,h=h||this._settings.prompt,l=l||this._settings.display,f=f||this._settings.max_age,g=g||this._settings.ui_locales,v=v||this._settings.acr_values,y=y||this._settings.resource,S=S||this._settings.response_mode,b=b||this._settings.extraQueryParams,w=w||this._settings.extraTokenParams;var k=this._settings.authority;return a.SigninRequest.isCode(n)&&"code"!==n?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then((function(t){i.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",t);var r=new a.SigninRequest({url:t,client_id:A,redirect_uri:s,response_type:n,scope:o,data:u||c,authority:k,prompt:h,display:l,max_age:f,ui_locales:g,id_token_hint:d,login_hint:p,acr_values:v,resource:y,request:m,request_uri:_,extraQueryParams:b,extraTokenParams:w,request_type:F,response_mode:S,client_secret:e._settings.client_secret,skipUserInfo:E}),P=r.state;return(x=x||e._stateStore).set(P.id,P.toStorageString()).then((function(){return r}))}))},t.prototype.readSigninResponseState=function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i.Log.debug("OidcClient.readSigninResponseState");var o="query"===this._settings.response_mode||!this._settings.response_mode&&a.SigninRequest.isCode(this._settings.response_type),s=o?"?":"#",c=new u.SigninResponse(e,s);if(!c.state)return i.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response"));r=r||this._stateStore;var h=n?r.remove.bind(r):r.get.bind(r);return h(c.state).then((function(t){if(!t)throw i.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:l.SigninState.fromStorageString(t),response:c}}))},t.prototype.processSigninResponse=function t(e,r){var n=this;return i.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(e,r,!0).then((function(t){var e=t.state,r=t.response;return i.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),n._validator.validateSigninResponse(e,r)}))},t.prototype.createSignoutRequest=function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.id_token_hint,o=r.data,s=r.state,a=r.post_logout_redirect_uri,u=r.extraQueryParams,h=r.request_type,l=arguments[1];return i.Log.debug("OidcClient.createSignoutRequest"),a=a||this._settings.post_logout_redirect_uri,u=u||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then((function(t){if(!t)throw i.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");i.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",t);var r=new c.SignoutRequest({url:t,id_token_hint:n,post_logout_redirect_uri:a,data:o||s,extraQueryParams:u,request_type:h}),f=r.state;return f&&(i.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(l=l||e._stateStore).set(f.id,f.toStorageString())),r}))},t.prototype.readSignoutResponseState=function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i.Log.debug("OidcClient.readSignoutResponseState");var o=new h.SignoutResponse(e);if(!o.state)return i.Log.debug("OidcClient.readSignoutResponseState: No state in response"),o.error?(i.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",o.error),Promise.reject(new s.ErrorResponse(o))):Promise.resolve({state:void 0,response:o});var a=o.state;r=r||this._stateStore;var u=n?r.remove.bind(r):r.get.bind(r);return u(a).then((function(t){if(!t)throw i.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:f.State.fromStorageString(t),response:o}}))},t.prototype.processSignoutResponse=function t(e,r){var n=this;return i.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(e,r,!0).then((function(t){var e=t.state,r=t.response;return e?(i.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),n._validator.validateSignoutResponse(e,r)):(i.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),r)}))},t.prototype.clearStaleState=function t(e){return i.Log.debug("OidcClient.clearStaleState"),e=e||this._stateStore,f.State.clearStaleState(e,this.settings.staleStateAge)},n(t,[{key:"_stateStore",get:function t(){return this.settings.stateStore}},{key:"_validator",get:function t(){return this.settings.validator}},{key:"_metadataService",get:function t(){return this.settings.metadataService}},{key:"settings",get:function t(){return this._settings}},{key:"metadataService",get:function t(){return this._metadataService}}]),t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TokenClient=void 0;var n=r(7),i=r(2),o=r(0);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.TokenClient=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.JsonService,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MetadataService;if(s(this,t),!e)throw o.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=e,this._jsonService=new r,this._metadataService=new a(this._settings)}return t.prototype.exchangeCode=function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(r=Object.assign({},r)).grant_type=r.grant_type||"authorization_code",r.client_id=r.client_id||this._settings.client_id,r.client_secret=r.client_secret||this._settings.client_secret,r.redirect_uri=r.redirect_uri||this._settings.redirect_uri;var n=void 0,i=r._client_authentication||this._settings._client_authentication;return delete r._client_authentication,r.code?r.redirect_uri?r.code_verifier?r.client_id?r.client_secret||"client_secret_basic"!=i?("client_secret_basic"==i&&(n=r.client_id+":"+r.client_secret,delete r.client_id,delete r.client_secret),this._metadataService.getTokenEndpoint(!1).then((function(t){return o.Log.debug("TokenClient.exchangeCode: Received token endpoint"),e._jsonService.postForm(t,r,n).then((function(t){return o.Log.debug("TokenClient.exchangeCode: response received"),t}))}))):(o.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(new Error("A client_secret is required"))):(o.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(o.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(o.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(o.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},t.prototype.exchangeRefreshToken=function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(r=Object.assign({},r)).grant_type=r.grant_type||"refresh_token",r.client_id=r.client_id||this._settings.client_id,r.client_secret=r.client_secret||this._settings.client_secret;var n=void 0,i=r._client_authentication||this._settings._client_authentication;return delete r._client_authentication,r.refresh_token?r.client_id?("client_secret_basic"==i&&(n=r.client_id+":"+r.client_secret,delete r.client_id,delete r.client_secret),this._metadataService.getTokenEndpoint(!1).then((function(t){return o.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),e._jsonService.postForm(t,r,n).then((function(t){return o.Log.debug("TokenClient.exchangeRefreshToken: response received"),t}))}))):(o.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(o.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorResponse=void 0;var n=r(0);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}e.ErrorResponse=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=r.error,a=r.error_description,u=r.error_uri,c=r.state,h=r.session_state;if(i(this,e),!s)throw n.Log.error("No error passed to ErrorResponse"),new Error("error");var l=o(this,t.call(this,a||s));return l.name="ErrorResponse",l.error=s,l.error_description=a,l.error_uri=u,l.state=c,l.session_state=h,l}return function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(Error)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SigninState=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0),o=r(9),s=r(4),a=function u(t){return t&&t.__esModule?t:{default:t}}(r(14));function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}e.SigninState=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.nonce,i=r.authority,o=r.client_id,u=r.redirect_uri,l=r.code_verifier,f=r.response_mode,g=r.client_secret,d=r.scope,p=r.extraTokenParams,v=r.skipUserInfo;c(this,e);var y=h(this,t.call(this,arguments[0]));if(!0===n?y._nonce=(0,a.default)():n&&(y._nonce=n),!0===l?y._code_verifier=(0,a.default)()+(0,a.default)()+(0,a.default)():l&&(y._code_verifier=l),y.code_verifier){var m=s.JoseUtil.hashString(y.code_verifier,"SHA256");y._code_challenge=s.JoseUtil.hexToBase64Url(m)}return y._redirect_uri=u,y._authority=i,y._client_id=o,y._response_mode=f,y._client_secret=g,y._scope=d,y._extraTokenParams=p,y._skipUserInfo=v,y}return function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.toStorageString=function t(){return i.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},e.fromStorageString=function t(r){return i.Log.debug("SigninState.fromStorageString"),new e(JSON.parse(r))},n(e,[{key:"nonce",get:function t(){return this._nonce}},{key:"authority",get:function t(){return this._authority}},{key:"client_id",get:function t(){return this._client_id}},{key:"redirect_uri",get:function t(){return this._redirect_uri}},{key:"code_verifier",get:function t(){return this._code_verifier}},{key:"code_challenge",get:function t(){return this._code_challenge}},{key:"response_mode",get:function t(){return this._response_mode}},{key:"client_secret",get:function t(){return this._client_secret}},{key:"scope",get:function t(){return this._scope}},{key:"extraTokenParams",get:function t(){return this._extraTokenParams}},{key:"skipUserInfo",get:function t(){return this._skipUserInfo}}]),e}(o.State)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function n(){return("undefined"!=i&&null!==i&&void 0!==i.getRandomValues?o:s)().replace(/-/g,"")};var i="undefined"!=typeof window?window.crypto||window.msCrypto:null;function o(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^i.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))}function s(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^16*Math.random()>>t/4).toString(16)}))}t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.User=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0);e.User=function(){function t(e){var r=e.id_token,n=e.session_state,i=e.access_token,o=e.refresh_token,s=e.token_type,a=e.scope,u=e.profile,c=e.expires_at,h=e.state;!function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id_token=r,this.session_state=n,this.access_token=i,this.refresh_token=o,this.token_type=s,this.scope=a,this.profile=u,this.expires_at=c,this.state=h}return t.prototype.toStorageString=function t(){return i.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},t.fromStorageString=function e(r){return i.Log.debug("User.fromStorageString"),new t(JSON.parse(r))},n(t,[{key:"expires_in",get:function t(){if(this.expires_at){var e=parseInt(Date.now()/1e3);return this.expires_at-e}},set:function t(e){var r=parseInt(e);if("number"==typeof r&&r>0){var n=parseInt(Date.now()/1e3);this.expires_at=n+r}}},{key:"expired",get:function t(){var e=this.expires_in;if(void 0!==e)return e<=0}},{key:"scopes",get:function t(){return(this.scope||"").split(" ")}}]),t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AccessTokenEvents=void 0;var n=r(0),i=r(46);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.AccessTokenEvents=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.accessTokenExpiringNotificationTime,n=void 0===r?60:r,s=e.accessTokenExpiringTimer,a=void 0===s?new i.Timer("Access token expiring"):s,u=e.accessTokenExpiredTimer,c=void 0===u?new i.Timer("Access token expired"):u;o(this,t),this._accessTokenExpiringNotificationTime=n,this._accessTokenExpiring=a,this._accessTokenExpired=c}return t.prototype.load=function t(e){if(e.access_token&&void 0!==e.expires_in){var r=e.expires_in;if(n.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",r),r>0){var i=r-this._accessTokenExpiringNotificationTime;i<=0&&(i=1),n.Log.debug("AccessTokenEvents.load: registering expiring timer in:",i),this._accessTokenExpiring.init(i)}else n.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var o=r+1;n.Log.debug("AccessTokenEvents.load: registering expired timer in:",o),this._accessTokenExpired.init(o)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},t.prototype.unload=function t(){n.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},t.prototype.addAccessTokenExpiring=function t(e){this._accessTokenExpiring.addHandler(e)},t.prototype.removeAccessTokenExpiring=function t(e){this._accessTokenExpiring.removeHandler(e)},t.prototype.addAccessTokenExpired=function t(e){this._accessTokenExpired.addHandler(e)},t.prototype.removeAccessTokenExpired=function t(e){this._accessTokenExpired.removeHandler(e)},t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Event=void 0;var n=r(0);e.Event=function(){function t(e){!function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e,this._callbacks=[]}return t.prototype.addHandler=function t(e){this._callbacks.push(e)},t.prototype.removeHandler=function t(e){var r=this._callbacks.findIndex((function(t){return t===e}));r>=0&&this._callbacks.splice(r,1)},t.prototype.raise=function t(){n.Log.debug("Event: Raising event: "+this._name);for(var e=0;e<this._callbacks.length;e++){var r;(r=this._callbacks)[e].apply(r,arguments)}},t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SessionMonitor=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0),o=r(19),s=r(1);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.SessionMonitor=function(){function t(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.CheckSessionIFrame,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.Global.timer;if(a(this,t),!e)throw i.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=e,this._CheckSessionIFrameCtor=n,this._timer=u,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then((function(t){t?r._start(t):r._settings.monitorAnonymousSession&&r._userManager.querySessionStatus().then((function(t){var e={session_state:t.session_state};t.sub&&t.sid&&(e.profile={sub:t.sub,sid:t.sid}),r._start(e)})).catch((function(t){i.Log.error("SessionMonitor ctor: error from querySessionStatus:",t.message)}))})).catch((function(t){i.Log.error("SessionMonitor ctor: error from getUser:",t.message)})))}return t.prototype._start=function t(e){var r=this,n=e.session_state;n&&(e.profile?(this._sub=e.profile.sub,this._sid=e.profile.sid,i.Log.debug("SessionMonitor._start: session_state:",n,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,i.Log.debug("SessionMonitor._start: session_state:",n,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(n):this._metadataService.getCheckSessionIframe().then((function(t){if(t){i.Log.debug("SessionMonitor._start: Initializing check session iframe");var e=r._client_id,o=r._checkSessionInterval,s=r._stopCheckSessionOnError;r._checkSessionIFrame=new r._CheckSessionIFrameCtor(r._callback.bind(r),e,t,o,s),r._checkSessionIFrame.load().then((function(){r._checkSessionIFrame.start(n)}))}else i.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")})).catch((function(t){i.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",t.message)})))},t.prototype._stop=function t(){var e=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(i.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var r=this._timer.setInterval((function(){e._timer.clearInterval(r),e._userManager.querySessionStatus().then((function(t){var r={session_state:t.session_state};t.sub&&t.sid&&(r.profile={sub:t.sub,sid:t.sid}),e._start(r)})).catch((function(t){i.Log.error("SessionMonitor: error from querySessionStatus:",t.message)}))}),1e3)},t.prototype._callback=function t(){var e=this;this._userManager.querySessionStatus().then((function(t){var r=!0;t?t.sub===e._sub?(r=!1,e._checkSessionIFrame.start(t.session_state),t.sid===e._sid?i.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",t.session_state):(i.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",t.session_state),e._userManager.events._raiseUserSessionChanged())):i.Log.debug("SessionMonitor._callback: Different subject signed into OP:",t.sub):i.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),r&&(e._sub?(i.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),e._userManager.events._raiseUserSignedOut()):(i.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),e._userManager.events._raiseUserSignedIn()))})).catch((function(t){e._sub&&(i.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",t.message),e._userManager.events._raiseUserSignedOut())}))},n(t,[{key:"_settings",get:function t(){return this._userManager.settings}},{key:"_metadataService",get:function t(){return this._userManager.metadataService}},{key:"_client_id",get:function t(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function t(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function t(){return this._settings.stopCheckSessionOnError}}]),t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CheckSessionIFrame=void 0;var n=r(0);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.CheckSessionIFrame=function(){function t(e,r,n,o){var s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];i(this,t),this._callback=e,this._client_id=r,this._url=n,this._interval=o||2e3,this._stopOnError=s;var a=n.indexOf("/",n.indexOf("//")+2);this._frame_origin=n.substr(0,a),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=n}return t.prototype.load=function t(){var e=this;return new Promise((function(t){e._frame.onload=function(){t()},window.document.body.appendChild(e._frame),e._boundMessageEvent=e._message.bind(e),window.addEventListener("message",e._boundMessageEvent,!1)}))},t.prototype._message=function t(e){e.origin===this._frame_origin&&e.source===this._frame.contentWindow&&("error"===e.data?(n.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===e.data?(n.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):n.Log.debug("CheckSessionIFrame: "+e.data+" message from check session op iframe"))},t.prototype.start=function t(e){var r=this;if(this._session_state!==e){n.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=e;var i=function t(){r._frame.contentWindow.postMessage(r._client_id+" "+r._session_state,r._frame_origin)};i(),this._timer=window.setInterval(i,this._interval)}},t.prototype.stop=function t(){this._session_state=null,this._timer&&(n.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TokenRevocationClient=void 0;var n=r(0),i=r(2),o=r(1);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a="access_token",u="refresh_token";e.TokenRevocationClient=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Global.XMLHttpRequest,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MetadataService;if(s(this,t),!e)throw n.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=e,this._XMLHttpRequestCtor=r,this._metadataService=new a(this._settings)}return t.prototype.revoke=function t(e,r){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"access_token";if(!e)throw n.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if(o!==a&&o!=u)throw n.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then((function(t){if(t){n.Log.debug("TokenRevocationClient.revoke: Revoking "+o);var s=i._settings.client_id,a=i._settings.client_secret;return i._revoke(t,s,a,e,o)}if(r)throw n.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")}))},t.prototype._revoke=function t(e,r,i,o,s){var a=this;return new Promise((function(t,u){var c=new a._XMLHttpRequestCtor;c.open("POST",e),c.onload=function(){n.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",c.status),200===c.status?t():u(Error(c.statusText+" ("+c.status+")"))},c.onerror=function(){n.Log.debug("TokenRevocationClient.revoke: Network Error."),u("Network Error")};var h="client_id="+encodeURIComponent(r);i&&(h+="&client_secret="+encodeURIComponent(i)),h+="&token_type_hint="+encodeURIComponent(s),h+="&token="+encodeURIComponent(o),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(h)}))},t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CordovaPopupWindow=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0);e.CordovaPopupWindow=function(){function t(e){var r=this;!function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e})),this.features=e.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=e.popupWindowTarget||"_blank",this.redirect_uri=e.startUrl,i.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return t.prototype._isInAppBrowserInstalled=function t(e){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some((function(t){return e.hasOwnProperty(t)}))},t.prototype.navigate=function t(e){if(e&&e.url){if(!window.cordova)return this._error("cordova is undefined");var r=window.cordova.require("cordova/plugin_list").metadata;if(!1===this._isInAppBrowserInstalled(r))return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(e.url,this.target,this.features),this._popup?(i.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},t.prototype._loadStartCallback=function t(e){0===e.url.indexOf(this.redirect_uri)&&this._success({url:e.url})},t.prototype._exitCallback=function t(e){this._error(e)},t.prototype._success=function t(e){this._cleanup(),i.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(e)},t.prototype._error=function t(e){this._cleanup(),i.Log.error(e),this._reject(new Error(e))},t.prototype.close=function t(){this._cleanup()},t.prototype._cleanup=function t(){this._popup&&(i.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},n(t,[{key:"promise",get:function t(){return this._promise}}]),t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(10),o=r(5),s=r(6),a=r(37),u=r(38),c=r(16),h=r(2),l=r(48),f=r(49),g=r(19),d=r(20),p=r(18),v=r(1),y=r(15),m=r(50);e.default={Version:m.Version,Log:n.Log,OidcClient:i.OidcClient,OidcClientSettings:o.OidcClientSettings,WebStorageStateStore:s.WebStorageStateStore,InMemoryWebStorage:a.InMemoryWebStorage,UserManager:u.UserManager,AccessTokenEvents:c.AccessTokenEvents,MetadataService:h.MetadataService,CordovaPopupNavigator:l.CordovaPopupNavigator,CordovaIFrameNavigator:f.CordovaIFrameNavigator,CheckSessionIFrame:g.CheckSessionIFrame,TokenRevocationClient:d.TokenRevocationClient,SessionMonitor:p.SessionMonitor,Global:v.Global,User:y.User},t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ClockService=function(){function t(){!function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.getEpochTime=function t(){return Promise.resolve(Date.now()/1e3|0)},t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResponseValidator=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=r(0),o=r(2),s=r(25),a=r(11),u=r(12),c=r(4);function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];e.ResponseValidator=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.MetadataService,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.UserInfoService,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c.JoseUtil,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.TokenClient;if(h(this,t),!e)throw i.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=e,this._metadataService=new r(this._settings),this._userInfoService=new n(this._settings),this._joseUtil=u,this._tokenClient=new l(this._settings)}return t.prototype.validateSigninResponse=function t(e,r){var n=this;return i.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(e,r).then((function(t){return i.Log.debug("ResponseValidator.validateSigninResponse: state processed"),n._validateTokens(e,t).then((function(t){return i.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),n._processClaims(e,t).then((function(t){return i.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),t}))}))}))},t.prototype.validateSignoutResponse=function t(e,r){return e.id!==r.state?(i.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(i.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),r.state=e.data,r.error?(i.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",r.error),Promise.reject(new u.ErrorResponse(r))):Promise.resolve(r))},t.prototype._processSigninParams=function t(e,r){if(e.id!==r.state)return i.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!e.client_id)return i.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!e.authority)return i.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==e.authority)return i.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=e.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==e.client_id)return i.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=e.client_id;return i.Log.debug("ResponseValidator._processSigninParams: state validated"),r.state=e.data,r.error?(i.Log.warn("ResponseValidator._processSigninParams: Response was error",r.error),Promise.reject(new u.ErrorResponse(r))):e.nonce&&!r.id_token?(i.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!e.nonce&&r.id_token?(i.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):e.code_verifier&&!r.code?(i.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!e.code_verifier&&r.code?(i.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(r.scope||(r.scope=e.scope),Promise.resolve(r))},t.prototype._processClaims=function t(e,r){var n=this;if(r.isOpenIdConnect){if(i.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),r.profile=this._filterProtocolClaims(r.profile),!0!==e.skipUserInfo&&this._settings.loadUserInfo&&r.access_token)return i.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(r.access_token).then((function(t){return i.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),t.sub!==r.profile.sub?(i.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(r.profile=n._mergeClaims(r.profile,t),i.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",r.profile),r)}));i.Log.debug("ResponseValidator._processClaims: not loading user info")}else i.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(r)},t.prototype._mergeClaims=function t(e,r){var i=Object.assign({},e);for(var o in r){var s=r[o];Array.isArray(s)||(s=[s]);for(var a=0;a<s.length;a++){var u=s[a];i[o]?Array.isArray(i[o])?i[o].indexOf(u)<0&&i[o].push(u):i[o]!==u&&("object"===(void 0===u?"undefined":n(u))&&this._settings.mergeClaims?i[o]=this._mergeClaims(i[o],u):i[o]=[i[o],u]):i[o]=u}}return i},t.prototype._filterProtocolClaims=function t(e){i.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",e);var r=Object.assign({},e);return this._settings._filterProtocolClaims?(l.forEach((function(t){delete r[t]})),i.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",r)):i.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),r},t.prototype._validateTokens=function t(e,r){return r.code?(i.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(e,r)):r.id_token?r.access_token?(i.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(e,r)):(i.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(e,r)):(i.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(r))},t.prototype._processCode=function t(e,r){var o=this,s={client_id:e.client_id,client_secret:e.client_secret,code:r.code,redirect_uri:e.redirect_uri,code_verifier:e.code_verifier};return e.extraTokenParams&&"object"===n(e.extraTokenParams)&&Object.assign(s,e.extraTokenParams),this._tokenClient.exchangeCode(s).then((function(t){for(var n in t)r[n]=t[n];return r.id_token?(i.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),o._validateIdTokenAttributes(e,r)):(i.Log.debug("ResponseValidator._processCode: token response successful, returning response"),r)}))},t.prototype._validateIdTokenAttributes=function t(e,r){var n=this;return this._metadataService.getIssuer().then((function(t){var o=e.client_id,s=n._settings.clockSkew;return i.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",s),n._settings.getEpochTime().then((function(a){return n._joseUtil.validateJwtAttributes(r.id_token,t,o,s,a).then((function(t){return e.nonce&&e.nonce!==t.nonce?(i.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):t.sub?(r.profile=t,r):(i.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))}))}))}))},t.prototype._validateIdTokenAndAccessToken=function t(e,r){var n=this;return this._validateIdToken(e,r).then((function(t){return n._validateAccessToken(t)}))},t.prototype._getSigningKeyForJwt=function t(e){var r=this;return this._metadataService.getSigningKeys().then((function(t){var n=e.header.kid;if(!t)return i.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));i.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var o=void 0;if(n)o=t.filter((function(t){return t.kid===n}))[0];else{if((t=r._filterByAlg(t,e.header.alg)).length>1)return i.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));o=t[0]}return Promise.resolve(o)}))},t.prototype._getSigningKeyForJwtWithSingleRetry=function t(e){var r=this;return this._getSigningKeyForJwt(e).then((function(t){return t?Promise.resolve(t):(r._metadataService.resetSigningKeys(),r._getSigningKeyForJwt(e))}))},t.prototype._validateIdToken=function t(e,r){var n=this;if(!e.nonce)return i.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var o=this._joseUtil.parseJwt(r.id_token);return o&&o.header&&o.payload?e.nonce!==o.payload.nonce?(i.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then((function(t){return i.Log.debug("ResponseValidator._validateIdToken: Received issuer"),n._getSigningKeyForJwtWithSingleRetry(o).then((function(s){if(!s)return i.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var a=e.client_id,u=n._settings.clockSkew;return i.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",u),n._joseUtil.validateJwt(r.id_token,s,t,a,u).then((function(){return i.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),o.payload.sub?(r.profile=o.payload,r):(i.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))}))}))})):(i.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",o),Promise.reject(new Error("Failed to parse id_token")))},t.prototype._filterByAlg=function t(e,r){var n=null;if(r.startsWith("RS"))n="RSA";else if(r.startsWith("PS"))n="PS";else{if(!r.startsWith("ES"))return i.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",r),[];n="EC"}return i.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",n),e=e.filter((function(t){return t.kty===n})),i.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",n,e.length),e},t.prototype._validateAccessToken=function t(e){if(!e.profile)return i.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!e.profile.at_hash)return i.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!e.id_token)return i.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var r=this._joseUtil.parseJwt(e.id_token);if(!r||!r.header)return i.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",r),Promise.reject(new Error("Failed to parse id_token"));var n=r.header.alg;if(!n||5!==n.length)return i.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",n),Promise.reject(new Error("Unsupported alg: "+n));var o=n.substr(2,3);if(!o)return i.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",n,o),Promise.reject(new Error("Unsupported alg: "+n));if(256!==(o=parseInt(o))&&384!==o&&512!==o)return i.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",n,o),Promise.reject(new Error("Unsupported alg: "+n));var s="sha"+o,a=this._joseUtil.hashString(e.access_token,s);if(!a)return i.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",s),Promise.reject(new Error("Failed to validate at_hash"));var u=a.substr(0,a.length/2),c=this._joseUtil.hexToBase64Url(u);return c!==e.profile.at_hash?(i.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",c,e.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(i.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(e))},t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserInfoService=void 0;var n=r(7),i=r(2),o=r(0),s=r(4);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.UserInfoService=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.JsonService,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MetadataService,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.JoseUtil;if(a(this,t),!e)throw o.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=e,this._jsonService=new r(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new u(this._settings),this._joseUtil=c}return t.prototype.getClaims=function t(e){var r=this;return e?this._metadataService.getUserInfoEndpoint().then((function(t){return o.Log.debug("UserInfoService.getClaims: received userinfo url",t),r._jsonService.getJson(t,e).then((function(t){return o.Log.debug("UserInfoService.getClaims: claims received",t),t}))})):(o.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},t.prototype._getClaimsFromJwt=function t(e){var r=this;try{var n=this._joseUtil.parseJwt(e.responseText);if(!n||!n.header||!n.payload)return o.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",n),Promise.reject(new Error("Failed to parse id_token"));var i=n.header.kid,s=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":s=this._metadataService.getIssuer();break;case"ANY":s=Promise.resolve(n.payload.iss);break;default:s=Promise.resolve(this._settings.userInfoJwtIssuer)}return s.then((function(t){return o.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+t),r._metadataService.getSigningKeys().then((function(s){if(!s)return o.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));o.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var a=void 0;if(i)a=s.filter((function(t){return t.kid===i}))[0];else{if((s=r._filterByAlg(s,n.header.alg)).length>1)return o.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));a=s[0]}if(!a)return o.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var u=r._settings.client_id,c=r._settings.clockSkew;return o.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",c),r._joseUtil.validateJwt(e.responseText,a,t,u,c,void 0,!0).then((function(){return o.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),n.payload}))}))}))}catch(t){return o.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",t.message),void reject(t)}},t.prototype._filterByAlg=function t(e,r){var n=null;if(r.startsWith("RS"))n="RSA";else if(r.startsWith("PS"))n="PS";else{if(!r.startsWith("ES"))return o.Log.debug("UserInfoService._filterByAlg: alg not supported: ",r),[];n="EC"}return o.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",n),e=e.filter((function(t){return t.kty===n})),o.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",n,e.length),e},t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AllowedSigningAlgs=e.b64tohex=e.hextob64u=e.crypto=e.X509=e.KeyUtil=e.jws=void 0;var n=r(27);e.jws=n.jws,e.KeyUtil=n.KEYUTIL,e.X509=n.X509,e.crypto=n.crypto,e.hextob64u=n.hextob64u,e.b64tohex=n.b64tohex,e.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r,n,i,o,s,a,u,c,h,l,f,g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d={userAgent:!1},p={},v=v||(r=Math,i=(n={}).lib={},o=i.Base=function(){function t(){}return{extend:function e(r){t.prototype=this;var n=new t;return r&&n.mixIn(r),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function t(){var e=this.extend();return e.init.apply(e,arguments),e},init:function t(){},mixIn:function t(e){for(var r in e)e.hasOwnProperty(r)&&(this[r]=e[r]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function t(){return this.init.prototype.extend(this)}}}(),s=i.WordArray=o.extend({init:function t(e,r){e=this.words=e||[],this.sigBytes=null!=r?r:4*e.length},toString:function t(e){return(e||u).stringify(this)},concat:function t(e){var r=this.words,n=e.words,i=this.sigBytes,o=e.sigBytes;if(this.clamp(),i%4)for(var s=0;s<o;s++){var a=n[s>>>2]>>>24-s%4*8&255;r[i+s>>>2]|=a<<24-(i+s)%4*8}else for(s=0;s<o;s+=4)r[i+s>>>2]=n[s>>>2];return this.sigBytes+=o,this},clamp:function t(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=r.ceil(n/4)},clone:function t(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function t(e){for(var n=[],i=0;i<e;i+=4)n.push(4294967296*r.random()|0);return new s.init(n,e)}}),a=n.enc={},u=a.Hex={stringify:function t(e){for(var r=e.words,n=e.sigBytes,i=[],o=0;o<n;o++){var s=r[o>>>2]>>>24-o%4*8&255;i.push((s>>>4).toString(16)),i.push((15&s).toString(16))}return i.join("")},parse:function t(e){for(var r=e.length,n=[],i=0;i<r;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new s.init(n,r/2)}},c=a.Latin1={stringify:function t(e){for(var r=e.words,n=e.sigBytes,i=[],o=0;o<n;o++){var s=r[o>>>2]>>>24-o%4*8&255;i.push(String.fromCharCode(s))}return i.join("")},parse:function t(e){for(var r=e.length,n=[],i=0;i<r;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new s.init(n,r)}},h=a.Utf8={stringify:function t(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function t(e){return c.parse(unescape(encodeURIComponent(e)))}},l=i.BufferedBlockAlgorithm=o.extend({reset:function t(){this._data=new s.init,this._nDataBytes=0},_append:function t(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function t(e){var n=this._data,i=n.words,o=n.sigBytes,a=this.blockSize,u=o/(4*a),c=(u=e?r.ceil(u):r.max((0|u)-this._minBufferSize,0))*a,h=r.min(4*c,o);if(c){for(var l=0;l<c;l+=a)this._doProcessBlock(i,l);var f=i.splice(0,c);n.sigBytes-=h}return new s.init(f,h)},clone:function t(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),i.Hasher=l.extend({cfg:o.extend(),init:function t(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function t(){l.reset.call(this),this._doReset()},update:function t(e){return this._append(e),this._process(),this},finalize:function t(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function t(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function t(e){return function(t,r){return new f.HMAC.init(e,r).finalize(t)}}}),f=n.algo={},n);!function(t){var e,r=(e=v).lib,n=r.Base,i=r.WordArray;(e=e.x64={}).Word=n.extend({init:function t(e,r){this.high=e,this.low=r}}),e.WordArray=n.extend({init:function t(e,r){e=this.words=e||[],this.sigBytes=null!=r?r:8*e.length},toX32:function t(){for(var e=this.words,r=e.length,n=[],o=0;o<r;o++){var s=e[o];n.push(s.high),n.push(s.low)}return i.create(n,this.sigBytes)},clone:function t(){for(var e=n.clone.call(this),r=e.words=this.words.slice(0),i=r.length,o=0;o<i;o++)r[o]=r[o].clone();return e}})}(),function(){var t=v,e=t.lib.WordArray;t.enc.Base64={stringify:function t(e){var r=e.words,n=e.sigBytes,i=this._map;e.clamp(),e=[];for(var o=0;o<n;o+=3)for(var s=(r[o>>>2]>>>24-o%4*8&255)<<16|(r[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|r[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;4>a&&o+.75*a<n;a++)e.push(i.charAt(s>>>6*(3-a)&63));if(r=i.charAt(64))for(;e.length%4;)e.push(r);return e.join("")},parse:function t(r){var n=r.length,i=this._map;(o=i.charAt(64))&&(-1!=(o=r.indexOf(o))&&(n=o));for(var o=[],s=0,a=0;a<n;a++)if(a%4){var u=i.indexOf(r.charAt(a-1))<<a%4*2,c=i.indexOf(r.charAt(a))>>>6-a%4*2;o[s>>>2]|=(u|c)<<24-s%4*8,s++}return e.create(o,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){for(var e=v,r=(i=e.lib).WordArray,n=i.Hasher,i=e.algo,o=[],s=[],a=function t(e){return 4294967296*(e-(0|e))|0},u=2,c=0;64>c;){var h;t:{h=u;for(var l=t.sqrt(h),f=2;f<=l;f++)if(!(h%f)){h=!1;break t}h=!0}h&&(8>c&&(o[c]=a(t.pow(u,.5))),s[c]=a(t.pow(u,1/3)),c++),u++}var g=[];i=i.SHA256=n.extend({_doReset:function t(){this._hash=new r.init(o.slice(0))},_doProcessBlock:function t(e,r){for(var n=this._hash.words,i=n[0],o=n[1],a=n[2],u=n[3],c=n[4],h=n[5],l=n[6],f=n[7],d=0;64>d;d++){if(16>d)g[d]=0|e[r+d];else{var p=g[d-15],v=g[d-2];g[d]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+g[d-7]+((v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10)+g[d-16]}p=f+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&h^~c&l)+s[d]+g[d],v=((i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22))+(i&o^i&a^o&a),f=l,l=h,h=c,c=u+p|0,u=a,a=o,o=i,i=p+v|0}n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+a|0,n[3]=n[3]+u|0,n[4]=n[4]+c|0,n[5]=n[5]+h|0,n[6]=n[6]+l|0,n[7]=n[7]+f|0},_doFinalize:function e(){var r=this._data,n=r.words,i=8*this._nDataBytes,o=8*r.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=t.floor(i/4294967296),n[15+(o+64>>>9<<4)]=i,r.sigBytes=4*n.length,this._process(),this._hash},clone:function t(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA256=n._createHelper(i),e.HmacSHA256=n._createHmacHelper(i)}(Math),function(){function t(){return n.create.apply(n,arguments)}for(var e=v,r=e.lib.Hasher,n=(o=e.x64).Word,i=o.WordArray,o=e.algo,s=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],a=[],u=0;80>u;u++)a[u]=t();o=o.SHA512=r.extend({_doReset:function t(){this._hash=new i.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function t(e,r){for(var n=(f=this._hash.words)[0],i=f[1],o=f[2],u=f[3],c=f[4],h=f[5],l=f[6],f=f[7],g=n.high,d=n.low,p=i.high,v=i.low,y=o.high,m=o.low,_=u.high,S=u.low,b=c.high,w=c.low,F=h.high,E=h.low,x=l.high,A=l.low,k=f.high,P=f.low,C=g,T=d,R=p,I=v,D=y,L=m,N=_,U=S,B=b,O=w,j=F,M=E,H=x,V=A,K=k,q=P,J=0;80>J;J++){var W=a[J];if(16>J)var z=W.high=0|e[r+2*J],Y=W.low=0|e[r+2*J+1];else{z=((Y=(z=a[J-15]).high)>>>1|(G=z.low)<<31)^(Y>>>8|G<<24)^Y>>>7;var G=(G>>>1|Y<<31)^(G>>>8|Y<<24)^(G>>>7|Y<<25),X=((Y=(X=a[J-2]).high)>>>19|($=X.low)<<13)^(Y<<3|$>>>29)^Y>>>6,$=($>>>19|Y<<13)^($<<3|Y>>>29)^($>>>6|Y<<26),Q=(Y=a[J-7]).high,Z=(tt=a[J-16]).high,tt=tt.low;z=(z=(z=z+Q+((Y=G+Y.low)>>>0<G>>>0?1:0))+X+((Y=Y+$)>>>0<$>>>0?1:0))+Z+((Y=Y+tt)>>>0<tt>>>0?1:0);W.high=z,W.low=Y}Q=B&j^~B&H,tt=O&M^~O&V,W=C&R^C&D^R&D;var et=T&I^T&L^I&L,rt=(G=(C>>>28|T<<4)^(C<<30|T>>>2)^(C<<25|T>>>7),X=(T>>>28|C<<4)^(T<<30|C>>>2)^(T<<25|C>>>7),($=s[J]).high),nt=$.low;Z=K+((B>>>14|O<<18)^(B>>>18|O<<14)^(B<<23|O>>>9))+(($=q+((O>>>14|B<<18)^(O>>>18|B<<14)^(O<<23|B>>>9)))>>>0<q>>>0?1:0),K=H,q=V,H=j,V=M,j=B,M=O,B=N+(Z=(Z=(Z=Z+Q+(($=$+tt)>>>0<tt>>>0?1:0))+rt+(($=$+nt)>>>0<nt>>>0?1:0))+z+(($=$+Y)>>>0<Y>>>0?1:0))+((O=U+$|0)>>>0<U>>>0?1:0)|0,N=D,U=L,D=R,L=I,R=C,I=T,C=Z+(W=G+W+((Y=X+et)>>>0<X>>>0?1:0))+((T=$+Y|0)>>>0<$>>>0?1:0)|0}d=n.low=d+T,n.high=g+C+(d>>>0<T>>>0?1:0),v=i.low=v+I,i.high=p+R+(v>>>0<I>>>0?1:0),m=o.low=m+L,o.high=y+D+(m>>>0<L>>>0?1:0),S=u.low=S+U,u.high=_+N+(S>>>0<U>>>0?1:0),w=c.low=w+O,c.high=b+B+(w>>>0<O>>>0?1:0),E=h.low=E+M,h.high=F+j+(E>>>0<M>>>0?1:0),A=l.low=A+V,l.high=x+H+(A>>>0<V>>>0?1:0),P=f.low=P+q,f.high=k+K+(P>>>0<q>>>0?1:0)},_doFinalize:function t(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return r[i>>>5]|=128<<24-i%32,r[30+(i+128>>>10<<5)]=Math.floor(n/4294967296),r[31+(i+128>>>10<<5)]=n,e.sigBytes=4*r.length,this._process(),this._hash.toX32()},clone:function t(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),e.SHA512=r._createHelper(o),e.HmacSHA512=r._createHmacHelper(o)}(),function(){var t=v,e=(i=t.x64).Word,r=i.WordArray,n=(i=t.algo).SHA512,i=i.SHA384=n.extend({_doReset:function t(){this._hash=new r.init([new e.init(3418070365,3238371032),new e.init(1654270250,914150663),new e.init(2438529370,812702999),new e.init(355462360,4144912697),new e.init(1731405415,4290775857),new e.init(2394180231,1750603025),new e.init(3675008525,1694076839),new e.init(1203062813,3204075428)])},_doFinalize:function t(){var e=n._doFinalize.call(this);return e.sigBytes-=16,e}});t.SHA384=n._createHelper(i),t.HmacSHA384=n._createHmacHelper(i)}();
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
var y,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function _(t){var e,r,n="";for(e=0;e+3<=t.length;e+=3)r=parseInt(t.substring(e,e+3),16),n+=m.charAt(r>>6)+m.charAt(63&r);for(e+1==t.length?(r=parseInt(t.substring(e,e+1),16),n+=m.charAt(r<<2)):e+2==t.length&&(r=parseInt(t.substring(e,e+2),16),n+=m.charAt(r>>2)+m.charAt((3&r)<<4)),"=";(3&n.length)>0;)n+="=";return n}function S(t){var e,r,n,i="",o=0;for(e=0;e<t.length&&"="!=t.charAt(e);++e)(n=m.indexOf(t.charAt(e)))<0||(0==o?(i+=T(n>>2),r=3&n,o=1):1==o?(i+=T(r<<2|n>>4),r=15&n,o=2):2==o?(i+=T(r),i+=T(n>>2),r=3&n,o=3):(i+=T(r<<2|n>>4),i+=T(15&n),o=0));return 1==o&&(i+=T(r<<2)),i}function b(t){var e,r=S(t),n=new Array;for(e=0;2*e<r.length;++e)n[e]=parseInt(r.substring(2*e,2*e+2),16);return n}function w(t,e,r){null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function F(){return new w(null)}"Microsoft Internet Explorer"==d.appName?(w.prototype.am=function E(t,e,r,n,i,o){for(var s=32767&e,a=e>>15;--o>=0;){var u=32767&this[t],c=this[t++]>>15,h=a*u+c*s;i=((u=s*u+((32767&h)<<15)+r[n]+(1073741823&i))>>>30)+(h>>>15)+a*c+(i>>>30),r[n++]=1073741823&u}return i},y=30):"Netscape"!=d.appName?(w.prototype.am=function x(t,e,r,n,i,o){for(;--o>=0;){var s=e*this[t++]+r[n]+i;i=Math.floor(s/67108864),r[n++]=67108863&s}return i},y=26):(w.prototype.am=function A(t,e,r,n,i,o){for(var s=16383&e,a=e>>14;--o>=0;){var u=16383&this[t],c=this[t++]>>14,h=a*u+c*s;i=((u=s*u+((16383&h)<<14)+r[n]+i)>>28)+(h>>14)+a*c,r[n++]=268435455&u}return i},y=28),w.prototype.DB=y,w.prototype.DM=(1<<y)-1,w.prototype.DV=1<<y;w.prototype.FV=Math.pow(2,52),w.prototype.F1=52-y,w.prototype.F2=2*y-52;var k,P,C=new Array;for(k="0".charCodeAt(0),P=0;P<=9;++P)C[k++]=P;for(k="a".charCodeAt(0),P=10;P<36;++P)C[k++]=P;for(k="A".charCodeAt(0),P=10;P<36;++P)C[k++]=P;function T(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function R(t,e){var r=C[t.charCodeAt(e)];return null==r?-1:r}function I(t){var e=F();return e.fromInt(t),e}function D(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function L(t){this.m=t}function N(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function U(t,e){return t&e}function B(t,e){return t|e}function O(t,e){return t^e}function j(t,e){return t&~e}function M(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function H(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function V(){}function K(t){return t}function q(t){this.r2=F(),this.q3=F(),w.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}L.prototype.convert=function J(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},L.prototype.revert=function W(t){return t},L.prototype.reduce=function z(t){t.divRemTo(this.m,null,t)},L.prototype.mulTo=function Y(t,e,r){t.multiplyTo(e,r),this.reduce(r)},L.prototype.sqrTo=function G(t,e){t.squareTo(e),this.reduce(e)},N.prototype.convert=function X(t){var e=F();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(w.ZERO)>0&&this.m.subTo(e,e),e},N.prototype.revert=function $(t){var e=F();return t.copyTo(e),this.reduce(e),e},N.prototype.reduce=function Q(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t[e],n=r*this.mpl+((r*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[r=e+this.m.t]+=this.m.am(0,n,t,e,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},N.prototype.mulTo=function Z(t,e,r){t.multiplyTo(e,r),this.reduce(r)},N.prototype.sqrTo=function tt(t,e){t.squareTo(e),this.reduce(e)},w.prototype.copyTo=function et(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},w.prototype.fromInt=function rt(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},w.prototype.fromString=function nt(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;for(var n=t.length,i=!1,o=0;--n>=0;){var s=8==r?255&t[n]:R(t,n);s<0?"-"==t.charAt(n)&&(i=!0):(i=!1,0==o?this[this.t++]=s:o+r>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&w.ZERO.subTo(this,this)},w.prototype.clamp=function it(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},w.prototype.dlShiftTo=function ot(t,e){var r;for(r=this.t-1;r>=0;--r)e[r+t]=this[r];for(r=t-1;r>=0;--r)e[r]=0;e.t=this.t+t,e.s=this.s},w.prototype.drShiftTo=function st(t,e){for(var r=t;r<this.t;++r)e[r-t]=this[r];e.t=Math.max(this.t-t,0),e.s=this.s},w.prototype.lShiftTo=function at(t,e){var r,n=t%this.DB,i=this.DB-n,o=(1<<i)-1,s=Math.floor(t/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)e[r+s+1]=this[r]>>i|a,a=(this[r]&o)<<n;for(r=s-1;r>=0;--r)e[r]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()},w.prototype.rShiftTo=function ut(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e[0]=this[r]>>n;for(var s=r+1;s<this.t;++s)e[s-r-1]|=(this[s]&o)<<i,e[s-r]=this[s]>>n;n>0&&(e[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}},w.prototype.subTo=function ct(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]-t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t[r],e[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[r++]=this.DV+n:n>0&&(e[r++]=n),e.t=r,e.clamp()},w.prototype.multiplyTo=function ht(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e[i]=0;for(i=0;i<n.t;++i)e[i+r.t]=r.am(0,n[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&w.ZERO.subTo(e,e)},w.prototype.squareTo=function lt(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e[r],t,2*r,0,1);(t[r+e.t]+=e.am(r+1,2*e[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t[r+e.t]-=e.DV,t[r+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(r,e[r],t,2*r,0,1)),t.s=0,t.clamp()},w.prototype.divRemTo=function ft(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=e&&e.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=F());var o=F(),s=this.s,a=t.s,u=this.DB-D(n[n.t-1]);u>0?(n.lShiftTo(u,o),i.lShiftTo(u,r)):(n.copyTo(o),i.copyTo(r));var c=o.t,h=o[c-1];if(0!=h){var l=h*(1<<this.F1)+(c>1?o[c-2]>>this.F2:0),f=this.FV/l,g=(1<<this.F1)/l,d=1<<this.F2,p=r.t,v=p-c,y=null==e?F():e;for(o.dlShiftTo(v,y),r.compareTo(y)>=0&&(r[r.t++]=1,r.subTo(y,r)),w.ONE.dlShiftTo(c,y),y.subTo(o,o);o.t<c;)o[o.t++]=0;for(;--v>=0;){var m=r[--p]==h?this.DM:Math.floor(r[p]*f+(r[p-1]+d)*g);if((r[p]+=o.am(0,m,r,v,0,c))<m)for(o.dlShiftTo(v,y),r.subTo(y,r);r[p]<--m;)r.subTo(y,r)}null!=e&&(r.drShiftTo(c,e),s!=a&&w.ZERO.subTo(e,e)),r.t=c,r.clamp(),u>0&&r.rShiftTo(u,r),s<0&&w.ZERO.subTo(r,r)}}},w.prototype.invDigit=function gt(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},w.prototype.isEven=function dt(){return 0==(this.t>0?1&this[0]:this.s)},w.prototype.exp=function pt(t,e){if(t>4294967295||t<1)return w.ONE;var r=F(),n=F(),i=e.convert(this),o=D(t)-1;for(i.copyTo(r);--o>=0;)if(e.sqrTo(r,n),(t&1<<o)>0)e.mulTo(n,i,r);else{var s=r;r=n,n=s}return e.revert(r)},w.prototype.toString=function vt(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,n=(1<<e)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(r=this[s]>>a)>0&&(i=!0,o=T(r));s>=0;)a<e?(r=(this[s]&(1<<a)-1)<<e-a,r|=this[--s]>>(a+=this.DB-e)):(r=this[s]>>(a-=e)&n,a<=0&&(a+=this.DB,--s)),r>0&&(i=!0),i&&(o+=T(r));return i?o:"0"},w.prototype.negate=function yt(){var t=F();return w.ZERO.subTo(this,t),t},w.prototype.abs=function mt(){return this.s<0?this.negate():this},w.prototype.compareTo=function _t(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(0!=(e=r-t.t))return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this[r]-t[r]))return e;return 0},w.prototype.bitLength=function St(){return this.t<=0?0:this.DB*(this.t-1)+D(this[this.t-1]^this.s&this.DM)},w.prototype.mod=function bt(t){var e=F();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(w.ZERO)>0&&t.subTo(e,e),e},w.prototype.modPowInt=function wt(t,e){var r;return r=t<256||e.isEven()?new L(e):new N(e),this.exp(t,r)},w.ZERO=I(0),w.ONE=I(1),V.prototype.convert=K,V.prototype.revert=K,V.prototype.mulTo=function Ft(t,e,r){t.multiplyTo(e,r)},V.prototype.sqrTo=function Et(t,e){t.squareTo(e)},q.prototype.convert=function xt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=F();return t.copyTo(e),this.reduce(e),e},q.prototype.revert=function At(t){return t},q.prototype.reduce=function kt(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},q.prototype.mulTo=function Pt(t,e,r){t.multiplyTo(e,r),this.reduce(r)},q.prototype.sqrTo=function Ct(t,e){t.squareTo(e),this.reduce(e)};var Tt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Rt=(1<<26)/Tt[Tt.length-1];
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function It(){this.i=0,this.j=0,this.S=new Array}w.prototype.chunkSize=function Dt(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},w.prototype.toRadix=function Lt(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=I(r),i=F(),o=F(),s="";for(this.divRemTo(n,i,o);i.signum()>0;)s=(r+o.intValue()).toString(t).substr(1)+s,i.divRemTo(n,i,o);return o.intValue().toString(t)+s},w.prototype.fromRadix=function Nt(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,s=0,a=0;a<t.length;++a){var u=R(t,a);u<0?"-"==t.charAt(a)&&0==this.signum()&&(i=!0):(s=e*s+u,++o>=r&&(this.dMultiply(n),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(s,0)),i&&w.ZERO.subTo(this,this)},w.prototype.fromNumber=function Ut(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(w.ONE.shiftLeft(t-1),B,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(w.ONE.shiftLeft(t-1),this);else{var n=new Array,i=7&t;n.length=1+(t>>3),e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},w.prototype.bitwiseTo=function Bt(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r[n]=e(this[n],t[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r[n]=e(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r[n]=e(i,t[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()},w.prototype.changeBit=function Ot(t,e){var r=w.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r},w.prototype.addTo=function jt(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]+t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t[r],e[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[r++]=n:n<-1&&(e[r++]=this.DV+n),e.t=r,e.clamp()},w.prototype.dMultiply=function Mt(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},w.prototype.dAddOffset=function Ht(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},w.prototype.multiplyLowerTo=function Vt(t,e,r){var n,i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r[--i]=0;for(n=r.t-this.t;i<n;++i)r[i+this.t]=this.am(0,t[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t[i],r,i,0,e-i);r.clamp()},w.prototype.multiplyUpperTo=function Kt(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r[this.t+n-e]=this.am(e-n,t[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)},w.prototype.modInt=function qt(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this[n])%t;return r},w.prototype.millerRabin=function Jt(t){var e=this.subtract(w.ONE),r=e.getLowestSetBit();if(r<=0)return!1;var n=e.shiftRight(r);(t=t+1>>1)>Tt.length&&(t=Tt.length);for(var i=F(),o=0;o<t;++o){i.fromInt(Tt[Math.floor(Math.random()*Tt.length)]);var s=i.modPow(n,this);if(0!=s.compareTo(w.ONE)&&0!=s.compareTo(e)){for(var a=1;a++<r&&0!=s.compareTo(e);)if(0==(s=s.modPowInt(2,this)).compareTo(w.ONE))return!1;if(0!=s.compareTo(e))return!1}}return!0},w.prototype.clone=
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function Wt(){var t=F();return this.copyTo(t),t},w.prototype.intValue=function zt(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},w.prototype.byteValue=function Yt(){return 0==this.t?this.s:this[0]<<24>>24},w.prototype.shortValue=function Gt(){return 0==this.t?this.s:this[0]<<16>>16},w.prototype.signum=function Xt(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},w.prototype.toByteArray=function $t(){var t=this.t,e=new Array;e[0]=this.s;var r,n=this.DB-t*this.DB%8,i=0;if(t-- >0)for(n<this.DB&&(r=this[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);t>=0;)n<8?(r=(this[t]&(1<<n)-1)<<8-n,r|=this[--t]>>(n+=this.DB-8)):(r=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(e[i++]=r);return e},w.prototype.equals=function Qt(t){return 0==this.compareTo(t)},w.prototype.min=function Zt(t){return this.compareTo(t)<0?this:t},w.prototype.max=function te(t){return this.compareTo(t)>0?this:t},w.prototype.and=function ee(t){var e=F();return this.bitwiseTo(t,U,e),e},w.prototype.or=function re(t){var e=F();return this.bitwiseTo(t,B,e),e},w.prototype.xor=function ne(t){var e=F();return this.bitwiseTo(t,O,e),e},w.prototype.andNot=function ie(t){var e=F();return this.bitwiseTo(t,j,e),e},w.prototype.not=function oe(){for(var t=F(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},w.prototype.shiftLeft=function se(t){var e=F();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},w.prototype.shiftRight=function ae(t){var e=F();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},w.prototype.getLowestSetBit=function ue(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+M(this[t]);return this.s<0?this.t*this.DB:-1},w.prototype.bitCount=function ce(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=H(this[r]^e);return t},w.prototype.testBit=function he(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},w.prototype.setBit=function le(t){return this.changeBit(t,B)},w.prototype.clearBit=function fe(t){return this.changeBit(t,j)},w.prototype.flipBit=function ge(t){return this.changeBit(t,O)},w.prototype.add=function de(t){var e=F();return this.addTo(t,e),e},w.prototype.subtract=function pe(t){var e=F();return this.subTo(t,e),e},w.prototype.multiply=function ve(t){var e=F();return this.multiplyTo(t,e),e},w.prototype.divide=function ye(t){var e=F();return this.divRemTo(t,e,null),e},w.prototype.remainder=function me(t){var e=F();return this.divRemTo(t,null,e),e},w.prototype.divideAndRemainder=function _e(t){var e=F(),r=F();return this.divRemTo(t,e,r),new Array(e,r)},w.prototype.modPow=function Se(t,e){var r,n,i=t.bitLength(),o=I(1);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new L(e):e.isEven()?new q(e):new N(e);var s=new Array,a=3,u=r-1,c=(1<<r)-1;if(s[1]=n.convert(this),r>1){var h=F();for(n.sqrTo(s[1],h);a<=c;)s[a]=F(),n.mulTo(h,s[a-2],s[a]),a+=2}var l,f,g=t.t-1,d=!0,p=F();for(i=D(t[g])-1;g>=0;){for(i>=u?l=t[g]>>i-u&c:(l=(t[g]&(1<<i+1)-1)<<u-i,g>0&&(l|=t[g-1]>>this.DB+i-u)),a=r;0==(1&l);)l>>=1,--a;if((i-=a)<0&&(i+=this.DB,--g),d)s[l].copyTo(o),d=!1;else{for(;a>1;)n.sqrTo(o,p),n.sqrTo(p,o),a-=2;a>0?n.sqrTo(o,p):(f=o,o=p,p=f),n.mulTo(p,s[l],o)}for(;g>=0&&0==(t[g]&1<<i);)n.sqrTo(o,p),f=o,o=p,p=f,--i<0&&(i=this.DB-1,--g)}return n.revert(o)},w.prototype.modInverse=function be(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return w.ZERO;for(var r=t.clone(),n=this.clone(),i=I(1),o=I(0),s=I(0),a=I(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),e?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?(s.isEven()&&a.isEven()||(s.addTo(this,s),a.subTo(t,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(s,i),o.subTo(a,o)):(n.subTo(r,n),e&&s.subTo(i,s),a.subTo(o,a))}return 0!=n.compareTo(w.ONE)?w.ZERO:a.compareTo(t)>=0?a.subtract(t):a.signum()<0?(a.addTo(t,a),a.signum()<0?a.add(t):a):a},w.prototype.pow=function we(t){return this.exp(t,new V)},w.prototype.gcd=function Fe(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r},w.prototype.isProbablePrime=function Ee(t){var e,r=this.abs();if(1==r.t&&r[0]<=Tt[Tt.length-1]){for(e=0;e<Tt.length;++e)if(r[0]==Tt[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<Tt.length;){for(var n=Tt[e],i=e+1;i<Tt.length&&n<Rt;)n*=Tt[i++];for(n=r.modInt(n);e<i;)if(n%Tt[e++]==0)return!1}return r.millerRabin(t)},w.prototype.square=function xe(){var t=F();return this.squareTo(t),t},It.prototype.init=function Ae(t){var e,r,n;for(e=0;e<256;++e)this.S[e]=e;for(r=0,e=0;e<256;++e)r=r+this.S[e]+t[e%t.length]&255,n=this.S[e],this.S[e]=this.S[r],this.S[r]=n;this.i=0,this.j=0},It.prototype.next=function ke(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var Pe,Ce,Te;
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function Re(){!function t(e){Ce[Te++]^=255&e,Ce[Te++]^=e>>8&255,Ce[Te++]^=e>>16&255,Ce[Te++]^=e>>24&255,Te>=256&&(Te-=256)}((new Date).getTime())}if(null==Ce){var Ie;if(Ce=new Array,Te=0,void 0!==p&&(void 0!==p.crypto||void 0!==p.msCrypto)){var De=p.crypto||p.msCrypto;if(De.getRandomValues){var Le=new Uint8Array(32);for(De.getRandomValues(Le),Ie=0;Ie<32;++Ie)Ce[Te++]=Le[Ie]}else if("Netscape"==d.appName&&d.appVersion<"5"){var Ne=p.crypto.random(32);for(Ie=0;Ie<Ne.length;++Ie)Ce[Te++]=255&Ne.charCodeAt(Ie)}}for(;Te<256;)Ie=Math.floor(65536*Math.random()),Ce[Te++]=Ie>>>8,Ce[Te++]=255&Ie;Te=0,Re()}function Ue(){if(null==Pe){for(Re(),(Pe=function t(){return new It}()).init(Ce),Te=0;Te<Ce.length;++Te)Ce[Te]=0;Te=0}return Pe.next()}function Be(){}
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function Oe(t,e){return new w(t,e)}function je(t,e,r){for(var n="",i=0;n.length<e;)n+=r(String.fromCharCode.apply(String,t.concat([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))),i+=1;return n}function Me(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function He(t,e){this.x=e,this.q=t}function Ve(t,e,r,n){this.curve=t,this.x=e,this.y=r,this.z=null==n?w.ONE:n,this.zinv=null}function Ke(t,e,r){this.q=t,this.a=this.fromBigInteger(e),this.b=this.fromBigInteger(r),this.infinity=new Ve(this,null,null)}Be.prototype.nextBytes=function qe(t){var e;for(e=0;e<t.length;++e)t[e]=Ue()},Me.prototype.doPublic=function Je(t){return t.modPowInt(this.e,this.n)},Me.prototype.setPublic=function We(t,e){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof t)this.n=t,this.e=e;else{if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA public key";this.n=Oe(t,16),this.e=parseInt(e,16)}},Me.prototype.encrypt=function ze(t){var e=function r(t,e){if(e<t.length+11)throw"Message too long for RSA";for(var r=new Array,n=t.length-1;n>=0&&e>0;){var i=t.charCodeAt(n--);i<128?r[--e]=i:i>127&&i<2048?(r[--e]=63&i|128,r[--e]=i>>6|192):(r[--e]=63&i|128,r[--e]=i>>6&63|128,r[--e]=i>>12|224)}r[--e]=0;for(var o=new Be,s=new Array;e>2;){for(s[0]=0;0==s[0];)o.nextBytes(s);r[--e]=s[0]}return r[--e]=2,r[--e]=0,new w(r)}(t,this.n.bitLength()+7>>3);if(null==e)return null;var n=this.doPublic(e);if(null==n)return null;var i=n.toString(16);return 0==(1&i.length)?i:"0"+i},Me.prototype.encryptOAEP=function Ye(t,e,r){var n=function i(t,e,r,n){var i=Sr.crypto.MessageDigest,o=Sr.crypto.Util,s=null;if(r||(r="sha1"),"string"==typeof r&&(s=i.getCanonicalAlgName(r),n=i.getHashLength(s),r=function t(e){return Lr(o.hashHex(Nr(e),s))}),t.length+2*n+2>e)throw"Message too long for RSA";var a,u="";for(a=0;a<e-t.length-2*n-2;a+=1)u+="\0";var c=r("")+u+""+t,h=new Array(n);(new Be).nextBytes(h);var l=je(h,c.length,r),f=[];for(a=0;a<c.length;a+=1)f[a]=c.charCodeAt(a)^l.charCodeAt(a);var g=je(f,h.length,r),d=[0];for(a=0;a<h.length;a+=1)d[a+1]=h[a]^g.charCodeAt(a);return new w(d.concat(f))}(t,this.n.bitLength()+7>>3,e,r);if(null==n)return null;var o=this.doPublic(n);if(null==o)return null;var s=o.toString(16);return 0==(1&s.length)?s:"0"+s},Me.prototype.type="RSA",He.prototype.equals=function Ge(t){return t==this||this.q.equals(t.q)&&this.x.equals(t.x)},He.prototype.toBigInteger=function Xe(){return this.x},He.prototype.negate=function $e(){return new He(this.q,this.x.negate().mod(this.q))},He.prototype.add=function Qe(t){return new He(this.q,this.x.add(t.toBigInteger()).mod(this.q))},He.prototype.subtract=function Ze(t){return new He(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))},He.prototype.multiply=function tr(t){return new He(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))},He.prototype.square=function er(){return new He(this.q,this.x.square().mod(this.q))},He.prototype.divide=function rr(t){return new He(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))},Ve.prototype.getX=function nr(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Ve.prototype.getY=function ir(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Ve.prototype.equals=function or(t){return t==this||(this.isInfinity()?t.isInfinity():t.isInfinity()?this.isInfinity():!!t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(w.ZERO)&&t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(w.ZERO))},Ve.prototype.isInfinity=function sr(){return null==this.x&&null==this.y||this.z.equals(w.ZERO)&&!this.y.toBigInteger().equals(w.ZERO)},Ve.prototype.negate=function ar(){return new Ve(this.curve,this.x,this.y.negate(),this.z)},Ve.prototype.add=function ur(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),r=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if(w.ZERO.equals(r))return w.ZERO.equals(e)?this.twice():this.curve.getInfinity();var n=new w("3"),i=this.x.toBigInteger(),o=this.y.toBigInteger(),s=(t.x.toBigInteger(),t.y.toBigInteger(),r.square()),a=s.multiply(r),u=i.multiply(s),c=e.square().multiply(this.z),h=c.subtract(u.shiftLeft(1)).multiply(t.z).subtract(a).multiply(r).mod(this.curve.q),l=u.multiply(n).multiply(e).subtract(o.multiply(a)).subtract(c.multiply(e)).multiply(t.z).add(e.multiply(a)).mod(this.curve.q),f=a.multiply(this.z).multiply(t.z).mod(this.curve.q);return new Ve(this.curve,this.curve.fromBigInteger(h),this.curve.fromBigInteger(l),f)},Ve.prototype.twice=function cr(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=new w("3"),e=this.x.toBigInteger(),r=this.y.toBigInteger(),n=r.multiply(this.z),i=n.multiply(r).mod(this.curve.q),o=this.curve.a.toBigInteger(),s=e.square().multiply(t);w.ZERO.equals(o)||(s=s.add(this.z.square().multiply(o)));var a=(s=s.mod(this.curve.q)).square().subtract(e.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(n).mod(this.curve.q),u=s.multiply(t).multiply(e).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(s.square().multiply(s)).mod(this.curve.q),c=n.square().multiply(n).shiftLeft(3).mod(this.curve.q);return new Ve(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(u),c)},Ve.prototype.multiply=function hr(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,r=t,n=r.multiply(new w("3")),i=this.negate(),o=this,s=this.curve.q.subtract(t),a=s.multiply(new w("3")),u=new Ve(this.curve,this.x,this.y),c=u.negate();for(e=n.bitLength()-2;e>0;--e){o=o.twice();var h=n.testBit(e);h!=r.testBit(e)&&(o=o.add(h?this:i))}for(e=a.bitLength()-2;e>0;--e){u=u.twice();var l=a.testBit(e);l!=s.testBit(e)&&(u=u.add(l?u:c))}return o},Ve.prototype.multiplyTwo=function lr(t,e,r){var n;n=t.bitLength()>r.bitLength()?t.bitLength()-1:r.bitLength()-1;for(var i=this.curve.getInfinity(),o=this.add(e);n>=0;)i=i.twice(),t.testBit(n)?i=r.testBit(n)?i.add(o):i.add(this):r.testBit(n)&&(i=i.add(e)),--n;return i},Ke.prototype.getQ=function fr(){return this.q},Ke.prototype.getA=function gr(){return this.a},Ke.prototype.getB=function dr(){return this.b},Ke.prototype.equals=function pr(t){return t==this||this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)},Ke.prototype.getInfinity=function vr(){return this.infinity},Ke.prototype.fromBigInteger=function yr(t){return new He(this.q,t)},Ke.prototype.decodePointHex=function mr(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var e=(t.length-2)/2,r=t.substr(2,e),n=t.substr(e+2,e);return new Ve(this,this.fromBigInteger(new w(r,16)),this.fromBigInteger(new w(n,16)));default:return null}},
/*! (c) Stefan Thomas | https://github.com/bitcoinjs/bitcoinjs-lib
 */
He.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},Ve.prototype.getEncoded=function(t){var e=function t(e,r){var n=e.toByteArrayUnsigned();if(r<n.length)n=n.slice(n.length-r);else for(;r>n.length;)n.unshift(0);return n},r=this.getX().toBigInteger(),n=this.getY().toBigInteger(),i=e(r,32);return t?n.isEven()?i.unshift(2):i.unshift(3):(i.unshift(4),i=i.concat(e(n,32))),i},Ve.decodeFrom=function(t,e){e[0];var r=e.length-1,n=e.slice(1,1+r/2),i=e.slice(1+r/2,1+r);n.unshift(0),i.unshift(0);var o=new w(n),s=new w(i);return new Ve(t,t.fromBigInteger(o),t.fromBigInteger(s))},Ve.decodeFromHex=function(t,e){e.substr(0,2);var r=e.length-2,n=e.substr(2,r/2),i=e.substr(2+r/2,r/2),o=new w(n,16),s=new w(i,16);return new Ve(t,t.fromBigInteger(o),t.fromBigInteger(s))},Ve.prototype.add2D=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.x.equals(t.x))return this.y.equals(t.y)?this.twice():this.curve.getInfinity();var e=t.x.subtract(this.x),r=t.y.subtract(this.y).divide(e),n=r.square().subtract(this.x).subtract(t.x),i=r.multiply(this.x.subtract(n)).subtract(this.y);return new Ve(this.curve,n,i)},Ve.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=this.curve.fromBigInteger(w.valueOf(2)),e=this.curve.fromBigInteger(w.valueOf(3)),r=this.x.square().multiply(e).add(this.curve.a).divide(this.y.multiply(t)),n=r.square().subtract(this.x.multiply(t)),i=r.multiply(this.x.subtract(n)).subtract(this.y);return new Ve(this.curve,n,i)},Ve.prototype.multiply2D=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,r=t,n=r.multiply(new w("3")),i=this.negate(),o=this;for(e=n.bitLength()-2;e>0;--e){o=o.twice();var s=n.testBit(e);s!=r.testBit(e)&&(o=o.add2D(s?this:i))}return o},Ve.prototype.isOnCurve=function(){var t=this.getX().toBigInteger(),e=this.getY().toBigInteger(),r=this.curve.getA().toBigInteger(),n=this.curve.getB().toBigInteger(),i=this.curve.getQ(),o=e.multiply(e).mod(i),s=t.multiply(t).multiply(t).add(r.multiply(t)).add(n).mod(i);return o.equals(s)},Ve.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},Ve.prototype.validate=function(){var t=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var e=this.getX().toBigInteger(),r=this.getY().toBigInteger();if(e.compareTo(w.ONE)<0||e.compareTo(t.subtract(w.ONE))>0)throw new Error("x coordinate out of bounds");if(r.compareTo(w.ONE)<0||r.compareTo(t.subtract(w.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(t).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};
/*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval
 */
var _r=function(){var t=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),e=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),r={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function n(t,e,n){return e?r[e]:String.fromCharCode(parseInt(n,16))}var i=new String(""),o=Object.hasOwnProperty;return function(r,s){var a,u,c=r.match(t),h=c[0],l=!1;"{"===h?a={}:"["===h?a=[]:(a=[],l=!0);for(var f=[a],d=1-l,p=c.length;d<p;++d){var v;switch((h=c[d]).charCodeAt(0)){default:(v=f[0])[u||v.length]=+h,u=void 0;break;case 34:if(-1!==(h=h.substring(1,h.length-1)).indexOf("\\")&&(h=h.replace(e,n)),v=f[0],!u){if(!(v instanceof Array)){u=h||i;break}u=v.length}v[u]=h,u=void 0;break;case 91:v=f[0],f.unshift(v[u||v.length]=[]),u=void 0;break;case 93:f.shift();break;case 102:(v=f[0])[u||v.length]=!1,u=void 0;break;case 110:(v=f[0])[u||v.length]=null,u=void 0;break;case 116:(v=f[0])[u||v.length]=!0,u=void 0;break;case 123:v=f[0],f.unshift(v[u||v.length]={}),u=void 0;break;case 125:f.shift()}}if(l){if(1!==f.length)throw new Error;a=a[0]}else if(f.length)throw new Error;if(s){a=function t(e,r){var n=e[r];if(n&&"object"===(void 0===n?"undefined":g(n))){var i=null;for(var a in n)if(o.call(n,a)&&n!==e){var u=t(n,a);void 0!==u?n[a]=u:(i||(i=[]),i.push(a))}if(i)for(var c=i.length;--c>=0;)delete n[i[c]]}return s.call(e,r,n)}({"":a},"")}return a}}();void 0!==Sr&&Sr||(e.KJUR=Sr={}),void 0!==Sr.asn1&&Sr.asn1||(Sr.asn1={}),Sr.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var r=e.substr(1).length;r%2==1?r+=1:e.match(/^[0-7]/)||(r+=2);for(var n="",i=0;i<r;i++)n+="f";e=new w(n,16).xor(t).add(w.ONE).toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){return jr(t,e)},this.newObject=function(t){var e=Sr.asn1,r=e.ASN1Object,n=e.DERBoolean,i=e.DERInteger,o=e.DERBitString,s=e.DEROctetString,a=e.DERNull,u=e.DERObjectIdentifier,c=e.DEREnumerated,h=e.DERUTF8String,l=e.DERNumericString,f=e.DERPrintableString,g=e.DERTeletexString,d=e.DERIA5String,p=e.DERUTCTime,v=e.DERGeneralizedTime,y=e.DERVisibleString,m=e.DERBMPString,_=e.DERSequence,S=e.DERSet,b=e.DERTaggedObject,w=e.ASN1Util.newObject;if(t instanceof e.ASN1Object)return t;var F=Object.keys(t);if(1!=F.length)throw new Error("key of param shall be only one.");var E=F[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+E+":"))throw new Error("undefined key: "+E);if("bool"==E)return new n(t[E]);if("int"==E)return new i(t[E]);if("bitstr"==E)return new o(t[E]);if("octstr"==E)return new s(t[E]);if("null"==E)return new a(t[E]);if("oid"==E)return new u(t[E]);if("enum"==E)return new c(t[E]);if("utf8str"==E)return new h(t[E]);if("numstr"==E)return new l(t[E]);if("prnstr"==E)return new f(t[E]);if("telstr"==E)return new g(t[E]);if("ia5str"==E)return new d(t[E]);if("utctime"==E)return new p(t[E]);if("gentime"==E)return new v(t[E]);if("visstr"==E)return new y(t[E]);if("bmpstr"==E)return new m(t[E]);if("asn1"==E)return new r(t[E]);if("seq"==E){for(var x=t[E],A=[],k=0;k<x.length;k++){var P=w(x[k]);A.push(P)}return new _({array:A})}if("set"==E){for(x=t[E],A=[],k=0;k<x.length;k++){P=w(x[k]);A.push(P)}return new S({array:A})}if("tag"==E){var C=t[E];if("[object Array]"===Object.prototype.toString.call(C)&&3==C.length){var T=w(C[2]);return new b({tag:C[0],explicit:C[1],obj:T})}return new b(C)}},this.jsonToASN1HEX=function(t){return this.newObject(t).getEncodedHex()}},Sr.asn1.ASN1Util.oidHexToInt=function(t){for(var e="",r=parseInt(t.substr(0,2),16),n=(e=Math.floor(r/40)+"."+r%40,""),i=2;i<t.length;i+=2){var o=("00000000"+parseInt(t.substr(i,2),16).toString(2)).slice(-8);if(n+=o.substr(1,7),"0"==o.substr(0,1))e=e+"."+new w(n,2).toString(10),n=""}return e},Sr.asn1.ASN1Util.oidIntToHex=function(t){var e=function t(e){var r=e.toString(16);return 1==r.length&&(r="0"+r),r},r=function t(r){var n="",i=new w(r,10).toString(2),o=7-i.length%7;7==o&&(o=0);for(var s="",a=0;a<o;a++)s+="0";i=s+i;for(a=0;a<i.length-1;a+=7){var u=i.substr(a,7);a!=i.length-7&&(u="1"+u),n+=e(parseInt(u,2))}return n};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var n="",i=t.split("."),o=40*parseInt(i[0])+parseInt(i[1]);n+=e(o),i.splice(0,2);for(var s=0;s<i.length;s++)n+=r(i[s]);return n},Sr.asn1.ASN1Object=function(t){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+"".length+",v="+this.hV);var t=this.hV.length/2,e=t.toString(16);if(e.length%2==1&&(e="0"+e),t<128)return e;var r=e.length/2;if(r>15)throw"ASN.1 length too long to represent by 8x: n = "+t.toString(16);return(128+r).toString(16)+e},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(t){this.params=t},null!=t&&null!=t.tlv&&(this.hTLV=t.tlv,this.isModified=!1)},Sr.asn1.DERAbstractString=function(t){Sr.asn1.DERAbstractString.superclass.constructor.call(this);this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=Ir(this.s).toLowerCase()},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?this.setString(t):void 0!==t.str?this.setString(t.str):void 0!==t.hex&&this.setStringHex(t.hex))},Zr(Sr.asn1.DERAbstractString,Sr.asn1.ASN1Object),Sr.asn1.DERAbstractTime=function(t){Sr.asn1.DERAbstractTime.superclass.constructor.call(this);this.localDateToUTC=function(t){var e=t.getTime()+6e4*t.getTimezoneOffset();return new Date(e)},this.formatDate=function(t,e,r){var n=this.zeroPadding,i=this.localDateToUTC(t),o=String(i.getFullYear());"utc"==e&&(o=o.substr(2,2));var s=o+n(String(i.getMonth()+1),2)+n(String(i.getDate()),2)+n(String(i.getHours()),2)+n(String(i.getMinutes()),2)+n(String(i.getSeconds()),2);if(!0===r){var a=i.getMilliseconds();if(0!=a){var u=n(String(a),3);s=s+"."+(u=u.replace(/[0]+$/,""))}}return s+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=kr(t)},this.setByDateValue=function(t,e,r,n,i,o){var s=new Date(Date.UTC(t,e-1,r,n,i,o,0));this.setByDate(s)},this.getFreshValueHex=function(){return this.hV}},Zr(Sr.asn1.DERAbstractTime,Sr.asn1.ASN1Object),Sr.asn1.DERAbstractStructured=function(t){Sr.asn1.DERAbstractString.superclass.constructor.call(this);this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,void 0!==t&&void 0!==t.array&&(this.asn1Array=t.array)},Zr(Sr.asn1.DERAbstractStructured,Sr.asn1.ASN1Object),Sr.asn1.DERBoolean=function(t){Sr.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==t?"010100":"0101ff"},Zr(Sr.asn1.DERBoolean,Sr.asn1.ASN1Object),Sr.asn1.DERInteger=function(t){Sr.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=Sr.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new w(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.bigint?this.setByBigInteger(t.bigint):void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},Zr(Sr.asn1.DERInteger,Sr.asn1.ASN1Object),Sr.asn1.DERBitString=function(t){if(void 0!==t&&void 0!==t.obj){var e=Sr.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.getEncodedHex()}Sr.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var r="0"+t;this.hTLV=null,this.isModified=!0,this.hV=r+e},this.setByBinaryString=function(t){var e=8-(t=t.replace(/0+$/,"")).length%8;8==e&&(e=0);for(var r=0;r<=e;r++)t+="0";var n="";for(r=0;r<t.length-1;r+=8){var i=t.substr(r,8),o=parseInt(i,2).toString(16);1==o.length&&(o="0"+o),n+=o}this.hTLV=null,this.isModified=!0,this.hV="0"+e+n},this.setByBooleanArray=function(t){for(var e="",r=0;r<t.length;r++)1==t[r]?e+="1":e+="0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=!1;return e},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):void 0!==t.hex?this.setHexValueIncludingUnusedBits(t.hex):void 0!==t.bin?this.setByBinaryString(t.bin):void 0!==t.array&&this.setByBooleanArray(t.array))},Zr(Sr.asn1.DERBitString,Sr.asn1.ASN1Object),Sr.asn1.DEROctetString=function(t){if(void 0!==t&&void 0!==t.obj){var e=Sr.asn1.ASN1Util.newObject(t.obj);t.hex=e.getEncodedHex()}Sr.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},Zr(Sr.asn1.DEROctetString,Sr.asn1.DERAbstractString),Sr.asn1.DERNull=function(){Sr.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},Zr(Sr.asn1.DERNull,Sr.asn1.ASN1Object),Sr.asn1.DERObjectIdentifier=function(t){Sr.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){var e=function r(t){var e=function t(e){var r=e.toString(16);return 1==r.length&&(r="0"+r),r},r=function t(r){var n="",i=parseInt(r,10).toString(2),o=7-i.length%7;7==o&&(o=0);for(var s="",a=0;a<o;a++)s+="0";i=s+i;for(a=0;a<i.length-1;a+=7){var u=i.substr(a,7);a!=i.length-7&&(u="1"+u),n+=e(parseInt(u,2))}return n};try{if(!t.match(/^[0-9.]+$/))return null;var n="",i=t.split("."),o=40*parseInt(i[0],10)+parseInt(i[1],10);n+=e(o),i.splice(0,2);for(var s=0;s<i.length;s++)n+=r(i[s]);return n}catch(t){return null}}(t);if(null==e)throw new Error("malformed oid string: "+t);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueName=function(t){var e=Sr.asn1.x509.OID.name2oid(t);if(""===e)throw new Error("DERObjectIdentifier oidName undefined: "+t);this.setValueOidString(e)},this.setValueNameOrOid=function(t){t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(t){"string"==typeof t?this.setValueNameOrOid(t):void 0!==t.oid?this.setValueNameOrOid(t.oid):void 0!==t.name?this.setValueNameOrOid(t.name):void 0!==t.hex&&this.setValueHex(t.hex)},void 0!==t&&this.setByParam(t)},Zr(Sr.asn1.DERObjectIdentifier,Sr.asn1.ASN1Object),Sr.asn1.DEREnumerated=function(t){Sr.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=Sr.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new w(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},Zr(Sr.asn1.DEREnumerated,Sr.asn1.ASN1Object),Sr.asn1.DERUTF8String=function(t){Sr.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},Zr(Sr.asn1.DERUTF8String,Sr.asn1.DERAbstractString),Sr.asn1.DERNumericString=function(t){Sr.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},Zr(Sr.asn1.DERNumericString,Sr.asn1.DERAbstractString),Sr.asn1.DERPrintableString=function(t){Sr.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},Zr(Sr.asn1.DERPrintableString,Sr.asn1.DERAbstractString),Sr.asn1.DERTeletexString=function(t){Sr.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},Zr(Sr.asn1.DERTeletexString,Sr.asn1.DERAbstractString),Sr.asn1.DERIA5String=function(t){Sr.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},Zr(Sr.asn1.DERIA5String,Sr.asn1.DERAbstractString),Sr.asn1.DERVisibleString=function(t){Sr.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="1a"},Zr(Sr.asn1.DERVisibleString,Sr.asn1.DERAbstractString),Sr.asn1.DERBMPString=function(t){Sr.asn1.DERBMPString.superclass.constructor.call(this,t),this.hT="1e"},Zr(Sr.asn1.DERBMPString,Sr.asn1.DERAbstractString),Sr.asn1.DERUTCTime=function(t){Sr.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"utc"),this.hV=kr(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=kr(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{12}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date))},Zr(Sr.asn1.DERUTCTime,Sr.asn1.DERAbstractTime),Sr.asn1.DERGeneralizedTime=function(t){Sr.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.withMillis=!1,this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=kr(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=kr(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{14}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date),!0===t.millis&&(this.withMillis=!0))},Zr(Sr.asn1.DERGeneralizedTime,Sr.asn1.DERAbstractTime),Sr.asn1.DERSequence=function(t){Sr.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",e=0;e<this.asn1Array.length;e++){t+=this.asn1Array[e].getEncodedHex()}return this.hV=t,this.hV}},Zr(Sr.asn1.DERSequence,Sr.asn1.DERAbstractStructured),Sr.asn1.DERSet=function(t){Sr.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,e=0;e<this.asn1Array.length;e++){var r=this.asn1Array[e];t.push(r.getEncodedHex())}return 1==this.sortFlag&&t.sort(),this.hV=t.join(""),this.hV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},Zr(Sr.asn1.DERSet,Sr.asn1.DERAbstractStructured),Sr.asn1.DERTaggedObject=function(t){Sr.asn1.DERTaggedObject.superclass.constructor.call(this);var e=Sr.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(t,e,r){this.hT=e,this.isExplicit=t,this.asn1Object=r,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=r.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,e),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(t){null!=t.tag&&(this.hT=t.tag),null!=t.explicit&&(this.isExplicit=t.explicit),null!=t.tage&&(this.hT=t.tage,this.isExplicit=!0),null!=t.tagi&&(this.hT=t.tagi,this.isExplicit=!1),null!=t.obj&&(t.obj instanceof e.ASN1Object?(this.asn1Object=t.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):"object"==g(t.obj)&&(this.asn1Object=e.ASN1Util.newObject(t.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},null!=t&&this.setByParam(t)},Zr(Sr.asn1.DERTaggedObject,Sr.asn1.ASN1Object);var Sr,br,wr,Fr=new function(){};function Er(t){for(var e=new Array,r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}function xr(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e}function Ar(t){for(var e="",r=0;r<t.length;r++){var n=t[r].toString(16);1==n.length&&(n="0"+n),e+=n}return e}function kr(t){return Ar(Er(t))}function Pr(t){return t=(t=(t=t.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function Cr(t){return t.length%4==2?t+="==":t.length%4==3&&(t+="="),t=(t=t.replace(/-/g,"+")).replace(/_/g,"/")}function Tr(t){return t.length%2==1&&(t="0"+t),Pr(_(t))}function Rr(t){return S(Cr(t))}function Ir(t){return Kr(Gr(t))}function Dr(t){return decodeURIComponent(qr(t))}function Lr(t){for(var e="",r=0;r<t.length-1;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e}function Nr(t){for(var e="",r=0;r<t.length;r++)e+=("0"+t.charCodeAt(r).toString(16)).slice(-2);return e}function Ur(t){return _(t)}function Br(t){var e=Ur(t).replace(/(.{64})/g,"$1\r\n");return e=e.replace(/\r\n$/,"")}function Or(t){return S(t.replace(/[^0-9A-Za-z\/+=]*/g,""))}function jr(t,e){return"-----BEGIN "+e+"-----\r\n"+Br(t)+"\r\n-----END "+e+"-----\r\n"}function Mr(t,e){if(-1==t.indexOf("-----BEGIN "))throw"can't find PEM header: "+e;return Or(t=void 0!==e?(t=t.replace(new RegExp("^[^]*-----BEGIN "+e+"-----"),"")).replace(new RegExp("-----END "+e+"-----[^]*$"),""):(t=t.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function Hr(t){var e,r,n,i,o,s,a,u,c,h,l;if(l=t.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return u=l[1],e=parseInt(u),2===u.length&&(50<=e&&e<100?e=1900+e:0<=e&&e<50&&(e=2e3+e)),r=parseInt(l[2])-1,n=parseInt(l[3]),i=parseInt(l[4]),o=parseInt(l[5]),s=parseInt(l[6]),a=0,""!==(c=l[7])&&(h=(c.substr(1)+"00").substr(0,3),a=parseInt(h)),Date.UTC(e,r,n,i,o,s,a);throw"unsupported zulu format: "+t}function Vr(t){return~~(Hr(t)/1e3)}function Kr(t){return t.replace(/%/g,"")}function qr(t){return t.replace(/(..)/g,"%$1")}function Jr(t){var e="malformed IPv6 address";if(!t.match(/^[0-9A-Fa-f:]+$/))throw e;var r=(t=t.toLowerCase()).split(":").length-1;if(r<2)throw e;var n=":".repeat(7-r+2),i=(t=t.replace("::",n)).split(":");if(8!=i.length)throw e;for(var o=0;o<8;o++)i[o]=("0000"+i[o]).slice(-4);return i.join("")}function Wr(t){if(!t.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var e=(t=t.toLowerCase()).match(/.{1,4}/g),r=0;r<8;r++)e[r]=e[r].replace(/^0+/,""),""==e[r]&&(e[r]="0");var n=(t=":"+e.join(":")+":").match(/:(0:){2,}/g);if(null===n)return t.slice(1,-1);var i="";for(r=0;r<n.length;r++)n[r].length>i.length&&(i=n[r]);return(t=t.replace(i,"::")).slice(1,-1)}function zr(t){var e="malformed hex value";if(!t.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw e;if(8!=t.length)return 32==t.length?Wr(t):t;try{return parseInt(t.substr(0,2),16)+"."+parseInt(t.substr(2,2),16)+"."+parseInt(t.substr(4,2),16)+"."+parseInt(t.substr(6,2),16)}catch(t){throw e}}function Yr(t){return t.match(/.{4}/g).map((function e(t){var e=parseInt(t.substr(0,2),16),r=parseInt(t.substr(2),16);if(0==e&r<128)return String.fromCharCode(r);if(e<8){var n=128|63&r;return Dr((192|(7&e)<<3|(192&r)>>6).toString(16)+n.toString(16))}n=128|(15&e)<<2|(192&r)>>6;var i=128|63&r;return Dr((224|(240&e)>>4).toString(16)+n.toString(16)+i.toString(16))})).join("")}function Gr(t){for(var e=encodeURIComponent(t),r="",n=0;n<e.length;n++)"%"==e[n]?(r+=e.substr(n,3),n+=2):r=r+"%"+kr(e[n]);return r}function Xr(t){return!(t.length%2!=0||!t.match(/^[0-9a-f]+$/)&&!t.match(/^[0-9A-F]+$/))}function $r(t){return t.length%2==1?"0"+t:t.substr(0,1)>"7"?"00"+t:t}Fr.getLblen=function(t,e){if("8"!=t.substr(e+2,1))return 1;var r=parseInt(t.substr(e+3,1));return 0==r?-1:0<r&&r<10?r+1:-2},Fr.getL=function(t,e){var r=Fr.getLblen(t,e);return r<1?"":t.substr(e+2,2*r)},Fr.getVblen=function(t,e){var r;return""==(r=Fr.getL(t,e))?-1:("8"===r.substr(0,1)?new w(r.substr(2),16):new w(r,16)).intValue()},Fr.getVidx=function(t,e){var r=Fr.getLblen(t,e);return r<0?r:e+2*(r+1)},Fr.getV=function(t,e){var r=Fr.getVidx(t,e),n=Fr.getVblen(t,e);return t.substr(r,2*n)},Fr.getTLV=function(t,e){return t.substr(e,2)+Fr.getL(t,e)+Fr.getV(t,e)},Fr.getTLVblen=function(t,e){return 2+2*Fr.getLblen(t,e)+2*Fr.getVblen(t,e)},Fr.getNextSiblingIdx=function(t,e){return Fr.getVidx(t,e)+2*Fr.getVblen(t,e)},Fr.getChildIdx=function(t,e){var r,n,i,o=Fr,s=[];r=o.getVidx(t,e),n=2*o.getVblen(t,e),"03"==t.substr(e,2)&&(r+=2,n-=2),i=0;for(var a=r;i<=n;){var u=o.getTLVblen(t,a);if((i+=u)<=n&&s.push(a),a+=u,i>=n)break}return s},Fr.getNthChildIdx=function(t,e,r){return Fr.getChildIdx(t,e)[r]},Fr.getIdxbyList=function(t,e,r,n){var i,o,s=Fr;return 0==r.length?void 0!==n&&t.substr(e,2)!==n?-1:e:(i=r.shift())>=(o=s.getChildIdx(t,e)).length?-1:s.getIdxbyList(t,o[i],r,n)},Fr.getIdxbyListEx=function(t,e,r,n){var i,o,s=Fr;if(0==r.length)return void 0!==n&&t.substr(e,2)!==n?-1:e;i=r.shift(),o=s.getChildIdx(t,e);for(var a=0,u=0;u<o.length;u++){var c=t.substr(o[u],2);if("number"==typeof i&&!s.isContextTag(c)&&a==i||"string"==typeof i&&s.isContextTag(c,i))return s.getIdxbyListEx(t,o[u],r,n);s.isContextTag(c)||a++}return-1},Fr.getTLVbyList=function(t,e,r,n){var i=Fr,o=i.getIdxbyList(t,e,r,n);return-1==o||o>=t.length?null:i.getTLV(t,o)},Fr.getTLVbyListEx=function(t,e,r,n){var i=Fr,o=i.getIdxbyListEx(t,e,r,n);return-1==o?null:i.getTLV(t,o)},Fr.getVbyList=function(t,e,r,n,i){var o,s,a=Fr;return-1==(o=a.getIdxbyList(t,e,r,n))||o>=t.length?null:(s=a.getV(t,o),!0===i&&(s=s.substr(2)),s)},Fr.getVbyListEx=function(t,e,r,n,i){var o,s,a=Fr;return-1==(o=a.getIdxbyListEx(t,e,r,n))?null:(s=a.getV(t,o),"03"==t.substr(o,2)&&!1!==i&&(s=s.substr(2)),s)},Fr.getInt=function(t,e,r){null==r&&(r=-1);try{var n=t.substr(e,2);if("02"!=n&&"03"!=n)return r;var i=Fr.getV(t,e);return"02"==n?parseInt(i,16):function o(t){try{var e=t.substr(0,2);if("00"==e)return parseInt(t.substr(2),16);var r=parseInt(e,16),n=t.substr(2),i=parseInt(n,16).toString(2);return"0"==i&&(i="00000000"),i=i.slice(0,0-r),parseInt(i,2)}catch(t){return-1}}(i)}catch(t){return r}},Fr.getOID=function(t,e,r){null==r&&(r=null);try{return"06"!=t.substr(e,2)?r:function n(t){if(!Xr(t))return null;try{var e=[],r=t.substr(0,2),n=parseInt(r,16);e[0]=new String(Math.floor(n/40)),e[1]=new String(n%40);for(var i=t.substr(2),o=[],s=0;s<i.length/2;s++)o.push(parseInt(i.substr(2*s,2),16));var a=[],u="";for(s=0;s<o.length;s++)128&o[s]?u+=Qr((127&o[s]).toString(2),7):(u+=Qr((127&o[s]).toString(2),7),a.push(new String(parseInt(u,2))),u="");var c=e.join(".");return a.length>0&&(c=c+"."+a.join(".")),c}catch(t){return null}}(Fr.getV(t,e))}catch(t){return r}},Fr.getOIDName=function(t,e,r){null==r&&(r=null);try{var n=Fr.getOID(t,e,r);if(n==r)return r;var i=Sr.asn1.x509.OID.oid2name(n);return""==i?n:i}catch(t){return r}},Fr.getString=function(t,e,r){null==r&&(r=null);try{return Lr(Fr.getV(t,e))}catch(t){return r}},Fr.hextooidstr=function(t){var e=function t(e,r){return e.length>=r?e:new Array(r-e.length+1).join("0")+e},r=[],n=t.substr(0,2),i=parseInt(n,16);r[0]=new String(Math.floor(i/40)),r[1]=new String(i%40);for(var o=t.substr(2),s=[],a=0;a<o.length/2;a++)s.push(parseInt(o.substr(2*a,2),16));var u=[],c="";for(a=0;a<s.length;a++)128&s[a]?c+=e((127&s[a]).toString(2),7):(c+=e((127&s[a]).toString(2),7),u.push(new String(parseInt(c,2))),c="");var h=r.join(".");return u.length>0&&(h=h+"."+u.join(".")),h},Fr.dump=function(t,e,r,n){var i=Fr,o=i.getV,s=i.dump,a=i.getChildIdx,u=t;t instanceof Sr.asn1.ASN1Object&&(u=t.getEncodedHex());var c=function t(e,r){return e.length<=2*r?e:e.substr(0,r)+"..(total "+e.length/2+"bytes).."+e.substr(e.length-r,r)};void 0===e&&(e={ommit_long_octet:32}),void 0===r&&(r=0),void 0===n&&(n="");var h,l=e.ommit_long_octet;if("01"==(h=u.substr(r,2)))return"00"==(f=o(u,r))?n+"BOOLEAN FALSE\n":n+"BOOLEAN TRUE\n";if("02"==h)return n+"INTEGER "+c(f=o(u,r),l)+"\n";if("03"==h){var f=o(u,r);if(i.isASN1HEX(f.substr(2))){var g=n+"BITSTRING, encapsulates\n";return g+=s(f.substr(2),e,0,n+"  ")}return n+"BITSTRING "+c(f,l)+"\n"}if("04"==h){f=o(u,r);if(i.isASN1HEX(f)){g=n+"OCTETSTRING, encapsulates\n";return g+=s(f,e,0,n+"  ")}return n+"OCTETSTRING "+c(f,l)+"\n"}if("05"==h)return n+"NULL\n";if("06"==h){var d=o(u,r),p=Sr.asn1.ASN1Util.oidHexToInt(d),v=Sr.asn1.x509.OID.oid2name(p),y=p.replace(/\./g," ");return""!=v?n+"ObjectIdentifier "+v+" ("+y+")\n":n+"ObjectIdentifier ("+y+")\n"}if("0a"==h)return n+"ENUMERATED "+parseInt(o(u,r))+"\n";if("0c"==h)return n+"UTF8String '"+Dr(o(u,r))+"'\n";if("13"==h)return n+"PrintableString '"+Dr(o(u,r))+"'\n";if("14"==h)return n+"TeletexString '"+Dr(o(u,r))+"'\n";if("16"==h)return n+"IA5String '"+Dr(o(u,r))+"'\n";if("17"==h)return n+"UTCTime "+Dr(o(u,r))+"\n";if("18"==h)return n+"GeneralizedTime "+Dr(o(u,r))+"\n";if("1a"==h)return n+"VisualString '"+Dr(o(u,r))+"'\n";if("1e"==h)return n+"BMPString '"+Yr(o(u,r))+"'\n";if("30"==h){if("3000"==u.substr(r,4))return n+"SEQUENCE {}\n";g=n+"SEQUENCE\n";var m=e;if((2==(b=a(u,r)).length||3==b.length)&&"06"==u.substr(b[0],2)&&"04"==u.substr(b[b.length-1],2)){v=i.oidname(o(u,b[0]));var _=JSON.parse(JSON.stringify(e));_.x509ExtName=v,m=_}for(var S=0;S<b.length;S++)g+=s(u,m,b[S],n+"  ");return g}if("31"==h){g=n+"SET\n";var b=a(u,r);for(S=0;S<b.length;S++)g+=s(u,e,b[S],n+"  ");return g}if(0!=(128&(h=parseInt(h,16)))){var w=31&h;if(0!=(32&h)){for(g=n+"["+w+"]\n",b=a(u,r),S=0;S<b.length;S++)g+=s(u,e,b[S],n+"  ");return g}f=o(u,r);if(Fr.isASN1HEX(f)){var g=n+"["+w+"]\n";return g+=s(f,e,0,n+"  ")}return("68747470"==f.substr(0,8)||"subjectAltName"===e.x509ExtName&&2==w)&&(f=Dr(f)),g=n+"["+w+"] "+f+"\n"}return n+"UNKNOWN("+h+") "+o(u,r)+"\n"},Fr.isContextTag=function(t,e){var r,n;t=t.toLowerCase();try{r=parseInt(t,16)}catch(t){return-1}if(void 0===e)return 128==(192&r);try{return null!=e.match(/^\[[0-9]+\]$/)&&(!((n=parseInt(e.substr(1,e.length-1),10))>31)&&(128==(192&r)&&(31&r)==n))}catch(t){return!1}},Fr.isASN1HEX=function(t){var e=Fr;if(t.length%2==1)return!1;var r=e.getVblen(t,0),n=t.substr(0,2),i=e.getL(t,0);return t.length-n.length-i.length==2*r},Fr.checkStrictDER=function(t,e,r,n,i){var o=Fr;if(void 0===r){if("string"!=typeof t)throw new Error("not hex string");if(t=t.toLowerCase(),!Sr.lang.String.isHex(t))throw new Error("not hex string");r=t.length,i=(n=t.length/2)<128?1:Math.ceil(n.toString(16))+1}if(o.getL(t,e).length>2*i)throw new Error("L of TLV too long: idx="+e);var s=o.getVblen(t,e);if(s>n)throw new Error("value of L too long than hex: idx="+e);var a=o.getTLV(t,e),u=a.length-2-o.getL(t,e).length;if(u!==2*s)throw new Error("V string length and L's value not the same:"+u+"/"+2*s);if(0===e&&t.length!=a.length)throw new Error("total length and TLV length unmatch:"+t.length+"!="+a.length);var c=t.substr(e,2);if("02"===c){var h=o.getVidx(t,e);if("00"==t.substr(h,2)&&t.charCodeAt(h+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(c,16)){for(var l=o.getVblen(t,e),f=0,g=o.getChildIdx(t,e),d=0;d<g.length;d++){f+=o.getTLV(t,g[d]).length,o.checkStrictDER(t,g[d],r,n,i)}if(2*l!=f)throw new Error("sum of children's TLV length and L unmatch: "+2*l+"!="+f)}},Fr.oidname=function(t){var e=Sr.asn1;Sr.lang.String.isHex(t)&&(t=e.ASN1Util.oidHexToInt(t));var r=e.x509.OID.oid2name(t);return""===r&&(r=t),r},void 0!==Sr&&Sr||(e.KJUR=Sr={}),void 0!==Sr.lang&&Sr.lang||(Sr.lang={}),Sr.lang.String=function(){},"function"==typeof t?(e.utf8tob64u=br=function e(r){return Pr(t.from(r,"utf8").toString("base64"))},e.b64utoutf8=wr=function e(r){return t.from(Cr(r),"base64").toString("utf8")}):(e.utf8tob64u=br=function t(e){return Tr(Kr(Gr(e)))},e.b64utoutf8=wr=function t(e){return decodeURIComponent(qr(Rr(e)))}),Sr.lang.String.isInteger=function(t){return!!t.match(/^[0-9]+$/)||!!t.match(/^-[0-9]+$/)},Sr.lang.String.isHex=function(t){return Xr(t)},Sr.lang.String.isBase64=function(t){return!(!(t=t.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||t.length%4!=0)},Sr.lang.String.isBase64URL=function(t){return!t.match(/[+/=]/)&&(t=Cr(t),Sr.lang.String.isBase64(t))},Sr.lang.String.isIntegerArray=function(t){return!!(t=t.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},Sr.lang.String.isPrintable=function(t){return null!==t.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},Sr.lang.String.isIA5=function(t){return null!==t.match(/^[\x20-\x21\x23-\x7f]*$/)},Sr.lang.String.isMail=function(t){return null!==t.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};var Qr=function t(e,r,n){return null==n&&(n="0"),e.length>=r?e:new Array(r-e.length+1).join(n)+e};function Zr(t,e){var r=function t(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e)}void 0!==Sr&&Sr||(e.KJUR=Sr={}),void 0!==Sr.crypto&&Sr.crypto||(Sr.crypto={}),Sr.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:v.algo.MD5,sha1:v.algo.SHA1,sha224:v.algo.SHA224,sha256:v.algo.SHA256,sha384:v.algo.SHA384,sha512:v.algo.SHA512,ripemd160:v.algo.RIPEMD160},this.getDigestInfoHex=function(t,e){if(void 0===this.DIGESTINFOHEAD[e])throw"alg not supported in Util.DIGESTINFOHEAD: "+e;return this.DIGESTINFOHEAD[e]+t},this.getPaddedDigestInfoHex=function(t,e,r){var n=this.getDigestInfoHex(t,e),i=r/4;if(n.length+22>i)throw"key is too short for SigAlg: keylen="+r+","+e;for(var o="0001",s="00"+n,a="",u=i-o.length-s.length,c=0;c<u;c+=2)a+="ff";return o+a+s},this.hashString=function(t,e){return new Sr.crypto.MessageDigest({alg:e}).digestString(t)},this.hashHex=function(t,e){return new Sr.crypto.MessageDigest({alg:e}).digestHex(t)},this.sha1=function(t){return this.hashString(t,"sha1")},this.sha256=function(t){return this.hashString(t,"sha256")},this.sha256Hex=function(t){return this.hashHex(t,"sha256")},this.sha512=function(t){return this.hashString(t,"sha512")},this.sha512Hex=function(t){return this.hashHex(t,"sha512")},this.isKey=function(t){return t instanceof Me||t instanceof Sr.crypto.DSA||t instanceof Sr.crypto.ECDSA}},Sr.crypto.Util.md5=function(t){return new Sr.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(t)},Sr.crypto.Util.ripemd160=function(t){return new Sr.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(t)},Sr.crypto.Util.SECURERANDOMGEN=new Be,Sr.crypto.Util.getRandomHexOfNbytes=function(t){var e=new Array(t);return Sr.crypto.Util.SECURERANDOMGEN.nextBytes(e),Ar(e)},Sr.crypto.Util.getRandomBigIntegerOfNbytes=function(t){return new w(Sr.crypto.Util.getRandomHexOfNbytes(t),16)},Sr.crypto.Util.getRandomHexOfNbits=function(t){var e=t%8,r=new Array((t-e)/8+1);return Sr.crypto.Util.SECURERANDOMGEN.nextBytes(r),r[0]=(255<<e&255^255)&r[0],Ar(r)},Sr.crypto.Util.getRandomBigIntegerOfNbits=function(t){return new w(Sr.crypto.Util.getRandomHexOfNbits(t),16)},Sr.crypto.Util.getRandomBigIntegerZeroToMax=function(t){for(var e=t.bitLength();;){var r=Sr.crypto.Util.getRandomBigIntegerOfNbits(e);if(-1!=t.compareTo(r))return r}},Sr.crypto.Util.getRandomBigIntegerMinToMax=function(t,e){var r=t.compareTo(e);if(1==r)throw"biMin is greater than biMax";if(0==r)return t;var n=e.subtract(t);return Sr.crypto.Util.getRandomBigIntegerZeroToMax(n).add(t)},Sr.crypto.MessageDigest=function(t){this.setAlgAndProvider=function(t,e){if(null!==(t=Sr.crypto.MessageDigest.getCanonicalAlgName(t))&&void 0===e&&(e=Sr.crypto.Util.DEFAULTPROVIDER[t]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(t)&&"cryptojs"==e){try{this.md=Sr.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[t].create()}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=v.enc.Hex.parse(t);this.md.update(e)},this.digest=function(){return this.md.finalize().toString(v.enc.Hex)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}if(-1!=":sha256:".indexOf(t)&&"sjcl"==e){try{this.md=new sjcl.hash.sha256}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=sjcl.codec.hex.toBits(t);this.md.update(e)},this.digest=function(){var t=this.md.finalize();return sjcl.codec.hex.fromBits(t)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==t&&void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=Sr.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},Sr.crypto.MessageDigest.getCanonicalAlgName=function(t){return"string"==typeof t&&(t=(t=t.toLowerCase()).replace(/-/,"")),t},Sr.crypto.MessageDigest.getHashLength=function(t){var e=Sr.crypto.MessageDigest,r=e.getCanonicalAlgName(t);if(void 0===e.HASHLENGTH[r])throw"not supported algorithm: "+t;return e.HASHLENGTH[r]},Sr.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},Sr.crypto.Mac=function(t){this.setAlgAndProvider=function(t,e){if(null==(t=t.toLowerCase())&&(t="hmacsha1"),"hmac"!=(t=t.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+t;void 0===e&&(e=Sr.crypto.Util.DEFAULTPROVIDER[t]),this.algProv=t+"/"+e;var r=t.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(r)&&"cryptojs"==e){try{var n=Sr.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[r];this.mac=v.algo.HMAC.create(n,this.pass)}catch(t){throw"setAlgAndProvider hash alg set fail hashAlg="+r+"/"+t}this.updateString=function(t){this.mac.update(t)},this.updateHex=function(t){var e=v.enc.Hex.parse(t);this.mac.update(e)},this.doFinal=function(){return this.mac.finalize().toString(v.enc.Hex)},this.doFinalString=function(t){return this.updateString(t),this.doFinal()},this.doFinalHex=function(t){return this.updateHex(t),this.doFinal()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(t){if("string"==typeof t){var e=t;return t.length%2!=1&&t.match(/^[0-9A-Fa-f]+$/)||(e=Nr(t)),void(this.pass=v.enc.Hex.parse(e))}if("object"!=(void 0===t?"undefined":g(t)))throw"KJUR.crypto.Mac unsupported password type: "+t;e=null;if(void 0!==t.hex){if(t.hex.length%2!=0||!t.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+t.hex;e=t.hex}if(void 0!==t.utf8&&(e=Ir(t.utf8)),void 0!==t.rstr&&(e=Nr(t.rstr)),void 0!==t.b64&&(e=S(t.b64)),void 0!==t.b64u&&(e=Rr(t.b64u)),null==e)throw"KJUR.crypto.Mac unsupported password type: "+t;this.pass=v.enc.Hex.parse(e)},void 0!==t&&(void 0!==t.pass&&this.setPassword(t.pass),void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=Sr.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},Sr.crypto.Signature=function(t){var e=null;if(this._setAlgNames=function(){var t=this.algName.match(/^(.+)with(.+)$/);t&&(this.mdAlgName=t[1].toLowerCase(),this.pubkeyAlgName=t[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(t,e){for(var r="",n=e/4-t.length,i=0;i<n;i++)r+="0";return r+t},this.setAlgAndProvider=function(t,e){if(this._setAlgNames(),"cryptojs/jsrsa"!=e)throw new Error("provider not supported: "+e);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new Sr.crypto.MessageDigest({alg:this.mdAlgName})}catch(t){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+t)}this.init=function(t,e){var r=null;try{r=void 0===e?tn.getKey(t):tn.getKey(t,e)}catch(t){throw"init failed:"+t}if(!0===r.isPrivate)this.prvKey=r,this.state="SIGN";else{if(!0!==r.isPublic)throw"init failed.:"+r;this.pubKey=r,this.state="VERIFY"}},this.updateString=function(t){this.md.updateString(t)},this.updateHex=function(t){this.md.updateHex(t)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==Sr.crypto.ECDSA&&(this.prvKey=new Sr.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof Me&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof Me&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof Sr.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof Sr.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(t){return this.updateString(t),this.sign()},this.signHex=function(t){return this.updateHex(t),this.sign()},this.verify=function(t){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==Sr.crypto.ECDSA&&(this.pubKey=new Sr.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof Me&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,t,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof Me&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==Sr.crypto.ECDSA&&this.pubKey instanceof Sr.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==Sr.crypto.DSA&&this.pubKey instanceof Sr.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(t,e){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(t){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(t){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(t){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(t){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=t,void 0!==t&&(void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov?this.provName=Sr.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=t.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==t.psssaltlen&&(this.pssSaltLen=t.psssaltlen),void 0!==t.prvkeypem)){if(void 0!==t.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{e=tn.getKey(t.prvkeypem);this.init(e)}catch(t){throw"fatal error to load pem private key: "+t}}},Sr.crypto.Cipher=function(t){},Sr.crypto.Cipher.encrypt=function(t,e,r){if(e instanceof Me&&e.isPublic){var n=Sr.crypto.Cipher.getAlgByKeyAndName(e,r);if("RSA"===n)return e.encrypt(t);if("RSAOAEP"===n)return e.encryptOAEP(t,"sha1");var i=n.match(/^RSAOAEP(\d+)$/);if(null!==i)return e.encryptOAEP(t,"sha"+i[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.encrypt: unsupported key or algorithm"},Sr.crypto.Cipher.decrypt=function(t,e,r){if(e instanceof Me&&e.isPrivate){var n=Sr.crypto.Cipher.getAlgByKeyAndName(e,r);if("RSA"===n)return e.decrypt(t);if("RSAOAEP"===n)return e.decryptOAEP(t,"sha1");var i=n.match(/^RSAOAEP(\d+)$/);if(null!==i)return e.decryptOAEP(t,"sha"+i[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.decrypt: unsupported key or algorithm"},Sr.crypto.Cipher.getAlgByKeyAndName=function(t,e){if(t instanceof Me){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(e))return e;if(null==e)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+e}throw"getAlgByKeyAndName: not supported algorithm name: "+e},Sr.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==Sr&&Sr||(e.KJUR=Sr={}),void 0!==Sr.crypto&&Sr.crypto||(Sr.crypto={}),Sr.crypto.ECDSA=function(t){var e=Error,r=w,n=Ve,i=Sr.crypto.ECDSA,o=Sr.crypto.ECParameterDB,s=i.getName,a=Fr,u=a.getVbyListEx,c=a.isASN1HEX,h=new Be;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(t){return new r(t.bitLength(),h).mod(t.subtract(r.ONE)).add(r.ONE)},this.setNamedCurve=function(t){this.ecparams=o.getByName(t),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=t},this.setPrivateKeyHex=function(t){this.isPrivate=!0,this.prvKeyHex=t},this.setPublicKeyHex=function(t){this.isPublic=!0,this.pubKeyHex=t},this.getPublicKeyXYHex=function(){var t=this.pubKeyHex;if("04"!==t.substr(0,2))throw"this method supports uncompressed format(04) only";var e=this.ecparams.keylen/4;if(t.length!==2+2*e)throw"malformed public key hex length";var r={};return r.x=t.substr(2,e),r.y=t.substr(2+e),r},this.getShortNISTPCurveName=function(){var t=this.curveName;return"secp256r1"===t||"NIST P-256"===t||"P-256"===t||"prime256v1"===t?"P-256":"secp384r1"===t||"NIST P-384"===t||"P-384"===t?"P-384":null},this.generateKeyPairHex=function(){var t=this.ecparams.n,e=this.getBigRandom(t),r=this.ecparams.G.multiply(e),n=r.getX().toBigInteger(),i=r.getY().toBigInteger(),o=this.ecparams.keylen/4,s=("0000000000"+e.toString(16)).slice(-o),a="04"+("0000000000"+n.toString(16)).slice(-o)+("0000000000"+i.toString(16)).slice(-o);return this.setPrivateKeyHex(s),this.setPublicKeyHex(a),{ecprvhex:s,ecpubhex:a}},this.signWithMessageHash=function(t){return this.signHex(t,this.prvKeyHex)},this.signHex=function(t,e){var n=new r(e,16),o=this.ecparams.n,s=new r(t.substring(0,this.ecparams.keylen/4),16);do{var a=this.getBigRandom(o),u=this.ecparams.G.multiply(a).getX().toBigInteger().mod(o)}while(u.compareTo(r.ZERO)<=0);var c=a.modInverse(o).multiply(s.add(n.multiply(u))).mod(o);return i.biRSSigToASN1Sig(u,c)},this.sign=function(t,e){var n=e,i=this.ecparams.n,o=r.fromByteArrayUnsigned(t);do{var s=this.getBigRandom(i),a=this.ecparams.G.multiply(s).getX().toBigInteger().mod(i)}while(a.compareTo(w.ZERO)<=0);var u=s.modInverse(i).multiply(o.add(n.multiply(a))).mod(i);return this.serializeSig(a,u)},this.verifyWithMessageHash=function(t,e){return this.verifyHex(t,e,this.pubKeyHex)},this.verifyHex=function(t,e,o){try{var s,a,u=i.parseSigHex(e);s=u.r,a=u.s;var c=n.decodeFromHex(this.ecparams.curve,o),h=new r(t.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(h,s,a,c)}catch(t){return!1}},this.verify=function(t,e,i){var o,s,a;if(Bitcoin.Util.isArray(e)){var u=this.parseSig(e);o=u.r,s=u.s}else{if("object"!==(void 0===e?"undefined":g(e))||!e.r||!e.s)throw"Invalid value for signature";o=e.r,s=e.s}if(i instanceof Ve)a=i;else{if(!Bitcoin.Util.isArray(i))throw"Invalid format for pubkey value, must be byte array or ECPointFp";a=n.decodeFrom(this.ecparams.curve,i)}var c=r.fromByteArrayUnsigned(t);return this.verifyRaw(c,o,s,a)},this.verifyRaw=function(t,e,n,i){var o=this.ecparams.n,s=this.ecparams.G;if(e.compareTo(r.ONE)<0||e.compareTo(o)>=0)return!1;if(n.compareTo(r.ONE)<0||n.compareTo(o)>=0)return!1;var a=n.modInverse(o),u=t.multiply(a).mod(o),c=e.multiply(a).mod(o);return s.multiply(u).add(i.multiply(c)).getX().toBigInteger().mod(o).equals(e)},this.serializeSig=function(t,e){var r=t.toByteArraySigned(),n=e.toByteArraySigned(),i=[];return i.push(2),i.push(r.length),(i=i.concat(r)).push(2),i.push(n.length),(i=i.concat(n)).unshift(i.length),i.unshift(48),i},this.parseSig=function(t){var e;if(48!=t[0])throw new Error("Signature not a valid DERSequence");if(2!=t[e=2])throw new Error("First element in signature must be a DERInteger");var n=t.slice(e+2,e+2+t[e+1]);if(2!=t[e+=2+t[e+1]])throw new Error("Second element in signature must be a DERInteger");var i=t.slice(e+2,e+2+t[e+1]);return e+=2+t[e+1],{r:r.fromByteArrayUnsigned(n),s:r.fromByteArrayUnsigned(i)}},this.parseSigCompact=function(t){if(65!==t.length)throw"Signature has the wrong length";var e=t[0]-27;if(e<0||e>7)throw"Invalid signature type";var n=this.ecparams.n;return{r:r.fromByteArrayUnsigned(t.slice(1,33)).mod(n),s:r.fromByteArrayUnsigned(t.slice(33,65)).mod(n),i:e}},this.readPKCS5PrvKeyHex=function(t){if(!1===c(t))throw new Error("not ASN.1 hex string");var e,r,n;try{e=u(t,0,["[0]",0],"06"),r=u(t,0,[1],"04");try{n=u(t,0,["[1]",0],"03")}catch(t){}}catch(t){throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=s(e),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n),this.setPrivateKeyHex(r),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(t){if(!1===c(t))throw new e("not ASN.1 hex string");var r,n,i;try{u(t,0,[1,0],"06"),r=u(t,0,[1,1],"06"),n=u(t,0,[2,0,1],"04");try{i=u(t,0,[2,0,"[1]",0],"03")}catch(t){}}catch(t){throw new e("malformed PKCS#8 plain ECC private key")}if(this.curveName=s(r),void 0===this.curveName)throw new e("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(i),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PubKeyHex=function(t){if(!1===c(t))throw new e("not ASN.1 hex string");var r,n;try{u(t,0,[0,0],"06"),r=u(t,0,[0,1],"06"),n=u(t,0,[1],"03")}catch(t){throw new e("malformed PKCS#8 ECC public key")}if(this.curveName=s(r),null===this.curveName)throw new e("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(n)},this.readCertPubKeyHex=function(t,r){if(!1===c(t))throw new e("not ASN.1 hex string");var n,i;try{n=u(t,0,[0,5,0,1],"06"),i=u(t,0,[0,5,1],"03")}catch(t){throw new e("malformed X.509 certificate ECC public key")}if(this.curveName=s(n),null===this.curveName)throw new e("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(i)},void 0!==t&&void 0!==t.curve&&(this.curveName=t.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==t&&(void 0!==t.prv&&this.setPrivateKeyHex(t.prv),void 0!==t.pub&&this.setPublicKeyHex(t.pub))},Sr.crypto.ECDSA.parseSigHex=function(t){var e=Sr.crypto.ECDSA.parseSigHexInHexRS(t);return{r:new w(e.r,16),s:new w(e.s,16)}},Sr.crypto.ECDSA.parseSigHexInHexRS=function(t){var e=Fr,r=e.getChildIdx,n=e.getV;if(e.checkStrictDER(t,0),"30"!=t.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var i=r(t,0);if(2!=i.length)throw new Error("signature shall have two elements");var o=i[0],s=i[1];if("02"!=t.substr(o,2))throw new Error("1st item not ASN.1 integer");if("02"!=t.substr(s,2))throw new Error("2nd item not ASN.1 integer");return{r:n(t,o),s:n(t,s)}},Sr.crypto.ECDSA.asn1SigToConcatSig=function(t){var e=Sr.crypto.ECDSA.parseSigHexInHexRS(t),r=e.r,n=e.s;if("00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),"00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),r.length%32==30&&(r="00"+r),n.length%32==30&&(n="00"+n),r.length%32!=0)throw"unknown ECDSA sig r length error";if(n.length%32!=0)throw"unknown ECDSA sig s length error";return r+n},Sr.crypto.ECDSA.concatSigToASN1Sig=function(t){if(t.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var e=t.substr(0,t.length/2),r=t.substr(t.length/2);return Sr.crypto.ECDSA.hexRSSigToASN1Sig(e,r)},Sr.crypto.ECDSA.hexRSSigToASN1Sig=function(t,e){var r=new w(t,16),n=new w(e,16);return Sr.crypto.ECDSA.biRSSigToASN1Sig(r,n)},Sr.crypto.ECDSA.biRSSigToASN1Sig=function(t,e){var r=Sr.asn1,n=new r.DERInteger({bigint:t}),i=new r.DERInteger({bigint:e});return new r.DERSequence({array:[n,i]}).getEncodedHex()},Sr.crypto.ECDSA.getName=function(t){return"2b8104001f"===t?"secp192k1":"2a8648ce3d030107"===t?"secp256r1":"2b8104000a"===t?"secp256k1":"2b81040021"===t?"secp224r1":"2b81040022"===t?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(t)?"secp256r1":-1!=="|secp256k1|".indexOf(t)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(t)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(t)?"secp384r1":null},void 0!==Sr&&Sr||(e.KJUR=Sr={}),void 0!==Sr.crypto&&Sr.crypto||(Sr.crypto={}),Sr.crypto.ECParameterDB=new function(){var t={},e={};function r(t){return new w(t,16)}this.getByName=function(r){var n=r;if(void 0!==e[n]&&(n=e[r]),void 0!==t[n])return t[n];throw"unregistered EC curve name: "+n},this.regist=function(n,i,o,s,a,u,c,h,l,f,g,d){t[n]={};var p=r(o),v=r(s),y=r(a),m=r(u),_=r(c),S=new Ke(p,v,y),b=S.decodePointHex("04"+h+l);t[n].name=n,t[n].keylen=i,t[n].curve=S,t[n].G=b,t[n].n=m,t[n].h=_,t[n].oid=g,t[n].info=d;for(var w=0;w<f.length;w++)e[f[w]]=n}},Sr.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),Sr.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),Sr.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),Sr.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),Sr.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),Sr.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),Sr.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),Sr.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),Sr.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),Sr.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var tn=function(){var t=function t(r,n,i){return e(v.AES,r,n,i)},e=function t(e,r,n,i){var o=v.enc.Hex.parse(r),s=v.enc.Hex.parse(n),a=v.enc.Hex.parse(i),u={};u.key=s,u.iv=a,u.ciphertext=o;var c=e.decrypt(u,s,{iv:a});return v.enc.Hex.stringify(c)},r=function t(e,r,i){return n(v.AES,e,r,i)},n=function t(e,r,n,i){var o=v.enc.Hex.parse(r),s=v.enc.Hex.parse(n),a=v.enc.Hex.parse(i),u=e.encrypt(o,s,{iv:a}),c=v.enc.Hex.parse(u.toString());return v.enc.Base64.stringify(c)},i={"AES-256-CBC":{proc:t,eproc:r,keylen:32,ivlen:16},"AES-192-CBC":{proc:t,eproc:r,keylen:24,ivlen:16},"AES-128-CBC":{proc:t,eproc:r,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function t(r,n,i){return e(v.TripleDES,r,n,i)},eproc:function t(e,r,i){return n(v.TripleDES,e,r,i)},keylen:24,ivlen:8},"DES-CBC":{proc:function t(r,n,i){return e(v.DES,r,n,i)},eproc:function t(e,r,i){return n(v.DES,e,r,i)},keylen:8,ivlen:8}},o=function t(e){var r={},n=e.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));n&&(r.cipher=n[1],r.ivsalt=n[2]);var i=e.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));i&&(r.type=i[1]);var o=-1,s=0;-1!=e.indexOf("\r\n\r\n")&&(o=e.indexOf("\r\n\r\n"),s=2),-1!=e.indexOf("\n\n")&&(o=e.indexOf("\n\n"),s=1);var a=e.indexOf("-----END");if(-1!=o&&-1!=a){var u=e.substring(o+2*s,a-s);u=u.replace(/\s+/g,""),r.data=u}return r},s=function t(e,r,n){for(var o=n.substring(0,16),s=v.enc.Hex.parse(o),a=v.enc.Utf8.parse(r),u=i[e].keylen+i[e].ivlen,c="",h=null;;){var l=v.algo.MD5.create();if(null!=h&&l.update(h),l.update(a),l.update(s),h=l.finalize(),(c+=v.enc.Hex.stringify(h)).length>=2*u)break}var f={};return f.keyhex=c.substr(0,2*i[e].keylen),f.ivhex=c.substr(2*i[e].keylen,2*i[e].ivlen),f},a=function t(e,r,n,o){var s=v.enc.Base64.parse(e),a=v.enc.Hex.stringify(s);return(0,i[r].proc)(a,n,o)};return{version:"1.0.0",parsePKCS5PEM:function t(e){return o(e)},getKeyAndUnusedIvByPasscodeAndIvsalt:function t(e,r,n){return s(e,r,n)},decryptKeyB64:function t(e,r,n,i){return a(e,r,n,i)},getDecryptedKeyHex:function t(e,r){var n=o(e),i=(n.type,n.cipher),u=n.ivsalt,c=n.data,h=s(i,r,u).keyhex;return a(c,i,h,u)},getEncryptedPKCS5PEMFromPrvKeyHex:function t(e,r,n,o,a){var u="";if(void 0!==o&&null!=o||(o="AES-256-CBC"),void 0===i[o])throw new Error("KEYUTIL unsupported algorithm: "+o);void 0!==a&&null!=a||(a=function t(e){var r=v.lib.WordArray.random(e);return v.enc.Hex.stringify(r)}(i[o].ivlen).toUpperCase());var c=function t(e,r,n,o){return(0,i[r].eproc)(e,n,o)}(r,o,s(o,n,a).keyhex,a);u="-----BEGIN "+e+" PRIVATE KEY-----\r\n";return u+="Proc-Type: 4,ENCRYPTED\r\n",u+="DEK-Info: "+o+","+a+"\r\n",u+="\r\n",u+=c.replace(/(.{64})/g,"$1\r\n"),u+="\r\n-----END "+e+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function t(e){var r=Fr,n=r.getChildIdx,i=r.getV,o={},s=n(e,0);if(2!=s.length)throw new Error("malformed format: SEQUENCE(0).items != 2: "+s.length);o.ciphertext=i(e,s[1]);var a=n(e,s[0]);if(2!=a.length)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+a.length);if("2a864886f70d01050d"!=i(e,a[0]))throw new Error("this only supports pkcs5PBES2");var u=n(e,a[1]);if(2!=a.length)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+u.length);var c=n(e,u[1]);if(2!=c.length)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+c.length);if("2a864886f70d0307"!=i(e,c[0]))throw"this only supports TripleDES";o.encryptionSchemeAlg="TripleDES",o.encryptionSchemeIV=i(e,c[1]);var h=n(e,u[0]);if(2!=h.length)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+h.length);if("2a864886f70d01050c"!=i(e,h[0]))throw new Error("this only supports pkcs5PBKDF2");var l=n(e,h[1]);if(l.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+l.length);o.pbkdf2Salt=i(e,l[0]);var f=i(e,l[1]);try{o.pbkdf2Iter=parseInt(f,16)}catch(t){throw new Error("malformed format pbkdf2Iter: "+f)}return o},getPBKDF2KeyHexFromParam:function t(e,r){var n=v.enc.Hex.parse(e.pbkdf2Salt),i=e.pbkdf2Iter,o=v.PBKDF2(r,n,{keySize:6,iterations:i});return v.enc.Hex.stringify(o)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function t(e,r){var n=Mr(e,"ENCRYPTED PRIVATE KEY"),i=this.parseHexOfEncryptedPKCS8(n),o=tn.getPBKDF2KeyHexFromParam(i,r),s={};s.ciphertext=v.enc.Hex.parse(i.ciphertext);var a=v.enc.Hex.parse(o),u=v.enc.Hex.parse(i.encryptionSchemeIV),c=v.TripleDES.decrypt(s,a,{iv:u});return v.enc.Hex.stringify(c)},getKeyFromEncryptedPKCS8PEM:function t(e,r){var n=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(e,r);return this.getKeyFromPlainPrivatePKCS8Hex(n)},parsePlainPrivatePKCS8Hex:function t(e){var r=Fr,n=r.getChildIdx,i=r.getV,o={algparam:null};if("30"!=e.substr(0,2))throw new Error("malformed plain PKCS8 private key(code:001)");var s=n(e,0);if(s.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if("30"!=e.substr(s[1],2))throw new Error("malformed PKCS8 private key(code:003)");var a=n(e,s[1]);if(2!=a.length)throw new Error("malformed PKCS8 private key(code:004)");if("06"!=e.substr(a[0],2))throw new Error("malformed PKCS8 private key(code:005)");if(o.algoid=i(e,a[0]),"06"==e.substr(a[1],2)&&(o.algparam=i(e,a[1])),"04"!=e.substr(s[2],2))throw new Error("malformed PKCS8 private key(code:006)");return o.keyidx=r.getVidx(e,s[2]),o},getKeyFromPlainPrivatePKCS8PEM:function t(e){var r=Mr(e,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(r)},getKeyFromPlainPrivatePKCS8Hex:function t(e){var r,n=this.parsePlainPrivatePKCS8Hex(e);if("2a864886f70d010101"==n.algoid)r=new Me;else if("2a8648ce380401"==n.algoid)r=new Sr.crypto.DSA;else{if("2a8648ce3d0201"!=n.algoid)throw new Error("unsupported private key algorithm");r=new Sr.crypto.ECDSA}return r.readPKCS8PrvKeyHex(e),r},_getKeyFromPublicPKCS8Hex:function t(e){var r,n=Fr.getVbyList(e,0,[0,0],"06");if("2a864886f70d010101"===n)r=new Me;else if("2a8648ce380401"===n)r=new Sr.crypto.DSA;else{if("2a8648ce3d0201"!==n)throw new Error("unsupported PKCS#8 public key hex");r=new Sr.crypto.ECDSA}return r.readPKCS8PubKeyHex(e),r},parsePublicRawRSAKeyHex:function t(e){var r=Fr,n=r.getChildIdx,i=r.getV,o={};if("30"!=e.substr(0,2))throw new Error("malformed RSA key(code:001)");var s=n(e,0);if(2!=s.length)throw new Error("malformed RSA key(code:002)");if("02"!=e.substr(s[0],2))throw new Error("malformed RSA key(code:003)");if(o.n=i(e,s[0]),"02"!=e.substr(s[1],2))throw new Error("malformed RSA key(code:004)");return o.e=i(e,s[1]),o},parsePublicPKCS8Hex:function t(e){var r=Fr,n=r.getChildIdx,i=r.getV,o={algparam:null},s=n(e,0);if(2!=s.length)throw new Error("outer DERSequence shall have 2 elements: "+s.length);var a=s[0];if("30"!=e.substr(a,2))throw new Error("malformed PKCS8 public key(code:001)");var u=n(e,a);if(2!=u.length)throw new Error("malformed PKCS8 public key(code:002)");if("06"!=e.substr(u[0],2))throw new Error("malformed PKCS8 public key(code:003)");if(o.algoid=i(e,u[0]),"06"==e.substr(u[1],2)?o.algparam=i(e,u[1]):"30"==e.substr(u[1],2)&&(o.algparam={},o.algparam.p=r.getVbyList(e,u[1],[0],"02"),o.algparam.q=r.getVbyList(e,u[1],[1],"02"),o.algparam.g=r.getVbyList(e,u[1],[2],"02")),"03"!=e.substr(s[1],2))throw new Error("malformed PKCS8 public key(code:004)");return o.key=i(e,s[1]).substr(2),o}}}();tn.getKey=function(t,e,r){var n=(v=Fr).getChildIdx,i=(v.getV,v.getVbyList),o=Sr.crypto,s=o.ECDSA,a=o.DSA,u=Me,c=Mr,h=tn;if(void 0!==u&&t instanceof u)return t;if(void 0!==s&&t instanceof s)return t;if(void 0!==a&&t instanceof a)return t;if(void 0!==t.curve&&void 0!==t.xy&&void 0===t.d)return new s({pub:t.xy,curve:t.curve});if(void 0!==t.curve&&void 0!==t.d)return new s({prv:t.d,curve:t.curve});if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(P=new u).setPublic(t.n,t.e),P;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.co&&void 0===t.qi)return(P=new u).setPrivateEx(t.n,t.e,t.d,t.p,t.q,t.dp,t.dq,t.co),P;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0===t.p)return(P=new u).setPrivate(t.n,t.e,t.d),P;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0===t.x)return(P=new a).setPublic(t.p,t.q,t.g,t.y),P;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0!==t.x)return(P=new a).setPrivate(t.p,t.q,t.g,t.y,t.x),P;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(P=new u).setPublic(Rr(t.n),Rr(t.e)),P;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.qi)return(P=new u).setPrivateEx(Rr(t.n),Rr(t.e),Rr(t.d),Rr(t.p),Rr(t.q),Rr(t.dp),Rr(t.dq),Rr(t.qi)),P;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d)return(P=new u).setPrivate(Rr(t.n),Rr(t.e),Rr(t.d)),P;if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0===t.d){var l=(k=new s({curve:t.crv})).ecparams.keylen/4,f="04"+("0000000000"+Rr(t.x)).slice(-l)+("0000000000"+Rr(t.y)).slice(-l);return k.setPublicKeyHex(f),k}if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0!==t.d){l=(k=new s({curve:t.crv})).ecparams.keylen/4,f="04"+("0000000000"+Rr(t.x)).slice(-l)+("0000000000"+Rr(t.y)).slice(-l);var g=("0000000000"+Rr(t.d)).slice(-l);return k.setPublicKeyHex(f),k.setPrivateKeyHex(g),k}if("pkcs5prv"===r){var d,p=t,v=Fr;if(9===(d=n(p,0)).length)(P=new u).readPKCS5PrvKeyHex(p);else if(6===d.length)(P=new a).readPKCS5PrvKeyHex(p);else{if(!(d.length>2&&"04"===p.substr(d[1],2)))throw new Error("unsupported PKCS#1/5 hexadecimal key");(P=new s).readPKCS5PrvKeyHex(p)}return P}if("pkcs8prv"===r)return P=h.getKeyFromPlainPrivatePKCS8Hex(t);if("pkcs8pub"===r)return h._getKeyFromPublicPKCS8Hex(t);if("x509pub"===r)return on.getPublicKeyFromCertHex(t);if(-1!=t.indexOf("-END CERTIFICATE-",0)||-1!=t.indexOf("-END X509 CERTIFICATE-",0)||-1!=t.indexOf("-END TRUSTED CERTIFICATE-",0))return on.getPublicKeyFromCertPEM(t);if(-1!=t.indexOf("-END PUBLIC KEY-")){var y=Mr(t,"PUBLIC KEY");return h._getKeyFromPublicPKCS8Hex(y)}if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var m=c(t,"RSA PRIVATE KEY");return h.getKey(m,null,"pkcs5prv")}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var _=i(R=c(t,"DSA PRIVATE KEY"),0,[1],"02"),S=i(R,0,[2],"02"),b=i(R,0,[3],"02"),F=i(R,0,[4],"02"),E=i(R,0,[5],"02");return(P=new a).setPrivate(new w(_,16),new w(S,16),new w(b,16),new w(F,16),new w(E,16)),P}if(-1!=t.indexOf("-END EC PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){m=c(t,"EC PRIVATE KEY");return h.getKey(m,null,"pkcs5prv")}if(-1!=t.indexOf("-END PRIVATE KEY-"))return h.getKeyFromPlainPrivatePKCS8PEM(t);if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var x=h.getDecryptedKeyHex(t,e),A=new Me;return A.readPKCS5PrvKeyHex(x),A}if(-1!=t.indexOf("-END EC PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var k,P=i(R=h.getDecryptedKeyHex(t,e),0,[1],"04"),C=i(R,0,[2,0],"06"),T=i(R,0,[3,0],"03").substr(2);if(void 0===Sr.crypto.OID.oidhex2name[C])throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+C);return(k=new s({curve:Sr.crypto.OID.oidhex2name[C]})).setPublicKeyHex(T),k.setPrivateKeyHex(P),k.isPublic=!1,k}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var R;_=i(R=h.getDecryptedKeyHex(t,e),0,[1],"02"),S=i(R,0,[2],"02"),b=i(R,0,[3],"02"),F=i(R,0,[4],"02"),E=i(R,0,[5],"02");return(P=new a).setPrivate(new w(_,16),new w(S,16),new w(b,16),new w(F,16),new w(E,16)),P}if(-1!=t.indexOf("-END ENCRYPTED PRIVATE KEY-"))return h.getKeyFromEncryptedPKCS8PEM(t,e);throw new Error("not supported argument")},tn.generateKeypair=function(t,e){if("RSA"==t){var r=e;(s=new Me).generate(r,"10001"),s.isPrivate=!0,s.isPublic=!0;var n=new Me,i=s.n.toString(16),o=s.e.toString(16);return n.setPublic(i,o),n.isPrivate=!1,n.isPublic=!0,(a={}).prvKeyObj=s,a.pubKeyObj=n,a}if("EC"==t){var s,a,u=e,c=new Sr.crypto.ECDSA({curve:u}).generateKeyPairHex();return(s=new Sr.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),s.setPrivateKeyHex(c.ecprvhex),s.isPrivate=!0,s.isPublic=!1,(n=new Sr.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),n.isPrivate=!1,n.isPublic=!0,(a={}).prvKeyObj=s,a.pubKeyObj=n,a}throw new Error("unknown algorithm: "+t)},tn.getPEM=function(t,e,r,n,i,o){var s=Sr,a=s.asn1,u=a.DERObjectIdentifier,c=a.DERInteger,h=a.ASN1Util.newObject,l=a.x509.SubjectPublicKeyInfo,f=s.crypto,g=f.DSA,d=f.ECDSA,p=Me;function y(t){return h({seq:[{int:0},{int:{bigint:t.n}},{int:t.e},{int:{bigint:t.d}},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.dmp1}},{int:{bigint:t.dmq1}},{int:{bigint:t.coeff}}]})}function m(t){return h({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a0",!0,{oid:{name:t.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]})}function _(t){return h({seq:[{int:0},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}},{int:{bigint:t.y}},{int:{bigint:t.x}}]})}if((void 0!==p&&t instanceof p||void 0!==g&&t instanceof g||void 0!==d&&t instanceof d)&&1==t.isPublic&&(void 0===e||"PKCS8PUB"==e))return jr(F=new l(t).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==e&&void 0!==p&&t instanceof p&&(void 0===r||null==r)&&1==t.isPrivate)return jr(F=y(t).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==e&&void 0!==d&&t instanceof d&&(void 0===r||null==r)&&1==t.isPrivate){var S=new u({name:t.curveName}).getEncodedHex(),b=m(t).getEncodedHex(),w="";return w+=jr(S,"EC PARAMETERS"),w+=jr(b,"EC PRIVATE KEY")}if("PKCS1PRV"==e&&void 0!==g&&t instanceof g&&(void 0===r||null==r)&&1==t.isPrivate)return jr(F=_(t).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==e&&void 0!==p&&t instanceof p&&void 0!==r&&null!=r&&1==t.isPrivate){var F=y(t).getEncodedHex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",F,r,n,o)}if("PKCS5PRV"==e&&void 0!==d&&t instanceof d&&void 0!==r&&null!=r&&1==t.isPrivate){F=m(t).getEncodedHex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",F,r,n,o)}if("PKCS5PRV"==e&&void 0!==g&&t instanceof g&&void 0!==r&&null!=r&&1==t.isPrivate){F=_(t).getEncodedHex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",F,r,n,o)}var E=function t(e,r){var n=x(e,r);return new h({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:n.pbkdf2Salt}},{int:n.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:n.encryptionSchemeIV}}]}]}]},{octstr:{hex:n.ciphertext}}]}).getEncodedHex()},x=function t(e,r){var n=v.lib.WordArray.random(8),i=v.lib.WordArray.random(8),o=v.PBKDF2(r,n,{keySize:6,iterations:100}),s=v.enc.Hex.parse(e),a=v.TripleDES.encrypt(s,o,{iv:i})+"",u={};return u.ciphertext=a,u.pbkdf2Salt=v.enc.Hex.stringify(n),u.pbkdf2Iter=100,u.encryptionSchemeAlg="DES-EDE3-CBC",u.encryptionSchemeIV=v.enc.Hex.stringify(i),u};if("PKCS8PRV"==e&&null!=p&&t instanceof p&&1==t.isPrivate){var A=y(t).getEncodedHex();F=h({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:A}}]}).getEncodedHex();return void 0===r||null==r?jr(F,"PRIVATE KEY"):jr(b=E(F,r),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==e&&void 0!==d&&t instanceof d&&1==t.isPrivate){A=new h({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]}).getEncodedHex(),F=h({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:t.curveName}}]},{octstr:{hex:A}}]}).getEncodedHex();return void 0===r||null==r?jr(F,"PRIVATE KEY"):jr(b=E(F,r),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==e&&void 0!==g&&t instanceof g&&1==t.isPrivate){A=new c({bigint:t.x}).getEncodedHex(),F=h({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}]},{octstr:{hex:A}}]}).getEncodedHex();return void 0===r||null==r?jr(F,"PRIVATE KEY"):jr(b=E(F,r),"ENCRYPTED PRIVATE KEY")}throw new Error("unsupported object nor format")},tn.getKeyFromCSRPEM=function(t){var e=Mr(t,"CERTIFICATE REQUEST");return tn.getKeyFromCSRHex(e)},tn.getKeyFromCSRHex=function(t){var e=tn.parseCSRHex(t);return tn.getKey(e.p8pubkeyhex,null,"pkcs8pub")},tn.parseCSRHex=function(t){var e=Fr,r=e.getChildIdx,n=e.getTLV,i={},o=t;if("30"!=o.substr(0,2))throw new Error("malformed CSR(code:001)");var s=r(o,0);if(s.length<1)throw new Error("malformed CSR(code:002)");if("30"!=o.substr(s[0],2))throw new Error("malformed CSR(code:003)");var a=r(o,s[0]);if(a.length<3)throw new Error("malformed CSR(code:004)");return i.p8pubkeyhex=n(o,a[2]),i},tn.getKeyID=function(t){var e=tn,r=Fr;"string"==typeof t&&-1!=t.indexOf("BEGIN ")&&(t=e.getKey(t));var n=Mr(e.getPEM(t)),i=r.getIdxbyList(n,0,[1]),o=r.getV(n,i).substring(2);return Sr.crypto.Util.hashHex(o,"sha1")},tn.getJWKFromKey=function(t){var e={};if(t instanceof Me&&t.isPrivate)return e.kty="RSA",e.n=Tr(t.n.toString(16)),e.e=Tr(t.e.toString(16)),e.d=Tr(t.d.toString(16)),e.p=Tr(t.p.toString(16)),e.q=Tr(t.q.toString(16)),e.dp=Tr(t.dmp1.toString(16)),e.dq=Tr(t.dmq1.toString(16)),e.qi=Tr(t.coeff.toString(16)),e;if(t instanceof Me&&t.isPublic)return e.kty="RSA",e.n=Tr(t.n.toString(16)),e.e=Tr(t.e.toString(16)),e;if(t instanceof Sr.crypto.ECDSA&&t.isPrivate){if("P-256"!==(n=t.getShortNISTPCurveName())&&"P-384"!==n)throw new Error("unsupported curve name for JWT: "+n);var r=t.getPublicKeyXYHex();return e.kty="EC",e.crv=n,e.x=Tr(r.x),e.y=Tr(r.y),e.d=Tr(t.prvKeyHex),e}if(t instanceof Sr.crypto.ECDSA&&t.isPublic){var n;if("P-256"!==(n=t.getShortNISTPCurveName())&&"P-384"!==n)throw new Error("unsupported curve name for JWT: "+n);r=t.getPublicKeyXYHex();return e.kty="EC",e.crv=n,e.x=Tr(r.x),e.y=Tr(r.y),e}throw new Error("not supported key object")},Me.getPosArrayOfChildrenFromHex=function(t){return Fr.getChildIdx(t,0)},Me.getHexValueArrayOfChildrenFromHex=function(t){var e,r=Fr.getV,n=r(t,(e=Me.getPosArrayOfChildrenFromHex(t))[0]),i=r(t,e[1]),o=r(t,e[2]),s=r(t,e[3]),a=r(t,e[4]),u=r(t,e[5]),c=r(t,e[6]),h=r(t,e[7]),l=r(t,e[8]);return(e=new Array).push(n,i,o,s,a,u,c,h,l),e},Me.prototype.readPrivateKeyFromPEMString=function(t){var e=Mr(t),r=Me.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])},Me.prototype.readPKCS5PrvKeyHex=function(t){var e=Me.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},Me.prototype.readPKCS8PrvKeyHex=function(t){var e,r,n,i,o,s,a,u,c=Fr,h=c.getVbyListEx;if(!1===c.isASN1HEX(t))throw new Error("not ASN.1 hex string");try{e=h(t,0,[2,0,1],"02"),r=h(t,0,[2,0,2],"02"),n=h(t,0,[2,0,3],"02"),i=h(t,0,[2,0,4],"02"),o=h(t,0,[2,0,5],"02"),s=h(t,0,[2,0,6],"02"),a=h(t,0,[2,0,7],"02"),u=h(t,0,[2,0,8],"02")}catch(t){throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(e,r,n,i,o,s,a,u)},Me.prototype.readPKCS5PubKeyHex=function(t){var e=Fr,r=e.getV;if(!1===e.isASN1HEX(t))throw new Error("keyHex is not ASN.1 hex string");var n=e.getChildIdx(t,0);if(2!==n.length||"02"!==t.substr(n[0],2)||"02"!==t.substr(n[1],2))throw new Error("wrong hex for PKCS#5 public key");var i=r(t,n[0]),o=r(t,n[1]);this.setPublic(i,o)},Me.prototype.readPKCS8PubKeyHex=function(t){var e=Fr;if(!1===e.isASN1HEX(t))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==e.getTLVbyListEx(t,0,[0,0]))throw new Error("not PKCS8 RSA public key");var r=e.getTLVbyListEx(t,0,[1,0]);this.readPKCS5PubKeyHex(r)},Me.prototype.readCertPubKeyHex=function(t,e){var r,n;(r=new on).readCertHex(t),n=r.getPublicKeyHex(),this.readPKCS8PubKeyHex(n)};new RegExp("[^0-9a-f]","gi");function en(t,e){for(var r="",n=e/4-t.length,i=0;i<n;i++)r+="0";return r+t}function rn(t,e,r){for(var n="",i=0;n.length<e;)n+=Lr(r(Nr(t+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])))),i+=1;return n}function nn(t){for(var e in Sr.crypto.Util.DIGESTINFOHEAD){var r=Sr.crypto.Util.DIGESTINFOHEAD[e],n=r.length;if(t.substring(0,n)==r)return[e,t.substring(n)]}return[]}function on(t){var e,r=Fr,n=r.getChildIdx,i=r.getV,o=r.getTLV,s=r.getVbyList,a=r.getVbyListEx,u=r.getTLVbyList,c=r.getTLVbyListEx,h=r.getIdxbyList,l=r.getIdxbyListEx,f=r.getVidx,g=r.getInt,d=r.oidname,p=r.hextooidstr,v=Mr;try{e=Sr.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch(t){}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(null===this.hex||0!==this.version)return this.version;var t=u(this.hex,0,[0,0]);if("a0"==t.substr(0,2)){var e=u(t,0,[0]),r=g(e,0);if(r<0||2<r)throw new Error("malformed version field");return this.version=r+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return a(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var t=c(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(t)},this.getAlgorithmIdentifierName=function(t){for(var r in e)if(t===e[r])return r;return d(a(t,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return u(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return u(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var t=s(this.hex,0,[0,4+this.foffset,0]);return t=t.replace(/(..)/g,"%$1"),t=decodeURIComponent(t)},this.getNotAfter=function(){var t=s(this.hex,0,[0,4+this.foffset,1]);return t=t.replace(/(..)/g,"%$1"),t=decodeURIComponent(t)},this.getPublicKeyHex=function(){return r.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return h(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var t=this.getPublicKeyIdx();return h(this.hex,t,[1,0],"30")},this.getPublicKey=function(){return tn.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var t=u(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(t)},this.getSignatureValueHex=function(){return s(this.hex,0,[2],"03",!0)},this.verifySignature=function(t){var e=this.getSignatureAlgorithmField(),r=this.getSignatureValueHex(),n=u(this.hex,0,[0],"30"),i=new Sr.crypto.Signature({alg:e});return i.init(t),i.updateHex(n),i.verify(r)},this.parseExt=function(t){var e,o,a;if(void 0===t){if(a=this.hex,3!==this.version)return-1;e=h(a,0,[0,7,0],"30"),o=n(a,e)}else{a=Mr(t);var u=h(a,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=i(a,u))return void(this.aExtInfo=new Array);e=h(a,0,[0,3,0,1,0],"30"),o=n(a,e),this.hex=a}this.aExtInfo=new Array;for(var c=0;c<o.length;c++){var l={critical:!1},g=0;3===n(a,o[c]).length&&(l.critical=!0,g=1),l.oid=r.hextooidstr(s(a,o[c],[0],"06"));var d=h(a,o[c],[1+g]);l.vidx=f(a,d),this.aExtInfo.push(l)}},this.getExtInfo=function(t){var e=this.aExtInfo,r=t;if(t.match(/^[0-9.]+$/)||(r=Sr.asn1.x509.OID.name2oid(t)),""!==r)for(var n=0;n<e.length;n++)if(e[n].oid===r)return e[n]},this.getExtBasicConstraints=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("basicConstraints");if(void 0===r)return;t=o(this.hex,r.vidx),e=r.critical}var n={extname:"basicConstraints"};if(e&&(n.critical=!0),"3000"===t)return n;if("30030101ff"===t)return n.cA=!0,n;if("30060101ff02"===t.substr(0,12)){var s=i(t,10),a=parseInt(s,16);return n.cA=!0,n.pathLen=a,n}throw new Error("hExtV parse error: "+t)},this.getExtKeyUsage=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("keyUsage");if(void 0===r)return;t=o(this.hex,r.vidx),e=r.critical}var n={extname:"keyUsage"};return e&&(n.critical=!0),n.names=this.getExtKeyUsageString(t).split(","),n},this.getExtKeyUsageBin=function(t){if(void 0===t){var e=this.getExtInfo("keyUsage");if(void 0===e)return"";t=o(this.hex,e.vidx)}if(8!=t.length&&10!=t.length)throw new Error("malformed key usage value: "+t);var r="000000000000000"+parseInt(t.substr(6),16).toString(2);return 8==t.length&&(r=r.slice(-8)),10==t.length&&(r=r.slice(-16)),""==(r=r.replace(/0+$/,""))&&(r="0"),r},this.getExtKeyUsageString=function(t){for(var e=this.getExtKeyUsageBin(t),r=new Array,n=0;n<e.length;n++)"1"==e.substr(n,1)&&r.push(on.KEYUSAGE_NAME[n]);return r.join(",")},this.getExtSubjectKeyIdentifier=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("subjectKeyIdentifier");if(void 0===r)return;t=o(this.hex,r.vidx),e=r.critical}var n={extname:"subjectKeyIdentifier"};e&&(n.critical=!0);var s=i(t,0);return n.kid={hex:s},n},this.getExtAuthorityKeyIdentifier=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("authorityKeyIdentifier");if(void 0===r)return;t=o(this.hex,r.vidx),e=r.critical}var s={extname:"authorityKeyIdentifier"};e&&(s.critical=!0);for(var a=n(t,0),u=0;u<a.length;u++){var c=t.substr(a[u],2);if("80"===c&&(s.kid={hex:i(t,a[u])}),"a1"===c){var h=o(t,a[u]),l=this.getGeneralNames(h);s.issuer=l[0].dn}"82"===c&&(s.sn={hex:i(t,a[u])})}return s},this.getExtExtKeyUsage=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("extKeyUsage");if(void 0===r)return;t=o(this.hex,r.vidx),e=r.critical}var s={extname:"extKeyUsage",array:[]};e&&(s.critical=!0);for(var a=n(t,0),u=0;u<a.length;u++)s.array.push(d(i(t,a[u])));return s},this.getExtExtKeyUsageName=function(){var t=this.getExtInfo("extKeyUsage");if(void 0===t)return t;var e=new Array,r=o(this.hex,t.vidx);if(""===r)return e;for(var s=n(r,0),a=0;a<s.length;a++)e.push(d(i(r,s[a])));return e},this.getExtSubjectAltName=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("subjectAltName");if(void 0===r)return;t=o(this.hex,r.vidx),e=r.critical}var n={extname:"subjectAltName",array:[]};return e&&(n.critical=!0),n.array=this.getGeneralNames(t),n},this.getExtIssuerAltName=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("issuerAltName");if(void 0===r)return;t=o(this.hex,r.vidx),e=r.critical}var n={extname:"issuerAltName",array:[]};return e&&(n.critical=!0),n.array=this.getGeneralNames(t),n},this.getGeneralNames=function(t){for(var e=n(t,0),r=[],i=0;i<e.length;i++){var s=this.getGeneralName(o(t,e[i]));void 0!==s&&r.push(s)}return r},this.getGeneralName=function(t){var e=t.substr(0,2),r=i(t,0),n=Lr(r);return"81"==e?{rfc822:n}:"82"==e?{dns:n}:"86"==e?{uri:n}:"87"==e?{ip:zr(r)}:"a4"==e?{dn:this.getX500Name(r)}:void 0},this.getExtSubjectAltName2=function(){var t,e,r,s=this.getExtInfo("subjectAltName");if(void 0===s)return s;for(var a=new Array,u=o(this.hex,s.vidx),c=n(u,0),h=0;h<c.length;h++)r=u.substr(c[h],2),t=i(u,c[h]),"81"===r&&(e=Dr(t),a.push(["MAIL",e])),"82"===r&&(e=Dr(t),a.push(["DNS",e])),"84"===r&&(e=on.hex2dn(t,0),a.push(["DN",e])),"86"===r&&(e=Dr(t),a.push(["URI",e])),"87"===r&&(e=zr(t),a.push(["IP",e]));return a},this.getExtCRLDistributionPoints=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("cRLDistributionPoints");if(void 0===r)return;t=o(this.hex,r.vidx),e=r.critical}var i={extname:"cRLDistributionPoints",array:[]};e&&(i.critical=!0);for(var s=n(t,0),a=0;a<s.length;a++){var u=o(t,s[a]);i.array.push(this.getDistributionPoint(u))}return i},this.getDistributionPoint=function(t){for(var e={},r=n(t,0),i=0;i<r.length;i++){var s=t.substr(r[i],2),a=o(t,r[i]);"a0"==s&&(e.dpname=this.getDistributionPointName(a))}return e},this.getDistributionPointName=function(t){for(var e={},r=n(t,0),i=0;i<r.length;i++){var s=t.substr(r[i],2),a=o(t,r[i]);"a0"==s&&(e.full=this.getGeneralNames(a))}return e},this.getExtCRLDistributionPointsURI=function(){var t=this.getExtInfo("cRLDistributionPoints");if(void 0===t)return t;for(var e=new Array,r=n(this.hex,t.vidx),i=0;i<r.length;i++)try{var o=Dr(s(this.hex,r[i],[0,0,0],"86"));e.push(o)}catch(t){}return e},this.getExtAIAInfo=function(){var t=this.getExtInfo("authorityInfoAccess");if(void 0===t)return t;for(var e={ocsp:[],caissuer:[]},r=n(this.hex,t.vidx),i=0;i<r.length;i++){var o=s(this.hex,r[i],[0],"06"),a=s(this.hex,r[i],[1],"86");"2b06010505073001"===o&&e.ocsp.push(Dr(a)),"2b06010505073002"===o&&e.caissuer.push(Dr(a))}return e},this.getExtAuthorityInfoAccess=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("authorityInfoAccess");if(void 0===r)return;t=o(this.hex,r.vidx),e=r.critical}var i={extname:"authorityInfoAccess",array:[]};e&&(i.critical=!0);for(var u=n(t,0),c=0;c<u.length;c++){var h=a(t,u[c],[0],"06"),l=Dr(s(t,u[c],[1],"86"));if("2b06010505073001"==h)i.array.push({ocsp:l});else{if("2b06010505073002"!=h)throw new Error("unknown method: "+h);i.array.push({caissuer:l})}}return i},this.getExtCertificatePolicies=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("certificatePolicies");if(void 0===r)return;t=o(this.hex,r.vidx),e=r.critical}var i={extname:"certificatePolicies",array:[]};e&&(i.critical=!0);for(var s=n(t,0),a=0;a<s.length;a++){var u=o(t,s[a]),c=this.getPolicyInformation(u);i.array.push(c)}return i},this.getPolicyInformation=function(t){var e={},r=s(t,0,[0],"06");e.policyoid=d(r);var i=l(t,0,[1],"30");if(-1!=i){e.array=[];for(var a=n(t,i),u=0;u<a.length;u++){var c=o(t,a[u]),h=this.getPolicyQualifierInfo(c);e.array.push(h)}}return e},this.getPolicyQualifierInfo=function(t){var e={},r=s(t,0,[0],"06");if("2b06010505070201"===r){var n=a(t,0,[1],"16");e.cps=Lr(n)}else if("2b06010505070202"===r){var i=u(t,0,[1],"30");e.unotice=this.getUserNotice(i)}return e},this.getUserNotice=function(t){for(var e={},r=n(t,0),i=0;i<r.length;i++){var s=o(t,r[i]);"30"!=s.substr(0,2)&&(e.exptext=this.getDisplayText(s))}return e},this.getDisplayText=function(t){var e={};return e.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[t.substr(0,2)],e.str=Lr(i(t,0)),e},this.getExtCRLNumber=function(t,e){var r={extname:"cRLNumber"};if(e&&(r.critical=!0),"02"==t.substr(0,2))return r.num={hex:i(t,0)},r;throw new Error("hExtV parse error: "+t)},this.getExtCRLReason=function(t,e){var r={extname:"cRLReason"};if(e&&(r.critical=!0),"0a"==t.substr(0,2))return r.code=parseInt(i(t,0),16),r;throw new Error("hExtV parse error: "+t)},this.getExtOcspNonce=function(t,e){var r={extname:"ocspNonce"};e&&(r.critical=!0);var n=i(t,0);return r.hex=n,r},this.getExtOcspNoCheck=function(t,e){var r={extname:"ocspNoCheck"};return e&&(r.critical=!0),r},this.getExtAdobeTimeStamp=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("adobeTimeStamp");if(void 0===r)return;t=o(this.hex,r.vidx),e=r.critical}var i={extname:"adobeTimeStamp"};e&&(i.critical=!0);var s=n(t,0);if(s.length>1){var a=o(t,s[1]),u=this.getGeneralName(a);null!=u.uri&&(i.uri=u.uri)}if(s.length>2){var c=o(t,s[2]);"0101ff"==c&&(i.reqauth=!0),"010100"==c&&(i.reqauth=!1)}return i},this.getX500NameRule=function(t){for(var e=null,r=[],n=0;n<t.length;n++)for(var i=t[n],o=0;o<i.length;o++)r.push(i[o]);for(n=0;n<r.length;n++){var s=r[n],a=s.ds,u=s.value,c=s.type;if(":"+a,"prn"!=a&&"utf8"!=a&&"ia5"!=a)return"mixed";if("ia5"==a){if("CN"!=c)return"mixed";if(Sr.lang.String.isMail(u))continue;return"mixed"}if("C"==c){if("prn"==a)continue;return"mixed"}if(":"+a,null==e)e=a;else if(e!==a)return"mixed"}return null==e?"prn":e},this.getX500Name=function(t){var e=this.getX500NameArray(t);return{array:e,str:this.dnarraytostr(e)}},this.getX500NameArray=function(t){for(var e=[],r=n(t,0),i=0;i<r.length;i++)e.push(this.getRDN(o(t,r[i])));return e},this.getRDN=function(t){for(var e=[],r=n(t,0),i=0;i<r.length;i++)e.push(this.getAttrTypeAndValue(o(t,r[i])));return e},this.getAttrTypeAndValue=function(t){var e={type:null,value:null,ds:null},r=n(t,0),i=s(t,r[0],[],"06"),o=s(t,r[1],[]),a=Sr.asn1.ASN1Util.oidHexToInt(i);return e.type=Sr.asn1.x509.OID.oid2atype(a),e.ds=this.HEX2STAG[t.substr(r[1],2)],"bmp"!=e.ds?e.value=Dr(o):e.value=Yr(o),e},this.readCertPEM=function(t){this.readCertHex(v(t))},this.readCertHex=function(t){this.hex=t,this.getVersion();try{h(this.hex,0,[0,7],"a3"),this.parseExt()}catch(t){}},this.getParam=function(){var t={};return t.version=this.getVersion(),t.serial={hex:this.getSerialNumberHex()},t.sigalg=this.getSignatureAlgorithmField(),t.issuer=this.getIssuer(),t.notbefore=this.getNotBefore(),t.notafter=this.getNotAfter(),t.subject=this.getSubject(),t.sbjpubkey=jr(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(t.ext=this.getExtParamArray()),t.sighex=this.getSignatureValueHex(),t},this.getExtParamArray=function(t){null==t&&(-1!=l(this.hex,0,[0,"[3]"])&&(t=c(this.hex,0,[0,"[3]",0],"30")));for(var e=[],r=n(t,0),i=0;i<r.length;i++){var s=o(t,r[i]),a=this.getExtParam(s);null!=a&&e.push(a)}return e},this.getExtParam=function(t){var e=n(t,0).length;if(2!=e&&3!=e)throw new Error("wrong number elements in Extension: "+e+" "+t);var r=p(s(t,0,[0],"06")),i=!1;3==e&&"0101ff"==u(t,0,[1])&&(i=!0);var o=u(t,0,[e-1,0]),a=void 0;if("2.5.29.14"==r?a=this.getExtSubjectKeyIdentifier(o,i):"2.5.29.15"==r?a=this.getExtKeyUsage(o,i):"2.5.29.17"==r?a=this.getExtSubjectAltName(o,i):"2.5.29.18"==r?a=this.getExtIssuerAltName(o,i):"2.5.29.19"==r?a=this.getExtBasicConstraints(o,i):"2.5.29.31"==r?a=this.getExtCRLDistributionPoints(o,i):"2.5.29.32"==r?a=this.getExtCertificatePolicies(o,i):"2.5.29.35"==r?a=this.getExtAuthorityKeyIdentifier(o,i):"2.5.29.37"==r?a=this.getExtExtKeyUsage(o,i):"1.3.6.1.5.5.7.1.1"==r?a=this.getExtAuthorityInfoAccess(o,i):"2.5.29.20"==r?a=this.getExtCRLNumber(o,i):"2.5.29.21"==r?a=this.getExtCRLReason(o,i):"1.3.6.1.5.5.7.48.1.2"==r?a=this.getExtOcspNonce(o,i):"1.3.6.1.5.5.7.48.1.5"==r?a=this.getExtOcspNoCheck(o,i):"1.2.840.113583.1.1.9.1"==r&&(a=this.getExtAdobeTimeStamp(o,i)),null!=a)return a;var c={extname:r,extn:o};return i&&(c.critical=!0),c},this.findExt=function(t,e){for(var r=0;r<t.length;r++)if(t[r].extname==e)return t[r];return null},this.updateExtCDPFullURI=function(t,e){var r=this.findExt(t,"cRLDistributionPoints");if(null!=r&&null!=r.array)for(var n=r.array,i=0;i<n.length;i++)if(null!=n[i].dpname&&null!=n[i].dpname.full)for(var o=n[i].dpname.full,s=0;s<o.length;s++){var a=o[i];null!=a.uri&&(a.uri=e)}},this.updateExtAIAOCSP=function(t,e){var r=this.findExt(t,"authorityInfoAccess");if(null!=r&&null!=r.array)for(var n=r.array,i=0;i<n.length;i++)null!=n[i].ocsp&&(n[i].ocsp=e)},this.updateExtAIACAIssuer=function(t,e){var r=this.findExt(t,"authorityInfoAccess");if(null!=r&&null!=r.array)for(var n=r.array,i=0;i<n.length;i++)null!=n[i].caissuer&&(n[i].caissuer=e)},this.dnarraytostr=function(t){return"/"+t.map((function(t){return function e(t){return t.map((function(t){return function e(t){return t.type+"="+t.value}(t).replace(/\+/,"\\+")})).join("+")}(t).replace(/\//,"\\/")})).join("/")},this.getInfo=function(){var t,e,r,n=function t(e){return JSON.stringify(e.array).replace(/[\[\]\{\}\"]/g,"")},i=function t(e){for(var r="",n=e.array,i=0;i<n.length;i++){var o=n[i];if(r+="    policy oid: "+o.policyoid+"\n",void 0!==o.array)for(var s=0;s<o.array.length;s++){var a=o.array[s];void 0!==a.cps&&(r+="    cps: "+a.cps+"\n")}}return r},o=function t(e){for(var r="",n=e.array,i=0;i<n.length;i++){var o=n[i];try{void 0!==o.dpname.full[0].uri&&(r+="    "+o.dpname.full[0].uri+"\n")}catch(t){}try{void 0!==o.dname.full[0].dn.hex&&(r+="    "+on.hex2dn(o.dpname.full[0].dn.hex)+"\n")}catch(t){}}return r},s=function t(e){for(var r="",n=e.array,i=0;i<n.length;i++){var o=n[i];void 0!==o.caissuer&&(r+="    caissuer: "+o.caissuer+"\n"),void 0!==o.ocsp&&(r+="    ocsp: "+o.ocsp+"\n")}return r};if(t="Basic Fields\n",t+="  serial number: "+this.getSerialNumberHex()+"\n",t+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",t+="  issuer: "+this.getIssuerString()+"\n",t+="  notBefore: "+this.getNotBefore()+"\n",t+="  notAfter: "+this.getNotAfter()+"\n",t+="  subject: "+this.getSubjectString()+"\n",t+="  subject public key info: \n",t+="    key algorithm: "+(e=this.getPublicKey()).type+"\n","RSA"===e.type&&(t+="    n="+$r(e.n.toString(16)).substr(0,16)+"...\n",t+="    e="+$r(e.e.toString(16))+"\n"),null!=(r=this.aExtInfo)){t+="X509v3 Extensions:\n";for(var a=0;a<r.length;a++){var u=r[a],c=Sr.asn1.x509.OID.oid2name(u.oid);""===c&&(c=u.oid);var h="";if(!0===u.critical&&(h="CRITICAL"),t+="  "+c+" "+h+":\n","basicConstraints"===c){var l=this.getExtBasicConstraints();void 0===l.cA?t+="    {}\n":(t+="    cA=true",void 0!==l.pathLen&&(t+=", pathLen="+l.pathLen),t+="\n")}else if("keyUsage"===c)t+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===c)t+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"===c){var f=this.getExtAuthorityKeyIdentifier();void 0!==f.kid&&(t+="    kid="+f.kid.hex+"\n")}else{if("extKeyUsage"===c)t+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n";else if("subjectAltName"===c)t+="    "+n(this.getExtSubjectAltName())+"\n";else if("cRLDistributionPoints"===c)t+=o(this.getExtCRLDistributionPoints());else if("authorityInfoAccess"===c)t+=s(this.getExtAuthorityInfoAccess());else"certificatePolicies"===c&&(t+=i(this.getExtCertificatePolicies()))}}}return t+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n",t+="signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof t&&(-1!=t.indexOf("-----BEGIN")?this.readCertPEM(t):Sr.lang.String.isHex(t)&&this.readCertHex(t))}Me.prototype.sign=function(t,e){var r=function t(r){return Sr.crypto.Util.hashString(r,e)}(t);return this.signWithMessageHash(r,e)},Me.prototype.signWithMessageHash=function(t,e){var r=Oe(Sr.crypto.Util.getPaddedDigestInfoHex(t,e,this.n.bitLength()),16);return en(this.doPrivate(r).toString(16),this.n.bitLength())},Me.prototype.signPSS=function(t,e,r){var n=function t(r){return Sr.crypto.Util.hashHex(r,e)}(Nr(t));return void 0===r&&(r=-1),this.signWithMessageHashPSS(n,e,r)},Me.prototype.signWithMessageHashPSS=function(t,e,r){var n,i=Lr(t),o=i.length,s=this.n.bitLength()-1,a=Math.ceil(s/8),u=function t(r){return Sr.crypto.Util.hashHex(r,e)};if(-1===r||void 0===r)r=o;else if(-2===r)r=a-o-2;else if(r<-2)throw new Error("invalid salt length");if(a<o+r+2)throw new Error("data too long");var c="";r>0&&(c=new Array(r),(new Be).nextBytes(c),c=String.fromCharCode.apply(String,c));var h=Lr(u(Nr("\0\0\0\0\0\0\0\0"+i+c))),l=[];for(n=0;n<a-r-o-2;n+=1)l[n]=0;var f=String.fromCharCode.apply(String,l)+""+c,g=rn(h,f.length,u),d=[];for(n=0;n<f.length;n+=1)d[n]=f.charCodeAt(n)^g.charCodeAt(n);var p=65280>>8*a-s&255;for(d[0]&=~p,n=0;n<o;n++)d.push(h.charCodeAt(n));return d.push(188),en(this.doPrivate(new w(d)).toString(16),this.n.bitLength())},Me.prototype.verify=function(t,e){if(null==(e=e.toLowerCase()).match(/^[0-9a-f]+$/))return!1;var r=Oe(e,16),n=this.n.bitLength();if(r.bitLength()>n)return!1;var i=this.doPublic(r).toString(16);if(i.length+3!=n/4)return!1;var o=nn(i.replace(/^1f+00/,""));if(0==o.length)return!1;var s=o[0];return o[1]==function t(e){return Sr.crypto.Util.hashString(e,s)}(t)},Me.prototype.verifyWithMessageHash=function(t,e){if(e.length!=Math.ceil(this.n.bitLength()/4))return!1;var r=Oe(e,16);if(r.bitLength()>this.n.bitLength())return 0;var n=nn(this.doPublic(r).toString(16).replace(/^1f+00/,""));if(0==n.length)return!1;n[0];return n[1]==t},Me.prototype.verifyPSS=function(t,e,r,n){var i=function t(e){return Sr.crypto.Util.hashHex(e,r)}(Nr(t));return void 0===n&&(n=-1),this.verifyWithMessageHashPSS(i,e,r,n)},Me.prototype.verifyWithMessageHashPSS=function(t,e,r,n){if(e.length!=Math.ceil(this.n.bitLength()/4))return!1;var i,o=new w(e,16),s=function t(e){return Sr.crypto.Util.hashHex(e,r)},a=Lr(t),u=a.length,c=this.n.bitLength()-1,h=Math.ceil(c/8);if(-1===n||void 0===n)n=u;else if(-2===n)n=h-u-2;else if(n<-2)throw new Error("invalid salt length");if(h<u+n+2)throw new Error("data too long");var l=this.doPublic(o).toByteArray();for(i=0;i<l.length;i+=1)l[i]&=255;for(;l.length<h;)l.unshift(0);if(188!==l[h-1])throw new Error("encoded message does not end in 0xbc");var f=(l=String.fromCharCode.apply(String,l)).substr(0,h-u-1),g=l.substr(f.length,u),d=65280>>8*h-c&255;if(0!=(f.charCodeAt(0)&d))throw new Error("bits beyond keysize not zero");var p=rn(g,f.length,s),v=[];for(i=0;i<f.length;i+=1)v[i]=f.charCodeAt(i)^p.charCodeAt(i);v[0]&=~d;var y=h-u-n-2;for(i=0;i<y;i+=1)if(0!==v[i])throw new Error("leftmost octets not zero");if(1!==v[y])throw new Error("0x01 marker not found");return g===Lr(s(Nr("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,v.slice(-n)))))},Me.SALT_LEN_HLEN=-1,Me.SALT_LEN_MAX=-2,Me.SALT_LEN_RECOVER=-2,on.hex2dn=function(t,e){void 0===e&&(e=0);var r=new on;Fr.getTLV(t,e);return r.getX500Name(t).str},on.hex2rdn=function(t,e){if(void 0===e&&(e=0),"31"!==t.substr(e,2))throw new Error("malformed RDN");for(var r=new Array,n=Fr.getChildIdx(t,e),i=0;i<n.length;i++)r.push(on.hex2attrTypeValue(t,n[i]));return(r=r.map((function(t){return t.replace("+","\\+")}))).join("+")},on.hex2attrTypeValue=function(t,e){var r=Fr,n=r.getV;if(void 0===e&&(e=0),"30"!==t.substr(e,2))throw new Error("malformed attribute type and value");var i=r.getChildIdx(t,e);2!==i.length||t.substr(i[0],2);var o=n(t,i[0]),s=Sr.asn1.ASN1Util.oidHexToInt(o);return Sr.asn1.x509.OID.oid2atype(s)+"="+Lr(n(t,i[1]))},on.getPublicKeyFromCertHex=function(t){var e=new on;return e.readCertHex(t),e.getPublicKey()},on.getPublicKeyFromCertPEM=function(t){var e=new on;return e.readCertPEM(t),e.getPublicKey()},on.getPublicKeyInfoPropOfCertPEM=function(t){var e,r,n=Fr.getVbyList,i={};return i.algparam=null,(e=new on).readCertPEM(t),r=e.getPublicKeyHex(),i.keyhex=n(r,0,[1],"03").substr(2),i.algoid=n(r,0,[0,0],"06"),"2a8648ce3d0201"===i.algoid&&(i.algparam=n(r,0,[0,1],"06")),i},on.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==Sr&&Sr||(e.KJUR=Sr={}),void 0!==Sr.jws&&Sr.jws||(Sr.jws={}),Sr.jws.JWS=function(){var t=Sr.jws.JWS.isSafeJSONString;this.parseJWS=function(e,r){if(void 0===this.parsedJWS||!r&&void 0===this.parsedJWS.sigvalH){var n=e.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==n)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var i=n[1],o=n[2],s=n[3],a=i+"."+o;if(this.parsedJWS={},this.parsedJWS.headB64U=i,this.parsedJWS.payloadB64U=o,this.parsedJWS.sigvalB64U=s,this.parsedJWS.si=a,!r){var u=Rr(s),c=Oe(u,16);this.parsedJWS.sigvalH=u,this.parsedJWS.sigvalBI=c}var h=wr(i),l=wr(o);if(this.parsedJWS.headS=h,this.parsedJWS.payloadS=l,!t(h,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+h}}},Sr.jws.JWS.sign=function(t,e,r,n,i){var o,s,a,u=Sr,c=u.jws.JWS,h=c.readSafeJSONString,l=c.isSafeJSONString,f=u.crypto,d=(f.ECDSA,f.Mac),p=f.Signature,v=JSON;if("string"!=typeof e&&"object"!=(void 0===e?"undefined":g(e)))throw"spHeader must be JSON string or object: "+e;if("object"==(void 0===e?"undefined":g(e))&&(s=e,o=v.stringify(s)),"string"==typeof e){if(!l(o=e))throw"JWS Head is not safe JSON string: "+o;s=h(o)}if(a=r,"object"==(void 0===r?"undefined":g(r))&&(a=v.stringify(r)),""!=t&&null!=t||void 0===s.alg||(t=s.alg),""!=t&&null!=t&&void 0===s.alg&&(s.alg=t,o=v.stringify(s)),t!==s.alg)throw"alg and sHeader.alg doesn't match: "+t+"!="+s.alg;var y=null;if(void 0===c.jwsalg2sigalg[t])throw"unsupported alg name: "+t;y=c.jwsalg2sigalg[t];var m=br(o)+"."+br(a),_="";if("Hmac"==y.substr(0,4)){if(void 0===n)throw"mac key shall be specified for HS* alg";var S=new d({alg:y,prov:"cryptojs",pass:n});S.updateString(m),_=S.doFinal()}else if(-1!=y.indexOf("withECDSA")){(w=new p({alg:y})).init(n,i),w.updateString(m);var b=w.sign();_=Sr.crypto.ECDSA.asn1SigToConcatSig(b)}else{var w;if("none"!=y)(w=new p({alg:y})).init(n,i),w.updateString(m),_=w.sign()}return m+"."+Tr(_)},Sr.jws.JWS.verify=function(t,e,r){var n,i=Sr,o=i.jws.JWS,s=o.readSafeJSONString,a=i.crypto,u=a.ECDSA,c=a.Mac,h=a.Signature;void 0!==g(Me)&&(n=Me);var l=t.split(".");if(3!==l.length)return!1;var f=l[0]+"."+l[1],d=Rr(l[2]),p=s(wr(l[0])),v=null,y=null;if(void 0===p.alg)throw"algorithm not specified in header";if((y=(v=p.alg).substr(0,2),null!=r&&"[object Array]"===Object.prototype.toString.call(r)&&r.length>0)&&-1==(":"+r.join(":")+":").indexOf(":"+v+":"))throw"algorithm '"+v+"' not accepted in the list";if("none"!=v&&null===e)throw"key shall be specified to verify.";if("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&(e=tn.getKey(e)),!("RS"!=y&&"PS"!=y||e instanceof n))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==y&&!(e instanceof u))throw"key shall be a ECDSA obj for ES* algs";var m=null;if(void 0===o.jwsalg2sigalg[p.alg])throw"unsupported alg name: "+v;if("none"==(m=o.jwsalg2sigalg[v]))throw"not supported";if("Hmac"==m.substr(0,4)){if(void 0===e)throw"hexadecimal key shall be specified for HMAC";var _=new c({alg:m,pass:e});return _.updateString(f),d==_.doFinal()}if(-1!=m.indexOf("withECDSA")){var S,b=null;try{b=u.concatSigToASN1Sig(d)}catch(t){return!1}return(S=new h({alg:m})).init(e),S.updateString(f),S.verify(b)}return(S=new h({alg:m})).init(e),S.updateString(f),S.verify(d)},Sr.jws.JWS.parse=function(t){var e,r,n,i=t.split("."),o={};if(2!=i.length&&3!=i.length)throw"malformed sJWS: wrong number of '.' splitted elements";return e=i[0],r=i[1],3==i.length&&(n=i[2]),o.headerObj=Sr.jws.JWS.readSafeJSONString(wr(e)),o.payloadObj=Sr.jws.JWS.readSafeJSONString(wr(r)),o.headerPP=JSON.stringify(o.headerObj,null,"  "),null==o.payloadObj?o.payloadPP=wr(r):o.payloadPP=JSON.stringify(o.payloadObj,null,"  "),void 0!==n&&(o.sigHex=Rr(n)),o},Sr.jws.JWS.verifyJWT=function(t,e,r){var n=Sr.jws,i=n.JWS,o=i.readSafeJSONString,s=i.inArray,a=i.includedArray,u=t.split("."),c=u[0],h=u[1],l=(Rr(u[2]),o(wr(c))),f=o(wr(h));if(void 0===l.alg)return!1;if(void 0===r.alg)throw"acceptField.alg shall be specified";if(!s(l.alg,r.alg))return!1;if(void 0!==f.iss&&"object"===g(r.iss)&&!s(f.iss,r.iss))return!1;if(void 0!==f.sub&&"object"===g(r.sub)&&!s(f.sub,r.sub))return!1;if(void 0!==f.aud&&"object"===g(r.aud))if("string"==typeof f.aud){if(!s(f.aud,r.aud))return!1}else if("object"==g(f.aud)&&!a(f.aud,r.aud))return!1;var d=n.IntDate.getNow();return void 0!==r.verifyAt&&"number"==typeof r.verifyAt&&(d=r.verifyAt),void 0!==r.gracePeriod&&"number"==typeof r.gracePeriod||(r.gracePeriod=0),!(void 0!==f.exp&&"number"==typeof f.exp&&f.exp+r.gracePeriod<d)&&(!(void 0!==f.nbf&&"number"==typeof f.nbf&&d<f.nbf-r.gracePeriod)&&(!(void 0!==f.iat&&"number"==typeof f.iat&&d<f.iat-r.gracePeriod)&&((void 0===f.jti||void 0===r.jti||f.jti===r.jti)&&!!i.verify(t,e,r.alg))))},Sr.jws.JWS.includedArray=function(t,e){var r=Sr.jws.JWS.inArray;if(null===t)return!1;if("object"!==(void 0===t?"undefined":g(t)))return!1;if("number"!=typeof t.length)return!1;for(var n=0;n<t.length;n++)if(!r(t[n],e))return!1;return!0},Sr.jws.JWS.inArray=function(t,e){if(null===e)return!1;if("object"!==(void 0===e?"undefined":g(e)))return!1;if("number"!=typeof e.length)return!1;for(var r=0;r<e.length;r++)if(e[r]==t)return!0;return!1},Sr.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},Sr.jws.JWS.isSafeJSONString=function(t,e,r){var n=null;try{return"object"!=(void 0===(n=_r(t))?"undefined":g(n))||n.constructor===Array?0:(e&&(e[r]=n),1)}catch(t){return 0}},Sr.jws.JWS.readSafeJSONString=function(t){var e=null;try{return"object"!=(void 0===(e=_r(t))?"undefined":g(e))||e.constructor===Array?null:e}catch(t){return null}},Sr.jws.JWS.getEncodedSignatureValueFromJWS=function(t){var e=t.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==e)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return e[1]},Sr.jws.JWS.getJWKthumbprint=function(t){if("RSA"!==t.kty&&"EC"!==t.kty&&"oct"!==t.kty)throw"unsupported algorithm for JWK Thumprint";var e="{";if("RSA"===t.kty){if("string"!=typeof t.n||"string"!=typeof t.e)throw"wrong n and e value for RSA key";e+='"e":"'+t.e+'",',e+='"kty":"'+t.kty+'",',e+='"n":"'+t.n+'"}'}else if("EC"===t.kty){if("string"!=typeof t.crv||"string"!=typeof t.x||"string"!=typeof t.y)throw"wrong crv, x and y value for EC key";e+='"crv":"'+t.crv+'",',e+='"kty":"'+t.kty+'",',e+='"x":"'+t.x+'",',e+='"y":"'+t.y+'"}'}else if("oct"===t.kty){if("string"!=typeof t.k)throw"wrong k value for oct(symmetric) key";e+='"kty":"'+t.kty+'",',e+='"k":"'+t.k+'"}'}var r=Nr(e);return Tr(Sr.crypto.Util.hashHex(r,"sha256"))},Sr.jws.IntDate={},Sr.jws.IntDate.get=function(t){var e=Sr.jws.IntDate,r=e.getNow,n=e.getZulu;if("now"==t)return r();if("now + 1hour"==t)return r()+3600;if("now + 1day"==t)return r()+86400;if("now + 1month"==t)return r()+2592e3;if("now + 1year"==t)return r()+31536e3;if(t.match(/Z$/))return n(t);if(t.match(/^[0-9]+$/))return parseInt(t);throw"unsupported format: "+t},Sr.jws.IntDate.getZulu=function(t){return Vr(t)},Sr.jws.IntDate.getNow=function(){return~~(new Date/1e3)},Sr.jws.IntDate.intDate2UTCString=function(t){return new Date(1e3*t).toUTCString()},Sr.jws.IntDate.intDate2Zulu=function(t){var e=new Date(1e3*t);return("0000"+e.getUTCFullYear()).slice(-4)+("00"+(e.getUTCMonth()+1)).slice(-2)+("00"+e.getUTCDate()).slice(-2)+("00"+e.getUTCHours()).slice(-2)+("00"+e.getUTCMinutes()).slice(-2)+("00"+e.getUTCSeconds()).slice(-2)+"Z"},e.SecureRandom=Be,e.rng_seed_time=Re,e.BigInteger=w,e.RSAKey=Me;var sn=Sr.crypto.EDSA;e.EDSA=sn;var an=Sr.crypto.DSA;e.DSA=an;var un=Sr.crypto.Signature;e.Signature=un;var cn=Sr.crypto.MessageDigest;e.MessageDigest=cn;var hn=Sr.crypto.Mac;e.Mac=hn;var ln=Sr.crypto.Cipher;e.Cipher=ln,e.KEYUTIL=tn,e.ASN1HEX=Fr,e.X509=on,e.CryptoJS=v,e.b64tohex=S,e.b64toBA=b,e.stoBA=Er,e.BAtos=xr,e.BAtohex=Ar,e.stohex=kr,e.stob64=function fn(t){return _(kr(t))},e.stob64u=function gn(t){return Pr(_(kr(t)))},e.b64utos=function dn(t){return xr(b(Cr(t)))},e.b64tob64u=Pr,e.b64utob64=Cr,e.hex2b64=_,e.hextob64u=Tr,e.b64utohex=Rr,e.utf8tob64u=br,e.b64utoutf8=wr,e.utf8tob64=function pn(t){return _(Kr(Gr(t)))},e.b64toutf8=function vn(t){return decodeURIComponent(qr(S(t)))},e.utf8tohex=Ir,e.hextoutf8=Dr,e.hextorstr=Lr,e.rstrtohex=Nr,e.hextob64=Ur,e.hextob64nl=Br,e.b64nltohex=Or,e.hextopem=jr,e.pemtohex=Mr,e.hextoArrayBuffer=function yn(t){if(t.length%2!=0)throw"input is not even length";if(null==t.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var e=new ArrayBuffer(t.length/2),r=new DataView(e),n=0;n<t.length/2;n++)r.setUint8(n,parseInt(t.substr(2*n,2),16));return e},e.ArrayBuffertohex=function mn(t){for(var e="",r=new DataView(t),n=0;n<t.byteLength;n++)e+=("00"+r.getUint8(n).toString(16)).slice(-2);return e},e.zulutomsec=Hr,e.zulutosec=Vr,e.zulutodate=function _n(t){return new Date(Hr(t))},e.datetozulu=function Sn(t,e,r){var n,i=t.getUTCFullYear();if(e){if(i<1950||2049<i)throw"not proper year for UTCTime: "+i;n=(""+i).slice(-2)}else n=("000"+i).slice(-4);if(n+=("0"+(t.getUTCMonth()+1)).slice(-2),n+=("0"+t.getUTCDate()).slice(-2),n+=("0"+t.getUTCHours()).slice(-2),n+=("0"+t.getUTCMinutes()).slice(-2),n+=("0"+t.getUTCSeconds()).slice(-2),r){var o=t.getUTCMilliseconds();0!==o&&(n+="."+(o=(o=("00"+o).slice(-3)).replace(/0+$/g,"")))}return n+="Z"},e.uricmptohex=Kr,e.hextouricmp=qr,e.ipv6tohex=Jr,e.hextoipv6=Wr,e.hextoip=zr,e.iptohex=function bn(t){var e="malformed IP address";if(!(t=t.toLowerCase(t)).match(/^[0-9.]+$/)){if(t.match(/^[0-9a-f:]+$/)&&-1!==t.indexOf(":"))return Jr(t);throw e}var r=t.split(".");if(4!==r.length)throw e;var n="";try{for(var i=0;i<4;i++){n+=("0"+parseInt(r[i]).toString(16)).slice(-2)}return n}catch(t){throw e}},e.encodeURIComponentAll=Gr,e.newline_toUnix=function wn(t){return t=t.replace(/\r\n/gm,"\n")},e.newline_toDos=function Fn(t){return t=(t=t.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},e.hextoposhex=$r,e.intarystrtohex=function En(t){t=(t=(t=t.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return t.split(/,/).map((function(t,e,r){var n=parseInt(t);if(n<0||255<n)throw"integer not in range 0-255";return("00"+n.toString(16)).slice(-2)})).join("")}catch(t){throw"malformed integer array string: "+t}},e.strdiffidx=function t(e,r){var n=e.length;e.length>r.length&&(n=r.length);for(var i=0;i<n;i++)if(e.charCodeAt(i)!=r.charCodeAt(i))return i;return e.length!=r.length?n:-1},e.KJUR=Sr;var xn=Sr.crypto;e.crypto=xn;var An=Sr.asn1;e.asn1=An;var kn=Sr.jws;e.jws=kn;var Pn=Sr.lang;e.lang=Pn}).call(this,r(28).Buffer)},function(t,e,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(30),i=r(31),o=r(32);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return c(this,t,e,r)}function c(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function i(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e);return t}(t,e,r,n):"string"==typeof e?function s(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(e,r),i=(t=a(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function c(t,e){if(u.isBuffer(e)){var r=0|g(e.length);return 0===(t=a(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function n(t){return t!=t}(e.length)?a(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(h(e),t=a(t,e<0?0:0|g(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e){var r=e.length<0?0:0|g(e.length);t=a(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function g(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return K(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return q(t).length;default:if(n)return K(t).length;e=(""+e).toLowerCase(),n=!0}}function p(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,r);case"utf8":case"utf-8":return A(this,e,r);case"ascii":return T(this,e,r);case"latin1":case"binary":return R(this,e,r);case"base64":return x(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function v(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function y(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:m(t,e,r,n,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,n,i){var o,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var h=-1;for(o=r;o<a;o++)if(c(t,o)===c(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===u)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){for(var l=!0,f=0;f<u;f++)if(c(t,o+f)!==c(e,f)){l=!1;break}if(l)return o}return-1}function _(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function S(t,e,r,n){return J(K(e,t.length-r),t,r,n)}function b(t,e,r,n){return J(function i(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function w(t,e,r,n){return b(t,e,r,n)}function F(t,e,r,n){return J(q(e),t,r,n)}function E(t,e,r,n){return J(function i(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(r=t.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function x(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function A(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,u,c=t[i],h=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=r)switch(l){case 1:c<128&&(h=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(h=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(h=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(h=u)}null===h?(h=65533,l=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),i+=l}return function f(t){var e=t.length;if(e<=C)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=C));return r}(n)}e.Buffer=u,e.SlowBuffer=function k(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function P(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return c(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,r){return function n(t,e,r,i){return h(e),e<=0?a(t,e):void 0!==r?"string"==typeof i?a(t,e).fill(r,i):a(t,e).fill(r):a(t,e)}(null,t,e,r)},u.allocUnsafe=function(t){return l(null,t)},u.allocUnsafeSlow=function(t){return l(null,t)},u.isBuffer=function t(e){return!(null==e||!e._isBuffer)},u.compare=function t(e,r){if(!u.isBuffer(e)||!u.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var n=e.length,i=r.length,o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==r[o]){n=e[o],i=r[o];break}return n<i?-1:i<n?1:0},u.isEncoding=function t(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function t(e,r){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===r)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=u.allocUnsafe(r),s=0;for(n=0;n<e.length;++n){var a=e[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,s),s+=a.length}return i},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function t(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)v(this,r,r+1);return this},u.prototype.swap32=function t(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)v(this,r,r+3),v(this,r+1,r+2);return this},u.prototype.swap64=function t(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)v(this,r,r+7),v(this,r+1,r+6),v(this,r+2,r+5),v(this,r+3,r+4);return this},u.prototype.toString=function t(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):p.apply(this,arguments)},u.prototype.equals=function t(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function t(){var r="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(r=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(r+=" ... ")),"<Buffer "+r+">"},u.prototype.compare=function t(e,r,n,i,o){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),r<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(this===e)return 0;for(var s=(o>>>=0)-(i>>>=0),a=(n>>>=0)-(r>>>=0),c=Math.min(s,a),h=this.slice(i,o),l=e.slice(r,n),f=0;f<c;++f)if(h[f]!==l[f]){s=h[f],a=l[f];break}return s<a?-1:a<s?1:0},u.prototype.includes=function t(e,r,n){return-1!==this.indexOf(e,r,n)},u.prototype.indexOf=function t(e,r,n){return y(this,e,r,n,!0)},u.prototype.lastIndexOf=function t(e,r,n){return y(this,e,r,n,!1)},u.prototype.write=function t(e,r,n,i){if(void 0===r)i="utf8",n=this.length,r=0;else if(void 0===n&&"string"==typeof r)i=r,n=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var o=this.length-r;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return _(this,e,r,n);case"utf8":case"utf-8":return S(this,e,r,n);case"ascii":return b(this,e,r,n);case"latin1":case"binary":return w(this,e,r,n);case"base64":return F(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},u.prototype.toJSON=function t(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function T(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function R(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function I(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=V(t[o]);return i}function D(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function L(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,r,n,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function U(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function B(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function O(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function j(t,e,r,n,o){return o||O(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function M(t,e,r,n,o){return o||O(t,0,r,8),i.write(t,e,r,n,52,8),r+8}u.prototype.slice=function t(e,r){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(r=void 0===r?i:~~r)<0?(r+=i)<0&&(r=0):r>i&&(r=i),r<e&&(r=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,r)).__proto__=u.prototype;else{var o=r-e;n=new u(o,void 0);for(var s=0;s<o;++s)n[s]=this[s+e]}return n},u.prototype.readUIntLE=function t(e,r,n){e|=0,r|=0,n||L(e,r,this.length);for(var i=this[e],o=1,s=0;++s<r&&(o*=256);)i+=this[e+s]*o;return i},u.prototype.readUIntBE=function t(e,r,n){e|=0,r|=0,n||L(e,r,this.length);for(var i=this[e+--r],o=1;r>0&&(o*=256);)i+=this[e+--r]*o;return i},u.prototype.readUInt8=function t(e,r){return r||L(e,1,this.length),this[e]},u.prototype.readUInt16LE=function t(e,r){return r||L(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function t(e,r){return r||L(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function t(e,r){return r||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function t(e,r){return r||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function t(e,r,n){e|=0,r|=0,n||L(e,r,this.length);for(var i=this[e],o=1,s=0;++s<r&&(o*=256);)i+=this[e+s]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*r)),i},u.prototype.readIntBE=function t(e,r,n){e|=0,r|=0,n||L(e,r,this.length);for(var i=r,o=1,s=this[e+--i];i>0&&(o*=256);)s+=this[e+--i]*o;return s>=(o*=128)&&(s-=Math.pow(2,8*r)),s},u.prototype.readInt8=function t(e,r){return r||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function t(e,r){r||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function t(e,r){r||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function t(e,r){return r||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function t(e,r){return r||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function t(e,r){return r||L(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function t(e,r){return r||L(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function t(e,r){return r||L(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function t(e,r){return r||L(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function t(e,r,n,i){(e=+e,r|=0,n|=0,i)||N(this,e,r,n,Math.pow(2,8*n)-1,0);var o=1,s=0;for(this[r]=255&e;++s<n&&(o*=256);)this[r+s]=e/o&255;return r+n},u.prototype.writeUIntBE=function t(e,r,n,i){(e=+e,r|=0,n|=0,i)||N(this,e,r,n,Math.pow(2,8*n)-1,0);var o=n-1,s=1;for(this[r+o]=255&e;--o>=0&&(s*=256);)this[r+o]=e/s&255;return r+n},u.prototype.writeUInt8=function t(e,r,n){return e=+e,r|=0,n||N(this,e,r,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=255&e,r+1},u.prototype.writeUInt16LE=function t(e,r,n){return e=+e,r|=0,n||N(this,e,r,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):U(this,e,r,!0),r+2},u.prototype.writeUInt16BE=function t(e,r,n){return e=+e,r|=0,n||N(this,e,r,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):U(this,e,r,!1),r+2},u.prototype.writeUInt32LE=function t(e,r,n){return e=+e,r|=0,n||N(this,e,r,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=255&e):B(this,e,r,!0),r+4},u.prototype.writeUInt32BE=function t(e,r,n){return e=+e,r|=0,n||N(this,e,r,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):B(this,e,r,!1),r+4},u.prototype.writeIntLE=function t(e,r,n,i){if(e=+e,r|=0,!i){var o=Math.pow(2,8*n-1);N(this,e,r,n,o-1,-o)}var s=0,a=1,u=0;for(this[r]=255&e;++s<n&&(a*=256);)e<0&&0===u&&0!==this[r+s-1]&&(u=1),this[r+s]=(e/a>>0)-u&255;return r+n},u.prototype.writeIntBE=function t(e,r,n,i){if(e=+e,r|=0,!i){var o=Math.pow(2,8*n-1);N(this,e,r,n,o-1,-o)}var s=n-1,a=1,u=0;for(this[r+s]=255&e;--s>=0&&(a*=256);)e<0&&0===u&&0!==this[r+s+1]&&(u=1),this[r+s]=(e/a>>0)-u&255;return r+n},u.prototype.writeInt8=function t(e,r,n){return e=+e,r|=0,n||N(this,e,r,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[r]=255&e,r+1},u.prototype.writeInt16LE=function t(e,r,n){return e=+e,r|=0,n||N(this,e,r,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):U(this,e,r,!0),r+2},u.prototype.writeInt16BE=function t(e,r,n){return e=+e,r|=0,n||N(this,e,r,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):U(this,e,r,!1),r+2},u.prototype.writeInt32LE=function t(e,r,n){return e=+e,r|=0,n||N(this,e,r,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):B(this,e,r,!0),r+4},u.prototype.writeInt32BE=function t(e,r,n){return e=+e,r|=0,n||N(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):B(this,e,r,!1),r+4},u.prototype.writeFloatLE=function t(e,r,n){return j(this,e,r,!0,n)},u.prototype.writeFloatBE=function t(e,r,n){return j(this,e,r,!1,n)},u.prototype.writeDoubleLE=function t(e,r,n){return M(this,e,r,!0,n)},u.prototype.writeDoubleBE=function t(e,r,n){return M(this,e,r,!1,n)},u.prototype.copy=function t(e,r,n,i){if(n||(n=0),i||0===i||(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var o,s=i-n;if(this===e&&n<r&&r<i)for(o=s-1;o>=0;--o)e[o+r]=this[o+n];else if(s<1e3||!u.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)e[o+r]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),r);return s},u.prototype.fill=function t(e,r,n,i){if("string"==typeof e){if("string"==typeof r?(i=r,r=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;var s;if(r>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(s=r;s<n;++s)this[s]=e;else{var a=u.isBuffer(e)?e:K(new u(e,i).toString()),c=a.length;for(s=0;s<n-r;++s)this[s+r]=a[s%c]}return this};var H=/[^+\/0-9A-Za-z-_]/g;function V(t){return t<16?"0"+t.toString(16):t.toString(16)}function K(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function q(t){return n.toByteArray(function e(t){if((t=function e(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(H,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function J(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,r(29))},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";e.byteLength=function n(t){var e=f(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function i(t){var e,r,n=f(t),i=n[0],o=n[1],s=new u(function c(t,e,r){return 3*(e+r)/4-r}(0,i,o)),h=0,l=o>0?i-4:i;for(r=0;r<l;r+=4)e=a[t.charCodeAt(r)]<<18|a[t.charCodeAt(r+1)]<<12|a[t.charCodeAt(r+2)]<<6|a[t.charCodeAt(r+3)],s[h++]=e>>16&255,s[h++]=e>>8&255,s[h++]=255&e;2===o&&(e=a[t.charCodeAt(r)]<<2|a[t.charCodeAt(r+1)]>>4,s[h++]=255&e);1===o&&(e=a[t.charCodeAt(r)]<<10|a[t.charCodeAt(r+1)]<<4|a[t.charCodeAt(r+2)]>>2,s[h++]=e>>8&255,s[h++]=255&e);return s},e.fromByteArray=function o(t){for(var e,r=t.length,n=r%3,i=[],o=16383,a=0,u=r-n;a<u;a+=o)i.push(g(t,a,a+o>u?u:a+o));1===n?(e=t[r-1],i.push(s[e>>2]+s[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],i.push(s[e>>10]+s[e>>4&63]+s[e<<2&63]+"="));return i.join("")};for(var s=[],a=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,l=c.length;h<l;++h)s[h]=c[h],a[c.charCodeAt(h)]=h;function f(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function g(t,e,r){for(var n,i,o=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(s[(i=n)>>18&63]+s[i>>12&63]+s[i>>6&63]+s[63&i]);return o.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,h=-7,l=r?i-1:0,f=r?-1:1,g=t[e+l];for(l+=f,o=g&(1<<-h)-1,g>>=-h,h+=a;h>0;o=256*o+t[e+l],l+=f,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;h>0;s=256*s+t[e+l],l+=f,h-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(g?-1:1);s+=Math.pow(2,n),o-=c}return(g?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,u,c=8*o-i-1,h=(1<<c)-1,l=h>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:o-1,d=n?1:-1,p=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+l>=1?f/u:f*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=h?(a=0,s=h):s+l>=1?(a=(e*u-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[r+g]=255&a,g+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[r+g]=255&s,g+=d,s/=256,c-=8);t[r+g-d]|=128*p}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function n(t){var e=t.jws,r=t.KeyUtil,n=t.X509,o=t.crypto,s=t.hextob64u,a=t.b64tohex,u=t.AllowedSigningAlgs;return function(){function t(){!function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.parseJwt=function t(r){i.Log.debug("JoseUtil.parseJwt");try{var n=e.JWS.parse(r);return{header:n.headerObj,payload:n.payloadObj}}catch(t){i.Log.error(t)}},t.validateJwt=function e(o,s,u,c,h,l,f){i.Log.debug("JoseUtil.validateJwt");try{if("RSA"===s.kty)if(s.e&&s.n)s=r.getKey(s);else{if(!s.x5c||!s.x5c.length)return i.Log.error("JoseUtil.validateJwt: RSA key missing key material",s),Promise.reject(new Error("RSA key missing key material"));var g=a(s.x5c[0]);s=n.getPublicKeyFromCertHex(g)}else{if("EC"!==s.kty)return i.Log.error("JoseUtil.validateJwt: Unsupported key type",s&&s.kty),Promise.reject(new Error(s.kty));if(!(s.crv&&s.x&&s.y))return i.Log.error("JoseUtil.validateJwt: EC key missing key material",s),Promise.reject(new Error("EC key missing key material"));s=r.getKey(s)}return t._validateJwt(o,s,u,c,h,l,f)}catch(t){return i.Log.error(t&&t.message||t),Promise.reject("JWT validation failed")}},t.validateJwtAttributes=function e(r,n,o,s,a,u){s||(s=0),a||(a=parseInt(Date.now()/1e3));var c=t.parseJwt(r).payload;if(!c.iss)return i.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(c.iss!==n)return i.Log.error("JoseUtil._validateJwt: Invalid issuer in token",c.iss),Promise.reject(new Error("Invalid issuer in token: "+c.iss));if(!c.aud)return i.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(c.aud===o||Array.isArray(c.aud)&&c.aud.indexOf(o)>=0))return i.Log.error("JoseUtil._validateJwt: Invalid audience in token",c.aud),Promise.reject(new Error("Invalid audience in token: "+c.aud));if(c.azp&&c.azp!==o)return i.Log.error("JoseUtil._validateJwt: Invalid azp in token",c.azp),Promise.reject(new Error("Invalid azp in token: "+c.azp));if(!u){var h=a+s,l=a-s;if(!c.iat)return i.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(h<c.iat)return i.Log.error("JoseUtil._validateJwt: iat is in the future",c.iat),Promise.reject(new Error("iat is in the future: "+c.iat));if(c.nbf&&h<c.nbf)return i.Log.error("JoseUtil._validateJwt: nbf is in the future",c.nbf),Promise.reject(new Error("nbf is in the future: "+c.nbf));if(!c.exp)return i.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(c.exp<l)return i.Log.error("JoseUtil._validateJwt: exp is in the past",c.exp),Promise.reject(new Error("exp is in the past:"+c.exp))}return Promise.resolve(c)},t._validateJwt=function r(n,o,s,a,c,h,l){return t.validateJwtAttributes(n,s,a,c,h,l).then((function(t){try{return e.JWS.verify(n,o,u)?t:(i.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(t){return i.Log.error(t&&t.message||t),Promise.reject(new Error("signature validation failed"))}}))},t.hashString=function t(e,r){try{return o.Util.hashString(e,r)}catch(t){i.Log.error(t)}},t.hexToBase64Url=function t(e){try{return s(e)}catch(t){i.Log.error(t)}},t}()};var i=r(0);t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SigninResponse=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(3);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.SigninResponse=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";o(this,t);var n=i.UrlUtility.parseUrlFragment(e,r);this.error=n.error,this.error_description=n.error_description,this.error_uri=n.error_uri,this.code=n.code,this.state=n.state,this.id_token=n.id_token,this.session_state=n.session_state,this.access_token=n.access_token,this.token_type=n.token_type,this.scope=n.scope,this.profile=void 0,this.expires_in=n.expires_in}return n(t,[{key:"expires_in",get:function t(){if(this.expires_at){var e=parseInt(Date.now()/1e3);return this.expires_at-e}},set:function t(e){var r=parseInt(e);if("number"==typeof r&&r>0){var n=parseInt(Date.now()/1e3);this.expires_at=n+r}}},{key:"expired",get:function t(){var e=this.expires_in;if(void 0!==e)return e<=0}},{key:"scopes",get:function t(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function t(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SignoutRequest=void 0;var n=r(0),i=r(3),o=r(9);e.SignoutRequest=function t(e){var r=e.url,s=e.id_token_hint,a=e.post_logout_redirect_uri,u=e.data,c=e.extraQueryParams,h=e.request_type;if(function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!r)throw n.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var f in s&&(r=i.UrlUtility.addQueryParam(r,"id_token_hint",s)),a&&(r=i.UrlUtility.addQueryParam(r,"post_logout_redirect_uri",a),u&&(this.state=new o.State({data:u,request_type:h}),r=i.UrlUtility.addQueryParam(r,"state",this.state.id))),c)r=i.UrlUtility.addQueryParam(r,f,c[f]);this.url=r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SignoutResponse=void 0;var n=r(3);e.SignoutResponse=function t(e){!function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=n.UrlUtility.parseUrlFragment(e,"?");this.error=i.error,this.error_description=i.error_description,this.error_uri=i.error_uri,this.state=i.state}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemoryWebStorage=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0);e.InMemoryWebStorage=function(){function t(){!function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this._data={}}return t.prototype.getItem=function t(e){return i.Log.debug("InMemoryWebStorage.getItem",e),this._data[e]},t.prototype.setItem=function t(e,r){i.Log.debug("InMemoryWebStorage.setItem",e),this._data[e]=r},t.prototype.removeItem=function t(e){i.Log.debug("InMemoryWebStorage.removeItem",e),delete this._data[e]},t.prototype.key=function t(e){return Object.getOwnPropertyNames(this._data)[e]},n(t,[{key:"length",get:function t(){return Object.getOwnPropertyNames(this._data).length}}]),t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserManager=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0),o=r(10),s=r(39),a=r(15),u=r(45),c=r(47),h=r(18),l=r(8),f=r(20),g=r(11),d=r(4);function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}e.UserManager=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.SilentRenewService,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.SessionMonitor,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f.TokenRevocationClient,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:g.TokenClient,y=arguments.length>5&&void 0!==arguments[5]?arguments[5]:d.JoseUtil;p(this,e),r instanceof s.UserManagerSettings||(r=new s.UserManagerSettings(r));var m=v(this,t.call(this,r));return m._events=new u.UserManagerEvents(r),m._silentRenewService=new n(m),m.settings.automaticSilentRenew&&(i.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),m.startSilentRenew()),m.settings.monitorSession&&(i.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),m._sessionMonitor=new o(m)),m._tokenRevocationClient=new a(m._settings),m._tokenClient=new l(m._settings),m._joseUtil=y,m}return function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.getUser=function t(){var e=this;return this._loadUser().then((function(t){return t?(i.Log.info("UserManager.getUser: user loaded"),e._events.load(t,!1),t):(i.Log.info("UserManager.getUser: user not found in storage"),null)}))},e.prototype.removeUser=function t(){var e=this;return this.storeUser(null).then((function(){i.Log.info("UserManager.removeUser: user removed from storage"),e._events.unload()}))},e.prototype.signinRedirect=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="si:r";var r={useReplaceToNavigate:e.useReplaceToNavigate};return this._signinStart(e,this._redirectNavigator,r).then((function(){i.Log.info("UserManager.signinRedirect: successful")}))},e.prototype.signinRedirectCallback=function t(e){return this._signinEnd(e||this._redirectNavigator.url).then((function(t){return t.profile&&t.profile.sub?i.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",t.profile.sub):i.Log.info("UserManager.signinRedirectCallback: no sub"),t}))},e.prototype.signinPopup=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="si:p";var r=e.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return r?(e.redirect_uri=r,e.display="popup",this._signin(e,this._popupNavigator,{startUrl:r,popupWindowFeatures:e.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:e.popupWindowTarget||this.settings.popupWindowTarget}).then((function(t){return t&&(t.profile&&t.profile.sub?i.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",t.profile.sub):i.Log.info("UserManager.signinPopup: no sub")),t}))):(i.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},e.prototype.signinPopupCallback=function t(e){return this._signinCallback(e,this._popupNavigator).then((function(t){return t&&(t.profile&&t.profile.sub?i.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",t.profile.sub):i.Log.info("UserManager.signinPopupCallback: no sub")),t})).catch((function(t){i.Log.error(t.message)}))},e.prototype.signinSilent=function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r=Object.assign({},r),this._loadUser().then((function(t){return t&&t.refresh_token?(r.refresh_token=t.refresh_token,e._useRefreshToken(r)):(r.request_type="si:s",r.id_token_hint=r.id_token_hint||e.settings.includeIdTokenInSilentRenew&&t&&t.id_token,t&&e._settings.validateSubOnSilentRenew&&(i.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",t.profile.sub),r.current_sub=t.profile.sub),e._signinSilentIframe(r))}))},e.prototype._useRefreshToken=function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._tokenClient.exchangeRefreshToken(r).then((function(t){return t?t.access_token?e._loadUser().then((function(r){if(r){var n=Promise.resolve();return t.id_token&&(n=e._validateIdTokenFromTokenRefreshToken(r.profile,t.id_token)),n.then((function(){return i.Log.debug("UserManager._useRefreshToken: refresh token response success"),r.id_token=t.id_token||r.id_token,r.access_token=t.access_token,r.refresh_token=t.refresh_token||r.refresh_token,r.expires_in=t.expires_in,e.storeUser(r).then((function(){return e._events.load(r),r}))}))}return null})):(i.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(i.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))}))},e.prototype._validateIdTokenFromTokenRefreshToken=function t(e,r){var n=this;return this._metadataService.getIssuer().then((function(t){return n.settings.getEpochTime().then((function(o){return n._joseUtil.validateJwtAttributes(r,t,n._settings.client_id,n._settings.clockSkew,o).then((function(t){return t?t.sub!==e.sub?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):t.auth_time&&t.auth_time!==e.auth_time?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):t.azp&&t.azp!==e.azp?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!t.azp&&e.azp?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))}))}))}))},e.prototype._signinSilentIframe=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return r?(e.redirect_uri=r,e.prompt=e.prompt||"none",this._signin(e,this._iframeNavigator,{startUrl:r,silentRequestTimeout:e.silentRequestTimeout||this.settings.silentRequestTimeout}).then((function(t){return t&&(t.profile&&t.profile.sub?i.Log.info("UserManager.signinSilent: successful, signed in sub: ",t.profile.sub):i.Log.info("UserManager.signinSilent: no sub")),t}))):(i.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},e.prototype.signinSilentCallback=function t(e){return this._signinCallback(e,this._iframeNavigator).then((function(t){return t&&(t.profile&&t.profile.sub?i.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",t.profile.sub):i.Log.info("UserManager.signinSilentCallback: no sub")),t}))},e.prototype.signinCallback=function t(e){var r=this;return this.readSigninResponseState(e).then((function(t){var n=t.state;t.response;return"si:r"===n.request_type?r.signinRedirectCallback(e):"si:p"===n.request_type?r.signinPopupCallback(e):"si:s"===n.request_type?r.signinSilentCallback(e):Promise.reject(new Error("invalid response_type in state"))}))},e.prototype.signoutCallback=function t(e,r){var n=this;return this.readSignoutResponseState(e).then((function(t){var i=t.state,o=t.response;return i?"so:r"===i.request_type?n.signoutRedirectCallback(e):"so:p"===i.request_type?n.signoutPopupCallback(e,r):Promise.reject(new Error("invalid response_type in state")):o}))},e.prototype.querySessionStatus=function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(r=Object.assign({},r)).request_type="si:s";var n=r.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return n?(r.redirect_uri=n,r.prompt="none",r.response_type=r.response_type||this.settings.query_status_response_type,r.scope=r.scope||"openid",r.skipUserInfo=!0,this._signinStart(r,this._iframeNavigator,{startUrl:n,silentRequestTimeout:r.silentRequestTimeout||this.settings.silentRequestTimeout}).then((function(t){return e.processSigninResponse(t.url).then((function(t){if(i.Log.debug("UserManager.querySessionStatus: got signin response"),t.session_state&&t.profile.sub)return i.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",t.profile.sub),{session_state:t.session_state,sub:t.profile.sub,sid:t.profile.sid};i.Log.info("querySessionStatus successful, user not authenticated")})).catch((function(t){if(t.session_state&&e.settings.monitorAnonymousSession&&("login_required"==t.message||"consent_required"==t.message||"interaction_required"==t.message||"account_selection_required"==t.message))return i.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:t.session_state};throw t}))}))):(i.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},e.prototype._signin=function t(e,r){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._signinStart(e,r,i).then((function(t){return n._signinEnd(t.url,e)}))},e.prototype._signinStart=function t(e,r){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.prepare(o).then((function(t){return i.Log.debug("UserManager._signinStart: got navigator window handle"),n.createSigninRequest(e).then((function(e){return i.Log.debug("UserManager._signinStart: got signin request"),o.url=e.url,o.id=e.state.id,t.navigate(o)})).catch((function(e){throw t.close&&(i.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),t.close()),e}))}))},e.prototype._signinEnd=function t(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.processSigninResponse(e).then((function(t){i.Log.debug("UserManager._signinEnd: got signin response");var e=new a.User(t);if(n.current_sub){if(n.current_sub!==e.profile.sub)return i.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",e.profile.sub),Promise.reject(new Error("login_required"));i.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return r.storeUser(e).then((function(){return i.Log.debug("UserManager._signinEnd: user stored"),r._events.load(e),e}))}))},e.prototype._signinCallback=function t(e,r){i.Log.debug("UserManager._signinCallback");var n="query"===this._settings.response_mode||!this._settings.response_mode&&l.SigninRequest.isCode(this._settings.response_type)?"?":"#";return r.callback(e,void 0,n)},e.prototype.signoutRedirect=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="so:r";var r=e.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;r&&(e.post_logout_redirect_uri=r);var n={useReplaceToNavigate:e.useReplaceToNavigate};return this._signoutStart(e,this._redirectNavigator,n).then((function(){i.Log.info("UserManager.signoutRedirect: successful")}))},e.prototype.signoutRedirectCallback=function t(e){return this._signoutEnd(e||this._redirectNavigator.url).then((function(t){return i.Log.info("UserManager.signoutRedirectCallback: successful"),t}))},e.prototype.signoutPopup=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="so:p";var r=e.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return e.post_logout_redirect_uri=r,e.display="popup",e.post_logout_redirect_uri&&(e.state=e.state||{}),this._signout(e,this._popupNavigator,{startUrl:r,popupWindowFeatures:e.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:e.popupWindowTarget||this.settings.popupWindowTarget}).then((function(){i.Log.info("UserManager.signoutPopup: successful")}))},e.prototype.signoutPopupCallback=function t(e,r){void 0===r&&"boolean"==typeof e&&(r=e,e=null);return this._popupNavigator.callback(e,r,"?").then((function(){i.Log.info("UserManager.signoutPopupCallback: successful")}))},e.prototype._signout=function t(e,r){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._signoutStart(e,r,i).then((function(t){return n._signoutEnd(t.url)}))},e.prototype._signoutStart=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this,n=arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.prepare(o).then((function(t){return i.Log.debug("UserManager._signoutStart: got navigator window handle"),r._loadUser().then((function(n){return i.Log.debug("UserManager._signoutStart: loaded current user from storage"),(r._settings.revokeAccessTokenOnSignout?r._revokeInternal(n):Promise.resolve()).then((function(){var s=e.id_token_hint||n&&n.id_token;return s&&(i.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),e.id_token_hint=s),r.removeUser().then((function(){return i.Log.debug("UserManager._signoutStart: user removed, creating signout request"),r.createSignoutRequest(e).then((function(e){return i.Log.debug("UserManager._signoutStart: got signout request"),o.url=e.url,e.state&&(o.id=e.state.id),t.navigate(o)}))}))}))})).catch((function(e){throw t.close&&(i.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),t.close()),e}))}))},e.prototype._signoutEnd=function t(e){return this.processSignoutResponse(e).then((function(t){return i.Log.debug("UserManager._signoutEnd: got signout response"),t}))},e.prototype.revokeAccessToken=function t(){var e=this;return this._loadUser().then((function(t){return e._revokeInternal(t,!0).then((function(r){if(r)return i.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),t.access_token=null,t.refresh_token=null,t.expires_at=null,t.token_type=null,e.storeUser(t).then((function(){i.Log.debug("UserManager.revokeAccessToken: user stored"),e._events.load(t)}))}))})).then((function(){i.Log.info("UserManager.revokeAccessToken: access token revoked successfully")}))},e.prototype._revokeInternal=function t(e,r){var n=this;if(e){var o=e.access_token,s=e.refresh_token;return this._revokeAccessTokenInternal(o,r).then((function(t){return n._revokeRefreshTokenInternal(s,r).then((function(e){return t||e||i.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),t||e}))}))}return Promise.resolve(!1)},e.prototype._revokeAccessTokenInternal=function t(e,r){return!e||e.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(e,r).then((function(){return!0}))},e.prototype._revokeRefreshTokenInternal=function t(e,r){return e?this._tokenRevocationClient.revoke(e,r,"refresh_token").then((function(){return!0})):Promise.resolve(!1)},e.prototype.startSilentRenew=function t(){this._silentRenewService.start()},e.prototype.stopSilentRenew=function t(){this._silentRenewService.stop()},e.prototype._loadUser=function t(){return this._userStore.get(this._userStoreKey).then((function(t){return t?(i.Log.debug("UserManager._loadUser: user storageString loaded"),a.User.fromStorageString(t)):(i.Log.debug("UserManager._loadUser: no user storageString"),null)}))},e.prototype.storeUser=function t(e){if(e){i.Log.debug("UserManager.storeUser: storing user");var r=e.toStorageString();return this._userStore.set(this._userStoreKey,r)}return i.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},n(e,[{key:"_redirectNavigator",get:function t(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function t(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function t(){return this.settings.iframeNavigator}},{key:"_userStore",get:function t(){return this.settings.userStore}},{key:"events",get:function t(){return this._events}},{key:"_userStoreKey",get:function t(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),e}(o.OidcClient)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserManagerSettings=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=(r(0),r(5)),o=r(40),s=r(41),a=r(43),u=r(6),c=r(1),h=r(8);function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}e.UserManagerSettings=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.popup_redirect_uri,i=r.popup_post_logout_redirect_uri,g=r.popupWindowFeatures,d=r.popupWindowTarget,p=r.silent_redirect_uri,v=r.silentRequestTimeout,y=r.automaticSilentRenew,m=void 0!==y&&y,_=r.validateSubOnSilentRenew,S=void 0!==_&&_,b=r.includeIdTokenInSilentRenew,w=void 0===b||b,F=r.monitorSession,E=void 0===F||F,x=r.monitorAnonymousSession,A=void 0!==x&&x,k=r.checkSessionInterval,P=void 0===k?2e3:k,C=r.stopCheckSessionOnError,T=void 0===C||C,R=r.query_status_response_type,I=r.revokeAccessTokenOnSignout,D=void 0!==I&&I,L=r.accessTokenExpiringNotificationTime,N=void 0===L?60:L,U=r.redirectNavigator,B=void 0===U?new o.RedirectNavigator:U,O=r.popupNavigator,j=void 0===O?new s.PopupNavigator:O,M=r.iframeNavigator,H=void 0===M?new a.IFrameNavigator:M,V=r.userStore,K=void 0===V?new u.WebStorageStateStore({store:c.Global.sessionStorage}):V;l(this,e);var q=f(this,t.call(this,arguments[0]));return q._popup_redirect_uri=n,q._popup_post_logout_redirect_uri=i,q._popupWindowFeatures=g,q._popupWindowTarget=d,q._silent_redirect_uri=p,q._silentRequestTimeout=v,q._automaticSilentRenew=m,q._validateSubOnSilentRenew=S,q._includeIdTokenInSilentRenew=w,q._accessTokenExpiringNotificationTime=N,q._monitorSession=E,q._monitorAnonymousSession=A,q._checkSessionInterval=P,q._stopCheckSessionOnError=T,R?q._query_status_response_type=R:arguments[0]&&arguments[0].response_type?q._query_status_response_type=h.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":q._query_status_response_type="id_token",q._revokeAccessTokenOnSignout=D,q._redirectNavigator=B,q._popupNavigator=j,q._iframeNavigator=H,q._userStore=K,q}return function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"popup_redirect_uri",get:function t(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function t(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function t(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function t(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function t(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function t(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function t(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function t(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function t(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function t(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function t(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function t(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function t(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function t(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function t(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function t(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function t(){return this._redirectNavigator}},{key:"popupNavigator",get:function t(){return this._popupNavigator}},{key:"iframeNavigator",get:function t(){return this._iframeNavigator}},{key:"userStore",get:function t(){return this._userStore}}]),e}(i.OidcClientSettings)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RedirectNavigator=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0);e.RedirectNavigator=function(){function t(){!function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.prepare=function t(){return Promise.resolve(this)},t.prototype.navigate=function t(e){return e&&e.url?(e.useReplaceToNavigate?window.location.replace(e.url):window.location=e.url,Promise.resolve()):(i.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},n(t,[{key:"url",get:function t(){return window.location.href}}]),t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PopupNavigator=void 0;var n=r(0),i=r(42);e.PopupNavigator=function(){function t(){!function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.prepare=function t(e){var r=new i.PopupWindow(e);return Promise.resolve(r)},t.prototype.callback=function t(e,r,o){n.Log.debug("PopupNavigator.callback");try{return i.PopupWindow.notifyOpener(e,r,o),Promise.resolve()}catch(t){return Promise.reject(t)}},t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PopupWindow=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0),o=r(3);e.PopupWindow=function(){function t(e){var r=this;!function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e}));var o=e.popupWindowTarget||"_blank",s=e.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;";this._popup=window.open("",o,s),this._popup&&(i.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return t.prototype.navigate=function t(e){return this._popup?e&&e.url?(i.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=e.id,this._id&&(window["popupCallback_"+e.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=e.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},t.prototype._success=function t(e){i.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(e)},t.prototype._error=function t(e){i.Log.error("PopupWindow.error: ",e),this._cleanup(),this._reject(new Error(e))},t.prototype.close=function t(){this._cleanup(!1)},t.prototype._cleanup=function t(e){i.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!e&&this._popup.close(),this._popup=null},t.prototype._checkForPopupClosed=function t(){this._popup&&!this._popup.closed||this._error("Popup window closed")},t.prototype._callback=function t(e,r){this._cleanup(r),e?(i.Log.debug("PopupWindow.callback success"),this._success({url:e})):(i.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},t.notifyOpener=function t(e,r,n){if(window.opener){if(e=e||window.location.href){var s=o.UrlUtility.parseUrlFragment(e,n);if(s.state){var a="popupCallback_"+s.state,u=window.opener[a];u?(i.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),u(e,r)):i.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else i.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else i.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},n(t,[{key:"promise",get:function t(){return this._promise}}]),t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IFrameNavigator=void 0;var n=r(0),i=r(44);e.IFrameNavigator=function(){function t(){!function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.prepare=function t(e){var r=new i.IFrameWindow(e);return Promise.resolve(r)},t.prototype.callback=function t(e){n.Log.debug("IFrameNavigator.callback");try{return i.IFrameWindow.notifyParent(e),Promise.resolve()}catch(t){return Promise.reject(t)}},t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IFrameWindow=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0);e.IFrameWindow=function(){function t(e){var r=this;!function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e})),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return t.prototype.navigate=function t(e){if(e&&e.url){var r=e.silentRequestTimeout||1e4;i.Log.debug("IFrameWindow.navigate: Using timeout of:",r),this._timer=window.setTimeout(this._timeout.bind(this),r),this._frame.src=e.url}else this._error("No url provided");return this.promise},t.prototype._success=function t(e){this._cleanup(),i.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(e)},t.prototype._error=function t(e){this._cleanup(),i.Log.error(e),this._reject(new Error(e))},t.prototype.close=function t(){this._cleanup()},t.prototype._cleanup=function t(){this._frame&&(i.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},t.prototype._timeout=function t(){i.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},t.prototype._message=function t(e){if(i.Log.debug("IFrameWindow.message"),this._timer&&e.origin===this._origin&&e.source===this._frame.contentWindow&&"string"==typeof e.data&&(e.data.startsWith("http://")||e.data.startsWith("https://"))){var r=e.data;r?this._success({url:r}):this._error("Invalid response from frame")}},t.notifyParent=function t(e){i.Log.debug("IFrameWindow.notifyParent"),(e=e||window.location.href)&&(i.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(e,location.protocol+"//"+location.host))},n(t,[{key:"promise",get:function t(){return this._promise}},{key:"_origin",get:function t(){return location.protocol+"//"+location.host}}]),t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserManagerEvents=void 0;var n=r(0),i=r(16),o=r(17);e.UserManagerEvents=function(t){function e(r){!function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r));return i._userLoaded=new o.Event("User loaded"),i._userUnloaded=new o.Event("User unloaded"),i._silentRenewError=new o.Event("Silent renew error"),i._userSignedIn=new o.Event("User signed in"),i._userSignedOut=new o.Event("User signed out"),i._userSessionChanged=new o.Event("User session changed"),i}return function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.load=function e(r){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.Log.debug("UserManagerEvents.load"),t.prototype.load.call(this,r),i&&this._userLoaded.raise(r)},e.prototype.unload=function e(){n.Log.debug("UserManagerEvents.unload"),t.prototype.unload.call(this),this._userUnloaded.raise()},e.prototype.addUserLoaded=function t(e){this._userLoaded.addHandler(e)},e.prototype.removeUserLoaded=function t(e){this._userLoaded.removeHandler(e)},e.prototype.addUserUnloaded=function t(e){this._userUnloaded.addHandler(e)},e.prototype.removeUserUnloaded=function t(e){this._userUnloaded.removeHandler(e)},e.prototype.addSilentRenewError=function t(e){this._silentRenewError.addHandler(e)},e.prototype.removeSilentRenewError=function t(e){this._silentRenewError.removeHandler(e)},e.prototype._raiseSilentRenewError=function t(e){n.Log.debug("UserManagerEvents._raiseSilentRenewError",e.message),this._silentRenewError.raise(e)},e.prototype.addUserSignedIn=function t(e){this._userSignedIn.addHandler(e)},e.prototype.removeUserSignedIn=function t(e){this._userSignedIn.removeHandler(e)},e.prototype._raiseUserSignedIn=function t(){n.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},e.prototype.addUserSignedOut=function t(e){this._userSignedOut.addHandler(e)},e.prototype.removeUserSignedOut=function t(e){this._userSignedOut.removeHandler(e)},e.prototype._raiseUserSignedOut=function t(){n.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},e.prototype.addUserSessionChanged=function t(e){this._userSessionChanged.addHandler(e)},e.prototype.removeUserSessionChanged=function t(e){this._userSessionChanged.removeHandler(e)},e.prototype._raiseUserSessionChanged=function t(){n.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},e}(i.AccessTokenEvents)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Timer=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0),o=r(1),s=r(17);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}e.Timer=function(t){function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Global.timer,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;a(this,e);var s=u(this,t.call(this,r));return s._timer=n,s._nowFunc=i||function(){return Date.now()/1e3},s}return function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.init=function t(e){e<=0&&(e=1),e=parseInt(e);var r=this.now+e;if(this.expiration===r&&this._timerHandle)i.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),i.Log.debug("Timer.init timer "+this._name+" for duration:",e),this._expiration=r;var n=5;e<n&&(n=e),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*n)}},e.prototype.cancel=function t(){this._timerHandle&&(i.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},e.prototype._callback=function e(){var r=this._expiration-this.now;i.Log.debug("Timer.callback; "+this._name+" timer expires in:",r),this._expiration<=this.now&&(this.cancel(),t.prototype.raise.call(this))},n(e,[{key:"now",get:function t(){return parseInt(this._nowFunc())}},{key:"expiration",get:function t(){return this._expiration}}]),e}(s.Event)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SilentRenewService=void 0;var n=r(0);e.SilentRenewService=function(){function t(e){!function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userManager=e}return t.prototype.start=function t(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then((function(t){})).catch((function(t){n.Log.error("SilentRenewService.start: Error from getUser:",t.message)})))},t.prototype.stop=function t(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},t.prototype._tokenExpiring=function t(){var e=this;this._userManager.signinSilent().then((function(t){n.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")}),(function(t){n.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",t.message),e._userManager.events._raiseSilentRenewError(t)}))},t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CordovaPopupNavigator=void 0;var n=r(21);e.CordovaPopupNavigator=function(){function t(){!function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.prepare=function t(e){var r=new n.CordovaPopupWindow(e);return Promise.resolve(r)},t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CordovaIFrameNavigator=void 0;var n=r(21);e.CordovaIFrameNavigator=function(){function t(){!function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.prepare=function t(e){e.popupWindowFeatures="hidden=yes";var r=new n.CordovaPopupWindow(e);return Promise.resolve(r)},t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Version="1.11.6"}])}));

/***/ }),

/***/ "../core/dist/index.mjs":
/*!******************************!*\
  !*** ../core/dist/index.mjs ***!
  \******************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AggregateHandler": () => (/* binding */ AggregateHandler),
/* harmony export */   "ConfigurationError": () => (/* binding */ ConfigurationError),
/* harmony export */   "DEFAULT_SCOPES": () => (/* binding */ DEFAULT_SCOPES),
/* harmony export */   "EVENTS": () => (/* binding */ EVENTS),
/* harmony export */   "InMemoryStorage": () => (/* binding */ InMemoryStorage),
/* harmony export */   "InvalidResponseError": () => (/* binding */ InvalidResponseError),
/* harmony export */   "NotImplementedError": () => (/* binding */ NotImplementedError),
/* harmony export */   "OidcProviderError": () => (/* binding */ OidcProviderError),
/* harmony export */   "PREFERRED_SIGNING_ALG": () => (/* binding */ PREFERRED_SIGNING_ALG),
/* harmony export */   "REFRESH_BEFORE_EXPIRATION_SECONDS": () => (/* binding */ REFRESH_BEFORE_EXPIRATION_SECONDS),
/* harmony export */   "SOLID_CLIENT_AUTHN_KEY_PREFIX": () => (/* binding */ SOLID_CLIENT_AUTHN_KEY_PREFIX),
/* harmony export */   "StorageUtility": () => (/* binding */ StorageUtility),
/* harmony export */   "StorageUtilityGetResponse": () => (/* binding */ StorageUtilityGetResponse),
/* harmony export */   "StorageUtilityMock": () => (/* binding */ StorageUtilityMock),
/* harmony export */   "USER_SESSION_PREFIX": () => (/* binding */ USER_SESSION_PREFIX),
/* harmony export */   "buildAuthenticatedFetch": () => (/* binding */ buildAuthenticatedFetch),
/* harmony export */   "buildProxyHandler": () => (/* binding */ buildProxyHandler),
/* harmony export */   "createDpopHeader": () => (/* binding */ createDpopHeader),
/* harmony export */   "determineSigningAlg": () => (/* binding */ determineSigningAlg),
/* harmony export */   "fetchJwks": () => (/* binding */ fetchJwks),
/* harmony export */   "generateDpopKeyPair": () => (/* binding */ generateDpopKeyPair),
/* harmony export */   "getSessionIdFromOauthState": () => (/* binding */ getSessionIdFromOauthState),
/* harmony export */   "getWebidFromTokenPayload": () => (/* binding */ getWebidFromTokenPayload),
/* harmony export */   "handleRegistration": () => (/* binding */ handleRegistration),
/* harmony export */   "isSupportedTokenType": () => (/* binding */ isSupportedTokenType),
/* harmony export */   "isValidRedirectUrl": () => (/* binding */ isValidRedirectUrl),
/* harmony export */   "loadOidcContextFromStorage": () => (/* binding */ loadOidcContextFromStorage),
/* harmony export */   "mockStorage": () => (/* binding */ mockStorage),
/* harmony export */   "mockStorageUtility": () => (/* binding */ mockStorageUtility),
/* harmony export */   "saveSessionInfoToStorage": () => (/* binding */ saveSessionInfoToStorage)
/* harmony export */ });
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! events */ "../core/node_modules/events/events.js");
/* harmony import */ var _inrupt_universal_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @inrupt/universal-fetch */ "../core/node_modules/@inrupt/universal-fetch/dist/index-browser.mjs");
/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jose */ "../core/node_modules/jose/dist/browser/index.js");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ "../core/node_modules/uuid/dist/esm-browser/v4.js");





const SOLID_CLIENT_AUTHN_KEY_PREFIX = "solidClientAuthn:";
const PREFERRED_SIGNING_ALG = ["ES256", "RS256"];
const EVENTS = {
    ERROR: "error",
    LOGIN: "login",
    LOGOUT: "logout",
    NEW_REFRESH_TOKEN: "newRefreshToken",
    SESSION_EXPIRED: "sessionExpired",
    SESSION_EXTENDED: "sessionExtended",
    SESSION_RESTORED: "sessionRestore",
    TIMEOUT_SET: "timeoutSet",
};
const REFRESH_BEFORE_EXPIRATION_SECONDS = 5;
const SCOPE_OPENID = "openid";
const SCOPE_OFFLINE = "offline_access";
const SCOPE_WEBID = "webid";
const DEFAULT_SCOPES = [SCOPE_OPENID, SCOPE_OFFLINE, SCOPE_WEBID].join(" ");

const buildProxyHandler = (toExclude, errorMessage) => ({
    get(target, prop, receiver) {
        if (!Object.getOwnPropertyNames(events__WEBPACK_IMPORTED_MODULE_0__.EventEmitter).includes(prop) &&
            Object.getOwnPropertyNames(toExclude).includes(prop)) {
            throw new Error(`${errorMessage}: [${prop}] is not supported`);
        }
        return Reflect.get(target, prop, receiver);
    },
});

class AggregateHandler {
    constructor(handleables) {
        this.handleables = handleables;
    }
    async getProperHandler(params) {
        const canHandleList = await Promise.all(this.handleables.map((handleable) => handleable.canHandle(...params)));
        for (let i = 0; i < canHandleList.length; i += 1) {
            if (canHandleList[i]) {
                return this.handleables[i];
            }
        }
        return null;
    }
    async canHandle(...params) {
        return (await this.getProperHandler(params)) !== null;
    }
    async handle(...params) {
        const handler = await this.getProperHandler(params);
        if (handler) {
            return handler.handle(...params);
        }
        throw new Error(`[${this.constructor.name}] cannot find a suitable handler for: ${params
            .map((param) => {
            try {
                return JSON.stringify(param);
            }
            catch (err) {
                return param.toString();
            }
        })
            .join(", ")}`);
    }
}

async function fetchJwks(jwksIri, issuerIri) {
    const jwksResponse = await (0,_inrupt_universal_fetch__WEBPACK_IMPORTED_MODULE_2__.fetch)(jwksIri);
    if (jwksResponse.status !== 200) {
        throw new Error(`Could not fetch JWKS for [${issuerIri}] at [${jwksIri}]: ${jwksResponse.status} ${jwksResponse.statusText}`);
    }
    let jwk;
    try {
        jwk = (await jwksResponse.json()).keys[0];
    }
    catch (e) {
        throw new Error(`Malformed JWKS for [${issuerIri}] at [${jwksIri}]: ${e.message}`);
    }
    return jwk;
}
async function getWebidFromTokenPayload(idToken, jwksIri, issuerIri, clientId) {
    const jwk = await fetchJwks(jwksIri, issuerIri);
    let payload;
    try {
        const { payload: verifiedPayload } = await (0,jose__WEBPACK_IMPORTED_MODULE_1__.jwtVerify)(idToken, await (0,jose__WEBPACK_IMPORTED_MODULE_1__.importJWK)(jwk), {
            issuer: issuerIri,
            audience: clientId,
        });
        payload = verifiedPayload;
    }
    catch (e) {
        throw new Error(`Token verification failed: ${e.stack}`);
    }
    if (typeof payload.webid === "string") {
        return payload.webid;
    }
    if (typeof payload.sub !== "string") {
        throw new Error(`The token ${JSON.stringify(payload)} is invalid: it has no 'webid' claim and no 'sub' claim.`);
    }
    try {
        new URL(payload.sub);
        return payload.sub;
    }
    catch (e) {
        throw new Error(`The token has no 'webid' claim, and its 'sub' claim of [${payload.sub}] is invalid as a URL - error [${e}].`);
    }
}

function isValidRedirectUrl(redirectUrl) {
    try {
        const urlObject = new URL(redirectUrl);
        return urlObject.hash === "";
    }
    catch (e) {
        return false;
    }
}

function isSupportedTokenType(token) {
    return typeof token === "string" && ["DPoP", "Bearer"].includes(token);
}

const USER_SESSION_PREFIX = "solidClientAuthenticationUser";

function isValidUrl(url) {
    try {
        new URL(url);
        return true;
    }
    catch (_a) {
        return false;
    }
}
function determineSigningAlg(supported, preferred) {
    var _a;
    return ((_a = preferred.find((signingAlg) => {
        return supported.includes(signingAlg);
    })) !== null && _a !== void 0 ? _a : null);
}
function determineClientType(options, issuerConfig) {
    if (options.clientId !== undefined && !isValidUrl(options.clientId)) {
        return "static";
    }
    if (issuerConfig.scopesSupported.includes("webid") &&
        options.clientId !== undefined &&
        isValidUrl(options.clientId)) {
        return "solid-oidc";
    }
    return "dynamic";
}
async function handleRegistration(options, issuerConfig, storageUtility, clientRegistrar) {
    const clientType = determineClientType(options, issuerConfig);
    if (clientType === "dynamic") {
        return clientRegistrar.getClient({
            sessionId: options.sessionId,
            clientName: options.clientName,
            redirectUrl: options.redirectUrl,
        }, issuerConfig);
    }
    await storageUtility.setForUser(options.sessionId, {
        clientId: options.clientId,
    });
    if (options.clientSecret) {
        await storageUtility.setForUser(options.sessionId, {
            clientSecret: options.clientSecret,
        });
    }
    if (options.clientName) {
        await storageUtility.setForUser(options.sessionId, {
            clientName: options.clientName,
        });
    }
    return {
        clientId: options.clientId,
        clientSecret: options.clientSecret,
        clientName: options.clientName,
        clientType,
    };
}

async function getSessionIdFromOauthState(storageUtility, oauthState) {
    return storageUtility.getForUser(oauthState, "sessionId");
}
async function loadOidcContextFromStorage(sessionId, storageUtility, configFetcher) {
    try {
        const [issuerIri, codeVerifier, storedRedirectIri, dpop] = await Promise.all([
            storageUtility.getForUser(sessionId, "issuer", {
                errorIfNull: true,
            }),
            storageUtility.getForUser(sessionId, "codeVerifier"),
            storageUtility.getForUser(sessionId, "redirectUrl"),
            storageUtility.getForUser(sessionId, "dpop", { errorIfNull: true }),
        ]);
        await storageUtility.deleteForUser(sessionId, "codeVerifier");
        const issuerConfig = await configFetcher.fetchConfig(issuerIri);
        return {
            codeVerifier,
            redirectUrl: storedRedirectIri,
            issuerConfig,
            dpop: dpop === "true",
        };
    }
    catch (e) {
        throw new Error(`Failed to retrieve OIDC context from storage associated with session [${sessionId}]: ${e}`);
    }
}
async function saveSessionInfoToStorage(storageUtility, sessionId, webId, isLoggedIn, refreshToken, secure, dpopKey) {
    if (refreshToken !== undefined) {
        await storageUtility.setForUser(sessionId, { refreshToken }, { secure });
    }
    if (webId !== undefined) {
        await storageUtility.setForUser(sessionId, { webId }, { secure });
    }
    if (isLoggedIn !== undefined) {
        await storageUtility.setForUser(sessionId, { isLoggedIn }, { secure });
    }
    if (dpopKey !== undefined) {
        await storageUtility.setForUser(sessionId, {
            publicKey: JSON.stringify(dpopKey.publicKey),
            privateKey: JSON.stringify(await (0,jose__WEBPACK_IMPORTED_MODULE_1__.exportJWK)(dpopKey.privateKey)),
        }, { secure });
    }
}
class StorageUtility {
    constructor(secureStorage, insecureStorage) {
        this.secureStorage = secureStorage;
        this.insecureStorage = insecureStorage;
    }
    getKey(userId) {
        return `solidClientAuthenticationUser:${userId}`;
    }
    async getUserData(userId, secure) {
        const stored = await (secure
            ? this.secureStorage
            : this.insecureStorage).get(this.getKey(userId));
        if (stored === undefined) {
            return {};
        }
        try {
            return JSON.parse(stored);
        }
        catch (err) {
            throw new Error(`Data for user [${userId}] in [${secure ? "secure" : "unsecure"}] storage is corrupted - expected valid JSON, but got: ${stored}`);
        }
    }
    async setUserData(userId, data, secure) {
        await (secure ? this.secureStorage : this.insecureStorage).set(this.getKey(userId), JSON.stringify(data));
    }
    async get(key, options) {
        const value = await ((options === null || options === void 0 ? void 0 : options.secure)
            ? this.secureStorage
            : this.insecureStorage).get(key);
        if (value === undefined && (options === null || options === void 0 ? void 0 : options.errorIfNull)) {
            throw new Error(`[${key}] is not stored`);
        }
        return value;
    }
    async set(key, value, options) {
        return ((options === null || options === void 0 ? void 0 : options.secure) ? this.secureStorage : this.insecureStorage).set(key, value);
    }
    async delete(key, options) {
        return ((options === null || options === void 0 ? void 0 : options.secure) ? this.secureStorage : this.insecureStorage).delete(key);
    }
    async getForUser(userId, key, options) {
        const userData = await this.getUserData(userId, options === null || options === void 0 ? void 0 : options.secure);
        let value;
        if (!userData || !userData[key]) {
            value = undefined;
        }
        value = userData[key];
        if (value === undefined && (options === null || options === void 0 ? void 0 : options.errorIfNull)) {
            throw new Error(`Field [${key}] for user [${userId}] is not stored`);
        }
        return value || undefined;
    }
    async setForUser(userId, values, options) {
        let userData;
        try {
            userData = await this.getUserData(userId, options === null || options === void 0 ? void 0 : options.secure);
        }
        catch (_a) {
            userData = {};
        }
        await this.setUserData(userId, { ...userData, ...values }, options === null || options === void 0 ? void 0 : options.secure);
    }
    async deleteForUser(userId, key, options) {
        const userData = await this.getUserData(userId, options === null || options === void 0 ? void 0 : options.secure);
        delete userData[key];
        await this.setUserData(userId, userData, options === null || options === void 0 ? void 0 : options.secure);
    }
    async deleteAllUserData(userId, options) {
        await ((options === null || options === void 0 ? void 0 : options.secure) ? this.secureStorage : this.insecureStorage).delete(this.getKey(userId));
    }
}

class InMemoryStorage {
    constructor() {
        this.map = {};
    }
    async get(key) {
        return this.map[key] || undefined;
    }
    async set(key, value) {
        this.map[key] = value;
    }
    async delete(key) {
        delete this.map[key];
    }
}

class ConfigurationError extends Error {
    constructor(message) {
        super(message);
    }
}

class NotImplementedError extends Error {
    constructor(methodName) {
        super(`[${methodName}] is not implemented`);
    }
}

class InvalidResponseError extends Error {
    constructor(missingFields) {
        super(`Invalid response from OIDC provider: missing fields ${missingFields}`);
        this.missingFields = missingFields;
    }
}

class OidcProviderError extends Error {
    constructor(message, error, errorDescription) {
        super(message);
        this.error = error;
        this.errorDescription = errorDescription;
    }
}

function normalizeHTU(audience) {
    const audienceUrl = new URL(audience);
    return new URL(audienceUrl.pathname, audienceUrl.origin).toString();
}
async function createDpopHeader(audience, method, dpopKey) {
    return new jose__WEBPACK_IMPORTED_MODULE_1__.SignJWT({
        htu: normalizeHTU(audience),
        htm: method.toUpperCase(),
        jti: (0,uuid__WEBPACK_IMPORTED_MODULE_3__["default"])(),
    })
        .setProtectedHeader({
        alg: PREFERRED_SIGNING_ALG[0],
        jwk: dpopKey.publicKey,
        typ: "dpop+jwt",
    })
        .setIssuedAt()
        .sign(dpopKey.privateKey, {});
}
async function generateDpopKeyPair() {
    const { privateKey, publicKey } = await (0,jose__WEBPACK_IMPORTED_MODULE_1__.generateKeyPair)(PREFERRED_SIGNING_ALG[0]);
    const dpopKeyPair = {
        privateKey,
        publicKey: await (0,jose__WEBPACK_IMPORTED_MODULE_1__.exportJWK)(publicKey),
    };
    [dpopKeyPair.publicKey.alg] = PREFERRED_SIGNING_ALG;
    return dpopKeyPair;
}

const DEFAULT_EXPIRATION_TIME_SECONDS = 600;
function isExpectedAuthError(statusCode) {
    return [401, 403].includes(statusCode);
}
async function buildDpopFetchOptions(targetUrl, authToken, dpopKey, defaultOptions) {
    var _a;
    const headers = new _inrupt_universal_fetch__WEBPACK_IMPORTED_MODULE_2__.Headers(defaultOptions === null || defaultOptions === void 0 ? void 0 : defaultOptions.headers);
    headers.set("Authorization", `DPoP ${authToken}`);
    headers.set("DPoP", await createDpopHeader(targetUrl, (_a = defaultOptions === null || defaultOptions === void 0 ? void 0 : defaultOptions.method) !== null && _a !== void 0 ? _a : "get", dpopKey));
    return {
        ...defaultOptions,
        headers,
    };
}
async function buildAuthenticatedHeaders(targetUrl, authToken, dpopKey, defaultOptions) {
    if (dpopKey !== undefined) {
        return buildDpopFetchOptions(targetUrl, authToken, dpopKey, defaultOptions);
    }
    const headers = new _inrupt_universal_fetch__WEBPACK_IMPORTED_MODULE_2__.Headers(defaultOptions === null || defaultOptions === void 0 ? void 0 : defaultOptions.headers);
    headers.set("Authorization", `Bearer ${authToken}`);
    return {
        ...defaultOptions,
        headers,
    };
}
async function makeAuthenticatedRequest(unauthFetch, accessToken, url, defaultRequestInit, dpopKey) {
    return unauthFetch(url, await buildAuthenticatedHeaders(url.toString(), accessToken, dpopKey, defaultRequestInit));
}
async function refreshAccessToken(refreshOptions, dpopKey, eventEmitter) {
    var _a;
    const tokenSet = await refreshOptions.tokenRefresher.refresh(refreshOptions.sessionId, refreshOptions.refreshToken, dpopKey);
    eventEmitter === null || eventEmitter === void 0 ? void 0 : eventEmitter.emit(EVENTS.SESSION_EXTENDED, (_a = tokenSet.expiresIn) !== null && _a !== void 0 ? _a : DEFAULT_EXPIRATION_TIME_SECONDS);
    if (typeof tokenSet.refreshToken === "string") {
        eventEmitter === null || eventEmitter === void 0 ? void 0 : eventEmitter.emit(EVENTS.NEW_REFRESH_TOKEN, tokenSet.refreshToken);
    }
    return {
        accessToken: tokenSet.accessToken,
        refreshToken: tokenSet.refreshToken,
        expiresIn: tokenSet.expiresIn,
    };
}
const computeRefreshDelay = (expiresIn) => {
    if (expiresIn !== undefined) {
        return expiresIn - REFRESH_BEFORE_EXPIRATION_SECONDS > 0
            ?
                expiresIn - REFRESH_BEFORE_EXPIRATION_SECONDS
            : expiresIn;
    }
    return DEFAULT_EXPIRATION_TIME_SECONDS;
};
async function buildAuthenticatedFetch(unauthFetch, accessToken, options) {
    var _a;
    let currentAccessToken = accessToken;
    let latestTimeout;
    const currentRefreshOptions = options === null || options === void 0 ? void 0 : options.refreshOptions;
    if (currentRefreshOptions !== undefined) {
        const proactivelyRefreshToken = async () => {
            var _a, _b, _c, _d;
            try {
                const { accessToken: refreshedAccessToken, refreshToken, expiresIn, } = await refreshAccessToken(currentRefreshOptions, options.dpopKey, options.eventEmitter);
                currentAccessToken = refreshedAccessToken;
                if (refreshToken !== undefined) {
                    currentRefreshOptions.refreshToken = refreshToken;
                }
                clearTimeout(latestTimeout);
                latestTimeout = setTimeout(proactivelyRefreshToken, computeRefreshDelay(expiresIn) * 1000);
                (_a = options.eventEmitter) === null || _a === void 0 ? void 0 : _a.emit(EVENTS.TIMEOUT_SET, latestTimeout);
            }
            catch (e) {
                if (e instanceof OidcProviderError) {
                    (_b = options === null || options === void 0 ? void 0 : options.eventEmitter) === null || _b === void 0 ? void 0 : _b.emit(EVENTS.ERROR, e.error, e.errorDescription);
                    (_c = options === null || options === void 0 ? void 0 : options.eventEmitter) === null || _c === void 0 ? void 0 : _c.emit(EVENTS.SESSION_EXPIRED);
                }
                if (e instanceof InvalidResponseError &&
                    e.missingFields.includes("access_token")) {
                    (_d = options === null || options === void 0 ? void 0 : options.eventEmitter) === null || _d === void 0 ? void 0 : _d.emit(EVENTS.SESSION_EXPIRED);
                }
            }
        };
        latestTimeout = setTimeout(proactivelyRefreshToken, computeRefreshDelay(options.expiresIn) * 1000);
        (_a = options.eventEmitter) === null || _a === void 0 ? void 0 : _a.emit(EVENTS.TIMEOUT_SET, latestTimeout);
    }
    else if (options !== undefined && options.eventEmitter !== undefined) {
        const expirationTimeout = setTimeout(() => {
            options.eventEmitter.emit(EVENTS.SESSION_EXPIRED);
        }, computeRefreshDelay(options.expiresIn) * 1000);
        options.eventEmitter.emit(EVENTS.TIMEOUT_SET, expirationTimeout);
    }
    return async (url, requestInit) => {
        let response = await makeAuthenticatedRequest(unauthFetch, currentAccessToken, url, requestInit, options === null || options === void 0 ? void 0 : options.dpopKey);
        const failedButNotExpectedAuthError = !response.ok && !isExpectedAuthError(response.status);
        if (response.ok || failedButNotExpectedAuthError) {
            return response;
        }
        const hasBeenRedirected = response.url !== url;
        if (hasBeenRedirected && (options === null || options === void 0 ? void 0 : options.dpopKey) !== undefined) {
            response = await makeAuthenticatedRequest(unauthFetch, currentAccessToken, response.url, requestInit, options.dpopKey);
        }
        return response;
    };
}

const StorageUtilityGetResponse = "getResponse";
const StorageUtilityMock = {
    get: async (key, options) => StorageUtilityGetResponse,
    set: async (key, value) => {
    },
    delete: async (key) => {
    },
    getForUser: async (userId, key, options) => StorageUtilityGetResponse,
    setForUser: async (userId, values, options) => {
    },
    deleteForUser: async (userId, key, options) => {
    },
    deleteAllUserData: async (userId, options) => {
    },
};
const mockStorage = (stored) => {
    const store = stored;
    return {
        get: async (key) => {
            if (store[key] === undefined) {
                return undefined;
            }
            if (typeof store[key] === "string") {
                return store[key];
            }
            return JSON.stringify(store[key]);
        },
        set: async (key, value) => {
            store[key] = value;
        },
        delete: async (key) => {
            delete store[key];
        },
    };
};
const mockStorageUtility = (stored, isSecure = false) => {
    if (isSecure) {
        return new StorageUtility(mockStorage(stored), mockStorage({}));
    }
    return new StorageUtility(mockStorage({}), mockStorage(stored));
};




/***/ }),

/***/ "../core/node_modules/@inrupt/universal-fetch/dist/index-browser.mjs":
/*!***************************************************************************!*\
  !*** ../core/node_modules/@inrupt/universal-fetch/dist/index-browser.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Headers": () => (/* binding */ Headers),
/* harmony export */   "Request": () => (/* binding */ Request),
/* harmony export */   "Response": () => (/* binding */ Response),
/* harmony export */   "default": () => (/* binding */ indexBrowser),
/* harmony export */   "fetch": () => (/* binding */ fetch)
/* harmony export */ });
var indexBrowser = globalThis.fetch;
const { fetch, Response, Request, Headers } = globalThis;




/***/ }),

/***/ "../core/node_modules/jose/dist/browser/index.js":
/*!*******************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/index.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CompactEncrypt": () => (/* reexport safe */ _jwe_compact_encrypt_js__WEBPACK_IMPORTED_MODULE_9__.CompactEncrypt),
/* harmony export */   "CompactSign": () => (/* reexport safe */ _jws_compact_sign_js__WEBPACK_IMPORTED_MODULE_11__.CompactSign),
/* harmony export */   "EmbeddedJWK": () => (/* reexport safe */ _jwk_embedded_js__WEBPACK_IMPORTED_MODULE_17__.EmbeddedJWK),
/* harmony export */   "EncryptJWT": () => (/* reexport safe */ _jwt_encrypt_js__WEBPACK_IMPORTED_MODULE_15__.EncryptJWT),
/* harmony export */   "FlattenedEncrypt": () => (/* reexport safe */ _jwe_flattened_encrypt_js__WEBPACK_IMPORTED_MODULE_10__.FlattenedEncrypt),
/* harmony export */   "FlattenedSign": () => (/* reexport safe */ _jws_flattened_sign_js__WEBPACK_IMPORTED_MODULE_12__.FlattenedSign),
/* harmony export */   "GeneralEncrypt": () => (/* reexport safe */ _jwe_general_encrypt_js__WEBPACK_IMPORTED_MODULE_3__.GeneralEncrypt),
/* harmony export */   "GeneralSign": () => (/* reexport safe */ _jws_general_sign_js__WEBPACK_IMPORTED_MODULE_13__.GeneralSign),
/* harmony export */   "SignJWT": () => (/* reexport safe */ _jwt_sign_js__WEBPACK_IMPORTED_MODULE_14__.SignJWT),
/* harmony export */   "UnsecuredJWT": () => (/* reexport safe */ _jwt_unsecured_js__WEBPACK_IMPORTED_MODULE_20__.UnsecuredJWT),
/* harmony export */   "base64url": () => (/* reexport module object */ _util_base64url_js__WEBPACK_IMPORTED_MODULE_28__),
/* harmony export */   "calculateJwkThumbprint": () => (/* reexport safe */ _jwk_thumbprint_js__WEBPACK_IMPORTED_MODULE_16__.calculateJwkThumbprint),
/* harmony export */   "calculateJwkThumbprintUri": () => (/* reexport safe */ _jwk_thumbprint_js__WEBPACK_IMPORTED_MODULE_16__.calculateJwkThumbprintUri),
/* harmony export */   "compactDecrypt": () => (/* reexport safe */ _jwe_compact_decrypt_js__WEBPACK_IMPORTED_MODULE_0__.compactDecrypt),
/* harmony export */   "compactVerify": () => (/* reexport safe */ _jws_compact_verify_js__WEBPACK_IMPORTED_MODULE_4__.compactVerify),
/* harmony export */   "createLocalJWKSet": () => (/* reexport safe */ _jwks_local_js__WEBPACK_IMPORTED_MODULE_18__.createLocalJWKSet),
/* harmony export */   "createRemoteJWKSet": () => (/* reexport safe */ _jwks_remote_js__WEBPACK_IMPORTED_MODULE_19__.createRemoteJWKSet),
/* harmony export */   "decodeJwt": () => (/* reexport safe */ _util_decode_jwt_js__WEBPACK_IMPORTED_MODULE_24__.decodeJwt),
/* harmony export */   "decodeProtectedHeader": () => (/* reexport safe */ _util_decode_protected_header_js__WEBPACK_IMPORTED_MODULE_23__.decodeProtectedHeader),
/* harmony export */   "errors": () => (/* reexport module object */ _util_errors_js__WEBPACK_IMPORTED_MODULE_25__),
/* harmony export */   "exportJWK": () => (/* reexport safe */ _key_export_js__WEBPACK_IMPORTED_MODULE_21__.exportJWK),
/* harmony export */   "exportPKCS8": () => (/* reexport safe */ _key_export_js__WEBPACK_IMPORTED_MODULE_21__.exportPKCS8),
/* harmony export */   "exportSPKI": () => (/* reexport safe */ _key_export_js__WEBPACK_IMPORTED_MODULE_21__.exportSPKI),
/* harmony export */   "flattenedDecrypt": () => (/* reexport safe */ _jwe_flattened_decrypt_js__WEBPACK_IMPORTED_MODULE_1__.flattenedDecrypt),
/* harmony export */   "flattenedVerify": () => (/* reexport safe */ _jws_flattened_verify_js__WEBPACK_IMPORTED_MODULE_5__.flattenedVerify),
/* harmony export */   "generalDecrypt": () => (/* reexport safe */ _jwe_general_decrypt_js__WEBPACK_IMPORTED_MODULE_2__.generalDecrypt),
/* harmony export */   "generalVerify": () => (/* reexport safe */ _jws_general_verify_js__WEBPACK_IMPORTED_MODULE_6__.generalVerify),
/* harmony export */   "generateKeyPair": () => (/* reexport safe */ _key_generate_key_pair_js__WEBPACK_IMPORTED_MODULE_26__.generateKeyPair),
/* harmony export */   "generateSecret": () => (/* reexport safe */ _key_generate_secret_js__WEBPACK_IMPORTED_MODULE_27__.generateSecret),
/* harmony export */   "importJWK": () => (/* reexport safe */ _key_import_js__WEBPACK_IMPORTED_MODULE_22__.importJWK),
/* harmony export */   "importPKCS8": () => (/* reexport safe */ _key_import_js__WEBPACK_IMPORTED_MODULE_22__.importPKCS8),
/* harmony export */   "importSPKI": () => (/* reexport safe */ _key_import_js__WEBPACK_IMPORTED_MODULE_22__.importSPKI),
/* harmony export */   "importX509": () => (/* reexport safe */ _key_import_js__WEBPACK_IMPORTED_MODULE_22__.importX509),
/* harmony export */   "jwtDecrypt": () => (/* reexport safe */ _jwt_decrypt_js__WEBPACK_IMPORTED_MODULE_8__.jwtDecrypt),
/* harmony export */   "jwtVerify": () => (/* reexport safe */ _jwt_verify_js__WEBPACK_IMPORTED_MODULE_7__.jwtVerify)
/* harmony export */ });
/* harmony import */ var _jwe_compact_decrypt_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./jwe/compact/decrypt.js */ "../core/node_modules/jose/dist/browser/jwe/compact/decrypt.js");
/* harmony import */ var _jwe_flattened_decrypt_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./jwe/flattened/decrypt.js */ "../core/node_modules/jose/dist/browser/jwe/flattened/decrypt.js");
/* harmony import */ var _jwe_general_decrypt_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./jwe/general/decrypt.js */ "../core/node_modules/jose/dist/browser/jwe/general/decrypt.js");
/* harmony import */ var _jwe_general_encrypt_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./jwe/general/encrypt.js */ "../core/node_modules/jose/dist/browser/jwe/general/encrypt.js");
/* harmony import */ var _jws_compact_verify_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./jws/compact/verify.js */ "../core/node_modules/jose/dist/browser/jws/compact/verify.js");
/* harmony import */ var _jws_flattened_verify_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./jws/flattened/verify.js */ "../core/node_modules/jose/dist/browser/jws/flattened/verify.js");
/* harmony import */ var _jws_general_verify_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./jws/general/verify.js */ "../core/node_modules/jose/dist/browser/jws/general/verify.js");
/* harmony import */ var _jwt_verify_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./jwt/verify.js */ "../core/node_modules/jose/dist/browser/jwt/verify.js");
/* harmony import */ var _jwt_decrypt_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./jwt/decrypt.js */ "../core/node_modules/jose/dist/browser/jwt/decrypt.js");
/* harmony import */ var _jwe_compact_encrypt_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./jwe/compact/encrypt.js */ "../core/node_modules/jose/dist/browser/jwe/compact/encrypt.js");
/* harmony import */ var _jwe_flattened_encrypt_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./jwe/flattened/encrypt.js */ "../core/node_modules/jose/dist/browser/jwe/flattened/encrypt.js");
/* harmony import */ var _jws_compact_sign_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./jws/compact/sign.js */ "../core/node_modules/jose/dist/browser/jws/compact/sign.js");
/* harmony import */ var _jws_flattened_sign_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./jws/flattened/sign.js */ "../core/node_modules/jose/dist/browser/jws/flattened/sign.js");
/* harmony import */ var _jws_general_sign_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./jws/general/sign.js */ "../core/node_modules/jose/dist/browser/jws/general/sign.js");
/* harmony import */ var _jwt_sign_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./jwt/sign.js */ "../core/node_modules/jose/dist/browser/jwt/sign.js");
/* harmony import */ var _jwt_encrypt_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./jwt/encrypt.js */ "../core/node_modules/jose/dist/browser/jwt/encrypt.js");
/* harmony import */ var _jwk_thumbprint_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./jwk/thumbprint.js */ "../core/node_modules/jose/dist/browser/jwk/thumbprint.js");
/* harmony import */ var _jwk_embedded_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./jwk/embedded.js */ "../core/node_modules/jose/dist/browser/jwk/embedded.js");
/* harmony import */ var _jwks_local_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./jwks/local.js */ "../core/node_modules/jose/dist/browser/jwks/local.js");
/* harmony import */ var _jwks_remote_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./jwks/remote.js */ "../core/node_modules/jose/dist/browser/jwks/remote.js");
/* harmony import */ var _jwt_unsecured_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./jwt/unsecured.js */ "../core/node_modules/jose/dist/browser/jwt/unsecured.js");
/* harmony import */ var _key_export_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./key/export.js */ "../core/node_modules/jose/dist/browser/key/export.js");
/* harmony import */ var _key_import_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./key/import.js */ "../core/node_modules/jose/dist/browser/key/import.js");
/* harmony import */ var _util_decode_protected_header_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./util/decode_protected_header.js */ "../core/node_modules/jose/dist/browser/util/decode_protected_header.js");
/* harmony import */ var _util_decode_jwt_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./util/decode_jwt.js */ "../core/node_modules/jose/dist/browser/util/decode_jwt.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _key_generate_key_pair_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./key/generate_key_pair.js */ "../core/node_modules/jose/dist/browser/key/generate_key_pair.js");
/* harmony import */ var _key_generate_secret_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./key/generate_secret.js */ "../core/node_modules/jose/dist/browser/key/generate_secret.js");
/* harmony import */ var _util_base64url_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./util/base64url.js */ "../core/node_modules/jose/dist/browser/util/base64url.js");

































/***/ }),

/***/ "../core/node_modules/jose/dist/browser/jwe/compact/decrypt.js":
/*!*********************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/jwe/compact/decrypt.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "compactDecrypt": () => (/* binding */ compactDecrypt)
/* harmony export */ });
/* harmony import */ var _flattened_decrypt_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../flattened/decrypt.js */ "../core/node_modules/jose/dist/browser/jwe/flattened/decrypt.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/buffer_utils.js */ "../core/node_modules/jose/dist/browser/lib/buffer_utils.js");



async function compactDecrypt(jwe, key, options) {
    if (jwe instanceof Uint8Array) {
        jwe = _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_2__.decoder.decode(jwe);
    }
    if (typeof jwe !== 'string') {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWEInvalid('Compact JWE must be a string or Uint8Array');
    }
    const { 0: protectedHeader, 1: encryptedKey, 2: iv, 3: ciphertext, 4: tag, length, } = jwe.split('.');
    if (length !== 5) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWEInvalid('Invalid Compact JWE');
    }
    const decrypted = await (0,_flattened_decrypt_js__WEBPACK_IMPORTED_MODULE_0__.flattenedDecrypt)({
        ciphertext,
        iv: (iv || undefined),
        protected: protectedHeader || undefined,
        tag: (tag || undefined),
        encrypted_key: encryptedKey || undefined,
    }, key, options);
    const result = { plaintext: decrypted.plaintext, protectedHeader: decrypted.protectedHeader };
    if (typeof key === 'function') {
        return { ...result, key: decrypted.key };
    }
    return result;
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/jwe/compact/encrypt.js":
/*!*********************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/jwe/compact/encrypt.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CompactEncrypt": () => (/* binding */ CompactEncrypt)
/* harmony export */ });
/* harmony import */ var _flattened_encrypt_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../flattened/encrypt.js */ "../core/node_modules/jose/dist/browser/jwe/flattened/encrypt.js");

class CompactEncrypt {
    constructor(plaintext) {
        this._flattened = new _flattened_encrypt_js__WEBPACK_IMPORTED_MODULE_0__.FlattenedEncrypt(plaintext);
    }
    setContentEncryptionKey(cek) {
        this._flattened.setContentEncryptionKey(cek);
        return this;
    }
    setInitializationVector(iv) {
        this._flattened.setInitializationVector(iv);
        return this;
    }
    setProtectedHeader(protectedHeader) {
        this._flattened.setProtectedHeader(protectedHeader);
        return this;
    }
    setKeyManagementParameters(parameters) {
        this._flattened.setKeyManagementParameters(parameters);
        return this;
    }
    async encrypt(key, options) {
        const jwe = await this._flattened.encrypt(key, options);
        return [jwe.protected, jwe.encrypted_key, jwe.iv, jwe.ciphertext, jwe.tag].join('.');
    }
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/jwe/flattened/decrypt.js":
/*!***********************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/jwe/flattened/decrypt.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "flattenedDecrypt": () => (/* binding */ flattenedDecrypt)
/* harmony export */ });
/* harmony import */ var _runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../runtime/base64url.js */ "../core/node_modules/jose/dist/browser/runtime/base64url.js");
/* harmony import */ var _runtime_decrypt_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../runtime/decrypt.js */ "../core/node_modules/jose/dist/browser/runtime/decrypt.js");
/* harmony import */ var _runtime_zlib_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../runtime/zlib.js */ "../core/node_modules/jose/dist/browser/runtime/zlib.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _lib_is_disjoint_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/is_disjoint.js */ "../core/node_modules/jose/dist/browser/lib/is_disjoint.js");
/* harmony import */ var _lib_is_object_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../lib/is_object.js */ "../core/node_modules/jose/dist/browser/lib/is_object.js");
/* harmony import */ var _lib_decrypt_key_management_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../lib/decrypt_key_management.js */ "../core/node_modules/jose/dist/browser/lib/decrypt_key_management.js");
/* harmony import */ var _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../lib/buffer_utils.js */ "../core/node_modules/jose/dist/browser/lib/buffer_utils.js");
/* harmony import */ var _lib_cek_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../lib/cek.js */ "../core/node_modules/jose/dist/browser/lib/cek.js");
/* harmony import */ var _lib_validate_crit_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../lib/validate_crit.js */ "../core/node_modules/jose/dist/browser/lib/validate_crit.js");
/* harmony import */ var _lib_validate_algorithms_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../lib/validate_algorithms.js */ "../core/node_modules/jose/dist/browser/lib/validate_algorithms.js");











async function flattenedDecrypt(jwe, key, options) {
    var _a;
    if (!(0,_lib_is_object_js__WEBPACK_IMPORTED_MODULE_5__["default"])(jwe)) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JWEInvalid('Flattened JWE must be an object');
    }
    if (jwe.protected === undefined && jwe.header === undefined && jwe.unprotected === undefined) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JWEInvalid('JOSE Header missing');
    }
    if (typeof jwe.iv !== 'string') {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JWEInvalid('JWE Initialization Vector missing or incorrect type');
    }
    if (typeof jwe.ciphertext !== 'string') {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JWEInvalid('JWE Ciphertext missing or incorrect type');
    }
    if (typeof jwe.tag !== 'string') {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JWEInvalid('JWE Authentication Tag missing or incorrect type');
    }
    if (jwe.protected !== undefined && typeof jwe.protected !== 'string') {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JWEInvalid('JWE Protected Header incorrect type');
    }
    if (jwe.encrypted_key !== undefined && typeof jwe.encrypted_key !== 'string') {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JWEInvalid('JWE Encrypted Key incorrect type');
    }
    if (jwe.aad !== undefined && typeof jwe.aad !== 'string') {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JWEInvalid('JWE AAD incorrect type');
    }
    if (jwe.header !== undefined && !(0,_lib_is_object_js__WEBPACK_IMPORTED_MODULE_5__["default"])(jwe.header)) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JWEInvalid('JWE Shared Unprotected Header incorrect type');
    }
    if (jwe.unprotected !== undefined && !(0,_lib_is_object_js__WEBPACK_IMPORTED_MODULE_5__["default"])(jwe.unprotected)) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JWEInvalid('JWE Per-Recipient Unprotected Header incorrect type');
    }
    let parsedProt;
    if (jwe.protected) {
        try {
            const protectedHeader = (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.decode)(jwe.protected);
            parsedProt = JSON.parse(_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_7__.decoder.decode(protectedHeader));
        }
        catch (_b) {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JWEInvalid('JWE Protected Header is invalid');
        }
    }
    if (!(0,_lib_is_disjoint_js__WEBPACK_IMPORTED_MODULE_4__["default"])(parsedProt, jwe.header, jwe.unprotected)) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JWEInvalid('JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint');
    }
    const joseHeader = {
        ...parsedProt,
        ...jwe.header,
        ...jwe.unprotected,
    };
    (0,_lib_validate_crit_js__WEBPACK_IMPORTED_MODULE_9__["default"])(_util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JWEInvalid, new Map(), options === null || options === void 0 ? void 0 : options.crit, parsedProt, joseHeader);
    if (joseHeader.zip !== undefined) {
        if (!parsedProt || !parsedProt.zip) {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');
        }
        if (joseHeader.zip !== 'DEF') {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value');
        }
    }
    const { alg, enc } = joseHeader;
    if (typeof alg !== 'string' || !alg) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JWEInvalid('missing JWE Algorithm (alg) in JWE Header');
    }
    if (typeof enc !== 'string' || !enc) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JWEInvalid('missing JWE Encryption Algorithm (enc) in JWE Header');
    }
    const keyManagementAlgorithms = options && (0,_lib_validate_algorithms_js__WEBPACK_IMPORTED_MODULE_10__["default"])('keyManagementAlgorithms', options.keyManagementAlgorithms);
    const contentEncryptionAlgorithms = options &&
        (0,_lib_validate_algorithms_js__WEBPACK_IMPORTED_MODULE_10__["default"])('contentEncryptionAlgorithms', options.contentEncryptionAlgorithms);
    if (keyManagementAlgorithms && !keyManagementAlgorithms.has(alg)) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');
    }
    if (contentEncryptionAlgorithms && !contentEncryptionAlgorithms.has(enc)) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter not allowed');
    }
    let encryptedKey;
    if (jwe.encrypted_key !== undefined) {
        encryptedKey = (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.decode)(jwe.encrypted_key);
    }
    let resolvedKey = false;
    if (typeof key === 'function') {
        key = await key(parsedProt, jwe);
        resolvedKey = true;
    }
    let cek;
    try {
        cek = await (0,_lib_decrypt_key_management_js__WEBPACK_IMPORTED_MODULE_6__["default"])(alg, key, encryptedKey, joseHeader, options);
    }
    catch (err) {
        if (err instanceof TypeError || err instanceof _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JWEInvalid || err instanceof _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JOSENotSupported) {
            throw err;
        }
        cek = (0,_lib_cek_js__WEBPACK_IMPORTED_MODULE_8__["default"])(enc);
    }
    const iv = (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.decode)(jwe.iv);
    const tag = (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.decode)(jwe.tag);
    const protectedHeader = _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_7__.encoder.encode((_a = jwe.protected) !== null && _a !== void 0 ? _a : '');
    let additionalData;
    if (jwe.aad !== undefined) {
        additionalData = (0,_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_7__.concat)(protectedHeader, _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_7__.encoder.encode('.'), _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_7__.encoder.encode(jwe.aad));
    }
    else {
        additionalData = protectedHeader;
    }
    let plaintext = await (0,_runtime_decrypt_js__WEBPACK_IMPORTED_MODULE_1__["default"])(enc, cek, (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.decode)(jwe.ciphertext), iv, tag, additionalData);
    if (joseHeader.zip === 'DEF') {
        plaintext = await ((options === null || options === void 0 ? void 0 : options.inflateRaw) || _runtime_zlib_js__WEBPACK_IMPORTED_MODULE_2__.inflate)(plaintext);
    }
    const result = { plaintext };
    if (jwe.protected !== undefined) {
        result.protectedHeader = parsedProt;
    }
    if (jwe.aad !== undefined) {
        result.additionalAuthenticatedData = (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.decode)(jwe.aad);
    }
    if (jwe.unprotected !== undefined) {
        result.sharedUnprotectedHeader = jwe.unprotected;
    }
    if (jwe.header !== undefined) {
        result.unprotectedHeader = jwe.header;
    }
    if (resolvedKey) {
        return { ...result, key };
    }
    return result;
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/jwe/flattened/encrypt.js":
/*!***********************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/jwe/flattened/encrypt.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FlattenedEncrypt": () => (/* binding */ FlattenedEncrypt),
/* harmony export */   "unprotected": () => (/* binding */ unprotected)
/* harmony export */ });
/* harmony import */ var _runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../runtime/base64url.js */ "../core/node_modules/jose/dist/browser/runtime/base64url.js");
/* harmony import */ var _runtime_encrypt_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../runtime/encrypt.js */ "../core/node_modules/jose/dist/browser/runtime/encrypt.js");
/* harmony import */ var _runtime_zlib_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../runtime/zlib.js */ "../core/node_modules/jose/dist/browser/runtime/zlib.js");
/* harmony import */ var _lib_iv_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/iv.js */ "../core/node_modules/jose/dist/browser/lib/iv.js");
/* harmony import */ var _lib_encrypt_key_management_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/encrypt_key_management.js */ "../core/node_modules/jose/dist/browser/lib/encrypt_key_management.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _lib_is_disjoint_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../lib/is_disjoint.js */ "../core/node_modules/jose/dist/browser/lib/is_disjoint.js");
/* harmony import */ var _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../lib/buffer_utils.js */ "../core/node_modules/jose/dist/browser/lib/buffer_utils.js");
/* harmony import */ var _lib_validate_crit_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../lib/validate_crit.js */ "../core/node_modules/jose/dist/browser/lib/validate_crit.js");









const unprotected = Symbol();
class FlattenedEncrypt {
    constructor(plaintext) {
        if (!(plaintext instanceof Uint8Array)) {
            throw new TypeError('plaintext must be an instance of Uint8Array');
        }
        this._plaintext = plaintext;
    }
    setKeyManagementParameters(parameters) {
        if (this._keyManagementParameters) {
            throw new TypeError('setKeyManagementParameters can only be called once');
        }
        this._keyManagementParameters = parameters;
        return this;
    }
    setProtectedHeader(protectedHeader) {
        if (this._protectedHeader) {
            throw new TypeError('setProtectedHeader can only be called once');
        }
        this._protectedHeader = protectedHeader;
        return this;
    }
    setSharedUnprotectedHeader(sharedUnprotectedHeader) {
        if (this._sharedUnprotectedHeader) {
            throw new TypeError('setSharedUnprotectedHeader can only be called once');
        }
        this._sharedUnprotectedHeader = sharedUnprotectedHeader;
        return this;
    }
    setUnprotectedHeader(unprotectedHeader) {
        if (this._unprotectedHeader) {
            throw new TypeError('setUnprotectedHeader can only be called once');
        }
        this._unprotectedHeader = unprotectedHeader;
        return this;
    }
    setAdditionalAuthenticatedData(aad) {
        this._aad = aad;
        return this;
    }
    setContentEncryptionKey(cek) {
        if (this._cek) {
            throw new TypeError('setContentEncryptionKey can only be called once');
        }
        this._cek = cek;
        return this;
    }
    setInitializationVector(iv) {
        if (this._iv) {
            throw new TypeError('setInitializationVector can only be called once');
        }
        this._iv = iv;
        return this;
    }
    async encrypt(key, options) {
        if (!this._protectedHeader && !this._unprotectedHeader && !this._sharedUnprotectedHeader) {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JWEInvalid('either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()');
        }
        if (!(0,_lib_is_disjoint_js__WEBPACK_IMPORTED_MODULE_6__["default"])(this._protectedHeader, this._unprotectedHeader, this._sharedUnprotectedHeader)) {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JWEInvalid('JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint');
        }
        const joseHeader = {
            ...this._protectedHeader,
            ...this._unprotectedHeader,
            ...this._sharedUnprotectedHeader,
        };
        (0,_lib_validate_crit_js__WEBPACK_IMPORTED_MODULE_8__["default"])(_util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JWEInvalid, new Map(), options === null || options === void 0 ? void 0 : options.crit, this._protectedHeader, joseHeader);
        if (joseHeader.zip !== undefined) {
            if (!this._protectedHeader || !this._protectedHeader.zip) {
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');
            }
            if (joseHeader.zip !== 'DEF') {
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value');
            }
        }
        const { alg, enc } = joseHeader;
        if (typeof alg !== 'string' || !alg) {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');
        }
        if (typeof enc !== 'string' || !enc) {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');
        }
        let encryptedKey;
        if (alg === 'dir') {
            if (this._cek) {
                throw new TypeError('setContentEncryptionKey cannot be called when using Direct Encryption');
            }
        }
        else if (alg === 'ECDH-ES') {
            if (this._cek) {
                throw new TypeError('setContentEncryptionKey cannot be called when using Direct Key Agreement');
            }
        }
        let cek;
        {
            let parameters;
            ({ cek, encryptedKey, parameters } = await (0,_lib_encrypt_key_management_js__WEBPACK_IMPORTED_MODULE_4__["default"])(alg, enc, key, this._cek, this._keyManagementParameters));
            if (parameters) {
                if (options && unprotected in options) {
                    if (!this._unprotectedHeader) {
                        this.setUnprotectedHeader(parameters);
                    }
                    else {
                        this._unprotectedHeader = { ...this._unprotectedHeader, ...parameters };
                    }
                }
                else {
                    if (!this._protectedHeader) {
                        this.setProtectedHeader(parameters);
                    }
                    else {
                        this._protectedHeader = { ...this._protectedHeader, ...parameters };
                    }
                }
            }
        }
        this._iv || (this._iv = (0,_lib_iv_js__WEBPACK_IMPORTED_MODULE_3__["default"])(enc));
        let additionalData;
        let protectedHeader;
        let aadMember;
        if (this._protectedHeader) {
            protectedHeader = _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_7__.encoder.encode((0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.encode)(JSON.stringify(this._protectedHeader)));
        }
        else {
            protectedHeader = _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_7__.encoder.encode('');
        }
        if (this._aad) {
            aadMember = (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.encode)(this._aad);
            additionalData = (0,_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_7__.concat)(protectedHeader, _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_7__.encoder.encode('.'), _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_7__.encoder.encode(aadMember));
        }
        else {
            additionalData = protectedHeader;
        }
        let ciphertext;
        let tag;
        if (joseHeader.zip === 'DEF') {
            const deflated = await ((options === null || options === void 0 ? void 0 : options.deflateRaw) || _runtime_zlib_js__WEBPACK_IMPORTED_MODULE_2__.deflate)(this._plaintext);
            ({ ciphertext, tag } = await (0,_runtime_encrypt_js__WEBPACK_IMPORTED_MODULE_1__["default"])(enc, deflated, cek, this._iv, additionalData));
        }
        else {
            ;
            ({ ciphertext, tag } = await (0,_runtime_encrypt_js__WEBPACK_IMPORTED_MODULE_1__["default"])(enc, this._plaintext, cek, this._iv, additionalData));
        }
        const jwe = {
            ciphertext: (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.encode)(ciphertext),
            iv: (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.encode)(this._iv),
            tag: (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.encode)(tag),
        };
        if (encryptedKey) {
            jwe.encrypted_key = (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.encode)(encryptedKey);
        }
        if (aadMember) {
            jwe.aad = aadMember;
        }
        if (this._protectedHeader) {
            jwe.protected = _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_7__.decoder.decode(protectedHeader);
        }
        if (this._sharedUnprotectedHeader) {
            jwe.unprotected = this._sharedUnprotectedHeader;
        }
        if (this._unprotectedHeader) {
            jwe.header = this._unprotectedHeader;
        }
        return jwe;
    }
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/jwe/general/decrypt.js":
/*!*********************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/jwe/general/decrypt.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "generalDecrypt": () => (/* binding */ generalDecrypt)
/* harmony export */ });
/* harmony import */ var _flattened_decrypt_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../flattened/decrypt.js */ "../core/node_modules/jose/dist/browser/jwe/flattened/decrypt.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _lib_is_object_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/is_object.js */ "../core/node_modules/jose/dist/browser/lib/is_object.js");



async function generalDecrypt(jwe, key, options) {
    if (!(0,_lib_is_object_js__WEBPACK_IMPORTED_MODULE_2__["default"])(jwe)) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWEInvalid('General JWE must be an object');
    }
    if (!Array.isArray(jwe.recipients) || !jwe.recipients.every(_lib_is_object_js__WEBPACK_IMPORTED_MODULE_2__["default"])) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWEInvalid('JWE Recipients missing or incorrect type');
    }
    if (!jwe.recipients.length) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWEInvalid('JWE Recipients has no members');
    }
    for (const recipient of jwe.recipients) {
        try {
            return await (0,_flattened_decrypt_js__WEBPACK_IMPORTED_MODULE_0__.flattenedDecrypt)({
                aad: jwe.aad,
                ciphertext: jwe.ciphertext,
                encrypted_key: recipient.encrypted_key,
                header: recipient.header,
                iv: jwe.iv,
                protected: jwe.protected,
                tag: jwe.tag,
                unprotected: jwe.unprotected,
            }, key, options);
        }
        catch (_a) {
        }
    }
    throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWEDecryptionFailed();
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/jwe/general/encrypt.js":
/*!*********************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/jwe/general/encrypt.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GeneralEncrypt": () => (/* binding */ GeneralEncrypt)
/* harmony export */ });
/* harmony import */ var _flattened_encrypt_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../flattened/encrypt.js */ "../core/node_modules/jose/dist/browser/jwe/flattened/encrypt.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _lib_cek_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/cek.js */ "../core/node_modules/jose/dist/browser/lib/cek.js");
/* harmony import */ var _lib_is_disjoint_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/is_disjoint.js */ "../core/node_modules/jose/dist/browser/lib/is_disjoint.js");
/* harmony import */ var _lib_encrypt_key_management_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/encrypt_key_management.js */ "../core/node_modules/jose/dist/browser/lib/encrypt_key_management.js");
/* harmony import */ var _runtime_base64url_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../runtime/base64url.js */ "../core/node_modules/jose/dist/browser/runtime/base64url.js");
/* harmony import */ var _lib_validate_crit_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../lib/validate_crit.js */ "../core/node_modules/jose/dist/browser/lib/validate_crit.js");







class IndividualRecipient {
    constructor(enc, key, options) {
        this.parent = enc;
        this.key = key;
        this.options = options;
    }
    setUnprotectedHeader(unprotectedHeader) {
        if (this.unprotectedHeader) {
            throw new TypeError('setUnprotectedHeader can only be called once');
        }
        this.unprotectedHeader = unprotectedHeader;
        return this;
    }
    addRecipient(...args) {
        return this.parent.addRecipient(...args);
    }
    encrypt(...args) {
        return this.parent.encrypt(...args);
    }
    done() {
        return this.parent;
    }
}
class GeneralEncrypt {
    constructor(plaintext) {
        this._recipients = [];
        this._plaintext = plaintext;
    }
    addRecipient(key, options) {
        const recipient = new IndividualRecipient(this, key, { crit: options === null || options === void 0 ? void 0 : options.crit });
        this._recipients.push(recipient);
        return recipient;
    }
    setProtectedHeader(protectedHeader) {
        if (this._protectedHeader) {
            throw new TypeError('setProtectedHeader can only be called once');
        }
        this._protectedHeader = protectedHeader;
        return this;
    }
    setSharedUnprotectedHeader(sharedUnprotectedHeader) {
        if (this._unprotectedHeader) {
            throw new TypeError('setSharedUnprotectedHeader can only be called once');
        }
        this._unprotectedHeader = sharedUnprotectedHeader;
        return this;
    }
    setAdditionalAuthenticatedData(aad) {
        this._aad = aad;
        return this;
    }
    async encrypt(options) {
        var _a, _b, _c;
        if (!this._recipients.length) {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWEInvalid('at least one recipient must be added');
        }
        options = { deflateRaw: options === null || options === void 0 ? void 0 : options.deflateRaw };
        if (this._recipients.length === 1) {
            const [recipient] = this._recipients;
            const flattened = await new _flattened_encrypt_js__WEBPACK_IMPORTED_MODULE_0__.FlattenedEncrypt(this._plaintext)
                .setAdditionalAuthenticatedData(this._aad)
                .setProtectedHeader(this._protectedHeader)
                .setSharedUnprotectedHeader(this._unprotectedHeader)
                .setUnprotectedHeader(recipient.unprotectedHeader)
                .encrypt(recipient.key, { ...recipient.options, ...options });
            let jwe = {
                ciphertext: flattened.ciphertext,
                iv: flattened.iv,
                recipients: [{}],
                tag: flattened.tag,
            };
            if (flattened.aad)
                jwe.aad = flattened.aad;
            if (flattened.protected)
                jwe.protected = flattened.protected;
            if (flattened.unprotected)
                jwe.unprotected = flattened.unprotected;
            if (flattened.encrypted_key)
                jwe.recipients[0].encrypted_key = flattened.encrypted_key;
            if (flattened.header)
                jwe.recipients[0].header = flattened.header;
            return jwe;
        }
        let enc;
        for (let i = 0; i < this._recipients.length; i++) {
            const recipient = this._recipients[i];
            if (!(0,_lib_is_disjoint_js__WEBPACK_IMPORTED_MODULE_3__["default"])(this._protectedHeader, this._unprotectedHeader, recipient.unprotectedHeader)) {
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWEInvalid('JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint');
            }
            const joseHeader = {
                ...this._protectedHeader,
                ...this._unprotectedHeader,
                ...recipient.unprotectedHeader,
            };
            const { alg } = joseHeader;
            if (typeof alg !== 'string' || !alg) {
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');
            }
            if (alg === 'dir' || alg === 'ECDH-ES') {
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWEInvalid('"dir" and "ECDH-ES" alg may only be used with a single recipient');
            }
            if (typeof joseHeader.enc !== 'string' || !joseHeader.enc) {
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');
            }
            if (!enc) {
                enc = joseHeader.enc;
            }
            else if (enc !== joseHeader.enc) {
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');
            }
            (0,_lib_validate_crit_js__WEBPACK_IMPORTED_MODULE_6__["default"])(_util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWEInvalid, new Map(), recipient.options.crit, this._protectedHeader, joseHeader);
            if (joseHeader.zip !== undefined) {
                if (!this._protectedHeader || !this._protectedHeader.zip) {
                    throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');
                }
            }
        }
        const cek = (0,_lib_cek_js__WEBPACK_IMPORTED_MODULE_2__["default"])(enc);
        let jwe = {
            ciphertext: '',
            iv: '',
            recipients: [],
            tag: '',
        };
        for (let i = 0; i < this._recipients.length; i++) {
            const recipient = this._recipients[i];
            const target = {};
            jwe.recipients.push(target);
            const joseHeader = {
                ...this._protectedHeader,
                ...this._unprotectedHeader,
                ...recipient.unprotectedHeader,
            };
            const p2c = joseHeader.alg.startsWith('PBES2') ? 2048 + i : undefined;
            if (i === 0) {
                const flattened = await new _flattened_encrypt_js__WEBPACK_IMPORTED_MODULE_0__.FlattenedEncrypt(this._plaintext)
                    .setAdditionalAuthenticatedData(this._aad)
                    .setContentEncryptionKey(cek)
                    .setProtectedHeader(this._protectedHeader)
                    .setSharedUnprotectedHeader(this._unprotectedHeader)
                    .setUnprotectedHeader(recipient.unprotectedHeader)
                    .setKeyManagementParameters({ p2c })
                    .encrypt(recipient.key, {
                    ...recipient.options,
                    ...options,
                    [_flattened_encrypt_js__WEBPACK_IMPORTED_MODULE_0__.unprotected]: true,
                });
                jwe.ciphertext = flattened.ciphertext;
                jwe.iv = flattened.iv;
                jwe.tag = flattened.tag;
                if (flattened.aad)
                    jwe.aad = flattened.aad;
                if (flattened.protected)
                    jwe.protected = flattened.protected;
                if (flattened.unprotected)
                    jwe.unprotected = flattened.unprotected;
                target.encrypted_key = flattened.encrypted_key;
                if (flattened.header)
                    target.header = flattened.header;
                continue;
            }
            const { encryptedKey, parameters } = await (0,_lib_encrypt_key_management_js__WEBPACK_IMPORTED_MODULE_4__["default"])(((_a = recipient.unprotectedHeader) === null || _a === void 0 ? void 0 : _a.alg) ||
                ((_b = this._protectedHeader) === null || _b === void 0 ? void 0 : _b.alg) ||
                ((_c = this._unprotectedHeader) === null || _c === void 0 ? void 0 : _c.alg), enc, recipient.key, cek, { p2c });
            target.encrypted_key = (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_5__.encode)(encryptedKey);
            if (recipient.unprotectedHeader || parameters)
                target.header = { ...recipient.unprotectedHeader, ...parameters };
        }
        return jwe;
    }
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/jwk/embedded.js":
/*!**************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/jwk/embedded.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EmbeddedJWK": () => (/* binding */ EmbeddedJWK)
/* harmony export */ });
/* harmony import */ var _key_import_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../key/import.js */ "../core/node_modules/jose/dist/browser/key/import.js");
/* harmony import */ var _lib_is_object_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/is_object.js */ "../core/node_modules/jose/dist/browser/lib/is_object.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");



async function EmbeddedJWK(protectedHeader, token) {
    const joseHeader = {
        ...protectedHeader,
        ...token === null || token === void 0 ? void 0 : token.header,
    };
    if (!(0,_lib_is_object_js__WEBPACK_IMPORTED_MODULE_1__["default"])(joseHeader.jwk)) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a JSON object');
    }
    const key = await (0,_key_import_js__WEBPACK_IMPORTED_MODULE_0__.importJWK)({ ...joseHeader.jwk, ext: true }, joseHeader.alg, true);
    if (key instanceof Uint8Array || key.type !== 'public') {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a public key');
    }
    return key;
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/jwk/thumbprint.js":
/*!****************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/jwk/thumbprint.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "calculateJwkThumbprint": () => (/* binding */ calculateJwkThumbprint),
/* harmony export */   "calculateJwkThumbprintUri": () => (/* binding */ calculateJwkThumbprintUri)
/* harmony export */ });
/* harmony import */ var _runtime_digest_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runtime/digest.js */ "../core/node_modules/jose/dist/browser/runtime/digest.js");
/* harmony import */ var _runtime_base64url_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runtime/base64url.js */ "../core/node_modules/jose/dist/browser/runtime/base64url.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/buffer_utils.js */ "../core/node_modules/jose/dist/browser/lib/buffer_utils.js");
/* harmony import */ var _lib_is_object_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/is_object.js */ "../core/node_modules/jose/dist/browser/lib/is_object.js");





const check = (value, description) => {
    if (typeof value !== 'string' || !value) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWKInvalid(`${description} missing or invalid`);
    }
};
async function calculateJwkThumbprint(jwk, digestAlgorithm) {
    if (!(0,_lib_is_object_js__WEBPACK_IMPORTED_MODULE_4__["default"])(jwk)) {
        throw new TypeError('JWK must be an object');
    }
    digestAlgorithm !== null && digestAlgorithm !== void 0 ? digestAlgorithm : (digestAlgorithm = 'sha256');
    if (digestAlgorithm !== 'sha256' &&
        digestAlgorithm !== 'sha384' &&
        digestAlgorithm !== 'sha512') {
        throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');
    }
    let components;
    switch (jwk.kty) {
        case 'EC':
            check(jwk.crv, '"crv" (Curve) Parameter');
            check(jwk.x, '"x" (X Coordinate) Parameter');
            check(jwk.y, '"y" (Y Coordinate) Parameter');
            components = { crv: jwk.crv, kty: jwk.kty, x: jwk.x, y: jwk.y };
            break;
        case 'OKP':
            check(jwk.crv, '"crv" (Subtype of Key Pair) Parameter');
            check(jwk.x, '"x" (Public Key) Parameter');
            components = { crv: jwk.crv, kty: jwk.kty, x: jwk.x };
            break;
        case 'RSA':
            check(jwk.e, '"e" (Exponent) Parameter');
            check(jwk.n, '"n" (Modulus) Parameter');
            components = { e: jwk.e, kty: jwk.kty, n: jwk.n };
            break;
        case 'oct':
            check(jwk.k, '"k" (Key Value) Parameter');
            components = { k: jwk.k, kty: jwk.kty };
            break;
        default:
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JOSENotSupported('"kty" (Key Type) Parameter missing or unsupported');
    }
    const data = _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_3__.encoder.encode(JSON.stringify(components));
    return (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_1__.encode)(await (0,_runtime_digest_js__WEBPACK_IMPORTED_MODULE_0__["default"])(digestAlgorithm, data));
}
async function calculateJwkThumbprintUri(jwk, digestAlgorithm) {
    digestAlgorithm !== null && digestAlgorithm !== void 0 ? digestAlgorithm : (digestAlgorithm = 'sha256');
    const thumbprint = await calculateJwkThumbprint(jwk, digestAlgorithm);
    return `urn:ietf:params:oauth:jwk-thumbprint:sha-${digestAlgorithm.slice(-3)}:${thumbprint}`;
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/jwks/local.js":
/*!************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/jwks/local.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LocalJWKSet": () => (/* binding */ LocalJWKSet),
/* harmony export */   "createLocalJWKSet": () => (/* binding */ createLocalJWKSet),
/* harmony export */   "isJWKSLike": () => (/* binding */ isJWKSLike)
/* harmony export */ });
/* harmony import */ var _key_import_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../key/import.js */ "../core/node_modules/jose/dist/browser/key/import.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _lib_is_object_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/is_object.js */ "../core/node_modules/jose/dist/browser/lib/is_object.js");



function getKtyFromAlg(alg) {
    switch (typeof alg === 'string' && alg.slice(0, 2)) {
        case 'RS':
        case 'PS':
            return 'RSA';
        case 'ES':
            return 'EC';
        case 'Ed':
            return 'OKP';
        default:
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set');
    }
}
function isJWKSLike(jwks) {
    return (jwks &&
        typeof jwks === 'object' &&
        Array.isArray(jwks.keys) &&
        jwks.keys.every(isJWKLike));
}
function isJWKLike(key) {
    return (0,_lib_is_object_js__WEBPACK_IMPORTED_MODULE_2__["default"])(key);
}
function clone(obj) {
    if (typeof structuredClone === 'function') {
        return structuredClone(obj);
    }
    return JSON.parse(JSON.stringify(obj));
}
class LocalJWKSet {
    constructor(jwks) {
        this._cached = new WeakMap();
        if (!isJWKSLike(jwks)) {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWKSInvalid('JSON Web Key Set malformed');
        }
        this._jwks = clone(jwks);
    }
    async getKey(protectedHeader, token) {
        const { alg, kid } = { ...protectedHeader, ...token === null || token === void 0 ? void 0 : token.header };
        const kty = getKtyFromAlg(alg);
        const candidates = this._jwks.keys.filter((jwk) => {
            let candidate = kty === jwk.kty;
            if (candidate && typeof kid === 'string') {
                candidate = kid === jwk.kid;
            }
            if (candidate && typeof jwk.alg === 'string') {
                candidate = alg === jwk.alg;
            }
            if (candidate && typeof jwk.use === 'string') {
                candidate = jwk.use === 'sig';
            }
            if (candidate && Array.isArray(jwk.key_ops)) {
                candidate = jwk.key_ops.includes('verify');
            }
            if (candidate && alg === 'EdDSA') {
                candidate = jwk.crv === 'Ed25519' || jwk.crv === 'Ed448';
            }
            if (candidate) {
                switch (alg) {
                    case 'ES256':
                        candidate = jwk.crv === 'P-256';
                        break;
                    case 'ES256K':
                        candidate = jwk.crv === 'secp256k1';
                        break;
                    case 'ES384':
                        candidate = jwk.crv === 'P-384';
                        break;
                    case 'ES512':
                        candidate = jwk.crv === 'P-521';
                        break;
                }
            }
            return candidate;
        });
        const { 0: jwk, length } = candidates;
        if (length === 0) {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWKSNoMatchingKey();
        }
        else if (length !== 1) {
            const error = new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWKSMultipleMatchingKeys();
            const { _cached } = this;
            error[Symbol.asyncIterator] = async function* () {
                for (const jwk of candidates) {
                    try {
                        yield await importWithAlgCache(_cached, jwk, alg);
                    }
                    catch (_a) {
                        continue;
                    }
                }
            };
            throw error;
        }
        return importWithAlgCache(this._cached, jwk, alg);
    }
}
async function importWithAlgCache(cache, jwk, alg) {
    const cached = cache.get(jwk) || cache.set(jwk, {}).get(jwk);
    if (cached[alg] === undefined) {
        const key = await (0,_key_import_js__WEBPACK_IMPORTED_MODULE_0__.importJWK)({ ...jwk, ext: true }, alg);
        if (key instanceof Uint8Array || key.type !== 'public') {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWKSInvalid('JSON Web Key Set members must be public keys');
        }
        cached[alg] = key;
    }
    return cached[alg];
}
function createLocalJWKSet(jwks) {
    const set = new LocalJWKSet(jwks);
    return async function (protectedHeader, token) {
        return set.getKey(protectedHeader, token);
    };
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/jwks/remote.js":
/*!*************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/jwks/remote.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createRemoteJWKSet": () => (/* binding */ createRemoteJWKSet)
/* harmony export */ });
/* harmony import */ var _runtime_fetch_jwks_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runtime/fetch_jwks.js */ "../core/node_modules/jose/dist/browser/runtime/fetch_jwks.js");
/* harmony import */ var _runtime_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runtime/env.js */ "../core/node_modules/jose/dist/browser/runtime/env.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _local_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./local.js */ "../core/node_modules/jose/dist/browser/jwks/local.js");




class RemoteJWKSet extends _local_js__WEBPACK_IMPORTED_MODULE_3__.LocalJWKSet {
    constructor(url, options) {
        super({ keys: [] });
        this._jwks = undefined;
        if (!(url instanceof URL)) {
            throw new TypeError('url must be an instance of URL');
        }
        this._url = new URL(url.href);
        this._options = { agent: options === null || options === void 0 ? void 0 : options.agent, headers: options === null || options === void 0 ? void 0 : options.headers };
        this._timeoutDuration =
            typeof (options === null || options === void 0 ? void 0 : options.timeoutDuration) === 'number' ? options === null || options === void 0 ? void 0 : options.timeoutDuration : 5000;
        this._cooldownDuration =
            typeof (options === null || options === void 0 ? void 0 : options.cooldownDuration) === 'number' ? options === null || options === void 0 ? void 0 : options.cooldownDuration : 30000;
        this._cacheMaxAge = typeof (options === null || options === void 0 ? void 0 : options.cacheMaxAge) === 'number' ? options === null || options === void 0 ? void 0 : options.cacheMaxAge : 600000;
    }
    coolingDown() {
        return typeof this._jwksTimestamp === 'number'
            ? Date.now() < this._jwksTimestamp + this._cooldownDuration
            : false;
    }
    fresh() {
        return typeof this._jwksTimestamp === 'number'
            ? Date.now() < this._jwksTimestamp + this._cacheMaxAge
            : false;
    }
    async getKey(protectedHeader, token) {
        if (!this._jwks || !this.fresh()) {
            await this.reload();
        }
        try {
            return await super.getKey(protectedHeader, token);
        }
        catch (err) {
            if (err instanceof _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWKSNoMatchingKey) {
                if (this.coolingDown() === false) {
                    await this.reload();
                    return super.getKey(protectedHeader, token);
                }
            }
            throw err;
        }
    }
    async reload() {
        if (this._pendingFetch && (0,_runtime_env_js__WEBPACK_IMPORTED_MODULE_1__.isCloudflareWorkers)()) {
            this._pendingFetch = undefined;
        }
        this._pendingFetch || (this._pendingFetch = (0,_runtime_fetch_jwks_js__WEBPACK_IMPORTED_MODULE_0__["default"])(this._url, this._timeoutDuration, this._options)
            .then((json) => {
            if (!(0,_local_js__WEBPACK_IMPORTED_MODULE_3__.isJWKSLike)(json)) {
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWKSInvalid('JSON Web Key Set malformed');
            }
            this._jwks = { keys: json.keys };
            this._jwksTimestamp = Date.now();
            this._pendingFetch = undefined;
        })
            .catch((err) => {
            this._pendingFetch = undefined;
            throw err;
        }));
        await this._pendingFetch;
    }
}
function createRemoteJWKSet(url, options) {
    const set = new RemoteJWKSet(url, options);
    return async function (protectedHeader, token) {
        return set.getKey(protectedHeader, token);
    };
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/jws/compact/sign.js":
/*!******************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/jws/compact/sign.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CompactSign": () => (/* binding */ CompactSign)
/* harmony export */ });
/* harmony import */ var _flattened_sign_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../flattened/sign.js */ "../core/node_modules/jose/dist/browser/jws/flattened/sign.js");

class CompactSign {
    constructor(payload) {
        this._flattened = new _flattened_sign_js__WEBPACK_IMPORTED_MODULE_0__.FlattenedSign(payload);
    }
    setProtectedHeader(protectedHeader) {
        this._flattened.setProtectedHeader(protectedHeader);
        return this;
    }
    async sign(key, options) {
        const jws = await this._flattened.sign(key, options);
        if (jws.payload === undefined) {
            throw new TypeError('use the flattened module for creating JWS with b64: false');
        }
        return `${jws.protected}.${jws.payload}.${jws.signature}`;
    }
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/jws/compact/verify.js":
/*!********************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/jws/compact/verify.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "compactVerify": () => (/* binding */ compactVerify)
/* harmony export */ });
/* harmony import */ var _flattened_verify_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../flattened/verify.js */ "../core/node_modules/jose/dist/browser/jws/flattened/verify.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/buffer_utils.js */ "../core/node_modules/jose/dist/browser/lib/buffer_utils.js");



async function compactVerify(jws, key, options) {
    if (jws instanceof Uint8Array) {
        jws = _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_2__.decoder.decode(jws);
    }
    if (typeof jws !== 'string') {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWSInvalid('Compact JWS must be a string or Uint8Array');
    }
    const { 0: protectedHeader, 1: payload, 2: signature, length } = jws.split('.');
    if (length !== 3) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWSInvalid('Invalid Compact JWS');
    }
    const verified = await (0,_flattened_verify_js__WEBPACK_IMPORTED_MODULE_0__.flattenedVerify)({ payload, protected: protectedHeader, signature }, key, options);
    const result = { payload: verified.payload, protectedHeader: verified.protectedHeader };
    if (typeof key === 'function') {
        return { ...result, key: verified.key };
    }
    return result;
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/jws/flattened/sign.js":
/*!********************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/jws/flattened/sign.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FlattenedSign": () => (/* binding */ FlattenedSign)
/* harmony export */ });
/* harmony import */ var _runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../runtime/base64url.js */ "../core/node_modules/jose/dist/browser/runtime/base64url.js");
/* harmony import */ var _runtime_sign_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../runtime/sign.js */ "../core/node_modules/jose/dist/browser/runtime/sign.js");
/* harmony import */ var _lib_is_disjoint_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/is_disjoint.js */ "../core/node_modules/jose/dist/browser/lib/is_disjoint.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/buffer_utils.js */ "../core/node_modules/jose/dist/browser/lib/buffer_utils.js");
/* harmony import */ var _lib_check_key_type_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../lib/check_key_type.js */ "../core/node_modules/jose/dist/browser/lib/check_key_type.js");
/* harmony import */ var _lib_validate_crit_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../lib/validate_crit.js */ "../core/node_modules/jose/dist/browser/lib/validate_crit.js");







class FlattenedSign {
    constructor(payload) {
        if (!(payload instanceof Uint8Array)) {
            throw new TypeError('payload must be an instance of Uint8Array');
        }
        this._payload = payload;
    }
    setProtectedHeader(protectedHeader) {
        if (this._protectedHeader) {
            throw new TypeError('setProtectedHeader can only be called once');
        }
        this._protectedHeader = protectedHeader;
        return this;
    }
    setUnprotectedHeader(unprotectedHeader) {
        if (this._unprotectedHeader) {
            throw new TypeError('setUnprotectedHeader can only be called once');
        }
        this._unprotectedHeader = unprotectedHeader;
        return this;
    }
    async sign(key, options) {
        if (!this._protectedHeader && !this._unprotectedHeader) {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JWSInvalid('either setProtectedHeader or setUnprotectedHeader must be called before #sign()');
        }
        if (!(0,_lib_is_disjoint_js__WEBPACK_IMPORTED_MODULE_2__["default"])(this._protectedHeader, this._unprotectedHeader)) {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JWSInvalid('JWS Protected and JWS Unprotected Header Parameter names must be disjoint');
        }
        const joseHeader = {
            ...this._protectedHeader,
            ...this._unprotectedHeader,
        };
        const extensions = (0,_lib_validate_crit_js__WEBPACK_IMPORTED_MODULE_6__["default"])(_util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JWSInvalid, new Map([['b64', true]]), options === null || options === void 0 ? void 0 : options.crit, this._protectedHeader, joseHeader);
        let b64 = true;
        if (extensions.has('b64')) {
            b64 = this._protectedHeader.b64;
            if (typeof b64 !== 'boolean') {
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');
            }
        }
        const { alg } = joseHeader;
        if (typeof alg !== 'string' || !alg) {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');
        }
        (0,_lib_check_key_type_js__WEBPACK_IMPORTED_MODULE_5__["default"])(alg, key, 'sign');
        let payload = this._payload;
        if (b64) {
            payload = _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_4__.encoder.encode((0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.encode)(payload));
        }
        let protectedHeader;
        if (this._protectedHeader) {
            protectedHeader = _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_4__.encoder.encode((0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.encode)(JSON.stringify(this._protectedHeader)));
        }
        else {
            protectedHeader = _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_4__.encoder.encode('');
        }
        const data = (0,_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_4__.concat)(protectedHeader, _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_4__.encoder.encode('.'), payload);
        const signature = await (0,_runtime_sign_js__WEBPACK_IMPORTED_MODULE_1__["default"])(alg, key, data);
        const jws = {
            signature: (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.encode)(signature),
            payload: '',
        };
        if (b64) {
            jws.payload = _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_4__.decoder.decode(payload);
        }
        if (this._unprotectedHeader) {
            jws.header = this._unprotectedHeader;
        }
        if (this._protectedHeader) {
            jws.protected = _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_4__.decoder.decode(protectedHeader);
        }
        return jws;
    }
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/jws/flattened/verify.js":
/*!**********************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/jws/flattened/verify.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "flattenedVerify": () => (/* binding */ flattenedVerify)
/* harmony export */ });
/* harmony import */ var _runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../runtime/base64url.js */ "../core/node_modules/jose/dist/browser/runtime/base64url.js");
/* harmony import */ var _runtime_verify_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../runtime/verify.js */ "../core/node_modules/jose/dist/browser/runtime/verify.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/buffer_utils.js */ "../core/node_modules/jose/dist/browser/lib/buffer_utils.js");
/* harmony import */ var _lib_is_disjoint_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/is_disjoint.js */ "../core/node_modules/jose/dist/browser/lib/is_disjoint.js");
/* harmony import */ var _lib_is_object_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../lib/is_object.js */ "../core/node_modules/jose/dist/browser/lib/is_object.js");
/* harmony import */ var _lib_check_key_type_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../lib/check_key_type.js */ "../core/node_modules/jose/dist/browser/lib/check_key_type.js");
/* harmony import */ var _lib_validate_crit_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../lib/validate_crit.js */ "../core/node_modules/jose/dist/browser/lib/validate_crit.js");
/* harmony import */ var _lib_validate_algorithms_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../lib/validate_algorithms.js */ "../core/node_modules/jose/dist/browser/lib/validate_algorithms.js");









async function flattenedVerify(jws, key, options) {
    var _a;
    if (!(0,_lib_is_object_js__WEBPACK_IMPORTED_MODULE_5__["default"])(jws)) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWSInvalid('Flattened JWS must be an object');
    }
    if (jws.protected === undefined && jws.header === undefined) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');
    }
    if (jws.protected !== undefined && typeof jws.protected !== 'string') {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWSInvalid('JWS Protected Header incorrect type');
    }
    if (jws.payload === undefined) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWSInvalid('JWS Payload missing');
    }
    if (typeof jws.signature !== 'string') {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWSInvalid('JWS Signature missing or incorrect type');
    }
    if (jws.header !== undefined && !(0,_lib_is_object_js__WEBPACK_IMPORTED_MODULE_5__["default"])(jws.header)) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWSInvalid('JWS Unprotected Header incorrect type');
    }
    let parsedProt = {};
    if (jws.protected) {
        try {
            const protectedHeader = (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.decode)(jws.protected);
            parsedProt = JSON.parse(_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_3__.decoder.decode(protectedHeader));
        }
        catch (_b) {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWSInvalid('JWS Protected Header is invalid');
        }
    }
    if (!(0,_lib_is_disjoint_js__WEBPACK_IMPORTED_MODULE_4__["default"])(parsedProt, jws.header)) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWSInvalid('JWS Protected and JWS Unprotected Header Parameter names must be disjoint');
    }
    const joseHeader = {
        ...parsedProt,
        ...jws.header,
    };
    const extensions = (0,_lib_validate_crit_js__WEBPACK_IMPORTED_MODULE_7__["default"])(_util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWSInvalid, new Map([['b64', true]]), options === null || options === void 0 ? void 0 : options.crit, parsedProt, joseHeader);
    let b64 = true;
    if (extensions.has('b64')) {
        b64 = parsedProt.b64;
        if (typeof b64 !== 'boolean') {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');
        }
    }
    const { alg } = joseHeader;
    if (typeof alg !== 'string' || !alg) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');
    }
    const algorithms = options && (0,_lib_validate_algorithms_js__WEBPACK_IMPORTED_MODULE_8__["default"])('algorithms', options.algorithms);
    if (algorithms && !algorithms.has(alg)) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');
    }
    if (b64) {
        if (typeof jws.payload !== 'string') {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWSInvalid('JWS Payload must be a string');
        }
    }
    else if (typeof jws.payload !== 'string' && !(jws.payload instanceof Uint8Array)) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWSInvalid('JWS Payload must be a string or an Uint8Array instance');
    }
    let resolvedKey = false;
    if (typeof key === 'function') {
        key = await key(parsedProt, jws);
        resolvedKey = true;
    }
    (0,_lib_check_key_type_js__WEBPACK_IMPORTED_MODULE_6__["default"])(alg, key, 'verify');
    const data = (0,_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_3__.concat)(_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_3__.encoder.encode((_a = jws.protected) !== null && _a !== void 0 ? _a : ''), _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_3__.encoder.encode('.'), typeof jws.payload === 'string' ? _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_3__.encoder.encode(jws.payload) : jws.payload);
    const signature = (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.decode)(jws.signature);
    const verified = await (0,_runtime_verify_js__WEBPACK_IMPORTED_MODULE_1__["default"])(alg, key, signature, data);
    if (!verified) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWSSignatureVerificationFailed();
    }
    let payload;
    if (b64) {
        payload = (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.decode)(jws.payload);
    }
    else if (typeof jws.payload === 'string') {
        payload = _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_3__.encoder.encode(jws.payload);
    }
    else {
        payload = jws.payload;
    }
    const result = { payload };
    if (jws.protected !== undefined) {
        result.protectedHeader = parsedProt;
    }
    if (jws.header !== undefined) {
        result.unprotectedHeader = jws.header;
    }
    if (resolvedKey) {
        return { ...result, key };
    }
    return result;
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/jws/general/sign.js":
/*!******************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/jws/general/sign.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GeneralSign": () => (/* binding */ GeneralSign)
/* harmony export */ });
/* harmony import */ var _flattened_sign_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../flattened/sign.js */ "../core/node_modules/jose/dist/browser/jws/flattened/sign.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");


class IndividualSignature {
    constructor(sig, key, options) {
        this.parent = sig;
        this.key = key;
        this.options = options;
    }
    setProtectedHeader(protectedHeader) {
        if (this.protectedHeader) {
            throw new TypeError('setProtectedHeader can only be called once');
        }
        this.protectedHeader = protectedHeader;
        return this;
    }
    setUnprotectedHeader(unprotectedHeader) {
        if (this.unprotectedHeader) {
            throw new TypeError('setUnprotectedHeader can only be called once');
        }
        this.unprotectedHeader = unprotectedHeader;
        return this;
    }
    addSignature(...args) {
        return this.parent.addSignature(...args);
    }
    sign(...args) {
        return this.parent.sign(...args);
    }
    done() {
        return this.parent;
    }
}
class GeneralSign {
    constructor(payload) {
        this._signatures = [];
        this._payload = payload;
    }
    addSignature(key, options) {
        const signature = new IndividualSignature(this, key, options);
        this._signatures.push(signature);
        return signature;
    }
    async sign() {
        if (!this._signatures.length) {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWSInvalid('at least one signature must be added');
        }
        const jws = {
            signatures: [],
            payload: '',
        };
        for (let i = 0; i < this._signatures.length; i++) {
            const signature = this._signatures[i];
            const flattened = new _flattened_sign_js__WEBPACK_IMPORTED_MODULE_0__.FlattenedSign(this._payload);
            flattened.setProtectedHeader(signature.protectedHeader);
            flattened.setUnprotectedHeader(signature.unprotectedHeader);
            const { payload, ...rest } = await flattened.sign(signature.key, signature.options);
            if (i === 0) {
                jws.payload = payload;
            }
            else if (jws.payload !== payload) {
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWSInvalid('inconsistent use of JWS Unencoded Payload Option (RFC7797)');
            }
            jws.signatures.push(rest);
        }
        return jws;
    }
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/jws/general/verify.js":
/*!********************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/jws/general/verify.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "generalVerify": () => (/* binding */ generalVerify)
/* harmony export */ });
/* harmony import */ var _flattened_verify_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../flattened/verify.js */ "../core/node_modules/jose/dist/browser/jws/flattened/verify.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _lib_is_object_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/is_object.js */ "../core/node_modules/jose/dist/browser/lib/is_object.js");



async function generalVerify(jws, key, options) {
    if (!(0,_lib_is_object_js__WEBPACK_IMPORTED_MODULE_2__["default"])(jws)) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWSInvalid('General JWS must be an object');
    }
    if (!Array.isArray(jws.signatures) || !jws.signatures.every(_lib_is_object_js__WEBPACK_IMPORTED_MODULE_2__["default"])) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWSInvalid('JWS Signatures missing or incorrect type');
    }
    for (const signature of jws.signatures) {
        try {
            return await (0,_flattened_verify_js__WEBPACK_IMPORTED_MODULE_0__.flattenedVerify)({
                header: signature.header,
                payload: jws.payload,
                protected: signature.protected,
                signature: signature.signature,
            }, key, options);
        }
        catch (_a) {
        }
    }
    throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWSSignatureVerificationFailed();
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/jwt/decrypt.js":
/*!*************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/jwt/decrypt.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "jwtDecrypt": () => (/* binding */ jwtDecrypt)
/* harmony export */ });
/* harmony import */ var _jwe_compact_decrypt_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../jwe/compact/decrypt.js */ "../core/node_modules/jose/dist/browser/jwe/compact/decrypt.js");
/* harmony import */ var _lib_jwt_claims_set_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/jwt_claims_set.js */ "../core/node_modules/jose/dist/browser/lib/jwt_claims_set.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");



async function jwtDecrypt(jwt, key, options) {
    const decrypted = await (0,_jwe_compact_decrypt_js__WEBPACK_IMPORTED_MODULE_0__.compactDecrypt)(jwt, key, options);
    const payload = (0,_lib_jwt_claims_set_js__WEBPACK_IMPORTED_MODULE_1__["default"])(decrypted.protectedHeader, decrypted.plaintext, options);
    const { protectedHeader } = decrypted;
    if (protectedHeader.iss !== undefined && protectedHeader.iss !== payload.iss) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch', 'iss', 'mismatch');
    }
    if (protectedHeader.sub !== undefined && protectedHeader.sub !== payload.sub) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch', 'sub', 'mismatch');
    }
    if (protectedHeader.aud !== undefined &&
        JSON.stringify(protectedHeader.aud) !== JSON.stringify(payload.aud)) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch', 'aud', 'mismatch');
    }
    const result = { payload, protectedHeader };
    if (typeof key === 'function') {
        return { ...result, key: decrypted.key };
    }
    return result;
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/jwt/encrypt.js":
/*!*************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/jwt/encrypt.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EncryptJWT": () => (/* binding */ EncryptJWT)
/* harmony export */ });
/* harmony import */ var _jwe_compact_encrypt_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../jwe/compact/encrypt.js */ "../core/node_modules/jose/dist/browser/jwe/compact/encrypt.js");
/* harmony import */ var _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/buffer_utils.js */ "../core/node_modules/jose/dist/browser/lib/buffer_utils.js");
/* harmony import */ var _produce_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./produce.js */ "../core/node_modules/jose/dist/browser/jwt/produce.js");



class EncryptJWT extends _produce_js__WEBPACK_IMPORTED_MODULE_2__.ProduceJWT {
    setProtectedHeader(protectedHeader) {
        if (this._protectedHeader) {
            throw new TypeError('setProtectedHeader can only be called once');
        }
        this._protectedHeader = protectedHeader;
        return this;
    }
    setKeyManagementParameters(parameters) {
        if (this._keyManagementParameters) {
            throw new TypeError('setKeyManagementParameters can only be called once');
        }
        this._keyManagementParameters = parameters;
        return this;
    }
    setContentEncryptionKey(cek) {
        if (this._cek) {
            throw new TypeError('setContentEncryptionKey can only be called once');
        }
        this._cek = cek;
        return this;
    }
    setInitializationVector(iv) {
        if (this._iv) {
            throw new TypeError('setInitializationVector can only be called once');
        }
        this._iv = iv;
        return this;
    }
    replicateIssuerAsHeader() {
        this._replicateIssuerAsHeader = true;
        return this;
    }
    replicateSubjectAsHeader() {
        this._replicateSubjectAsHeader = true;
        return this;
    }
    replicateAudienceAsHeader() {
        this._replicateAudienceAsHeader = true;
        return this;
    }
    async encrypt(key, options) {
        const enc = new _jwe_compact_encrypt_js__WEBPACK_IMPORTED_MODULE_0__.CompactEncrypt(_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_1__.encoder.encode(JSON.stringify(this._payload)));
        if (this._replicateIssuerAsHeader) {
            this._protectedHeader = { ...this._protectedHeader, iss: this._payload.iss };
        }
        if (this._replicateSubjectAsHeader) {
            this._protectedHeader = { ...this._protectedHeader, sub: this._payload.sub };
        }
        if (this._replicateAudienceAsHeader) {
            this._protectedHeader = { ...this._protectedHeader, aud: this._payload.aud };
        }
        enc.setProtectedHeader(this._protectedHeader);
        if (this._iv) {
            enc.setInitializationVector(this._iv);
        }
        if (this._cek) {
            enc.setContentEncryptionKey(this._cek);
        }
        if (this._keyManagementParameters) {
            enc.setKeyManagementParameters(this._keyManagementParameters);
        }
        return enc.encrypt(key, options);
    }
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/jwt/produce.js":
/*!*************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/jwt/produce.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ProduceJWT": () => (/* binding */ ProduceJWT)
/* harmony export */ });
/* harmony import */ var _lib_epoch_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/epoch.js */ "../core/node_modules/jose/dist/browser/lib/epoch.js");
/* harmony import */ var _lib_is_object_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/is_object.js */ "../core/node_modules/jose/dist/browser/lib/is_object.js");
/* harmony import */ var _lib_secs_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/secs.js */ "../core/node_modules/jose/dist/browser/lib/secs.js");



class ProduceJWT {
    constructor(payload) {
        if (!(0,_lib_is_object_js__WEBPACK_IMPORTED_MODULE_1__["default"])(payload)) {
            throw new TypeError('JWT Claims Set MUST be an object');
        }
        this._payload = payload;
    }
    setIssuer(issuer) {
        this._payload = { ...this._payload, iss: issuer };
        return this;
    }
    setSubject(subject) {
        this._payload = { ...this._payload, sub: subject };
        return this;
    }
    setAudience(audience) {
        this._payload = { ...this._payload, aud: audience };
        return this;
    }
    setJti(jwtId) {
        this._payload = { ...this._payload, jti: jwtId };
        return this;
    }
    setNotBefore(input) {
        if (typeof input === 'number') {
            this._payload = { ...this._payload, nbf: input };
        }
        else {
            this._payload = { ...this._payload, nbf: (0,_lib_epoch_js__WEBPACK_IMPORTED_MODULE_0__["default"])(new Date()) + (0,_lib_secs_js__WEBPACK_IMPORTED_MODULE_2__["default"])(input) };
        }
        return this;
    }
    setExpirationTime(input) {
        if (typeof input === 'number') {
            this._payload = { ...this._payload, exp: input };
        }
        else {
            this._payload = { ...this._payload, exp: (0,_lib_epoch_js__WEBPACK_IMPORTED_MODULE_0__["default"])(new Date()) + (0,_lib_secs_js__WEBPACK_IMPORTED_MODULE_2__["default"])(input) };
        }
        return this;
    }
    setIssuedAt(input) {
        if (typeof input === 'undefined') {
            this._payload = { ...this._payload, iat: (0,_lib_epoch_js__WEBPACK_IMPORTED_MODULE_0__["default"])(new Date()) };
        }
        else {
            this._payload = { ...this._payload, iat: input };
        }
        return this;
    }
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/jwt/sign.js":
/*!**********************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/jwt/sign.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SignJWT": () => (/* binding */ SignJWT)
/* harmony export */ });
/* harmony import */ var _jws_compact_sign_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../jws/compact/sign.js */ "../core/node_modules/jose/dist/browser/jws/compact/sign.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/buffer_utils.js */ "../core/node_modules/jose/dist/browser/lib/buffer_utils.js");
/* harmony import */ var _produce_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./produce.js */ "../core/node_modules/jose/dist/browser/jwt/produce.js");




class SignJWT extends _produce_js__WEBPACK_IMPORTED_MODULE_3__.ProduceJWT {
    setProtectedHeader(protectedHeader) {
        this._protectedHeader = protectedHeader;
        return this;
    }
    async sign(key, options) {
        var _a;
        const sig = new _jws_compact_sign_js__WEBPACK_IMPORTED_MODULE_0__.CompactSign(_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_2__.encoder.encode(JSON.stringify(this._payload)));
        sig.setProtectedHeader(this._protectedHeader);
        if (Array.isArray((_a = this._protectedHeader) === null || _a === void 0 ? void 0 : _a.crit) &&
            this._protectedHeader.crit.includes('b64') &&
            this._protectedHeader.b64 === false) {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JWTInvalid('JWTs MUST NOT use unencoded payload');
        }
        return sig.sign(key, options);
    }
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/jwt/unsecured.js":
/*!***************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/jwt/unsecured.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "UnsecuredJWT": () => (/* binding */ UnsecuredJWT)
/* harmony export */ });
/* harmony import */ var _runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runtime/base64url.js */ "../core/node_modules/jose/dist/browser/runtime/base64url.js");
/* harmony import */ var _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/buffer_utils.js */ "../core/node_modules/jose/dist/browser/lib/buffer_utils.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _lib_jwt_claims_set_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/jwt_claims_set.js */ "../core/node_modules/jose/dist/browser/lib/jwt_claims_set.js");
/* harmony import */ var _produce_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./produce.js */ "../core/node_modules/jose/dist/browser/jwt/produce.js");





class UnsecuredJWT extends _produce_js__WEBPACK_IMPORTED_MODULE_4__.ProduceJWT {
    encode() {
        const header = _runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.encode(JSON.stringify({ alg: 'none' }));
        const payload = _runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.encode(JSON.stringify(this._payload));
        return `${header}.${payload}.`;
    }
    static decode(jwt, options) {
        if (typeof jwt !== 'string') {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWTInvalid('Unsecured JWT must be a string');
        }
        const { 0: encodedHeader, 1: encodedPayload, 2: signature, length } = jwt.split('.');
        if (length !== 3 || signature !== '') {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWTInvalid('Invalid Unsecured JWT');
        }
        let header;
        try {
            header = JSON.parse(_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_1__.decoder.decode(_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.decode(encodedHeader)));
            if (header.alg !== 'none')
                throw new Error();
        }
        catch (_a) {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWTInvalid('Invalid Unsecured JWT');
        }
        const payload = (0,_lib_jwt_claims_set_js__WEBPACK_IMPORTED_MODULE_3__["default"])(header, _runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.decode(encodedPayload), options);
        return { payload, header };
    }
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/jwt/verify.js":
/*!************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/jwt/verify.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "jwtVerify": () => (/* binding */ jwtVerify)
/* harmony export */ });
/* harmony import */ var _jws_compact_verify_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../jws/compact/verify.js */ "../core/node_modules/jose/dist/browser/jws/compact/verify.js");
/* harmony import */ var _lib_jwt_claims_set_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/jwt_claims_set.js */ "../core/node_modules/jose/dist/browser/lib/jwt_claims_set.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");



async function jwtVerify(jwt, key, options) {
    var _a;
    const verified = await (0,_jws_compact_verify_js__WEBPACK_IMPORTED_MODULE_0__.compactVerify)(jwt, key, options);
    if (((_a = verified.protectedHeader.crit) === null || _a === void 0 ? void 0 : _a.includes('b64')) && verified.protectedHeader.b64 === false) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JWTInvalid('JWTs MUST NOT use unencoded payload');
    }
    const payload = (0,_lib_jwt_claims_set_js__WEBPACK_IMPORTED_MODULE_1__["default"])(verified.protectedHeader, verified.payload, options);
    const result = { payload, protectedHeader: verified.protectedHeader };
    if (typeof key === 'function') {
        return { ...result, key: verified.key };
    }
    return result;
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/key/export.js":
/*!************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/key/export.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "exportJWK": () => (/* binding */ exportJWK),
/* harmony export */   "exportPKCS8": () => (/* binding */ exportPKCS8),
/* harmony export */   "exportSPKI": () => (/* binding */ exportSPKI)
/* harmony export */ });
/* harmony import */ var _runtime_asn1_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runtime/asn1.js */ "../core/node_modules/jose/dist/browser/runtime/asn1.js");
/* harmony import */ var _runtime_key_to_jwk_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runtime/key_to_jwk.js */ "../core/node_modules/jose/dist/browser/runtime/key_to_jwk.js");



async function exportSPKI(key) {
    return (0,_runtime_asn1_js__WEBPACK_IMPORTED_MODULE_0__.toSPKI)(key);
}
async function exportPKCS8(key) {
    return (0,_runtime_asn1_js__WEBPACK_IMPORTED_MODULE_0__.toPKCS8)(key);
}
async function exportJWK(key) {
    return (0,_runtime_key_to_jwk_js__WEBPACK_IMPORTED_MODULE_1__["default"])(key);
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/key/generate_key_pair.js":
/*!***********************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/key/generate_key_pair.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "generateKeyPair": () => (/* binding */ generateKeyPair)
/* harmony export */ });
/* harmony import */ var _runtime_generate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runtime/generate.js */ "../core/node_modules/jose/dist/browser/runtime/generate.js");

async function generateKeyPair(alg, options) {
    return (0,_runtime_generate_js__WEBPACK_IMPORTED_MODULE_0__.generateKeyPair)(alg, options);
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/key/generate_secret.js":
/*!*********************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/key/generate_secret.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "generateSecret": () => (/* binding */ generateSecret)
/* harmony export */ });
/* harmony import */ var _runtime_generate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runtime/generate.js */ "../core/node_modules/jose/dist/browser/runtime/generate.js");

async function generateSecret(alg, options) {
    return (0,_runtime_generate_js__WEBPACK_IMPORTED_MODULE_0__.generateSecret)(alg, options);
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/key/import.js":
/*!************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/key/import.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "importJWK": () => (/* binding */ importJWK),
/* harmony export */   "importPKCS8": () => (/* binding */ importPKCS8),
/* harmony export */   "importSPKI": () => (/* binding */ importSPKI),
/* harmony export */   "importX509": () => (/* binding */ importX509)
/* harmony export */ });
/* harmony import */ var _runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runtime/base64url.js */ "../core/node_modules/jose/dist/browser/runtime/base64url.js");
/* harmony import */ var _runtime_asn1_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runtime/asn1.js */ "../core/node_modules/jose/dist/browser/runtime/asn1.js");
/* harmony import */ var _runtime_jwk_to_key_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../runtime/jwk_to_key.js */ "../core/node_modules/jose/dist/browser/runtime/jwk_to_key.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _lib_is_object_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/is_object.js */ "../core/node_modules/jose/dist/browser/lib/is_object.js");





async function importSPKI(spki, alg, options) {
    if (typeof spki !== 'string' || spki.indexOf('-----BEGIN PUBLIC KEY-----') !== 0) {
        throw new TypeError('"spki" must be SPKI formatted string');
    }
    return (0,_runtime_asn1_js__WEBPACK_IMPORTED_MODULE_1__.fromSPKI)(spki, alg, options);
}
async function importX509(x509, alg, options) {
    if (typeof x509 !== 'string' || x509.indexOf('-----BEGIN CERTIFICATE-----') !== 0) {
        throw new TypeError('"x509" must be X.509 formatted string');
    }
    return (0,_runtime_asn1_js__WEBPACK_IMPORTED_MODULE_1__.fromX509)(x509, alg, options);
}
async function importPKCS8(pkcs8, alg, options) {
    if (typeof pkcs8 !== 'string' || pkcs8.indexOf('-----BEGIN PRIVATE KEY-----') !== 0) {
        throw new TypeError('"pkcs8" must be PKCS#8 formatted string');
    }
    return (0,_runtime_asn1_js__WEBPACK_IMPORTED_MODULE_1__.fromPKCS8)(pkcs8, alg, options);
}
async function importJWK(jwk, alg, octAsKeyObject) {
    var _a;
    if (!(0,_lib_is_object_js__WEBPACK_IMPORTED_MODULE_4__["default"])(jwk)) {
        throw new TypeError('JWK must be an object');
    }
    alg || (alg = jwk.alg);
    switch (jwk.kty) {
        case 'oct':
            if (typeof jwk.k !== 'string' || !jwk.k) {
                throw new TypeError('missing "k" (Key Value) Parameter value');
            }
            octAsKeyObject !== null && octAsKeyObject !== void 0 ? octAsKeyObject : (octAsKeyObject = jwk.ext !== true);
            if (octAsKeyObject) {
                return (0,_runtime_jwk_to_key_js__WEBPACK_IMPORTED_MODULE_2__["default"])({ ...jwk, alg, ext: (_a = jwk.ext) !== null && _a !== void 0 ? _a : false });
            }
            return (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.decode)(jwk.k);
        case 'RSA':
            if (jwk.oth !== undefined) {
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');
            }
        case 'EC':
        case 'OKP':
            return (0,_runtime_jwk_to_key_js__WEBPACK_IMPORTED_MODULE_2__["default"])({ ...jwk, alg });
        default:
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_3__.JOSENotSupported('Unsupported "kty" (Key Type) Parameter value');
    }
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/lib/aesgcmkw.js":
/*!**************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/lib/aesgcmkw.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "unwrap": () => (/* binding */ unwrap),
/* harmony export */   "wrap": () => (/* binding */ wrap)
/* harmony export */ });
/* harmony import */ var _runtime_encrypt_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runtime/encrypt.js */ "../core/node_modules/jose/dist/browser/runtime/encrypt.js");
/* harmony import */ var _runtime_decrypt_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runtime/decrypt.js */ "../core/node_modules/jose/dist/browser/runtime/decrypt.js");
/* harmony import */ var _iv_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./iv.js */ "../core/node_modules/jose/dist/browser/lib/iv.js");
/* harmony import */ var _runtime_base64url_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../runtime/base64url.js */ "../core/node_modules/jose/dist/browser/runtime/base64url.js");




async function wrap(alg, key, cek, iv) {
    const jweAlgorithm = alg.slice(0, 7);
    iv || (iv = (0,_iv_js__WEBPACK_IMPORTED_MODULE_2__["default"])(jweAlgorithm));
    const { ciphertext: encryptedKey, tag } = await (0,_runtime_encrypt_js__WEBPACK_IMPORTED_MODULE_0__["default"])(jweAlgorithm, cek, key, iv, new Uint8Array(0));
    return { encryptedKey, iv: (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_3__.encode)(iv), tag: (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_3__.encode)(tag) };
}
async function unwrap(alg, key, encryptedKey, iv, tag) {
    const jweAlgorithm = alg.slice(0, 7);
    return (0,_runtime_decrypt_js__WEBPACK_IMPORTED_MODULE_1__["default"])(jweAlgorithm, key, encryptedKey, iv, tag, new Uint8Array(0));
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/lib/buffer_utils.js":
/*!******************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/lib/buffer_utils.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "concat": () => (/* binding */ concat),
/* harmony export */   "concatKdf": () => (/* binding */ concatKdf),
/* harmony export */   "decoder": () => (/* binding */ decoder),
/* harmony export */   "encoder": () => (/* binding */ encoder),
/* harmony export */   "lengthAndInput": () => (/* binding */ lengthAndInput),
/* harmony export */   "p2s": () => (/* binding */ p2s),
/* harmony export */   "uint32be": () => (/* binding */ uint32be),
/* harmony export */   "uint64be": () => (/* binding */ uint64be)
/* harmony export */ });
/* harmony import */ var _runtime_digest_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runtime/digest.js */ "../core/node_modules/jose/dist/browser/runtime/digest.js");

const encoder = new TextEncoder();
const decoder = new TextDecoder();
const MAX_INT32 = 2 ** 32;
function concat(...buffers) {
    const size = buffers.reduce((acc, { length }) => acc + length, 0);
    const buf = new Uint8Array(size);
    let i = 0;
    buffers.forEach((buffer) => {
        buf.set(buffer, i);
        i += buffer.length;
    });
    return buf;
}
function p2s(alg, p2sInput) {
    return concat(encoder.encode(alg), new Uint8Array([0]), p2sInput);
}
function writeUInt32BE(buf, value, offset) {
    if (value < 0 || value >= MAX_INT32) {
        throw new RangeError(`value must be >= 0 and <= ${MAX_INT32 - 1}. Received ${value}`);
    }
    buf.set([value >>> 24, value >>> 16, value >>> 8, value & 0xff], offset);
}
function uint64be(value) {
    const high = Math.floor(value / MAX_INT32);
    const low = value % MAX_INT32;
    const buf = new Uint8Array(8);
    writeUInt32BE(buf, high, 0);
    writeUInt32BE(buf, low, 4);
    return buf;
}
function uint32be(value) {
    const buf = new Uint8Array(4);
    writeUInt32BE(buf, value);
    return buf;
}
function lengthAndInput(input) {
    return concat(uint32be(input.length), input);
}
async function concatKdf(secret, bits, value) {
    const iterations = Math.ceil((bits >> 3) / 32);
    const res = new Uint8Array(iterations * 32);
    for (let iter = 0; iter < iterations; iter++) {
        const buf = new Uint8Array(4 + secret.length + value.length);
        buf.set(uint32be(iter + 1));
        buf.set(secret, 4);
        buf.set(value, 4 + secret.length);
        res.set(await (0,_runtime_digest_js__WEBPACK_IMPORTED_MODULE_0__["default"])('sha256', buf), iter * 32);
    }
    return res.slice(0, bits >> 3);
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/lib/cek.js":
/*!*********************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/lib/cek.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "bitLength": () => (/* binding */ bitLength),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _runtime_random_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runtime/random.js */ "../core/node_modules/jose/dist/browser/runtime/random.js");


function bitLength(alg) {
    switch (alg) {
        case 'A128GCM':
            return 128;
        case 'A192GCM':
            return 192;
        case 'A256GCM':
        case 'A128CBC-HS256':
            return 256;
        case 'A192CBC-HS384':
            return 384;
        case 'A256CBC-HS512':
            return 512;
        default:
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JOSENotSupported(`Unsupported JWE Algorithm: ${alg}`);
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((alg) => (0,_runtime_random_js__WEBPACK_IMPORTED_MODULE_1__["default"])(new Uint8Array(bitLength(alg) >> 3)));


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/lib/check_iv_length.js":
/*!*********************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/lib/check_iv_length.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _iv_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./iv.js */ "../core/node_modules/jose/dist/browser/lib/iv.js");


const checkIvLength = (enc, iv) => {
    if (iv.length << 3 !== (0,_iv_js__WEBPACK_IMPORTED_MODULE_1__.bitLength)(enc)) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JWEInvalid('Invalid Initialization Vector length');
    }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (checkIvLength);


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/lib/check_key_type.js":
/*!********************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/lib/check_key_type.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _invalid_key_input_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./invalid_key_input.js */ "../core/node_modules/jose/dist/browser/lib/invalid_key_input.js");
/* harmony import */ var _runtime_is_key_like_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runtime/is_key_like.js */ "../core/node_modules/jose/dist/browser/runtime/is_key_like.js");


const symmetricTypeCheck = (alg, key) => {
    if (key instanceof Uint8Array)
        return;
    if (!(0,_runtime_is_key_like_js__WEBPACK_IMPORTED_MODULE_1__["default"])(key)) {
        throw new TypeError((0,_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_0__.withAlg)(alg, key, ..._runtime_is_key_like_js__WEBPACK_IMPORTED_MODULE_1__.types, 'Uint8Array'));
    }
    if (key.type !== 'secret') {
        throw new TypeError(`${_runtime_is_key_like_js__WEBPACK_IMPORTED_MODULE_1__.types.join(' or ')} instances for symmetric algorithms must be of type "secret"`);
    }
};
const asymmetricTypeCheck = (alg, key, usage) => {
    if (!(0,_runtime_is_key_like_js__WEBPACK_IMPORTED_MODULE_1__["default"])(key)) {
        throw new TypeError((0,_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_0__.withAlg)(alg, key, ..._runtime_is_key_like_js__WEBPACK_IMPORTED_MODULE_1__.types));
    }
    if (key.type === 'secret') {
        throw new TypeError(`${_runtime_is_key_like_js__WEBPACK_IMPORTED_MODULE_1__.types.join(' or ')} instances for asymmetric algorithms must not be of type "secret"`);
    }
    if (usage === 'sign' && key.type === 'public') {
        throw new TypeError(`${_runtime_is_key_like_js__WEBPACK_IMPORTED_MODULE_1__.types.join(' or ')} instances for asymmetric algorithm signing must be of type "private"`);
    }
    if (usage === 'decrypt' && key.type === 'public') {
        throw new TypeError(`${_runtime_is_key_like_js__WEBPACK_IMPORTED_MODULE_1__.types.join(' or ')} instances for asymmetric algorithm decryption must be of type "private"`);
    }
    if (key.algorithm && usage === 'verify' && key.type === 'private') {
        throw new TypeError(`${_runtime_is_key_like_js__WEBPACK_IMPORTED_MODULE_1__.types.join(' or ')} instances for asymmetric algorithm verifying must be of type "public"`);
    }
    if (key.algorithm && usage === 'encrypt' && key.type === 'private') {
        throw new TypeError(`${_runtime_is_key_like_js__WEBPACK_IMPORTED_MODULE_1__.types.join(' or ')} instances for asymmetric algorithm encryption must be of type "public"`);
    }
};
const checkKeyType = (alg, key, usage) => {
    const symmetric = alg.startsWith('HS') ||
        alg === 'dir' ||
        alg.startsWith('PBES2') ||
        /^A\d{3}(?:GCM)?KW$/.test(alg);
    if (symmetric) {
        symmetricTypeCheck(alg, key);
    }
    else {
        asymmetricTypeCheck(alg, key, usage);
    }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (checkKeyType);


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/lib/check_p2s.js":
/*!***************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/lib/check_p2s.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ checkP2s)
/* harmony export */ });
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");

function checkP2s(p2s) {
    if (!(p2s instanceof Uint8Array) || p2s.length < 8) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JWEInvalid('PBES2 Salt Input must be 8 or more octets');
    }
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/lib/crypto_key.js":
/*!****************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/lib/crypto_key.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "checkEncCryptoKey": () => (/* binding */ checkEncCryptoKey),
/* harmony export */   "checkSigCryptoKey": () => (/* binding */ checkSigCryptoKey)
/* harmony export */ });
/* harmony import */ var _runtime_env_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runtime/env.js */ "../core/node_modules/jose/dist/browser/runtime/env.js");

function unusable(name, prop = 'algorithm.name') {
    return new TypeError(`CryptoKey does not support this operation, its ${prop} must be ${name}`);
}
function isAlgorithm(algorithm, name) {
    return algorithm.name === name;
}
function getHashLength(hash) {
    return parseInt(hash.name.slice(4), 10);
}
function getNamedCurve(alg) {
    switch (alg) {
        case 'ES256':
            return 'P-256';
        case 'ES384':
            return 'P-384';
        case 'ES512':
            return 'P-521';
        default:
            throw new Error('unreachable');
    }
}
function checkUsage(key, usages) {
    if (usages.length && !usages.some((expected) => key.usages.includes(expected))) {
        let msg = 'CryptoKey does not support this operation, its usages must include ';
        if (usages.length > 2) {
            const last = usages.pop();
            msg += `one of ${usages.join(', ')}, or ${last}.`;
        }
        else if (usages.length === 2) {
            msg += `one of ${usages[0]} or ${usages[1]}.`;
        }
        else {
            msg += `${usages[0]}.`;
        }
        throw new TypeError(msg);
    }
}
function checkSigCryptoKey(key, alg, ...usages) {
    switch (alg) {
        case 'HS256':
        case 'HS384':
        case 'HS512': {
            if (!isAlgorithm(key.algorithm, 'HMAC'))
                throw unusable('HMAC');
            const expected = parseInt(alg.slice(2), 10);
            const actual = getHashLength(key.algorithm.hash);
            if (actual !== expected)
                throw unusable(`SHA-${expected}`, 'algorithm.hash');
            break;
        }
        case 'RS256':
        case 'RS384':
        case 'RS512': {
            if (!isAlgorithm(key.algorithm, 'RSASSA-PKCS1-v1_5'))
                throw unusable('RSASSA-PKCS1-v1_5');
            const expected = parseInt(alg.slice(2), 10);
            const actual = getHashLength(key.algorithm.hash);
            if (actual !== expected)
                throw unusable(`SHA-${expected}`, 'algorithm.hash');
            break;
        }
        case 'PS256':
        case 'PS384':
        case 'PS512': {
            if (!isAlgorithm(key.algorithm, 'RSA-PSS'))
                throw unusable('RSA-PSS');
            const expected = parseInt(alg.slice(2), 10);
            const actual = getHashLength(key.algorithm.hash);
            if (actual !== expected)
                throw unusable(`SHA-${expected}`, 'algorithm.hash');
            break;
        }
        case 'EdDSA': {
            if (key.algorithm.name !== 'Ed25519' && key.algorithm.name !== 'Ed448') {
                if ((0,_runtime_env_js__WEBPACK_IMPORTED_MODULE_0__.isCloudflareWorkers)()) {
                    if (isAlgorithm(key.algorithm, 'NODE-ED25519'))
                        break;
                    throw unusable('Ed25519, Ed448, or NODE-ED25519');
                }
                throw unusable('Ed25519 or Ed448');
            }
            break;
        }
        case 'ES256':
        case 'ES384':
        case 'ES512': {
            if (!isAlgorithm(key.algorithm, 'ECDSA'))
                throw unusable('ECDSA');
            const expected = getNamedCurve(alg);
            const actual = key.algorithm.namedCurve;
            if (actual !== expected)
                throw unusable(expected, 'algorithm.namedCurve');
            break;
        }
        default:
            throw new TypeError('CryptoKey does not support this operation');
    }
    checkUsage(key, usages);
}
function checkEncCryptoKey(key, alg, ...usages) {
    switch (alg) {
        case 'A128GCM':
        case 'A192GCM':
        case 'A256GCM': {
            if (!isAlgorithm(key.algorithm, 'AES-GCM'))
                throw unusable('AES-GCM');
            const expected = parseInt(alg.slice(1, 4), 10);
            const actual = key.algorithm.length;
            if (actual !== expected)
                throw unusable(expected, 'algorithm.length');
            break;
        }
        case 'A128KW':
        case 'A192KW':
        case 'A256KW': {
            if (!isAlgorithm(key.algorithm, 'AES-KW'))
                throw unusable('AES-KW');
            const expected = parseInt(alg.slice(1, 4), 10);
            const actual = key.algorithm.length;
            if (actual !== expected)
                throw unusable(expected, 'algorithm.length');
            break;
        }
        case 'ECDH': {
            switch (key.algorithm.name) {
                case 'ECDH':
                case 'X25519':
                case 'X448':
                    break;
                default:
                    throw unusable('ECDH, X25519, or X448');
            }
            break;
        }
        case 'PBES2-HS256+A128KW':
        case 'PBES2-HS384+A192KW':
        case 'PBES2-HS512+A256KW':
            if (!isAlgorithm(key.algorithm, 'PBKDF2'))
                throw unusable('PBKDF2');
            break;
        case 'RSA-OAEP':
        case 'RSA-OAEP-256':
        case 'RSA-OAEP-384':
        case 'RSA-OAEP-512': {
            if (!isAlgorithm(key.algorithm, 'RSA-OAEP'))
                throw unusable('RSA-OAEP');
            const expected = parseInt(alg.slice(9), 10) || 1;
            const actual = getHashLength(key.algorithm.hash);
            if (actual !== expected)
                throw unusable(`SHA-${expected}`, 'algorithm.hash');
            break;
        }
        default:
            throw new TypeError('CryptoKey does not support this operation');
    }
    checkUsage(key, usages);
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/lib/decrypt_key_management.js":
/*!****************************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/lib/decrypt_key_management.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _runtime_aeskw_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runtime/aeskw.js */ "../core/node_modules/jose/dist/browser/runtime/aeskw.js");
/* harmony import */ var _runtime_ecdhes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runtime/ecdhes.js */ "../core/node_modules/jose/dist/browser/runtime/ecdhes.js");
/* harmony import */ var _runtime_pbes2kw_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../runtime/pbes2kw.js */ "../core/node_modules/jose/dist/browser/runtime/pbes2kw.js");
/* harmony import */ var _runtime_rsaes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../runtime/rsaes.js */ "../core/node_modules/jose/dist/browser/runtime/rsaes.js");
/* harmony import */ var _runtime_base64url_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../runtime/base64url.js */ "../core/node_modules/jose/dist/browser/runtime/base64url.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _lib_cek_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../lib/cek.js */ "../core/node_modules/jose/dist/browser/lib/cek.js");
/* harmony import */ var _key_import_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../key/import.js */ "../core/node_modules/jose/dist/browser/key/import.js");
/* harmony import */ var _check_key_type_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./check_key_type.js */ "../core/node_modules/jose/dist/browser/lib/check_key_type.js");
/* harmony import */ var _is_object_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./is_object.js */ "../core/node_modules/jose/dist/browser/lib/is_object.js");
/* harmony import */ var _aesgcmkw_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./aesgcmkw.js */ "../core/node_modules/jose/dist/browser/lib/aesgcmkw.js");











async function decryptKeyManagement(alg, key, encryptedKey, joseHeader, options) {
    (0,_check_key_type_js__WEBPACK_IMPORTED_MODULE_8__["default"])(alg, key, 'decrypt');
    switch (alg) {
        case 'dir': {
            if (encryptedKey !== undefined)
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JWEInvalid('Encountered unexpected JWE Encrypted Key');
            return key;
        }
        case 'ECDH-ES':
            if (encryptedKey !== undefined)
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JWEInvalid('Encountered unexpected JWE Encrypted Key');
        case 'ECDH-ES+A128KW':
        case 'ECDH-ES+A192KW':
        case 'ECDH-ES+A256KW': {
            if (!(0,_is_object_js__WEBPACK_IMPORTED_MODULE_9__["default"])(joseHeader.epk))
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JWEInvalid(`JOSE Header "epk" (Ephemeral Public Key) missing or invalid`);
            if (!_runtime_ecdhes_js__WEBPACK_IMPORTED_MODULE_1__.ecdhAllowed(key))
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JOSENotSupported('ECDH with the provided key is not allowed or not supported by your javascript runtime');
            const epk = await (0,_key_import_js__WEBPACK_IMPORTED_MODULE_7__.importJWK)(joseHeader.epk, alg);
            let partyUInfo;
            let partyVInfo;
            if (joseHeader.apu !== undefined) {
                if (typeof joseHeader.apu !== 'string')
                    throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JWEInvalid(`JOSE Header "apu" (Agreement PartyUInfo) invalid`);
                partyUInfo = (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_4__.decode)(joseHeader.apu);
            }
            if (joseHeader.apv !== undefined) {
                if (typeof joseHeader.apv !== 'string')
                    throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JWEInvalid(`JOSE Header "apv" (Agreement PartyVInfo) invalid`);
                partyVInfo = (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_4__.decode)(joseHeader.apv);
            }
            const sharedSecret = await _runtime_ecdhes_js__WEBPACK_IMPORTED_MODULE_1__.deriveKey(epk, key, alg === 'ECDH-ES' ? joseHeader.enc : alg, alg === 'ECDH-ES' ? (0,_lib_cek_js__WEBPACK_IMPORTED_MODULE_6__.bitLength)(joseHeader.enc) : parseInt(alg.slice(-5, -2), 10), partyUInfo, partyVInfo);
            if (alg === 'ECDH-ES')
                return sharedSecret;
            if (encryptedKey === undefined)
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JWEInvalid('JWE Encrypted Key missing');
            return (0,_runtime_aeskw_js__WEBPACK_IMPORTED_MODULE_0__.unwrap)(alg.slice(-6), sharedSecret, encryptedKey);
        }
        case 'RSA1_5':
        case 'RSA-OAEP':
        case 'RSA-OAEP-256':
        case 'RSA-OAEP-384':
        case 'RSA-OAEP-512': {
            if (encryptedKey === undefined)
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JWEInvalid('JWE Encrypted Key missing');
            return (0,_runtime_rsaes_js__WEBPACK_IMPORTED_MODULE_3__.decrypt)(alg, key, encryptedKey);
        }
        case 'PBES2-HS256+A128KW':
        case 'PBES2-HS384+A192KW':
        case 'PBES2-HS512+A256KW': {
            if (encryptedKey === undefined)
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JWEInvalid('JWE Encrypted Key missing');
            if (typeof joseHeader.p2c !== 'number')
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JWEInvalid(`JOSE Header "p2c" (PBES2 Count) missing or invalid`);
            const p2cLimit = (options === null || options === void 0 ? void 0 : options.maxPBES2Count) || 10000;
            if (joseHeader.p2c > p2cLimit)
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JWEInvalid(`JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds`);
            if (typeof joseHeader.p2s !== 'string')
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JWEInvalid(`JOSE Header "p2s" (PBES2 Salt) missing or invalid`);
            return (0,_runtime_pbes2kw_js__WEBPACK_IMPORTED_MODULE_2__.decrypt)(alg, key, encryptedKey, joseHeader.p2c, (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_4__.decode)(joseHeader.p2s));
        }
        case 'A128KW':
        case 'A192KW':
        case 'A256KW': {
            if (encryptedKey === undefined)
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JWEInvalid('JWE Encrypted Key missing');
            return (0,_runtime_aeskw_js__WEBPACK_IMPORTED_MODULE_0__.unwrap)(alg, key, encryptedKey);
        }
        case 'A128GCMKW':
        case 'A192GCMKW':
        case 'A256GCMKW': {
            if (encryptedKey === undefined)
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JWEInvalid('JWE Encrypted Key missing');
            if (typeof joseHeader.iv !== 'string')
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JWEInvalid(`JOSE Header "iv" (Initialization Vector) missing or invalid`);
            if (typeof joseHeader.tag !== 'string')
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JWEInvalid(`JOSE Header "tag" (Authentication Tag) missing or invalid`);
            const iv = (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_4__.decode)(joseHeader.iv);
            const tag = (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_4__.decode)(joseHeader.tag);
            return (0,_aesgcmkw_js__WEBPACK_IMPORTED_MODULE_10__.unwrap)(alg, key, encryptedKey, iv, tag);
        }
        default: {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value');
        }
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (decryptKeyManagement);


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/lib/encrypt_key_management.js":
/*!****************************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/lib/encrypt_key_management.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _runtime_aeskw_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runtime/aeskw.js */ "../core/node_modules/jose/dist/browser/runtime/aeskw.js");
/* harmony import */ var _runtime_ecdhes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runtime/ecdhes.js */ "../core/node_modules/jose/dist/browser/runtime/ecdhes.js");
/* harmony import */ var _runtime_pbes2kw_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../runtime/pbes2kw.js */ "../core/node_modules/jose/dist/browser/runtime/pbes2kw.js");
/* harmony import */ var _runtime_rsaes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../runtime/rsaes.js */ "../core/node_modules/jose/dist/browser/runtime/rsaes.js");
/* harmony import */ var _runtime_base64url_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../runtime/base64url.js */ "../core/node_modules/jose/dist/browser/runtime/base64url.js");
/* harmony import */ var _lib_cek_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../lib/cek.js */ "../core/node_modules/jose/dist/browser/lib/cek.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _key_export_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../key/export.js */ "../core/node_modules/jose/dist/browser/key/export.js");
/* harmony import */ var _check_key_type_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./check_key_type.js */ "../core/node_modules/jose/dist/browser/lib/check_key_type.js");
/* harmony import */ var _aesgcmkw_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./aesgcmkw.js */ "../core/node_modules/jose/dist/browser/lib/aesgcmkw.js");










async function encryptKeyManagement(alg, enc, key, providedCek, providedParameters = {}) {
    let encryptedKey;
    let parameters;
    let cek;
    (0,_check_key_type_js__WEBPACK_IMPORTED_MODULE_8__["default"])(alg, key, 'encrypt');
    switch (alg) {
        case 'dir': {
            cek = key;
            break;
        }
        case 'ECDH-ES':
        case 'ECDH-ES+A128KW':
        case 'ECDH-ES+A192KW':
        case 'ECDH-ES+A256KW': {
            if (!_runtime_ecdhes_js__WEBPACK_IMPORTED_MODULE_1__.ecdhAllowed(key)) {
                throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_6__.JOSENotSupported('ECDH with the provided key is not allowed or not supported by your javascript runtime');
            }
            const { apu, apv } = providedParameters;
            let { epk: ephemeralKey } = providedParameters;
            ephemeralKey || (ephemeralKey = (await _runtime_ecdhes_js__WEBPACK_IMPORTED_MODULE_1__.generateEpk(key)).privateKey);
            const { x, y, crv, kty } = await (0,_key_export_js__WEBPACK_IMPORTED_MODULE_7__.exportJWK)(ephemeralKey);
            const sharedSecret = await _runtime_ecdhes_js__WEBPACK_IMPORTED_MODULE_1__.deriveKey(key, ephemeralKey, alg === 'ECDH-ES' ? enc : alg, alg === 'ECDH-ES' ? (0,_lib_cek_js__WEBPACK_IMPORTED_MODULE_5__.bitLength)(enc) : parseInt(alg.slice(-5, -2), 10), apu, apv);
            parameters = { epk: { x, crv, kty } };
            if (kty === 'EC')
                parameters.epk.y = y;
            if (apu)
                parameters.apu = (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_4__.encode)(apu);
            if (apv)
                parameters.apv = (0,_runtime_base64url_js__WEBPACK_IMPORTED_MODULE_4__.encode)(apv);
            if (alg === 'ECDH-ES') {
                cek = sharedSecret;
                break;
            }
            cek = providedCek || (0,_lib_cek_js__WEBPACK_IMPORTED_MODULE_5__["default"])(enc);
            const kwAlg = alg.slice(-6);
            encryptedKey = await (0,_runtime_aeskw_js__WEBPACK_IMPORTED_MODULE_0__.wrap)(kwAlg, sharedSecret, cek);
            break;
        }
        case 'RSA1_5':
        case 'RSA-OAEP':
        case 'RSA-OAEP-256':
        case 'RSA-OAEP-384':
        case 'RSA-OAEP-512': {
            cek = providedCek || (0,_lib_cek_js__WEBPACK_IMPORTED_MODULE_5__["default"])(enc);
            encryptedKey = await (0,_runtime_rsaes_js__WEBPACK_IMPORTED_MODULE_3__.encrypt)(alg, key, cek);
            break;
        }
        case 'PBES2-HS256+A128KW':
        case 'PBES2-HS384+A192KW':
        case 'PBES2-HS512+A256KW': {
            cek = providedCek || (0,_lib_cek_js__WEBPACK_IMPORTED_MODULE_5__["default"])(enc);
            const { p2c, p2s } = providedParameters;
            ({ encryptedKey, ...parameters } = await (0,_runtime_pbes2kw_js__WEBPACK_IMPORTED_MODULE_2__.encrypt)(alg, key, cek, p2c, p2s));
            break;
        }
        case 'A128KW':
        case 'A192KW':
        case 'A256KW': {
            cek = providedCek || (0,_lib_cek_js__WEBPACK_IMPORTED_MODULE_5__["default"])(enc);
            encryptedKey = await (0,_runtime_aeskw_js__WEBPACK_IMPORTED_MODULE_0__.wrap)(alg, key, cek);
            break;
        }
        case 'A128GCMKW':
        case 'A192GCMKW':
        case 'A256GCMKW': {
            cek = providedCek || (0,_lib_cek_js__WEBPACK_IMPORTED_MODULE_5__["default"])(enc);
            const { iv } = providedParameters;
            ({ encryptedKey, ...parameters } = await (0,_aesgcmkw_js__WEBPACK_IMPORTED_MODULE_9__.wrap)(alg, key, cek, iv));
            break;
        }
        default: {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_6__.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value');
        }
    }
    return { cek, encryptedKey, parameters };
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (encryptKeyManagement);


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/lib/epoch.js":
/*!***********************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/lib/epoch.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((date) => Math.floor(date.getTime() / 1000));


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/lib/format_pem.js":
/*!****************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/lib/format_pem.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((b64, descriptor) => {
    const newlined = (b64.match(/.{1,64}/g) || []).join('\n');
    return `-----BEGIN ${descriptor}-----\n${newlined}\n-----END ${descriptor}-----`;
});


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/lib/invalid_key_input.js":
/*!***********************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/lib/invalid_key_input.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "withAlg": () => (/* binding */ withAlg)
/* harmony export */ });
function message(msg, actual, ...types) {
    if (types.length > 2) {
        const last = types.pop();
        msg += `one of type ${types.join(', ')}, or ${last}.`;
    }
    else if (types.length === 2) {
        msg += `one of type ${types[0]} or ${types[1]}.`;
    }
    else {
        msg += `of type ${types[0]}.`;
    }
    if (actual == null) {
        msg += ` Received ${actual}`;
    }
    else if (typeof actual === 'function' && actual.name) {
        msg += ` Received function ${actual.name}`;
    }
    else if (typeof actual === 'object' && actual != null) {
        if (actual.constructor && actual.constructor.name) {
            msg += ` Received an instance of ${actual.constructor.name}`;
        }
    }
    return msg;
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((actual, ...types) => {
    return message('Key must be ', actual, ...types);
});
function withAlg(alg, actual, ...types) {
    return message(`Key for the ${alg} algorithm must be `, actual, ...types);
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/lib/is_disjoint.js":
/*!*****************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/lib/is_disjoint.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
const isDisjoint = (...headers) => {
    const sources = headers.filter(Boolean);
    if (sources.length === 0 || sources.length === 1) {
        return true;
    }
    let acc;
    for (const header of sources) {
        const parameters = Object.keys(header);
        if (!acc || acc.size === 0) {
            acc = new Set(parameters);
            continue;
        }
        for (const parameter of parameters) {
            if (acc.has(parameter)) {
                return false;
            }
            acc.add(parameter);
        }
    }
    return true;
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (isDisjoint);


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/lib/is_object.js":
/*!***************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/lib/is_object.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ isObject)
/* harmony export */ });
function isObjectLike(value) {
    return typeof value === 'object' && value !== null;
}
function isObject(input) {
    if (!isObjectLike(input) || Object.prototype.toString.call(input) !== '[object Object]') {
        return false;
    }
    if (Object.getPrototypeOf(input) === null) {
        return true;
    }
    let proto = input;
    while (Object.getPrototypeOf(proto) !== null) {
        proto = Object.getPrototypeOf(proto);
    }
    return Object.getPrototypeOf(input) === proto;
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/lib/iv.js":
/*!********************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/lib/iv.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "bitLength": () => (/* binding */ bitLength),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _runtime_random_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runtime/random.js */ "../core/node_modules/jose/dist/browser/runtime/random.js");


function bitLength(alg) {
    switch (alg) {
        case 'A128GCM':
        case 'A128GCMKW':
        case 'A192GCM':
        case 'A192GCMKW':
        case 'A256GCM':
        case 'A256GCMKW':
            return 96;
        case 'A128CBC-HS256':
        case 'A192CBC-HS384':
        case 'A256CBC-HS512':
            return 128;
        default:
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JOSENotSupported(`Unsupported JWE Algorithm: ${alg}`);
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((alg) => (0,_runtime_random_js__WEBPACK_IMPORTED_MODULE_1__["default"])(new Uint8Array(bitLength(alg) >> 3)));


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/lib/jwt_claims_set.js":
/*!********************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/lib/jwt_claims_set.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _buffer_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./buffer_utils.js */ "../core/node_modules/jose/dist/browser/lib/buffer_utils.js");
/* harmony import */ var _epoch_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./epoch.js */ "../core/node_modules/jose/dist/browser/lib/epoch.js");
/* harmony import */ var _secs_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./secs.js */ "../core/node_modules/jose/dist/browser/lib/secs.js");
/* harmony import */ var _is_object_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./is_object.js */ "../core/node_modules/jose/dist/browser/lib/is_object.js");





const normalizeTyp = (value) => value.toLowerCase().replace(/^application\//, '');
const checkAudiencePresence = (audPayload, audOption) => {
    if (typeof audPayload === 'string') {
        return audOption.includes(audPayload);
    }
    if (Array.isArray(audPayload)) {
        return audOption.some(Set.prototype.has.bind(new Set(audPayload)));
    }
    return false;
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((protectedHeader, encodedPayload, options = {}) => {
    const { typ } = options;
    if (typ &&
        (typeof protectedHeader.typ !== 'string' ||
            normalizeTyp(protectedHeader.typ) !== normalizeTyp(typ))) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JWTClaimValidationFailed('unexpected "typ" JWT header value', 'typ', 'check_failed');
    }
    let payload;
    try {
        payload = JSON.parse(_buffer_utils_js__WEBPACK_IMPORTED_MODULE_1__.decoder.decode(encodedPayload));
    }
    catch (_a) {
    }
    if (!(0,_is_object_js__WEBPACK_IMPORTED_MODULE_4__["default"])(payload)) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JWTInvalid('JWT Claims Set must be a top-level JSON object');
    }
    const { issuer } = options;
    if (issuer && !(Array.isArray(issuer) ? issuer : [issuer]).includes(payload.iss)) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JWTClaimValidationFailed('unexpected "iss" claim value', 'iss', 'check_failed');
    }
    const { subject } = options;
    if (subject && payload.sub !== subject) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JWTClaimValidationFailed('unexpected "sub" claim value', 'sub', 'check_failed');
    }
    const { audience } = options;
    if (audience &&
        !checkAudiencePresence(payload.aud, typeof audience === 'string' ? [audience] : audience)) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JWTClaimValidationFailed('unexpected "aud" claim value', 'aud', 'check_failed');
    }
    let tolerance;
    switch (typeof options.clockTolerance) {
        case 'string':
            tolerance = (0,_secs_js__WEBPACK_IMPORTED_MODULE_3__["default"])(options.clockTolerance);
            break;
        case 'number':
            tolerance = options.clockTolerance;
            break;
        case 'undefined':
            tolerance = 0;
            break;
        default:
            throw new TypeError('Invalid clockTolerance option type');
    }
    const { currentDate } = options;
    const now = (0,_epoch_js__WEBPACK_IMPORTED_MODULE_2__["default"])(currentDate || new Date());
    if ((payload.iat !== undefined || options.maxTokenAge) && typeof payload.iat !== 'number') {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JWTClaimValidationFailed('"iat" claim must be a number', 'iat', 'invalid');
    }
    if (payload.nbf !== undefined) {
        if (typeof payload.nbf !== 'number') {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JWTClaimValidationFailed('"nbf" claim must be a number', 'nbf', 'invalid');
        }
        if (payload.nbf > now + tolerance) {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JWTClaimValidationFailed('"nbf" claim timestamp check failed', 'nbf', 'check_failed');
        }
    }
    if (payload.exp !== undefined) {
        if (typeof payload.exp !== 'number') {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JWTClaimValidationFailed('"exp" claim must be a number', 'exp', 'invalid');
        }
        if (payload.exp <= now - tolerance) {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JWTExpired('"exp" claim timestamp check failed', 'exp', 'check_failed');
        }
    }
    if (options.maxTokenAge) {
        const age = now - payload.iat;
        const max = typeof options.maxTokenAge === 'number' ? options.maxTokenAge : (0,_secs_js__WEBPACK_IMPORTED_MODULE_3__["default"])(options.maxTokenAge);
        if (age - tolerance > max) {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JWTExpired('"iat" claim timestamp check failed (too far in the past)', 'iat', 'check_failed');
        }
        if (age < 0 - tolerance) {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)', 'iat', 'check_failed');
        }
    }
    return payload;
});


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/lib/secs.js":
/*!**********************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/lib/secs.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
const minute = 60;
const hour = minute * 60;
const day = hour * 24;
const week = day * 7;
const year = day * 365.25;
const REGEX = /^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((str) => {
    const matched = REGEX.exec(str);
    if (!matched) {
        throw new TypeError('Invalid time period format');
    }
    const value = parseFloat(matched[1]);
    const unit = matched[2].toLowerCase();
    switch (unit) {
        case 'sec':
        case 'secs':
        case 'second':
        case 'seconds':
        case 's':
            return Math.round(value);
        case 'minute':
        case 'minutes':
        case 'min':
        case 'mins':
        case 'm':
            return Math.round(value * minute);
        case 'hour':
        case 'hours':
        case 'hr':
        case 'hrs':
        case 'h':
            return Math.round(value * hour);
        case 'day':
        case 'days':
        case 'd':
            return Math.round(value * day);
        case 'week':
        case 'weeks':
        case 'w':
            return Math.round(value * week);
        default:
            return Math.round(value * year);
    }
});


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/lib/validate_algorithms.js":
/*!*************************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/lib/validate_algorithms.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
const validateAlgorithms = (option, algorithms) => {
    if (algorithms !== undefined &&
        (!Array.isArray(algorithms) || algorithms.some((s) => typeof s !== 'string'))) {
        throw new TypeError(`"${option}" option must be an array of strings`);
    }
    if (!algorithms) {
        return undefined;
    }
    return new Set(algorithms);
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (validateAlgorithms);


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/lib/validate_crit.js":
/*!*******************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/lib/validate_crit.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");

function validateCrit(Err, recognizedDefault, recognizedOption, protectedHeader, joseHeader) {
    if (joseHeader.crit !== undefined && protectedHeader.crit === undefined) {
        throw new Err('"crit" (Critical) Header Parameter MUST be integrity protected');
    }
    if (!protectedHeader || protectedHeader.crit === undefined) {
        return new Set();
    }
    if (!Array.isArray(protectedHeader.crit) ||
        protectedHeader.crit.length === 0 ||
        protectedHeader.crit.some((input) => typeof input !== 'string' || input.length === 0)) {
        throw new Err('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');
    }
    let recognized;
    if (recognizedOption !== undefined) {
        recognized = new Map([...Object.entries(recognizedOption), ...recognizedDefault.entries()]);
    }
    else {
        recognized = recognizedDefault;
    }
    for (const parameter of protectedHeader.crit) {
        if (!recognized.has(parameter)) {
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JOSENotSupported(`Extension Header Parameter "${parameter}" is not recognized`);
        }
        if (joseHeader[parameter] === undefined) {
            throw new Err(`Extension Header Parameter "${parameter}" is missing`);
        }
        else if (recognized.get(parameter) && protectedHeader[parameter] === undefined) {
            throw new Err(`Extension Header Parameter "${parameter}" MUST be integrity protected`);
        }
    }
    return new Set(protectedHeader.crit);
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (validateCrit);


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/aeskw.js":
/*!***************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/aeskw.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "unwrap": () => (/* binding */ unwrap),
/* harmony export */   "wrap": () => (/* binding */ wrap)
/* harmony export */ });
/* harmony import */ var _bogus_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bogus.js */ "../core/node_modules/jose/dist/browser/runtime/bogus.js");
/* harmony import */ var _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./webcrypto.js */ "../core/node_modules/jose/dist/browser/runtime/webcrypto.js");
/* harmony import */ var _lib_crypto_key_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/crypto_key.js */ "../core/node_modules/jose/dist/browser/lib/crypto_key.js");
/* harmony import */ var _lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/invalid_key_input.js */ "../core/node_modules/jose/dist/browser/lib/invalid_key_input.js");
/* harmony import */ var _is_key_like_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./is_key_like.js */ "../core/node_modules/jose/dist/browser/runtime/is_key_like.js");





function checkKeySize(key, alg) {
    if (key.algorithm.length !== parseInt(alg.slice(1, 4), 10)) {
        throw new TypeError(`Invalid key size for alg: ${alg}`);
    }
}
function getCryptoKey(key, alg, usage) {
    if ((0,_webcrypto_js__WEBPACK_IMPORTED_MODULE_1__.isCryptoKey)(key)) {
        (0,_lib_crypto_key_js__WEBPACK_IMPORTED_MODULE_2__.checkEncCryptoKey)(key, alg, usage);
        return key;
    }
    if (key instanceof Uint8Array) {
        return _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__["default"].subtle.importKey('raw', key, 'AES-KW', true, [usage]);
    }
    throw new TypeError((0,_lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_3__["default"])(key, ..._is_key_like_js__WEBPACK_IMPORTED_MODULE_4__.types, 'Uint8Array'));
}
const wrap = async (alg, key, cek) => {
    const cryptoKey = await getCryptoKey(key, alg, 'wrapKey');
    checkKeySize(cryptoKey, alg);
    const cryptoKeyCek = await _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__["default"].subtle.importKey('raw', cek, ..._bogus_js__WEBPACK_IMPORTED_MODULE_0__["default"]);
    return new Uint8Array(await _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__["default"].subtle.wrapKey('raw', cryptoKeyCek, cryptoKey, 'AES-KW'));
};
const unwrap = async (alg, key, encryptedKey) => {
    const cryptoKey = await getCryptoKey(key, alg, 'unwrapKey');
    checkKeySize(cryptoKey, alg);
    const cryptoKeyCek = await _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__["default"].subtle.unwrapKey('raw', encryptedKey, cryptoKey, 'AES-KW', ..._bogus_js__WEBPACK_IMPORTED_MODULE_0__["default"]);
    return new Uint8Array(await _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__["default"].subtle.exportKey('raw', cryptoKeyCek));
};


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/asn1.js":
/*!**************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/asn1.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "fromPKCS8": () => (/* binding */ fromPKCS8),
/* harmony export */   "fromSPKI": () => (/* binding */ fromSPKI),
/* harmony export */   "fromX509": () => (/* binding */ fromX509),
/* harmony export */   "toPKCS8": () => (/* binding */ toPKCS8),
/* harmony export */   "toSPKI": () => (/* binding */ toSPKI)
/* harmony export */ });
/* harmony import */ var _env_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./env.js */ "../core/node_modules/jose/dist/browser/runtime/env.js");
/* harmony import */ var _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./webcrypto.js */ "../core/node_modules/jose/dist/browser/runtime/webcrypto.js");
/* harmony import */ var _lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/invalid_key_input.js */ "../core/node_modules/jose/dist/browser/lib/invalid_key_input.js");
/* harmony import */ var _base64url_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./base64url.js */ "../core/node_modules/jose/dist/browser/runtime/base64url.js");
/* harmony import */ var _lib_format_pem_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/format_pem.js */ "../core/node_modules/jose/dist/browser/lib/format_pem.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _is_key_like_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./is_key_like.js */ "../core/node_modules/jose/dist/browser/runtime/is_key_like.js");







const genericExport = async (keyType, keyFormat, key) => {
    if (!(0,_webcrypto_js__WEBPACK_IMPORTED_MODULE_1__.isCryptoKey)(key)) {
        throw new TypeError((0,_lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_2__["default"])(key, ..._is_key_like_js__WEBPACK_IMPORTED_MODULE_6__.types));
    }
    if (!key.extractable) {
        throw new TypeError('CryptoKey is not extractable');
    }
    if (key.type !== keyType) {
        throw new TypeError(`key is not a ${keyType} key`);
    }
    return (0,_lib_format_pem_js__WEBPACK_IMPORTED_MODULE_4__["default"])((0,_base64url_js__WEBPACK_IMPORTED_MODULE_3__.encodeBase64)(new Uint8Array(await _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__["default"].subtle.exportKey(keyFormat, key))), `${keyType.toUpperCase()} KEY`);
};
const toSPKI = (key) => {
    return genericExport('public', 'spki', key);
};
const toPKCS8 = (key) => {
    return genericExport('private', 'pkcs8', key);
};
const findOid = (keyData, oid, from = 0) => {
    if (from === 0) {
        oid.unshift(oid.length);
        oid.unshift(0x06);
    }
    let i = keyData.indexOf(oid[0], from);
    if (i === -1)
        return false;
    const sub = keyData.subarray(i, i + oid.length);
    if (sub.length !== oid.length)
        return false;
    return sub.every((value, index) => value === oid[index]) || findOid(keyData, oid, i + 1);
};
const getNamedCurve = (keyData) => {
    switch (true) {
        case findOid(keyData, [0x2a, 0x86, 0x48, 0xce, 0x3d, 0x03, 0x01, 0x07]):
            return 'P-256';
        case findOid(keyData, [0x2b, 0x81, 0x04, 0x00, 0x22]):
            return 'P-384';
        case findOid(keyData, [0x2b, 0x81, 0x04, 0x00, 0x23]):
            return 'P-521';
        case findOid(keyData, [0x2b, 0x65, 0x6e]):
            return 'X25519';
        case findOid(keyData, [0x2b, 0x65, 0x6f]):
            return 'X448';
        case findOid(keyData, [0x2b, 0x65, 0x70]):
            return 'Ed25519';
        case findOid(keyData, [0x2b, 0x65, 0x71]):
            return 'Ed448';
        default:
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JOSENotSupported('Invalid or unsupported EC Key Curve or OKP Key Sub Type');
    }
};
const genericImport = async (replace, keyFormat, pem, alg, options) => {
    var _a, _b;
    let algorithm;
    let keyUsages;
    const keyData = new Uint8Array(atob(pem.replace(replace, ''))
        .split('')
        .map((c) => c.charCodeAt(0)));
    const isPublic = keyFormat === 'spki';
    switch (alg) {
        case 'PS256':
        case 'PS384':
        case 'PS512':
            algorithm = { name: 'RSA-PSS', hash: `SHA-${alg.slice(-3)}` };
            keyUsages = isPublic ? ['verify'] : ['sign'];
            break;
        case 'RS256':
        case 'RS384':
        case 'RS512':
            algorithm = { name: 'RSASSA-PKCS1-v1_5', hash: `SHA-${alg.slice(-3)}` };
            keyUsages = isPublic ? ['verify'] : ['sign'];
            break;
        case 'RSA-OAEP':
        case 'RSA-OAEP-256':
        case 'RSA-OAEP-384':
        case 'RSA-OAEP-512':
            algorithm = {
                name: 'RSA-OAEP',
                hash: `SHA-${parseInt(alg.slice(-3), 10) || 1}`,
            };
            keyUsages = isPublic ? ['encrypt', 'wrapKey'] : ['decrypt', 'unwrapKey'];
            break;
        case 'ES256':
            algorithm = { name: 'ECDSA', namedCurve: 'P-256' };
            keyUsages = isPublic ? ['verify'] : ['sign'];
            break;
        case 'ES384':
            algorithm = { name: 'ECDSA', namedCurve: 'P-384' };
            keyUsages = isPublic ? ['verify'] : ['sign'];
            break;
        case 'ES512':
            algorithm = { name: 'ECDSA', namedCurve: 'P-521' };
            keyUsages = isPublic ? ['verify'] : ['sign'];
            break;
        case 'ECDH-ES':
        case 'ECDH-ES+A128KW':
        case 'ECDH-ES+A192KW':
        case 'ECDH-ES+A256KW': {
            const namedCurve = getNamedCurve(keyData);
            algorithm = namedCurve.startsWith('P-') ? { name: 'ECDH', namedCurve } : { name: namedCurve };
            keyUsages = isPublic ? [] : ['deriveBits'];
            break;
        }
        case 'EdDSA':
            algorithm = { name: getNamedCurve(keyData) };
            keyUsages = isPublic ? ['verify'] : ['sign'];
            break;
        default:
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_5__.JOSENotSupported('Invalid or unsupported "alg" (Algorithm) value');
    }
    try {
        return await _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__["default"].subtle.importKey(keyFormat, keyData, algorithm, (_a = options === null || options === void 0 ? void 0 : options.extractable) !== null && _a !== void 0 ? _a : false, keyUsages);
    }
    catch (err) {
        if (algorithm.name === 'Ed25519' &&
            (err === null || err === void 0 ? void 0 : err.name) === 'NotSupportedError' &&
            (0,_env_js__WEBPACK_IMPORTED_MODULE_0__.isCloudflareWorkers)()) {
            algorithm = { name: 'NODE-ED25519', namedCurve: 'NODE-ED25519' };
            return await _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__["default"].subtle.importKey(keyFormat, keyData, algorithm, (_b = options === null || options === void 0 ? void 0 : options.extractable) !== null && _b !== void 0 ? _b : false, keyUsages);
        }
        throw err;
    }
};
const fromPKCS8 = (pem, alg, options) => {
    return genericImport(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g, 'pkcs8', pem, alg, options);
};
const fromSPKI = (pem, alg, options) => {
    return genericImport(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g, 'spki', pem, alg, options);
};
function getElement(seq) {
    let result = [];
    let next = 0;
    while (next < seq.length) {
        let nextPart = parseElement(seq.subarray(next));
        result.push(nextPart);
        next += nextPart.byteLength;
    }
    return result;
}
function parseElement(bytes) {
    let position = 0;
    let tag = bytes[0] & 0x1f;
    position++;
    if (tag === 0x1f) {
        tag = 0;
        while (bytes[position] >= 0x80) {
            tag = tag * 128 + bytes[position] - 0x80;
            position++;
        }
        tag = tag * 128 + bytes[position] - 0x80;
        position++;
    }
    let length = 0;
    if (bytes[position] < 0x80) {
        length = bytes[position];
        position++;
    }
    else if (length === 0x80) {
        length = 0;
        while (bytes[position + length] !== 0 || bytes[position + length + 1] !== 0) {
            if (length > bytes.byteLength) {
                throw new TypeError('invalid indefinite form length');
            }
            length++;
        }
        const byteLength = position + length + 2;
        return {
            byteLength,
            contents: bytes.subarray(position, position + length),
            raw: bytes.subarray(0, byteLength),
        };
    }
    else {
        let numberOfDigits = bytes[position] & 0x7f;
        position++;
        length = 0;
        for (let i = 0; i < numberOfDigits; i++) {
            length = length * 256 + bytes[position];
            position++;
        }
    }
    const byteLength = position + length;
    return {
        byteLength,
        contents: bytes.subarray(position, byteLength),
        raw: bytes.subarray(0, byteLength),
    };
}
function spkiFromX509(buf) {
    const tbsCertificate = getElement(getElement(parseElement(buf).contents)[0].contents);
    return (0,_base64url_js__WEBPACK_IMPORTED_MODULE_3__.encodeBase64)(tbsCertificate[tbsCertificate[0].raw[0] === 0xa0 ? 6 : 5].raw);
}
function getSPKI(x509) {
    const pem = x509.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g, '');
    const raw = (0,_base64url_js__WEBPACK_IMPORTED_MODULE_3__.decodeBase64)(pem);
    return (0,_lib_format_pem_js__WEBPACK_IMPORTED_MODULE_4__["default"])(spkiFromX509(raw), 'PUBLIC KEY');
}
const fromX509 = (pem, alg, options) => {
    let spki;
    try {
        spki = getSPKI(pem);
    }
    catch (cause) {
        throw new TypeError('failed to parse the X.509 certificate', { cause });
    }
    return fromSPKI(spki, alg, options);
};


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/base64url.js":
/*!*******************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/base64url.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "decode": () => (/* binding */ decode),
/* harmony export */   "decodeBase64": () => (/* binding */ decodeBase64),
/* harmony export */   "encode": () => (/* binding */ encode),
/* harmony export */   "encodeBase64": () => (/* binding */ encodeBase64)
/* harmony export */ });
/* harmony import */ var _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/buffer_utils.js */ "../core/node_modules/jose/dist/browser/lib/buffer_utils.js");

const encodeBase64 = (input) => {
    let unencoded = input;
    if (typeof unencoded === 'string') {
        unencoded = _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_0__.encoder.encode(unencoded);
    }
    const CHUNK_SIZE = 0x8000;
    const arr = [];
    for (let i = 0; i < unencoded.length; i += CHUNK_SIZE) {
        arr.push(String.fromCharCode.apply(null, unencoded.subarray(i, i + CHUNK_SIZE)));
    }
    return btoa(arr.join(''));
};
const encode = (input) => {
    return encodeBase64(input).replace(/=/g, '').replace(/\+/g, '-').replace(/\//g, '_');
};
const decodeBase64 = (encoded) => {
    const binary = atob(encoded);
    const bytes = new Uint8Array(binary.length);
    for (let i = 0; i < binary.length; i++) {
        bytes[i] = binary.charCodeAt(i);
    }
    return bytes;
};
const decode = (input) => {
    let encoded = input;
    if (encoded instanceof Uint8Array) {
        encoded = _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_0__.decoder.decode(encoded);
    }
    encoded = encoded.replace(/-/g, '+').replace(/_/g, '/').replace(/\s/g, '');
    try {
        return decodeBase64(encoded);
    }
    catch (_a) {
        throw new TypeError('The input to be decoded is not correctly encoded.');
    }
};


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/bogus.js":
/*!***************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/bogus.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
const bogusWebCrypto = [
    { hash: 'SHA-256', name: 'HMAC' },
    true,
    ['sign'],
];
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (bogusWebCrypto);


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/check_cek_length.js":
/*!**************************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/check_cek_length.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");

const checkCekLength = (cek, expected) => {
    const actual = cek.byteLength << 3;
    if (actual !== expected) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JWEInvalid(`Invalid Content Encryption Key length. Expected ${expected} bits, got ${actual} bits`);
    }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (checkCekLength);


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/check_key_length.js":
/*!**************************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/check_key_length.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((alg, key) => {
    if (alg.startsWith('RS') || alg.startsWith('PS')) {
        const { modulusLength } = key.algorithm;
        if (typeof modulusLength !== 'number' || modulusLength < 2048) {
            throw new TypeError(`${alg} requires key modulusLength to be 2048 bits or larger`);
        }
    }
});


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/decrypt.js":
/*!*****************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/decrypt.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/buffer_utils.js */ "../core/node_modules/jose/dist/browser/lib/buffer_utils.js");
/* harmony import */ var _lib_check_iv_length_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/check_iv_length.js */ "../core/node_modules/jose/dist/browser/lib/check_iv_length.js");
/* harmony import */ var _check_cek_length_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./check_cek_length.js */ "../core/node_modules/jose/dist/browser/runtime/check_cek_length.js");
/* harmony import */ var _timing_safe_equal_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./timing_safe_equal.js */ "../core/node_modules/jose/dist/browser/runtime/timing_safe_equal.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _webcrypto_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./webcrypto.js */ "../core/node_modules/jose/dist/browser/runtime/webcrypto.js");
/* harmony import */ var _lib_crypto_key_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../lib/crypto_key.js */ "../core/node_modules/jose/dist/browser/lib/crypto_key.js");
/* harmony import */ var _lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../lib/invalid_key_input.js */ "../core/node_modules/jose/dist/browser/lib/invalid_key_input.js");
/* harmony import */ var _is_key_like_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./is_key_like.js */ "../core/node_modules/jose/dist/browser/runtime/is_key_like.js");









async function cbcDecrypt(enc, cek, ciphertext, iv, tag, aad) {
    if (!(cek instanceof Uint8Array)) {
        throw new TypeError((0,_lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_7__["default"])(cek, 'Uint8Array'));
    }
    const keySize = parseInt(enc.slice(1, 4), 10);
    const encKey = await _webcrypto_js__WEBPACK_IMPORTED_MODULE_5__["default"].subtle.importKey('raw', cek.subarray(keySize >> 3), 'AES-CBC', false, ['decrypt']);
    const macKey = await _webcrypto_js__WEBPACK_IMPORTED_MODULE_5__["default"].subtle.importKey('raw', cek.subarray(0, keySize >> 3), {
        hash: `SHA-${keySize << 1}`,
        name: 'HMAC',
    }, false, ['sign']);
    const macData = (0,_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_0__.concat)(aad, iv, ciphertext, (0,_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_0__.uint64be)(aad.length << 3));
    const expectedTag = new Uint8Array((await _webcrypto_js__WEBPACK_IMPORTED_MODULE_5__["default"].subtle.sign('HMAC', macKey, macData)).slice(0, keySize >> 3));
    let macCheckPassed;
    try {
        macCheckPassed = (0,_timing_safe_equal_js__WEBPACK_IMPORTED_MODULE_3__["default"])(tag, expectedTag);
    }
    catch (_a) {
    }
    if (!macCheckPassed) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_4__.JWEDecryptionFailed();
    }
    let plaintext;
    try {
        plaintext = new Uint8Array(await _webcrypto_js__WEBPACK_IMPORTED_MODULE_5__["default"].subtle.decrypt({ iv, name: 'AES-CBC' }, encKey, ciphertext));
    }
    catch (_b) {
    }
    if (!plaintext) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_4__.JWEDecryptionFailed();
    }
    return plaintext;
}
async function gcmDecrypt(enc, cek, ciphertext, iv, tag, aad) {
    let encKey;
    if (cek instanceof Uint8Array) {
        encKey = await _webcrypto_js__WEBPACK_IMPORTED_MODULE_5__["default"].subtle.importKey('raw', cek, 'AES-GCM', false, ['decrypt']);
    }
    else {
        (0,_lib_crypto_key_js__WEBPACK_IMPORTED_MODULE_6__.checkEncCryptoKey)(cek, enc, 'decrypt');
        encKey = cek;
    }
    try {
        return new Uint8Array(await _webcrypto_js__WEBPACK_IMPORTED_MODULE_5__["default"].subtle.decrypt({
            additionalData: aad,
            iv,
            name: 'AES-GCM',
            tagLength: 128,
        }, encKey, (0,_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_0__.concat)(ciphertext, tag)));
    }
    catch (_a) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_4__.JWEDecryptionFailed();
    }
}
const decrypt = async (enc, cek, ciphertext, iv, tag, aad) => {
    if (!(0,_webcrypto_js__WEBPACK_IMPORTED_MODULE_5__.isCryptoKey)(cek) && !(cek instanceof Uint8Array)) {
        throw new TypeError((0,_lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_7__["default"])(cek, ..._is_key_like_js__WEBPACK_IMPORTED_MODULE_8__.types, 'Uint8Array'));
    }
    (0,_lib_check_iv_length_js__WEBPACK_IMPORTED_MODULE_1__["default"])(enc, iv);
    switch (enc) {
        case 'A128CBC-HS256':
        case 'A192CBC-HS384':
        case 'A256CBC-HS512':
            if (cek instanceof Uint8Array)
                (0,_check_cek_length_js__WEBPACK_IMPORTED_MODULE_2__["default"])(cek, parseInt(enc.slice(-3), 10));
            return cbcDecrypt(enc, cek, ciphertext, iv, tag, aad);
        case 'A128GCM':
        case 'A192GCM':
        case 'A256GCM':
            if (cek instanceof Uint8Array)
                (0,_check_cek_length_js__WEBPACK_IMPORTED_MODULE_2__["default"])(cek, parseInt(enc.slice(1, 4), 10));
            return gcmDecrypt(enc, cek, ciphertext, iv, tag, aad);
        default:
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_4__.JOSENotSupported('Unsupported JWE Content Encryption Algorithm');
    }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (decrypt);


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/digest.js":
/*!****************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/digest.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _webcrypto_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./webcrypto.js */ "../core/node_modules/jose/dist/browser/runtime/webcrypto.js");

const digest = async (algorithm, data) => {
    const subtleDigest = `SHA-${algorithm.slice(-3)}`;
    return new Uint8Array(await _webcrypto_js__WEBPACK_IMPORTED_MODULE_0__["default"].subtle.digest(subtleDigest, data));
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (digest);


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/ecdhes.js":
/*!****************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/ecdhes.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "deriveKey": () => (/* binding */ deriveKey),
/* harmony export */   "ecdhAllowed": () => (/* binding */ ecdhAllowed),
/* harmony export */   "generateEpk": () => (/* binding */ generateEpk)
/* harmony export */ });
/* harmony import */ var _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/buffer_utils.js */ "../core/node_modules/jose/dist/browser/lib/buffer_utils.js");
/* harmony import */ var _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./webcrypto.js */ "../core/node_modules/jose/dist/browser/runtime/webcrypto.js");
/* harmony import */ var _lib_crypto_key_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/crypto_key.js */ "../core/node_modules/jose/dist/browser/lib/crypto_key.js");
/* harmony import */ var _lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/invalid_key_input.js */ "../core/node_modules/jose/dist/browser/lib/invalid_key_input.js");
/* harmony import */ var _is_key_like_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./is_key_like.js */ "../core/node_modules/jose/dist/browser/runtime/is_key_like.js");





async function deriveKey(publicKey, privateKey, algorithm, keyLength, apu = new Uint8Array(0), apv = new Uint8Array(0)) {
    if (!(0,_webcrypto_js__WEBPACK_IMPORTED_MODULE_1__.isCryptoKey)(publicKey)) {
        throw new TypeError((0,_lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_3__["default"])(publicKey, ..._is_key_like_js__WEBPACK_IMPORTED_MODULE_4__.types));
    }
    (0,_lib_crypto_key_js__WEBPACK_IMPORTED_MODULE_2__.checkEncCryptoKey)(publicKey, 'ECDH');
    if (!(0,_webcrypto_js__WEBPACK_IMPORTED_MODULE_1__.isCryptoKey)(privateKey)) {
        throw new TypeError((0,_lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_3__["default"])(privateKey, ..._is_key_like_js__WEBPACK_IMPORTED_MODULE_4__.types));
    }
    (0,_lib_crypto_key_js__WEBPACK_IMPORTED_MODULE_2__.checkEncCryptoKey)(privateKey, 'ECDH', 'deriveBits');
    const value = (0,_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_0__.concat)((0,_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_0__.lengthAndInput)(_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_0__.encoder.encode(algorithm)), (0,_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_0__.lengthAndInput)(apu), (0,_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_0__.lengthAndInput)(apv), (0,_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_0__.uint32be)(keyLength));
    let length;
    if (publicKey.algorithm.name === 'X25519') {
        length = 256;
    }
    else if (publicKey.algorithm.name === 'X448') {
        length = 448;
    }
    else {
        length =
            Math.ceil(parseInt(publicKey.algorithm.namedCurve.substr(-3), 10) / 8) << 3;
    }
    const sharedSecret = new Uint8Array(await _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__["default"].subtle.deriveBits({
        name: publicKey.algorithm.name,
        public: publicKey,
    }, privateKey, length));
    return (0,_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_0__.concatKdf)(sharedSecret, keyLength, value);
}
async function generateEpk(key) {
    if (!(0,_webcrypto_js__WEBPACK_IMPORTED_MODULE_1__.isCryptoKey)(key)) {
        throw new TypeError((0,_lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_3__["default"])(key, ..._is_key_like_js__WEBPACK_IMPORTED_MODULE_4__.types));
    }
    return _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__["default"].subtle.generateKey(key.algorithm, true, ['deriveBits']);
}
function ecdhAllowed(key) {
    if (!(0,_webcrypto_js__WEBPACK_IMPORTED_MODULE_1__.isCryptoKey)(key)) {
        throw new TypeError((0,_lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_3__["default"])(key, ..._is_key_like_js__WEBPACK_IMPORTED_MODULE_4__.types));
    }
    return (['P-256', 'P-384', 'P-521'].includes(key.algorithm.namedCurve) ||
        key.algorithm.name === 'X25519' ||
        key.algorithm.name === 'X448');
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/encrypt.js":
/*!*****************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/encrypt.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/buffer_utils.js */ "../core/node_modules/jose/dist/browser/lib/buffer_utils.js");
/* harmony import */ var _lib_check_iv_length_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/check_iv_length.js */ "../core/node_modules/jose/dist/browser/lib/check_iv_length.js");
/* harmony import */ var _check_cek_length_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./check_cek_length.js */ "../core/node_modules/jose/dist/browser/runtime/check_cek_length.js");
/* harmony import */ var _webcrypto_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./webcrypto.js */ "../core/node_modules/jose/dist/browser/runtime/webcrypto.js");
/* harmony import */ var _lib_crypto_key_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/crypto_key.js */ "../core/node_modules/jose/dist/browser/lib/crypto_key.js");
/* harmony import */ var _lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../lib/invalid_key_input.js */ "../core/node_modules/jose/dist/browser/lib/invalid_key_input.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _is_key_like_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./is_key_like.js */ "../core/node_modules/jose/dist/browser/runtime/is_key_like.js");








async function cbcEncrypt(enc, plaintext, cek, iv, aad) {
    if (!(cek instanceof Uint8Array)) {
        throw new TypeError((0,_lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_5__["default"])(cek, 'Uint8Array'));
    }
    const keySize = parseInt(enc.slice(1, 4), 10);
    const encKey = await _webcrypto_js__WEBPACK_IMPORTED_MODULE_3__["default"].subtle.importKey('raw', cek.subarray(keySize >> 3), 'AES-CBC', false, ['encrypt']);
    const macKey = await _webcrypto_js__WEBPACK_IMPORTED_MODULE_3__["default"].subtle.importKey('raw', cek.subarray(0, keySize >> 3), {
        hash: `SHA-${keySize << 1}`,
        name: 'HMAC',
    }, false, ['sign']);
    const ciphertext = new Uint8Array(await _webcrypto_js__WEBPACK_IMPORTED_MODULE_3__["default"].subtle.encrypt({
        iv,
        name: 'AES-CBC',
    }, encKey, plaintext));
    const macData = (0,_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_0__.concat)(aad, iv, ciphertext, (0,_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_0__.uint64be)(aad.length << 3));
    const tag = new Uint8Array((await _webcrypto_js__WEBPACK_IMPORTED_MODULE_3__["default"].subtle.sign('HMAC', macKey, macData)).slice(0, keySize >> 3));
    return { ciphertext, tag };
}
async function gcmEncrypt(enc, plaintext, cek, iv, aad) {
    let encKey;
    if (cek instanceof Uint8Array) {
        encKey = await _webcrypto_js__WEBPACK_IMPORTED_MODULE_3__["default"].subtle.importKey('raw', cek, 'AES-GCM', false, ['encrypt']);
    }
    else {
        (0,_lib_crypto_key_js__WEBPACK_IMPORTED_MODULE_4__.checkEncCryptoKey)(cek, enc, 'encrypt');
        encKey = cek;
    }
    const encrypted = new Uint8Array(await _webcrypto_js__WEBPACK_IMPORTED_MODULE_3__["default"].subtle.encrypt({
        additionalData: aad,
        iv,
        name: 'AES-GCM',
        tagLength: 128,
    }, encKey, plaintext));
    const tag = encrypted.slice(-16);
    const ciphertext = encrypted.slice(0, -16);
    return { ciphertext, tag };
}
const encrypt = async (enc, plaintext, cek, iv, aad) => {
    if (!(0,_webcrypto_js__WEBPACK_IMPORTED_MODULE_3__.isCryptoKey)(cek) && !(cek instanceof Uint8Array)) {
        throw new TypeError((0,_lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_5__["default"])(cek, ..._is_key_like_js__WEBPACK_IMPORTED_MODULE_7__.types, 'Uint8Array'));
    }
    (0,_lib_check_iv_length_js__WEBPACK_IMPORTED_MODULE_1__["default"])(enc, iv);
    switch (enc) {
        case 'A128CBC-HS256':
        case 'A192CBC-HS384':
        case 'A256CBC-HS512':
            if (cek instanceof Uint8Array)
                (0,_check_cek_length_js__WEBPACK_IMPORTED_MODULE_2__["default"])(cek, parseInt(enc.slice(-3), 10));
            return cbcEncrypt(enc, plaintext, cek, iv, aad);
        case 'A128GCM':
        case 'A192GCM':
        case 'A256GCM':
            if (cek instanceof Uint8Array)
                (0,_check_cek_length_js__WEBPACK_IMPORTED_MODULE_2__["default"])(cek, parseInt(enc.slice(1, 4), 10));
            return gcmEncrypt(enc, plaintext, cek, iv, aad);
        default:
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_6__.JOSENotSupported('Unsupported JWE Content Encryption Algorithm');
    }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (encrypt);


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/env.js":
/*!*************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/env.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "isCloudflareWorkers": () => (/* binding */ isCloudflareWorkers)
/* harmony export */ });
function isCloudflareWorkers() {
    return (typeof WebSocketPair !== 'undefined' ||
        (typeof navigator !== 'undefined' && navigator.userAgent === 'Cloudflare-Workers') ||
        (typeof EdgeRuntime !== 'undefined' && EdgeRuntime === 'vercel'));
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/fetch_jwks.js":
/*!********************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/fetch_jwks.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");

const fetchJwks = async (url, timeout, options) => {
    let controller;
    let id;
    let timedOut = false;
    if (typeof AbortController === 'function') {
        controller = new AbortController();
        id = setTimeout(() => {
            timedOut = true;
            controller.abort();
        }, timeout);
    }
    const response = await fetch(url.href, {
        signal: controller ? controller.signal : undefined,
        redirect: 'manual',
        headers: options.headers,
    }).catch((err) => {
        if (timedOut)
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JWKSTimeout();
        throw err;
    });
    if (id !== undefined)
        clearTimeout(id);
    if (response.status !== 200) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JOSEError('Expected 200 OK from the JSON Web Key Set HTTP response');
    }
    try {
        return await response.json();
    }
    catch (_a) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JOSEError('Failed to parse the JSON Web Key Set HTTP response as JSON');
    }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (fetchJwks);


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/generate.js":
/*!******************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/generate.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "generateKeyPair": () => (/* binding */ generateKeyPair),
/* harmony export */   "generateSecret": () => (/* binding */ generateSecret)
/* harmony export */ });
/* harmony import */ var _env_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./env.js */ "../core/node_modules/jose/dist/browser/runtime/env.js");
/* harmony import */ var _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./webcrypto.js */ "../core/node_modules/jose/dist/browser/runtime/webcrypto.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _random_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./random.js */ "../core/node_modules/jose/dist/browser/runtime/random.js");




async function generateSecret(alg, options) {
    var _a;
    let length;
    let algorithm;
    let keyUsages;
    switch (alg) {
        case 'HS256':
        case 'HS384':
        case 'HS512':
            length = parseInt(alg.slice(-3), 10);
            algorithm = { name: 'HMAC', hash: `SHA-${length}`, length };
            keyUsages = ['sign', 'verify'];
            break;
        case 'A128CBC-HS256':
        case 'A192CBC-HS384':
        case 'A256CBC-HS512':
            length = parseInt(alg.slice(-3), 10);
            return (0,_random_js__WEBPACK_IMPORTED_MODULE_3__["default"])(new Uint8Array(length >> 3));
        case 'A128KW':
        case 'A192KW':
        case 'A256KW':
            length = parseInt(alg.slice(1, 4), 10);
            algorithm = { name: 'AES-KW', length };
            keyUsages = ['wrapKey', 'unwrapKey'];
            break;
        case 'A128GCMKW':
        case 'A192GCMKW':
        case 'A256GCMKW':
        case 'A128GCM':
        case 'A192GCM':
        case 'A256GCM':
            length = parseInt(alg.slice(1, 4), 10);
            algorithm = { name: 'AES-GCM', length };
            keyUsages = ['encrypt', 'decrypt'];
            break;
        default:
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');
    }
    return _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__["default"].subtle.generateKey(algorithm, (_a = options === null || options === void 0 ? void 0 : options.extractable) !== null && _a !== void 0 ? _a : false, keyUsages);
}
function getModulusLengthOption(options) {
    var _a;
    const modulusLength = (_a = options === null || options === void 0 ? void 0 : options.modulusLength) !== null && _a !== void 0 ? _a : 2048;
    if (typeof modulusLength !== 'number' || modulusLength < 2048) {
        throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JOSENotSupported('Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used');
    }
    return modulusLength;
}
async function generateKeyPair(alg, options) {
    var _a, _b, _c, _d;
    let algorithm;
    let keyUsages;
    switch (alg) {
        case 'PS256':
        case 'PS384':
        case 'PS512':
            algorithm = {
                name: 'RSA-PSS',
                hash: `SHA-${alg.slice(-3)}`,
                publicExponent: new Uint8Array([0x01, 0x00, 0x01]),
                modulusLength: getModulusLengthOption(options),
            };
            keyUsages = ['sign', 'verify'];
            break;
        case 'RS256':
        case 'RS384':
        case 'RS512':
            algorithm = {
                name: 'RSASSA-PKCS1-v1_5',
                hash: `SHA-${alg.slice(-3)}`,
                publicExponent: new Uint8Array([0x01, 0x00, 0x01]),
                modulusLength: getModulusLengthOption(options),
            };
            keyUsages = ['sign', 'verify'];
            break;
        case 'RSA-OAEP':
        case 'RSA-OAEP-256':
        case 'RSA-OAEP-384':
        case 'RSA-OAEP-512':
            algorithm = {
                name: 'RSA-OAEP',
                hash: `SHA-${parseInt(alg.slice(-3), 10) || 1}`,
                publicExponent: new Uint8Array([0x01, 0x00, 0x01]),
                modulusLength: getModulusLengthOption(options),
            };
            keyUsages = ['decrypt', 'unwrapKey', 'encrypt', 'wrapKey'];
            break;
        case 'ES256':
            algorithm = { name: 'ECDSA', namedCurve: 'P-256' };
            keyUsages = ['sign', 'verify'];
            break;
        case 'ES384':
            algorithm = { name: 'ECDSA', namedCurve: 'P-384' };
            keyUsages = ['sign', 'verify'];
            break;
        case 'ES512':
            algorithm = { name: 'ECDSA', namedCurve: 'P-521' };
            keyUsages = ['sign', 'verify'];
            break;
        case 'EdDSA':
            keyUsages = ['sign', 'verify'];
            const crv = (_a = options === null || options === void 0 ? void 0 : options.crv) !== null && _a !== void 0 ? _a : 'Ed25519';
            switch (crv) {
                case 'Ed25519':
                case 'Ed448':
                    algorithm = { name: crv };
                    break;
                default:
                    throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JOSENotSupported('Invalid or unsupported crv option provided');
            }
            break;
        case 'ECDH-ES':
        case 'ECDH-ES+A128KW':
        case 'ECDH-ES+A192KW':
        case 'ECDH-ES+A256KW': {
            keyUsages = ['deriveKey', 'deriveBits'];
            const crv = (_b = options === null || options === void 0 ? void 0 : options.crv) !== null && _b !== void 0 ? _b : 'P-256';
            switch (crv) {
                case 'P-256':
                case 'P-384':
                case 'P-521': {
                    algorithm = { name: 'ECDH', namedCurve: crv };
                    break;
                }
                case 'X25519':
                case 'X448':
                    algorithm = { name: crv };
                    break;
                default:
                    throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JOSENotSupported('Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448');
            }
            break;
        }
        default:
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');
    }
    try {
        return (await _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__["default"].subtle.generateKey(algorithm, (_c = options === null || options === void 0 ? void 0 : options.extractable) !== null && _c !== void 0 ? _c : false, keyUsages));
    }
    catch (err) {
        if (algorithm.name === 'Ed25519' &&
            (err === null || err === void 0 ? void 0 : err.name) === 'NotSupportedError' &&
            (0,_env_js__WEBPACK_IMPORTED_MODULE_0__.isCloudflareWorkers)()) {
            algorithm = { name: 'NODE-ED25519', namedCurve: 'NODE-ED25519' };
            return (await _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__["default"].subtle.generateKey(algorithm, (_d = options === null || options === void 0 ? void 0 : options.extractable) !== null && _d !== void 0 ? _d : false, keyUsages));
        }
        throw err;
    }
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/get_sign_verify_key.js":
/*!*****************************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/get_sign_verify_key.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ getCryptoKey)
/* harmony export */ });
/* harmony import */ var _webcrypto_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./webcrypto.js */ "../core/node_modules/jose/dist/browser/runtime/webcrypto.js");
/* harmony import */ var _lib_crypto_key_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/crypto_key.js */ "../core/node_modules/jose/dist/browser/lib/crypto_key.js");
/* harmony import */ var _lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/invalid_key_input.js */ "../core/node_modules/jose/dist/browser/lib/invalid_key_input.js");
/* harmony import */ var _is_key_like_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./is_key_like.js */ "../core/node_modules/jose/dist/browser/runtime/is_key_like.js");




function getCryptoKey(alg, key, usage) {
    if ((0,_webcrypto_js__WEBPACK_IMPORTED_MODULE_0__.isCryptoKey)(key)) {
        (0,_lib_crypto_key_js__WEBPACK_IMPORTED_MODULE_1__.checkSigCryptoKey)(key, alg, usage);
        return key;
    }
    if (key instanceof Uint8Array) {
        if (!alg.startsWith('HS')) {
            throw new TypeError((0,_lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_2__["default"])(key, ..._is_key_like_js__WEBPACK_IMPORTED_MODULE_3__.types));
        }
        return _webcrypto_js__WEBPACK_IMPORTED_MODULE_0__["default"].subtle.importKey('raw', key, { hash: `SHA-${alg.slice(-3)}`, name: 'HMAC' }, false, [usage]);
    }
    throw new TypeError((0,_lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_2__["default"])(key, ..._is_key_like_js__WEBPACK_IMPORTED_MODULE_3__.types, 'Uint8Array'));
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/is_key_like.js":
/*!*********************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/is_key_like.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "types": () => (/* binding */ types)
/* harmony export */ });
/* harmony import */ var _webcrypto_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./webcrypto.js */ "../core/node_modules/jose/dist/browser/runtime/webcrypto.js");

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((key) => {
    return (0,_webcrypto_js__WEBPACK_IMPORTED_MODULE_0__.isCryptoKey)(key);
});
const types = ['CryptoKey'];


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/jwk_to_key.js":
/*!********************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/jwk_to_key.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _env_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./env.js */ "../core/node_modules/jose/dist/browser/runtime/env.js");
/* harmony import */ var _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./webcrypto.js */ "../core/node_modules/jose/dist/browser/runtime/webcrypto.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");
/* harmony import */ var _base64url_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./base64url.js */ "../core/node_modules/jose/dist/browser/runtime/base64url.js");




function subtleMapping(jwk) {
    let algorithm;
    let keyUsages;
    switch (jwk.kty) {
        case 'oct': {
            switch (jwk.alg) {
                case 'HS256':
                case 'HS384':
                case 'HS512':
                    algorithm = { name: 'HMAC', hash: `SHA-${jwk.alg.slice(-3)}` };
                    keyUsages = ['sign', 'verify'];
                    break;
                case 'A128CBC-HS256':
                case 'A192CBC-HS384':
                case 'A256CBC-HS512':
                    throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JOSENotSupported(`${jwk.alg} keys cannot be imported as CryptoKey instances`);
                case 'A128GCM':
                case 'A192GCM':
                case 'A256GCM':
                case 'A128GCMKW':
                case 'A192GCMKW':
                case 'A256GCMKW':
                    algorithm = { name: 'AES-GCM' };
                    keyUsages = ['encrypt', 'decrypt'];
                    break;
                case 'A128KW':
                case 'A192KW':
                case 'A256KW':
                    algorithm = { name: 'AES-KW' };
                    keyUsages = ['wrapKey', 'unwrapKey'];
                    break;
                case 'PBES2-HS256+A128KW':
                case 'PBES2-HS384+A192KW':
                case 'PBES2-HS512+A256KW':
                    algorithm = { name: 'PBKDF2' };
                    keyUsages = ['deriveBits'];
                    break;
                default:
                    throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');
            }
            break;
        }
        case 'RSA': {
            switch (jwk.alg) {
                case 'PS256':
                case 'PS384':
                case 'PS512':
                    algorithm = { name: 'RSA-PSS', hash: `SHA-${jwk.alg.slice(-3)}` };
                    keyUsages = jwk.d ? ['sign'] : ['verify'];
                    break;
                case 'RS256':
                case 'RS384':
                case 'RS512':
                    algorithm = { name: 'RSASSA-PKCS1-v1_5', hash: `SHA-${jwk.alg.slice(-3)}` };
                    keyUsages = jwk.d ? ['sign'] : ['verify'];
                    break;
                case 'RSA-OAEP':
                case 'RSA-OAEP-256':
                case 'RSA-OAEP-384':
                case 'RSA-OAEP-512':
                    algorithm = {
                        name: 'RSA-OAEP',
                        hash: `SHA-${parseInt(jwk.alg.slice(-3), 10) || 1}`,
                    };
                    keyUsages = jwk.d ? ['decrypt', 'unwrapKey'] : ['encrypt', 'wrapKey'];
                    break;
                default:
                    throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');
            }
            break;
        }
        case 'EC': {
            switch (jwk.alg) {
                case 'ES256':
                    algorithm = { name: 'ECDSA', namedCurve: 'P-256' };
                    keyUsages = jwk.d ? ['sign'] : ['verify'];
                    break;
                case 'ES384':
                    algorithm = { name: 'ECDSA', namedCurve: 'P-384' };
                    keyUsages = jwk.d ? ['sign'] : ['verify'];
                    break;
                case 'ES512':
                    algorithm = { name: 'ECDSA', namedCurve: 'P-521' };
                    keyUsages = jwk.d ? ['sign'] : ['verify'];
                    break;
                case 'ECDH-ES':
                case 'ECDH-ES+A128KW':
                case 'ECDH-ES+A192KW':
                case 'ECDH-ES+A256KW':
                    algorithm = { name: 'ECDH', namedCurve: jwk.crv };
                    keyUsages = jwk.d ? ['deriveBits'] : [];
                    break;
                default:
                    throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');
            }
            break;
        }
        case 'OKP': {
            switch (jwk.alg) {
                case 'EdDSA':
                    algorithm = { name: jwk.crv };
                    keyUsages = jwk.d ? ['sign'] : ['verify'];
                    break;
                case 'ECDH-ES':
                case 'ECDH-ES+A128KW':
                case 'ECDH-ES+A192KW':
                case 'ECDH-ES+A256KW':
                    algorithm = { name: jwk.crv };
                    keyUsages = jwk.d ? ['deriveBits'] : [];
                    break;
                default:
                    throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');
            }
            break;
        }
        default:
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_2__.JOSENotSupported('Invalid or unsupported JWK "kty" (Key Type) Parameter value');
    }
    return { algorithm, keyUsages };
}
const parse = async (jwk) => {
    var _a, _b;
    if (!jwk.alg) {
        throw new TypeError('"alg" argument is required when "jwk.alg" is not present');
    }
    const { algorithm, keyUsages } = subtleMapping(jwk);
    const rest = [
        algorithm,
        (_a = jwk.ext) !== null && _a !== void 0 ? _a : false,
        (_b = jwk.key_ops) !== null && _b !== void 0 ? _b : keyUsages,
    ];
    if (algorithm.name === 'PBKDF2') {
        return _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__["default"].subtle.importKey('raw', (0,_base64url_js__WEBPACK_IMPORTED_MODULE_3__.decode)(jwk.k), ...rest);
    }
    const keyData = { ...jwk };
    delete keyData.alg;
    delete keyData.use;
    try {
        return await _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__["default"].subtle.importKey('jwk', keyData, ...rest);
    }
    catch (err) {
        if (algorithm.name === 'Ed25519' &&
            (err === null || err === void 0 ? void 0 : err.name) === 'NotSupportedError' &&
            (0,_env_js__WEBPACK_IMPORTED_MODULE_0__.isCloudflareWorkers)()) {
            rest[0] = { name: 'NODE-ED25519', namedCurve: 'NODE-ED25519' };
            return await _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__["default"].subtle.importKey('jwk', keyData, ...rest);
        }
        throw err;
    }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (parse);


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/key_to_jwk.js":
/*!********************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/key_to_jwk.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _webcrypto_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./webcrypto.js */ "../core/node_modules/jose/dist/browser/runtime/webcrypto.js");
/* harmony import */ var _lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/invalid_key_input.js */ "../core/node_modules/jose/dist/browser/lib/invalid_key_input.js");
/* harmony import */ var _base64url_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base64url.js */ "../core/node_modules/jose/dist/browser/runtime/base64url.js");
/* harmony import */ var _is_key_like_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./is_key_like.js */ "../core/node_modules/jose/dist/browser/runtime/is_key_like.js");




const keyToJWK = async (key) => {
    if (key instanceof Uint8Array) {
        return {
            kty: 'oct',
            k: (0,_base64url_js__WEBPACK_IMPORTED_MODULE_2__.encode)(key),
        };
    }
    if (!(0,_webcrypto_js__WEBPACK_IMPORTED_MODULE_0__.isCryptoKey)(key)) {
        throw new TypeError((0,_lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_1__["default"])(key, ..._is_key_like_js__WEBPACK_IMPORTED_MODULE_3__.types, 'Uint8Array'));
    }
    if (!key.extractable) {
        throw new TypeError('non-extractable CryptoKey cannot be exported as a JWK');
    }
    const { ext, key_ops, alg, use, ...jwk } = await _webcrypto_js__WEBPACK_IMPORTED_MODULE_0__["default"].subtle.exportKey('jwk', key);
    return jwk;
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (keyToJWK);


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/pbes2kw.js":
/*!*****************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/pbes2kw.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "decrypt": () => (/* binding */ decrypt),
/* harmony export */   "encrypt": () => (/* binding */ encrypt)
/* harmony export */ });
/* harmony import */ var _random_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./random.js */ "../core/node_modules/jose/dist/browser/runtime/random.js");
/* harmony import */ var _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/buffer_utils.js */ "../core/node_modules/jose/dist/browser/lib/buffer_utils.js");
/* harmony import */ var _base64url_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base64url.js */ "../core/node_modules/jose/dist/browser/runtime/base64url.js");
/* harmony import */ var _aeskw_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./aeskw.js */ "../core/node_modules/jose/dist/browser/runtime/aeskw.js");
/* harmony import */ var _lib_check_p2s_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/check_p2s.js */ "../core/node_modules/jose/dist/browser/lib/check_p2s.js");
/* harmony import */ var _webcrypto_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./webcrypto.js */ "../core/node_modules/jose/dist/browser/runtime/webcrypto.js");
/* harmony import */ var _lib_crypto_key_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../lib/crypto_key.js */ "../core/node_modules/jose/dist/browser/lib/crypto_key.js");
/* harmony import */ var _lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../lib/invalid_key_input.js */ "../core/node_modules/jose/dist/browser/lib/invalid_key_input.js");
/* harmony import */ var _is_key_like_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./is_key_like.js */ "../core/node_modules/jose/dist/browser/runtime/is_key_like.js");









function getCryptoKey(key, alg) {
    if (key instanceof Uint8Array) {
        return _webcrypto_js__WEBPACK_IMPORTED_MODULE_5__["default"].subtle.importKey('raw', key, 'PBKDF2', false, ['deriveBits']);
    }
    if ((0,_webcrypto_js__WEBPACK_IMPORTED_MODULE_5__.isCryptoKey)(key)) {
        (0,_lib_crypto_key_js__WEBPACK_IMPORTED_MODULE_6__.checkEncCryptoKey)(key, alg, 'deriveBits', 'deriveKey');
        return key;
    }
    throw new TypeError((0,_lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_7__["default"])(key, ..._is_key_like_js__WEBPACK_IMPORTED_MODULE_8__.types, 'Uint8Array'));
}
async function deriveKey(p2s, alg, p2c, key) {
    (0,_lib_check_p2s_js__WEBPACK_IMPORTED_MODULE_4__["default"])(p2s);
    const salt = (0,_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_1__.p2s)(alg, p2s);
    const keylen = parseInt(alg.slice(13, 16), 10);
    const subtleAlg = {
        hash: `SHA-${alg.slice(8, 11)}`,
        iterations: p2c,
        name: 'PBKDF2',
        salt,
    };
    const wrapAlg = {
        length: keylen,
        name: 'AES-KW',
    };
    const cryptoKey = await getCryptoKey(key, alg);
    if (cryptoKey.usages.includes('deriveBits')) {
        return new Uint8Array(await _webcrypto_js__WEBPACK_IMPORTED_MODULE_5__["default"].subtle.deriveBits(subtleAlg, cryptoKey, keylen));
    }
    if (cryptoKey.usages.includes('deriveKey')) {
        return _webcrypto_js__WEBPACK_IMPORTED_MODULE_5__["default"].subtle.deriveKey(subtleAlg, cryptoKey, wrapAlg, false, ['wrapKey', 'unwrapKey']);
    }
    throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"');
}
const encrypt = async (alg, key, cek, p2c = 2048, p2s = (0,_random_js__WEBPACK_IMPORTED_MODULE_0__["default"])(new Uint8Array(16))) => {
    const derived = await deriveKey(p2s, alg, p2c, key);
    const encryptedKey = await (0,_aeskw_js__WEBPACK_IMPORTED_MODULE_3__.wrap)(alg.slice(-6), derived, cek);
    return { encryptedKey, p2c, p2s: (0,_base64url_js__WEBPACK_IMPORTED_MODULE_2__.encode)(p2s) };
};
const decrypt = async (alg, key, encryptedKey, p2c, p2s) => {
    const derived = await deriveKey(p2s, alg, p2c, key);
    return (0,_aeskw_js__WEBPACK_IMPORTED_MODULE_3__.unwrap)(alg.slice(-6), derived, encryptedKey);
};


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/random.js":
/*!****************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/random.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _webcrypto_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./webcrypto.js */ "../core/node_modules/jose/dist/browser/runtime/webcrypto.js");

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_webcrypto_js__WEBPACK_IMPORTED_MODULE_0__["default"].getRandomValues.bind(_webcrypto_js__WEBPACK_IMPORTED_MODULE_0__["default"]));


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/rsaes.js":
/*!***************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/rsaes.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "decrypt": () => (/* binding */ decrypt),
/* harmony export */   "encrypt": () => (/* binding */ encrypt)
/* harmony export */ });
/* harmony import */ var _subtle_rsaes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./subtle_rsaes.js */ "../core/node_modules/jose/dist/browser/runtime/subtle_rsaes.js");
/* harmony import */ var _bogus_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./bogus.js */ "../core/node_modules/jose/dist/browser/runtime/bogus.js");
/* harmony import */ var _webcrypto_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./webcrypto.js */ "../core/node_modules/jose/dist/browser/runtime/webcrypto.js");
/* harmony import */ var _lib_crypto_key_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/crypto_key.js */ "../core/node_modules/jose/dist/browser/lib/crypto_key.js");
/* harmony import */ var _check_key_length_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./check_key_length.js */ "../core/node_modules/jose/dist/browser/runtime/check_key_length.js");
/* harmony import */ var _lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../lib/invalid_key_input.js */ "../core/node_modules/jose/dist/browser/lib/invalid_key_input.js");
/* harmony import */ var _is_key_like_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./is_key_like.js */ "../core/node_modules/jose/dist/browser/runtime/is_key_like.js");







const encrypt = async (alg, key, cek) => {
    if (!(0,_webcrypto_js__WEBPACK_IMPORTED_MODULE_2__.isCryptoKey)(key)) {
        throw new TypeError((0,_lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_5__["default"])(key, ..._is_key_like_js__WEBPACK_IMPORTED_MODULE_6__.types));
    }
    (0,_lib_crypto_key_js__WEBPACK_IMPORTED_MODULE_3__.checkEncCryptoKey)(key, alg, 'encrypt', 'wrapKey');
    (0,_check_key_length_js__WEBPACK_IMPORTED_MODULE_4__["default"])(alg, key);
    if (key.usages.includes('encrypt')) {
        return new Uint8Array(await _webcrypto_js__WEBPACK_IMPORTED_MODULE_2__["default"].subtle.encrypt((0,_subtle_rsaes_js__WEBPACK_IMPORTED_MODULE_0__["default"])(alg), key, cek));
    }
    if (key.usages.includes('wrapKey')) {
        const cryptoKeyCek = await _webcrypto_js__WEBPACK_IMPORTED_MODULE_2__["default"].subtle.importKey('raw', cek, ..._bogus_js__WEBPACK_IMPORTED_MODULE_1__["default"]);
        return new Uint8Array(await _webcrypto_js__WEBPACK_IMPORTED_MODULE_2__["default"].subtle.wrapKey('raw', cryptoKeyCek, key, (0,_subtle_rsaes_js__WEBPACK_IMPORTED_MODULE_0__["default"])(alg)));
    }
    throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation');
};
const decrypt = async (alg, key, encryptedKey) => {
    if (!(0,_webcrypto_js__WEBPACK_IMPORTED_MODULE_2__.isCryptoKey)(key)) {
        throw new TypeError((0,_lib_invalid_key_input_js__WEBPACK_IMPORTED_MODULE_5__["default"])(key, ..._is_key_like_js__WEBPACK_IMPORTED_MODULE_6__.types));
    }
    (0,_lib_crypto_key_js__WEBPACK_IMPORTED_MODULE_3__.checkEncCryptoKey)(key, alg, 'decrypt', 'unwrapKey');
    (0,_check_key_length_js__WEBPACK_IMPORTED_MODULE_4__["default"])(alg, key);
    if (key.usages.includes('decrypt')) {
        return new Uint8Array(await _webcrypto_js__WEBPACK_IMPORTED_MODULE_2__["default"].subtle.decrypt((0,_subtle_rsaes_js__WEBPACK_IMPORTED_MODULE_0__["default"])(alg), key, encryptedKey));
    }
    if (key.usages.includes('unwrapKey')) {
        const cryptoKeyCek = await _webcrypto_js__WEBPACK_IMPORTED_MODULE_2__["default"].subtle.unwrapKey('raw', encryptedKey, key, (0,_subtle_rsaes_js__WEBPACK_IMPORTED_MODULE_0__["default"])(alg), ..._bogus_js__WEBPACK_IMPORTED_MODULE_1__["default"]);
        return new Uint8Array(await _webcrypto_js__WEBPACK_IMPORTED_MODULE_2__["default"].subtle.exportKey('raw', cryptoKeyCek));
    }
    throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation');
};


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/sign.js":
/*!**************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/sign.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _subtle_dsa_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./subtle_dsa.js */ "../core/node_modules/jose/dist/browser/runtime/subtle_dsa.js");
/* harmony import */ var _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./webcrypto.js */ "../core/node_modules/jose/dist/browser/runtime/webcrypto.js");
/* harmony import */ var _check_key_length_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./check_key_length.js */ "../core/node_modules/jose/dist/browser/runtime/check_key_length.js");
/* harmony import */ var _get_sign_verify_key_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./get_sign_verify_key.js */ "../core/node_modules/jose/dist/browser/runtime/get_sign_verify_key.js");




const sign = async (alg, key, data) => {
    const cryptoKey = await (0,_get_sign_verify_key_js__WEBPACK_IMPORTED_MODULE_3__["default"])(alg, key, 'sign');
    (0,_check_key_length_js__WEBPACK_IMPORTED_MODULE_2__["default"])(alg, cryptoKey);
    const signature = await _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__["default"].subtle.sign((0,_subtle_dsa_js__WEBPACK_IMPORTED_MODULE_0__["default"])(alg, cryptoKey.algorithm), cryptoKey, data);
    return new Uint8Array(signature);
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (sign);


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/subtle_dsa.js":
/*!********************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/subtle_dsa.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ subtleDsa)
/* harmony export */ });
/* harmony import */ var _env_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./env.js */ "../core/node_modules/jose/dist/browser/runtime/env.js");
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");


function subtleDsa(alg, algorithm) {
    const hash = `SHA-${alg.slice(-3)}`;
    switch (alg) {
        case 'HS256':
        case 'HS384':
        case 'HS512':
            return { hash, name: 'HMAC' };
        case 'PS256':
        case 'PS384':
        case 'PS512':
            return { hash, name: 'RSA-PSS', saltLength: alg.slice(-3) >> 3 };
        case 'RS256':
        case 'RS384':
        case 'RS512':
            return { hash, name: 'RSASSA-PKCS1-v1_5' };
        case 'ES256':
        case 'ES384':
        case 'ES512':
            return { hash, name: 'ECDSA', namedCurve: algorithm.namedCurve };
        case 'EdDSA':
            if ((0,_env_js__WEBPACK_IMPORTED_MODULE_0__.isCloudflareWorkers)() && algorithm.name === 'NODE-ED25519') {
                return { name: 'NODE-ED25519', namedCurve: 'NODE-ED25519' };
            }
            return { name: algorithm.name };
        default:
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_1__.JOSENotSupported(`alg ${alg} is not supported either by JOSE or your javascript runtime`);
    }
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/subtle_rsaes.js":
/*!**********************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/subtle_rsaes.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ subtleRsaEs)
/* harmony export */ });
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");

function subtleRsaEs(alg) {
    switch (alg) {
        case 'RSA-OAEP':
        case 'RSA-OAEP-256':
        case 'RSA-OAEP-384':
        case 'RSA-OAEP-512':
            return 'RSA-OAEP';
        default:
            throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JOSENotSupported(`alg ${alg} is not supported either by JOSE or your javascript runtime`);
    }
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/timing_safe_equal.js":
/*!***************************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/timing_safe_equal.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
const timingSafeEqual = (a, b) => {
    if (!(a instanceof Uint8Array)) {
        throw new TypeError('First argument must be a buffer');
    }
    if (!(b instanceof Uint8Array)) {
        throw new TypeError('Second argument must be a buffer');
    }
    if (a.length !== b.length) {
        throw new TypeError('Input buffers must have the same length');
    }
    const len = a.length;
    let out = 0;
    let i = -1;
    while (++i < len) {
        out |= a[i] ^ b[i];
    }
    return out === 0;
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (timingSafeEqual);


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/verify.js":
/*!****************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/verify.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _subtle_dsa_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./subtle_dsa.js */ "../core/node_modules/jose/dist/browser/runtime/subtle_dsa.js");
/* harmony import */ var _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./webcrypto.js */ "../core/node_modules/jose/dist/browser/runtime/webcrypto.js");
/* harmony import */ var _check_key_length_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./check_key_length.js */ "../core/node_modules/jose/dist/browser/runtime/check_key_length.js");
/* harmony import */ var _get_sign_verify_key_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./get_sign_verify_key.js */ "../core/node_modules/jose/dist/browser/runtime/get_sign_verify_key.js");




const verify = async (alg, key, signature, data) => {
    const cryptoKey = await (0,_get_sign_verify_key_js__WEBPACK_IMPORTED_MODULE_3__["default"])(alg, key, 'verify');
    (0,_check_key_length_js__WEBPACK_IMPORTED_MODULE_2__["default"])(alg, cryptoKey);
    const algorithm = (0,_subtle_dsa_js__WEBPACK_IMPORTED_MODULE_0__["default"])(alg, cryptoKey.algorithm);
    try {
        return await _webcrypto_js__WEBPACK_IMPORTED_MODULE_1__["default"].subtle.verify(algorithm, cryptoKey, signature, data);
    }
    catch (_a) {
        return false;
    }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (verify);


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/webcrypto.js":
/*!*******************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/webcrypto.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "isCryptoKey": () => (/* binding */ isCryptoKey)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (crypto);
const isCryptoKey = (key) => key instanceof CryptoKey;


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/runtime/zlib.js":
/*!**************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/runtime/zlib.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "deflate": () => (/* binding */ deflate),
/* harmony export */   "inflate": () => (/* binding */ inflate)
/* harmony export */ });
/* harmony import */ var _util_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");

const inflate = async () => {
    throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.');
};
const deflate = async () => {
    throw new _util_errors_js__WEBPACK_IMPORTED_MODULE_0__.JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.');
};


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/util/base64url.js":
/*!****************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/util/base64url.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "decode": () => (/* binding */ decode),
/* harmony export */   "encode": () => (/* binding */ encode)
/* harmony export */ });
/* harmony import */ var _runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runtime/base64url.js */ "../core/node_modules/jose/dist/browser/runtime/base64url.js");

const encode = _runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.encode;
const decode = _runtime_base64url_js__WEBPACK_IMPORTED_MODULE_0__.decode;


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/util/decode_jwt.js":
/*!*****************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/util/decode_jwt.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "decodeJwt": () => (/* binding */ decodeJwt)
/* harmony export */ });
/* harmony import */ var _base64url_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base64url.js */ "../core/node_modules/jose/dist/browser/util/base64url.js");
/* harmony import */ var _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/buffer_utils.js */ "../core/node_modules/jose/dist/browser/lib/buffer_utils.js");
/* harmony import */ var _lib_is_object_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/is_object.js */ "../core/node_modules/jose/dist/browser/lib/is_object.js");
/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./errors.js */ "../core/node_modules/jose/dist/browser/util/errors.js");




function decodeJwt(jwt) {
    if (typeof jwt !== 'string')
        throw new _errors_js__WEBPACK_IMPORTED_MODULE_3__.JWTInvalid('JWTs must use Compact JWS serialization, JWT must be a string');
    const { 1: payload, length } = jwt.split('.');
    if (length === 5)
        throw new _errors_js__WEBPACK_IMPORTED_MODULE_3__.JWTInvalid('Only JWTs using Compact JWS serialization can be decoded');
    if (length !== 3)
        throw new _errors_js__WEBPACK_IMPORTED_MODULE_3__.JWTInvalid('Invalid JWT');
    if (!payload)
        throw new _errors_js__WEBPACK_IMPORTED_MODULE_3__.JWTInvalid('JWTs must contain a payload');
    let decoded;
    try {
        decoded = (0,_base64url_js__WEBPACK_IMPORTED_MODULE_0__.decode)(payload);
    }
    catch (_a) {
        throw new _errors_js__WEBPACK_IMPORTED_MODULE_3__.JWTInvalid('Failed to parse the base64url encoded payload');
    }
    let result;
    try {
        result = JSON.parse(_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_1__.decoder.decode(decoded));
    }
    catch (_b) {
        throw new _errors_js__WEBPACK_IMPORTED_MODULE_3__.JWTInvalid('Failed to parse the decoded payload as JSON');
    }
    if (!(0,_lib_is_object_js__WEBPACK_IMPORTED_MODULE_2__["default"])(result))
        throw new _errors_js__WEBPACK_IMPORTED_MODULE_3__.JWTInvalid('Invalid JWT Claims Set');
    return result;
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/util/decode_protected_header.js":
/*!******************************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/util/decode_protected_header.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "decodeProtectedHeader": () => (/* binding */ decodeProtectedHeader)
/* harmony export */ });
/* harmony import */ var _base64url_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base64url.js */ "../core/node_modules/jose/dist/browser/util/base64url.js");
/* harmony import */ var _lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/buffer_utils.js */ "../core/node_modules/jose/dist/browser/lib/buffer_utils.js");
/* harmony import */ var _lib_is_object_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/is_object.js */ "../core/node_modules/jose/dist/browser/lib/is_object.js");



function decodeProtectedHeader(token) {
    let protectedB64u;
    if (typeof token === 'string') {
        const parts = token.split('.');
        if (parts.length === 3 || parts.length === 5) {
            ;
            [protectedB64u] = parts;
        }
    }
    else if (typeof token === 'object' && token) {
        if ('protected' in token) {
            protectedB64u = token.protected;
        }
        else {
            throw new TypeError('Token does not contain a Protected Header');
        }
    }
    try {
        if (typeof protectedB64u !== 'string' || !protectedB64u) {
            throw new Error();
        }
        const result = JSON.parse(_lib_buffer_utils_js__WEBPACK_IMPORTED_MODULE_1__.decoder.decode((0,_base64url_js__WEBPACK_IMPORTED_MODULE_0__.decode)(protectedB64u)));
        if (!(0,_lib_is_object_js__WEBPACK_IMPORTED_MODULE_2__["default"])(result)) {
            throw new Error();
        }
        return result;
    }
    catch (_a) {
        throw new TypeError('Invalid Token or Protected Header formatting');
    }
}


/***/ }),

/***/ "../core/node_modules/jose/dist/browser/util/errors.js":
/*!*************************************************************!*\
  !*** ../core/node_modules/jose/dist/browser/util/errors.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "JOSEAlgNotAllowed": () => (/* binding */ JOSEAlgNotAllowed),
/* harmony export */   "JOSEError": () => (/* binding */ JOSEError),
/* harmony export */   "JOSENotSupported": () => (/* binding */ JOSENotSupported),
/* harmony export */   "JWEDecryptionFailed": () => (/* binding */ JWEDecryptionFailed),
/* harmony export */   "JWEInvalid": () => (/* binding */ JWEInvalid),
/* harmony export */   "JWKInvalid": () => (/* binding */ JWKInvalid),
/* harmony export */   "JWKSInvalid": () => (/* binding */ JWKSInvalid),
/* harmony export */   "JWKSMultipleMatchingKeys": () => (/* binding */ JWKSMultipleMatchingKeys),
/* harmony export */   "JWKSNoMatchingKey": () => (/* binding */ JWKSNoMatchingKey),
/* harmony export */   "JWKSTimeout": () => (/* binding */ JWKSTimeout),
/* harmony export */   "JWSInvalid": () => (/* binding */ JWSInvalid),
/* harmony export */   "JWSSignatureVerificationFailed": () => (/* binding */ JWSSignatureVerificationFailed),
/* harmony export */   "JWTClaimValidationFailed": () => (/* binding */ JWTClaimValidationFailed),
/* harmony export */   "JWTExpired": () => (/* binding */ JWTExpired),
/* harmony export */   "JWTInvalid": () => (/* binding */ JWTInvalid)
/* harmony export */ });
class JOSEError extends Error {
    static get code() {
        return 'ERR_JOSE_GENERIC';
    }
    constructor(message) {
        var _a;
        super(message);
        this.code = 'ERR_JOSE_GENERIC';
        this.name = this.constructor.name;
        (_a = Error.captureStackTrace) === null || _a === void 0 ? void 0 : _a.call(Error, this, this.constructor);
    }
}
class JWTClaimValidationFailed extends JOSEError {
    static get code() {
        return 'ERR_JWT_CLAIM_VALIDATION_FAILED';
    }
    constructor(message, claim = 'unspecified', reason = 'unspecified') {
        super(message);
        this.code = 'ERR_JWT_CLAIM_VALIDATION_FAILED';
        this.claim = claim;
        this.reason = reason;
    }
}
class JWTExpired extends JOSEError {
    static get code() {
        return 'ERR_JWT_EXPIRED';
    }
    constructor(message, claim = 'unspecified', reason = 'unspecified') {
        super(message);
        this.code = 'ERR_JWT_EXPIRED';
        this.claim = claim;
        this.reason = reason;
    }
}
class JOSEAlgNotAllowed extends JOSEError {
    constructor() {
        super(...arguments);
        this.code = 'ERR_JOSE_ALG_NOT_ALLOWED';
    }
    static get code() {
        return 'ERR_JOSE_ALG_NOT_ALLOWED';
    }
}
class JOSENotSupported extends JOSEError {
    constructor() {
        super(...arguments);
        this.code = 'ERR_JOSE_NOT_SUPPORTED';
    }
    static get code() {
        return 'ERR_JOSE_NOT_SUPPORTED';
    }
}
class JWEDecryptionFailed extends JOSEError {
    constructor() {
        super(...arguments);
        this.code = 'ERR_JWE_DECRYPTION_FAILED';
        this.message = 'decryption operation failed';
    }
    static get code() {
        return 'ERR_JWE_DECRYPTION_FAILED';
    }
}
class JWEInvalid extends JOSEError {
    constructor() {
        super(...arguments);
        this.code = 'ERR_JWE_INVALID';
    }
    static get code() {
        return 'ERR_JWE_INVALID';
    }
}
class JWSInvalid extends JOSEError {
    constructor() {
        super(...arguments);
        this.code = 'ERR_JWS_INVALID';
    }
    static get code() {
        return 'ERR_JWS_INVALID';
    }
}
class JWTInvalid extends JOSEError {
    constructor() {
        super(...arguments);
        this.code = 'ERR_JWT_INVALID';
    }
    static get code() {
        return 'ERR_JWT_INVALID';
    }
}
class JWKInvalid extends JOSEError {
    constructor() {
        super(...arguments);
        this.code = 'ERR_JWK_INVALID';
    }
    static get code() {
        return 'ERR_JWK_INVALID';
    }
}
class JWKSInvalid extends JOSEError {
    constructor() {
        super(...arguments);
        this.code = 'ERR_JWKS_INVALID';
    }
    static get code() {
        return 'ERR_JWKS_INVALID';
    }
}
class JWKSNoMatchingKey extends JOSEError {
    constructor() {
        super(...arguments);
        this.code = 'ERR_JWKS_NO_MATCHING_KEY';
        this.message = 'no applicable key found in the JSON Web Key Set';
    }
    static get code() {
        return 'ERR_JWKS_NO_MATCHING_KEY';
    }
}
class JWKSMultipleMatchingKeys extends JOSEError {
    constructor() {
        super(...arguments);
        this.code = 'ERR_JWKS_MULTIPLE_MATCHING_KEYS';
        this.message = 'multiple matching keys found in the JSON Web Key Set';
    }
    static get code() {
        return 'ERR_JWKS_MULTIPLE_MATCHING_KEYS';
    }
}
Symbol.asyncIterator;
class JWKSTimeout extends JOSEError {
    constructor() {
        super(...arguments);
        this.code = 'ERR_JWKS_TIMEOUT';
        this.message = 'request timed out';
    }
    static get code() {
        return 'ERR_JWKS_TIMEOUT';
    }
}
class JWSSignatureVerificationFailed extends JOSEError {
    constructor() {
        super(...arguments);
        this.code = 'ERR_JWS_SIGNATURE_VERIFICATION_FAILED';
        this.message = 'signature verification failed';
    }
    static get code() {
        return 'ERR_JWS_SIGNATURE_VERIFICATION_FAILED';
    }
}


/***/ }),

/***/ "../oidc-browser/node_modules/@inrupt/universal-fetch/dist/index-browser.mjs":
/*!***********************************************************************************!*\
  !*** ../oidc-browser/node_modules/@inrupt/universal-fetch/dist/index-browser.mjs ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Headers": () => (/* binding */ Headers),
/* harmony export */   "Request": () => (/* binding */ Request),
/* harmony export */   "Response": () => (/* binding */ Response),
/* harmony export */   "default": () => (/* binding */ indexBrowser),
/* harmony export */   "fetch": () => (/* binding */ fetch)
/* harmony export */ });
var indexBrowser = globalThis.fetch;
const { fetch, Response, Request, Headers } = globalThis;




/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.browser.ts");
/******/ 	solidClientAuthentication = __webpack_exports__;
/******/ 	
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7O0FBRUEsa0NBQWtDLFFBQVE7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpQkFBaUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSx1Q0FBdUMsUUFBUTtBQUMvQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7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O0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjs7QUFFQSxrQ0FBa0MsUUFBUTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlCQUFpQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLHVDQUF1QyxRQUFRO0FB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Q0E7QUFDQTtBQUNBLGtDQUFrQyxnRUFBYyxDQUFDLHFEQUFTO0FBQzFELGFBQWEsNkRBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDakNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ25KQTtBQUNBLFFBQVEsb0NBQW9DOztBQUUwQjs7Ozs7OztVQ0h0RTtVQUNBOztVQUVBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBOztVQUVBO1VBQ0E7O1VBRUE7VUFDQTtVQUNBOzs7OztXQ3RCQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EsaUNBQWlDLFdBQVc7V0FDNUM7V0FDQTs7Ozs7V0NQQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLHlDQUF5Qyx3Q0FBd0M7V0FDakY7V0FDQTtXQUNBOzs7OztXQ1BBOzs7OztXQ0FBO1dBQ0E7V0FDQTtXQUNBLHVEQUF1RCxpQkFBaUI7V0FDeEU7V0FDQSxnREFBZ0QsYUFBYTtXQUM3RDs7Ozs7VUVOQTtVQUNBO1VBQ0E7VUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi9zcmMvQ2xpZW50QXV0aGVudGljYXRpb24udHMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uL3NyYy9TZXNzaW9uLnRzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi9zcmMvY29uc3RhbnQudHMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uL3NyYy9kZWZhdWx0U2Vzc2lvbi50cyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4vc3JjL2RlcGVuZGVuY2llcy50cyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4vc3JjL2luZGV4LmJyb3dzZXIudHMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4vc3JjL2xvZ2luL29pZGMvQWdncmVnYXRlUmVkaXJlY3RIYW5kbGVyLnRzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi9zcmMvbG9naW4vb2lkYy9DbGllbnRSZWdpc3RyYXIudHMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uL3NyYy9sb2dpbi9vaWRjL0lzc3VlckNvbmZpZ0ZldGNoZXIudHMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uL3NyYy9sb2dpbi9vaWRjL09pZGNMb2dpbkhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uL3NyYy9sb2dpbi9vaWRjL1JlZGlyZWN0b3IudHMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uL3NyYy9sb2dpbi9vaWRjL2luY29taW5nUmVkaXJlY3RIYW5kbGVyL0F1dGhDb2RlUmVkaXJlY3RIYW5kbGVyLnRzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi9zcmMvbG9naW4vb2lkYy9pbmNvbWluZ1JlZGlyZWN0SGFuZGxlci9FcnJvck9pZGNIYW5kbGVyLnRzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi9zcmMvbG9naW4vb2lkYy9pbmNvbWluZ1JlZGlyZWN0SGFuZGxlci9GYWxsYmFja1JlZGlyZWN0SGFuZGxlci50cyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4vc3JjL2xvZ2luL29pZGMvb2lkY0hhbmRsZXJzL0F1dGhvcml6YXRpb25Db2RlV2l0aFBrY2VPaWRjSGFuZGxlci50cyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4vc3JjL2xvZ2luL29pZGMvcmVmcmVzaC9Ub2tlblJlZnJlc2hlci50cyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4vc3JjL2xvZ291dC9HZW5lcmFsTG9nb3V0SGFuZGxlci50cyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4vc3JjL3Nlc3Npb25JbmZvL1Nlc3Npb25JbmZvTWFuYWdlci50cyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4vc3JjL3N0b3JhZ2UvQnJvd3NlclN0b3JhZ2UudHMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uL3NyYy9zdG9yYWdlL1N0b3JhZ2VVdGlsaXR5LnRzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi9ub2RlX21vZHVsZXMvQGlucnVwdC91bml2ZXJzYWwtZmV0Y2gvZGlzdC9pbmRleC1icm93c2VyLmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi9ub2RlX21vZHVsZXMvZXZlbnRzL2V2ZW50cy5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9jb21tb25qcy1icm93c2VyL2luZGV4LmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2NvbW1vbmpzLWJyb3dzZXIvbWQ1LmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2NvbW1vbmpzLWJyb3dzZXIvbmF0aXZlLmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2NvbW1vbmpzLWJyb3dzZXIvbmlsLmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2NvbW1vbmpzLWJyb3dzZXIvcGFyc2UuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvY29tbW9uanMtYnJvd3Nlci9yZWdleC5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9jb21tb25qcy1icm93c2VyL3JuZy5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9jb21tb25qcy1icm93c2VyL3NoYTEuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvY29tbW9uanMtYnJvd3Nlci9zdHJpbmdpZnkuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvY29tbW9uanMtYnJvd3Nlci92MS5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9jb21tb25qcy1icm93c2VyL3YzLmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2NvbW1vbmpzLWJyb3dzZXIvdjM1LmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2NvbW1vbmpzLWJyb3dzZXIvdjQuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvY29tbW9uanMtYnJvd3Nlci92NS5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9jb21tb25qcy1icm93c2VyL3ZhbGlkYXRlLmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2NvbW1vbmpzLWJyb3dzZXIvdmVyc2lvbi5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvZGlzdC9pbmRleC5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL0BpbnJ1cHQvdW5pdmVyc2FsLWZldGNoL2Rpc3QvaW5kZXgtYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvY29tbW9uanMtYnJvd3Nlci9pbmRleC5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9jb21tb25qcy1icm93c2VyL21kNS5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9jb21tb25qcy1icm93c2VyL25hdGl2ZS5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9jb21tb25qcy1icm93c2VyL25pbC5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9jb21tb25qcy1icm93c2VyL3BhcnNlLmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2NvbW1vbmpzLWJyb3dzZXIvcmVnZXguanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvY29tbW9uanMtYnJvd3Nlci9ybmcuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvY29tbW9uanMtYnJvd3Nlci9zaGExLmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2NvbW1vbmpzLWJyb3dzZXIvc3RyaW5naWZ5LmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2NvbW1vbmpzLWJyb3dzZXIvdjEuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvY29tbW9uanMtYnJvd3Nlci92My5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9jb21tb25qcy1icm93c2VyL3YzNS5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9jb21tb25qcy1icm93c2VyL3Y0LmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2NvbW1vbmpzLWJyb3dzZXIvdjUuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvY29tbW9uanMtYnJvd3Nlci92YWxpZGF0ZS5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9jb21tb25qcy1icm93c2VyL3ZlcnNpb24uanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvbmF0aXZlLmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3JlZ2V4LmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3JuZy5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9zdHJpbmdpZnkuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvdjQuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvdmFsaWRhdGUuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9vaWRjLWJyb3dzZXIvZGlzdC9pbmRleC5lcy5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL29pZGMtYnJvd3Nlci9ub2RlX21vZHVsZXMvQGlucnVwdC9vaWRjLWNsaWVudC9saWIvb2lkYy1jbGllbnQubWluLmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9kaXN0L2luZGV4Lm1qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL0BpbnJ1cHQvdW5pdmVyc2FsLWZldGNoL2Rpc3QvaW5kZXgtYnJvd3Nlci5tanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9pbmRleC5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL2p3ZS9jb21wYWN0L2RlY3J5cHQuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9qd2UvY29tcGFjdC9lbmNyeXB0LmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvam9zZS9kaXN0L2Jyb3dzZXIvandlL2ZsYXR0ZW5lZC9kZWNyeXB0LmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvam9zZS9kaXN0L2Jyb3dzZXIvandlL2ZsYXR0ZW5lZC9lbmNyeXB0LmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvam9zZS9kaXN0L2Jyb3dzZXIvandlL2dlbmVyYWwvZGVjcnlwdC5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL2p3ZS9nZW5lcmFsL2VuY3J5cHQuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9qd2svZW1iZWRkZWQuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9qd2svdGh1bWJwcmludC5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL2p3a3MvbG9jYWwuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9qd2tzL3JlbW90ZS5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL2p3cy9jb21wYWN0L3NpZ24uanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9qd3MvY29tcGFjdC92ZXJpZnkuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9qd3MvZmxhdHRlbmVkL3NpZ24uanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9qd3MvZmxhdHRlbmVkL3ZlcmlmeS5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL2p3cy9nZW5lcmFsL3NpZ24uanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9qd3MvZ2VuZXJhbC92ZXJpZnkuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9qd3QvZGVjcnlwdC5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL2p3dC9lbmNyeXB0LmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvam9zZS9kaXN0L2Jyb3dzZXIvand0L3Byb2R1Y2UuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9qd3Qvc2lnbi5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL2p3dC91bnNlY3VyZWQuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9qd3QvdmVyaWZ5LmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvam9zZS9kaXN0L2Jyb3dzZXIva2V5L2V4cG9ydC5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL2tleS9nZW5lcmF0ZV9rZXlfcGFpci5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL2tleS9nZW5lcmF0ZV9zZWNyZXQuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9rZXkvaW1wb3J0LmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvam9zZS9kaXN0L2Jyb3dzZXIvbGliL2Flc2djbWt3LmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvam9zZS9kaXN0L2Jyb3dzZXIvbGliL2J1ZmZlcl91dGlscy5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL2xpYi9jZWsuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9saWIvY2hlY2tfaXZfbGVuZ3RoLmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvam9zZS9kaXN0L2Jyb3dzZXIvbGliL2NoZWNrX2tleV90eXBlLmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvam9zZS9kaXN0L2Jyb3dzZXIvbGliL2NoZWNrX3Aycy5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL2xpYi9jcnlwdG9fa2V5LmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvam9zZS9kaXN0L2Jyb3dzZXIvbGliL2RlY3J5cHRfa2V5X21hbmFnZW1lbnQuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9saWIvZW5jcnlwdF9rZXlfbWFuYWdlbWVudC5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL2xpYi9lcG9jaC5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL2xpYi9mb3JtYXRfcGVtLmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvam9zZS9kaXN0L2Jyb3dzZXIvbGliL2ludmFsaWRfa2V5X2lucHV0LmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvam9zZS9kaXN0L2Jyb3dzZXIvbGliL2lzX2Rpc2pvaW50LmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvam9zZS9kaXN0L2Jyb3dzZXIvbGliL2lzX29iamVjdC5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL2xpYi9pdi5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL2xpYi9qd3RfY2xhaW1zX3NldC5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL2xpYi9zZWNzLmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvam9zZS9kaXN0L2Jyb3dzZXIvbGliL3ZhbGlkYXRlX2FsZ29yaXRobXMuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9saWIvdmFsaWRhdGVfY3JpdC5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL3J1bnRpbWUvYWVza3cuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9ydW50aW1lL2FzbjEuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9ydW50aW1lL2Jhc2U2NHVybC5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL3J1bnRpbWUvYm9ndXMuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9ydW50aW1lL2NoZWNrX2Nla19sZW5ndGguanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9ydW50aW1lL2NoZWNrX2tleV9sZW5ndGguanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9ydW50aW1lL2RlY3J5cHQuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9ydW50aW1lL2RpZ2VzdC5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL3J1bnRpbWUvZWNkaGVzLmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvam9zZS9kaXN0L2Jyb3dzZXIvcnVudGltZS9lbmNyeXB0LmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvam9zZS9kaXN0L2Jyb3dzZXIvcnVudGltZS9lbnYuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9ydW50aW1lL2ZldGNoX2p3a3MuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9ydW50aW1lL2dlbmVyYXRlLmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvam9zZS9kaXN0L2Jyb3dzZXIvcnVudGltZS9nZXRfc2lnbl92ZXJpZnlfa2V5LmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvam9zZS9kaXN0L2Jyb3dzZXIvcnVudGltZS9pc19rZXlfbGlrZS5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL3J1bnRpbWUvandrX3RvX2tleS5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL3J1bnRpbWUva2V5X3RvX2p3ay5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL3J1bnRpbWUvcGJlczJrdy5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL3J1bnRpbWUvcmFuZG9tLmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvam9zZS9kaXN0L2Jyb3dzZXIvcnVudGltZS9yc2Flcy5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL3J1bnRpbWUvc2lnbi5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL3J1bnRpbWUvc3VidGxlX2RzYS5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL3J1bnRpbWUvc3VidGxlX3JzYWVzLmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvam9zZS9kaXN0L2Jyb3dzZXIvcnVudGltZS90aW1pbmdfc2FmZV9lcXVhbC5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL3J1bnRpbWUvdmVyaWZ5LmpzIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vLi4vY29yZS9ub2RlX21vZHVsZXMvam9zZS9kaXN0L2Jyb3dzZXIvcnVudGltZS93ZWJjcnlwdG8uanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci9ydW50aW1lL3psaWIuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci91dGlsL2Jhc2U2NHVybC5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL3V0aWwvZGVjb2RlX2p3dC5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL2NvcmUvbm9kZV9tb2R1bGVzL2pvc2UvZGlzdC9icm93c2VyL3V0aWwvZGVjb2RlX3Byb3RlY3RlZF9oZWFkZXIuanMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi8uLi9jb3JlL25vZGVfbW9kdWxlcy9qb3NlL2Rpc3QvYnJvd3Nlci91dGlsL2Vycm9ycy5qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uLy4uL29pZGMtYnJvd3Nlci9ub2RlX21vZHVsZXMvQGlucnVwdC91bml2ZXJzYWwtZmV0Y2gvZGlzdC9pbmRleC1icm93c2VyLm1qcyIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3NvbGlkQ2xpZW50QXV0aGVudGljYXRpb24vd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uL3dlYnBhY2svYmVmb3JlLXN0YXJ0dXAiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi93ZWJwYWNrL3N0YXJ0dXAiLCJ3ZWJwYWNrOi8vc29saWRDbGllbnRBdXRoZW50aWNhdGlvbi93ZWJwYWNrL2FmdGVyLXN0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiLy9cbi8vIENvcHlyaWdodCAyMDIyIElucnVwdCBJbmMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpblxuLy8gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsXG4vLyBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlXG4vLyBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbyxcbi8vIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4vLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SIElNUExJRUQsXG4vLyBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQVxuLy8gUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVFxuLy8gSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OXG4vLyBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEVcbi8vIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuLy9cblxuLyoqXG4gKiBAaGlkZGVuXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqL1xuXG5pbXBvcnQge1xuICBJTG9naW5IYW5kbGVyLFxuICBJTG9nb3V0SGFuZGxlcixcbiAgSUluY29taW5nUmVkaXJlY3RIYW5kbGVyLFxuICBJU2Vzc2lvbkluZm8sXG4gIElTZXNzaW9uSW5mb01hbmFnZXIsXG4gIElJc3N1ZXJDb25maWdGZXRjaGVyLFxuICBJU2Vzc2lvbkludGVybmFsSW5mbyxcbiAgSUxvZ2luT3B0aW9ucyxcbiAgRVZFTlRTLFxuICBpc1ZhbGlkUmVkaXJlY3RVcmwsXG59IGZyb20gXCJAaW5ydXB0L3NvbGlkLWNsaWVudC1hdXRobi1jb3JlXCI7XG5pbXBvcnQgeyBmZXRjaCB9IGZyb20gXCJAaW5ydXB0L3VuaXZlcnNhbC1mZXRjaFwiO1xuaW1wb3J0IHsgcmVtb3ZlT2lkY1F1ZXJ5UGFyYW0gfSBmcm9tIFwiQGlucnVwdC9vaWRjLWNsaWVudC1leHRcIjtcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gXCJldmVudHNcIjtcblxuLy8gQnkgb25seSByZWZlcnJpbmcgdG8gYHdpbmRvd2AgYXQgcnVudGltZSwgYXBwcyB0aGF0IGRvIHNlcnZlci1zaWRlIHJlbmRlcmluZ1xuLy8gd29uJ3QgcnVuIGludG8gZXJyb3JzIHdoZW4gcmVuZGVyaW5nIGNvZGUgdGhhdCBpbnN0YW50aWF0ZXMgYVxuLy8gQ2xpZW50QXV0aGVudGljYXRpb246XG5jb25zdCBnbG9iYWxGZXRjaDogdHlwZW9mIGZldGNoID0gKHJlcXVlc3QsIGluaXQpID0+IGZldGNoKHJlcXVlc3QsIGluaXQpO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2xpZW50QXV0aGVudGljYXRpb24ge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGxvZ2luSGFuZGxlcjogSUxvZ2luSGFuZGxlcixcbiAgICBwcml2YXRlIHJlZGlyZWN0SGFuZGxlcjogSUluY29taW5nUmVkaXJlY3RIYW5kbGVyLFxuICAgIHByaXZhdGUgbG9nb3V0SGFuZGxlcjogSUxvZ291dEhhbmRsZXIsXG4gICAgcHJpdmF0ZSBzZXNzaW9uSW5mb01hbmFnZXI6IElTZXNzaW9uSW5mb01hbmFnZXIsXG4gICAgcHJpdmF0ZSBpc3N1ZXJDb25maWdGZXRjaGVyOiBJSXNzdWVyQ29uZmlnRmV0Y2hlclxuICApIHt9XG5cbiAgLy8gRGVmaW5lIHRoZXNlIGZ1bmN0aW9ucyBhcyBwcm9wZXJ0aWVzIHNvIHRoYXQgdGhleSBkb24ndCBnZXQgYWNjaWRlbnRhbGx5IHJlLWJvdW5kLlxuICAvLyBJc24ndCBKYXZhc2NyaXB0IGZ1bj9cbiAgbG9naW4gPSBhc3luYyAoXG4gICAgb3B0aW9uczogSUxvZ2luT3B0aW9ucyxcbiAgICBldmVudEVtaXR0ZXI6IEV2ZW50RW1pdHRlclxuICApOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAvLyBJbiBvcmRlciB0byBnZXQgYSBjbGVhbiBzdGFydCwgbWFrZSBzdXJlIHRoYXQgdGhlIHNlc3Npb24gaXMgbG9nZ2VkIG91dFxuICAgIC8vIG9uIGxvZ2luLlxuICAgIC8vIEJ1dCB3ZSBtYXkgd2FudCB0byBwcmVzZXJ2ZSBvdXIgY2xpZW50IGFwcGxpY2F0aW9uIGluZm8sIHBhcnRpY3VsYXJseSBpZlxuICAgIC8vIHdlIHVzZWQgRHluYW1pYyBDbGllbnQgUmVnaXN0cmF0aW9uIHRvIHJlZ2lzdGVyIChzaW5jZSB3ZSBkb24ndFxuICAgIC8vIG5lY2Vzc2FyaWx5IHdhbnQgdGhlIHVzZXIgdG8gaGF2ZSB0byByZWdpc3RlciB0aGlzIGFwcCBlYWNoIHRpbWUgdGhleVxuICAgIC8vIGxvZ2luKS5cbiAgICBhd2FpdCB0aGlzLnNlc3Npb25JbmZvTWFuYWdlci5jbGVhcihvcHRpb25zLnNlc3Npb25JZCk7XG5cbiAgICAvLyBJbiB0aGUgY2FzZSBvZiB0aGUgdXNlciBoaXR0aW5nIHRoZSAnYmFjaycgYnV0dG9uIGluIHRoZWlyIGJyb3dzZXIsIHRoZXlcbiAgICAvLyBjb3VsZCByZXR1cm4gdG8gYSBwcmV2aW91cyByZWRpcmVjdCBVUkwgdGhhdCBjb250YWlucyBPSURDIHBhcmFtcyB0aGF0XG4gICAgLy8gYXJlIG5vdyBsb25nZXIgdmFsaWQuIFRvIGJlIHNhZmUsIHN0cmlwIHJlbGV2YW50IHBhcmFtcyBub3cuXG4gICAgLy8gSWYgdGhlIHVzZXIgaXMgcHJvdmlkaW5nIGEgcmVkaXJlY3QgSVJJLCBpdCBzaG91bGQgbm90IGJlIG1vZGlmaWVkLCBzb1xuICAgIC8vIG5vcm1hbGl6YXRpb24gb25seSBhcHBsaWVzIGlmIHdlIGRlZmF1bHQgdG8gdGhlIGN1cnJlbnQgbG9jYXRpb24gKHdoaWNoIGlzXG4gICAgLy8gYSBiYWQgcHJhY3RpY2UgYW5kIHNob3VsZCBiZSBkaXNjb3VyYWdlZCkuXG4gICAgY29uc3QgcmVkaXJlY3RVcmwgPVxuICAgICAgb3B0aW9ucy5yZWRpcmVjdFVybCA/PyByZW1vdmVPaWRjUXVlcnlQYXJhbSh3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gICAgaWYgKCFpc1ZhbGlkUmVkaXJlY3RVcmwocmVkaXJlY3RVcmwpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGAke3JlZGlyZWN0VXJsfSBpcyBub3QgYSB2YWxpZCByZWRpcmVjdCBVUkwsIGl0IGlzIGVpdGhlciBhIG1hbGZvcm1lZCBJUkkgb3IgaXQgaW5jbHVkZXMgYSBoYXNoIGZyYWdtZW50LmBcbiAgICAgICk7XG4gICAgfVxuICAgIGF3YWl0IHRoaXMubG9naW5IYW5kbGVyLmhhbmRsZSh7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgcmVkaXJlY3RVcmwsXG4gICAgICAvLyBJZiBubyBjbGllbnROYW1lIGlzIHByb3ZpZGVkLCB0aGUgY2xpZW50SWQgbWF5IGJlIHVzZWQgaW5zdGVhZC5cbiAgICAgIGNsaWVudE5hbWU6IG9wdGlvbnMuY2xpZW50TmFtZSA/PyBvcHRpb25zLmNsaWVudElkLFxuICAgICAgZXZlbnRFbWl0dGVyLFxuICAgIH0pO1xuICB9O1xuXG4gIC8vIEJ5IGRlZmF1bHQsIG91ciBmZXRjaCgpIHJlc29sdmVzIHRvIHRoZSBlbnZpcm9ubWVudCBmZXRjaCgpIGZ1bmN0aW9uLlxuICBmZXRjaCA9IGdsb2JhbEZldGNoO1xuXG4gIGxvZ291dCA9IGFzeW5jIChzZXNzaW9uSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgIGF3YWl0IHRoaXMubG9nb3V0SGFuZGxlci5oYW5kbGUoc2Vzc2lvbklkKTtcblxuICAgIC8vIFJlc3RvcmUgb3VyIGZldGNoKCkgZnVuY3Rpb24gYmFjayB0byB0aGUgZW52aXJvbm1lbnQgZmV0Y2goKSwgZWZmZWN0aXZlbHlcbiAgICAvLyBsZWF2aW5nIHVzIHdpdGggdW4tYXV0aGVudGljYXRlZCBmZXRjaGVzIGZyb20gbm93IG9uLlxuICAgIHRoaXMuZmV0Y2ggPSBnbG9iYWxGZXRjaDtcbiAgfTtcblxuICBnZXRTZXNzaW9uSW5mbyA9IGFzeW5jIChcbiAgICBzZXNzaW9uSWQ6IHN0cmluZ1xuICApOiBQcm9taXNlPChJU2Vzc2lvbkluZm8gJiBJU2Vzc2lvbkludGVybmFsSW5mbykgfCB1bmRlZmluZWQ+ID0+IHtcbiAgICAvLyBUT0RPIGNvbXBsZXRlXG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbkluZm9NYW5hZ2VyLmdldChzZXNzaW9uSWQpO1xuICB9O1xuXG4gIGdldEFsbFNlc3Npb25JbmZvID0gYXN5bmMgKCk6IFByb21pc2U8SVNlc3Npb25JbmZvW10+ID0+IHtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uSW5mb01hbmFnZXIuZ2V0QWxsKCk7XG4gIH07XG5cbiAgLy8gQ29sbGVjdHMgc2Vzc2lvbiBpbmZvcm1hdGlvbiBmcm9tIHN0b3JhZ2UsIGFuZCByZXR1cm5zIHRoZW0uIFJldHVybnMgbnVsbFxuICAvLyBpZiB0aGUgZXhwZWN0ZWQgaW5mb3JtYXRpb24gY2Fubm90IGJlIGZvdW5kLlxuICAvLyBOb3RlIHRoYXQgdGhlIElEIHRva2VuIGlzIG5vdCBzdG9yZWQsIHdoaWNoIG1lYW5zIHRoZSBzZXNzaW9uIGluZm9ybWF0aW9uXG4gIC8vIGNhbm5vdCBiZSB2YWxpZGF0ZWQgYXQgdGhpcyBwb2ludC5cbiAgdmFsaWRhdGVDdXJyZW50U2Vzc2lvbiA9IGFzeW5jIChcbiAgICBjdXJyZW50U2Vzc2lvbklkOiBzdHJpbmdcbiAgKTogUHJvbWlzZTwoSVNlc3Npb25JbmZvICYgSVNlc3Npb25JbnRlcm5hbEluZm8pIHwgbnVsbD4gPT4ge1xuICAgIGNvbnN0IHNlc3Npb25JbmZvID0gYXdhaXQgdGhpcy5zZXNzaW9uSW5mb01hbmFnZXIuZ2V0KGN1cnJlbnRTZXNzaW9uSWQpO1xuICAgIGlmIChcbiAgICAgIHNlc3Npb25JbmZvID09PSB1bmRlZmluZWQgfHxcbiAgICAgIHNlc3Npb25JbmZvLmNsaWVudEFwcElkID09PSB1bmRlZmluZWQgfHxcbiAgICAgIHNlc3Npb25JbmZvLmlzc3VlciA9PT0gdW5kZWZpbmVkXG4gICAgKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHNlc3Npb25JbmZvO1xuICB9O1xuXG4gIGhhbmRsZUluY29taW5nUmVkaXJlY3QgPSBhc3luYyAoXG4gICAgdXJsOiBzdHJpbmcsXG4gICAgZXZlbnRFbWl0dGVyOiBFdmVudEVtaXR0ZXIsXG4gICAgdG9rZW5zOiBPYmplY3QgfCB1bmRlZmluZWRcbiAgKTogUHJvbWlzZTxJU2Vzc2lvbkluZm8gfCB1bmRlZmluZWQ+ID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVkaXJlY3RJbmZvID0gYXdhaXQgdGhpcy5yZWRpcmVjdEhhbmRsZXIuaGFuZGxlKHVybCwgZXZlbnRFbWl0dGVyLCB0b2tlbnMpO1xuICAgICAgLy8gVGhlIGBGYWxsYmFja1JlZGlyZWN0SGFuZGxlcmAgZGlyZWN0bHkgcmV0dXJucyB0aGUgZ2xvYmFsIGBmZXRjaGAgZm9yXG4gICAgICAvLyBoaXMgdmFsdWUsIHNvIHdlIHNob3VsZCBlbnN1cmUgaXQncyBib3VuZCB0byBgd2luZG93YCByYXRoZXIgdGhhbiB0b1xuICAgICAgLy8gQ2xpZW50QXV0aGVudGljYXRpb24sIHRvIGF2b2lkIHRoZSBmb2xsb3dpbmcgZXJyb3I6XG4gICAgICAvLyA+ICdmZXRjaCcgY2FsbGVkIG9uIGFuIG9iamVjdCB0aGF0IGRvZXMgbm90IGltcGxlbWVudCBpbnRlcmZhY2UgV2luZG93LlxuICAgICAgdGhpcy5mZXRjaCA9IHJlZGlyZWN0SW5mby5mZXRjaC5iaW5kKHdpbmRvdyk7XG5cbiAgICAgIC8vIFN0cmlwIHRoZSBvYXV0aCBwYXJhbXM6XG4gICAgICB0aGlzLmNsZWFuVXJsQWZ0ZXJSZWRpcmVjdCh1cmwpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc0xvZ2dlZEluOiByZWRpcmVjdEluZm8uaXNMb2dnZWRJbixcbiAgICAgICAgd2ViSWQ6IHJlZGlyZWN0SW5mby53ZWJJZCxcbiAgICAgICAgc2Vzc2lvbklkOiByZWRpcmVjdEluZm8uc2Vzc2lvbklkLFxuICAgICAgICBleHBpcmF0aW9uRGF0ZTogcmVkaXJlY3RJbmZvLmV4cGlyYXRpb25EYXRlLFxuICAgICAgICB0b2tlbnM6IHJlZGlyZWN0SW5mby50b2tlbnNcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAvLyBTdHJpcCB0aGUgb2F1dGggcGFyYW1zOlxuICAgICAgdGhpcy5jbGVhblVybEFmdGVyUmVkaXJlY3QodXJsKTtcblxuICAgICAgLy8gRklYTUU6IEVWRU5UUy5FUlJPUiBzaG91bGQgYmUgZXJyb3JDb2RlLCBlcnJvckRlc2NyaXB0aW9uXG4gICAgICAvL1xuICAgICAgLy8gSSdtIG5vdCBzdXJlIGlmIFwicmVkaXJlY3RcIiBpcyBhIGdvb2QgZXJyb3IgY29kZSwgYW5kIGluIHRoZW9yeSBgZXJyYFxuICAgICAgLy8gbWF5YmUgYW4gRXJyb3Igb2JqZWN0IGFuZCBub3QgYSBzdHJpbmc7IE1heWJlIHdlIHdhbnQgdG8ganVzdCBoYXJkY29kZVxuICAgICAgLy8gYSBkZXNjcmlwdGlvbiBpbnN0ZWFkP1xuICAgICAgZXZlbnRFbWl0dGVyLmVtaXQoRVZFTlRTLkVSUk9SLCBcInJlZGlyZWN0XCIsIGVycik7XG5cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9O1xuXG4gIHByaXZhdGUgY2xlYW5VcmxBZnRlclJlZGlyZWN0KHVybDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgY2xlYW5lZFVwVXJsID0gbmV3IFVSTCh1cmwpO1xuICAgIGNsZWFuZWRVcFVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKFwic3RhdGVcIik7XG4gICAgLy8gRm9yIGF1dGggY29kZSBmbG93XG4gICAgY2xlYW5lZFVwVXJsLnNlYXJjaFBhcmFtcy5kZWxldGUoXCJjb2RlXCIpO1xuICAgIC8vIEZvciBpbXBsaWNpdCBmbG93XG4gICAgY2xlYW5lZFVwVXJsLnNlYXJjaFBhcmFtcy5kZWxldGUoXCJpZF90b2tlblwiKTtcbiAgICBjbGVhbmVkVXBVcmwuc2VhcmNoUGFyYW1zLmRlbGV0ZShcImFjY2Vzc190b2tlblwiKTtcbiAgICAvLyBGb3IgbG9naW4gZXJyb3JcbiAgICBjbGVhbmVkVXBVcmwuc2VhcmNoUGFyYW1zLmRlbGV0ZShcImVycm9yXCIpO1xuICAgIGNsZWFuZWRVcFVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKFwiZXJyb3JfZGVzY3JpcHRpb25cIik7XG4gICAgY2xlYW5lZFVwVXJsLnNlYXJjaFBhcmFtcy5kZWxldGUoXCJpc3NcIik7XG5cbiAgICAvLyBSZW1vdmUgT0F1dGgtc3BlY2lmaWMgcXVlcnkgcGFyYW1zIChzaW5jZSB0aGUgbG9naW4gZmxvdyBmaW5pc2hlcyB3aXRoXG4gICAgLy8gdGhlIGJyb3dzZXIgYmVpbmcgcmVkaXJlY3RlZCBiYWNrIHdpdGggT0F1dGgyIHF1ZXJ5IHBhcmFtcyAoZS5nLiBmb3JcbiAgICAvLyAnY29kZScgYW5kICdzdGF0ZScpLCBhbmQgc28gaWYgdGhlIHVzZXIgc2ltcGx5IHJlZnJlc2hlcyB0aGlzIHBhZ2Ugb3VyXG4gICAgLy8gYXV0aGVudGljYXRpb24gbGlicmFyeSB3aWxsIGJlIGNhbGxlZCBhZ2FpbiB3aXRoIHdoYXQgYXJlIG5vdyBpbnZhbGlkXG4gICAgLy8gcXVlcnkgcGFyYW1ldGVycyEpLlxuICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCBcIlwiLCBjbGVhbmVkVXBVcmwudG9TdHJpbmcoKSk7XG4gIH1cbn1cbiIsIi8vXG4vLyBDb3B5cmlnaHQgMjAyMiBJbnJ1cHQgSW5jLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW5cbi8vIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLFxuLy8gY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZVxuLy8gU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sXG4vLyBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUiBJTVBMSUVELFxuLy8gSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEFcbi8vIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFRcbi8vIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTlxuLy8gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFXG4vLyBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbi8vXG5cbi8qKlxuICogQGhpZGRlblxuICovXG5pbXBvcnQge1xuICBFVkVOVFMsXG4gIElMb2dpbklucHV0T3B0aW9ucyxcbiAgSVNlc3Npb25JbmZvLFxuICBJU3RvcmFnZSxcbiAgSUhhc1Nlc3Npb25FdmVudExpc3RlbmVyLFxuICBJU2Vzc2lvbkV2ZW50TGlzdGVuZXIsXG4gIGJ1aWxkUHJveHlIYW5kbGVyLFxufSBmcm9tIFwiQGlucnVwdC9zb2xpZC1jbGllbnQtYXV0aG4tY29yZVwiO1xuaW1wb3J0IHsgZmV0Y2ggfSBmcm9tIFwiQGlucnVwdC91bml2ZXJzYWwtZmV0Y2hcIjtcbmltcG9ydCB7IHY0IH0gZnJvbSBcInV1aWRcIjtcbmltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSBcImV2ZW50c1wiO1xuaW1wb3J0IENsaWVudEF1dGhlbnRpY2F0aW9uIGZyb20gXCIuL0NsaWVudEF1dGhlbnRpY2F0aW9uXCI7XG5pbXBvcnQgeyBnZXRDbGllbnRBdXRoZW50aWNhdGlvbldpdGhEZXBlbmRlbmNpZXMgfSBmcm9tIFwiLi9kZXBlbmRlbmNpZXNcIjtcbmltcG9ydCB7IEtFWV9DVVJSRU5UX1NFU1NJT04sIEtFWV9DVVJSRU5UX1VSTCB9IGZyb20gXCIuL2NvbnN0YW50XCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVNlc3Npb25PcHRpb25zIHtcbiAgLyoqXG4gICAqIEEgcHJpdmF0ZSBzdG9yYWdlLCB1bnJlYWNoYWJsZSB0byBvdGhlciBzY3JpcHRzIG9uIHRoZSBwYWdlLiBUeXBpY2FsbHkgaW4tbWVtb3J5LlxuICAgKi9cbiAgc2VjdXJlU3RvcmFnZTogSVN0b3JhZ2U7XG4gIC8qKlxuICAgKiBBIHN0b3JhZ2Ugd2hlcmUgbm9uLXNlbnNpdGl2ZSBpbmZvcm1hdGlvbiBtYXkgYmUgc3RvcmVkLCBwb3RlbnRpYWxseSBsb25nZXItbGl2ZWQgdGhhbiB0aGUgc2VjdXJlIHN0b3JhZ2UuXG4gICAqL1xuICBpbnNlY3VyZVN0b3JhZ2U6IElTdG9yYWdlO1xuICAvKipcbiAgICogRGV0YWlscyBhYm91dCB0aGUgY3VycmVudCBzZXNzaW9uXG4gICAqL1xuICBzZXNzaW9uSW5mbzogSVNlc3Npb25JbmZvO1xuICAvKipcbiAgICogQW4gaW5zdGFuY2Ugb2YgdGhlIGxpYnJhcnkgY29yZS4gVHlwaWNhbGx5IG9idGFpbmVkIHVzaW5nIGBnZXRDbGllbnRBdXRoZW50aWNhdGlvbldpdGhEZXBlbmRlbmNpZXNgLlxuICAgKi9cbiAgY2xpZW50QXV0aGVudGljYXRpb246IENsaWVudEF1dGhlbnRpY2F0aW9uO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElIYW5kbGVJbmNvbWluZ1JlZGlyZWN0T3B0aW9ucyB7XG4gIC8qKlxuICAgKiBJZiB0aGUgdXNlciBoYXMgc2lnbmVkIGluIGJlZm9yZSwgc2V0dGluZyB0aGlzIHRvIGB0cnVlYCB3aWxsIGF1dG9tYXRpY2FsbHlcbiAgICogcmVkaXJlY3QgdGhlbSB0byB0aGVpciBTb2xpZCBJZGVudGl0eSBQcm92aWRlciwgd2hpY2ggd2lsbCB0aGVuIGF0dGVtcHQgdG9cbiAgICogcmUtYWN0aXZhdGUgdGhlIHNlc3Npb24gYW5kIHNlbmQgdGhlIHVzZXIgYmFjayB0byB5b3VyIGFwcCB3aXRob3V0XG4gICAqIHJlcXVpcmluZyB1c2VyIGludGVyYWN0aW9uLlxuICAgKiBJZiB5b3VyIGFwcCdzIGFjY2VzcyBoYXMgbm90IGV4cGlyZWQgeWV0IGFuZCByZS1hY3RpdmF0aW9uIGNvbXBsZXRlZFxuICAgKiBzdWNjZXNzZnVsbHksIGEgYHNlc3Npb25SZXN0b3JlYCBldmVudCB3aWxsIGJlIGZpcmVkIHdpdGggdGhlIFVSTCB0aGUgdXNlclxuICAgKiB3YXMgYXQgYmVmb3JlIHRoZXkgd2VyZSByZWRpcmVjdGVkIHRvIHRoZWlyIFNvbGlkIElkZW50aXR5IFByb3ZpZGVyLlxuICAgKiB7QHNlZSBvblNlc3Npb25SZXN0b3JlfVxuICAgKi9cbiAgcmVzdG9yZVByZXZpb3VzU2Vzc2lvbj86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIElucnVwdCdzIEVudGVycHJpc2UgU29saWQgU2VydmVyIGNhbiBzZXQgYSBjb29raWUgdG8gYWxsb3cgdGhlIGJyb3dzZXIgdG9cbiAgICogYWNjZXNzIHByaXZhdGUgcmVzb3VyY2VzIG9uIGEgUG9kLiBJbiBvcmRlciB0byBtaXRpZ2F0ZSB0aGUgbG9nb3V0LW9uLXJlZnJlc2hcbiAgICogaXNzdWUgb24gdGhlIHNob3J0IHRlcm0sIHRoZSBzZXJ2ZXIgYWxzbyBpbXBsZW1lbnRlZCBhIHNlc3Npb24gZW5kcG9pbnRcbiAgICogZW5hYmxpbmcgdGhlIGNsaWVudCBhcHAgdG8ga25vdyB3aGV0aGVyIHRoZSBjb29raWUgaXMgc2V0LiBXaGVuIGEgdXNlclxuICAgKiBsb2dzIGluIHRvIGEgc2VydmVyIHRoYXQgaGFzIHRoYXQgY2FwYWJpbGl0eSBlbmFibGVkLCBhcHBsaWNhdGlvbnMgdGhhdCBzZXRcbiAgICogdGhpcyBvcHRpb24gdG8gYHRydWVgIHdpbGwgYmUgYWJsZSB0byBtYWtlIHVzZSBvZiBpdC5cbiAgICpcbiAgICogSWYgeW91ciBhcHAgc3VwcG9ydHMgdGhlIG5ld2VzdCBzZXNzaW9uIHJlc3RvcmUgYXBwcm9hY2gsIGFuZCBgcmVzdG9yZVByZXZpb3VzU2Vzc2lvbmBcbiAgICogaXMgc2V0IHRvIHRydWUsIHRoaXMgb3B0aW9uIGlzIGF1dG9tYXRpY2FsbHkgc2V0IHRvIGZhbHNlLCBidXQgeW91ciBhcHAgd2lsbFxuICAgKiBub3QgYmUgbG9nZ2VkIG91dCB3aGVuIHJlbG9hZGVkLlxuICAgKlxuICAgKiBgdXNlRXNzU2Vzc2lvbmAgZGVmYXVsdHMgdG8gZmFsc2UgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgZnV0dXJlOyB0b1xuICAgKiBwcmVzZXJ2ZSBzZXNzaW9ucyBhY3Jvc3MgcGFnZSByZWxvYWRzLCB1c2Ugb2YgYHJlc3RvcmVQcmV2aW91c1Nlc3Npb25gIGlzXG4gICAqIHJlY29tbWVuZGVkLlxuICAgKlxuICAgKiBAZGVwcmVjYXRlZCB1bnJlbGVhc2VkXG4gICAqL1xuICB1c2VFc3NTZXNzaW9uPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFRoZSBVUkwgb2YgdGhlIHBhZ2UgaGFuZGxpbmcgdGhlIHJlZGlyZWN0LCBpbmNsdWRpbmcgdGhlIHF1ZXJ5XG4gICAqIHBhcmFtZXRlcnMg4oCUIHRoZXNlIGNvbnRhaW4gdGhlIGluZm9ybWF0aW9uIHRvIHByb2Nlc3MgdGhlIGxvZ2luLlxuICAgKiBOb3RlOiBhcyBhIGNvbnZlbmllbmNlLCBpZiBubyBVUkwgdmFsdWUgaXMgc3BlY2lmaWVkIGhlcmUsIHdlIGRlZmF1bHQgdG9cbiAgICogdXNpbmcgdGhlIGJyb3dzZXIncyBjdXJyZW50IGxvY2F0aW9uLlxuICAgKi9cbiAgdXJsPzogc3RyaW5nO1xuXG4gIHRva2Vucz86IE9iamVjdDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNpbGVudGx5QXV0aGVudGljYXRlKFxuICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgY2xpZW50QXV0aG46IENsaWVudEF1dGhlbnRpY2F0aW9uLFxuICBzZXNzaW9uOiBTZXNzaW9uXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgY29uc3Qgc3RvcmVkU2Vzc2lvbkluZm8gPSBhd2FpdCBjbGllbnRBdXRobi52YWxpZGF0ZUN1cnJlbnRTZXNzaW9uKHNlc3Npb25JZCk7XG4gIGlmIChzdG9yZWRTZXNzaW9uSW5mbyAhPT0gbnVsbCkge1xuICAgIC8vIEl0IGNhbiBiZSByZWFsbHkgdXNlZnVsIHRvIHNhdmUgdGhlIHVzZXIncyBjdXJyZW50IGJyb3dzZXIgbG9jYXRpb24sXG4gICAgLy8gc28gdGhhdCB3ZSBjYW4gcmVzdG9yZSBpdCBhZnRlciBjb21wbGV0aW5nIHRoZSBzaWxlbnQgYXV0aGVudGljYXRpb25cbiAgICAvLyBvbiBpbmNvbWluZyByZWRpcmVjdC4gVGhpcyB3YXksIHRoZSB1c2VyIGlzIGV2ZW50dWFsbHkgcmVkaXJlY3RlZCBiYWNrXG4gICAgLy8gdG8gdGhlIHBhZ2UgdGhleSB3ZXJlIG9uIGFuZCBub3QgdG8gdGhlIGFwcCdzIHJlZGlyZWN0IHBhZ2UuXG4gICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKEtFWV9DVVJSRU5UX1VSTCwgd2luZG93LmxvY2F0aW9uLmhyZWYpO1xuICAgIGF3YWl0IGNsaWVudEF1dGhuLmxvZ2luKFxuICAgICAge1xuICAgICAgICBzZXNzaW9uSWQsXG4gICAgICAgIHByb21wdDogXCJub25lXCIsXG4gICAgICAgIG9pZGNJc3N1ZXI6IHN0b3JlZFNlc3Npb25JbmZvLmlzc3VlcixcbiAgICAgICAgcmVkaXJlY3RVcmw6IHN0b3JlZFNlc3Npb25JbmZvLnJlZGlyZWN0VXJsLFxuICAgICAgICBjbGllbnRJZDogc3RvcmVkU2Vzc2lvbkluZm8uY2xpZW50QXBwSWQsXG4gICAgICAgIGNsaWVudFNlY3JldDogc3RvcmVkU2Vzc2lvbkluZm8uY2xpZW50QXBwU2VjcmV0LFxuICAgICAgICB0b2tlblR5cGU6IHN0b3JlZFNlc3Npb25JbmZvLnRva2VuVHlwZSA/PyBcIkRQb1BcIixcbiAgICAgIH0sXG4gICAgICBzZXNzaW9uLmV2ZW50c1xuICAgICk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBpc0xvZ2dlZEluKFxuICBzZXNzaW9uSW5mbz86IElTZXNzaW9uSW5mb1xuKTogc2Vzc2lvbkluZm8gaXMgSVNlc3Npb25JbmZvICYgeyBpc0xvZ2dlZEluOiB0cnVlIH0ge1xuICByZXR1cm4gISFzZXNzaW9uSW5mbz8uaXNMb2dnZWRJbjtcbn1cblxuLyoqXG4gKiBBIHtAbGluayBTZXNzaW9ufSBvYmplY3QgcmVwcmVzZW50cyBhIHVzZXIncyBzZXNzaW9uIG9uIGFuIGFwcGxpY2F0aW9uLiBUaGUgc2Vzc2lvbiBob2xkcyBzdGF0ZSwgYXMgaXQgc3RvcmVzIGluZm9ybWF0aW9uIGVuYWJsaW5nIGFjY2VzIHRvIHByaXZhdGUgcmVzb3VyY2VzIGFmdGVyIGxvZ2luIGZvciBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFNlc3Npb24gZXh0ZW5kcyBFdmVudEVtaXR0ZXIgaW1wbGVtZW50cyBJSGFzU2Vzc2lvbkV2ZW50TGlzdGVuZXIge1xuICAvKipcbiAgICogSW5mb3JtYXRpb24gcmVnYXJkaW5nIHRoZSBjdXJyZW50IHNlc3Npb24uXG4gICAqL1xuICBwdWJsaWMgcmVhZG9ubHkgaW5mbzogSVNlc3Npb25JbmZvO1xuXG4gIC8qKlxuICAgKiBTZXNzaW9uIGF0dHJpYnV0ZSBleHBvc2luZyB0aGUgRXZlbnRFbWl0dGVyIGludGVyZmFjZSwgdG8gbGlzdGVuIG9uIHNlc3Npb25cbiAgICogZXZlbnRzIHN1Y2ggYXMgbG9naW4sIGxvZ291dCwgZXRjLlxuICAgKiBAc2luY2UgMS4xNS4wXG4gICAqL1xuICBwdWJsaWMgcmVhZG9ubHkgZXZlbnRzOiBJU2Vzc2lvbkV2ZW50TGlzdGVuZXI7XG5cbiAgcHJpdmF0ZSBjbGllbnRBdXRoZW50aWNhdGlvbjogQ2xpZW50QXV0aGVudGljYXRpb247XG5cbiAgcHJpdmF0ZSB0b2tlblJlcXVlc3RJblByb2dyZXNzID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIFNlc3Npb24gb2JqZWN0IGNvbnN0cnVjdG9yLiBUeXBpY2FsbHkgY2FsbGVkIGFzIGZvbGxvd3M6XG4gICAqXG4gICAqIGBgYHR5cGVzY3JpcHRcbiAgICogY29uc3Qgc2Vzc2lvbiA9IG5ldyBTZXNzaW9uKCk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBTZWUgYWxzbyBbZ2V0RGVmYXVsdFNlc3Npb25dKGh0dHBzOi8vZG9jcy5pbnJ1cHQuY29tL2RldmVsb3Blci10b29scy9hcGkvamF2YXNjcmlwdC9zb2xpZC1jbGllbnQtYXV0aG4tYnJvd3Nlci9mdW5jdGlvbnMuaHRtbCNnZXRkZWZhdWx0c2Vzc2lvbikuXG4gICAqXG4gICAqIEBwYXJhbSBzZXNzaW9uT3B0aW9ucyBUaGUgb3B0aW9ucyBlbmFibGluZyB0aGUgY29ycmVjdCBpbnN0YW50aWF0aW9uIG9mXG4gICAqIHRoZSBzZXNzaW9uLiBFaXRoZXIgYm90aCBzdG9yYWdlcyBvciBjbGllbnRBdXRoZW50aWNhdGlvbiBhcmUgcmVxdWlyZWQuIEZvclxuICAgKiBtb3JlIGluZm9ybWF0aW9uLCBzZWUge0BsaW5rIElTZXNzaW9uT3B0aW9uc30uXG4gICAqIEBwYXJhbSBzZXNzaW9uSWQgQSBzdHJpbmcgdW5pcXVlbHkgaWRlbnRpZnlpbmcgdGhlIHNlc3Npb24uXG4gICAqXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBzZXNzaW9uT3B0aW9uczogUGFydGlhbDxJU2Vzc2lvbk9wdGlvbnM+ID0ge30sXG4gICAgc2Vzc2lvbklkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB1bmRlZmluZWRcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICAvLyBVbnRpbCBTZXNzaW9uIG5vIGxvbmdlciBpbXBsZW1lbnRzIEV2ZW50RW1pdHRlciwgdGhpcy5ldmVudHMgaXMganVzdCBhIHByb3h5XG4gICAgLy8gdG8gdGhpcyAod2l0aCBzb21lIGludGVyZmFjZSBmaWx0ZXJpbmcpLiBXaGVuIHdlIG1ha2UgdGhlIGJyZWFraW5nIGNoYW5nZSxcbiAgICAvLyB0aGlzLmV2ZW50cyB3aWxsIGJlIGEgcmVndWxhciBFdmVudEVtaXR0ZXIgKGltcGxlbWVudGluZyBJU2Vzc2lvbkV2ZW50RW1pdHRlcik6XG4gICAgLy8gdGhpcy5ldmVudHMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgdGhpcy5ldmVudHMgPSBuZXcgUHJveHkoXG4gICAgICB0aGlzLFxuICAgICAgYnVpbGRQcm94eUhhbmRsZXIoXG4gICAgICAgIFNlc3Npb24ucHJvdG90eXBlLFxuICAgICAgICBcImV2ZW50cyBvbmx5IGltcGxlbWVudHMgSVNlc3Npb25FdmVudExpc3RlbmVyXCJcbiAgICAgIClcbiAgICApO1xuICAgIGlmIChzZXNzaW9uT3B0aW9ucy5jbGllbnRBdXRoZW50aWNhdGlvbikge1xuICAgICAgdGhpcy5jbGllbnRBdXRoZW50aWNhdGlvbiA9IHNlc3Npb25PcHRpb25zLmNsaWVudEF1dGhlbnRpY2F0aW9uO1xuICAgIH0gZWxzZSBpZiAoc2Vzc2lvbk9wdGlvbnMuc2VjdXJlU3RvcmFnZSAmJiBzZXNzaW9uT3B0aW9ucy5pbnNlY3VyZVN0b3JhZ2UpIHtcbiAgICAgIHRoaXMuY2xpZW50QXV0aGVudGljYXRpb24gPSBnZXRDbGllbnRBdXRoZW50aWNhdGlvbldpdGhEZXBlbmRlbmNpZXMoe1xuICAgICAgICBzZWN1cmVTdG9yYWdlOiBzZXNzaW9uT3B0aW9ucy5zZWN1cmVTdG9yYWdlLFxuICAgICAgICBpbnNlY3VyZVN0b3JhZ2U6IHNlc3Npb25PcHRpb25zLmluc2VjdXJlU3RvcmFnZSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNsaWVudEF1dGhlbnRpY2F0aW9uID0gZ2V0Q2xpZW50QXV0aGVudGljYXRpb25XaXRoRGVwZW5kZW5jaWVzKHt9KTtcbiAgICB9XG5cbiAgICBpZiAoc2Vzc2lvbk9wdGlvbnMuc2Vzc2lvbkluZm8pIHtcbiAgICAgIHRoaXMuaW5mbyA9IHtcbiAgICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uT3B0aW9ucy5zZXNzaW9uSW5mby5zZXNzaW9uSWQsXG4gICAgICAgIGlzTG9nZ2VkSW46IGZhbHNlLFxuICAgICAgICB3ZWJJZDogc2Vzc2lvbk9wdGlvbnMuc2Vzc2lvbkluZm8ud2ViSWQsXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmluZm8gPSB7XG4gICAgICAgIHNlc3Npb25JZDogc2Vzc2lvbklkID8/IHY0KCksXG4gICAgICAgIGlzTG9nZ2VkSW46IGZhbHNlLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBXaGVuIGEgc2Vzc2lvbiBpcyBsb2dnZWQgaW4sIHdlIHdhbnQgdG8gdHJhY2sgaXRzIElEIGluIGxvY2FsIHN0b3JhZ2UgdG9cbiAgICAvLyBlbmFibGUgc2lsZW50IHJlZnJlc2guIFRoZSBjdXJyZW50IHNlc3Npb24gSUQgc3BlY2lmaWNhbGx5IHN0b3JlZCBpbiAnbG9jYWxTdG9yYWdlJ1xuICAgIC8vIChhcyBvcHBvc2VkIHRvIHVzaW5nIG91ciBzdG9yYWdlIGFic3RyYWN0aW9uIGxheWVyKSBiZWNhdXNlIGl0IGlzIG9ubHlcbiAgICAvLyB1c2VkIGluIGEgYnJvd3Nlci1zcGVjaWZpYyBtZWNoYW5pc20uXG4gICAgdGhpcy5ldmVudHMub24oRVZFTlRTLkxPR0lOLCAoKSA9PlxuICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKEtFWV9DVVJSRU5UX1NFU1NJT04sIHRoaXMuaW5mby5zZXNzaW9uSWQpXG4gICAgKTtcblxuICAgIHRoaXMuZXZlbnRzLm9uKEVWRU5UUy5TRVNTSU9OX0VYUElSRUQsICgpID0+IHRoaXMuaW50ZXJuYWxMb2dvdXQoZmFsc2UpKTtcblxuICAgIHRoaXMuZXZlbnRzLm9uKEVWRU5UUy5FUlJPUiwgKCkgPT4gdGhpcy5pbnRlcm5hbExvZ291dChmYWxzZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXJzIHRoZSBsb2dpbiBwcm9jZXNzLiBOb3RlIHRoYXQgdGhpcyBtZXRob2Qgd2lsbCByZWRpcmVjdCB0aGUgdXNlciBhd2F5IGZyb20geW91ciBhcHAuXG4gICAqXG4gICAqIEBwYXJhbSBvcHRpb25zIFBhcmFtZXRlciB0byBjdXN0b21pemUgdGhlIGxvZ2luIGJlaGF2aW91ci4gSW4gcGFydGljdWxhciwgdHdvIG9wdGlvbnMgYXJlIG1hbmRhdG9yeTogYG9wdGlvbnMub2lkY0lzc3VlcmAsIHRoZSB1c2VyJ3MgaWRlbnRpdHkgcHJvdmlkZXIsIGFuZCBgb3B0aW9ucy5yZWRpcmVjdFVybGAsIHRoZSBVUkwgdG8gd2hpY2ggdGhlIHVzZXIgd2lsbCBiZSByZWRpcmVjdGVkIGFmdGVyIGxvZ2dpbmcgaW4gdGhlaXIgaWRlbnRpdHkgcHJvdmlkZXIuXG4gICAqIEByZXR1cm5zIFRoaXMgbWV0aG9kIHNob3VsZCByZWRpcmVjdCB0aGUgdXNlciBhd2F5IGZyb20gdGhlIGFwcDogaXQgZG9lcyBub3QgcmV0dXJuIGFueXRoaW5nLiBUaGUgbG9naW4gcHJvY2VzcyBpcyBjb21wbGV0ZWQgYnkge0BsaW5rY29kZSBoYW5kbGVJbmNvbWluZ1JlZGlyZWN0fS5cbiAgICovXG4gIC8vIERlZmluZSB0aGVzZSBmdW5jdGlvbnMgYXMgcHJvcGVydGllcyBzbyB0aGF0IHRoZXkgZG9uJ3QgZ2V0IGFjY2lkZW50YWxseSByZS1ib3VuZC5cbiAgLy8gSXNuJ3QgSmF2YXNjcmlwdCBmdW4/XG4gIGxvZ2luID0gYXN5bmMgKG9wdGlvbnM6IElMb2dpbklucHV0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgIGF3YWl0IHRoaXMuY2xpZW50QXV0aGVudGljYXRpb24ubG9naW4oXG4gICAgICB7XG4gICAgICAgIHNlc3Npb25JZDogdGhpcy5pbmZvLnNlc3Npb25JZCxcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgLy8gRGVmYXVsdHMgdGhlIHRva2VuIHR5cGUgdG8gRFBvUFxuICAgICAgICB0b2tlblR5cGU6IG9wdGlvbnMudG9rZW5UeXBlID8/IFwiRFBvUFwiLFxuICAgICAgfSxcbiAgICAgIHRoaXMuZXZlbnRzXG4gICAgKTtcbiAgICAvLyBgbG9naW5gIHJlZGlyZWN0cyB0aGUgdXNlciBhd2F5IGZyb20gdGhlIGFwcCxcbiAgICAvLyBzbyB1bmxlc3MgaXQgdGhyb3dzIGFuIGVycm9yLCB0aGVyZSBpcyBubyBjb2RlIHRoYXQgc2hvdWxkIHJ1biBhZnRlcndhcmRzXG4gICAgLy8gKHNpbmNlIHRoZXJlIGlzIG5vIFwiYWZ0ZXJcIiBpbiB0aGUgbGlmZXRpbWUgb2YgdGhlIHNjcmlwdCkuXG4gICAgLy8gSGVuY2UsIHRoaXMgUHJvbWlzZSBuZXZlciByZXNvbHZlczpcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKCkgPT4ge30pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBGZXRjaGVzIGRhdGEgdXNpbmcgYXZhaWxhYmxlIGxvZ2luIGluZm9ybWF0aW9uLiBJZiB0aGUgdXNlciBpcyBub3QgbG9nZ2VkIGluLCB0aGlzIHdpbGwgYmVoYXZlIGFzIGEgcmVndWxhciBgZmV0Y2hgLiBUaGUgc2lnbmF0dXJlIG9mIHRoaXMgbWV0aG9kIGlzIGlkZW50aWNhbCB0byB0aGUgW2Nhbm9uaWNhbCBgZmV0Y2hgXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRmV0Y2hfQVBJKS5cbiAgICpcbiAgICogQHBhcmFtIHVybCBUaGUgVVJMIGZyb20gd2hpY2ggZGF0YSBzaG91bGQgYmUgZmV0Y2hlZC5cbiAgICogQHBhcmFtIGluaXQgT3B0aW9uYWwgcGFyYW1ldGVycyBjdXN0b21pemluZyB0aGUgcmVxdWVzdCwgYnkgc3BlY2lmeWluZyBhbiBIVFRQIG1ldGhvZCwgaGVhZGVycywgYSBib2R5LCBldGMuIEZvbGxvd3MgdGhlIFtXSEFUV0cgRmV0Y2ggU3RhbmRhcmRdKGh0dHBzOi8vZmV0Y2guc3BlYy53aGF0d2cub3JnLykuXG4gICAqL1xuICBmZXRjaDogdHlwZW9mIGZldGNoID0gYXN5bmMgKHVybCwgaW5pdCkgPT4ge1xuICAgIHJldHVybiB0aGlzLmNsaWVudEF1dGhlbnRpY2F0aW9uLmZldGNoKHVybCwgaW5pdCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFuIGludGVybmFsIGxvZ291dCBmdW5jdGlvbiwgdG8gY29udHJvbCB3aGV0aGVyIG9yIG5vdCB0aGUgbG9nb3V0IHNpZ25hbFxuICAgKiBzaG91bGQgYmUgc2VudCwgaS5lLiBpZiB0aGUgbG9nb3V0IHdhcyB1c2VyLWluaXRpYXRlZCBvciBpcyB0aGUgcmVzdWx0IG9mXG4gICAqIGFuIGV4dGVybmFsIGV2ZW50LlxuICAgKlxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBwcml2YXRlIGludGVybmFsTG9nb3V0ID0gYXN5bmMgKGVtaXRTaWduYWw6IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAvLyBDbGVhcmluZyB0aGlzIHZhbHVlIG1lYW5zIHRoYXQgc2lsZW50IHJlZnJlc2ggd2lsbCBubyBsb25nZXIgYmUgYXR0ZW1wdGVkLlxuICAgIC8vIEluIHBhcnRpY3VsYXIsIGluIHRoZSBjYXNlIG9mIGEgc2lsZW50IGF1dGhlbnRpY2F0aW9uIGVycm9yIGl0IHByZXZlbnRzXG4gICAgLy8gZnJvbSBnZXR0aW5nIHN0dWNrIGluIGFuIGF1dGhlbnRpY2F0aW9uIHJldHJpZXMgbG9vcC5cbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oS0VZX0NVUlJFTlRfU0VTU0lPTik7XG4gICAgYXdhaXQgdGhpcy5jbGllbnRBdXRoZW50aWNhdGlvbi5sb2dvdXQodGhpcy5pbmZvLnNlc3Npb25JZCk7XG4gICAgdGhpcy5pbmZvLmlzTG9nZ2VkSW4gPSBmYWxzZTtcbiAgICBpZiAoZW1pdFNpZ25hbCkge1xuICAgICAgKHRoaXMuZXZlbnRzIGFzIEV2ZW50RW1pdHRlcikuZW1pdChFVkVOVFMuTE9HT1VUKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIExvZ3MgdGhlIHVzZXIgb3V0IG9mIHRoZSBhcHBsaWNhdGlvbi4gVGhpcyBkb2VzIG5vdCBsb2cgdGhlIHVzZXIgb3V0IG9mIHRoZWlyIFNvbGlkIGlkZW50aXR5IHByb3ZpZGVyLCBhbmQgc2hvdWxkIG5vdCByZWRpcmVjdCB0aGUgdXNlciBhd2F5LlxuICAgKi9cbiAgbG9nb3V0ID0gYXN5bmMgKCk6IFByb21pc2U8dm9pZD4gPT4gdGhpcy5pbnRlcm5hbExvZ291dCh0cnVlKTtcblxuICAvKipcbiAgICogQ29tcGxldGVzIHRoZSBsb2dpbiBwcm9jZXNzIGJ5IHByb2Nlc3NpbmcgdGhlIGluZm9ybWF0aW9uIHByb3ZpZGVkIGJ5IHRoZVxuICAgKiBTb2xpZCBpZGVudGl0eSBwcm92aWRlciB0aHJvdWdoIHJlZGlyZWN0LlxuICAgKlxuICAgKiBAcGFyYW0gb3B0aW9ucyBTZWUge0BzZWUgSUhhbmRsZUluY29taW5nUmVkaXJlY3RPcHRpb25zfS5cbiAgICovXG4gIGhhbmRsZUluY29taW5nUmVkaXJlY3QgPSBhc3luYyAoXG4gICAgaW5wdXRPcHRpb25zOiBzdHJpbmcgfCBJSGFuZGxlSW5jb21pbmdSZWRpcmVjdE9wdGlvbnMgPSB7fVxuICApOiBQcm9taXNlPElTZXNzaW9uSW5mbyB8IHVuZGVmaW5lZD4gPT4ge1xuICAgIGlmICh0aGlzLmluZm8uaXNMb2dnZWRJbikge1xuICAgICAgcmV0dXJuIHRoaXMuaW5mbztcbiAgICB9XG5cbiAgICBpZiAodGhpcy50b2tlblJlcXVlc3RJblByb2dyZXNzKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBvcHRpb25zID1cbiAgICAgIHR5cGVvZiBpbnB1dE9wdGlvbnMgPT09IFwic3RyaW5nXCIgPyB7IHVybDogaW5wdXRPcHRpb25zIH0gOiBpbnB1dE9wdGlvbnM7XG4gICAgY29uc3QgdXJsID0gb3B0aW9ucy51cmwgPz8gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gICAgY29uc3QgdG9rZW5zID0gb3B0aW9ucy50b2tlbnM7XG5cbiAgICB0aGlzLnRva2VuUmVxdWVzdEluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgIGNvbnN0IHNlc3Npb25JbmZvID0gYXdhaXQgdGhpcy5jbGllbnRBdXRoZW50aWNhdGlvbi5oYW5kbGVJbmNvbWluZ1JlZGlyZWN0KFxuICAgICAgdXJsLFxuICAgICAgdGhpcy5ldmVudHMsXG4gICAgICB0b2tlbnNcbiAgICApO1xuICAgIGlmIChpc0xvZ2dlZEluKHNlc3Npb25JbmZvKSkge1xuICAgICAgdGhpcy5zZXRTZXNzaW9uSW5mbyhzZXNzaW9uSW5mbyk7XG4gICAgICBjb25zdCBjdXJyZW50VXJsID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKEtFWV9DVVJSRU5UX1VSTCk7XG4gICAgICBpZiAoY3VycmVudFVybCA9PT0gbnVsbCkge1xuICAgICAgICAvLyBUaGUgbG9naW4gZXZlbnQgY2FuIG9ubHkgYmUgdHJpZ2dlcmVkICoqYWZ0ZXIqKiB0aGUgdXNlciBoYXMgYmVlblxuICAgICAgICAvLyByZWRpcmVjdGVkIGZyb20gdGhlIElkUCB3aXRoIGFjY2VzcyBhbmQgSUQgdG9rZW5zLlxuICAgICAgICAodGhpcy5ldmVudHMgYXMgRXZlbnRFbWl0dGVyKS5lbWl0KEVWRU5UUy5MT0dJTik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBJZiBhbiBVUkwgaXMgc3RvcmVkIGluIGxvY2FsIHN0b3JhZ2UsIHdlIGFyZSBiZWluZyBsb2dnZWQgaW4gYWZ0ZXIgYVxuICAgICAgICAvLyBzaWxlbnQgYXV0aGVudGljYXRpb24sIHNvIHJlbW92ZSBvdXIgY3VycmVudGx5IHN0b3JlZCBVUkwgbG9jYXRpb25cbiAgICAgICAgLy8gdG8gY2xlYW4gdXAgb3VyIHN0YXRlIG5vdyB0aGF0IHdlIGFyZSBjb21wbGV0aW5nIHRoZSByZS1sb2dpbiBwcm9jZXNzLlxuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oS0VZX0NVUlJFTlRfVVJMKTtcbiAgICAgICAgKHRoaXMuZXZlbnRzIGFzIEV2ZW50RW1pdHRlcikuZW1pdChFVkVOVFMuU0VTU0lPTl9SRVNUT1JFRCwgY3VycmVudFVybCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLnJlc3RvcmVQcmV2aW91c1Nlc3Npb24gPT09IHRydWUpIHtcbiAgICAgIC8vIFNpbGVudCBhdXRoZW50aWNhdGlvbiBoYXBwZW5zIGFmdGVyIGEgcmVmcmVzaCwgd2hpY2ggbWVhbnMgdGhlcmUgYXJlIG5vXG4gICAgICAvLyBPQXV0aCBwYXJhbXMgaW4gdGhlIGN1cnJlbnQgbG9jYXRpb24gSVJJLiBJdCBjYW4gb25seSBzdWNjZWVkIGlmIGEgc2Vzc2lvblxuICAgICAgLy8gd2FzIHByZXZpb3VzbHkgbG9nZ2VkIGluLCBpbiB3aGljaCBjYXNlIGl0cyBJRCB3aWxsIGJlIHByZXNlbnQgd2l0aCBhIGtub3duXG4gICAgICAvLyBpZGVudGlmaWVyIGluIGxvY2FsIHN0b3JhZ2UuXG4gICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIGEgbG9jYWxseSBzdG9yZWQgc2Vzc2lvbiBJRC4uLlxuICAgICAgY29uc3Qgc3RvcmVkU2Vzc2lvbklkID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKEtFWV9DVVJSRU5UX1NFU1NJT04pO1xuICAgICAgLy8gLi4uaWYgbm90LCB0aGVuIHRoZXJlIGlzIG5vIElEIHRva2VuLCBhbmQgc28gc2lsZW50IGF1dGhlbnRpY2F0aW9uIGNhbm5vdCBoYXBwZW4sIGJ1dFxuICAgICAgLy8gaWYgd2UgZG8gaGF2ZSBhIHN0b3JlZCBzZXNzaW9uIElELCBhdHRlbXB0IHRvIHJlLWF1dGhlbnRpY2F0ZSBub3cgc2lsZW50bHkuXG4gICAgICBpZiAoc3RvcmVkU2Vzc2lvbklkICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGF0dGVtcHRlZFNpbGVudEF1dGhlbnRpY2F0aW9uID0gYXdhaXQgc2lsZW50bHlBdXRoZW50aWNhdGUoXG4gICAgICAgICAgc3RvcmVkU2Vzc2lvbklkLFxuICAgICAgICAgIHRoaXMuY2xpZW50QXV0aGVudGljYXRpb24sXG4gICAgICAgICAgdGhpc1xuICAgICAgICApO1xuICAgICAgICAvLyBBdCB0aGlzIHBvaW50LCB3ZSBrbm93IHRoYXQgdGhlIG1haW4gd2luZG93IHdpbGwgaW1taW5lbnRseSBiZSByZWRpcmVjdGVkLlxuICAgICAgICAvLyBIb3dldmVyLCB0aGlzIHJlZGlyZWN0IGlzIGFzeW5jaHJvbm91cyBhbmQgdGhlcmUgaXMgbm8gd2F5IHRvIGhhbHQgZXhlY3V0aW9uXG4gICAgICAgIC8vIHVudGlsIGl0IGhhcHBlbnMgcHJlY2lzZWx5LiBUaGF0J3Mgd2h5IHRoZSBjdXJyZW50IFByb21pc2Ugc2ltcGx5IGRvZXMgbm90XG4gICAgICAgIC8vIHJlc29sdmUuXG4gICAgICAgIGlmIChhdHRlbXB0ZWRTaWxlbnRBdXRoZW50aWNhdGlvbikge1xuICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKSA9PiB7fSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy50b2tlblJlcXVlc3RJblByb2dyZXNzID0gZmFsc2U7XG4gICAgcmV0dXJuIHNlc3Npb25JbmZvO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIGEgdXNlciBjb21wbGV0ZXMgbG9naW4uXG4gICAqXG4gICAqIFRoZSBjYWxsYmFjayBpcyBjYWxsZWQgd2hlbiB7QGxpbmsgaGFuZGxlSW5jb21pbmdSZWRpcmVjdH0gY29tcGxldGVzIHN1Y2Nlc3NmdWxseS5cbiAgICpcbiAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBmdW5jdGlvbiBjYWxsZWQgd2hlbiBhIHVzZXIgY29tcGxldGVzIGxvZ2luLlxuICAgKiBAZGVwcmVjYXRlZCBQcmVmZXIgc2Vzc2lvbi5ldmVudHMub24oRVZFTlRTLkxPR0lOLCBjYWxsYmFjaylcbiAgICovXG4gIG9uTG9naW4oY2FsbGJhY2s6ICgpID0+IHVua25vd24pOiB2b2lkIHtcbiAgICB0aGlzLmV2ZW50cy5vbihFVkVOVFMuTE9HSU4sIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIGEgdXNlciBsb2dzIG91dDpcbiAgICpcbiAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBmdW5jdGlvbiBjYWxsZWQgd2hlbiBhIHVzZXIgY29tcGxldGVzIGxvZ291dC5cbiAgICogQGRlcHJlY2F0ZWQgUHJlZmVyIHNlc3Npb24uZXZlbnRzLm9uKEVWRU5UUy5MT0dPVVQsIGNhbGxiYWNrKVxuICAgKi9cbiAgb25Mb2dvdXQoY2FsbGJhY2s6ICgpID0+IHVua25vd24pOiB2b2lkIHtcbiAgICB0aGlzLmV2ZW50cy5vbihFVkVOVFMuTE9HT1VULCBjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBjYWxsYmFjayBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiBhIHVzZXIgbG9ncyBvdXQ6XG4gICAqXG4gICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gY2FsbGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzLlxuICAgKiBAc2luY2UgMS4xMS4wXG4gICAqIEBkZXByZWNhdGVkIFByZWZlciBzZXNzaW9uLmV2ZW50cy5vbihFVkVOVFMuRVJST1IsIGNhbGxiYWNrKVxuICAgKi9cbiAgb25FcnJvcihcbiAgICBjYWxsYmFjazogKFxuICAgICAgZXJyb3I6IHN0cmluZyB8IG51bGwsXG4gICAgICBlcnJvckRlc2NyaXB0aW9uPzogc3RyaW5nIHwgbnVsbFxuICAgICkgPT4gdW5rbm93blxuICApOiB2b2lkIHtcbiAgICB0aGlzLmV2ZW50cy5vbihFVkVOVFMuRVJST1IsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIGEgc2Vzc2lvbiBpcyByZXN0b3JlZC5cbiAgICpcbiAgICogTm90ZTogdGhlIGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlIHNhdmVkIHZhbHVlIG9mIHRoZSAnY3VycmVudCBVUkwnXG4gICAqIGF0IHRoZSB0aW1lIHRoZSBzZXNzaW9uIHdhcyByZXN0b3JlZC5cbiAgICpcbiAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBmdW5jdGlvbiBjYWxsZWQgd2hlbiBhIHVzZXIncyBhbHJlYWR5IGxvZ2dlZC1pbiBzZXNzaW9uIGlzIHJlc3RvcmVkLCBlLmcuLCBhZnRlciBhIHNpbGVudCBhdXRoZW50aWNhdGlvbiBpcyBjb21wbGV0ZWQgYWZ0ZXIgYSBwYWdlIHJlZnJlc2guXG4gICAqIEBkZXByZWNhdGVkIFByZWZlciBzZXNzaW9uLmV2ZW50cy5vbihFVkVOVFMuU0VTU0lPTl9SRVNUT1JFRCwgY2FsbGJhY2spXG4gICAqL1xuICBvblNlc3Npb25SZXN0b3JlKGNhbGxiYWNrOiAoY3VycmVudFVybDogc3RyaW5nKSA9PiB1bmtub3duKTogdm9pZCB7XG4gICAgdGhpcy5ldmVudHMub24oRVZFTlRTLlNFU1NJT05fUkVTVE9SRUQsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIGNhbGxiYWNrIHRoYXQgcnVucyB3aGVuIHRoZSBzZXNzaW9uIGV4cGlyZXMgYW5kIGNhbiBubyBsb25nZXJcbiAgICogbWFrZSBhdXRoZW50aWNhdGVkIHJlcXVlc3RzLCBidXQgZm9sbG93aW5nIGEgdXNlciBsb2dvdXQuXG4gICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdGhhdCBydW5zIG9uIHNlc3Npb24gZXhwaXJhdGlvbi5cbiAgICogQHNpbmNlIDEuMTEuMFxuICAgKiBAZGVwcmVjYXRlZCBQcmVmZXIgc2Vzc2lvbi5ldmVudHMub24oRVZFTlRTLlNFU1NJT05fRVhQSVJFRCwgY2FsbGJhY2spXG4gICAqL1xuICBvblNlc3Npb25FeHBpcmF0aW9uKGNhbGxiYWNrOiAoKSA9PiB1bmtub3duKTogdm9pZCB7XG4gICAgdGhpcy5ldmVudHMub24oRVZFTlRTLlNFU1NJT05fRVhQSVJFRCwgY2FsbGJhY2spO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRTZXNzaW9uSW5mbyhcbiAgICBzZXNzaW9uSW5mbzogSVNlc3Npb25JbmZvICYgeyBpc0xvZ2dlZEluOiB0cnVlIH1cbiAgKTogdm9pZCB7XG4gICAgdGhpcy5pbmZvLmlzTG9nZ2VkSW4gPSBzZXNzaW9uSW5mby5pc0xvZ2dlZEluO1xuICAgIHRoaXMuaW5mby53ZWJJZCA9IHNlc3Npb25JbmZvLndlYklkO1xuICAgIHRoaXMuaW5mby5zZXNzaW9uSWQgPSBzZXNzaW9uSW5mby5zZXNzaW9uSWQ7XG4gICAgdGhpcy5pbmZvLmV4cGlyYXRpb25EYXRlID0gc2Vzc2lvbkluZm8uZXhwaXJhdGlvbkRhdGU7XG4gICAgdGhpcy5ldmVudHMub24oRVZFTlRTLlNFU1NJT05fRVhURU5ERUQsIChleHBpcmVzSW46IG51bWJlcikgPT4ge1xuICAgICAgdGhpcy5pbmZvLmV4cGlyYXRpb25EYXRlID0gRGF0ZS5ub3coKSArIGV4cGlyZXNJbiAqIDEwMDA7XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8vXG4vLyBDb3B5cmlnaHQgMjAyMiBJbnJ1cHQgSW5jLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW5cbi8vIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLFxuLy8gY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZVxuLy8gU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sXG4vLyBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUiBJTVBMSUVELFxuLy8gSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEFcbi8vIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFRcbi8vIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTlxuLy8gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFXG4vLyBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbi8vXG5cbmltcG9ydCB7IFNPTElEX0NMSUVOVF9BVVRITl9LRVlfUFJFRklYIH0gZnJvbSBcIkBpbnJ1cHQvc29saWQtY2xpZW50LWF1dGhuLWNvcmVcIjtcblxuZXhwb3J0IGNvbnN0IEtFWV9DVVJSRU5UX1NFU1NJT04gPSBgJHtTT0xJRF9DTElFTlRfQVVUSE5fS0VZX1BSRUZJWH1jdXJyZW50U2Vzc2lvbmA7XG5cbmV4cG9ydCBjb25zdCBLRVlfQ1VSUkVOVF9VUkwgPSBgJHtTT0xJRF9DTElFTlRfQVVUSE5fS0VZX1BSRUZJWH1jdXJyZW50VXJsYDtcbiIsIi8vXG4vLyBDb3B5cmlnaHQgMjAyMiBJbnJ1cHQgSW5jLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW5cbi8vIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLFxuLy8gY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZVxuLy8gU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sXG4vLyBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUiBJTVBMSUVELFxuLy8gSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEFcbi8vIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFRcbi8vIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTlxuLy8gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFXG4vLyBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbi8vXG5cbmltcG9ydCB7IFNlc3Npb24gfSBmcm9tIFwiLi9TZXNzaW9uXCI7XG5cbmxldCBkZWZhdWx0U2Vzc2lvbjogU2Vzc2lvbiB8IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBPYnRhaW4gdGhlIHtAbGluayBTZXNzaW9ufSB1c2VkIHdoZW4gbm90IGV4cGxpY2l0bHkgaW5zdGFudGlhdGluZyBvbmUgeW91cnNlbGYuXG4gKlxuICogV2hlbiB1c2luZyB0aGUgdG9wLWxldmVsIGV4cG9ydHMge0BsaW5rIGZldGNofSwge0BsaW5rIGxvZ2lufSwge0BsaW5rIGxvZ291dH0sXG4gKiB7QGxpbmsgaGFuZGxlSW5jb21pbmdSZWRpcmVjdH0sIHtAbGluayBvbkxvZ2lufSBhbmQge0BsaW5rIG9uTG9nb3V0fSwgdGhlc2UgYXBwbHkgdG8gYW5cbiAqIGltcGxpY2l0bHktaW5zdGFudGlhdGVkIHtAbGluayBTZXNzaW9ufS5cbiAqIFRoaXMgZnVuY3Rpb24gcmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGF0IFNlc3Npb24gaW4gb3JkZXIgdG8gb2J0YWluIGUuZy4gdGhlIGN1cnJlbnQgdXNlcidzXG4gKiBXZWJJRC5cbiAqIEBzaW5jZSAxLjMuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdFNlc3Npb24oKTogU2Vzc2lvbiB7XG4gIGlmICh0eXBlb2YgZGVmYXVsdFNlc3Npb24gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBkZWZhdWx0U2Vzc2lvbiA9IG5ldyBTZXNzaW9uKCk7XG4gIH1cbiAgcmV0dXJuIGRlZmF1bHRTZXNzaW9uO1xufVxuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24ncyBzaWduYXR1cmUgaXMgZXF1YWwgdG8gYHdpbmRvdy5mZXRjaGAsIGJ1dCBpZiB0aGUgY3VycmVudCB1c2VyIGlzIGF1dGhlbnRpY2F0ZWRcbiAqIChzZWUgW1tsb2dpbl1dIGFuZCBbW2hhbmRsZUluY29taW5nUmVkaXJlY3RdXSksIHJlcXVlc3RzIG1hZGUgdXNpbmcgaXQgd2lsbCBpbmNsdWRlIHRoYXQgdXNlcidzXG4gKiBjcmVkZW50aWFscy4gSWYgbm90LCB0aGlzIHdpbGwgYmVoYXZlIGp1c3QgbGlrZSB0aGUgcmVndWxhciBgd2luZG93LmZldGNoYC5cbiAqXG4gKiBAc2VlIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2luZG93T3JXb3JrZXJHbG9iYWxTY29wZS9mZXRjaH1cbiAqIEBzaW5jZSAxLjMuMFxuICovXG4vKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2hhZG93ICovXG5leHBvcnQgY29uc3QgZmV0Y2g6IFNlc3Npb25bXCJmZXRjaFwiXSA9ICguLi5hcmdzKSA9PiB7XG4gIGNvbnN0IHNlc3Npb24gPSBnZXREZWZhdWx0U2Vzc2lvbigpO1xuICByZXR1cm4gc2Vzc2lvbi5mZXRjaCguLi5hcmdzKTtcbn07XG5cbi8qKlxuICogVHJpZ2dlcnMgdGhlIGxvZ2luIHByb2Nlc3MuIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCB3aWxsIHJlZGlyZWN0IHRoZSB1c2VyIGF3YXkgZnJvbSB5b3VyIGFwcC5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyBQYXJhbWV0ZXIgdG8gY3VzdG9taXplIHRoZSBsb2dpbiBiZWhhdmlvdXIuIEluIHBhcnRpY3VsYXIsIHR3byBvcHRpb25zIGFyZSBtYW5kYXRvcnk6IGBvcHRpb25zLm9pZGNJc3N1ZXJgLCB0aGUgdXNlcidzIGlkZW50aXR5IHByb3ZpZGVyLCBhbmQgYG9wdGlvbnMucmVkaXJlY3RVcmxgLCB0aGUgVVJMIHRvIHdoaWNoIHRoZSB1c2VyIHdpbGwgYmUgcmVkaXJlY3RlZCBhZnRlciBsb2dnaW5nIGluIHRoZWlyIGlkZW50aXR5IHByb3ZpZGVyLlxuICogQHJldHVybnMgVGhpcyBtZXRob2Qgc2hvdWxkIHJlZGlyZWN0IHRoZSB1c2VyIGF3YXkgZnJvbSB0aGUgYXBwOiBpdCBkb2VzIG5vdCByZXR1cm4gYW55dGhpbmcuIFRoZSBsb2dpbiBwcm9jZXNzIGlzIGNvbXBsZXRlZCBieSBbW2hhbmRsZUluY29taW5nUmVkaXJlY3RdXS5cbiAqIEBzaW5jZSAxLjMuMFxuICovXG5leHBvcnQgY29uc3QgbG9naW46IFNlc3Npb25bXCJsb2dpblwiXSA9ICguLi5hcmdzKSA9PiB7XG4gIGNvbnN0IHNlc3Npb24gPSBnZXREZWZhdWx0U2Vzc2lvbigpO1xuICByZXR1cm4gc2Vzc2lvbi5sb2dpbiguLi5hcmdzKTtcbn07XG5cbi8qKlxuICogTG9ncyB0aGUgdXNlciBvdXQgb2YgdGhlIGFwcGxpY2F0aW9uLiBUaGlzIGRvZXMgbm90IGxvZyB0aGUgdXNlciBvdXQgb2YgdGhlaXJcbiAqIFNvbGlkIGlkZW50aXR5IHByb3ZpZGVyLCBhbmQgc2hvdWxkIG5vdCByZWRpcmVjdCB0aGUgdXNlciBhd2F5LlxuICpcbiAqIEBzaW5jZSAxLjMuMFxuICovXG5leHBvcnQgY29uc3QgbG9nb3V0OiBTZXNzaW9uW1wibG9nb3V0XCJdID0gKC4uLmFyZ3MpID0+IHtcbiAgY29uc3Qgc2Vzc2lvbiA9IGdldERlZmF1bHRTZXNzaW9uKCk7XG4gIHJldHVybiBzZXNzaW9uLmxvZ291dCguLi5hcmdzKTtcbn07XG5cbi8qKlxuICogQ29tcGxldGVzIHRoZSBsb2dpbiBwcm9jZXNzIGJ5IHByb2Nlc3NpbmcgdGhlIGluZm9ybWF0aW9uIHByb3ZpZGVkIGJ5IHRoZSBTb2xpZCBpZGVudGl0eSBwcm92aWRlciB0aHJvdWdoIHJlZGlyZWN0LlxuICpcbiAqIEBwYXJhbSB1cmwgVGhlIFVSTCBvZiB0aGUgcGFnZSBoYW5kbGluZyB0aGUgcmVkaXJlY3QsIGluY2x1ZGluZyB0aGUgcXVlcnkgcGFyYW1ldGVycyDigJQgdGhlc2UgY29udGFpbiB0aGUgaW5mb3JtYXRpb24gdG8gcHJvY2VzcyB0aGUgbG9naW4uXG4gKiBAc2luY2UgMS4zLjBcbiAqL1xuZXhwb3J0IGNvbnN0IGhhbmRsZUluY29taW5nUmVkaXJlY3Q6IFNlc3Npb25bXCJoYW5kbGVJbmNvbWluZ1JlZGlyZWN0XCJdID0gKFxuICAuLi5hcmdzXG4pID0+IHtcbiAgY29uc3Qgc2Vzc2lvbiA9IGdldERlZmF1bHRTZXNzaW9uKCk7XG4gIHJldHVybiBzZXNzaW9uLmhhbmRsZUluY29taW5nUmVkaXJlY3QoLi4uYXJncyk7XG59O1xuXG4vKipcbiAqIFJlZ2lzdGVyIGEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gYSB1c2VyIGNvbXBsZXRlcyBsb2dpbi5cbiAqXG4gKiBUaGUgY2FsbGJhY2sgaXMgY2FsbGVkIHdoZW4ge0BsaW5rIGhhbmRsZUluY29taW5nUmVkaXJlY3R9IGNvbXBsZXRlcyBzdWNjZXNzZnVsbHkuXG4gKiBAc2luY2UgMS4zLjBcbiAqXG4gKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIGNhbGxlZCB3aGVuIGEgdXNlciBjb21wbGV0ZXMgbG9naW4uXG4gKiBAZGVwcmVjYXRlZCBQcmVmZXIgZXZlbnRzLm9uKEVWRU5UUy5MT0dJTiwgY2FsbGJhY2spXG5cbiAqL1xuZXhwb3J0IGNvbnN0IG9uTG9naW46IFNlc3Npb25bXCJvbkxvZ2luXCJdID0gKC4uLmFyZ3MpID0+IHtcbiAgY29uc3Qgc2Vzc2lvbiA9IGdldERlZmF1bHRTZXNzaW9uKCk7XG4gIHJldHVybiBzZXNzaW9uLm9uTG9naW4oLi4uYXJncyk7XG59O1xuXG4vKipcbiAqIFJlZ2lzdGVyIGEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gYSB1c2VyIGxvZ3Mgb3V0OlxuICpcbiAqIEBwYXJhbSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gY2FsbGVkIHdoZW4gYSB1c2VyIGNvbXBsZXRlcyBsb2dvdXQuXG4gKiBAc2luY2UgMS4zLjBcbiAqIEBkZXByZWNhdGVkIFByZWZlciBldmVudHMub24oRVZFTlRTLkxPR09VVCwgY2FsbGJhY2spXG5cbiAqL1xuZXhwb3J0IGNvbnN0IG9uTG9nb3V0OiBTZXNzaW9uW1wib25Mb2dvdXRcIl0gPSAoLi4uYXJncykgPT4ge1xuICBjb25zdCBzZXNzaW9uID0gZ2V0RGVmYXVsdFNlc3Npb24oKTtcbiAgcmV0dXJuIHNlc3Npb24ub25Mb2dvdXQoLi4uYXJncyk7XG59O1xuXG4vKipcbiAqIFJlZ2lzdGVyIGEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gYSBzZXNzaW9uIGlzIHJlc3RvcmVkOlxuICpcbiAqIEBwYXJhbSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gY2FsbGVkIHdoZW4gYSBzZXNzaW9uIGlzIHJlc3RvcmVkLlxuICogQHNpbmNlIDEuMy4wXG4gKiBAZGVwcmVjYXRlZCBQcmVmZXIgZXZlbnRzLm9uKEVWRU5UUy5TRVNTSU9OX1JFU1RPUkVELCBjYWxsYmFjaylcbiAqL1xuZXhwb3J0IGNvbnN0IG9uU2Vzc2lvblJlc3RvcmU6IFNlc3Npb25bXCJvblNlc3Npb25SZXN0b3JlXCJdID0gKC4uLmFyZ3MpID0+IHtcbiAgY29uc3Qgc2Vzc2lvbiA9IGdldERlZmF1bHRTZXNzaW9uKCk7XG4gIHJldHVybiBzZXNzaW9uLm9uU2Vzc2lvblJlc3RvcmUoLi4uYXJncyk7XG59O1xuXG4vKipcbiAqIHtAbGluayBTZXNzaW9uRXZlbnRFbWl0dGVyfSBpbnN0YW5jZSB0byBzdWJzY3JpYmUgdG8gZXZlbnRzIGJ5IHRoZSBkZWZhdWx0IHNlc3Npb24uXG4gKlxuICogQHNpbmNlIFVucmVsZWFzZWRcbiAqL1xuZXhwb3J0IGNvbnN0IGV2ZW50cyA9ICgpOiBTZXNzaW9uW1wiZXZlbnRzXCJdID0+IHtcbiAgcmV0dXJuIGdldERlZmF1bHRTZXNzaW9uKCkuZXZlbnRzO1xufTtcbiIsIi8vXG4vLyBDb3B5cmlnaHQgMjAyMiBJbnJ1cHQgSW5jLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW5cbi8vIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLFxuLy8gY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZVxuLy8gU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sXG4vLyBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUiBJTVBMSUVELFxuLy8gSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEFcbi8vIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFRcbi8vIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTlxuLy8gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFXG4vLyBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbi8vXG5cbi8qKlxuICogQGhpZGRlblxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKi9cblxuLyoqXG4gKiBUb3AgTGV2ZWwgY29yZSBkb2N1bWVudC4gUmVzcG9uc2libGUgZm9yIHNldHRpbmcgdXAgdGhlIGRlcGVuZGVuY3kgZ3JhcGhcbiAqL1xuaW1wb3J0IHsgSVN0b3JhZ2UsIEluTWVtb3J5U3RvcmFnZSB9IGZyb20gXCJAaW5ydXB0L3NvbGlkLWNsaWVudC1hdXRobi1jb3JlXCI7XG5pbXBvcnQgU3RvcmFnZVV0aWxpdHlCcm93c2VyIGZyb20gXCIuL3N0b3JhZ2UvU3RvcmFnZVV0aWxpdHlcIjtcbmltcG9ydCBDbGllbnRBdXRoZW50aWNhdGlvbiBmcm9tIFwiLi9DbGllbnRBdXRoZW50aWNhdGlvblwiO1xuaW1wb3J0IE9pZGNMb2dpbkhhbmRsZXIgZnJvbSBcIi4vbG9naW4vb2lkYy9PaWRjTG9naW5IYW5kbGVyXCI7XG5pbXBvcnQgQXV0aG9yaXphdGlvbkNvZGVXaXRoUGtjZU9pZGNIYW5kbGVyIGZyb20gXCIuL2xvZ2luL29pZGMvb2lkY0hhbmRsZXJzL0F1dGhvcml6YXRpb25Db2RlV2l0aFBrY2VPaWRjSGFuZGxlclwiO1xuaW1wb3J0IElzc3VlckNvbmZpZ0ZldGNoZXIgZnJvbSBcIi4vbG9naW4vb2lkYy9Jc3N1ZXJDb25maWdGZXRjaGVyXCI7XG5pbXBvcnQgeyBGYWxsYmFja1JlZGlyZWN0SGFuZGxlciB9IGZyb20gXCIuL2xvZ2luL29pZGMvaW5jb21pbmdSZWRpcmVjdEhhbmRsZXIvRmFsbGJhY2tSZWRpcmVjdEhhbmRsZXJcIjtcbmltcG9ydCBHZW5lcmFsTG9nb3V0SGFuZGxlciBmcm9tIFwiLi9sb2dvdXQvR2VuZXJhbExvZ291dEhhbmRsZXJcIjtcbmltcG9ydCB7IFNlc3Npb25JbmZvTWFuYWdlciB9IGZyb20gXCIuL3Nlc3Npb25JbmZvL1Nlc3Npb25JbmZvTWFuYWdlclwiO1xuaW1wb3J0IHsgQXV0aENvZGVSZWRpcmVjdEhhbmRsZXIgfSBmcm9tIFwiLi9sb2dpbi9vaWRjL2luY29taW5nUmVkaXJlY3RIYW5kbGVyL0F1dGhDb2RlUmVkaXJlY3RIYW5kbGVyXCI7XG5pbXBvcnQgQWdncmVnYXRlUmVkaXJlY3RIYW5kbGVyIGZyb20gXCIuL2xvZ2luL29pZGMvQWdncmVnYXRlUmVkaXJlY3RIYW5kbGVyXCI7XG5pbXBvcnQgQnJvd3NlclN0b3JhZ2UgZnJvbSBcIi4vc3RvcmFnZS9Ccm93c2VyU3RvcmFnZVwiO1xuaW1wb3J0IFJlZGlyZWN0b3IgZnJvbSBcIi4vbG9naW4vb2lkYy9SZWRpcmVjdG9yXCI7XG5pbXBvcnQgQ2xpZW50UmVnaXN0cmFyIGZyb20gXCIuL2xvZ2luL29pZGMvQ2xpZW50UmVnaXN0cmFyXCI7XG5pbXBvcnQgeyBFcnJvck9pZGNIYW5kbGVyIH0gZnJvbSBcIi4vbG9naW4vb2lkYy9pbmNvbWluZ1JlZGlyZWN0SGFuZGxlci9FcnJvck9pZGNIYW5kbGVyXCI7XG5pbXBvcnQgVG9rZW5SZWZyZXNoZXIgZnJvbSBcIi4vbG9naW4vb2lkYy9yZWZyZXNoL1Rva2VuUmVmcmVzaGVyXCI7XG5cbi8qKlxuICpcbiAqIEBwYXJhbSBkZXBlbmRlbmNpZXNcbiAqIEBkZXByZWNhdGVkIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIGV4dGVybmFsIEFQSSBpbiBhbiB1cGNvbWluZyByZWxlYXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2xpZW50QXV0aGVudGljYXRpb25XaXRoRGVwZW5kZW5jaWVzKGRlcGVuZGVuY2llczoge1xuICBzZWN1cmVTdG9yYWdlPzogSVN0b3JhZ2U7XG4gIGluc2VjdXJlU3RvcmFnZT86IElTdG9yYWdlO1xufSk6IENsaWVudEF1dGhlbnRpY2F0aW9uIHtcbiAgY29uc3QgaW5NZW1vcnlTdG9yYWdlID0gbmV3IEluTWVtb3J5U3RvcmFnZSgpO1xuICBjb25zdCBzZWN1cmVTdG9yYWdlID0gZGVwZW5kZW5jaWVzLnNlY3VyZVN0b3JhZ2UgfHwgaW5NZW1vcnlTdG9yYWdlO1xuICBjb25zdCBpbnNlY3VyZVN0b3JhZ2UgPSBkZXBlbmRlbmNpZXMuaW5zZWN1cmVTdG9yYWdlIHx8IG5ldyBCcm93c2VyU3RvcmFnZSgpO1xuXG4gIGNvbnN0IHN0b3JhZ2VVdGlsaXR5ID0gbmV3IFN0b3JhZ2VVdGlsaXR5QnJvd3NlcihcbiAgICBzZWN1cmVTdG9yYWdlLFxuICAgIGluc2VjdXJlU3RvcmFnZVxuICApO1xuXG4gIGNvbnN0IGlzc3VlckNvbmZpZ0ZldGNoZXIgPSBuZXcgSXNzdWVyQ29uZmlnRmV0Y2hlcihzdG9yYWdlVXRpbGl0eSk7XG4gIGNvbnN0IGNsaWVudFJlZ2lzdHJhciA9IG5ldyBDbGllbnRSZWdpc3RyYXIoc3RvcmFnZVV0aWxpdHkpO1xuXG4gIGNvbnN0IHNlc3Npb25JbmZvTWFuYWdlciA9IG5ldyBTZXNzaW9uSW5mb01hbmFnZXIoc3RvcmFnZVV0aWxpdHkpO1xuXG4gIGNvbnN0IHRva2VuUmVmcmVzaGVyID0gbmV3IFRva2VuUmVmcmVzaGVyKFxuICAgIHN0b3JhZ2VVdGlsaXR5LFxuICAgIGlzc3VlckNvbmZpZ0ZldGNoZXIsXG4gICAgY2xpZW50UmVnaXN0cmFyXG4gICk7XG5cbiAgLy8gbWFrZSBuZXcgaGFuZGxlciBmb3IgcmVkaXJlY3QgYW5kIGxvZ2luXG4gIGNvbnN0IGxvZ2luSGFuZGxlciA9IG5ldyBPaWRjTG9naW5IYW5kbGVyKFxuICAgIHN0b3JhZ2VVdGlsaXR5LFxuICAgIG5ldyBBdXRob3JpemF0aW9uQ29kZVdpdGhQa2NlT2lkY0hhbmRsZXIoc3RvcmFnZVV0aWxpdHksIG5ldyBSZWRpcmVjdG9yKCkpLFxuICAgIGlzc3VlckNvbmZpZ0ZldGNoZXIsXG4gICAgY2xpZW50UmVnaXN0cmFyXG4gICk7XG5cbiAgY29uc3QgcmVkaXJlY3RIYW5kbGVyID0gbmV3IEFnZ3JlZ2F0ZVJlZGlyZWN0SGFuZGxlcihbXG4gICAgbmV3IEVycm9yT2lkY0hhbmRsZXIoKSxcbiAgICBuZXcgQXV0aENvZGVSZWRpcmVjdEhhbmRsZXIoXG4gICAgICBzdG9yYWdlVXRpbGl0eSxcbiAgICAgIHNlc3Npb25JbmZvTWFuYWdlcixcbiAgICAgIGlzc3VlckNvbmZpZ0ZldGNoZXIsXG4gICAgICBjbGllbnRSZWdpc3RyYXIsXG4gICAgICB0b2tlblJlZnJlc2hlclxuICAgICksXG4gICAgLy8gVGhpcyBjYXRjaC1hbGwgY2xhc3Mgd2lsbCBhbHdheXMgYmUgYWJsZSB0byBoYW5kbGUgdGhlXG4gICAgLy8gcmVkaXJlY3QgSVJJLCBzbyBpdCBtdXN0IGJlIHJlZ2lzdGVyZWQgbGFzdC5cbiAgICBuZXcgRmFsbGJhY2tSZWRpcmVjdEhhbmRsZXIoKSxcbiAgXSk7XG5cbiAgcmV0dXJuIG5ldyBDbGllbnRBdXRoZW50aWNhdGlvbihcbiAgICBsb2dpbkhhbmRsZXIsXG4gICAgcmVkaXJlY3RIYW5kbGVyLFxuICAgIG5ldyBHZW5lcmFsTG9nb3V0SGFuZGxlcihzZXNzaW9uSW5mb01hbmFnZXIpLFxuICAgIHNlc3Npb25JbmZvTWFuYWdlcixcbiAgICBpc3N1ZXJDb25maWdGZXRjaGVyXG4gICk7XG59XG4iLCIvL1xuLy8gQ29weXJpZ2h0IDIwMjIgSW5ydXB0IEluYy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluXG4vLyB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSxcbi8vIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGVcbi8vIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLFxuLy8gc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IgSU1QTElFRCxcbi8vIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBXG4vLyBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUXG4vLyBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT05cbi8vIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRVxuLy8gU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4vL1xuXG5pbXBvcnQgKiBhcyBzb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uIGZyb20gXCIuL2luZGV4XCI7XG5cbmV4cG9ydCBkZWZhdWx0IHNvbGlkQ2xpZW50QXV0aGVudGljYXRpb247XG4iLCIvL1xuLy8gQ29weXJpZ2h0IDIwMjIgSW5ydXB0IEluYy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluXG4vLyB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSxcbi8vIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGVcbi8vIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLFxuLy8gc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IgSU1QTElFRCxcbi8vIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBXG4vLyBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUXG4vLyBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT05cbi8vIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRVxuLy8gU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4vL1xuXG5leHBvcnQgeyBTZXNzaW9uLCBJU2Vzc2lvbk9wdGlvbnMgfSBmcm9tIFwiLi9TZXNzaW9uXCI7XG5cbmV4cG9ydCB7IGdldENsaWVudEF1dGhlbnRpY2F0aW9uV2l0aERlcGVuZGVuY2llcyB9IGZyb20gXCIuL2RlcGVuZGVuY2llc1wiO1xuXG5leHBvcnQgKiBmcm9tIFwiLi9kZWZhdWx0U2Vzc2lvblwiO1xuXG4vLyBSZS1leHBvcnQgb2YgdHlwZXMgZGVmaW5lZCBpbiB0aGUgY29yZSBtb2R1bGUgYW5kIHByb2R1Y2VkL2NvbnN1bWVkIGJ5IG91ciBBUElcblxuZXhwb3J0IHtcbiAgSUxvZ2luSW5wdXRPcHRpb25zLFxuICBJU2Vzc2lvbkluZm8sXG4gIElTdG9yYWdlLFxuICBOb3RJbXBsZW1lbnRlZEVycm9yLFxuICBDb25maWd1cmF0aW9uRXJyb3IsXG4gIEluTWVtb3J5U3RvcmFnZSxcbiAgRVZFTlRTLFxufSBmcm9tIFwiQGlucnVwdC9zb2xpZC1jbGllbnQtYXV0aG4tY29yZVwiO1xuIiwiLy9cbi8vIENvcHlyaWdodCAyMDIyIElucnVwdCBJbmMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpblxuLy8gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsXG4vLyBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlXG4vLyBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbyxcbi8vIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4vLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SIElNUExJRUQsXG4vLyBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQVxuLy8gUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVFxuLy8gSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OXG4vLyBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEVcbi8vIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuLy9cblxuLyoqXG4gKiBAaGlkZGVuXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqL1xuXG4vKipcbiAqIFJlc3BvbnNpYmxlIGZvciBzZWxlY3RpbmcgdGhlIGNvcnJlY3QgT2lkY0hhbmRsZXIgdG8gaGFuZGxlIHRoZSBwcm92aWRlZCBPSURDIE9wdGlvbnNcbiAqL1xuaW1wb3J0IHtcbiAgSUluY29taW5nUmVkaXJlY3RIYW5kbGVyLFxuICBBZ2dyZWdhdGVIYW5kbGVyLFxuICBJbmNvbWluZ1JlZGlyZWN0SW5wdXQsXG4gIEluY29taW5nUmVkaXJlY3RSZXN1bHQsXG59IGZyb20gXCJAaW5ydXB0L3NvbGlkLWNsaWVudC1hdXRobi1jb3JlXCI7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBZ2dyZWdhdGVSZWRpcmVjdEhhbmRsZXJcbiAgZXh0ZW5kcyBBZ2dyZWdhdGVIYW5kbGVyPEluY29taW5nUmVkaXJlY3RJbnB1dCwgSW5jb21pbmdSZWRpcmVjdFJlc3VsdD5cbiAgaW1wbGVtZW50cyBJSW5jb21pbmdSZWRpcmVjdEhhbmRsZXJcbntcbiAgY29uc3RydWN0b3IocmVkaXJlY3RIYW5kbGVyczogSUluY29taW5nUmVkaXJlY3RIYW5kbGVyW10pIHtcbiAgICBzdXBlcihyZWRpcmVjdEhhbmRsZXJzKTtcbiAgfVxufVxuIiwiLy9cbi8vIENvcHlyaWdodCAyMDIyIElucnVwdCBJbmMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpblxuLy8gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsXG4vLyBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlXG4vLyBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbyxcbi8vIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4vLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SIElNUExJRUQsXG4vLyBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQVxuLy8gUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVFxuLy8gSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OXG4vLyBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEVcbi8vIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuLy9cblxuLyoqXG4gKiBAaGlkZGVuXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqL1xuXG5pbXBvcnQge1xuICBJU3RvcmFnZVV0aWxpdHksXG4gIElDbGllbnRSZWdpc3RyYXIsXG4gIElJc3N1ZXJDb25maWcsXG4gIElDbGllbnQsXG4gIElDbGllbnRSZWdpc3RyYXJPcHRpb25zLFxufSBmcm9tIFwiQGlucnVwdC9zb2xpZC1jbGllbnQtYXV0aG4tY29yZVwiO1xuaW1wb3J0IHsgcmVnaXN0ZXJDbGllbnQgfSBmcm9tIFwiQGlucnVwdC9vaWRjLWNsaWVudC1leHRcIjtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENsaWVudFJlZ2lzdHJhciBpbXBsZW1lbnRzIElDbGllbnRSZWdpc3RyYXIge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHN0b3JhZ2VVdGlsaXR5OiBJU3RvcmFnZVV0aWxpdHkpIHt9XG5cbiAgYXN5bmMgZ2V0Q2xpZW50KFxuICAgIG9wdGlvbnM6IElDbGllbnRSZWdpc3RyYXJPcHRpb25zLFxuICAgIGlzc3VlckNvbmZpZzogSUlzc3VlckNvbmZpZ1xuICApOiBQcm9taXNlPElDbGllbnQ+IHtcbiAgICAvLyBJZiBjbGllbnQgc2VjcmV0IGFuZC9vciBjbGllbnQgaWQgYXJlIHN0b3JlZCBpbiBzdG9yYWdlLCB1c2UgdGhvc2UuXG4gICAgY29uc3QgW1xuICAgICAgc3RvcmVkQ2xpZW50SWQsXG4gICAgICBzdG9yZWRDbGllbnRTZWNyZXQsXG4gICAgICAvLyBzdG9yZWRDbGllbnROYW1lLFxuICAgIF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICB0aGlzLnN0b3JhZ2VVdGlsaXR5LmdldEZvclVzZXIob3B0aW9ucy5zZXNzaW9uSWQsIFwiY2xpZW50SWRcIiwge1xuICAgICAgICBzZWN1cmU6IGZhbHNlLFxuICAgICAgfSksXG4gICAgICB0aGlzLnN0b3JhZ2VVdGlsaXR5LmdldEZvclVzZXIob3B0aW9ucy5zZXNzaW9uSWQsIFwiY2xpZW50U2VjcmV0XCIsIHtcbiAgICAgICAgc2VjdXJlOiBmYWxzZSxcbiAgICAgIH0pLFxuICAgICAgLy8gdGhpcy5zdG9yYWdlVXRpbGl0eS5nZXRGb3JVc2VyKG9wdGlvbnMuc2Vzc2lvbklkLCBcImNsaWVudE5hbWVcIiwge1xuICAgICAgLy8gICAvLyBGSVhNRTogZmlndXJlIG91dCBob3cgdG8gcGVyc2lzdCBzZWN1cmUgc3RvcmFnZSBhdCByZWxvYWRcbiAgICAgIC8vICAgc2VjdXJlOiBmYWxzZSxcbiAgICAgIC8vIH0pLFxuICAgIF0pO1xuICAgIGlmIChzdG9yZWRDbGllbnRJZCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY2xpZW50SWQ6IHN0b3JlZENsaWVudElkLFxuICAgICAgICBjbGllbnRTZWNyZXQ6IHN0b3JlZENsaWVudFNlY3JldCxcbiAgICAgICAgY2xpZW50VHlwZTogXCJkeW5hbWljXCIsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZWdpc3RlcmVkQ2xpZW50ID0gYXdhaXQgcmVnaXN0ZXJDbGllbnQob3B0aW9ucywgaXNzdWVyQ29uZmlnKTtcbiAgICAgIC8vIFNhdmUgaW5mb1xuICAgICAgY29uc3QgaW5mb1RvU2F2ZTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICAgY2xpZW50SWQ6IHJlZ2lzdGVyZWRDbGllbnQuY2xpZW50SWQsXG4gICAgICB9O1xuICAgICAgaWYgKHJlZ2lzdGVyZWRDbGllbnQuY2xpZW50U2VjcmV0KSB7XG4gICAgICAgIGluZm9Ub1NhdmUuY2xpZW50U2VjcmV0ID0gcmVnaXN0ZXJlZENsaWVudC5jbGllbnRTZWNyZXQ7XG4gICAgICB9XG4gICAgICBpZiAocmVnaXN0ZXJlZENsaWVudC5pZFRva2VuU2lnbmVkUmVzcG9uc2VBbGcpIHtcbiAgICAgICAgaW5mb1RvU2F2ZS5pZFRva2VuU2lnbmVkUmVzcG9uc2VBbGcgPVxuICAgICAgICAgIHJlZ2lzdGVyZWRDbGllbnQuaWRUb2tlblNpZ25lZFJlc3BvbnNlQWxnO1xuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5zdG9yYWdlVXRpbGl0eS5zZXRGb3JVc2VyKG9wdGlvbnMuc2Vzc2lvbklkLCBpbmZvVG9TYXZlLCB7XG4gICAgICAgIC8vIEZJWE1FOiBmaWd1cmUgb3V0IGhvdyB0byBwZXJzaXN0IHNlY3VyZSBzdG9yYWdlIGF0IHJlbG9hZFxuICAgICAgICAvLyBPdGhlcndpc2UsIHRoZSBjbGllbnQgaW5mbyBjYW5ub3QgYmUgcmV0cmlldmVkIGZyb20gc3RvcmFnZSwgYW5kXG4gICAgICAgIC8vIHRoZSBsaWIgdHJpZXMgdG8gcmUtcmVnaXN0ZXIgdGhlIGNsaWVudCBvbiBlYWNoIGZldGNoXG4gICAgICAgIHNlY3VyZTogZmFsc2UsXG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZWdpc3RlcmVkQ2xpZW50O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENsaWVudCByZWdpc3RyYXRpb24gZmFpbGVkOiBbJHtlcnJvcn1dYCk7XG4gICAgfVxuICB9XG59XG4iLCIvL1xuLy8gQ29weXJpZ2h0IDIwMjIgSW5ydXB0IEluYy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluXG4vLyB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSxcbi8vIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGVcbi8vIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLFxuLy8gc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IgSU1QTElFRCxcbi8vIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBXG4vLyBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUXG4vLyBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT05cbi8vIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRVxuLy8gU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4vL1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICovXG5cbi8qKlxuICogUmVzcG9uc2libGUgZm9yIGZldGNoaW5nIGFuIElEUCBjb25maWd1cmF0aW9uXG4gKi9cbmltcG9ydCB7XG4gIElJc3N1ZXJDb25maWcsXG4gIElJc3N1ZXJDb25maWdGZXRjaGVyLFxuICBJU3RvcmFnZVV0aWxpdHksXG4gIENvbmZpZ3VyYXRpb25FcnJvcixcbn0gZnJvbSBcIkBpbnJ1cHQvc29saWQtY2xpZW50LWF1dGhuLWNvcmVcIjtcbmltcG9ydCB7IGZldGNoIH0gZnJvbSBcIkBpbnJ1cHQvdW5pdmVyc2FsLWZldGNoXCI7XG5cbmV4cG9ydCBjb25zdCBXRUxMX0tOT1dOX09QRU5JRF9DT05GSUcgPSBcIi53ZWxsLWtub3duL29wZW5pZC1jb25maWd1cmF0aW9uXCI7XG5cbi8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xuY29uc3QgaXNzdWVyQ29uZmlnS2V5TWFwOiBSZWNvcmQ8XG4gIHN0cmluZyxcbiAgeyB0b0tleTogc3RyaW5nOyBjb252ZXJ0VG9Vcmw/OiBib29sZWFuIH1cbj4gPSB7XG4gIGlzc3Vlcjoge1xuICAgIHRvS2V5OiBcImlzc3VlclwiLFxuICAgIGNvbnZlcnRUb1VybDogdHJ1ZSxcbiAgfSxcbiAgYXV0aG9yaXphdGlvbl9lbmRwb2ludDoge1xuICAgIHRvS2V5OiBcImF1dGhvcml6YXRpb25FbmRwb2ludFwiLFxuICAgIGNvbnZlcnRUb1VybDogdHJ1ZSxcbiAgfSxcbiAgdG9rZW5fZW5kcG9pbnQ6IHtcbiAgICB0b0tleTogXCJ0b2tlbkVuZHBvaW50XCIsXG4gICAgY29udmVydFRvVXJsOiB0cnVlLFxuICB9LFxuICB1c2VyaW5mb19lbmRwb2ludDoge1xuICAgIHRvS2V5OiBcInVzZXJpbmZvRW5kcG9pbnRcIixcbiAgICBjb252ZXJ0VG9Vcmw6IHRydWUsXG4gIH0sXG4gIGp3a3NfdXJpOiB7XG4gICAgdG9LZXk6IFwiandrc1VyaVwiLFxuICAgIGNvbnZlcnRUb1VybDogdHJ1ZSxcbiAgfSxcbiAgcmVnaXN0cmF0aW9uX2VuZHBvaW50OiB7XG4gICAgdG9LZXk6IFwicmVnaXN0cmF0aW9uRW5kcG9pbnRcIixcbiAgICBjb252ZXJ0VG9Vcmw6IHRydWUsXG4gIH0sXG4gIHNjb3Blc19zdXBwb3J0ZWQ6IHsgdG9LZXk6IFwic2NvcGVzU3VwcG9ydGVkXCIgfSxcbiAgcmVzcG9uc2VfdHlwZXNfc3VwcG9ydGVkOiB7IHRvS2V5OiBcInJlc3BvbnNlVHlwZXNTdXBwb3J0ZWRcIiB9LFxuICByZXNwb25zZV9tb2Rlc19zdXBwb3J0ZWQ6IHsgdG9LZXk6IFwicmVzcG9uc2VNb2Rlc1N1cHBvcnRlZFwiIH0sXG4gIGdyYW50X3R5cGVzX3N1cHBvcnRlZDogeyB0b0tleTogXCJncmFudFR5cGVzU3VwcG9ydGVkXCIgfSxcbiAgYWNyX3ZhbHVlc19zdXBwb3J0ZWQ6IHsgdG9LZXk6IFwiYWNyVmFsdWVzU3VwcG9ydGVkXCIgfSxcbiAgc3ViamVjdF90eXBlc19zdXBwb3J0ZWQ6IHsgdG9LZXk6IFwic3ViamVjdFR5cGVzU3VwcG9ydGVkXCIgfSxcbiAgaWRfdG9rZW5fc2lnbmluZ19hbGdfdmFsdWVzX3N1cHBvcnRlZDoge1xuICAgIHRvS2V5OiBcImlkVG9rZW5TaWduaW5nQWxnVmFsdWVzU3VwcG9ydGVkXCIsXG4gIH0sXG4gIGlkX3Rva2VuX2VuY3J5cHRpb25fYWxnX3ZhbHVlc19zdXBwb3J0ZWQ6IHtcbiAgICB0b0tleTogXCJpZFRva2VuRW5jcnlwdGlvbkFsZ1ZhbHVlc1N1cHBvcnRlZFwiLFxuICB9LFxuICBpZF90b2tlbl9lbmNyeXB0aW9uX2VuY192YWx1ZXNfc3VwcG9ydGVkOiB7XG4gICAgdG9LZXk6IFwiaWRUb2tlbkVuY3J5cHRpb25FbmNWYWx1ZXNTdXBwb3J0ZWRcIixcbiAgfSxcbiAgdXNlcmluZm9fc2lnbmluZ19hbGdfdmFsdWVzX3N1cHBvcnRlZDoge1xuICAgIHRvS2V5OiBcInVzZXJpbmZvU2lnbmluZ0FsZ1ZhbHVlc1N1cHBvcnRlZFwiLFxuICB9LFxuICB1c2VyaW5mb19lbmNyeXB0aW9uX2FsZ192YWx1ZXNfc3VwcG9ydGVkOiB7XG4gICAgdG9LZXk6IFwidXNlcmluZm9FbmNyeXB0aW9uQWxnVmFsdWVzU3VwcG9ydGVkXCIsXG4gIH0sXG4gIHVzZXJpbmZvX2VuY3J5cHRpb25fZW5jX3ZhbHVlc19zdXBwb3J0ZWQ6IHtcbiAgICB0b0tleTogXCJ1c2VyaW5mb0VuY3J5cHRpb25FbmNWYWx1ZXNTdXBwb3J0ZWRcIixcbiAgfSxcbiAgcmVxdWVzdF9vYmplY3Rfc2lnbmluZ19hbGdfdmFsdWVzX3N1cHBvcnRlZDoge1xuICAgIHRvS2V5OiBcInJlcXVlc3RPYmplY3RTaWduaW5nQWxnVmFsdWVzU3VwcG9ydGVkXCIsXG4gIH0sXG4gIHJlcXVlc3Rfb2JqZWN0X2VuY3J5cHRpb25fYWxnX3ZhbHVlc19zdXBwb3J0ZWQ6IHtcbiAgICB0b0tleTogXCJyZXF1ZXN0T2JqZWN0RW5jcnlwdGlvbkFsZ1ZhbHVlc1N1cHBvcnRlZFwiLFxuICB9LFxuICByZXF1ZXN0X29iamVjdF9lbmNyeXB0aW9uX2VuY192YWx1ZXNfc3VwcG9ydGVkOiB7XG4gICAgdG9LZXk6IFwicmVxdWVzdE9iamVjdEVuY3J5cHRpb25FbmNWYWx1ZXNTdXBwb3J0ZWRcIixcbiAgfSxcbiAgdG9rZW5fZW5kcG9pbnRfYXV0aF9tZXRob2RzX3N1cHBvcnRlZDoge1xuICAgIHRvS2V5OiBcInRva2VuRW5kcG9pbnRBdXRoTWV0aG9kc1N1cHBvcnRlZFwiLFxuICB9LFxuICB0b2tlbl9lbmRwb2ludF9hdXRoX3NpZ25pbmdfYWxnX3ZhbHVlc19zdXBwb3J0ZWQ6IHtcbiAgICB0b0tleTogXCJ0b2tlbkVuZHBvaW50QXV0aFNpZ25pbmdBbGdWYWx1ZXNTdXBwb3J0ZWRcIixcbiAgfSxcbiAgZGlzcGxheV92YWx1ZXNfc3VwcG9ydGVkOiB7IHRvS2V5OiBcImRpc3BsYXlWYWx1ZXNTdXBwb3J0ZWRcIiB9LFxuICBjbGFpbV90eXBlc19zdXBwb3J0ZWQ6IHsgdG9LZXk6IFwiY2xhaW1UeXBlc1N1cHBvcnRlZFwiIH0sXG4gIGNsYWltc19zdXBwb3J0ZWQ6IHsgdG9LZXk6IFwiY2xhaW1zU3VwcG9ydGVkXCIgfSxcbiAgc2VydmljZV9kb2N1bWVudGF0aW9uOiB7IHRvS2V5OiBcInNlcnZpY2VEb2N1bWVudGF0aW9uXCIgfSxcbiAgY2xhaW1zX2xvY2FsZXNfc3VwcG9ydGVkOiB7IHRvS2V5OiBcImNsYWltc0xvY2FsZXNTdXBwb3J0ZWRcIiB9LFxuICB1aV9sb2NhbGVzX3N1cHBvcnRlZDogeyB0b0tleTogXCJ1aUxvY2FsZXNTdXBwb3J0ZWRcIiB9LFxuICBjbGFpbXNfcGFyYW1ldGVyX3N1cHBvcnRlZDogeyB0b0tleTogXCJjbGFpbXNQYXJhbWV0ZXJTdXBwb3J0ZWRcIiB9LFxuICByZXF1ZXN0X3BhcmFtZXRlcl9zdXBwb3J0ZWQ6IHsgdG9LZXk6IFwicmVxdWVzdFBhcmFtZXRlclN1cHBvcnRlZFwiIH0sXG4gIHJlcXVlc3RfdXJpX3BhcmFtZXRlcl9zdXBwb3J0ZWQ6IHsgdG9LZXk6IFwicmVxdWVzdFVyaVBhcmFtZXRlclN1cHBvcnRlZFwiIH0sXG4gIHJlcXVpcmVfcmVxdWVzdF91cmlfcmVnaXN0cmF0aW9uOiB7IHRvS2V5OiBcInJlcXVpcmVSZXF1ZXN0VXJpUmVnaXN0cmF0aW9uXCIgfSxcbiAgb3BfcG9saWN5X3VyaToge1xuICAgIHRvS2V5OiBcIm9wUG9saWN5VXJpXCIsXG4gICAgY29udmVydFRvVXJsOiB0cnVlLFxuICB9LFxuICBvcF90b3NfdXJpOiB7XG4gICAgdG9LZXk6IFwib3BUb3NVcmlcIixcbiAgICBjb252ZXJ0VG9Vcmw6IHRydWUsXG4gIH0sXG59O1xuLyogZXNsaW50LWVuYWJsZSBjYW1lbGNhc2UgKi9cblxuZnVuY3Rpb24gcHJvY2Vzc0NvbmZpZyhcbiAgY29uZmlnOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBzdHJpbmdbXT5cbik6IElJc3N1ZXJDb25maWcge1xuICBjb25zdCBwYXJzZWRDb25maWc6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHN0cmluZ1tdPiA9IHt9O1xuICBPYmplY3Qua2V5cyhjb25maWcpLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGlmIChpc3N1ZXJDb25maWdLZXlNYXBba2V5XSkge1xuICAgICAgLy8gVE9ETzogUE1jQjU1OiBWYWxpZGF0ZSBVUkwgaWYgXCJpc3N1ZXJDb25maWdLZXlNYXBba2V5XS5jb252ZXJ0VG9VcmxcIlxuICAgICAgLy8gIGlmIChpc3N1ZXJDb25maWdLZXlNYXBba2V5XS5jb252ZXJ0VG9VcmwpIHtcbiAgICAgIC8vICAgdmFsaWRhdGVVcmwoY29uZmlnW2tleV0pO1xuICAgICAgLy8gIH1cbiAgICAgIHBhcnNlZENvbmZpZ1tpc3N1ZXJDb25maWdLZXlNYXBba2V5XS50b0tleV0gPSBjb25maWdba2V5XTtcbiAgICB9XG4gIH0pO1xuICBpZiAoIUFycmF5LmlzQXJyYXkocGFyc2VkQ29uZmlnLnNjb3Blc1N1cHBvcnRlZCkpIHtcbiAgICBwYXJzZWRDb25maWcuc2NvcGVzU3VwcG9ydGVkID0gW1wib3BlbmlkXCJdO1xuICB9XG4gIHJldHVybiBwYXJzZWRDb25maWcgYXMgdW5rbm93biBhcyBJSXNzdWVyQ29uZmlnO1xufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSXNzdWVyQ29uZmlnRmV0Y2hlciBpbXBsZW1lbnRzIElJc3N1ZXJDb25maWdGZXRjaGVyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBzdG9yYWdlVXRpbGl0eTogSVN0b3JhZ2VVdGlsaXR5KSB7fVxuXG4gIC8vIFRoaXMgbWV0aG9kIG5lZWRzIG5vIHN0YXRlIChzbyBjYW4gYmUgc3RhdGljKSwgYW5kIGNhbiBiZSBleHBvc2VkIHRvIGFsbG93XG4gIC8vIGNhbGxlcnMgdG8ga25vdyB3aGVyZSB0aGlzIGltcGxlbWVudGF0aW9uIHB1dHMgc3RhdGUgaXQgbmVlZHMuXG4gIHB1YmxpYyBzdGF0aWMgZ2V0TG9jYWxTdG9yYWdlS2V5KGlzc3Vlcjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYGlzc3VlckNvbmZpZzoke2lzc3Vlcn1gO1xuICB9XG5cbiAgYXN5bmMgZmV0Y2hDb25maWcoaXNzdWVyOiBzdHJpbmcpOiBQcm9taXNlPElJc3N1ZXJDb25maWc+IHtcbiAgICBsZXQgaXNzdWVyQ29uZmlnOiBJSXNzdWVyQ29uZmlnO1xuXG4gICAgY29uc3Qgb3BlbklkQ29uZmlnVXJsID0gbmV3IFVSTChcbiAgICAgIFdFTExfS05PV05fT1BFTklEX0NPTkZJRyxcbiAgICAgIC8vIE1ha2Ugc3VyZSB0byBhcHBlbmQgYSBzbGFzaCBhdCBpc3N1ZXIgVVJMLCBzbyB0aGF0IHRoZSAud2VsbC1rbm93biBVUkxcbiAgICAgIC8vIGluY2x1ZGVzIHRoZSBmdWxsIGlzc3VlciBwYXRoLiBTZWUgaHR0cHM6Ly9vcGVuaWQubmV0L3NwZWNzL29wZW5pZC1jb25uZWN0LWRpc2NvdmVyeS0xXzAuaHRtbCNQcm92aWRlckNvbmZpZy5cbiAgICAgIGlzc3Vlci5lbmRzV2l0aChcIi9cIikgPyBpc3N1ZXIgOiBgJHtpc3N1ZXJ9L2BcbiAgICApLmhyZWY7XG4gICAgY29uc3QgaXNzdWVyQ29uZmlnUmVxdWVzdEJvZHkgPSBhd2FpdCBmZXRjaChvcGVuSWRDb25maWdVcmwpO1xuICAgIC8vIENoZWNrIHRoZSB2YWxpZGl0eSBvZiB0aGUgZmV0Y2hlZCBjb25maWdcbiAgICB0cnkge1xuICAgICAgaXNzdWVyQ29uZmlnID0gcHJvY2Vzc0NvbmZpZyhhd2FpdCBpc3N1ZXJDb25maWdSZXF1ZXN0Qm9keS5qc29uKCkpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhyb3cgbmV3IENvbmZpZ3VyYXRpb25FcnJvcihcbiAgICAgICAgYFske2lzc3Vlci50b1N0cmluZygpfV0gaGFzIGFuIGludmFsaWQgY29uZmlndXJhdGlvbjogJHtcbiAgICAgICAgICAoZXJyIGFzIHsgbWVzc2FnZTogc3RyaW5nIH0pLm1lc3NhZ2VcbiAgICAgICAgfWBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHN0b3JlIHdpdGggZmV0Y2hlZCBjb25maWdcbiAgICBhd2FpdCB0aGlzLnN0b3JhZ2VVdGlsaXR5LnNldChcbiAgICAgIElzc3VlckNvbmZpZ0ZldGNoZXIuZ2V0TG9jYWxTdG9yYWdlS2V5KGlzc3VlciksXG4gICAgICBKU09OLnN0cmluZ2lmeShpc3N1ZXJDb25maWcpXG4gICAgKTtcblxuICAgIHJldHVybiBpc3N1ZXJDb25maWc7XG4gIH1cbn1cbiIsIi8vXG4vLyBDb3B5cmlnaHQgMjAyMiBJbnJ1cHQgSW5jLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW5cbi8vIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLFxuLy8gY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZVxuLy8gU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sXG4vLyBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUiBJTVBMSUVELFxuLy8gSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEFcbi8vIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFRcbi8vIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTlxuLy8gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFXG4vLyBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbi8vXG5cbi8qKlxuICogQGhpZGRlblxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKi9cblxuLyoqXG4gKiBIYW5kbGVzIENvbW1vbiBPaWRjIGxvZ2luIGZ1bmN0aW9ucyAoTGlrZSBmZXRjaGluZyB0aGUgY29uZmlndXJhdGlvbilcbiAqL1xuXG5pbXBvcnQge1xuICBJQ2xpZW50UmVnaXN0cmFyLFxuICBJSXNzdWVyQ29uZmlnLFxuICBJSXNzdWVyQ29uZmlnRmV0Y2hlcixcbiAgSUxvZ2luT3B0aW9ucyxcbiAgSUxvZ2luSGFuZGxlcixcbiAgSU9pZGNIYW5kbGVyLFxuICBJT2lkY09wdGlvbnMsXG4gIElTdG9yYWdlVXRpbGl0eSxcbiAgQ29uZmlndXJhdGlvbkVycm9yLFxuICBMb2dpblJlc3VsdCxcbiAgaGFuZGxlUmVnaXN0cmF0aW9uLFxufSBmcm9tIFwiQGlucnVwdC9zb2xpZC1jbGllbnQtYXV0aG4tY29yZVwiO1xuXG5mdW5jdGlvbiBoYXNJc3N1ZXIoXG4gIG9wdGlvbnM6IElMb2dpbk9wdGlvbnNcbik6IG9wdGlvbnMgaXMgSUxvZ2luT3B0aW9ucyAmIHsgb2lkY0lzc3Vlcjogc3RyaW5nIH0ge1xuICByZXR1cm4gdHlwZW9mIG9wdGlvbnMub2lkY0lzc3VlciA9PT0gXCJzdHJpbmdcIjtcbn1cblxuZnVuY3Rpb24gaGFzUmVkaXJlY3RVcmwoXG4gIG9wdGlvbnM6IElMb2dpbk9wdGlvbnNcbik6IG9wdGlvbnMgaXMgSUxvZ2luT3B0aW9ucyAmIHsgcmVkaXJlY3RVcmw6IHN0cmluZyB9IHtcbiAgcmV0dXJuIHR5cGVvZiBvcHRpb25zLnJlZGlyZWN0VXJsID09PSBcInN0cmluZ1wiO1xufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT2lkY0xvZ2luSGFuZGxlciBpbXBsZW1lbnRzIElMb2dpbkhhbmRsZXIge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHN0b3JhZ2VVdGlsaXR5OiBJU3RvcmFnZVV0aWxpdHksXG4gICAgcHJpdmF0ZSBvaWRjSGFuZGxlcjogSU9pZGNIYW5kbGVyLFxuICAgIHByaXZhdGUgaXNzdWVyQ29uZmlnRmV0Y2hlcjogSUlzc3VlckNvbmZpZ0ZldGNoZXIsXG4gICAgcHJpdmF0ZSBjbGllbnRSZWdpc3RyYXI6IElDbGllbnRSZWdpc3RyYXJcbiAgKSB7fVxuXG4gIGFzeW5jIGNhbkhhbmRsZShvcHRpb25zOiBJTG9naW5PcHRpb25zKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIGhhc0lzc3VlcihvcHRpb25zKSAmJiBoYXNSZWRpcmVjdFVybChvcHRpb25zKTtcbiAgfVxuXG4gIGFzeW5jIGhhbmRsZShvcHRpb25zOiBJTG9naW5PcHRpb25zKTogUHJvbWlzZTxMb2dpblJlc3VsdD4ge1xuICAgIGlmICghaGFzSXNzdWVyKG9wdGlvbnMpKSB7XG4gICAgICB0aHJvdyBuZXcgQ29uZmlndXJhdGlvbkVycm9yKFxuICAgICAgICBgT2lkY0xvZ2luSGFuZGxlciByZXF1aXJlcyBhbiBPSURDIGlzc3VlcjogbWlzc2luZyBwcm9wZXJ0eSAnb2lkY0lzc3VlcicgaW4gJHtKU09OLnN0cmluZ2lmeShcbiAgICAgICAgICBvcHRpb25zXG4gICAgICAgICl9YFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKCFoYXNSZWRpcmVjdFVybChvcHRpb25zKSkge1xuICAgICAgdGhyb3cgbmV3IENvbmZpZ3VyYXRpb25FcnJvcihcbiAgICAgICAgYE9pZGNMb2dpbkhhbmRsZXIgcmVxdWlyZXMgYSByZWRpcmVjdCBVUkw6IG1pc3NpbmcgcHJvcGVydHkgJ3JlZGlyZWN0VXJsJyBpbiAke0pTT04uc3RyaW5naWZ5KFxuICAgICAgICAgIG9wdGlvbnNcbiAgICAgICAgKX1gXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEZldGNoIGlzc3VlciBjb25maWcuXG4gICAgY29uc3QgaXNzdWVyQ29uZmlnOiBJSXNzdWVyQ29uZmlnID1cbiAgICAgIGF3YWl0IHRoaXMuaXNzdWVyQ29uZmlnRmV0Y2hlci5mZXRjaENvbmZpZyhvcHRpb25zLm9pZGNJc3N1ZXIpO1xuXG4gICAgY29uc3QgY2xpZW50UmVnaXN0cmF0aW9uID0gYXdhaXQgaGFuZGxlUmVnaXN0cmF0aW9uKFxuICAgICAgb3B0aW9ucyxcbiAgICAgIGlzc3VlckNvbmZpZyxcbiAgICAgIHRoaXMuc3RvcmFnZVV0aWxpdHksXG4gICAgICB0aGlzLmNsaWVudFJlZ2lzdHJhclxuICAgICk7XG5cbiAgICAvLyBDb25zdHJ1Y3QgT0lEQyBPcHRpb25zXG4gICAgY29uc3QgT2lkY09wdGlvbnM6IElPaWRjT3B0aW9ucyA9IHtcbiAgICAgIC8vIE5vdGUgdGhhdCBoZXJlLCB0aGUgaXNzdWVyIGlzIG5vdCB0aGUgb25lIGZyb20gdGhlIHJlY2VpdmVkIG9wdGlvbnMsIGJ1dFxuICAgICAgLy8gZnJvbSB0aGUgaXNzdWVyJ3MgY29uZmlnLiBUaGlzIGVuZm9yY2VzIHRoZSBjYW5vbmljYWwgVVJMIGlzIHVzZWQgYW5kIHN0b3JlZCxcbiAgICAgIC8vIHdoaWNoIGlzIGFsc28gdGhlIG9uZSBwcmVzZW50IGluIHRoZSBJRCB0b2tlbiwgc28gc3RvcmluZyBhIHRlY2huaWNhbGx5XG4gICAgICAvLyB2YWxpZCwgYnV0IGRpZmZlcmVudCBpc3N1ZXIgVVJMIChlLmcuIHVzaW5nIGEgdHJhaWxpbmcgc2xhc2ggb3Igbm90KSBub3dcbiAgICAgIC8vIGNvdWxkIHByZXZlbnQgZnJvbSB2YWxpZGF0aW5nIHRoZSBJRCB0b2tlbiBsYXRlci5cbiAgICAgIGlzc3VlcjogaXNzdWVyQ29uZmlnLmlzc3VlcixcbiAgICAgIC8vIFRPRE86IGRpZmZlcmVudGlhdGUgaWYgRFBvUCBzaG91bGQgYmUgdHJ1ZVxuICAgICAgZHBvcDogb3B0aW9ucy50b2tlblR5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkcG9wXCIsXG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgaXNzdWVyQ29uZmlndXJhdGlvbjogaXNzdWVyQ29uZmlnLFxuICAgICAgY2xpZW50OiBjbGllbnRSZWdpc3RyYXRpb24sXG4gICAgfTtcblxuICAgIC8vIENhbGwgcHJvcGVyIE9JREMgSGFuZGxlclxuICAgIHJldHVybiB0aGlzLm9pZGNIYW5kbGVyLmhhbmRsZShPaWRjT3B0aW9ucyk7XG4gIH1cbn1cbiIsIi8vXG4vLyBDb3B5cmlnaHQgMjAyMiBJbnJ1cHQgSW5jLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW5cbi8vIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLFxuLy8gY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZVxuLy8gU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sXG4vLyBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUiBJTVBMSUVELFxuLy8gSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEFcbi8vIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFRcbi8vIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTlxuLy8gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFXG4vLyBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbi8vXG5cbi8qKlxuICogQGhpZGRlblxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKi9cblxuaW1wb3J0IHtcbiAgSVJlZGlyZWN0b3IsXG4gIElSZWRpcmVjdG9yT3B0aW9ucyxcbn0gZnJvbSBcIkBpbnJ1cHQvc29saWQtY2xpZW50LWF1dGhuLWNvcmVcIjtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlZGlyZWN0b3IgaW1wbGVtZW50cyBJUmVkaXJlY3RvciB7XG4gIHJlZGlyZWN0KHJlZGlyZWN0VXJsOiBzdHJpbmcsIG9wdGlvbnM/OiBJUmVkaXJlY3Rvck9wdGlvbnMpOiB2b2lkIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmhhbmRsZVJlZGlyZWN0KSB7XG4gICAgICBvcHRpb25zLmhhbmRsZVJlZGlyZWN0KHJlZGlyZWN0VXJsKTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5yZWRpcmVjdEJ5UmVwbGFjaW5nU3RhdGUpIHtcbiAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgXCJcIiwgcmVkaXJlY3RVcmwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHJlZGlyZWN0VXJsO1xuICAgIH1cbiAgfVxufVxuIiwiLy9cbi8vIENvcHlyaWdodCAyMDIyIElucnVwdCBJbmMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpblxuLy8gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsXG4vLyBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlXG4vLyBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbyxcbi8vIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4vLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SIElNUExJRUQsXG4vLyBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQVxuLy8gUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVFxuLy8gSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OXG4vLyBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEVcbi8vIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuLy9cblxuLyoqXG4gKiBAaGlkZGVuXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqL1xuLy8gRklYTUU6IFRoZSBmb2xsb3dpbmcgZG9lc24ndCB3b3JrIGluIHRoZSBicm93c2VyLCBpdCByZXN1bHRzIGluIGFsbCB0aGUgZmV0Y2hlc1xuLy8gYmVpbmcgdW5hdXRoZW50aWNhdGVkLiBUaGlzIHNob3VsZCBiZSBsb29rZWQgaW50byB3aGVuIG1pZ3JhdGluZyB0byB1bml2ZXJzYWwtZmV0Y2guXG4vLyBpbXBvcnQgeyBmZXRjaCB9IGZyb20gXCJjcm9zcy1mZXRjaFwiO1xuXG5pbXBvcnQgeyBmZXRjaCB9IGZyb20gXCJAaW5ydXB0L3VuaXZlcnNhbC1mZXRjaFwiO1xuXG5pbXBvcnQge1xuICBidWlsZEF1dGhlbnRpY2F0ZWRGZXRjaCxcbiAgSUNsaWVudCxcbiAgSUNsaWVudFJlZ2lzdHJhcixcbiAgSUlzc3VlckNvbmZpZ0ZldGNoZXIsXG4gIElJbmNvbWluZ1JlZGlyZWN0SGFuZGxlcixcbiAgSVNlc3Npb25JbmZvLFxuICBJU2Vzc2lvbkluZm9NYW5hZ2VyLFxuICBJU3RvcmFnZVV0aWxpdHksXG4gIElUb2tlblJlZnJlc2hlcixcbiAgbG9hZE9pZGNDb250ZXh0RnJvbVN0b3JhZ2UsXG4gIFJlZnJlc2hPcHRpb25zLFxufSBmcm9tIFwiQGlucnVwdC9zb2xpZC1jbGllbnQtYXV0aG4tY29yZVwiO1xuaW1wb3J0IHtcbiAgZ2V0RHBvcFRva2VuLFxuICBnZXRCZWFyZXJUb2tlbixcbiAgQ29kZUV4Y2hhbmdlUmVzdWx0LFxufSBmcm9tIFwiQGlucnVwdC9vaWRjLWNsaWVudC1leHRcIjtcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gXCJldmVudHNcIjtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBBdXRoQ29kZVJlZGlyZWN0SGFuZGxlciBpbXBsZW1lbnRzIElJbmNvbWluZ1JlZGlyZWN0SGFuZGxlciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgc3RvcmFnZVV0aWxpdHk6IElTdG9yYWdlVXRpbGl0eSxcbiAgICBwcml2YXRlIHNlc3Npb25JbmZvTWFuYWdlcjogSVNlc3Npb25JbmZvTWFuYWdlcixcbiAgICBwcml2YXRlIGlzc3VlckNvbmZpZ0ZldGNoZXI6IElJc3N1ZXJDb25maWdGZXRjaGVyLFxuICAgIHByaXZhdGUgY2xpZW50UmVnaXN0cmFyOiBJQ2xpZW50UmVnaXN0cmFyLFxuICAgIHByaXZhdGUgdG9rZXJSZWZyZXNoZXI6IElUb2tlblJlZnJlc2hlclxuICApIHt9XG5cbiAgYXN5bmMgY2FuSGFuZGxlKHJlZGlyZWN0VXJsOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgbXlVcmwgPSBuZXcgVVJMKHJlZGlyZWN0VXJsKTtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIG15VXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJjb2RlXCIpICE9PSBudWxsICYmXG4gICAgICAgIG15VXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJzdGF0ZVwiKSAhPT0gbnVsbFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBbJHtyZWRpcmVjdFVybH1dIGlzIG5vdCBhIHZhbGlkIFVSTCwgYW5kIGNhbm5vdCBiZSB1c2VkIGFzIGEgcmVkaXJlY3QgVVJMOiAke2V9YFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBoYW5kbGUoXG4gICAgcmVkaXJlY3RVcmw6IHN0cmluZyxcbiAgICBldmVudEVtaXR0ZXI/OiBFdmVudEVtaXR0ZXIsXG4gICAgc3RvcmVkX3Rva2Vucz86IE9iamVjdFxuICApOiBQcm9taXNlPElTZXNzaW9uSW5mbyAmIHsgZmV0Y2g6IHR5cGVvZiBmZXRjaCB9PiB7XG4gICAgaWYgKCEoYXdhaXQgdGhpcy5jYW5IYW5kbGUocmVkaXJlY3RVcmwpKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQXV0aENvZGVSZWRpcmVjdEhhbmRsZXIgY2Fubm90IGhhbmRsZSBbJHtyZWRpcmVjdFVybH1dOiBpdCBpcyBtaXNzaW5nIG9uZSBvZiBbY29kZSwgc3RhdGVdLmBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChyZWRpcmVjdFVybCk7XG4gICAgY29uc3Qgb2F1dGhTdGF0ZSA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwic3RhdGVcIikgYXMgc3RyaW5nO1xuXG4gICAgY29uc3Qgc3RvcmVkU2Vzc2lvbklkID0gKGF3YWl0IHRoaXMuc3RvcmFnZVV0aWxpdHkuZ2V0Rm9yVXNlcihcbiAgICAgIG9hdXRoU3RhdGUsXG4gICAgICBcInNlc3Npb25JZFwiLFxuICAgICAge1xuICAgICAgICBlcnJvcklmTnVsbDogdHJ1ZSxcbiAgICAgIH1cbiAgICApKSBhcyBzdHJpbmc7XG5cbiAgICBjb25zdCB7XG4gICAgICBpc3N1ZXJDb25maWcsXG4gICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICByZWRpcmVjdFVybDogc3RvcmVkUmVkaXJlY3RJcmksXG4gICAgICBkcG9wOiBpc0Rwb3AsXG4gICAgfSA9IGF3YWl0IGxvYWRPaWRjQ29udGV4dEZyb21TdG9yYWdlKFxuICAgICAgc3RvcmVkU2Vzc2lvbklkLFxuICAgICAgdGhpcy5zdG9yYWdlVXRpbGl0eSxcbiAgICAgIHRoaXMuaXNzdWVyQ29uZmlnRmV0Y2hlclxuICAgICk7XG5cbiAgICBjb25zdCBpc3MgPSB1cmwuc2VhcmNoUGFyYW1zLmdldChcImlzc1wiKTtcblxuICAgIGlmICh0eXBlb2YgaXNzID09PSBcInN0cmluZ1wiICYmIGlzcyAhPT0gaXNzdWVyQ29uZmlnLmlzc3Vlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgVGhlIHZhbHVlIG9mIHRoZSBpc3MgcGFyYW1ldGVyICgke2lzc30pIGRvZXMgbm90IG1hdGNoIHRoZSBpc3N1ZXIgaWRlbnRpZmllciBvZiB0aGUgYXV0aG9yaXphdGlvbiBzZXJ2ZXIgKCR7aXNzdWVyQ29uZmlnLmlzc3Vlcn0pLiBTZWUgW3JmYzkyMDddKGh0dHBzOi8vd3d3LnJmYy1lZGl0b3Iub3JnL3JmYy9yZmM5MjA3Lmh0bWwjc2VjdGlvbi0yLjMtMy4xLjEpYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoY29kZVZlcmlmaWVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYFRoZSBjb2RlIHZlcmlmaWVyIGZvciBzZXNzaW9uICR7c3RvcmVkU2Vzc2lvbklkfSBpcyBtaXNzaW5nIGZyb20gc3RvcmFnZS5gXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChzdG9yZWRSZWRpcmVjdElyaSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBUaGUgcmVkaXJlY3QgVVJMIGZvciBzZXNzaW9uICR7c3RvcmVkU2Vzc2lvbklkfSBpcyBtaXNzaW5nIGZyb20gc3RvcmFnZS5gXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IGNsaWVudDogSUNsaWVudCA9IGF3YWl0IHRoaXMuY2xpZW50UmVnaXN0cmFyLmdldENsaWVudChcbiAgICAgIHsgc2Vzc2lvbklkOiBzdG9yZWRTZXNzaW9uSWQgfSxcbiAgICAgIGlzc3VlckNvbmZpZ1xuICAgICk7XG5cbiAgICBsZXQgdG9rZW5zOiBDb2RlRXhjaGFuZ2VSZXN1bHQ7XG4gICAgY29uc3QgdG9rZW5DcmVhdGVkQXQgPSBEYXRlLm5vdygpO1xuXG4gICAgaWYgKGlzRHBvcCkge1xuICAgICAgaWYgKHN0b3JlZF90b2tlbnMpXG4gICAgICAgIHRva2VucyA9IDxDb2RlRXhjaGFuZ2VSZXN1bHQ+c3RvcmVkX3Rva2VucztcbiAgICAgIGVsc2VcbiAgICAgICAgdG9rZW5zID0gYXdhaXQgZ2V0RHBvcFRva2VuKGlzc3VlckNvbmZpZywgY2xpZW50LCB7XG4gICAgICAgICAgZ3JhbnRUeXBlOiBcImF1dGhvcml6YXRpb25fY29kZVwiLFxuICAgICAgICAgIC8vIFdlIHJlbHkgb24gb3VyICdjYW5IYW5kbGUnIGZ1bmN0aW9uIGNoZWNraW5nIHRoYXQgdGhlIE9BdXRoICdjb2RlJ1xuICAgICAgICAgIC8vIHBhcmFtZXRlciBpcyBwcmVzZW50IGluIG91ciBxdWVyeSBzdHJpbmcuXG4gICAgICAgICAgY29kZTogdXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJjb2RlXCIpIGFzIHN0cmluZyxcbiAgICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgICAgcmVkaXJlY3RVcmw6IHN0b3JlZFJlZGlyZWN0SXJpLFxuICAgICAgICB9KTtcblxuICAgICAgLy8gRGVsZXRlIG9pZGMtY2xpZW50LXNwZWNpZmljIHNlc3Npb24gaW5mb3JtYXRpb24gZnJvbSBzdG9yYWdlLiBUaGlzIGlzXG4gICAgICAvLyBkb25lIGF1dG9tYXRpY2FsbHkgd2hlbiByZXRyaWV2aW5nIGEgYmVhcmVyIHRva2VuLCBidXQgc2luY2UgdGhlIERQb1BcbiAgICAgIC8vIGJpbmRpbmcgdXNlcyBvdXIgY3VzdG9tIGNvZGUsIHRoaXMgbmVlZHMgdG8gYmUgZG9uZSBtYW51YWxseS5cbiAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShgb2lkYy4ke29hdXRoU3RhdGV9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRva2VucyA9IGF3YWl0IGdldEJlYXJlclRva2VuKHVybC50b1N0cmluZygpKTtcbiAgICB9XG5cbiAgICBsZXQgcmVmcmVzaE9wdGlvbnM6IFJlZnJlc2hPcHRpb25zIHwgdW5kZWZpbmVkO1xuICAgIGlmICh0b2tlbnMucmVmcmVzaFRva2VuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJlZnJlc2hPcHRpb25zID0ge1xuICAgICAgICBzZXNzaW9uSWQ6IHN0b3JlZFNlc3Npb25JZCxcbiAgICAgICAgcmVmcmVzaFRva2VuOiB0b2tlbnMucmVmcmVzaFRva2VuLFxuICAgICAgICB0b2tlblJlZnJlc2hlcjogdGhpcy50b2tlclJlZnJlc2hlcixcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgYXV0aEZldGNoID0gYXdhaXQgYnVpbGRBdXRoZW50aWNhdGVkRmV0Y2goZmV0Y2gsIHRva2Vucy5hY2Nlc3NUb2tlbiwge1xuICAgICAgZHBvcEtleTogdG9rZW5zLmRwb3BLZXksXG4gICAgICByZWZyZXNoT3B0aW9ucyxcbiAgICAgIGV2ZW50RW1pdHRlcixcbiAgICAgIGV4cGlyZXNJbjogdG9rZW5zLmV4cGlyZXNJbixcbiAgICB9KTtcblxuICAgIGF3YWl0IHRoaXMuc3RvcmFnZVV0aWxpdHkuc2V0Rm9yVXNlcihcbiAgICAgIHN0b3JlZFNlc3Npb25JZCxcbiAgICAgIHtcbiAgICAgICAgd2ViSWQ6IHRva2Vucy53ZWJJZCxcbiAgICAgICAgaXNMb2dnZWRJbjogXCJ0cnVlXCIsXG4gICAgICB9LFxuICAgICAgeyBzZWN1cmU6IHRydWUgfVxuICAgICk7XG5cbiAgICBjb25zdCBzZXNzaW9uSW5mbyA9IGF3YWl0IHRoaXMuc2Vzc2lvbkluZm9NYW5hZ2VyLmdldChzdG9yZWRTZXNzaW9uSWQpO1xuICAgIGlmICghc2Vzc2lvbkluZm8pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IHJldHJpZXZlIHNlc3Npb246IFske3N0b3JlZFNlc3Npb25JZH1dLmApO1xuICAgIH1cblxuLy8/P1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHNlc3Npb25JbmZvLCB7XG4gICAgICBmZXRjaDogYXV0aEZldGNoLFxuICAgICAgdG9rZW5zLFxuICAgICAgZXhwaXJhdGlvbkRhdGU6XG4gICAgICAgIHR5cGVvZiB0b2tlbnMuZXhwaXJlc0luID09PSBcIm51bWJlclwiXG4gICAgICAgICAgPyB0b2tlbkNyZWF0ZWRBdCArIHRva2Vucy5leHBpcmVzSW4gKiAxMDAwXG4gICAgICAgICAgOiBudWxsLFxuICAgIH0pO1xuICB9XG59XG4iLCIvL1xuLy8gQ29weXJpZ2h0IDIwMjIgSW5ydXB0IEluYy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluXG4vLyB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSxcbi8vIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGVcbi8vIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLFxuLy8gc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IgSU1QTElFRCxcbi8vIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBXG4vLyBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUXG4vLyBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT05cbi8vIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRVxuLy8gU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4vL1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICovXG5cbmltcG9ydCB7XG4gIEVWRU5UUyxcbiAgSUluY29taW5nUmVkaXJlY3RIYW5kbGVyLFxuICBJU2Vzc2lvbkluZm8sXG59IGZyb20gXCJAaW5ydXB0L3NvbGlkLWNsaWVudC1hdXRobi1jb3JlXCI7XG5pbXBvcnQgdHlwZSB7IEV2ZW50RW1pdHRlciB9IGZyb20gXCJldmVudHNcIjtcblxuaW1wb3J0IHsgZ2V0VW5hdXRoZW50aWNhdGVkU2Vzc2lvbiB9IGZyb20gXCIuLi8uLi8uLi9zZXNzaW9uSW5mby9TZXNzaW9uSW5mb01hbmFnZXJcIjtcblxuLyoqXG4gKiBUaGlzIGNsYXNzIGhhbmRsZXMgcmVkaXJlY3QgSVJJcyB3aXRob3V0IGFueSBxdWVyeSBwYXJhbXMsIGFuZCByZXR1cm5zIGFuIHVuYXV0aGVudGljYXRlZFxuICogc2Vzc2lvbi4gSXQgc2VydmVzIGFzIGEgZmFsbGJhY2sgc28gdGhhdCBjb25zdW1pbmcgbGlicmFyaWVzIGRvbid0IGhhdmUgdG8gdGVzdFxuICogZm9yIHRoZSBxdWVyeSBwYXJhbXMgdGhlbXNlbHZlcywgYW5kIGNhbiBhbHdheXMgdHJ5IHRvIHVzZSB0aGVtIGFzIGEgcmVkaXJlY3QgSVJJLlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgRXJyb3JPaWRjSGFuZGxlciBpbXBsZW1lbnRzIElJbmNvbWluZ1JlZGlyZWN0SGFuZGxlciB7XG4gIGFzeW5jIGNhbkhhbmRsZShyZWRpcmVjdFVybDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXdcbiAgICAgIHJldHVybiBuZXcgVVJMKHJlZGlyZWN0VXJsKS5zZWFyY2hQYXJhbXMuaGFzKFwiZXJyb3JcIik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgWyR7cmVkaXJlY3RVcmx9XSBpcyBub3QgYSB2YWxpZCBVUkwsIGFuZCBjYW5ub3QgYmUgdXNlZCBhcyBhIHJlZGlyZWN0IFVSTDogJHtlfWBcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgaGFuZGxlKFxuICAgIHJlZGlyZWN0VXJsOiBzdHJpbmcsXG4gICAgZXZlbnRFbWl0dGVyPzogRXZlbnRFbWl0dGVyXG4gICk6IFByb21pc2U8SVNlc3Npb25JbmZvICYgeyBmZXRjaDogdHlwZW9mIGZldGNoIH0+IHtcbiAgICBpZiAoZXZlbnRFbWl0dGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocmVkaXJlY3RVcmwpO1xuICAgICAgY29uc3QgZXJyb3JVcmwgPSB1cmwuc2VhcmNoUGFyYW1zLmdldChcImVycm9yXCIpO1xuICAgICAgY29uc3QgZXJyb3JEZXNjcmlwdGlvblVybCA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwiZXJyb3JfZGVzY3JpcHRpb25cIik7XG4gICAgICBldmVudEVtaXR0ZXIuZW1pdChFVkVOVFMuRVJST1IsIGVycm9yVXJsLCBlcnJvckRlc2NyaXB0aW9uVXJsKTtcbiAgICB9XG4gICAgcmV0dXJuIGdldFVuYXV0aGVudGljYXRlZFNlc3Npb24oKTtcbiAgfVxufVxuIiwiLy9cbi8vIENvcHlyaWdodCAyMDIyIElucnVwdCBJbmMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpblxuLy8gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsXG4vLyBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlXG4vLyBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbyxcbi8vIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4vLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SIElNUExJRUQsXG4vLyBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQVxuLy8gUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVFxuLy8gSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OXG4vLyBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEVcbi8vIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuLy9cblxuLyoqXG4gKiBAaGlkZGVuXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqL1xuXG5pbXBvcnQge1xuICBJSW5jb21pbmdSZWRpcmVjdEhhbmRsZXIsXG4gIElTZXNzaW9uSW5mbyxcbn0gZnJvbSBcIkBpbnJ1cHQvc29saWQtY2xpZW50LWF1dGhuLWNvcmVcIjtcblxuaW1wb3J0IHsgZ2V0VW5hdXRoZW50aWNhdGVkU2Vzc2lvbiB9IGZyb20gXCIuLi8uLi8uLi9zZXNzaW9uSW5mby9TZXNzaW9uSW5mb01hbmFnZXJcIjtcblxuLyoqXG4gKiBUaGlzIGNsYXNzIGhhbmRsZXMgcmVkaXJlY3QgSVJJcyB3aXRob3V0IGFueSBxdWVyeSBwYXJhbXMsIGFuZCByZXR1cm5zIGFuIHVuYXV0aGVudGljYXRlZFxuICogc2Vzc2lvbi4gSXQgc2VydmVzIGFzIGEgZmFsbGJhY2sgc28gdGhhdCBjb25zdW1pbmcgbGlicmFyaWVzIGRvbid0IGhhdmUgdG8gdGVzdFxuICogZm9yIHRoZSBxdWVyeSBwYXJhbXMgdGhlbXNlbHZlcywgYW5kIGNhbiBhbHdheXMgdHJ5IHRvIHVzZSB0aGVtIGFzIGEgcmVkaXJlY3QgSVJJLlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgRmFsbGJhY2tSZWRpcmVjdEhhbmRsZXIgaW1wbGVtZW50cyBJSW5jb21pbmdSZWRpcmVjdEhhbmRsZXIge1xuICBhc3luYyBjYW5IYW5kbGUocmVkaXJlY3RVcmw6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBUaGUgbmV4dCBVUkwgb2JqZWN0IGlzIGJ1aWx0IGZvciB2YWxpZGF0aW5nIGl0LlxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5ld1xuICAgICAgbmV3IFVSTChyZWRpcmVjdFVybCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBbJHtyZWRpcmVjdFVybH1dIGlzIG5vdCBhIHZhbGlkIFVSTCwgYW5kIGNhbm5vdCBiZSB1c2VkIGFzIGEgcmVkaXJlY3QgVVJMOiAke2V9YFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBoYW5kbGUoXG4gICAgLy8gVGhlIGFyZ3VtZW50IGlzIGlnbm9yZWQsIGJ1dCBtdXN0IGJlIHByZXNlbnQgdG8gaW1wbGVtZW50IHRoZSBpbnRlcmZhY2VcbiAgICBfcmVkaXJlY3RVcmw6IHN0cmluZ1xuICApOiBQcm9taXNlPElTZXNzaW9uSW5mbyAmIHsgZmV0Y2g6IHR5cGVvZiBmZXRjaCB9PiB7XG4gICAgcmV0dXJuIGdldFVuYXV0aGVudGljYXRlZFNlc3Npb24oKTtcbiAgfVxufVxuIiwiLy9cbi8vIENvcHlyaWdodCAyMDIyIElucnVwdCBJbmMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpblxuLy8gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsXG4vLyBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlXG4vLyBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbyxcbi8vIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4vLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SIElNUExJRUQsXG4vLyBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQVxuLy8gUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVFxuLy8gSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OXG4vLyBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEVcbi8vIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuLy9cblxuLyoqXG4gKiBAaGlkZGVuXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqL1xuXG4vKipcbiAqIEhhbmRsZXIgZm9yIHRoZSBBdXRob3JpemF0aW9uIENvZGUgd2l0aCBQS0NFIEZsb3dcbiAqL1xuaW1wb3J0IHtcbiAgSU9pZGNIYW5kbGVyLFxuICBJT2lkY09wdGlvbnMsXG4gIElSZWRpcmVjdG9yLFxuICBJU3RvcmFnZVV0aWxpdHksXG4gIExvZ2luUmVzdWx0LFxuICBERUZBVUxUX1NDT1BFUyxcbn0gZnJvbSBcIkBpbnJ1cHQvc29saWQtY2xpZW50LWF1dGhuLWNvcmVcIjtcbmltcG9ydCB7IE9pZGNDbGllbnQgfSBmcm9tIFwiQGlucnVwdC9vaWRjLWNsaWVudC1leHRcIjtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKiBBdXRob3JpemF0aW9uIGNvZGUgZmxvdyBzcGVjOiBodHRwczovL29wZW5pZC5uZXQvc3BlY3Mvb3BlbmlkLWNvbm5lY3QtY29yZS0xXzAuaHRtbCNDb2RlRmxvd0F1dGhcbiAqIFBLQ0U6IGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM3NjM2XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEF1dGhvcml6YXRpb25Db2RlV2l0aFBrY2VPaWRjSGFuZGxlclxuICBpbXBsZW1lbnRzIElPaWRjSGFuZGxlclxue1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHN0b3JhZ2VVdGlsaXR5OiBJU3RvcmFnZVV0aWxpdHksXG4gICAgcHJpdmF0ZSByZWRpcmVjdG9yOiBJUmVkaXJlY3RvclxuICApIHt9XG5cbiAgYXN5bmMgY2FuSGFuZGxlKG9pZGNMb2dpbk9wdGlvbnM6IElPaWRjT3B0aW9ucyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHJldHVybiAhIShcbiAgICAgIG9pZGNMb2dpbk9wdGlvbnMuaXNzdWVyQ29uZmlndXJhdGlvbi5ncmFudFR5cGVzU3VwcG9ydGVkICYmXG4gICAgICBvaWRjTG9naW5PcHRpb25zLmlzc3VlckNvbmZpZ3VyYXRpb24uZ3JhbnRUeXBlc1N1cHBvcnRlZC5pbmRleE9mKFxuICAgICAgICBcImF1dGhvcml6YXRpb25fY29kZVwiXG4gICAgICApID4gLTFcbiAgICApO1xuICB9XG5cbiAgYXN5bmMgaGFuZGxlKG9pZGNMb2dpbk9wdGlvbnM6IElPaWRjT3B0aW9ucyk6IFByb21pc2U8TG9naW5SZXN1bHQ+IHtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbiAgICBjb25zdCBvaWRjT3B0aW9ucyA9IHtcbiAgICAgIGF1dGhvcml0eTogb2lkY0xvZ2luT3B0aW9ucy5pc3N1ZXIudG9TdHJpbmcoKSxcbiAgICAgIGNsaWVudF9pZDogb2lkY0xvZ2luT3B0aW9ucy5jbGllbnQuY2xpZW50SWQsXG4gICAgICBjbGllbnRfc2VjcmV0OiBvaWRjTG9naW5PcHRpb25zLmNsaWVudC5jbGllbnRTZWNyZXQsXG4gICAgICByZWRpcmVjdF91cmk6IG9pZGNMb2dpbk9wdGlvbnMucmVkaXJlY3RVcmwudG9TdHJpbmcoKSxcbiAgICAgIHBvc3RfbG9nb3V0X3JlZGlyZWN0X3VyaTogb2lkY0xvZ2luT3B0aW9ucy5yZWRpcmVjdFVybC50b1N0cmluZygpLFxuICAgICAgcmVzcG9uc2VfdHlwZTogXCJjb2RlXCIsXG4gICAgICBzY29wZTogREVGQVVMVF9TQ09QRVMsXG4gICAgICBmaWx0ZXJQcm90b2NvbENsYWltczogdHJ1ZSxcbiAgICAgIC8vIFRoZSB1c2VyaW5mbyBlbmRwb2ludCBvbiBOU1MgZmFpbHMsIHNvIGRpc2FibGUgdGhpcyBmb3Igbm93XG4gICAgICAvLyBOb3RlIHRoYXQgaW4gU29saWQsIGluZm9ybWF0aW9uIHNob3VsZCBiZSByZXRyaWV2ZWQgZnJvbSB0aGVcbiAgICAgIC8vIHByb2ZpbGUgcmVmZXJlbmNlZCBieSB0aGUgV2ViSWQuXG4gICAgICBsb2FkVXNlckluZm86IGZhbHNlLFxuICAgICAgY29kZV92ZXJpZmllcjogdHJ1ZSxcbiAgICAgIHByb21wdDogb2lkY0xvZ2luT3B0aW9ucy5wcm9tcHQgPz8gXCJjb25zZW50XCIsXG4gICAgfTtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIGNhbWVsY2FzZSAqL1xuXG4gICAgY29uc3Qgb2lkY0NsaWVudExpYnJhcnkgPSBuZXcgT2lkY0NsaWVudChvaWRjT3B0aW9ucyk7XG5cbiAgICBjb25zdCB7IHJlZGlyZWN0b3IgfSA9IHRoaXM7XG4gICAgY29uc3Qgc3RvcmFnZSA9IHRoaXMuc3RvcmFnZVV0aWxpdHk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2lnbmluZ1JlcXVlc3QgPSBhd2FpdCBvaWRjQ2xpZW50TGlicmFyeS5jcmVhdGVTaWduaW5SZXF1ZXN0KCk7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIC8vIFdlIHVzZSB0aGUgT0F1dGggJ3N0YXRlJyB2YWx1ZSAod2hpY2ggc2hvdWxkIGJlIGNyeXB0by1yYW5kb20pIGFzXG4gICAgICAgIC8vIHRoZSBrZXkgaW4gb3VyIHN0b3JhZ2UgdG8gc3RvcmUgb3VyIGFjdHVhbCBTZXNzaW9uSUQuIFdlIGRvIHRoaXNcbiAgICAgICAgLy8gJ2NvcyB3ZSdsbCBuZWVkIHRvIGxvb2t1cCBvdXIgc2Vzc2lvbiBpbmZvcm1hdGlvbiBhZ2FpbiB3aGVuIHRoZVxuICAgICAgICAvLyBicm93c2VyIGlzIHJlZGlyZWN0ZWQgYmFjayB0byB1cyAoaS5lLiB0aGUgT0F1dGggY2xpZW50XG4gICAgICAgIC8vIGFwcGxpY2F0aW9uKSBmcm9tIHRoZSBBdXRob3JpemF0aW9uIFNlcnZlci5cbiAgICAgICAgLy8gV2UgZG9uJ3Qgd2FudCB0byB1c2Ugb3VyIHNlc3Npb24gSUQgYXMgdGhlIE9BdXRoICdzdGF0ZScgdmFsdWUsIGFzXG4gICAgICAgIC8vIHRoYXQgc2Vzc2lvbiBJRCBjYW4gYmUgYW55IGRldmVsb3Blci1zcGVjaWZpZWQgdmFsdWUsIGFuZCB0aGVyZWZvcmVcbiAgICAgICAgLy8gbWF5IG5vdCBiZSBhcHByb3ByaWF0ZSAoc2luY2UgdGhlIE9BdXRoICdzdGF0ZScgdmFsdWUgc2hvdWxkIHJlYWxseVxuICAgICAgICAvLyBiZSBhbiB1bmd1ZXNzYWJsZSBjcnlwdG8tcmFuZG9tIHZhbHVlKS5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVyc2NvcmUtZGFuZ2xlXG4gICAgICAgIHN0b3JhZ2Uuc2V0Rm9yVXNlcihzaWduaW5nUmVxdWVzdC5zdGF0ZS5faWQsIHtcbiAgICAgICAgICBzZXNzaW9uSWQ6IG9pZGNMb2dpbk9wdGlvbnMuc2Vzc2lvbklkLFxuICAgICAgICB9KSxcblxuICAgICAgICAvLyBTdG9yZSBvdXIgbG9naW4tcHJvY2VzcyBzdGF0ZSB1c2luZyB0aGUgc2Vzc2lvbiBJRCBhcyB0aGUga2V5LlxuICAgICAgICAvLyBTdHJpY3RseSBzcGVha2luZywgdGhpcyBpbmRpcmVjdGlvbiBmcm9tIG91ciBPQXV0aCBzdGF0ZSB2YWx1ZSB0b1xuICAgICAgICAvLyBvdXIgc2Vzc2lvbiBJRCBpcyB1bm5lY2Vzc2FyeSwgYnV0IGl0IHByb3ZpZGVzIGEgc2xpZ2h0bHkgY2xlYW5lclxuICAgICAgICAvLyBzZXBhcmF0aW9uIG9mIGNvbmNlcm5zLlxuICAgICAgICBzdG9yYWdlLnNldEZvclVzZXIob2lkY0xvZ2luT3B0aW9ucy5zZXNzaW9uSWQsIHtcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZXJzY29yZS1kYW5nbGVcbiAgICAgICAgICBjb2RlVmVyaWZpZXI6IHNpZ25pbmdSZXF1ZXN0LnN0YXRlLl9jb2RlX3ZlcmlmaWVyLFxuICAgICAgICAgIGlzc3Vlcjogb2lkY0xvZ2luT3B0aW9ucy5pc3N1ZXIudG9TdHJpbmcoKSxcbiAgICAgICAgICAvLyBUaGUgcmVkaXJlY3QgVVJMIGlzIHJlYWQgYWZ0ZXIgcmVkaXJlY3QsIHNvIGl0IG11c3QgYmUgc3RvcmVkIG5vdy5cbiAgICAgICAgICByZWRpcmVjdFVybDogb2lkY0xvZ2luT3B0aW9ucy5yZWRpcmVjdFVybCxcbiAgICAgICAgICBkcG9wOiBvaWRjTG9naW5PcHRpb25zLmRwb3AgPyBcInRydWVcIiA6IFwiZmFsc2VcIixcbiAgICAgICAgfSksXG4gICAgICBdKTtcblxuICAgICAgcmVkaXJlY3Rvci5yZWRpcmVjdChzaWduaW5nUmVxdWVzdC51cmwudG9TdHJpbmcoKSwge1xuICAgICAgICBoYW5kbGVSZWRpcmVjdDogb2lkY0xvZ2luT3B0aW9ucy5oYW5kbGVSZWRpcmVjdCxcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycjogdW5rbm93bikge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9XG5cbiAgICAvLyBUaGUgbG9naW4gaXMgb25seSBjb21wbGV0ZWQgQUZURVIgcmVkaXJlY3QsIHNvIG5vdGhpbmcgdG8gcmV0dXJuIGhlcmUuXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuIiwiLy9cbi8vIENvcHlyaWdodCAyMDIyIElucnVwdCBJbmMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpblxuLy8gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsXG4vLyBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlXG4vLyBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbyxcbi8vIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4vLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SIElNUExJRUQsXG4vLyBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQVxuLy8gUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVFxuLy8gSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OXG4vLyBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEVcbi8vIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuLy9cblxuLyoqXG4gKiBAaGlkZGVuXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqL1xuXG5pbXBvcnQge1xuICBJQ2xpZW50LFxuICBJQ2xpZW50UmVnaXN0cmFyLFxuICBJSXNzdWVyQ29uZmlnRmV0Y2hlcixcbiAgSVN0b3JhZ2VVdGlsaXR5LFxuICBsb2FkT2lkY0NvbnRleHRGcm9tU3RvcmFnZSxcbiAgS2V5UGFpcixcbiAgSVRva2VuUmVmcmVzaGVyLFxuICBUb2tlbkVuZHBvaW50UmVzcG9uc2UsXG4gIEVWRU5UUyxcbn0gZnJvbSBcIkBpbnJ1cHQvc29saWQtY2xpZW50LWF1dGhuLWNvcmVcIjtcbmltcG9ydCB7IHJlZnJlc2ggfSBmcm9tIFwiQGlucnVwdC9vaWRjLWNsaWVudC1leHRcIjtcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gXCJldmVudHNcIjtcblxuLy8gU29tZSBpZGVudGlmaWVycyBhcmUgbm90IGluIGNhbWVsY2FzZSBvbiBwdXJwb3NlLCBhcyB0aGV5IGFyZSBuYW1lZCB1c2luZyB0aGVcbi8vIG9mZmljaWFsIG5hbWVzIGZyb20gdGhlIE9JREMvT0F1dGgyIHNwZWNpZmljYXRpb25zLlxuLyogZXNsaW50LWRpc2FibGUgY2FtZWxjYXNlICovXG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUb2tlblJlZnJlc2hlciBpbXBsZW1lbnRzIElUb2tlblJlZnJlc2hlciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgc3RvcmFnZVV0aWxpdHk6IElTdG9yYWdlVXRpbGl0eSxcbiAgICBwcml2YXRlIGlzc3VlckNvbmZpZ0ZldGNoZXI6IElJc3N1ZXJDb25maWdGZXRjaGVyLFxuICAgIHByaXZhdGUgY2xpZW50UmVnaXN0cmFyOiBJQ2xpZW50UmVnaXN0cmFyXG4gICkge31cblxuICBhc3luYyByZWZyZXNoKFxuICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICAgIHJlZnJlc2hUb2tlbj86IHN0cmluZyxcbiAgICBkcG9wS2V5PzogS2V5UGFpcixcbiAgICBldmVudEVtaXR0ZXI/OiBFdmVudEVtaXR0ZXJcbiAgKTogUHJvbWlzZTxUb2tlbkVuZHBvaW50UmVzcG9uc2U+IHtcbiAgICBjb25zdCBvaWRjQ29udGV4dCA9IGF3YWl0IGxvYWRPaWRjQ29udGV4dEZyb21TdG9yYWdlKFxuICAgICAgc2Vzc2lvbklkLFxuICAgICAgdGhpcy5zdG9yYWdlVXRpbGl0eSxcbiAgICAgIHRoaXMuaXNzdWVyQ29uZmlnRmV0Y2hlclxuICAgICk7XG4gICAgLy8gVGhpcyBzaG91bGQgYWxzbyByZXRyaWV2ZSB0aGUgY2xpZW50IGZyb20gc3RvcmFnZVxuICAgIGNvbnN0IGNsaWVudEluZm86IElDbGllbnQgPSBhd2FpdCB0aGlzLmNsaWVudFJlZ2lzdHJhci5nZXRDbGllbnQoXG4gICAgICB7IHNlc3Npb25JZCB9LFxuICAgICAgb2lkY0NvbnRleHQuaXNzdWVyQ29uZmlnXG4gICAgKTtcblxuICAgIGlmIChyZWZyZXNoVG9rZW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gVE9ETzogaW4gYSBuZXh0IFBSLCBsb29rIHVwIHN0b3JhZ2UgZm9yIGEgcmVmcmVzaCB0b2tlblxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgU2Vzc2lvbiBbJHtzZXNzaW9uSWR9XSBoYXMgbm8gcmVmcmVzaCB0b2tlbiB0byBhbGxvdyBpdCB0byByZWZyZXNoIGl0cyBhY2Nlc3MgdG9rZW4uYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAob2lkY0NvbnRleHQuZHBvcCAmJiBkcG9wS2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEZvciBzZXNzaW9uIFske3Nlc3Npb25JZH1dLCB0aGUga2V5IGJvdW5kIHRvIHRoZSBEUG9QIGFjY2VzcyB0b2tlbiBtdXN0IGJlIHByb3ZpZGVkIHRvIHJlZnJlc2ggc2FpZCBhY2Nlc3MgdG9rZW4uYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCB0b2tlblNldCA9IGF3YWl0IHJlZnJlc2goXG4gICAgICByZWZyZXNoVG9rZW4sXG4gICAgICBvaWRjQ29udGV4dC5pc3N1ZXJDb25maWcsXG4gICAgICBjbGllbnRJbmZvLFxuICAgICAgZHBvcEtleVxuICAgICk7XG5cbiAgICBpZiAodG9rZW5TZXQucmVmcmVzaFRva2VuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGV2ZW50RW1pdHRlcj8uZW1pdChFVkVOVFMuTkVXX1JFRlJFU0hfVE9LRU4sIHRva2VuU2V0LnJlZnJlc2hUb2tlbik7XG4gICAgICBhd2FpdCB0aGlzLnN0b3JhZ2VVdGlsaXR5LnNldEZvclVzZXIoc2Vzc2lvbklkLCB7XG4gICAgICAgIHJlZnJlc2hUb2tlbjogdG9rZW5TZXQucmVmcmVzaFRva2VuLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0b2tlblNldDtcbiAgfVxufVxuIiwiLy9cbi8vIENvcHlyaWdodCAyMDIyIElucnVwdCBJbmMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpblxuLy8gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsXG4vLyBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlXG4vLyBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbyxcbi8vIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4vLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SIElNUExJRUQsXG4vLyBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQVxuLy8gUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVFxuLy8gSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OXG4vLyBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEVcbi8vIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuLy9cblxuLyoqXG4gKiBAaGlkZGVuXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqL1xuXG5pbXBvcnQge1xuICBJTG9nb3V0SGFuZGxlcixcbiAgSVNlc3Npb25JbmZvTWFuYWdlcixcbn0gZnJvbSBcIkBpbnJ1cHQvc29saWQtY2xpZW50LWF1dGhuLWNvcmVcIjtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdlbmVyYWxMb2dvdXRIYW5kbGVyIGltcGxlbWVudHMgSUxvZ291dEhhbmRsZXIge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHNlc3Npb25JbmZvTWFuYWdlcjogSVNlc3Npb25JbmZvTWFuYWdlcikge31cblxuICBhc3luYyBjYW5IYW5kbGUoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBhc3luYyBoYW5kbGUodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLnNlc3Npb25JbmZvTWFuYWdlci5jbGVhcih1c2VySWQpO1xuICB9XG59XG4iLCIvL1xuLy8gQ29weXJpZ2h0IDIwMjIgSW5ydXB0IEluYy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluXG4vLyB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSxcbi8vIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGVcbi8vIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLFxuLy8gc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IgSU1QTElFRCxcbi8vIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBXG4vLyBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUXG4vLyBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT05cbi8vIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRVxuLy8gU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4vL1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICovXG5cbmltcG9ydCB7XG4gIElTZXNzaW9uSW5mbyxcbiAgSVNlc3Npb25JbmZvTWFuYWdlcixcbiAgSVNlc3Npb25JbnRlcm5hbEluZm8sXG4gIElTZXNzaW9uSW5mb01hbmFnZXJPcHRpb25zLFxuICBJU3RvcmFnZVV0aWxpdHksXG4gIGlzU3VwcG9ydGVkVG9rZW5UeXBlLFxufSBmcm9tIFwiQGlucnVwdC9zb2xpZC1jbGllbnQtYXV0aG4tY29yZVwiO1xuaW1wb3J0IHsgdjQgfSBmcm9tIFwidXVpZFwiO1xuaW1wb3J0IHsgY2xlYXJPaWRjUGVyc2lzdGVudFN0b3JhZ2UgfSBmcm9tIFwiQGlucnVwdC9vaWRjLWNsaWVudC1leHRcIjtcbmltcG9ydCB7IGZldGNoIH0gZnJvbSBcIkBpbnJ1cHQvdW5pdmVyc2FsLWZldGNoXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRVbmF1dGhlbnRpY2F0ZWRTZXNzaW9uKCk6IElTZXNzaW9uSW5mbyAmIHtcbiAgZmV0Y2g6IHR5cGVvZiBmZXRjaDtcbn0ge1xuICByZXR1cm4ge1xuICAgIGlzTG9nZ2VkSW46IGZhbHNlLFxuICAgIHNlc3Npb25JZDogdjQoKSxcbiAgICBmZXRjaCxcbiAgfTtcbn1cblxuLyoqXG4gKiBAcGFyYW0gc2Vzc2lvbklkXG4gKiBAcGFyYW0gc3RvcmFnZVxuICogQGhpZGRlblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xlYXIoXG4gIHNlc3Npb25JZDogc3RyaW5nLFxuICBzdG9yYWdlOiBJU3RvcmFnZVV0aWxpdHlcbik6IFByb21pc2U8dm9pZD4ge1xuICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgc3RvcmFnZS5kZWxldGVBbGxVc2VyRGF0YShzZXNzaW9uSWQsIHsgc2VjdXJlOiBmYWxzZSB9KSxcbiAgICBzdG9yYWdlLmRlbGV0ZUFsbFVzZXJEYXRhKHNlc3Npb25JZCwgeyBzZWN1cmU6IHRydWUgfSksXG4gICAgLy8gRklYTUU6IFRoaXMgaXMgbmVlZGVkIHVudGlsIHRoZSBEUG9QIGtleSBpcyBzdG9yZWQgc2FmZWx5XG4gICAgc3RvcmFnZS5kZWxldGUoXCJjbGllbnRLZXlcIiwgeyBzZWN1cmU6IGZhbHNlIH0pLFxuICBdKTtcbiAgYXdhaXQgY2xlYXJPaWRjUGVyc2lzdGVudFN0b3JhZ2UoKTtcbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBTZXNzaW9uSW5mb01hbmFnZXIgaW1wbGVtZW50cyBJU2Vzc2lvbkluZm9NYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBzdG9yYWdlVXRpbGl0eTogSVN0b3JhZ2VVdGlsaXR5KSB7fVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzXG4gIHVwZGF0ZShcbiAgICBfc2Vzc2lvbklkOiBzdHJpbmcsXG4gICAgX29wdGlvbnM6IElTZXNzaW9uSW5mb01hbmFnZXJPcHRpb25zXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIGNvbnN0IGxvY2FsVXNlcklkOiBzdHJpbmcgPSBvcHRpb25zLmxvY2FsVXNlcklkIHx8IHRoaXMudXVpZEdlbmVyYXRvci52NCgpO1xuICAgIC8vIGlmIChvcHRpb25zLmxvZ2dlZEluKSB7XG4gICAgLy8gICByZXR1cm4ge1xuICAgIC8vICAgICBzZXNzaW9uSWQsXG4gICAgLy8gICAgIGxvZ2dlZEluOiB0cnVlLFxuICAgIC8vICAgICB3ZWJJZDogb3B0aW9ucy53ZWJJZCBhcyBzdHJpbmcsXG4gICAgLy8gICAgIG5lZWRlZEFjdGlvbjogb3B0aW9ucy5uZWVkZWRBY3Rpb24gfHwgeyBhY3Rpb25UeXBlOiBcImluYWN0aW9uXCIgfSxcbiAgICAvLyAgICAgc3RhdGU6IG9wdGlvbnMuc3RhdGUsXG4gICAgLy8gICAgIGxvZ291dDogYXN5bmMgKCk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgIC8vICAgICAgIC8vIFRPRE86IGhhbmRsZSBpZiB3ZWJpZCBpc24ndCBoZXJlXG4gICAgLy8gICAgICAgcmV0dXJuIHRoaXMubG9nb3V0SGFuZGxlci5oYW5kbGUobG9jYWxVc2VySWQpO1xuICAgIC8vICAgICB9LFxuICAgIC8vICAgICBmZXRjaDogKHVybDogUmVxdWVzdEluZm8sIGluaXQ/OiBSZXF1ZXN0SW5pdCk6IFByb21pc2U8UmVzcG9uc2U+ID0+IHtcbiAgICAvLyAgICAgICAvLyBUT0RPOiBoYW5kbGUgaWYgd2ViaWQgaXNuJ3QgaGVyZVxuICAgIC8vICAgICAgIHJldHVybiB0aGlzLmF1dGhlbnRpY2F0ZWRGZXRjaGVyLmhhbmRsZShcbiAgICAvLyAgICAgICAgIHtcbiAgICAvLyAgICAgICAgICAgbG9jYWxVc2VySWQsXG4gICAgLy8gICAgICAgICAgIHR5cGU6IFwiZHBvcFwiXG4gICAgLy8gICAgICAgICB9LFxuICAgIC8vICAgICAgICAgdXJsLFxuICAgIC8vICAgICAgICAgaW5pdFxuICAgIC8vICAgICAgICk7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgIH07XG4gICAgLy8gfSBlbHNlIHtcbiAgICAvLyAgIHJldHVybiB7XG4gICAgLy8gICAgIGxvY2FsVXNlcklkLFxuICAgIC8vICAgICBsb2dnZWRJbjogZmFsc2UsXG4gICAgLy8gICAgIG5lZWRlZEFjdGlvbjogb3B0aW9ucy5uZWVkZWRBY3Rpb24gfHwgeyBhY3Rpb25UeXBlOiBcImluYWN0aW9uXCIgfVxuICAgIC8vICAgfTtcbiAgICAvLyB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IEltcGxlbWVudGVkXCIpO1xuICB9XG5cbiAgYXN5bmMgZ2V0KFxuICAgIHNlc3Npb25JZDogc3RyaW5nXG4gICk6IFByb21pc2U8KElTZXNzaW9uSW5mbyAmIElTZXNzaW9uSW50ZXJuYWxJbmZvKSB8IHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IGlzTG9nZ2VkSW4gPSBhd2FpdCB0aGlzLnN0b3JhZ2VVdGlsaXR5LmdldEZvclVzZXIoXG4gICAgICBzZXNzaW9uSWQsXG4gICAgICBcImlzTG9nZ2VkSW5cIixcbiAgICAgIHtcbiAgICAgICAgc2VjdXJlOiB0cnVlLFxuICAgICAgfVxuICAgICk7XG5cbiAgICBjb25zdCB3ZWJJZCA9IGF3YWl0IHRoaXMuc3RvcmFnZVV0aWxpdHkuZ2V0Rm9yVXNlcihzZXNzaW9uSWQsIFwid2ViSWRcIiwge1xuICAgICAgc2VjdXJlOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgY29uc3QgY2xpZW50SWQgPSBhd2FpdCB0aGlzLnN0b3JhZ2VVdGlsaXR5LmdldEZvclVzZXIoXG4gICAgICBzZXNzaW9uSWQsXG4gICAgICBcImNsaWVudElkXCIsXG4gICAgICB7XG4gICAgICAgIHNlY3VyZTogZmFsc2UsXG4gICAgICB9XG4gICAgKTtcblxuICAgIGNvbnN0IGNsaWVudFNlY3JldCA9IGF3YWl0IHRoaXMuc3RvcmFnZVV0aWxpdHkuZ2V0Rm9yVXNlcihcbiAgICAgIHNlc3Npb25JZCxcbiAgICAgIFwiY2xpZW50U2VjcmV0XCIsXG4gICAgICB7XG4gICAgICAgIHNlY3VyZTogZmFsc2UsXG4gICAgICB9XG4gICAgKTtcblxuICAgIGNvbnN0IHJlZGlyZWN0VXJsID0gYXdhaXQgdGhpcy5zdG9yYWdlVXRpbGl0eS5nZXRGb3JVc2VyKFxuICAgICAgc2Vzc2lvbklkLFxuICAgICAgXCJyZWRpcmVjdFVybFwiLFxuICAgICAge1xuICAgICAgICBzZWN1cmU6IGZhbHNlLFxuICAgICAgfVxuICAgICk7XG5cbiAgICBjb25zdCByZWZyZXNoVG9rZW4gPSBhd2FpdCB0aGlzLnN0b3JhZ2VVdGlsaXR5LmdldEZvclVzZXIoXG4gICAgICBzZXNzaW9uSWQsXG4gICAgICBcInJlZnJlc2hUb2tlblwiLFxuICAgICAge1xuICAgICAgICBzZWN1cmU6IHRydWUsXG4gICAgICB9XG4gICAgKTtcblxuICAgIGNvbnN0IGlzc3VlciA9IGF3YWl0IHRoaXMuc3RvcmFnZVV0aWxpdHkuZ2V0Rm9yVXNlcihzZXNzaW9uSWQsIFwiaXNzdWVyXCIsIHtcbiAgICAgIHNlY3VyZTogZmFsc2UsXG4gICAgfSk7XG5cbiAgICBjb25zdCB0b2tlblR5cGUgPVxuICAgICAgKGF3YWl0IHRoaXMuc3RvcmFnZVV0aWxpdHkuZ2V0Rm9yVXNlcihzZXNzaW9uSWQsIFwidG9rZW5UeXBlXCIsIHtcbiAgICAgICAgc2VjdXJlOiBmYWxzZSxcbiAgICAgIH0pKSA/PyBcIkRQb1BcIjtcblxuICAgIGlmICghaXNTdXBwb3J0ZWRUb2tlblR5cGUodG9rZW5UeXBlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBUb2tlbnMgb2YgdHlwZSBbJHt0b2tlblR5cGV9XSBhcmUgbm90IHN1cHBvcnRlZC5gKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBjbGllbnRJZCA9PT0gdW5kZWZpbmVkICYmXG4gICAgICBpc0xvZ2dlZEluID09PSB1bmRlZmluZWQgJiZcbiAgICAgIHdlYklkID09PSB1bmRlZmluZWQgJiZcbiAgICAgIHJlZnJlc2hUb2tlbiA9PT0gdW5kZWZpbmVkXG4gICAgKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzZXNzaW9uSWQsXG4gICAgICB3ZWJJZCxcbiAgICAgIGlzTG9nZ2VkSW46IGlzTG9nZ2VkSW4gPT09IFwidHJ1ZVwiLFxuICAgICAgcmVkaXJlY3RVcmwsXG4gICAgICByZWZyZXNoVG9rZW4sXG4gICAgICBpc3N1ZXIsXG4gICAgICBjbGllbnRBcHBJZDogY2xpZW50SWQsXG4gICAgICBjbGllbnRBcHBTZWNyZXQ6IGNsaWVudFNlY3JldCxcbiAgICAgIHRva2VuVHlwZSxcbiAgICB9O1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcbiAgYXN5bmMgZ2V0QWxsKCk6IFByb21pc2U8KElTZXNzaW9uSW5mbyAmIElTZXNzaW9uSW50ZXJuYWxJbmZvKVtdPiB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgZnVuY3Rpb24gcmVtb3ZlcyBhbGwgc2Vzc2lvbi1yZWxhdGVkIGluZm9ybWF0aW9uIGZyb20gc3RvcmFnZS5cbiAgICogQHBhcmFtIHNlc3Npb25JZCB0aGUgc2Vzc2lvbiBpZGVudGlmaWVyXG4gICAqIEBwYXJhbSBzdG9yYWdlIHRoZSBzdG9yYWdlIHdoZXJlIHNlc3Npb24gaW5mbyBpcyBzdG9yZWRcbiAgICogQGhpZGRlblxuICAgKi9cbiAgYXN5bmMgY2xlYXIoc2Vzc2lvbklkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gY2xlYXIoc2Vzc2lvbklkLCB0aGlzLnN0b3JhZ2VVdGlsaXR5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBuZXcgc2Vzc2lvbiwgc28gdGhhdCBpdHMgSUQgY2FuIGJlIHJldHJpZXZlZC5cbiAgICogQHBhcmFtIHNlc3Npb25JZFxuICAgKi9cbiAgYXN5bmMgcmVnaXN0ZXIoX3Nlc3Npb25JZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYWxsIHRoZSByZWdpc3RlcmVkIHNlc3Npb24gSURzLiBEaWZmZXJzIGZyb20gZ2V0QWxsLCB3aGljaCBhbHNvXG4gICAqIHJldHVybnMgYWRkaXRpb25hbCBzZXNzaW9uIGluZm9ybWF0aW9uLlxuICAgKi9cbiAgYXN5bmMgZ2V0UmVnaXN0ZXJlZFNlc3Npb25JZEFsbCgpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgYWxsIGluZm9ybWF0aW9uIGFib3V0IGFsbCBzZXNzaW9ucywgaW5jbHVkaW5nIHRoZWlyIHJlZ2lzdHJhdGlvbnMuXG4gICAqL1xuICBhc3luYyBjbGVhckFsbCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWRcIik7XG4gIH1cbn1cbiIsIi8vXG4vLyBDb3B5cmlnaHQgMjAyMiBJbnJ1cHQgSW5jLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW5cbi8vIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLFxuLy8gY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZVxuLy8gU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sXG4vLyBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUiBJTVBMSUVELFxuLy8gSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEFcbi8vIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFRcbi8vIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTlxuLy8gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFXG4vLyBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbi8vXG5cbi8qKlxuICogQGhpZGRlblxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKi9cblxuaW1wb3J0IHsgSVN0b3JhZ2UgfSBmcm9tIFwiQGlucnVwdC9zb2xpZC1jbGllbnQtYXV0aG4tY29yZVwiO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnJvd3NlclN0b3JhZ2UgaW1wbGVtZW50cyBJU3RvcmFnZSB7XG4gIGdldCBzdG9yYWdlKCk6IHR5cGVvZiB3aW5kb3cubG9jYWxTdG9yYWdlIHtcbiAgICByZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZTtcbiAgfVxuXG4gIGFzeW5jIGdldChrZXk6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSkgfHwgdW5kZWZpbmVkO1xuICB9XG5cbiAgYXN5bmMgc2V0KGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7XG4gIH1cblxuICBhc3luYyBkZWxldGUoa2V5OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICB9XG59XG4iLCIvL1xuLy8gQ29weXJpZ2h0IDIwMjIgSW5ydXB0IEluYy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluXG4vLyB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSxcbi8vIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGVcbi8vIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLFxuLy8gc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IgSU1QTElFRCxcbi8vIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBXG4vLyBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUXG4vLyBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT05cbi8vIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRVxuLy8gU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4vL1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICovXG5cbi8qKlxuICogQSBoZWxwZXIgY2xhc3MgdGhhdCB3aWxsIHZhbGlkYXRlIGl0ZW1zIHRha2VuIGZyb20gbG9jYWwgc3RvcmFnZVxuICovXG5pbXBvcnQgeyBJU3RvcmFnZSwgU3RvcmFnZVV0aWxpdHkgfSBmcm9tIFwiQGlucnVwdC9zb2xpZC1jbGllbnQtYXV0aG4tY29yZVwiO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgaW4gYSBuby12YWx1ZS1hZGRlZCBleHRlbnNpb24gb2YgU3RvcmFnZVV0aWxpdHkgZnJvbSB0aGUgY29yZSBtb2R1bGUuXG4gKiBUaGUgcmVhc29uIGl0IGhhcyB0byBiZSBkZWNsYXJlZCBpcyBmb3IgVFN5cmluZ2UgdG8gZmluZCB0aGUgZGVjb3JhdG9ycyBpbiB0aGVcbiAqIHNhbWUgbW9kdWxlcyBhcyB3aGVyZSB0aGUgZGVwZW5kZW5jeSBjb250YWluZXIgaXMgZGVjbGFyZWQgKGluIHRoaXMgY2FzZSxcbiAqIHRoZSBicm93c2VyIG1vZHVsZSwgd2l0aCB0aGUgZGVwZW5kYW5jeSBjb250YWluZXIgaW4gZGVwZW5kZW5jaWVzLnRzKS5cbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RvcmFnZVV0aWxpdHlCcm93c2VyIGV4dGVuZHMgU3RvcmFnZVV0aWxpdHkge1xuICBjb25zdHJ1Y3RvcihzZWN1cmVTdG9yYWdlOiBJU3RvcmFnZSwgaW5zZWN1cmVTdG9yYWdlOiBJU3RvcmFnZSkge1xuICAgIHN1cGVyKHNlY3VyZVN0b3JhZ2UsIGluc2VjdXJlU3RvcmFnZSk7XG4gIH1cbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxudmFyIGluZGV4QnJvd3NlciA9IGdsb2JhbFRoaXMuZmV0Y2g7XHJcbmNvbnN0IHsgZmV0Y2gsIFJlc3BvbnNlLCBSZXF1ZXN0LCBIZWFkZXJzIH0gPSBnbG9iYWxUaGlzO1xuXG5leHBvcnRzLkhlYWRlcnMgPSBIZWFkZXJzO1xuZXhwb3J0cy5SZXF1ZXN0ID0gUmVxdWVzdDtcbmV4cG9ydHMuUmVzcG9uc2UgPSBSZXNwb25zZTtcbmV4cG9ydHMuZGVmYXVsdCA9IGluZGV4QnJvd3NlcjtcbmV4cG9ydHMuZmV0Y2ggPSBmZXRjaDtcbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSID0gdHlwZW9mIFJlZmxlY3QgPT09ICdvYmplY3QnID8gUmVmbGVjdCA6IG51bGxcbnZhciBSZWZsZWN0QXBwbHkgPSBSICYmIHR5cGVvZiBSLmFwcGx5ID09PSAnZnVuY3Rpb24nXG4gID8gUi5hcHBseVxuICA6IGZ1bmN0aW9uIFJlZmxlY3RBcHBseSh0YXJnZXQsIHJlY2VpdmVyLCBhcmdzKSB7XG4gICAgcmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKHRhcmdldCwgcmVjZWl2ZXIsIGFyZ3MpO1xuICB9XG5cbnZhciBSZWZsZWN0T3duS2V5c1xuaWYgKFIgJiYgdHlwZW9mIFIub3duS2V5cyA9PT0gJ2Z1bmN0aW9uJykge1xuICBSZWZsZWN0T3duS2V5cyA9IFIub3duS2V5c1xufSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gIFJlZmxlY3RPd25LZXlzID0gZnVuY3Rpb24gUmVmbGVjdE93bktleXModGFyZ2V0KSB7XG4gICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRhcmdldClcbiAgICAgIC5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0YXJnZXQpKTtcbiAgfTtcbn0gZWxzZSB7XG4gIFJlZmxlY3RPd25LZXlzID0gZnVuY3Rpb24gUmVmbGVjdE93bktleXModGFyZ2V0KSB7XG4gICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRhcmdldCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIFByb2Nlc3NFbWl0V2FybmluZyh3YXJuaW5nKSB7XG4gIGlmIChjb25zb2xlICYmIGNvbnNvbGUud2FybikgY29uc29sZS53YXJuKHdhcm5pbmcpO1xufVxuXG52YXIgTnVtYmVySXNOYU4gPSBOdW1iZXIuaXNOYU4gfHwgZnVuY3Rpb24gTnVtYmVySXNOYU4odmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9PSB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xuICBFdmVudEVtaXR0ZXIuaW5pdC5jYWxsKHRoaXMpO1xufVxubW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG5tb2R1bGUuZXhwb3J0cy5vbmNlID0gb25jZTtcblxuLy8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC4xMC54XG5FdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLl9ldmVudHMgPSB1bmRlZmluZWQ7XG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLl9ldmVudHNDb3VudCA9IDA7XG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnMgPSB1bmRlZmluZWQ7XG5cbi8vIEJ5IGRlZmF1bHQgRXZlbnRFbWl0dGVycyB3aWxsIHByaW50IGEgd2FybmluZyBpZiBtb3JlIHRoYW4gMTAgbGlzdGVuZXJzIGFyZVxuLy8gYWRkZWQgdG8gaXQuIFRoaXMgaXMgYSB1c2VmdWwgZGVmYXVsdCB3aGljaCBoZWxwcyBmaW5kaW5nIG1lbW9yeSBsZWFrcy5cbnZhciBkZWZhdWx0TWF4TGlzdGVuZXJzID0gMTA7XG5cbmZ1bmN0aW9uIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImxpc3RlbmVyXCIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIEZ1bmN0aW9uLiBSZWNlaXZlZCB0eXBlICcgKyB0eXBlb2YgbGlzdGVuZXIpO1xuICB9XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShFdmVudEVtaXR0ZXIsICdkZWZhdWx0TWF4TGlzdGVuZXJzJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkZWZhdWx0TWF4TGlzdGVuZXJzO1xuICB9LFxuICBzZXQ6IGZ1bmN0aW9uKGFyZykge1xuICAgIGlmICh0eXBlb2YgYXJnICE9PSAnbnVtYmVyJyB8fCBhcmcgPCAwIHx8IE51bWJlcklzTmFOKGFyZykpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgXCJkZWZhdWx0TWF4TGlzdGVuZXJzXCIgaXMgb3V0IG9mIHJhbmdlLiBJdCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4gUmVjZWl2ZWQgJyArIGFyZyArICcuJyk7XG4gICAgfVxuICAgIGRlZmF1bHRNYXhMaXN0ZW5lcnMgPSBhcmc7XG4gIH1cbn0pO1xuXG5FdmVudEVtaXR0ZXIuaW5pdCA9IGZ1bmN0aW9uKCkge1xuXG4gIGlmICh0aGlzLl9ldmVudHMgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgdGhpcy5fZXZlbnRzID09PSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykuX2V2ZW50cykge1xuICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICB9XG5cbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gdGhpcy5fbWF4TGlzdGVuZXJzIHx8IHVuZGVmaW5lZDtcbn07XG5cbi8vIE9idmlvdXNseSBub3QgYWxsIEVtaXR0ZXJzIHNob3VsZCBiZSBsaW1pdGVkIHRvIDEwLiBUaGlzIGZ1bmN0aW9uIGFsbG93c1xuLy8gdGhhdCB0byBiZSBpbmNyZWFzZWQuIFNldCB0byB6ZXJvIGZvciB1bmxpbWl0ZWQuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnNldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uIHNldE1heExpc3RlbmVycyhuKSB7XG4gIGlmICh0eXBlb2YgbiAhPT0gJ251bWJlcicgfHwgbiA8IDAgfHwgTnVtYmVySXNOYU4obikpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIG9mIFwiblwiIGlzIG91dCBvZiByYW5nZS4gSXQgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuIFJlY2VpdmVkICcgKyBuICsgJy4nKTtcbiAgfVxuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSBuO1xuICByZXR1cm4gdGhpcztcbn07XG5cbmZ1bmN0aW9uIF9nZXRNYXhMaXN0ZW5lcnModGhhdCkge1xuICBpZiAodGhhdC5fbWF4TGlzdGVuZXJzID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzO1xuICByZXR1cm4gdGhhdC5fbWF4TGlzdGVuZXJzO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmdldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uIGdldE1heExpc3RlbmVycygpIHtcbiAgcmV0dXJuIF9nZXRNYXhMaXN0ZW5lcnModGhpcyk7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiBlbWl0KHR5cGUpIHtcbiAgdmFyIGFyZ3MgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIGFyZ3MucHVzaChhcmd1bWVudHNbaV0pO1xuICB2YXIgZG9FcnJvciA9ICh0eXBlID09PSAnZXJyb3InKTtcblxuICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuICBpZiAoZXZlbnRzICE9PSB1bmRlZmluZWQpXG4gICAgZG9FcnJvciA9IChkb0Vycm9yICYmIGV2ZW50cy5lcnJvciA9PT0gdW5kZWZpbmVkKTtcbiAgZWxzZSBpZiAoIWRvRXJyb3IpXG4gICAgcmV0dXJuIGZhbHNlO1xuXG4gIC8vIElmIHRoZXJlIGlzIG5vICdlcnJvcicgZXZlbnQgbGlzdGVuZXIgdGhlbiB0aHJvdy5cbiAgaWYgKGRvRXJyb3IpIHtcbiAgICB2YXIgZXI7XG4gICAgaWYgKGFyZ3MubGVuZ3RoID4gMClcbiAgICAgIGVyID0gYXJnc1swXTtcbiAgICBpZiAoZXIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgLy8gTm90ZTogVGhlIGNvbW1lbnRzIG9uIHRoZSBgdGhyb3dgIGxpbmVzIGFyZSBpbnRlbnRpb25hbCwgdGhleSBzaG93XG4gICAgICAvLyB1cCBpbiBOb2RlJ3Mgb3V0cHV0IGlmIHRoaXMgcmVzdWx0cyBpbiBhbiB1bmhhbmRsZWQgZXhjZXB0aW9uLlxuICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XG4gICAgfVxuICAgIC8vIEF0IGxlYXN0IGdpdmUgc29tZSBraW5kIG9mIGNvbnRleHQgdG8gdGhlIHVzZXJcbiAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdVbmhhbmRsZWQgZXJyb3IuJyArIChlciA/ICcgKCcgKyBlci5tZXNzYWdlICsgJyknIDogJycpKTtcbiAgICBlcnIuY29udGV4dCA9IGVyO1xuICAgIHRocm93IGVycjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcbiAgfVxuXG4gIHZhciBoYW5kbGVyID0gZXZlbnRzW3R5cGVdO1xuXG4gIGlmIChoYW5kbGVyID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIGZhbHNlO1xuXG4gIGlmICh0eXBlb2YgaGFuZGxlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIFJlZmxlY3RBcHBseShoYW5kbGVyLCB0aGlzLCBhcmdzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgbGVuID0gaGFuZGxlci5sZW5ndGg7XG4gICAgdmFyIGxpc3RlbmVycyA9IGFycmF5Q2xvbmUoaGFuZGxlciwgbGVuKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKVxuICAgICAgUmVmbGVjdEFwcGx5KGxpc3RlbmVyc1tpXSwgdGhpcywgYXJncyk7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbmZ1bmN0aW9uIF9hZGRMaXN0ZW5lcih0YXJnZXQsIHR5cGUsIGxpc3RlbmVyLCBwcmVwZW5kKSB7XG4gIHZhciBtO1xuICB2YXIgZXZlbnRzO1xuICB2YXIgZXhpc3Rpbmc7XG5cbiAgY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcik7XG5cbiAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHM7XG4gIGlmIChldmVudHMgPT09IHVuZGVmaW5lZCkge1xuICAgIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0YXJnZXQuX2V2ZW50c0NvdW50ID0gMDtcbiAgfSBlbHNlIHtcbiAgICAvLyBUbyBhdm9pZCByZWN1cnNpb24gaW4gdGhlIGNhc2UgdGhhdCB0eXBlID09PSBcIm5ld0xpc3RlbmVyXCIhIEJlZm9yZVxuICAgIC8vIGFkZGluZyBpdCB0byB0aGUgbGlzdGVuZXJzLCBmaXJzdCBlbWl0IFwibmV3TGlzdGVuZXJcIi5cbiAgICBpZiAoZXZlbnRzLm5ld0xpc3RlbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRhcmdldC5lbWl0KCduZXdMaXN0ZW5lcicsIHR5cGUsXG4gICAgICAgICAgICAgICAgICBsaXN0ZW5lci5saXN0ZW5lciA/IGxpc3RlbmVyLmxpc3RlbmVyIDogbGlzdGVuZXIpO1xuXG4gICAgICAvLyBSZS1hc3NpZ24gYGV2ZW50c2AgYmVjYXVzZSBhIG5ld0xpc3RlbmVyIGhhbmRsZXIgY291bGQgaGF2ZSBjYXVzZWQgdGhlXG4gICAgICAvLyB0aGlzLl9ldmVudHMgdG8gYmUgYXNzaWduZWQgdG8gYSBuZXcgb2JqZWN0XG4gICAgICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cztcbiAgICB9XG4gICAgZXhpc3RpbmcgPSBldmVudHNbdHlwZV07XG4gIH1cblxuICBpZiAoZXhpc3RpbmcgPT09IHVuZGVmaW5lZCkge1xuICAgIC8vIE9wdGltaXplIHRoZSBjYXNlIG9mIG9uZSBsaXN0ZW5lci4gRG9uJ3QgbmVlZCB0aGUgZXh0cmEgYXJyYXkgb2JqZWN0LlxuICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdID0gbGlzdGVuZXI7XG4gICAgKyt0YXJnZXQuX2V2ZW50c0NvdW50O1xuICB9IGVsc2Uge1xuICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LlxuICAgICAgZXhpc3RpbmcgPSBldmVudHNbdHlwZV0gPVxuICAgICAgICBwcmVwZW5kID8gW2xpc3RlbmVyLCBleGlzdGluZ10gOiBbZXhpc3RpbmcsIGxpc3RlbmVyXTtcbiAgICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgZ290IGFuIGFycmF5LCBqdXN0IGFwcGVuZC5cbiAgICB9IGVsc2UgaWYgKHByZXBlbmQpIHtcbiAgICAgIGV4aXN0aW5nLnVuc2hpZnQobGlzdGVuZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBleGlzdGluZy5wdXNoKGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3IgbGlzdGVuZXIgbGVha1xuICAgIG0gPSBfZ2V0TWF4TGlzdGVuZXJzKHRhcmdldCk7XG4gICAgaWYgKG0gPiAwICYmIGV4aXN0aW5nLmxlbmd0aCA+IG0gJiYgIWV4aXN0aW5nLndhcm5lZCkge1xuICAgICAgZXhpc3Rpbmcud2FybmVkID0gdHJ1ZTtcbiAgICAgIC8vIE5vIGVycm9yIGNvZGUgZm9yIHRoaXMgc2luY2UgaXQgaXMgYSBXYXJuaW5nXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICAgIHZhciB3ID0gbmV3IEVycm9yKCdQb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5IGxlYWsgZGV0ZWN0ZWQuICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5sZW5ndGggKyAnICcgKyBTdHJpbmcodHlwZSkgKyAnIGxpc3RlbmVycyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FkZGVkLiBVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2luY3JlYXNlIGxpbWl0Jyk7XG4gICAgICB3Lm5hbWUgPSAnTWF4TGlzdGVuZXJzRXhjZWVkZWRXYXJuaW5nJztcbiAgICAgIHcuZW1pdHRlciA9IHRhcmdldDtcbiAgICAgIHcudHlwZSA9IHR5cGU7XG4gICAgICB3LmNvdW50ID0gZXhpc3RpbmcubGVuZ3RoO1xuICAgICAgUHJvY2Vzc0VtaXRXYXJuaW5nKHcpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbiBhZGRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICByZXR1cm4gX2FkZExpc3RlbmVyKHRoaXMsIHR5cGUsIGxpc3RlbmVyLCBmYWxzZSk7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5wcmVwZW5kTGlzdGVuZXIgPVxuICAgIGZ1bmN0aW9uIHByZXBlbmRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgcmV0dXJuIF9hZGRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lciwgdHJ1ZSk7XG4gICAgfTtcblxuZnVuY3Rpb24gb25jZVdyYXBwZXIoKSB7XG4gIGlmICghdGhpcy5maXJlZCkge1xuICAgIHRoaXMudGFyZ2V0LnJlbW92ZUxpc3RlbmVyKHRoaXMudHlwZSwgdGhpcy53cmFwRm4pO1xuICAgIHRoaXMuZmlyZWQgPSB0cnVlO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKVxuICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuY2FsbCh0aGlzLnRhcmdldCk7XG4gICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuYXBwbHkodGhpcy50YXJnZXQsIGFyZ3VtZW50cyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gX29uY2VXcmFwKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIHN0YXRlID0geyBmaXJlZDogZmFsc2UsIHdyYXBGbjogdW5kZWZpbmVkLCB0YXJnZXQ6IHRhcmdldCwgdHlwZTogdHlwZSwgbGlzdGVuZXI6IGxpc3RlbmVyIH07XG4gIHZhciB3cmFwcGVkID0gb25jZVdyYXBwZXIuYmluZChzdGF0ZSk7XG4gIHdyYXBwZWQubGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgc3RhdGUud3JhcEZuID0gd3JhcHBlZDtcbiAgcmV0dXJuIHdyYXBwZWQ7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uIG9uY2UodHlwZSwgbGlzdGVuZXIpIHtcbiAgY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcik7XG4gIHRoaXMub24odHlwZSwgX29uY2VXcmFwKHRoaXMsIHR5cGUsIGxpc3RlbmVyKSk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5wcmVwZW5kT25jZUxpc3RlbmVyID1cbiAgICBmdW5jdGlvbiBwcmVwZW5kT25jZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTtcbiAgICAgIHRoaXMucHJlcGVuZExpc3RlbmVyKHR5cGUsIF9vbmNlV3JhcCh0aGlzLCB0eXBlLCBsaXN0ZW5lcikpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuLy8gRW1pdHMgYSAncmVtb3ZlTGlzdGVuZXInIGV2ZW50IGlmIGFuZCBvbmx5IGlmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZC5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPVxuICAgIGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICB2YXIgbGlzdCwgZXZlbnRzLCBwb3NpdGlvbiwgaSwgb3JpZ2luYWxMaXN0ZW5lcjtcblxuICAgICAgY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcik7XG5cbiAgICAgIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgICAgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIGxpc3QgPSBldmVudHNbdHlwZV07XG4gICAgICBpZiAobGlzdCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm4gdGhpcztcblxuICAgICAgaWYgKGxpc3QgPT09IGxpc3RlbmVyIHx8IGxpc3QubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgIGlmICgtLXRoaXMuX2V2ZW50c0NvdW50ID09PSAwKVxuICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGRlbGV0ZSBldmVudHNbdHlwZV07XG4gICAgICAgICAgaWYgKGV2ZW50cy5yZW1vdmVMaXN0ZW5lcilcbiAgICAgICAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBsaXN0Lmxpc3RlbmVyIHx8IGxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbGlzdCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBwb3NpdGlvbiA9IC0xO1xuXG4gICAgICAgIGZvciAoaSA9IGxpc3QubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICBpZiAobGlzdFtpXSA9PT0gbGlzdGVuZXIgfHwgbGlzdFtpXS5saXN0ZW5lciA9PT0gbGlzdGVuZXIpIHtcbiAgICAgICAgICAgIG9yaWdpbmFsTGlzdGVuZXIgPSBsaXN0W2ldLmxpc3RlbmVyO1xuICAgICAgICAgICAgcG9zaXRpb24gPSBpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBvc2l0aW9uIDwgMClcbiAgICAgICAgICByZXR1cm4gdGhpcztcblxuICAgICAgICBpZiAocG9zaXRpb24gPT09IDApXG4gICAgICAgICAgbGlzdC5zaGlmdCgpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBzcGxpY2VPbmUobGlzdCwgcG9zaXRpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxpc3QubGVuZ3RoID09PSAxKVxuICAgICAgICAgIGV2ZW50c1t0eXBlXSA9IGxpc3RbMF07XG5cbiAgICAgICAgaWYgKGV2ZW50cy5yZW1vdmVMaXN0ZW5lciAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBvcmlnaW5hbExpc3RlbmVyIHx8IGxpc3RlbmVyKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vZmYgPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9XG4gICAgZnVuY3Rpb24gcmVtb3ZlQWxsTGlzdGVuZXJzKHR5cGUpIHtcbiAgICAgIHZhciBsaXN0ZW5lcnMsIGV2ZW50cywgaTtcblxuICAgICAgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuICAgICAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm4gdGhpcztcblxuICAgICAgLy8gbm90IGxpc3RlbmluZyBmb3IgcmVtb3ZlTGlzdGVuZXIsIG5vIG5lZWQgdG8gZW1pdFxuICAgICAgaWYgKGV2ZW50cy5yZW1vdmVMaXN0ZW5lciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnRzW3R5cGVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAoLS10aGlzLl9ldmVudHNDb3VudCA9PT0gMClcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgZGVsZXRlIGV2ZW50c1t0eXBlXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgLy8gZW1pdCByZW1vdmVMaXN0ZW5lciBmb3IgYWxsIGxpc3RlbmVycyBvbiBhbGwgZXZlbnRzXG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGV2ZW50cyk7XG4gICAgICAgIHZhciBrZXk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICBpZiAoa2V5ID09PSAncmVtb3ZlTGlzdGVuZXInKSBjb250aW51ZTtcbiAgICAgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZW1vdmVMaXN0ZW5lcicpO1xuICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICBsaXN0ZW5lcnMgPSBldmVudHNbdHlwZV07XG5cbiAgICAgIGlmICh0eXBlb2YgbGlzdGVuZXJzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzKTtcbiAgICAgIH0gZWxzZSBpZiAobGlzdGVuZXJzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gTElGTyBvcmRlclxuICAgICAgICBmb3IgKGkgPSBsaXN0ZW5lcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuZnVuY3Rpb24gX2xpc3RlbmVycyh0YXJnZXQsIHR5cGUsIHVud3JhcCkge1xuICB2YXIgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHM7XG5cbiAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBbXTtcblxuICB2YXIgZXZsaXN0ZW5lciA9IGV2ZW50c1t0eXBlXTtcbiAgaWYgKGV2bGlzdGVuZXIgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gW107XG5cbiAgaWYgKHR5cGVvZiBldmxpc3RlbmVyID09PSAnZnVuY3Rpb24nKVxuICAgIHJldHVybiB1bndyYXAgPyBbZXZsaXN0ZW5lci5saXN0ZW5lciB8fCBldmxpc3RlbmVyXSA6IFtldmxpc3RlbmVyXTtcblxuICByZXR1cm4gdW53cmFwID9cbiAgICB1bndyYXBMaXN0ZW5lcnMoZXZsaXN0ZW5lcikgOiBhcnJheUNsb25lKGV2bGlzdGVuZXIsIGV2bGlzdGVuZXIubGVuZ3RoKTtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbiBsaXN0ZW5lcnModHlwZSkge1xuICByZXR1cm4gX2xpc3RlbmVycyh0aGlzLCB0eXBlLCB0cnVlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmF3TGlzdGVuZXJzID0gZnVuY3Rpb24gcmF3TGlzdGVuZXJzKHR5cGUpIHtcbiAgcmV0dXJuIF9saXN0ZW5lcnModGhpcywgdHlwZSwgZmFsc2UpO1xufTtcblxuRXZlbnRFbWl0dGVyLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlKSB7XG4gIGlmICh0eXBlb2YgZW1pdHRlci5saXN0ZW5lckNvdW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJDb3VudCh0eXBlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbGlzdGVuZXJDb3VudC5jYWxsKGVtaXR0ZXIsIHR5cGUpO1xuICB9XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBsaXN0ZW5lckNvdW50O1xuZnVuY3Rpb24gbGlzdGVuZXJDb3VudCh0eXBlKSB7XG4gIHZhciBldmVudHMgPSB0aGlzLl9ldmVudHM7XG5cbiAgaWYgKGV2ZW50cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIGV2bGlzdGVuZXIgPSBldmVudHNbdHlwZV07XG5cbiAgICBpZiAodHlwZW9mIGV2bGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH0gZWxzZSBpZiAoZXZsaXN0ZW5lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZXZsaXN0ZW5lci5sZW5ndGg7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIDA7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZXZlbnROYW1lcyA9IGZ1bmN0aW9uIGV2ZW50TmFtZXMoKSB7XG4gIHJldHVybiB0aGlzLl9ldmVudHNDb3VudCA+IDAgPyBSZWZsZWN0T3duS2V5cyh0aGlzLl9ldmVudHMpIDogW107XG59O1xuXG5mdW5jdGlvbiBhcnJheUNsb25lKGFyciwgbikge1xuICB2YXIgY29weSA9IG5ldyBBcnJheShuKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyArK2kpXG4gICAgY29weVtpXSA9IGFycltpXTtcbiAgcmV0dXJuIGNvcHk7XG59XG5cbmZ1bmN0aW9uIHNwbGljZU9uZShsaXN0LCBpbmRleCkge1xuICBmb3IgKDsgaW5kZXggKyAxIDwgbGlzdC5sZW5ndGg7IGluZGV4KyspXG4gICAgbGlzdFtpbmRleF0gPSBsaXN0W2luZGV4ICsgMV07XG4gIGxpc3QucG9wKCk7XG59XG5cbmZ1bmN0aW9uIHVud3JhcExpc3RlbmVycyhhcnIpIHtcbiAgdmFyIHJldCA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXQubGVuZ3RoOyArK2kpIHtcbiAgICByZXRbaV0gPSBhcnJbaV0ubGlzdGVuZXIgfHwgYXJyW2ldO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIG9uY2UoZW1pdHRlciwgbmFtZSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIGZ1bmN0aW9uIGVycm9yTGlzdGVuZXIoZXJyKSB7XG4gICAgICBlbWl0dGVyLnJlbW92ZUxpc3RlbmVyKG5hbWUsIHJlc29sdmVyKTtcbiAgICAgIHJlamVjdChlcnIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc29sdmVyKCkge1xuICAgICAgaWYgKHR5cGVvZiBlbWl0dGVyLnJlbW92ZUxpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgZXJyb3JMaXN0ZW5lcik7XG4gICAgICB9XG4gICAgICByZXNvbHZlKFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKSk7XG4gICAgfTtcblxuICAgIGV2ZW50VGFyZ2V0QWdub3N0aWNBZGRMaXN0ZW5lcihlbWl0dGVyLCBuYW1lLCByZXNvbHZlciwgeyBvbmNlOiB0cnVlIH0pO1xuICAgIGlmIChuYW1lICE9PSAnZXJyb3InKSB7XG4gICAgICBhZGRFcnJvckhhbmRsZXJJZkV2ZW50RW1pdHRlcihlbWl0dGVyLCBlcnJvckxpc3RlbmVyLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gYWRkRXJyb3JIYW5kbGVySWZFdmVudEVtaXR0ZXIoZW1pdHRlciwgaGFuZGxlciwgZmxhZ3MpIHtcbiAgaWYgKHR5cGVvZiBlbWl0dGVyLm9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgZXZlbnRUYXJnZXRBZ25vc3RpY0FkZExpc3RlbmVyKGVtaXR0ZXIsICdlcnJvcicsIGhhbmRsZXIsIGZsYWdzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBldmVudFRhcmdldEFnbm9zdGljQWRkTGlzdGVuZXIoZW1pdHRlciwgbmFtZSwgbGlzdGVuZXIsIGZsYWdzKSB7XG4gIGlmICh0eXBlb2YgZW1pdHRlci5vbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGlmIChmbGFncy5vbmNlKSB7XG4gICAgICBlbWl0dGVyLm9uY2UobmFtZSwgbGlzdGVuZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbWl0dGVyLm9uKG5hbWUsIGxpc3RlbmVyKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZW9mIGVtaXR0ZXIuYWRkRXZlbnRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vIEV2ZW50VGFyZ2V0IGRvZXMgbm90IGhhdmUgYGVycm9yYCBldmVudCBzZW1hbnRpY3MgbGlrZSBOb2RlXG4gICAgLy8gRXZlbnRFbWl0dGVycywgd2UgZG8gbm90IGxpc3RlbiBmb3IgYGVycm9yYCBldmVudHMgaGVyZS5cbiAgICBlbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIobmFtZSwgZnVuY3Rpb24gd3JhcExpc3RlbmVyKGFyZykge1xuICAgICAgLy8gSUUgZG9lcyBub3QgaGF2ZSBidWlsdGluIGB7IG9uY2U6IHRydWUgfWAgc3VwcG9ydCBzbyB3ZVxuICAgICAgLy8gaGF2ZSB0byBkbyBpdCBtYW51YWxseS5cbiAgICAgIGlmIChmbGFncy5vbmNlKSB7XG4gICAgICAgIGVtaXR0ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihuYW1lLCB3cmFwTGlzdGVuZXIpO1xuICAgICAgfVxuICAgICAgbGlzdGVuZXIoYXJnKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJlbWl0dGVyXCIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIEV2ZW50RW1pdHRlci4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGVtaXR0ZXIpO1xuICB9XG59XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk5JTFwiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfbmlsLmRlZmF1bHQ7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwicGFyc2VcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX3BhcnNlLmRlZmF1bHQ7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwic3RyaW5naWZ5XCIsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9zdHJpbmdpZnkuZGVmYXVsdDtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJ2MVwiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfdi5kZWZhdWx0O1xuICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInYzXCIsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF92Mi5kZWZhdWx0O1xuICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInY0XCIsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF92My5kZWZhdWx0O1xuICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInY1XCIsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF92NC5kZWZhdWx0O1xuICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInZhbGlkYXRlXCIsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF92YWxpZGF0ZS5kZWZhdWx0O1xuICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInZlcnNpb25cIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX3ZlcnNpb24uZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfdiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdjEuanNcIikpO1xuXG52YXIgX3YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi92My5qc1wiKSk7XG5cbnZhciBfdjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3Y0LmpzXCIpKTtcblxudmFyIF92NCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdjUuanNcIikpO1xuXG52YXIgX25pbCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vbmlsLmpzXCIpKTtcblxudmFyIF92ZXJzaW9uID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi92ZXJzaW9uLmpzXCIpKTtcblxudmFyIF92YWxpZGF0ZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdmFsaWRhdGUuanNcIikpO1xuXG52YXIgX3N0cmluZ2lmeSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vc3RyaW5naWZ5LmpzXCIpKTtcblxudmFyIF9wYXJzZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vcGFyc2UuanNcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfSIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG4vKlxuICogQnJvd3Nlci1jb21wYXRpYmxlIEphdmFTY3JpcHQgTUQ1XG4gKlxuICogTW9kaWZpY2F0aW9uIG9mIEphdmFTY3JpcHQgTUQ1XG4gKiBodHRwczovL2dpdGh1Yi5jb20vYmx1ZWltcC9KYXZhU2NyaXB0LU1ENVxuICpcbiAqIENvcHlyaWdodCAyMDExLCBTZWJhc3RpYW4gVHNjaGFuXG4gKiBodHRwczovL2JsdWVpbXAubmV0XG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlOlxuICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVRcbiAqXG4gKiBCYXNlZCBvblxuICogQSBKYXZhU2NyaXB0IGltcGxlbWVudGF0aW9uIG9mIHRoZSBSU0EgRGF0YSBTZWN1cml0eSwgSW5jLiBNRDUgTWVzc2FnZVxuICogRGlnZXN0IEFsZ29yaXRobSwgYXMgZGVmaW5lZCBpbiBSRkMgMTMyMS5cbiAqIFZlcnNpb24gMi4yIENvcHlyaWdodCAoQykgUGF1bCBKb2huc3RvbiAxOTk5IC0gMjAwOVxuICogT3RoZXIgY29udHJpYnV0b3JzOiBHcmVnIEhvbHQsIEFuZHJldyBLZXBlcnQsIFlkbmFyLCBMb3N0aW5ldFxuICogRGlzdHJpYnV0ZWQgdW5kZXIgdGhlIEJTRCBMaWNlbnNlXG4gKiBTZWUgaHR0cDovL3BhamhvbWUub3JnLnVrL2NyeXB0L21kNSBmb3IgbW9yZSBpbmZvLlxuICovXG5mdW5jdGlvbiBtZDUoYnl0ZXMpIHtcbiAgaWYgKHR5cGVvZiBieXRlcyA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25zdCBtc2cgPSB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoYnl0ZXMpKTsgLy8gVVRGOCBlc2NhcGVcblxuICAgIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkobXNnLmxlbmd0aCk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1zZy5sZW5ndGg7ICsraSkge1xuICAgICAgYnl0ZXNbaV0gPSBtc2cuY2hhckNvZGVBdChpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbWQ1VG9IZXhFbmNvZGVkQXJyYXkod29yZHNUb01kNShieXRlc1RvV29yZHMoYnl0ZXMpLCBieXRlcy5sZW5ndGggKiA4KSk7XG59XG4vKlxuICogQ29udmVydCBhbiBhcnJheSBvZiBsaXR0bGUtZW5kaWFuIHdvcmRzIHRvIGFuIGFycmF5IG9mIGJ5dGVzXG4gKi9cblxuXG5mdW5jdGlvbiBtZDVUb0hleEVuY29kZWRBcnJheShpbnB1dCkge1xuICBjb25zdCBvdXRwdXQgPSBbXTtcbiAgY29uc3QgbGVuZ3RoMzIgPSBpbnB1dC5sZW5ndGggKiAzMjtcbiAgY29uc3QgaGV4VGFiID0gJzAxMjM0NTY3ODlhYmNkZWYnO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoMzI7IGkgKz0gOCkge1xuICAgIGNvbnN0IHggPSBpbnB1dFtpID4+IDVdID4+PiBpICUgMzIgJiAweGZmO1xuICAgIGNvbnN0IGhleCA9IHBhcnNlSW50KGhleFRhYi5jaGFyQXQoeCA+Pj4gNCAmIDB4MGYpICsgaGV4VGFiLmNoYXJBdCh4ICYgMHgwZiksIDE2KTtcbiAgICBvdXRwdXQucHVzaChoZXgpO1xuICB9XG5cbiAgcmV0dXJuIG91dHB1dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlIG91dHB1dCBsZW5ndGggd2l0aCBwYWRkaW5nIGFuZCBiaXQgbGVuZ3RoXG4gKi9cblxuXG5mdW5jdGlvbiBnZXRPdXRwdXRMZW5ndGgoaW5wdXRMZW5ndGg4KSB7XG4gIHJldHVybiAoaW5wdXRMZW5ndGg4ICsgNjQgPj4+IDkgPDwgNCkgKyAxNCArIDE7XG59XG4vKlxuICogQ2FsY3VsYXRlIHRoZSBNRDUgb2YgYW4gYXJyYXkgb2YgbGl0dGxlLWVuZGlhbiB3b3JkcywgYW5kIGEgYml0IGxlbmd0aC5cbiAqL1xuXG5cbmZ1bmN0aW9uIHdvcmRzVG9NZDUoeCwgbGVuKSB7XG4gIC8qIGFwcGVuZCBwYWRkaW5nICovXG4gIHhbbGVuID4+IDVdIHw9IDB4ODAgPDwgbGVuICUgMzI7XG4gIHhbZ2V0T3V0cHV0TGVuZ3RoKGxlbikgLSAxXSA9IGxlbjtcbiAgbGV0IGEgPSAxNzMyNTg0MTkzO1xuICBsZXQgYiA9IC0yNzE3MzM4Nzk7XG4gIGxldCBjID0gLTE3MzI1ODQxOTQ7XG4gIGxldCBkID0gMjcxNzMzODc4O1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkgKz0gMTYpIHtcbiAgICBjb25zdCBvbGRhID0gYTtcbiAgICBjb25zdCBvbGRiID0gYjtcbiAgICBjb25zdCBvbGRjID0gYztcbiAgICBjb25zdCBvbGRkID0gZDtcbiAgICBhID0gbWQ1ZmYoYSwgYiwgYywgZCwgeFtpXSwgNywgLTY4MDg3NjkzNik7XG4gICAgZCA9IG1kNWZmKGQsIGEsIGIsIGMsIHhbaSArIDFdLCAxMiwgLTM4OTU2NDU4Nik7XG4gICAgYyA9IG1kNWZmKGMsIGQsIGEsIGIsIHhbaSArIDJdLCAxNywgNjA2MTA1ODE5KTtcbiAgICBiID0gbWQ1ZmYoYiwgYywgZCwgYSwgeFtpICsgM10sIDIyLCAtMTA0NDUyNTMzMCk7XG4gICAgYSA9IG1kNWZmKGEsIGIsIGMsIGQsIHhbaSArIDRdLCA3LCAtMTc2NDE4ODk3KTtcbiAgICBkID0gbWQ1ZmYoZCwgYSwgYiwgYywgeFtpICsgNV0sIDEyLCAxMjAwMDgwNDI2KTtcbiAgICBjID0gbWQ1ZmYoYywgZCwgYSwgYiwgeFtpICsgNl0sIDE3LCAtMTQ3MzIzMTM0MSk7XG4gICAgYiA9IG1kNWZmKGIsIGMsIGQsIGEsIHhbaSArIDddLCAyMiwgLTQ1NzA1OTgzKTtcbiAgICBhID0gbWQ1ZmYoYSwgYiwgYywgZCwgeFtpICsgOF0sIDcsIDE3NzAwMzU0MTYpO1xuICAgIGQgPSBtZDVmZihkLCBhLCBiLCBjLCB4W2kgKyA5XSwgMTIsIC0xOTU4NDE0NDE3KTtcbiAgICBjID0gbWQ1ZmYoYywgZCwgYSwgYiwgeFtpICsgMTBdLCAxNywgLTQyMDYzKTtcbiAgICBiID0gbWQ1ZmYoYiwgYywgZCwgYSwgeFtpICsgMTFdLCAyMiwgLTE5OTA0MDQxNjIpO1xuICAgIGEgPSBtZDVmZihhLCBiLCBjLCBkLCB4W2kgKyAxMl0sIDcsIDE4MDQ2MDM2ODIpO1xuICAgIGQgPSBtZDVmZihkLCBhLCBiLCBjLCB4W2kgKyAxM10sIDEyLCAtNDAzNDExMDEpO1xuICAgIGMgPSBtZDVmZihjLCBkLCBhLCBiLCB4W2kgKyAxNF0sIDE3LCAtMTUwMjAwMjI5MCk7XG4gICAgYiA9IG1kNWZmKGIsIGMsIGQsIGEsIHhbaSArIDE1XSwgMjIsIDEyMzY1MzUzMjkpO1xuICAgIGEgPSBtZDVnZyhhLCBiLCBjLCBkLCB4W2kgKyAxXSwgNSwgLTE2NTc5NjUxMCk7XG4gICAgZCA9IG1kNWdnKGQsIGEsIGIsIGMsIHhbaSArIDZdLCA5LCAtMTA2OTUwMTYzMik7XG4gICAgYyA9IG1kNWdnKGMsIGQsIGEsIGIsIHhbaSArIDExXSwgMTQsIDY0MzcxNzcxMyk7XG4gICAgYiA9IG1kNWdnKGIsIGMsIGQsIGEsIHhbaV0sIDIwLCAtMzczODk3MzAyKTtcbiAgICBhID0gbWQ1Z2coYSwgYiwgYywgZCwgeFtpICsgNV0sIDUsIC03MDE1NTg2OTEpO1xuICAgIGQgPSBtZDVnZyhkLCBhLCBiLCBjLCB4W2kgKyAxMF0sIDksIDM4MDE2MDgzKTtcbiAgICBjID0gbWQ1Z2coYywgZCwgYSwgYiwgeFtpICsgMTVdLCAxNCwgLTY2MDQ3ODMzNSk7XG4gICAgYiA9IG1kNWdnKGIsIGMsIGQsIGEsIHhbaSArIDRdLCAyMCwgLTQwNTUzNzg0OCk7XG4gICAgYSA9IG1kNWdnKGEsIGIsIGMsIGQsIHhbaSArIDldLCA1LCA1Njg0NDY0MzgpO1xuICAgIGQgPSBtZDVnZyhkLCBhLCBiLCBjLCB4W2kgKyAxNF0sIDksIC0xMDE5ODAzNjkwKTtcbiAgICBjID0gbWQ1Z2coYywgZCwgYSwgYiwgeFtpICsgM10sIDE0LCAtMTg3MzYzOTYxKTtcbiAgICBiID0gbWQ1Z2coYiwgYywgZCwgYSwgeFtpICsgOF0sIDIwLCAxMTYzNTMxNTAxKTtcbiAgICBhID0gbWQ1Z2coYSwgYiwgYywgZCwgeFtpICsgMTNdLCA1LCAtMTQ0NDY4MTQ2Nyk7XG4gICAgZCA9IG1kNWdnKGQsIGEsIGIsIGMsIHhbaSArIDJdLCA5LCAtNTE0MDM3ODQpO1xuICAgIGMgPSBtZDVnZyhjLCBkLCBhLCBiLCB4W2kgKyA3XSwgMTQsIDE3MzUzMjg0NzMpO1xuICAgIGIgPSBtZDVnZyhiLCBjLCBkLCBhLCB4W2kgKyAxMl0sIDIwLCAtMTkyNjYwNzczNCk7XG4gICAgYSA9IG1kNWhoKGEsIGIsIGMsIGQsIHhbaSArIDVdLCA0LCAtMzc4NTU4KTtcbiAgICBkID0gbWQ1aGgoZCwgYSwgYiwgYywgeFtpICsgOF0sIDExLCAtMjAyMjU3NDQ2Myk7XG4gICAgYyA9IG1kNWhoKGMsIGQsIGEsIGIsIHhbaSArIDExXSwgMTYsIDE4MzkwMzA1NjIpO1xuICAgIGIgPSBtZDVoaChiLCBjLCBkLCBhLCB4W2kgKyAxNF0sIDIzLCAtMzUzMDk1NTYpO1xuICAgIGEgPSBtZDVoaChhLCBiLCBjLCBkLCB4W2kgKyAxXSwgNCwgLTE1MzA5OTIwNjApO1xuICAgIGQgPSBtZDVoaChkLCBhLCBiLCBjLCB4W2kgKyA0XSwgMTEsIDEyNzI4OTMzNTMpO1xuICAgIGMgPSBtZDVoaChjLCBkLCBhLCBiLCB4W2kgKyA3XSwgMTYsIC0xNTU0OTc2MzIpO1xuICAgIGIgPSBtZDVoaChiLCBjLCBkLCBhLCB4W2kgKyAxMF0sIDIzLCAtMTA5NDczMDY0MCk7XG4gICAgYSA9IG1kNWhoKGEsIGIsIGMsIGQsIHhbaSArIDEzXSwgNCwgNjgxMjc5MTc0KTtcbiAgICBkID0gbWQ1aGgoZCwgYSwgYiwgYywgeFtpXSwgMTEsIC0zNTg1MzcyMjIpO1xuICAgIGMgPSBtZDVoaChjLCBkLCBhLCBiLCB4W2kgKyAzXSwgMTYsIC03MjI1MjE5NzkpO1xuICAgIGIgPSBtZDVoaChiLCBjLCBkLCBhLCB4W2kgKyA2XSwgMjMsIDc2MDI5MTg5KTtcbiAgICBhID0gbWQ1aGgoYSwgYiwgYywgZCwgeFtpICsgOV0sIDQsIC02NDAzNjQ0ODcpO1xuICAgIGQgPSBtZDVoaChkLCBhLCBiLCBjLCB4W2kgKyAxMl0sIDExLCAtNDIxODE1ODM1KTtcbiAgICBjID0gbWQ1aGgoYywgZCwgYSwgYiwgeFtpICsgMTVdLCAxNiwgNTMwNzQyNTIwKTtcbiAgICBiID0gbWQ1aGgoYiwgYywgZCwgYSwgeFtpICsgMl0sIDIzLCAtOTk1MzM4NjUxKTtcbiAgICBhID0gbWQ1aWkoYSwgYiwgYywgZCwgeFtpXSwgNiwgLTE5ODYzMDg0NCk7XG4gICAgZCA9IG1kNWlpKGQsIGEsIGIsIGMsIHhbaSArIDddLCAxMCwgMTEyNjg5MTQxNSk7XG4gICAgYyA9IG1kNWlpKGMsIGQsIGEsIGIsIHhbaSArIDE0XSwgMTUsIC0xNDE2MzU0OTA1KTtcbiAgICBiID0gbWQ1aWkoYiwgYywgZCwgYSwgeFtpICsgNV0sIDIxLCAtNTc0MzQwNTUpO1xuICAgIGEgPSBtZDVpaShhLCBiLCBjLCBkLCB4W2kgKyAxMl0sIDYsIDE3MDA0ODU1NzEpO1xuICAgIGQgPSBtZDVpaShkLCBhLCBiLCBjLCB4W2kgKyAzXSwgMTAsIC0xODk0OTg2NjA2KTtcbiAgICBjID0gbWQ1aWkoYywgZCwgYSwgYiwgeFtpICsgMTBdLCAxNSwgLTEwNTE1MjMpO1xuICAgIGIgPSBtZDVpaShiLCBjLCBkLCBhLCB4W2kgKyAxXSwgMjEsIC0yMDU0OTIyNzk5KTtcbiAgICBhID0gbWQ1aWkoYSwgYiwgYywgZCwgeFtpICsgOF0sIDYsIDE4NzMzMTMzNTkpO1xuICAgIGQgPSBtZDVpaShkLCBhLCBiLCBjLCB4W2kgKyAxNV0sIDEwLCAtMzA2MTE3NDQpO1xuICAgIGMgPSBtZDVpaShjLCBkLCBhLCBiLCB4W2kgKyA2XSwgMTUsIC0xNTYwMTk4MzgwKTtcbiAgICBiID0gbWQ1aWkoYiwgYywgZCwgYSwgeFtpICsgMTNdLCAyMSwgMTMwOTE1MTY0OSk7XG4gICAgYSA9IG1kNWlpKGEsIGIsIGMsIGQsIHhbaSArIDRdLCA2LCAtMTQ1NTIzMDcwKTtcbiAgICBkID0gbWQ1aWkoZCwgYSwgYiwgYywgeFtpICsgMTFdLCAxMCwgLTExMjAyMTAzNzkpO1xuICAgIGMgPSBtZDVpaShjLCBkLCBhLCBiLCB4W2kgKyAyXSwgMTUsIDcxODc4NzI1OSk7XG4gICAgYiA9IG1kNWlpKGIsIGMsIGQsIGEsIHhbaSArIDldLCAyMSwgLTM0MzQ4NTU1MSk7XG4gICAgYSA9IHNhZmVBZGQoYSwgb2xkYSk7XG4gICAgYiA9IHNhZmVBZGQoYiwgb2xkYik7XG4gICAgYyA9IHNhZmVBZGQoYywgb2xkYyk7XG4gICAgZCA9IHNhZmVBZGQoZCwgb2xkZCk7XG4gIH1cblxuICByZXR1cm4gW2EsIGIsIGMsIGRdO1xufVxuLypcbiAqIENvbnZlcnQgYW4gYXJyYXkgYnl0ZXMgdG8gYW4gYXJyYXkgb2YgbGl0dGxlLWVuZGlhbiB3b3Jkc1xuICogQ2hhcmFjdGVycyA+MjU1IGhhdmUgdGhlaXIgaGlnaC1ieXRlIHNpbGVudGx5IGlnbm9yZWQuXG4gKi9cblxuXG5mdW5jdGlvbiBieXRlc1RvV29yZHMoaW5wdXQpIHtcbiAgaWYgKGlucHV0Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGNvbnN0IGxlbmd0aDggPSBpbnB1dC5sZW5ndGggKiA4O1xuICBjb25zdCBvdXRwdXQgPSBuZXcgVWludDMyQXJyYXkoZ2V0T3V0cHV0TGVuZ3RoKGxlbmd0aDgpKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDg7IGkgKz0gOCkge1xuICAgIG91dHB1dFtpID4+IDVdIHw9IChpbnB1dFtpIC8gOF0gJiAweGZmKSA8PCBpICUgMzI7XG4gIH1cblxuICByZXR1cm4gb3V0cHV0O1xufVxuLypcbiAqIEFkZCBpbnRlZ2Vycywgd3JhcHBpbmcgYXQgMl4zMi4gVGhpcyB1c2VzIDE2LWJpdCBvcGVyYXRpb25zIGludGVybmFsbHlcbiAqIHRvIHdvcmsgYXJvdW5kIGJ1Z3MgaW4gc29tZSBKUyBpbnRlcnByZXRlcnMuXG4gKi9cblxuXG5mdW5jdGlvbiBzYWZlQWRkKHgsIHkpIHtcbiAgY29uc3QgbHN3ID0gKHggJiAweGZmZmYpICsgKHkgJiAweGZmZmYpO1xuICBjb25zdCBtc3cgPSAoeCA+PiAxNikgKyAoeSA+PiAxNikgKyAobHN3ID4+IDE2KTtcbiAgcmV0dXJuIG1zdyA8PCAxNiB8IGxzdyAmIDB4ZmZmZjtcbn1cbi8qXG4gKiBCaXR3aXNlIHJvdGF0ZSBhIDMyLWJpdCBudW1iZXIgdG8gdGhlIGxlZnQuXG4gKi9cblxuXG5mdW5jdGlvbiBiaXRSb3RhdGVMZWZ0KG51bSwgY250KSB7XG4gIHJldHVybiBudW0gPDwgY250IHwgbnVtID4+PiAzMiAtIGNudDtcbn1cbi8qXG4gKiBUaGVzZSBmdW5jdGlvbnMgaW1wbGVtZW50IHRoZSBmb3VyIGJhc2ljIG9wZXJhdGlvbnMgdGhlIGFsZ29yaXRobSB1c2VzLlxuICovXG5cblxuZnVuY3Rpb24gbWQ1Y21uKHEsIGEsIGIsIHgsIHMsIHQpIHtcbiAgcmV0dXJuIHNhZmVBZGQoYml0Um90YXRlTGVmdChzYWZlQWRkKHNhZmVBZGQoYSwgcSksIHNhZmVBZGQoeCwgdCkpLCBzKSwgYik7XG59XG5cbmZ1bmN0aW9uIG1kNWZmKGEsIGIsIGMsIGQsIHgsIHMsIHQpIHtcbiAgcmV0dXJuIG1kNWNtbihiICYgYyB8IH5iICYgZCwgYSwgYiwgeCwgcywgdCk7XG59XG5cbmZ1bmN0aW9uIG1kNWdnKGEsIGIsIGMsIGQsIHgsIHMsIHQpIHtcbiAgcmV0dXJuIG1kNWNtbihiICYgZCB8IGMgJiB+ZCwgYSwgYiwgeCwgcywgdCk7XG59XG5cbmZ1bmN0aW9uIG1kNWhoKGEsIGIsIGMsIGQsIHgsIHMsIHQpIHtcbiAgcmV0dXJuIG1kNWNtbihiIF4gYyBeIGQsIGEsIGIsIHgsIHMsIHQpO1xufVxuXG5mdW5jdGlvbiBtZDVpaShhLCBiLCBjLCBkLCB4LCBzLCB0KSB7XG4gIHJldHVybiBtZDVjbW4oYyBeIChiIHwgfmQpLCBhLCBiLCB4LCBzLCB0KTtcbn1cblxudmFyIF9kZWZhdWx0ID0gbWQ1O1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5jb25zdCByYW5kb21VVUlEID0gdHlwZW9mIGNyeXB0byAhPT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLnJhbmRvbVVVSUQgJiYgY3J5cHRvLnJhbmRvbVVVSUQuYmluZChjcnlwdG8pO1xudmFyIF9kZWZhdWx0ID0ge1xuICByYW5kb21VVUlEXG59O1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG52YXIgX2RlZmF1bHQgPSAnMDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwJztcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgX3ZhbGlkYXRlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi92YWxpZGF0ZS5qc1wiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIHBhcnNlKHV1aWQpIHtcbiAgaWYgKCEoMCwgX3ZhbGlkYXRlLmRlZmF1bHQpKHV1aWQpKSB7XG4gICAgdGhyb3cgVHlwZUVycm9yKCdJbnZhbGlkIFVVSUQnKTtcbiAgfVxuXG4gIGxldCB2O1xuICBjb25zdCBhcnIgPSBuZXcgVWludDhBcnJheSgxNik7IC8vIFBhcnNlICMjIyMjIyMjLS4uLi4tLi4uLi0uLi4uLS4uLi4uLi4uLi4uLlxuXG4gIGFyclswXSA9ICh2ID0gcGFyc2VJbnQodXVpZC5zbGljZSgwLCA4KSwgMTYpKSA+Pj4gMjQ7XG4gIGFyclsxXSA9IHYgPj4+IDE2ICYgMHhmZjtcbiAgYXJyWzJdID0gdiA+Pj4gOCAmIDB4ZmY7XG4gIGFyclszXSA9IHYgJiAweGZmOyAvLyBQYXJzZSAuLi4uLi4uLi0jIyMjLS4uLi4tLi4uLi0uLi4uLi4uLi4uLi5cblxuICBhcnJbNF0gPSAodiA9IHBhcnNlSW50KHV1aWQuc2xpY2UoOSwgMTMpLCAxNikpID4+PiA4O1xuICBhcnJbNV0gPSB2ICYgMHhmZjsgLy8gUGFyc2UgLi4uLi4uLi4tLi4uLi0jIyMjLS4uLi4tLi4uLi4uLi4uLi4uXG5cbiAgYXJyWzZdID0gKHYgPSBwYXJzZUludCh1dWlkLnNsaWNlKDE0LCAxOCksIDE2KSkgPj4+IDg7XG4gIGFycls3XSA9IHYgJiAweGZmOyAvLyBQYXJzZSAuLi4uLi4uLi0uLi4uLS4uLi4tIyMjIy0uLi4uLi4uLi4uLi5cblxuICBhcnJbOF0gPSAodiA9IHBhcnNlSW50KHV1aWQuc2xpY2UoMTksIDIzKSwgMTYpKSA+Pj4gODtcbiAgYXJyWzldID0gdiAmIDB4ZmY7IC8vIFBhcnNlIC4uLi4uLi4uLS4uLi4tLi4uLi0uLi4uLSMjIyMjIyMjIyMjI1xuICAvLyAoVXNlIFwiL1wiIHRvIGF2b2lkIDMyLWJpdCB0cnVuY2F0aW9uIHdoZW4gYml0LXNoaWZ0aW5nIGhpZ2gtb3JkZXIgYnl0ZXMpXG5cbiAgYXJyWzEwXSA9ICh2ID0gcGFyc2VJbnQodXVpZC5zbGljZSgyNCwgMzYpLCAxNikpIC8gMHgxMDAwMDAwMDAwMCAmIDB4ZmY7XG4gIGFyclsxMV0gPSB2IC8gMHgxMDAwMDAwMDAgJiAweGZmO1xuICBhcnJbMTJdID0gdiA+Pj4gMjQgJiAweGZmO1xuICBhcnJbMTNdID0gdiA+Pj4gMTYgJiAweGZmO1xuICBhcnJbMTRdID0gdiA+Pj4gOCAmIDB4ZmY7XG4gIGFyclsxNV0gPSB2ICYgMHhmZjtcbiAgcmV0dXJuIGFycjtcbn1cblxudmFyIF9kZWZhdWx0ID0gcGFyc2U7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbnZhciBfZGVmYXVsdCA9IC9eKD86WzAtOWEtZl17OH0tWzAtOWEtZl17NH0tWzEtNV1bMC05YS1mXXszfS1bODlhYl1bMC05YS1mXXszfS1bMC05YS1mXXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwKSQvaTtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gcm5nO1xuLy8gVW5pcXVlIElEIGNyZWF0aW9uIHJlcXVpcmVzIGEgaGlnaCBxdWFsaXR5IHJhbmRvbSAjIGdlbmVyYXRvci4gSW4gdGhlIGJyb3dzZXIgd2UgdGhlcmVmb3JlXG4vLyByZXF1aXJlIHRoZSBjcnlwdG8gQVBJIGFuZCBkbyBub3Qgc3VwcG9ydCBidWlsdC1pbiBmYWxsYmFjayB0byBsb3dlciBxdWFsaXR5IHJhbmRvbSBudW1iZXJcbi8vIGdlbmVyYXRvcnMgKGxpa2UgTWF0aC5yYW5kb20oKSkuXG5sZXQgZ2V0UmFuZG9tVmFsdWVzO1xuY29uc3Qgcm5kczggPSBuZXcgVWludDhBcnJheSgxNik7XG5cbmZ1bmN0aW9uIHJuZygpIHtcbiAgLy8gbGF6eSBsb2FkIHNvIHRoYXQgZW52aXJvbm1lbnRzIHRoYXQgbmVlZCB0byBwb2x5ZmlsbCBoYXZlIGEgY2hhbmNlIHRvIGRvIHNvXG4gIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgLy8gZ2V0UmFuZG9tVmFsdWVzIG5lZWRzIHRvIGJlIGludm9rZWQgaW4gYSBjb250ZXh0IHdoZXJlIFwidGhpc1wiIGlzIGEgQ3J5cHRvIGltcGxlbWVudGF0aW9uLlxuICAgIGdldFJhbmRvbVZhbHVlcyA9IHR5cGVvZiBjcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKGNyeXB0byk7XG5cbiAgICBpZiAoIWdldFJhbmRvbVZhbHVlcykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKCkgbm90IHN1cHBvcnRlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCNnZXRyYW5kb212YWx1ZXMtbm90LXN1cHBvcnRlZCcpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBnZXRSYW5kb21WYWx1ZXMocm5kczgpO1xufSIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG4vLyBBZGFwdGVkIGZyb20gQ2hyaXMgVmVuZXNzJyBTSEExIGNvZGUgYXRcbi8vIGh0dHA6Ly93d3cubW92YWJsZS10eXBlLmNvLnVrL3NjcmlwdHMvc2hhMS5odG1sXG5mdW5jdGlvbiBmKHMsIHgsIHksIHopIHtcbiAgc3dpdGNoIChzKSB7XG4gICAgY2FzZSAwOlxuICAgICAgcmV0dXJuIHggJiB5IF4gfnggJiB6O1xuXG4gICAgY2FzZSAxOlxuICAgICAgcmV0dXJuIHggXiB5IF4gejtcblxuICAgIGNhc2UgMjpcbiAgICAgIHJldHVybiB4ICYgeSBeIHggJiB6IF4geSAmIHo7XG5cbiAgICBjYXNlIDM6XG4gICAgICByZXR1cm4geCBeIHkgXiB6O1xuICB9XG59XG5cbmZ1bmN0aW9uIFJPVEwoeCwgbikge1xuICByZXR1cm4geCA8PCBuIHwgeCA+Pj4gMzIgLSBuO1xufVxuXG5mdW5jdGlvbiBzaGExKGJ5dGVzKSB7XG4gIGNvbnN0IEsgPSBbMHg1YTgyNzk5OSwgMHg2ZWQ5ZWJhMSwgMHg4ZjFiYmNkYywgMHhjYTYyYzFkNl07XG4gIGNvbnN0IEggPSBbMHg2NzQ1MjMwMSwgMHhlZmNkYWI4OSwgMHg5OGJhZGNmZSwgMHgxMDMyNTQ3NiwgMHhjM2QyZTFmMF07XG5cbiAgaWYgKHR5cGVvZiBieXRlcyA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25zdCBtc2cgPSB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoYnl0ZXMpKTsgLy8gVVRGOCBlc2NhcGVcblxuICAgIGJ5dGVzID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1zZy5sZW5ndGg7ICsraSkge1xuICAgICAgYnl0ZXMucHVzaChtc2cuY2hhckNvZGVBdChpKSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KGJ5dGVzKSkge1xuICAgIC8vIENvbnZlcnQgQXJyYXktbGlrZSB0byBBcnJheVxuICAgIGJ5dGVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYnl0ZXMpO1xuICB9XG5cbiAgYnl0ZXMucHVzaCgweDgwKTtcbiAgY29uc3QgbCA9IGJ5dGVzLmxlbmd0aCAvIDQgKyAyO1xuICBjb25zdCBOID0gTWF0aC5jZWlsKGwgLyAxNik7XG4gIGNvbnN0IE0gPSBuZXcgQXJyYXkoTik7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBOOyArK2kpIHtcbiAgICBjb25zdCBhcnIgPSBuZXcgVWludDMyQXJyYXkoMTYpO1xuXG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCAxNjsgKytqKSB7XG4gICAgICBhcnJbal0gPSBieXRlc1tpICogNjQgKyBqICogNF0gPDwgMjQgfCBieXRlc1tpICogNjQgKyBqICogNCArIDFdIDw8IDE2IHwgYnl0ZXNbaSAqIDY0ICsgaiAqIDQgKyAyXSA8PCA4IHwgYnl0ZXNbaSAqIDY0ICsgaiAqIDQgKyAzXTtcbiAgICB9XG5cbiAgICBNW2ldID0gYXJyO1xuICB9XG5cbiAgTVtOIC0gMV1bMTRdID0gKGJ5dGVzLmxlbmd0aCAtIDEpICogOCAvIE1hdGgucG93KDIsIDMyKTtcbiAgTVtOIC0gMV1bMTRdID0gTWF0aC5mbG9vcihNW04gLSAxXVsxNF0pO1xuICBNW04gLSAxXVsxNV0gPSAoYnl0ZXMubGVuZ3RoIC0gMSkgKiA4ICYgMHhmZmZmZmZmZjtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IE47ICsraSkge1xuICAgIGNvbnN0IFcgPSBuZXcgVWludDMyQXJyYXkoODApO1xuXG4gICAgZm9yIChsZXQgdCA9IDA7IHQgPCAxNjsgKyt0KSB7XG4gICAgICBXW3RdID0gTVtpXVt0XTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCB0ID0gMTY7IHQgPCA4MDsgKyt0KSB7XG4gICAgICBXW3RdID0gUk9UTChXW3QgLSAzXSBeIFdbdCAtIDhdIF4gV1t0IC0gMTRdIF4gV1t0IC0gMTZdLCAxKTtcbiAgICB9XG5cbiAgICBsZXQgYSA9IEhbMF07XG4gICAgbGV0IGIgPSBIWzFdO1xuICAgIGxldCBjID0gSFsyXTtcbiAgICBsZXQgZCA9IEhbM107XG4gICAgbGV0IGUgPSBIWzRdO1xuXG4gICAgZm9yIChsZXQgdCA9IDA7IHQgPCA4MDsgKyt0KSB7XG4gICAgICBjb25zdCBzID0gTWF0aC5mbG9vcih0IC8gMjApO1xuICAgICAgY29uc3QgVCA9IFJPVEwoYSwgNSkgKyBmKHMsIGIsIGMsIGQpICsgZSArIEtbc10gKyBXW3RdID4+PiAwO1xuICAgICAgZSA9IGQ7XG4gICAgICBkID0gYztcbiAgICAgIGMgPSBST1RMKGIsIDMwKSA+Pj4gMDtcbiAgICAgIGIgPSBhO1xuICAgICAgYSA9IFQ7XG4gICAgfVxuXG4gICAgSFswXSA9IEhbMF0gKyBhID4+PiAwO1xuICAgIEhbMV0gPSBIWzFdICsgYiA+Pj4gMDtcbiAgICBIWzJdID0gSFsyXSArIGMgPj4+IDA7XG4gICAgSFszXSA9IEhbM10gKyBkID4+PiAwO1xuICAgIEhbNF0gPSBIWzRdICsgZSA+Pj4gMDtcbiAgfVxuXG4gIHJldHVybiBbSFswXSA+PiAyNCAmIDB4ZmYsIEhbMF0gPj4gMTYgJiAweGZmLCBIWzBdID4+IDggJiAweGZmLCBIWzBdICYgMHhmZiwgSFsxXSA+PiAyNCAmIDB4ZmYsIEhbMV0gPj4gMTYgJiAweGZmLCBIWzFdID4+IDggJiAweGZmLCBIWzFdICYgMHhmZiwgSFsyXSA+PiAyNCAmIDB4ZmYsIEhbMl0gPj4gMTYgJiAweGZmLCBIWzJdID4+IDggJiAweGZmLCBIWzJdICYgMHhmZiwgSFszXSA+PiAyNCAmIDB4ZmYsIEhbM10gPj4gMTYgJiAweGZmLCBIWzNdID4+IDggJiAweGZmLCBIWzNdICYgMHhmZiwgSFs0XSA+PiAyNCAmIDB4ZmYsIEhbNF0gPj4gMTYgJiAweGZmLCBIWzRdID4+IDggJiAweGZmLCBIWzRdICYgMHhmZl07XG59XG5cbnZhciBfZGVmYXVsdCA9IHNoYTE7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbmV4cG9ydHMudW5zYWZlU3RyaW5naWZ5ID0gdW5zYWZlU3RyaW5naWZ5O1xuXG52YXIgX3ZhbGlkYXRlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi92YWxpZGF0ZS5qc1wiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKlxuICogQ29udmVydCBhcnJheSBvZiAxNiBieXRlIHZhbHVlcyB0byBVVUlEIHN0cmluZyBmb3JtYXQgb2YgdGhlIGZvcm06XG4gKiBYWFhYWFhYWC1YWFhYLVhYWFgtWFhYWC1YWFhYWFhYWFhYWFhcbiAqL1xuY29uc3QgYnl0ZVRvSGV4ID0gW107XG5cbmZvciAobGV0IGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgYnl0ZVRvSGV4LnB1c2goKGkgKyAweDEwMCkudG9TdHJpbmcoMTYpLnNsaWNlKDEpKTtcbn1cblxuZnVuY3Rpb24gdW5zYWZlU3RyaW5naWZ5KGFyciwgb2Zmc2V0ID0gMCkge1xuICAvLyBOb3RlOiBCZSBjYXJlZnVsIGVkaXRpbmcgdGhpcyBjb2RlISAgSXQncyBiZWVuIHR1bmVkIGZvciBwZXJmb3JtYW5jZVxuICAvLyBhbmQgd29ya3MgaW4gd2F5cyB5b3UgbWF5IG5vdCBleHBlY3QuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQvcHVsbC80MzRcbiAgcmV0dXJuIChieXRlVG9IZXhbYXJyW29mZnNldCArIDBdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMV1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDNdXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA1XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDZdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgN11dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA4XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDldXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTBdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTJdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTNdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTVdXSkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5KGFyciwgb2Zmc2V0ID0gMCkge1xuICBjb25zdCB1dWlkID0gdW5zYWZlU3RyaW5naWZ5KGFyciwgb2Zmc2V0KTsgLy8gQ29uc2lzdGVuY3kgY2hlY2sgZm9yIHZhbGlkIFVVSUQuICBJZiB0aGlzIHRocm93cywgaXQncyBsaWtlbHkgZHVlIHRvIG9uZVxuICAvLyBvZiB0aGUgZm9sbG93aW5nOlxuICAvLyAtIE9uZSBvciBtb3JlIGlucHV0IGFycmF5IHZhbHVlcyBkb24ndCBtYXAgdG8gYSBoZXggb2N0ZXQgKGxlYWRpbmcgdG9cbiAgLy8gXCJ1bmRlZmluZWRcIiBpbiB0aGUgdXVpZClcbiAgLy8gLSBJbnZhbGlkIGlucHV0IHZhbHVlcyBmb3IgdGhlIFJGQyBgdmVyc2lvbmAgb3IgYHZhcmlhbnRgIGZpZWxkc1xuXG4gIGlmICghKDAsIF92YWxpZGF0ZS5kZWZhdWx0KSh1dWlkKSkge1xuICAgIHRocm93IFR5cGVFcnJvcignU3RyaW5naWZpZWQgVVVJRCBpcyBpbnZhbGlkJyk7XG4gIH1cblxuICByZXR1cm4gdXVpZDtcbn1cblxudmFyIF9kZWZhdWx0ID0gc3RyaW5naWZ5O1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfcm5nID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9ybmcuanNcIikpO1xuXG52YXIgX3N0cmluZ2lmeSA9IHJlcXVpcmUoXCIuL3N0cmluZ2lmeS5qc1wiKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLy8gKipgdjEoKWAgLSBHZW5lcmF0ZSB0aW1lLWJhc2VkIFVVSUQqKlxuLy9cbi8vIEluc3BpcmVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9MaW9zSy9VVUlELmpzXG4vLyBhbmQgaHR0cDovL2RvY3MucHl0aG9uLm9yZy9saWJyYXJ5L3V1aWQuaHRtbFxubGV0IF9ub2RlSWQ7XG5cbmxldCBfY2xvY2tzZXE7IC8vIFByZXZpb3VzIHV1aWQgY3JlYXRpb24gdGltZVxuXG5cbmxldCBfbGFzdE1TZWNzID0gMDtcbmxldCBfbGFzdE5TZWNzID0gMDsgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCBmb3IgQVBJIGRldGFpbHNcblxuZnVuY3Rpb24gdjEob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgbGV0IGkgPSBidWYgJiYgb2Zmc2V0IHx8IDA7XG4gIGNvbnN0IGIgPSBidWYgfHwgbmV3IEFycmF5KDE2KTtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIGxldCBub2RlID0gb3B0aW9ucy5ub2RlIHx8IF9ub2RlSWQ7XG4gIGxldCBjbG9ja3NlcSA9IG9wdGlvbnMuY2xvY2tzZXEgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY2xvY2tzZXEgOiBfY2xvY2tzZXE7IC8vIG5vZGUgYW5kIGNsb2Nrc2VxIG5lZWQgdG8gYmUgaW5pdGlhbGl6ZWQgdG8gcmFuZG9tIHZhbHVlcyBpZiB0aGV5J3JlIG5vdFxuICAvLyBzcGVjaWZpZWQuICBXZSBkbyB0aGlzIGxhemlseSB0byBtaW5pbWl6ZSBpc3N1ZXMgcmVsYXRlZCB0byBpbnN1ZmZpY2llbnRcbiAgLy8gc3lzdGVtIGVudHJvcHkuICBTZWUgIzE4OVxuXG4gIGlmIChub2RlID09IG51bGwgfHwgY2xvY2tzZXEgPT0gbnVsbCkge1xuICAgIGNvbnN0IHNlZWRCeXRlcyA9IG9wdGlvbnMucmFuZG9tIHx8IChvcHRpb25zLnJuZyB8fCBfcm5nLmRlZmF1bHQpKCk7XG5cbiAgICBpZiAobm9kZSA9PSBudWxsKSB7XG4gICAgICAvLyBQZXIgNC41LCBjcmVhdGUgYW5kIDQ4LWJpdCBub2RlIGlkLCAoNDcgcmFuZG9tIGJpdHMgKyBtdWx0aWNhc3QgYml0ID0gMSlcbiAgICAgIG5vZGUgPSBfbm9kZUlkID0gW3NlZWRCeXRlc1swXSB8IDB4MDEsIHNlZWRCeXRlc1sxXSwgc2VlZEJ5dGVzWzJdLCBzZWVkQnl0ZXNbM10sIHNlZWRCeXRlc1s0XSwgc2VlZEJ5dGVzWzVdXTtcbiAgICB9XG5cbiAgICBpZiAoY2xvY2tzZXEgPT0gbnVsbCkge1xuICAgICAgLy8gUGVyIDQuMi4yLCByYW5kb21pemUgKDE0IGJpdCkgY2xvY2tzZXFcbiAgICAgIGNsb2Nrc2VxID0gX2Nsb2Nrc2VxID0gKHNlZWRCeXRlc1s2XSA8PCA4IHwgc2VlZEJ5dGVzWzddKSAmIDB4M2ZmZjtcbiAgICB9XG4gIH0gLy8gVVVJRCB0aW1lc3RhbXBzIGFyZSAxMDAgbmFuby1zZWNvbmQgdW5pdHMgc2luY2UgdGhlIEdyZWdvcmlhbiBlcG9jaCxcbiAgLy8gKDE1ODItMTAtMTUgMDA6MDApLiAgSlNOdW1iZXJzIGFyZW4ndCBwcmVjaXNlIGVub3VnaCBmb3IgdGhpcywgc29cbiAgLy8gdGltZSBpcyBoYW5kbGVkIGludGVybmFsbHkgYXMgJ21zZWNzJyAoaW50ZWdlciBtaWxsaXNlY29uZHMpIGFuZCAnbnNlY3MnXG4gIC8vICgxMDAtbmFub3NlY29uZHMgb2Zmc2V0IGZyb20gbXNlY3MpIHNpbmNlIHVuaXggZXBvY2gsIDE5NzAtMDEtMDEgMDA6MDAuXG5cblxuICBsZXQgbXNlY3MgPSBvcHRpb25zLm1zZWNzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1zZWNzIDogRGF0ZS5ub3coKTsgLy8gUGVyIDQuMi4xLjIsIHVzZSBjb3VudCBvZiB1dWlkJ3MgZ2VuZXJhdGVkIGR1cmluZyB0aGUgY3VycmVudCBjbG9ja1xuICAvLyBjeWNsZSB0byBzaW11bGF0ZSBoaWdoZXIgcmVzb2x1dGlvbiBjbG9ja1xuXG4gIGxldCBuc2VjcyA9IG9wdGlvbnMubnNlY3MgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubnNlY3MgOiBfbGFzdE5TZWNzICsgMTsgLy8gVGltZSBzaW5jZSBsYXN0IHV1aWQgY3JlYXRpb24gKGluIG1zZWNzKVxuXG4gIGNvbnN0IGR0ID0gbXNlY3MgLSBfbGFzdE1TZWNzICsgKG5zZWNzIC0gX2xhc3ROU2VjcykgLyAxMDAwMDsgLy8gUGVyIDQuMi4xLjIsIEJ1bXAgY2xvY2tzZXEgb24gY2xvY2sgcmVncmVzc2lvblxuXG4gIGlmIChkdCA8IDAgJiYgb3B0aW9ucy5jbG9ja3NlcSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgY2xvY2tzZXEgPSBjbG9ja3NlcSArIDEgJiAweDNmZmY7XG4gIH0gLy8gUmVzZXQgbnNlY3MgaWYgY2xvY2sgcmVncmVzc2VzIChuZXcgY2xvY2tzZXEpIG9yIHdlJ3ZlIG1vdmVkIG9udG8gYSBuZXdcbiAgLy8gdGltZSBpbnRlcnZhbFxuXG5cbiAgaWYgKChkdCA8IDAgfHwgbXNlY3MgPiBfbGFzdE1TZWNzKSAmJiBvcHRpb25zLm5zZWNzID09PSB1bmRlZmluZWQpIHtcbiAgICBuc2VjcyA9IDA7XG4gIH0gLy8gUGVyIDQuMi4xLjIgVGhyb3cgZXJyb3IgaWYgdG9vIG1hbnkgdXVpZHMgYXJlIHJlcXVlc3RlZFxuXG5cbiAgaWYgKG5zZWNzID49IDEwMDAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwidXVpZC52MSgpOiBDYW4ndCBjcmVhdGUgbW9yZSB0aGFuIDEwTSB1dWlkcy9zZWNcIik7XG4gIH1cblxuICBfbGFzdE1TZWNzID0gbXNlY3M7XG4gIF9sYXN0TlNlY3MgPSBuc2VjcztcbiAgX2Nsb2Nrc2VxID0gY2xvY2tzZXE7IC8vIFBlciA0LjEuNCAtIENvbnZlcnQgZnJvbSB1bml4IGVwb2NoIHRvIEdyZWdvcmlhbiBlcG9jaFxuXG4gIG1zZWNzICs9IDEyMjE5MjkyODAwMDAwOyAvLyBgdGltZV9sb3dgXG5cbiAgY29uc3QgdGwgPSAoKG1zZWNzICYgMHhmZmZmZmZmKSAqIDEwMDAwICsgbnNlY3MpICUgMHgxMDAwMDAwMDA7XG4gIGJbaSsrXSA9IHRsID4+PiAyNCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsID4+PiAxNiAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsID4+PiA4ICYgMHhmZjtcbiAgYltpKytdID0gdGwgJiAweGZmOyAvLyBgdGltZV9taWRgXG5cbiAgY29uc3QgdG1oID0gbXNlY3MgLyAweDEwMDAwMDAwMCAqIDEwMDAwICYgMHhmZmZmZmZmO1xuICBiW2krK10gPSB0bWggPj4+IDggJiAweGZmO1xuICBiW2krK10gPSB0bWggJiAweGZmOyAvLyBgdGltZV9oaWdoX2FuZF92ZXJzaW9uYFxuXG4gIGJbaSsrXSA9IHRtaCA+Pj4gMjQgJiAweGYgfCAweDEwOyAvLyBpbmNsdWRlIHZlcnNpb25cblxuICBiW2krK10gPSB0bWggPj4+IDE2ICYgMHhmZjsgLy8gYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgIChQZXIgNC4yLjIgLSBpbmNsdWRlIHZhcmlhbnQpXG5cbiAgYltpKytdID0gY2xvY2tzZXEgPj4+IDggfCAweDgwOyAvLyBgY2xvY2tfc2VxX2xvd2BcblxuICBiW2krK10gPSBjbG9ja3NlcSAmIDB4ZmY7IC8vIGBub2RlYFxuXG4gIGZvciAobGV0IG4gPSAwOyBuIDwgNjsgKytuKSB7XG4gICAgYltpICsgbl0gPSBub2RlW25dO1xuICB9XG5cbiAgcmV0dXJuIGJ1ZiB8fCAoMCwgX3N0cmluZ2lmeS51bnNhZmVTdHJpbmdpZnkpKGIpO1xufVxuXG52YXIgX2RlZmF1bHQgPSB2MTtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgX3YgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3YzNS5qc1wiKSk7XG5cbnZhciBfbWQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL21kNS5qc1wiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmNvbnN0IHYzID0gKDAsIF92LmRlZmF1bHQpKCd2MycsIDB4MzAsIF9tZC5kZWZhdWx0KTtcbnZhciBfZGVmYXVsdCA9IHYzO1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLlVSTCA9IGV4cG9ydHMuRE5TID0gdm9pZCAwO1xuZXhwb3J0cy5kZWZhdWx0ID0gdjM1O1xuXG52YXIgX3N0cmluZ2lmeSA9IHJlcXVpcmUoXCIuL3N0cmluZ2lmeS5qc1wiKTtcblxudmFyIF9wYXJzZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vcGFyc2UuanNcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBzdHJpbmdUb0J5dGVzKHN0cikge1xuICBzdHIgPSB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoc3RyKSk7IC8vIFVURjggZXNjYXBlXG5cbiAgY29uc3QgYnl0ZXMgPSBbXTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkge1xuICAgIGJ5dGVzLnB1c2goc3RyLmNoYXJDb2RlQXQoaSkpO1xuICB9XG5cbiAgcmV0dXJuIGJ5dGVzO1xufVxuXG5jb25zdCBETlMgPSAnNmJhN2I4MTAtOWRhZC0xMWQxLTgwYjQtMDBjMDRmZDQzMGM4JztcbmV4cG9ydHMuRE5TID0gRE5TO1xuY29uc3QgVVJMID0gJzZiYTdiODExLTlkYWQtMTFkMS04MGI0LTAwYzA0ZmQ0MzBjOCc7XG5leHBvcnRzLlVSTCA9IFVSTDtcblxuZnVuY3Rpb24gdjM1KG5hbWUsIHZlcnNpb24sIGhhc2hmdW5jKSB7XG4gIGZ1bmN0aW9uIGdlbmVyYXRlVVVJRCh2YWx1ZSwgbmFtZXNwYWNlLCBidWYsIG9mZnNldCkge1xuICAgIHZhciBfbmFtZXNwYWNlO1xuXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHZhbHVlID0gc3RyaW5nVG9CeXRlcyh2YWx1ZSk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBuYW1lc3BhY2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICBuYW1lc3BhY2UgPSAoMCwgX3BhcnNlLmRlZmF1bHQpKG5hbWVzcGFjZSk7XG4gICAgfVxuXG4gICAgaWYgKCgoX25hbWVzcGFjZSA9IG5hbWVzcGFjZSkgPT09IG51bGwgfHwgX25hbWVzcGFjZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX25hbWVzcGFjZS5sZW5ndGgpICE9PSAxNikge1xuICAgICAgdGhyb3cgVHlwZUVycm9yKCdOYW1lc3BhY2UgbXVzdCBiZSBhcnJheS1saWtlICgxNiBpdGVyYWJsZSBpbnRlZ2VyIHZhbHVlcywgMC0yNTUpJyk7XG4gICAgfSAvLyBDb21wdXRlIGhhc2ggb2YgbmFtZXNwYWNlIGFuZCB2YWx1ZSwgUGVyIDQuM1xuICAgIC8vIEZ1dHVyZTogVXNlIHNwcmVhZCBzeW50YXggd2hlbiBzdXBwb3J0ZWQgb24gYWxsIHBsYXRmb3JtcywgZS5nLiBgYnl0ZXMgPVxuICAgIC8vIGhhc2hmdW5jKFsuLi5uYW1lc3BhY2UsIC4uLiB2YWx1ZV0pYFxuXG5cbiAgICBsZXQgYnl0ZXMgPSBuZXcgVWludDhBcnJheSgxNiArIHZhbHVlLmxlbmd0aCk7XG4gICAgYnl0ZXMuc2V0KG5hbWVzcGFjZSk7XG4gICAgYnl0ZXMuc2V0KHZhbHVlLCBuYW1lc3BhY2UubGVuZ3RoKTtcbiAgICBieXRlcyA9IGhhc2hmdW5jKGJ5dGVzKTtcbiAgICBieXRlc1s2XSA9IGJ5dGVzWzZdICYgMHgwZiB8IHZlcnNpb247XG4gICAgYnl0ZXNbOF0gPSBieXRlc1s4XSAmIDB4M2YgfCAweDgwO1xuXG4gICAgaWYgKGJ1Zikge1xuICAgICAgb2Zmc2V0ID0gb2Zmc2V0IHx8IDA7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgICAgICBidWZbb2Zmc2V0ICsgaV0gPSBieXRlc1tpXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJ1ZjtcbiAgICB9XG5cbiAgICByZXR1cm4gKDAsIF9zdHJpbmdpZnkudW5zYWZlU3RyaW5naWZ5KShieXRlcyk7XG4gIH0gLy8gRnVuY3Rpb24jbmFtZSBpcyBub3Qgc2V0dGFibGUgb24gc29tZSBwbGF0Zm9ybXMgKCMyNzApXG5cblxuICB0cnkge1xuICAgIGdlbmVyYXRlVVVJRC5uYW1lID0gbmFtZTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVtcHR5XG4gIH0gY2F0Y2ggKGVycikge30gLy8gRm9yIENvbW1vbkpTIGRlZmF1bHQgZXhwb3J0IHN1cHBvcnRcblxuXG4gIGdlbmVyYXRlVVVJRC5ETlMgPSBETlM7XG4gIGdlbmVyYXRlVVVJRC5VUkwgPSBVUkw7XG4gIHJldHVybiBnZW5lcmF0ZVVVSUQ7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfbmF0aXZlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9uYXRpdmUuanNcIikpO1xuXG52YXIgX3JuZyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vcm5nLmpzXCIpKTtcblxudmFyIF9zdHJpbmdpZnkgPSByZXF1aXJlKFwiLi9zdHJpbmdpZnkuanNcIik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIHY0KG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIGlmIChfbmF0aXZlLmRlZmF1bHQucmFuZG9tVVVJRCAmJiAhYnVmICYmICFvcHRpb25zKSB7XG4gICAgcmV0dXJuIF9uYXRpdmUuZGVmYXVsdC5yYW5kb21VVUlEKCk7XG4gIH1cblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICBjb25zdCBybmRzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IF9ybmcuZGVmYXVsdCkoKTsgLy8gUGVyIDQuNCwgc2V0IGJpdHMgZm9yIHZlcnNpb24gYW5kIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYFxuXG5cbiAgcm5kc1s2XSA9IHJuZHNbNl0gJiAweDBmIHwgMHg0MDtcbiAgcm5kc1s4XSA9IHJuZHNbOF0gJiAweDNmIHwgMHg4MDsgLy8gQ29weSBieXRlcyB0byBidWZmZXIsIGlmIHByb3ZpZGVkXG5cbiAgaWYgKGJ1Zikge1xuICAgIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgKytpKSB7XG4gICAgICBidWZbb2Zmc2V0ICsgaV0gPSBybmRzW2ldO1xuICAgIH1cblxuICAgIHJldHVybiBidWY7XG4gIH1cblxuICByZXR1cm4gKDAsIF9zdHJpbmdpZnkudW5zYWZlU3RyaW5naWZ5KShybmRzKTtcbn1cblxudmFyIF9kZWZhdWx0ID0gdjQ7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcblxudmFyIF92ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi92MzUuanNcIikpO1xuXG52YXIgX3NoYSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vc2hhMS5qc1wiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmNvbnN0IHY1ID0gKDAsIF92LmRlZmF1bHQpKCd2NScsIDB4NTAsIF9zaGEuZGVmYXVsdCk7XG52YXIgX2RlZmF1bHQgPSB2NTtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgX3JlZ2V4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9yZWdleC5qc1wiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIHZhbGlkYXRlKHV1aWQpIHtcbiAgcmV0dXJuIHR5cGVvZiB1dWlkID09PSAnc3RyaW5nJyAmJiBfcmVnZXguZGVmYXVsdC50ZXN0KHV1aWQpO1xufVxuXG52YXIgX2RlZmF1bHQgPSB2YWxpZGF0ZTtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgX3ZhbGlkYXRlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi92YWxpZGF0ZS5qc1wiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIHZlcnNpb24odXVpZCkge1xuICBpZiAoISgwLCBfdmFsaWRhdGUuZGVmYXVsdCkodXVpZCkpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ0ludmFsaWQgVVVJRCcpO1xuICB9XG5cbiAgcmV0dXJuIHBhcnNlSW50KHV1aWQuc2xpY2UoMTQsIDE1KSwgMTYpO1xufVxuXG52YXIgX2RlZmF1bHQgPSB2ZXJzaW9uO1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZXZlbnRzID0gcmVxdWlyZSgnZXZlbnRzJyk7XG52YXIgdW5pdmVyc2FsRmV0Y2ggPSByZXF1aXJlKCdAaW5ydXB0L3VuaXZlcnNhbC1mZXRjaCcpO1xudmFyIGpvc2UgPSByZXF1aXJlKCdqb3NlJyk7XG52YXIgdXVpZCA9IHJlcXVpcmUoJ3V1aWQnKTtcblxuY29uc3QgU09MSURfQ0xJRU5UX0FVVEhOX0tFWV9QUkVGSVggPSBcInNvbGlkQ2xpZW50QXV0aG46XCI7XG5jb25zdCBQUkVGRVJSRURfU0lHTklOR19BTEcgPSBbXCJFUzI1NlwiLCBcIlJTMjU2XCJdO1xuY29uc3QgRVZFTlRTID0ge1xuICAgIEVSUk9SOiBcImVycm9yXCIsXG4gICAgTE9HSU46IFwibG9naW5cIixcbiAgICBMT0dPVVQ6IFwibG9nb3V0XCIsXG4gICAgTkVXX1JFRlJFU0hfVE9LRU46IFwibmV3UmVmcmVzaFRva2VuXCIsXG4gICAgU0VTU0lPTl9FWFBJUkVEOiBcInNlc3Npb25FeHBpcmVkXCIsXG4gICAgU0VTU0lPTl9FWFRFTkRFRDogXCJzZXNzaW9uRXh0ZW5kZWRcIixcbiAgICBTRVNTSU9OX1JFU1RPUkVEOiBcInNlc3Npb25SZXN0b3JlXCIsXG4gICAgVElNRU9VVF9TRVQ6IFwidGltZW91dFNldFwiLFxufTtcbmNvbnN0IFJFRlJFU0hfQkVGT1JFX0VYUElSQVRJT05fU0VDT05EUyA9IDU7XG5jb25zdCBTQ09QRV9PUEVOSUQgPSBcIm9wZW5pZFwiO1xuY29uc3QgU0NPUEVfT0ZGTElORSA9IFwib2ZmbGluZV9hY2Nlc3NcIjtcbmNvbnN0IFNDT1BFX1dFQklEID0gXCJ3ZWJpZFwiO1xuY29uc3QgREVGQVVMVF9TQ09QRVMgPSBbU0NPUEVfT1BFTklELCBTQ09QRV9PRkZMSU5FLCBTQ09QRV9XRUJJRF0uam9pbihcIiBcIik7XG5cbmNvbnN0IGJ1aWxkUHJveHlIYW5kbGVyID0gKHRvRXhjbHVkZSwgZXJyb3JNZXNzYWdlKSA9PiAoe1xuICAgIGdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSB7XG4gICAgICAgIGlmICghT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZXZlbnRzLkV2ZW50RW1pdHRlcikuaW5jbHVkZXMocHJvcCkgJiZcbiAgICAgICAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRvRXhjbHVkZSkuaW5jbHVkZXMocHJvcCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtlcnJvck1lc3NhZ2V9OiBbJHtwcm9wfV0gaXMgbm90IHN1cHBvcnRlZGApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKTtcbiAgICB9LFxufSk7XG5cbmNsYXNzIEFnZ3JlZ2F0ZUhhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKGhhbmRsZWFibGVzKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlYWJsZXMgPSBoYW5kbGVhYmxlcztcbiAgICB9XG4gICAgYXN5bmMgZ2V0UHJvcGVySGFuZGxlcihwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY2FuSGFuZGxlTGlzdCA9IGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlYWJsZXMubWFwKChoYW5kbGVhYmxlKSA9PiBoYW5kbGVhYmxlLmNhbkhhbmRsZSguLi5wYXJhbXMpKSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FuSGFuZGxlTGlzdC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgaWYgKGNhbkhhbmRsZUxpc3RbaV0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVhYmxlc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgYXN5bmMgY2FuSGFuZGxlKC4uLnBhcmFtcykge1xuICAgICAgICByZXR1cm4gKGF3YWl0IHRoaXMuZ2V0UHJvcGVySGFuZGxlcihwYXJhbXMpKSAhPT0gbnVsbDtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlKC4uLnBhcmFtcykge1xuICAgICAgICBjb25zdCBoYW5kbGVyID0gYXdhaXQgdGhpcy5nZXRQcm9wZXJIYW5kbGVyKHBhcmFtcyk7XG4gICAgICAgIGlmIChoYW5kbGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlci5oYW5kbGUoLi4ucGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFske3RoaXMuY29uc3RydWN0b3IubmFtZX1dIGNhbm5vdCBmaW5kIGEgc3VpdGFibGUgaGFuZGxlciBmb3I6ICR7cGFyYW1zXG4gICAgICAgICAgICAubWFwKChwYXJhbSkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocGFyYW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbS50b1N0cmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1gKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGZldGNoSndrcyhqd2tzSXJpLCBpc3N1ZXJJcmkpIHtcbiAgICBjb25zdCBqd2tzUmVzcG9uc2UgPSBhd2FpdCB1bml2ZXJzYWxGZXRjaC5mZXRjaChqd2tzSXJpKTtcbiAgICBpZiAoandrc1Jlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZldGNoIEpXS1MgZm9yIFske2lzc3VlcklyaX1dIGF0IFske2p3a3NJcml9XTogJHtqd2tzUmVzcG9uc2Uuc3RhdHVzfSAke2p3a3NSZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgIH1cbiAgICBsZXQgandrO1xuICAgIHRyeSB7XG4gICAgICAgIGp3ayA9IChhd2FpdCBqd2tzUmVzcG9uc2UuanNvbigpKS5rZXlzWzBdO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1hbGZvcm1lZCBKV0tTIGZvciBbJHtpc3N1ZXJJcml9XSBhdCBbJHtqd2tzSXJpfV06ICR7ZS5tZXNzYWdlfWApO1xuICAgIH1cbiAgICByZXR1cm4gandrO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0V2ViaWRGcm9tVG9rZW5QYXlsb2FkKGlkVG9rZW4sIGp3a3NJcmksIGlzc3VlcklyaSwgY2xpZW50SWQpIHtcbiAgICBjb25zdCBqd2sgPSBhd2FpdCBmZXRjaEp3a3Moandrc0lyaSwgaXNzdWVySXJpKTtcbiAgICBsZXQgcGF5bG9hZDtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB7IHBheWxvYWQ6IHZlcmlmaWVkUGF5bG9hZCB9ID0gYXdhaXQgam9zZS5qd3RWZXJpZnkoaWRUb2tlbiwgYXdhaXQgam9zZS5pbXBvcnRKV0soandrKSwge1xuICAgICAgICAgICAgaXNzdWVyOiBpc3N1ZXJJcmksXG4gICAgICAgICAgICBhdWRpZW5jZTogY2xpZW50SWQsXG4gICAgICAgIH0pO1xuICAgICAgICBwYXlsb2FkID0gdmVyaWZpZWRQYXlsb2FkO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRva2VuIHZlcmlmaWNhdGlvbiBmYWlsZWQ6ICR7ZS5zdGFja31gKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwYXlsb2FkLndlYmlkID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiBwYXlsb2FkLndlYmlkO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHBheWxvYWQuc3ViICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIHRva2VuICR7SlNPTi5zdHJpbmdpZnkocGF5bG9hZCl9IGlzIGludmFsaWQ6IGl0IGhhcyBubyAnd2ViaWQnIGNsYWltIGFuZCBubyAnc3ViJyBjbGFpbS5gKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgbmV3IFVSTChwYXlsb2FkLnN1Yik7XG4gICAgICAgIHJldHVybiBwYXlsb2FkLnN1YjtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgdG9rZW4gaGFzIG5vICd3ZWJpZCcgY2xhaW0sIGFuZCBpdHMgJ3N1YicgY2xhaW0gb2YgWyR7cGF5bG9hZC5zdWJ9XSBpcyBpbnZhbGlkIGFzIGEgVVJMIC0gZXJyb3IgWyR7ZX1dLmApO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaXNWYWxpZFJlZGlyZWN0VXJsKHJlZGlyZWN0VXJsKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXJsT2JqZWN0ID0gbmV3IFVSTChyZWRpcmVjdFVybCk7XG4gICAgICAgIHJldHVybiB1cmxPYmplY3QuaGFzaCA9PT0gXCJcIjtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaXNTdXBwb3J0ZWRUb2tlblR5cGUodG9rZW4pIHtcbiAgICByZXR1cm4gdHlwZW9mIHRva2VuID09PSBcInN0cmluZ1wiICYmIFtcIkRQb1BcIiwgXCJCZWFyZXJcIl0uaW5jbHVkZXModG9rZW4pO1xufVxuXG5jb25zdCBVU0VSX1NFU1NJT05fUFJFRklYID0gXCJzb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uVXNlclwiO1xuXG5mdW5jdGlvbiBpc1ZhbGlkVXJsKHVybCkge1xuICAgIHRyeSB7XG4gICAgICAgIG5ldyBVUkwodXJsKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNhdGNoIChfYSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuZnVuY3Rpb24gZGV0ZXJtaW5lU2lnbmluZ0FsZyhzdXBwb3J0ZWQsIHByZWZlcnJlZCkge1xuICAgIHZhciBfYTtcbiAgICByZXR1cm4gKChfYSA9IHByZWZlcnJlZC5maW5kKChzaWduaW5nQWxnKSA9PiB7XG4gICAgICAgIHJldHVybiBzdXBwb3J0ZWQuaW5jbHVkZXMoc2lnbmluZ0FsZyk7XG4gICAgfSkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IG51bGwpO1xufVxuZnVuY3Rpb24gZGV0ZXJtaW5lQ2xpZW50VHlwZShvcHRpb25zLCBpc3N1ZXJDb25maWcpIHtcbiAgICBpZiAob3B0aW9ucy5jbGllbnRJZCAhPT0gdW5kZWZpbmVkICYmICFpc1ZhbGlkVXJsKG9wdGlvbnMuY2xpZW50SWQpKSB7XG4gICAgICAgIHJldHVybiBcInN0YXRpY1wiO1xuICAgIH1cbiAgICBpZiAoaXNzdWVyQ29uZmlnLnNjb3Blc1N1cHBvcnRlZC5pbmNsdWRlcyhcIndlYmlkXCIpICYmXG4gICAgICAgIG9wdGlvbnMuY2xpZW50SWQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICBpc1ZhbGlkVXJsKG9wdGlvbnMuY2xpZW50SWQpKSB7XG4gICAgICAgIHJldHVybiBcInNvbGlkLW9pZGNcIjtcbiAgICB9XG4gICAgcmV0dXJuIFwiZHluYW1pY1wiO1xufVxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlUmVnaXN0cmF0aW9uKG9wdGlvbnMsIGlzc3VlckNvbmZpZywgc3RvcmFnZVV0aWxpdHksIGNsaWVudFJlZ2lzdHJhcikge1xuICAgIGNvbnN0IGNsaWVudFR5cGUgPSBkZXRlcm1pbmVDbGllbnRUeXBlKG9wdGlvbnMsIGlzc3VlckNvbmZpZyk7XG4gICAgaWYgKGNsaWVudFR5cGUgPT09IFwiZHluYW1pY1wiKSB7XG4gICAgICAgIHJldHVybiBjbGllbnRSZWdpc3RyYXIuZ2V0Q2xpZW50KHtcbiAgICAgICAgICAgIHNlc3Npb25JZDogb3B0aW9ucy5zZXNzaW9uSWQsXG4gICAgICAgICAgICBjbGllbnROYW1lOiBvcHRpb25zLmNsaWVudE5hbWUsXG4gICAgICAgICAgICByZWRpcmVjdFVybDogb3B0aW9ucy5yZWRpcmVjdFVybCxcbiAgICAgICAgfSwgaXNzdWVyQ29uZmlnKTtcbiAgICB9XG4gICAgYXdhaXQgc3RvcmFnZVV0aWxpdHkuc2V0Rm9yVXNlcihvcHRpb25zLnNlc3Npb25JZCwge1xuICAgICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcbiAgICB9KTtcbiAgICBpZiAob3B0aW9ucy5jbGllbnRTZWNyZXQpIHtcbiAgICAgICAgYXdhaXQgc3RvcmFnZVV0aWxpdHkuc2V0Rm9yVXNlcihvcHRpb25zLnNlc3Npb25JZCwge1xuICAgICAgICAgICAgY2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmNsaWVudE5hbWUpIHtcbiAgICAgICAgYXdhaXQgc3RvcmFnZVV0aWxpdHkuc2V0Rm9yVXNlcihvcHRpb25zLnNlc3Npb25JZCwge1xuICAgICAgICAgICAgY2xpZW50TmFtZTogb3B0aW9ucy5jbGllbnROYW1lLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgIGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXQsXG4gICAgICAgIGNsaWVudE5hbWU6IG9wdGlvbnMuY2xpZW50TmFtZSxcbiAgICAgICAgY2xpZW50VHlwZSxcbiAgICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRTZXNzaW9uSWRGcm9tT2F1dGhTdGF0ZShzdG9yYWdlVXRpbGl0eSwgb2F1dGhTdGF0ZSkge1xuICAgIHJldHVybiBzdG9yYWdlVXRpbGl0eS5nZXRGb3JVc2VyKG9hdXRoU3RhdGUsIFwic2Vzc2lvbklkXCIpO1xufVxuYXN5bmMgZnVuY3Rpb24gbG9hZE9pZGNDb250ZXh0RnJvbVN0b3JhZ2Uoc2Vzc2lvbklkLCBzdG9yYWdlVXRpbGl0eSwgY29uZmlnRmV0Y2hlcikge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IFtpc3N1ZXJJcmksIGNvZGVWZXJpZmllciwgc3RvcmVkUmVkaXJlY3RJcmksIGRwb3BdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgc3RvcmFnZVV0aWxpdHkuZ2V0Rm9yVXNlcihzZXNzaW9uSWQsIFwiaXNzdWVyXCIsIHtcbiAgICAgICAgICAgICAgICBlcnJvcklmTnVsbDogdHJ1ZSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgc3RvcmFnZVV0aWxpdHkuZ2V0Rm9yVXNlcihzZXNzaW9uSWQsIFwiY29kZVZlcmlmaWVyXCIpLFxuICAgICAgICAgICAgc3RvcmFnZVV0aWxpdHkuZ2V0Rm9yVXNlcihzZXNzaW9uSWQsIFwicmVkaXJlY3RVcmxcIiksXG4gICAgICAgICAgICBzdG9yYWdlVXRpbGl0eS5nZXRGb3JVc2VyKHNlc3Npb25JZCwgXCJkcG9wXCIsIHsgZXJyb3JJZk51bGw6IHRydWUgfSksXG4gICAgICAgIF0pO1xuICAgICAgICBhd2FpdCBzdG9yYWdlVXRpbGl0eS5kZWxldGVGb3JVc2VyKHNlc3Npb25JZCwgXCJjb2RlVmVyaWZpZXJcIik7XG4gICAgICAgIGNvbnN0IGlzc3VlckNvbmZpZyA9IGF3YWl0IGNvbmZpZ0ZldGNoZXIuZmV0Y2hDb25maWcoaXNzdWVySXJpKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgICAgICAgIHJlZGlyZWN0VXJsOiBzdG9yZWRSZWRpcmVjdElyaSxcbiAgICAgICAgICAgIGlzc3VlckNvbmZpZyxcbiAgICAgICAgICAgIGRwb3A6IGRwb3AgPT09IFwidHJ1ZVwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byByZXRyaWV2ZSBPSURDIGNvbnRleHQgZnJvbSBzdG9yYWdlIGFzc29jaWF0ZWQgd2l0aCBzZXNzaW9uIFske3Nlc3Npb25JZH1dOiAke2V9YCk7XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gc2F2ZVNlc3Npb25JbmZvVG9TdG9yYWdlKHN0b3JhZ2VVdGlsaXR5LCBzZXNzaW9uSWQsIHdlYklkLCBpc0xvZ2dlZEluLCByZWZyZXNoVG9rZW4sIHNlY3VyZSwgZHBvcEtleSkge1xuICAgIGlmIChyZWZyZXNoVG9rZW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBhd2FpdCBzdG9yYWdlVXRpbGl0eS5zZXRGb3JVc2VyKHNlc3Npb25JZCwgeyByZWZyZXNoVG9rZW4gfSwgeyBzZWN1cmUgfSk7XG4gICAgfVxuICAgIGlmICh3ZWJJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGF3YWl0IHN0b3JhZ2VVdGlsaXR5LnNldEZvclVzZXIoc2Vzc2lvbklkLCB7IHdlYklkIH0sIHsgc2VjdXJlIH0pO1xuICAgIH1cbiAgICBpZiAoaXNMb2dnZWRJbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGF3YWl0IHN0b3JhZ2VVdGlsaXR5LnNldEZvclVzZXIoc2Vzc2lvbklkLCB7IGlzTG9nZ2VkSW4gfSwgeyBzZWN1cmUgfSk7XG4gICAgfVxuICAgIGlmIChkcG9wS2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYXdhaXQgc3RvcmFnZVV0aWxpdHkuc2V0Rm9yVXNlcihzZXNzaW9uSWQsIHtcbiAgICAgICAgICAgIHB1YmxpY0tleTogSlNPTi5zdHJpbmdpZnkoZHBvcEtleS5wdWJsaWNLZXkpLFxuICAgICAgICAgICAgcHJpdmF0ZUtleTogSlNPTi5zdHJpbmdpZnkoYXdhaXQgam9zZS5leHBvcnRKV0soZHBvcEtleS5wcml2YXRlS2V5KSksXG4gICAgICAgIH0sIHsgc2VjdXJlIH0pO1xuICAgIH1cbn1cbmNsYXNzIFN0b3JhZ2VVdGlsaXR5IHtcbiAgICBjb25zdHJ1Y3RvcihzZWN1cmVTdG9yYWdlLCBpbnNlY3VyZVN0b3JhZ2UpIHtcbiAgICAgICAgdGhpcy5zZWN1cmVTdG9yYWdlID0gc2VjdXJlU3RvcmFnZTtcbiAgICAgICAgdGhpcy5pbnNlY3VyZVN0b3JhZ2UgPSBpbnNlY3VyZVN0b3JhZ2U7XG4gICAgfVxuICAgIGdldEtleSh1c2VySWQpIHtcbiAgICAgICAgcmV0dXJuIGBzb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uVXNlcjoke3VzZXJJZH1gO1xuICAgIH1cbiAgICBhc3luYyBnZXRVc2VyRGF0YSh1c2VySWQsIHNlY3VyZSkge1xuICAgICAgICBjb25zdCBzdG9yZWQgPSBhd2FpdCAoc2VjdXJlXG4gICAgICAgICAgICA/IHRoaXMuc2VjdXJlU3RvcmFnZVxuICAgICAgICAgICAgOiB0aGlzLmluc2VjdXJlU3RvcmFnZSkuZ2V0KHRoaXMuZ2V0S2V5KHVzZXJJZCkpO1xuICAgICAgICBpZiAoc3RvcmVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RvcmVkKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERhdGEgZm9yIHVzZXIgWyR7dXNlcklkfV0gaW4gWyR7c2VjdXJlID8gXCJzZWN1cmVcIiA6IFwidW5zZWN1cmVcIn1dIHN0b3JhZ2UgaXMgY29ycnVwdGVkIC0gZXhwZWN0ZWQgdmFsaWQgSlNPTiwgYnV0IGdvdDogJHtzdG9yZWR9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc2V0VXNlckRhdGEodXNlcklkLCBkYXRhLCBzZWN1cmUpIHtcbiAgICAgICAgYXdhaXQgKHNlY3VyZSA/IHRoaXMuc2VjdXJlU3RvcmFnZSA6IHRoaXMuaW5zZWN1cmVTdG9yYWdlKS5zZXQodGhpcy5nZXRLZXkodXNlcklkKSwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgIH1cbiAgICBhc3luYyBnZXQoa2V5LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgKChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuc2VjdXJlKVxuICAgICAgICAgICAgPyB0aGlzLnNlY3VyZVN0b3JhZ2VcbiAgICAgICAgICAgIDogdGhpcy5pbnNlY3VyZVN0b3JhZ2UpLmdldChrZXkpO1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCAmJiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmVycm9ySWZOdWxsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBbJHtrZXl9XSBpcyBub3Qgc3RvcmVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBhc3luYyBzZXQoa2V5LCB2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gKChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuc2VjdXJlKSA/IHRoaXMuc2VjdXJlU3RvcmFnZSA6IHRoaXMuaW5zZWN1cmVTdG9yYWdlKS5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgfVxuICAgIGFzeW5jIGRlbGV0ZShrZXksIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuICgob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnNlY3VyZSkgPyB0aGlzLnNlY3VyZVN0b3JhZ2UgOiB0aGlzLmluc2VjdXJlU3RvcmFnZSkuZGVsZXRlKGtleSk7XG4gICAgfVxuICAgIGFzeW5jIGdldEZvclVzZXIodXNlcklkLCBrZXksIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgdXNlckRhdGEgPSBhd2FpdCB0aGlzLmdldFVzZXJEYXRhKHVzZXJJZCwgb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnNlY3VyZSk7XG4gICAgICAgIGxldCB2YWx1ZTtcbiAgICAgICAgaWYgKCF1c2VyRGF0YSB8fCAhdXNlckRhdGFba2V5XSkge1xuICAgICAgICAgICAgdmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSB1c2VyRGF0YVtrZXldO1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCAmJiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmVycm9ySWZOdWxsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGaWVsZCBbJHtrZXl9XSBmb3IgdXNlciBbJHt1c2VySWR9XSBpcyBub3Qgc3RvcmVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlIHx8IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgYXN5bmMgc2V0Rm9yVXNlcih1c2VySWQsIHZhbHVlcywgb3B0aW9ucykge1xuICAgICAgICBsZXQgdXNlckRhdGE7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB1c2VyRGF0YSA9IGF3YWl0IHRoaXMuZ2V0VXNlckRhdGEodXNlcklkLCBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuc2VjdXJlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgICAgIHVzZXJEYXRhID0ge307XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5zZXRVc2VyRGF0YSh1c2VySWQsIHsgLi4udXNlckRhdGEsIC4uLnZhbHVlcyB9LCBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuc2VjdXJlKTtcbiAgICB9XG4gICAgYXN5bmMgZGVsZXRlRm9yVXNlcih1c2VySWQsIGtleSwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCB1c2VyRGF0YSA9IGF3YWl0IHRoaXMuZ2V0VXNlckRhdGEodXNlcklkLCBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuc2VjdXJlKTtcbiAgICAgICAgZGVsZXRlIHVzZXJEYXRhW2tleV07XG4gICAgICAgIGF3YWl0IHRoaXMuc2V0VXNlckRhdGEodXNlcklkLCB1c2VyRGF0YSwgb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnNlY3VyZSk7XG4gICAgfVxuICAgIGFzeW5jIGRlbGV0ZUFsbFVzZXJEYXRhKHVzZXJJZCwgb3B0aW9ucykge1xuICAgICAgICBhd2FpdCAoKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5zZWN1cmUpID8gdGhpcy5zZWN1cmVTdG9yYWdlIDogdGhpcy5pbnNlY3VyZVN0b3JhZ2UpLmRlbGV0ZSh0aGlzLmdldEtleSh1c2VySWQpKTtcbiAgICB9XG59XG5cbmNsYXNzIEluTWVtb3J5U3RvcmFnZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubWFwID0ge307XG4gICAgfVxuICAgIGFzeW5jIGdldChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwW2tleV0gfHwgdW5kZWZpbmVkO1xuICAgIH1cbiAgICBhc3luYyBzZXQoa2V5LCB2YWx1ZSkge1xuICAgICAgICB0aGlzLm1hcFtrZXldID0gdmFsdWU7XG4gICAgfVxuICAgIGFzeW5jIGRlbGV0ZShrZXkpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMubWFwW2tleV07XG4gICAgfVxufVxuXG5jbGFzcyBDb25maWd1cmF0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB9XG59XG5cbmNsYXNzIE5vdEltcGxlbWVudGVkRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWV0aG9kTmFtZSkge1xuICAgICAgICBzdXBlcihgWyR7bWV0aG9kTmFtZX1dIGlzIG5vdCBpbXBsZW1lbnRlZGApO1xuICAgIH1cbn1cblxuY2xhc3MgSW52YWxpZFJlc3BvbnNlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWlzc2luZ0ZpZWxkcykge1xuICAgICAgICBzdXBlcihgSW52YWxpZCByZXNwb25zZSBmcm9tIE9JREMgcHJvdmlkZXI6IG1pc3NpbmcgZmllbGRzICR7bWlzc2luZ0ZpZWxkc31gKTtcbiAgICAgICAgdGhpcy5taXNzaW5nRmllbGRzID0gbWlzc2luZ0ZpZWxkcztcbiAgICB9XG59XG5cbmNsYXNzIE9pZGNQcm92aWRlckVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGVycm9yLCBlcnJvckRlc2NyaXB0aW9uKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gICAgICAgIHRoaXMuZXJyb3JEZXNjcmlwdGlvbiA9IGVycm9yRGVzY3JpcHRpb247XG4gICAgfVxufVxuXG5mdW5jdGlvbiBub3JtYWxpemVIVFUoYXVkaWVuY2UpIHtcbiAgICBjb25zdCBhdWRpZW5jZVVybCA9IG5ldyBVUkwoYXVkaWVuY2UpO1xuICAgIHJldHVybiBuZXcgVVJMKGF1ZGllbmNlVXJsLnBhdGhuYW1lLCBhdWRpZW5jZVVybC5vcmlnaW4pLnRvU3RyaW5nKCk7XG59XG5hc3luYyBmdW5jdGlvbiBjcmVhdGVEcG9wSGVhZGVyKGF1ZGllbmNlLCBtZXRob2QsIGRwb3BLZXkpIHtcbiAgICByZXR1cm4gbmV3IGpvc2UuU2lnbkpXVCh7XG4gICAgICAgIGh0dTogbm9ybWFsaXplSFRVKGF1ZGllbmNlKSxcbiAgICAgICAgaHRtOiBtZXRob2QudG9VcHBlckNhc2UoKSxcbiAgICAgICAganRpOiB1dWlkLnY0KCksXG4gICAgfSlcbiAgICAgICAgLnNldFByb3RlY3RlZEhlYWRlcih7XG4gICAgICAgIGFsZzogUFJFRkVSUkVEX1NJR05JTkdfQUxHWzBdLFxuICAgICAgICBqd2s6IGRwb3BLZXkucHVibGljS2V5LFxuICAgICAgICB0eXA6IFwiZHBvcCtqd3RcIixcbiAgICB9KVxuICAgICAgICAuc2V0SXNzdWVkQXQoKVxuICAgICAgICAuc2lnbihkcG9wS2V5LnByaXZhdGVLZXksIHt9KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlRHBvcEtleVBhaXIoKSB7XG4gICAgY29uc3QgeyBwcml2YXRlS2V5LCBwdWJsaWNLZXkgfSA9IGF3YWl0IGpvc2UuZ2VuZXJhdGVLZXlQYWlyKFBSRUZFUlJFRF9TSUdOSU5HX0FMR1swXSk7XG4gICAgY29uc3QgZHBvcEtleVBhaXIgPSB7XG4gICAgICAgIHByaXZhdGVLZXksXG4gICAgICAgIHB1YmxpY0tleTogYXdhaXQgam9zZS5leHBvcnRKV0socHVibGljS2V5KSxcbiAgICB9O1xuICAgIFtkcG9wS2V5UGFpci5wdWJsaWNLZXkuYWxnXSA9IFBSRUZFUlJFRF9TSUdOSU5HX0FMRztcbiAgICByZXR1cm4gZHBvcEtleVBhaXI7XG59XG5cbmNvbnN0IERFRkFVTFRfRVhQSVJBVElPTl9USU1FX1NFQ09ORFMgPSA2MDA7XG5mdW5jdGlvbiBpc0V4cGVjdGVkQXV0aEVycm9yKHN0YXR1c0NvZGUpIHtcbiAgICByZXR1cm4gWzQwMSwgNDAzXS5pbmNsdWRlcyhzdGF0dXNDb2RlKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGJ1aWxkRHBvcEZldGNoT3B0aW9ucyh0YXJnZXRVcmwsIGF1dGhUb2tlbiwgZHBvcEtleSwgZGVmYXVsdE9wdGlvbnMpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgaGVhZGVycyA9IG5ldyB1bml2ZXJzYWxGZXRjaC5IZWFkZXJzKGRlZmF1bHRPcHRpb25zID09PSBudWxsIHx8IGRlZmF1bHRPcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkZWZhdWx0T3B0aW9ucy5oZWFkZXJzKTtcbiAgICBoZWFkZXJzLnNldChcIkF1dGhvcml6YXRpb25cIiwgYERQb1AgJHthdXRoVG9rZW59YCk7XG4gICAgaGVhZGVycy5zZXQoXCJEUG9QXCIsIGF3YWl0IGNyZWF0ZURwb3BIZWFkZXIodGFyZ2V0VXJsLCAoX2EgPSBkZWZhdWx0T3B0aW9ucyA9PT0gbnVsbCB8fCBkZWZhdWx0T3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGVmYXVsdE9wdGlvbnMubWV0aG9kKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcImdldFwiLCBkcG9wS2V5KSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZGVmYXVsdE9wdGlvbnMsXG4gICAgICAgIGhlYWRlcnMsXG4gICAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGJ1aWxkQXV0aGVudGljYXRlZEhlYWRlcnModGFyZ2V0VXJsLCBhdXRoVG9rZW4sIGRwb3BLZXksIGRlZmF1bHRPcHRpb25zKSB7XG4gICAgaWYgKGRwb3BLZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gYnVpbGREcG9wRmV0Y2hPcHRpb25zKHRhcmdldFVybCwgYXV0aFRva2VuLCBkcG9wS2V5LCBkZWZhdWx0T3B0aW9ucyk7XG4gICAgfVxuICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgdW5pdmVyc2FsRmV0Y2guSGVhZGVycyhkZWZhdWx0T3B0aW9ucyA9PT0gbnVsbCB8fCBkZWZhdWx0T3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGVmYXVsdE9wdGlvbnMuaGVhZGVycyk7XG4gICAgaGVhZGVycy5zZXQoXCJBdXRob3JpemF0aW9uXCIsIGBCZWFyZXIgJHthdXRoVG9rZW59YCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZGVmYXVsdE9wdGlvbnMsXG4gICAgICAgIGhlYWRlcnMsXG4gICAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIG1ha2VBdXRoZW50aWNhdGVkUmVxdWVzdCh1bmF1dGhGZXRjaCwgYWNjZXNzVG9rZW4sIHVybCwgZGVmYXVsdFJlcXVlc3RJbml0LCBkcG9wS2V5KSB7XG4gICAgcmV0dXJuIHVuYXV0aEZldGNoKHVybCwgYXdhaXQgYnVpbGRBdXRoZW50aWNhdGVkSGVhZGVycyh1cmwudG9TdHJpbmcoKSwgYWNjZXNzVG9rZW4sIGRwb3BLZXksIGRlZmF1bHRSZXF1ZXN0SW5pdCkpO1xufVxuYXN5bmMgZnVuY3Rpb24gcmVmcmVzaEFjY2Vzc1Rva2VuKHJlZnJlc2hPcHRpb25zLCBkcG9wS2V5LCBldmVudEVtaXR0ZXIpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgdG9rZW5TZXQgPSBhd2FpdCByZWZyZXNoT3B0aW9ucy50b2tlblJlZnJlc2hlci5yZWZyZXNoKHJlZnJlc2hPcHRpb25zLnNlc3Npb25JZCwgcmVmcmVzaE9wdGlvbnMucmVmcmVzaFRva2VuLCBkcG9wS2V5KTtcbiAgICBldmVudEVtaXR0ZXIgPT09IG51bGwgfHwgZXZlbnRFbWl0dGVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBldmVudEVtaXR0ZXIuZW1pdChFVkVOVFMuU0VTU0lPTl9FWFRFTkRFRCwgKF9hID0gdG9rZW5TZXQuZXhwaXJlc0luKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBERUZBVUxUX0VYUElSQVRJT05fVElNRV9TRUNPTkRTKTtcbiAgICBpZiAodHlwZW9mIHRva2VuU2V0LnJlZnJlc2hUb2tlbiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBldmVudEVtaXR0ZXIgPT09IG51bGwgfHwgZXZlbnRFbWl0dGVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBldmVudEVtaXR0ZXIuZW1pdChFVkVOVFMuTkVXX1JFRlJFU0hfVE9LRU4sIHRva2VuU2V0LnJlZnJlc2hUb2tlbik7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGFjY2Vzc1Rva2VuOiB0b2tlblNldC5hY2Nlc3NUb2tlbixcbiAgICAgICAgcmVmcmVzaFRva2VuOiB0b2tlblNldC5yZWZyZXNoVG9rZW4sXG4gICAgICAgIGV4cGlyZXNJbjogdG9rZW5TZXQuZXhwaXJlc0luLFxuICAgIH07XG59XG5jb25zdCBjb21wdXRlUmVmcmVzaERlbGF5ID0gKGV4cGlyZXNJbikgPT4ge1xuICAgIGlmIChleHBpcmVzSW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZXhwaXJlc0luIC0gUkVGUkVTSF9CRUZPUkVfRVhQSVJBVElPTl9TRUNPTkRTID4gMFxuICAgICAgICAgICAgP1xuICAgICAgICAgICAgICAgIGV4cGlyZXNJbiAtIFJFRlJFU0hfQkVGT1JFX0VYUElSQVRJT05fU0VDT05EU1xuICAgICAgICAgICAgOiBleHBpcmVzSW47XG4gICAgfVxuICAgIHJldHVybiBERUZBVUxUX0VYUElSQVRJT05fVElNRV9TRUNPTkRTO1xufTtcbmFzeW5jIGZ1bmN0aW9uIGJ1aWxkQXV0aGVudGljYXRlZEZldGNoKHVuYXV0aEZldGNoLCBhY2Nlc3NUb2tlbiwgb3B0aW9ucykge1xuICAgIHZhciBfYTtcbiAgICBsZXQgY3VycmVudEFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW47XG4gICAgbGV0IGxhdGVzdFRpbWVvdXQ7XG4gICAgY29uc3QgY3VycmVudFJlZnJlc2hPcHRpb25zID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnJlZnJlc2hPcHRpb25zO1xuICAgIGlmIChjdXJyZW50UmVmcmVzaE9wdGlvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBwcm9hY3RpdmVseVJlZnJlc2hUb2tlbiA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBhY2Nlc3NUb2tlbjogcmVmcmVzaGVkQWNjZXNzVG9rZW4sIHJlZnJlc2hUb2tlbiwgZXhwaXJlc0luLCB9ID0gYXdhaXQgcmVmcmVzaEFjY2Vzc1Rva2VuKGN1cnJlbnRSZWZyZXNoT3B0aW9ucywgb3B0aW9ucy5kcG9wS2V5LCBvcHRpb25zLmV2ZW50RW1pdHRlcik7XG4gICAgICAgICAgICAgICAgY3VycmVudEFjY2Vzc1Rva2VuID0gcmVmcmVzaGVkQWNjZXNzVG9rZW47XG4gICAgICAgICAgICAgICAgaWYgKHJlZnJlc2hUb2tlbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRSZWZyZXNoT3B0aW9ucy5yZWZyZXNoVG9rZW4gPSByZWZyZXNoVG9rZW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChsYXRlc3RUaW1lb3V0KTtcbiAgICAgICAgICAgICAgICBsYXRlc3RUaW1lb3V0ID0gc2V0VGltZW91dChwcm9hY3RpdmVseVJlZnJlc2hUb2tlbiwgY29tcHV0ZVJlZnJlc2hEZWxheShleHBpcmVzSW4pICogMTAwMCk7XG4gICAgICAgICAgICAgICAgKF9hID0gb3B0aW9ucy5ldmVudEVtaXR0ZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lbWl0KEVWRU5UUy5USU1FT1VUX1NFVCwgbGF0ZXN0VGltZW91dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgT2lkY1Byb3ZpZGVyRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgKF9iID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmV2ZW50RW1pdHRlcikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmVtaXQoRVZFTlRTLkVSUk9SLCBlLmVycm9yLCBlLmVycm9yRGVzY3JpcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICAoX2MgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZXZlbnRFbWl0dGVyKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuZW1pdChFVkVOVFMuU0VTU0lPTl9FWFBJUkVEKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBJbnZhbGlkUmVzcG9uc2VFcnJvciAmJlxuICAgICAgICAgICAgICAgICAgICBlLm1pc3NpbmdGaWVsZHMuaW5jbHVkZXMoXCJhY2Nlc3NfdG9rZW5cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgKF9kID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmV2ZW50RW1pdHRlcikgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLmVtaXQoRVZFTlRTLlNFU1NJT05fRVhQSVJFRCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBsYXRlc3RUaW1lb3V0ID0gc2V0VGltZW91dChwcm9hY3RpdmVseVJlZnJlc2hUb2tlbiwgY29tcHV0ZVJlZnJlc2hEZWxheShvcHRpb25zLmV4cGlyZXNJbikgKiAxMDAwKTtcbiAgICAgICAgKF9hID0gb3B0aW9ucy5ldmVudEVtaXR0ZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lbWl0KEVWRU5UUy5USU1FT1VUX1NFVCwgbGF0ZXN0VGltZW91dCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG9wdGlvbnMgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLmV2ZW50RW1pdHRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IGV4cGlyYXRpb25UaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBvcHRpb25zLmV2ZW50RW1pdHRlci5lbWl0KEVWRU5UUy5TRVNTSU9OX0VYUElSRUQpO1xuICAgICAgICB9LCBjb21wdXRlUmVmcmVzaERlbGF5KG9wdGlvbnMuZXhwaXJlc0luKSAqIDEwMDApO1xuICAgICAgICBvcHRpb25zLmV2ZW50RW1pdHRlci5lbWl0KEVWRU5UUy5USU1FT1VUX1NFVCwgZXhwaXJhdGlvblRpbWVvdXQpO1xuICAgIH1cbiAgICByZXR1cm4gYXN5bmMgKHVybCwgcmVxdWVzdEluaXQpID0+IHtcbiAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgbWFrZUF1dGhlbnRpY2F0ZWRSZXF1ZXN0KHVuYXV0aEZldGNoLCBjdXJyZW50QWNjZXNzVG9rZW4sIHVybCwgcmVxdWVzdEluaXQsIG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5kcG9wS2V5KTtcbiAgICAgICAgY29uc3QgZmFpbGVkQnV0Tm90RXhwZWN0ZWRBdXRoRXJyb3IgPSAhcmVzcG9uc2Uub2sgJiYgIWlzRXhwZWN0ZWRBdXRoRXJyb3IocmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLm9rIHx8IGZhaWxlZEJ1dE5vdEV4cGVjdGVkQXV0aEVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGFzQmVlblJlZGlyZWN0ZWQgPSByZXNwb25zZS51cmwgIT09IHVybDtcbiAgICAgICAgaWYgKGhhc0JlZW5SZWRpcmVjdGVkICYmIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZHBvcEtleSkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBtYWtlQXV0aGVudGljYXRlZFJlcXVlc3QodW5hdXRoRmV0Y2gsIGN1cnJlbnRBY2Nlc3NUb2tlbiwgcmVzcG9uc2UudXJsLCByZXF1ZXN0SW5pdCwgb3B0aW9ucy5kcG9wS2V5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfTtcbn1cblxuY29uc3QgU3RvcmFnZVV0aWxpdHlHZXRSZXNwb25zZSA9IFwiZ2V0UmVzcG9uc2VcIjtcbmNvbnN0IFN0b3JhZ2VVdGlsaXR5TW9jayA9IHtcbiAgICBnZXQ6IGFzeW5jIChrZXksIG9wdGlvbnMpID0+IFN0b3JhZ2VVdGlsaXR5R2V0UmVzcG9uc2UsXG4gICAgc2V0OiBhc3luYyAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgIH0sXG4gICAgZGVsZXRlOiBhc3luYyAoa2V5KSA9PiB7XG4gICAgfSxcbiAgICBnZXRGb3JVc2VyOiBhc3luYyAodXNlcklkLCBrZXksIG9wdGlvbnMpID0+IFN0b3JhZ2VVdGlsaXR5R2V0UmVzcG9uc2UsXG4gICAgc2V0Rm9yVXNlcjogYXN5bmMgKHVzZXJJZCwgdmFsdWVzLCBvcHRpb25zKSA9PiB7XG4gICAgfSxcbiAgICBkZWxldGVGb3JVc2VyOiBhc3luYyAodXNlcklkLCBrZXksIG9wdGlvbnMpID0+IHtcbiAgICB9LFxuICAgIGRlbGV0ZUFsbFVzZXJEYXRhOiBhc3luYyAodXNlcklkLCBvcHRpb25zKSA9PiB7XG4gICAgfSxcbn07XG5jb25zdCBtb2NrU3RvcmFnZSA9IChzdG9yZWQpID0+IHtcbiAgICBjb25zdCBzdG9yZSA9IHN0b3JlZDtcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXQ6IGFzeW5jIChrZXkpID0+IHtcbiAgICAgICAgICAgIGlmIChzdG9yZVtrZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzdG9yZVtrZXldID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoc3RvcmVba2V5XSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogYXN5bmMgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgICAgICAgIHN0b3JlW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZGVsZXRlOiBhc3luYyAoa2V5KSA9PiB7XG4gICAgICAgICAgICBkZWxldGUgc3RvcmVba2V5XTtcbiAgICAgICAgfSxcbiAgICB9O1xufTtcbmNvbnN0IG1vY2tTdG9yYWdlVXRpbGl0eSA9IChzdG9yZWQsIGlzU2VjdXJlID0gZmFsc2UpID0+IHtcbiAgICBpZiAoaXNTZWN1cmUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdG9yYWdlVXRpbGl0eShtb2NrU3RvcmFnZShzdG9yZWQpLCBtb2NrU3RvcmFnZSh7fSkpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFN0b3JhZ2VVdGlsaXR5KG1vY2tTdG9yYWdlKHt9KSwgbW9ja1N0b3JhZ2Uoc3RvcmVkKSk7XG59O1xuXG5leHBvcnRzLkFnZ3JlZ2F0ZUhhbmRsZXIgPSBBZ2dyZWdhdGVIYW5kbGVyO1xuZXhwb3J0cy5Db25maWd1cmF0aW9uRXJyb3IgPSBDb25maWd1cmF0aW9uRXJyb3I7XG5leHBvcnRzLkRFRkFVTFRfU0NPUEVTID0gREVGQVVMVF9TQ09QRVM7XG5leHBvcnRzLkVWRU5UUyA9IEVWRU5UUztcbmV4cG9ydHMuSW5NZW1vcnlTdG9yYWdlID0gSW5NZW1vcnlTdG9yYWdlO1xuZXhwb3J0cy5JbnZhbGlkUmVzcG9uc2VFcnJvciA9IEludmFsaWRSZXNwb25zZUVycm9yO1xuZXhwb3J0cy5Ob3RJbXBsZW1lbnRlZEVycm9yID0gTm90SW1wbGVtZW50ZWRFcnJvcjtcbmV4cG9ydHMuT2lkY1Byb3ZpZGVyRXJyb3IgPSBPaWRjUHJvdmlkZXJFcnJvcjtcbmV4cG9ydHMuUFJFRkVSUkVEX1NJR05JTkdfQUxHID0gUFJFRkVSUkVEX1NJR05JTkdfQUxHO1xuZXhwb3J0cy5SRUZSRVNIX0JFRk9SRV9FWFBJUkFUSU9OX1NFQ09ORFMgPSBSRUZSRVNIX0JFRk9SRV9FWFBJUkFUSU9OX1NFQ09ORFM7XG5leHBvcnRzLlNPTElEX0NMSUVOVF9BVVRITl9LRVlfUFJFRklYID0gU09MSURfQ0xJRU5UX0FVVEhOX0tFWV9QUkVGSVg7XG5leHBvcnRzLlN0b3JhZ2VVdGlsaXR5ID0gU3RvcmFnZVV0aWxpdHk7XG5leHBvcnRzLlN0b3JhZ2VVdGlsaXR5R2V0UmVzcG9uc2UgPSBTdG9yYWdlVXRpbGl0eUdldFJlc3BvbnNlO1xuZXhwb3J0cy5TdG9yYWdlVXRpbGl0eU1vY2sgPSBTdG9yYWdlVXRpbGl0eU1vY2s7XG5leHBvcnRzLlVTRVJfU0VTU0lPTl9QUkVGSVggPSBVU0VSX1NFU1NJT05fUFJFRklYO1xuZXhwb3J0cy5idWlsZEF1dGhlbnRpY2F0ZWRGZXRjaCA9IGJ1aWxkQXV0aGVudGljYXRlZEZldGNoO1xuZXhwb3J0cy5idWlsZFByb3h5SGFuZGxlciA9IGJ1aWxkUHJveHlIYW5kbGVyO1xuZXhwb3J0cy5jcmVhdGVEcG9wSGVhZGVyID0gY3JlYXRlRHBvcEhlYWRlcjtcbmV4cG9ydHMuZGV0ZXJtaW5lU2lnbmluZ0FsZyA9IGRldGVybWluZVNpZ25pbmdBbGc7XG5leHBvcnRzLmZldGNoSndrcyA9IGZldGNoSndrcztcbmV4cG9ydHMuZ2VuZXJhdGVEcG9wS2V5UGFpciA9IGdlbmVyYXRlRHBvcEtleVBhaXI7XG5leHBvcnRzLmdldFNlc3Npb25JZEZyb21PYXV0aFN0YXRlID0gZ2V0U2Vzc2lvbklkRnJvbU9hdXRoU3RhdGU7XG5leHBvcnRzLmdldFdlYmlkRnJvbVRva2VuUGF5bG9hZCA9IGdldFdlYmlkRnJvbVRva2VuUGF5bG9hZDtcbmV4cG9ydHMuaGFuZGxlUmVnaXN0cmF0aW9uID0gaGFuZGxlUmVnaXN0cmF0aW9uO1xuZXhwb3J0cy5pc1N1cHBvcnRlZFRva2VuVHlwZSA9IGlzU3VwcG9ydGVkVG9rZW5UeXBlO1xuZXhwb3J0cy5pc1ZhbGlkUmVkaXJlY3RVcmwgPSBpc1ZhbGlkUmVkaXJlY3RVcmw7XG5leHBvcnRzLmxvYWRPaWRjQ29udGV4dEZyb21TdG9yYWdlID0gbG9hZE9pZGNDb250ZXh0RnJvbVN0b3JhZ2U7XG5leHBvcnRzLm1vY2tTdG9yYWdlID0gbW9ja1N0b3JhZ2U7XG5leHBvcnRzLm1vY2tTdG9yYWdlVXRpbGl0eSA9IG1vY2tTdG9yYWdlVXRpbGl0eTtcbmV4cG9ydHMuc2F2ZVNlc3Npb25JbmZvVG9TdG9yYWdlID0gc2F2ZVNlc3Npb25JbmZvVG9TdG9yYWdlO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG52YXIgaW5kZXhCcm93c2VyID0gZ2xvYmFsVGhpcy5mZXRjaDtcclxuY29uc3QgeyBmZXRjaCwgUmVzcG9uc2UsIFJlcXVlc3QsIEhlYWRlcnMgfSA9IGdsb2JhbFRoaXM7XG5cbmV4cG9ydHMuSGVhZGVycyA9IEhlYWRlcnM7XG5leHBvcnRzLlJlcXVlc3QgPSBSZXF1ZXN0O1xuZXhwb3J0cy5SZXNwb25zZSA9IFJlc3BvbnNlO1xuZXhwb3J0cy5kZWZhdWx0ID0gaW5kZXhCcm93c2VyO1xuZXhwb3J0cy5mZXRjaCA9IGZldGNoO1xuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFIgPSB0eXBlb2YgUmVmbGVjdCA9PT0gJ29iamVjdCcgPyBSZWZsZWN0IDogbnVsbFxudmFyIFJlZmxlY3RBcHBseSA9IFIgJiYgdHlwZW9mIFIuYXBwbHkgPT09ICdmdW5jdGlvbidcbiAgPyBSLmFwcGx5XG4gIDogZnVuY3Rpb24gUmVmbGVjdEFwcGx5KHRhcmdldCwgcmVjZWl2ZXIsIGFyZ3MpIHtcbiAgICByZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmNhbGwodGFyZ2V0LCByZWNlaXZlciwgYXJncyk7XG4gIH1cblxudmFyIFJlZmxlY3RPd25LZXlzXG5pZiAoUiAmJiB0eXBlb2YgUi5vd25LZXlzID09PSAnZnVuY3Rpb24nKSB7XG4gIFJlZmxlY3RPd25LZXlzID0gUi5vd25LZXlzXG59IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcbiAgUmVmbGVjdE93bktleXMgPSBmdW5jdGlvbiBSZWZsZWN0T3duS2V5cyh0YXJnZXQpIHtcbiAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGFyZ2V0KVxuICAgICAgLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHRhcmdldCkpO1xuICB9O1xufSBlbHNlIHtcbiAgUmVmbGVjdE93bktleXMgPSBmdW5jdGlvbiBSZWZsZWN0T3duS2V5cyh0YXJnZXQpIHtcbiAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGFyZ2V0KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gUHJvY2Vzc0VtaXRXYXJuaW5nKHdhcm5pbmcpIHtcbiAgaWYgKGNvbnNvbGUgJiYgY29uc29sZS53YXJuKSBjb25zb2xlLndhcm4od2FybmluZyk7XG59XG5cbnZhciBOdW1iZXJJc05hTiA9IE51bWJlci5pc05hTiB8fCBmdW5jdGlvbiBOdW1iZXJJc05hTih2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IHZhbHVlO1xufVxuXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIEV2ZW50RW1pdHRlci5pbml0LmNhbGwodGhpcyk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcbm1vZHVsZS5leHBvcnRzLm9uY2UgPSBvbmNlO1xuXG4vLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLnhcbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50c0NvdW50ID0gMDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDtcblxuLy8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlXG4vLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLlxudmFyIGRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDtcblxuZnVuY3Rpb24gY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcikge1xuICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwibGlzdGVuZXJcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRnVuY3Rpb24uIFJlY2VpdmVkIHR5cGUgJyArIHR5cGVvZiBsaXN0ZW5lcik7XG4gIH1cbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KEV2ZW50RW1pdHRlciwgJ2RlZmF1bHRNYXhMaXN0ZW5lcnMnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24oYXJnKSB7XG4gICAgaWYgKHR5cGVvZiBhcmcgIT09ICdudW1iZXInIHx8IGFyZyA8IDAgfHwgTnVtYmVySXNOYU4oYXJnKSkge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcImRlZmF1bHRNYXhMaXN0ZW5lcnNcIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgYXJnICsgJy4nKTtcbiAgICB9XG4gICAgZGVmYXVsdE1heExpc3RlbmVycyA9IGFyZztcbiAgfVxufSk7XG5cbkV2ZW50RW1pdHRlci5pbml0ID0gZnVuY3Rpb24oKSB7XG5cbiAgaWYgKHRoaXMuX2V2ZW50cyA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICB0aGlzLl9ldmVudHMgPT09IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS5fZXZlbnRzKSB7XG4gICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XG4gIH1cblxuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkO1xufTtcblxuLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzXG4vLyB0aGF0IHRvIGJlIGluY3JlYXNlZC4gU2V0IHRvIHplcm8gZm9yIHVubGltaXRlZC5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gc2V0TWF4TGlzdGVuZXJzKG4pIHtcbiAgaWYgKHR5cGVvZiBuICE9PSAnbnVtYmVyJyB8fCBuIDwgMCB8fCBOdW1iZXJJc05hTihuKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgXCJuXCIgaXMgb3V0IG9mIHJhbmdlLiBJdCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4gUmVjZWl2ZWQgJyArIG4gKyAnLicpO1xuICB9XG4gIHRoaXMuX21heExpc3RlbmVycyA9IG47XG4gIHJldHVybiB0aGlzO1xufTtcblxuZnVuY3Rpb24gX2dldE1heExpc3RlbmVycyh0aGF0KSB7XG4gIGlmICh0aGF0Ll9tYXhMaXN0ZW5lcnMgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gIHJldHVybiB0aGF0Ll9tYXhMaXN0ZW5lcnM7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZ2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gZ2V0TWF4TGlzdGVuZXJzKCkge1xuICByZXR1cm4gX2dldE1heExpc3RlbmVycyh0aGlzKTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQodHlwZSkge1xuICB2YXIgYXJncyA9IFtdO1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7XG4gIHZhciBkb0Vycm9yID0gKHR5cGUgPT09ICdlcnJvcicpO1xuXG4gIHZhciBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gIGlmIChldmVudHMgIT09IHVuZGVmaW5lZClcbiAgICBkb0Vycm9yID0gKGRvRXJyb3IgJiYgZXZlbnRzLmVycm9yID09PSB1bmRlZmluZWQpO1xuICBlbHNlIGlmICghZG9FcnJvcilcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LlxuICBpZiAoZG9FcnJvcikge1xuICAgIHZhciBlcjtcbiAgICBpZiAoYXJncy5sZW5ndGggPiAwKVxuICAgICAgZXIgPSBhcmdzWzBdO1xuICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAvLyBOb3RlOiBUaGUgY29tbWVudHMgb24gdGhlIGB0aHJvd2AgbGluZXMgYXJlIGludGVudGlvbmFsLCB0aGV5IHNob3dcbiAgICAgIC8vIHVwIGluIE5vZGUncyBvdXRwdXQgaWYgdGhpcyByZXN1bHRzIGluIGFuIHVuaGFuZGxlZCBleGNlcHRpb24uXG4gICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcbiAgICB9XG4gICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlclxuICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuaGFuZGxlZCBlcnJvci4nICsgKGVyID8gJyAoJyArIGVyLm1lc3NhZ2UgKyAnKScgOiAnJykpO1xuICAgIGVyci5jb250ZXh0ID0gZXI7XG4gICAgdGhyb3cgZXJyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICB9XG5cbiAgdmFyIGhhbmRsZXIgPSBldmVudHNbdHlwZV07XG5cbiAgaWYgKGhhbmRsZXIgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgUmVmbGVjdEFwcGx5KGhhbmRsZXIsIHRoaXMsIGFyZ3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBsZW4gPSBoYW5kbGVyLmxlbmd0aDtcbiAgICB2YXIgbGlzdGVuZXJzID0gYXJyYXlDbG9uZShoYW5kbGVyLCBsZW4pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpXG4gICAgICBSZWZsZWN0QXBwbHkobGlzdGVuZXJzW2ldLCB0aGlzLCBhcmdzKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuZnVuY3Rpb24gX2FkZExpc3RlbmVyKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIHByZXBlbmQpIHtcbiAgdmFyIG07XG4gIHZhciBldmVudHM7XG4gIHZhciBleGlzdGluZztcblxuICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTtcblxuICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cztcbiAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRhcmdldC5fZXZlbnRzQ291bnQgPSAwO1xuICB9IGVsc2Uge1xuICAgIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09IFwibmV3TGlzdGVuZXJcIiEgQmVmb3JlXG4gICAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgXCJuZXdMaXN0ZW5lclwiLlxuICAgIGlmIChldmVudHMubmV3TGlzdGVuZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGFyZ2V0LmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSxcbiAgICAgICAgICAgICAgICAgIGxpc3RlbmVyLmxpc3RlbmVyID8gbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7XG5cbiAgICAgIC8vIFJlLWFzc2lnbiBgZXZlbnRzYCBiZWNhdXNlIGEgbmV3TGlzdGVuZXIgaGFuZGxlciBjb3VsZCBoYXZlIGNhdXNlZCB0aGVcbiAgICAgIC8vIHRoaXMuX2V2ZW50cyB0byBiZSBhc3NpZ25lZCB0byBhIG5ldyBvYmplY3RcbiAgICAgIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICAgIH1cbiAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXTtcbiAgfVxuXG4gIGlmIChleGlzdGluZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXG4gICAgZXhpc3RpbmcgPSBldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjtcbiAgICArK3RhcmdldC5fZXZlbnRzQ291bnQ7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHR5cGVvZiBleGlzdGluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gQWRkaW5nIHRoZSBzZWNvbmQgZWxlbWVudCwgbmVlZCB0byBjaGFuZ2UgdG8gYXJyYXkuXG4gICAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9XG4gICAgICAgIHByZXBlbmQgPyBbbGlzdGVuZXIsIGV4aXN0aW5nXSA6IFtleGlzdGluZywgbGlzdGVuZXJdO1xuICAgICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxuICAgIH0gZWxzZSBpZiAocHJlcGVuZCkge1xuICAgICAgZXhpc3RpbmcudW5zaGlmdChsaXN0ZW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV4aXN0aW5nLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXG4gICAgbSA9IF9nZXRNYXhMaXN0ZW5lcnModGFyZ2V0KTtcbiAgICBpZiAobSA+IDAgJiYgZXhpc3RpbmcubGVuZ3RoID4gbSAmJiAhZXhpc3Rpbmcud2FybmVkKSB7XG4gICAgICBleGlzdGluZy53YXJuZWQgPSB0cnVlO1xuICAgICAgLy8gTm8gZXJyb3IgY29kZSBmb3IgdGhpcyBzaW5jZSBpdCBpcyBhIFdhcm5pbmdcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgdmFyIHcgPSBuZXcgRXJyb3IoJ1Bvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLmxlbmd0aCArICcgJyArIFN0cmluZyh0eXBlKSArICcgbGlzdGVuZXJzICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnYWRkZWQuIFVzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnaW5jcmVhc2UgbGltaXQnKTtcbiAgICAgIHcubmFtZSA9ICdNYXhMaXN0ZW5lcnNFeGNlZWRlZFdhcm5pbmcnO1xuICAgICAgdy5lbWl0dGVyID0gdGFyZ2V0O1xuICAgICAgdy50eXBlID0gdHlwZTtcbiAgICAgIHcuY291bnQgPSBleGlzdGluZy5sZW5ndGg7XG4gICAgICBQcm9jZXNzRW1pdFdhcm5pbmcodyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIGZhbHNlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcHJlcGVuZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gX2FkZExpc3RlbmVyKHRoaXMsIHR5cGUsIGxpc3RlbmVyLCB0cnVlKTtcbiAgICB9O1xuXG5mdW5jdGlvbiBvbmNlV3JhcHBlcigpIHtcbiAgaWYgKCF0aGlzLmZpcmVkKSB7XG4gICAgdGhpcy50YXJnZXQucmVtb3ZlTGlzdGVuZXIodGhpcy50eXBlLCB0aGlzLndyYXBGbik7XG4gICAgdGhpcy5maXJlZCA9IHRydWU7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApXG4gICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5jYWxsKHRoaXMudGFyZ2V0KTtcbiAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5hcHBseSh0aGlzLnRhcmdldCwgYXJndW1lbnRzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfb25jZVdyYXAodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgc3RhdGUgPSB7IGZpcmVkOiBmYWxzZSwgd3JhcEZuOiB1bmRlZmluZWQsIHRhcmdldDogdGFyZ2V0LCB0eXBlOiB0eXBlLCBsaXN0ZW5lcjogbGlzdGVuZXIgfTtcbiAgdmFyIHdyYXBwZWQgPSBvbmNlV3JhcHBlci5iaW5kKHN0YXRlKTtcbiAgd3JhcHBlZC5saXN0ZW5lciA9IGxpc3RlbmVyO1xuICBzdGF0ZS53cmFwRm4gPSB3cmFwcGVkO1xuICByZXR1cm4gd3JhcHBlZDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gb25jZSh0eXBlLCBsaXN0ZW5lcikge1xuICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTtcbiAgdGhpcy5vbih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRPbmNlTGlzdGVuZXIgPVxuICAgIGZ1bmN0aW9uIHByZXBlbmRPbmNlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuICAgICAgdGhpcy5wcmVwZW5kTGlzdGVuZXIodHlwZSwgX29uY2VXcmFwKHRoaXMsIHR5cGUsIGxpc3RlbmVyKSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4vLyBFbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWYgYW5kIG9ubHkgaWYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIHZhciBsaXN0LCBldmVudHMsIHBvc2l0aW9uLCBpLCBvcmlnaW5hbExpc3RlbmVyO1xuXG4gICAgICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTtcblxuICAgICAgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuICAgICAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm4gdGhpcztcblxuICAgICAgbGlzdCA9IGV2ZW50c1t0eXBlXTtcbiAgICAgIGlmIChsaXN0ID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHwgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIGV2ZW50c1t0eXBlXTtcbiAgICAgICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3QubGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBsaXN0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHBvc2l0aW9uID0gLTE7XG5cbiAgICAgICAgZm9yIChpID0gbGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fCBsaXN0W2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikge1xuICAgICAgICAgICAgb3JpZ2luYWxMaXN0ZW5lciA9IGxpc3RbaV0ubGlzdGVuZXI7XG4gICAgICAgICAgICBwb3NpdGlvbiA9IGk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocG9zaXRpb24gPCAwKVxuICAgICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAgIGlmIChwb3NpdGlvbiA9PT0gMClcbiAgICAgICAgICBsaXN0LnNoaWZ0KCk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHNwbGljZU9uZShsaXN0LCBwb3NpdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpXG4gICAgICAgICAgZXZlbnRzW3R5cGVdID0gbGlzdFswXTtcblxuICAgICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIG9yaWdpbmFsTGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID1cbiAgICBmdW5jdGlvbiByZW1vdmVBbGxMaXN0ZW5lcnModHlwZSkge1xuICAgICAgdmFyIGxpc3RlbmVycywgZXZlbnRzLCBpO1xuXG4gICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG4gICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudHNbdHlwZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGlmICgtLXRoaXMuX2V2ZW50c0NvdW50ID09PSAwKVxuICAgICAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZXZlbnRzKTtcbiAgICAgICAgdmFyIGtleTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xuICAgICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XG4gICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIGxpc3RlbmVycyA9IGV2ZW50c1t0eXBlXTtcblxuICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lcnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpO1xuICAgICAgfSBlbHNlIGlmIChsaXN0ZW5lcnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBMSUZPIG9yZGVyXG4gICAgICAgIGZvciAoaSA9IGxpc3RlbmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG5mdW5jdGlvbiBfbGlzdGVuZXJzKHRhcmdldCwgdHlwZSwgdW53cmFwKSB7XG4gIHZhciBldmVudHMgPSB0YXJnZXQuX2V2ZW50cztcblxuICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIFtdO1xuXG4gIHZhciBldmxpc3RlbmVyID0gZXZlbnRzW3R5cGVdO1xuICBpZiAoZXZsaXN0ZW5lciA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBbXTtcblxuICBpZiAodHlwZW9mIGV2bGlzdGVuZXIgPT09ICdmdW5jdGlvbicpXG4gICAgcmV0dXJuIHVud3JhcCA/IFtldmxpc3RlbmVyLmxpc3RlbmVyIHx8IGV2bGlzdGVuZXJdIDogW2V2bGlzdGVuZXJdO1xuXG4gIHJldHVybiB1bndyYXAgP1xuICAgIHVud3JhcExpc3RlbmVycyhldmxpc3RlbmVyKSA6IGFycmF5Q2xvbmUoZXZsaXN0ZW5lciwgZXZsaXN0ZW5lci5sZW5ndGgpO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uIGxpc3RlbmVycyh0eXBlKSB7XG4gIHJldHVybiBfbGlzdGVuZXJzKHRoaXMsIHR5cGUsIHRydWUpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yYXdMaXN0ZW5lcnMgPSBmdW5jdGlvbiByYXdMaXN0ZW5lcnModHlwZSkge1xuICByZXR1cm4gX2xpc3RlbmVycyh0aGlzLCB0eXBlLCBmYWxzZSk7XG59O1xuXG5FdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcbiAgaWYgKHR5cGVvZiBlbWl0dGVyLmxpc3RlbmVyQ291bnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBsaXN0ZW5lckNvdW50LmNhbGwoZW1pdHRlciwgdHlwZSk7XG4gIH1cbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGxpc3RlbmVyQ291bnQ7XG5mdW5jdGlvbiBsaXN0ZW5lckNvdW50KHR5cGUpIHtcbiAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcblxuICBpZiAoZXZlbnRzICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgZXZsaXN0ZW5lciA9IGV2ZW50c1t0eXBlXTtcblxuICAgIGlmICh0eXBlb2YgZXZsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfSBlbHNlIGlmIChldmxpc3RlbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gMDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5ldmVudE5hbWVzID0gZnVuY3Rpb24gZXZlbnROYW1lcygpIHtcbiAgcmV0dXJuIHRoaXMuX2V2ZW50c0NvdW50ID4gMCA/IFJlZmxlY3RPd25LZXlzKHRoaXMuX2V2ZW50cykgOiBbXTtcbn07XG5cbmZ1bmN0aW9uIGFycmF5Q2xvbmUoYXJyLCBuKSB7XG4gIHZhciBjb3B5ID0gbmV3IEFycmF5KG4pO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG47ICsraSlcbiAgICBjb3B5W2ldID0gYXJyW2ldO1xuICByZXR1cm4gY29weTtcbn1cblxuZnVuY3Rpb24gc3BsaWNlT25lKGxpc3QsIGluZGV4KSB7XG4gIGZvciAoOyBpbmRleCArIDEgPCBsaXN0Lmxlbmd0aDsgaW5kZXgrKylcbiAgICBsaXN0W2luZGV4XSA9IGxpc3RbaW5kZXggKyAxXTtcbiAgbGlzdC5wb3AoKTtcbn1cblxuZnVuY3Rpb24gdW53cmFwTGlzdGVuZXJzKGFycikge1xuICB2YXIgcmV0ID0gbmV3IEFycmF5KGFyci5sZW5ndGgpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHJldC5sZW5ndGg7ICsraSkge1xuICAgIHJldFtpXSA9IGFycltpXS5saXN0ZW5lciB8fCBhcnJbaV07XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gb25jZShlbWl0dGVyLCBuYW1lKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgZnVuY3Rpb24gZXJyb3JMaXN0ZW5lcihlcnIpIHtcbiAgICAgIGVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIobmFtZSwgcmVzb2x2ZXIpO1xuICAgICAgcmVqZWN0KGVycik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzb2x2ZXIoKSB7XG4gICAgICBpZiAodHlwZW9mIGVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBlcnJvckxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICAgIHJlc29sdmUoW10uc2xpY2UuY2FsbChhcmd1bWVudHMpKTtcbiAgICB9O1xuXG4gICAgZXZlbnRUYXJnZXRBZ25vc3RpY0FkZExpc3RlbmVyKGVtaXR0ZXIsIG5hbWUsIHJlc29sdmVyLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgaWYgKG5hbWUgIT09ICdlcnJvcicpIHtcbiAgICAgIGFkZEVycm9ySGFuZGxlcklmRXZlbnRFbWl0dGVyKGVtaXR0ZXIsIGVycm9yTGlzdGVuZXIsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBhZGRFcnJvckhhbmRsZXJJZkV2ZW50RW1pdHRlcihlbWl0dGVyLCBoYW5kbGVyLCBmbGFncykge1xuICBpZiAodHlwZW9mIGVtaXR0ZXIub24gPT09ICdmdW5jdGlvbicpIHtcbiAgICBldmVudFRhcmdldEFnbm9zdGljQWRkTGlzdGVuZXIoZW1pdHRlciwgJ2Vycm9yJywgaGFuZGxlciwgZmxhZ3MpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGV2ZW50VGFyZ2V0QWdub3N0aWNBZGRMaXN0ZW5lcihlbWl0dGVyLCBuYW1lLCBsaXN0ZW5lciwgZmxhZ3MpIHtcbiAgaWYgKHR5cGVvZiBlbWl0dGVyLm9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgaWYgKGZsYWdzLm9uY2UpIHtcbiAgICAgIGVtaXR0ZXIub25jZShuYW1lLCBsaXN0ZW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVtaXR0ZXIub24obmFtZSwgbGlzdGVuZXIpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2YgZW1pdHRlci5hZGRFdmVudExpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgLy8gRXZlbnRUYXJnZXQgZG9lcyBub3QgaGF2ZSBgZXJyb3JgIGV2ZW50IHNlbWFudGljcyBsaWtlIE5vZGVcbiAgICAvLyBFdmVudEVtaXR0ZXJzLCB3ZSBkbyBub3QgbGlzdGVuIGZvciBgZXJyb3JgIGV2ZW50cyBoZXJlLlxuICAgIGVtaXR0ZXIuYWRkRXZlbnRMaXN0ZW5lcihuYW1lLCBmdW5jdGlvbiB3cmFwTGlzdGVuZXIoYXJnKSB7XG4gICAgICAvLyBJRSBkb2VzIG5vdCBoYXZlIGJ1aWx0aW4gYHsgb25jZTogdHJ1ZSB9YCBzdXBwb3J0IHNvIHdlXG4gICAgICAvLyBoYXZlIHRvIGRvIGl0IG1hbnVhbGx5LlxuICAgICAgaWYgKGZsYWdzLm9uY2UpIHtcbiAgICAgICAgZW1pdHRlci5yZW1vdmVFdmVudExpc3RlbmVyKG5hbWUsIHdyYXBMaXN0ZW5lcik7XG4gICAgICB9XG4gICAgICBsaXN0ZW5lcihhcmcpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImVtaXR0ZXJcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRXZlbnRFbWl0dGVyLiBSZWNlaXZlZCB0eXBlICcgKyB0eXBlb2YgZW1pdHRlcik7XG4gIH1cbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTklMXCIsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9uaWwuZGVmYXVsdDtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJwYXJzZVwiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfcGFyc2UuZGVmYXVsdDtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJzdHJpbmdpZnlcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX3N0cmluZ2lmeS5kZWZhdWx0O1xuICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInYxXCIsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF92LmRlZmF1bHQ7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwidjNcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX3YyLmRlZmF1bHQ7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwidjRcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX3YzLmRlZmF1bHQ7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwidjVcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX3Y0LmRlZmF1bHQ7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwidmFsaWRhdGVcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX3ZhbGlkYXRlLmRlZmF1bHQ7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwidmVyc2lvblwiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfdmVyc2lvbi5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF92ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi92MS5qc1wiKSk7XG5cbnZhciBfdjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3YzLmpzXCIpKTtcblxudmFyIF92MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdjQuanNcIikpO1xuXG52YXIgX3Y0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi92NS5qc1wiKSk7XG5cbnZhciBfbmlsID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9uaWwuanNcIikpO1xuXG52YXIgX3ZlcnNpb24gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3ZlcnNpb24uanNcIikpO1xuXG52YXIgX3ZhbGlkYXRlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi92YWxpZGF0ZS5qc1wiKSk7XG5cbnZhciBfc3RyaW5naWZ5ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9zdHJpbmdpZnkuanNcIikpO1xuXG52YXIgX3BhcnNlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9wYXJzZS5qc1wiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbi8qXG4gKiBCcm93c2VyLWNvbXBhdGlibGUgSmF2YVNjcmlwdCBNRDVcbiAqXG4gKiBNb2RpZmljYXRpb24gb2YgSmF2YVNjcmlwdCBNRDVcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ibHVlaW1wL0phdmFTY3JpcHQtTUQ1XG4gKlxuICogQ29weXJpZ2h0IDIwMTEsIFNlYmFzdGlhbiBUc2NoYW5cbiAqIGh0dHBzOi8vYmx1ZWltcC5uZXRcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2U6XG4gKiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxuICpcbiAqIEJhc2VkIG9uXG4gKiBBIEphdmFTY3JpcHQgaW1wbGVtZW50YXRpb24gb2YgdGhlIFJTQSBEYXRhIFNlY3VyaXR5LCBJbmMuIE1ENSBNZXNzYWdlXG4gKiBEaWdlc3QgQWxnb3JpdGhtLCBhcyBkZWZpbmVkIGluIFJGQyAxMzIxLlxuICogVmVyc2lvbiAyLjIgQ29weXJpZ2h0IChDKSBQYXVsIEpvaG5zdG9uIDE5OTkgLSAyMDA5XG4gKiBPdGhlciBjb250cmlidXRvcnM6IEdyZWcgSG9sdCwgQW5kcmV3IEtlcGVydCwgWWRuYXIsIExvc3RpbmV0XG4gKiBEaXN0cmlidXRlZCB1bmRlciB0aGUgQlNEIExpY2Vuc2VcbiAqIFNlZSBodHRwOi8vcGFqaG9tZS5vcmcudWsvY3J5cHQvbWQ1IGZvciBtb3JlIGluZm8uXG4gKi9cbmZ1bmN0aW9uIG1kNShieXRlcykge1xuICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykge1xuICAgIGNvbnN0IG1zZyA9IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChieXRlcykpOyAvLyBVVEY4IGVzY2FwZVxuXG4gICAgYnl0ZXMgPSBuZXcgVWludDhBcnJheShtc2cubGVuZ3RoKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgKytpKSB7XG4gICAgICBieXRlc1tpXSA9IG1zZy5jaGFyQ29kZUF0KGkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtZDVUb0hleEVuY29kZWRBcnJheSh3b3Jkc1RvTWQ1KGJ5dGVzVG9Xb3JkcyhieXRlcyksIGJ5dGVzLmxlbmd0aCAqIDgpKTtcbn1cbi8qXG4gKiBDb252ZXJ0IGFuIGFycmF5IG9mIGxpdHRsZS1lbmRpYW4gd29yZHMgdG8gYW4gYXJyYXkgb2YgYnl0ZXNcbiAqL1xuXG5cbmZ1bmN0aW9uIG1kNVRvSGV4RW5jb2RlZEFycmF5KGlucHV0KSB7XG4gIGNvbnN0IG91dHB1dCA9IFtdO1xuICBjb25zdCBsZW5ndGgzMiA9IGlucHV0Lmxlbmd0aCAqIDMyO1xuICBjb25zdCBoZXhUYWIgPSAnMDEyMzQ1Njc4OWFiY2RlZic7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGgzMjsgaSArPSA4KSB7XG4gICAgY29uc3QgeCA9IGlucHV0W2kgPj4gNV0gPj4+IGkgJSAzMiAmIDB4ZmY7XG4gICAgY29uc3QgaGV4ID0gcGFyc2VJbnQoaGV4VGFiLmNoYXJBdCh4ID4+PiA0ICYgMHgwZikgKyBoZXhUYWIuY2hhckF0KHggJiAweDBmKSwgMTYpO1xuICAgIG91dHB1dC5wdXNoKGhleCk7XG4gIH1cblxuICByZXR1cm4gb3V0cHV0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGUgb3V0cHV0IGxlbmd0aCB3aXRoIHBhZGRpbmcgYW5kIGJpdCBsZW5ndGhcbiAqL1xuXG5cbmZ1bmN0aW9uIGdldE91dHB1dExlbmd0aChpbnB1dExlbmd0aDgpIHtcbiAgcmV0dXJuIChpbnB1dExlbmd0aDggKyA2NCA+Pj4gOSA8PCA0KSArIDE0ICsgMTtcbn1cbi8qXG4gKiBDYWxjdWxhdGUgdGhlIE1ENSBvZiBhbiBhcnJheSBvZiBsaXR0bGUtZW5kaWFuIHdvcmRzLCBhbmQgYSBiaXQgbGVuZ3RoLlxuICovXG5cblxuZnVuY3Rpb24gd29yZHNUb01kNSh4LCBsZW4pIHtcbiAgLyogYXBwZW5kIHBhZGRpbmcgKi9cbiAgeFtsZW4gPj4gNV0gfD0gMHg4MCA8PCBsZW4gJSAzMjtcbiAgeFtnZXRPdXRwdXRMZW5ndGgobGVuKSAtIDFdID0gbGVuO1xuICBsZXQgYSA9IDE3MzI1ODQxOTM7XG4gIGxldCBiID0gLTI3MTczMzg3OTtcbiAgbGV0IGMgPSAtMTczMjU4NDE5NDtcbiAgbGV0IGQgPSAyNzE3MzM4Nzg7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSArPSAxNikge1xuICAgIGNvbnN0IG9sZGEgPSBhO1xuICAgIGNvbnN0IG9sZGIgPSBiO1xuICAgIGNvbnN0IG9sZGMgPSBjO1xuICAgIGNvbnN0IG9sZGQgPSBkO1xuICAgIGEgPSBtZDVmZihhLCBiLCBjLCBkLCB4W2ldLCA3LCAtNjgwODc2OTM2KTtcbiAgICBkID0gbWQ1ZmYoZCwgYSwgYiwgYywgeFtpICsgMV0sIDEyLCAtMzg5NTY0NTg2KTtcbiAgICBjID0gbWQ1ZmYoYywgZCwgYSwgYiwgeFtpICsgMl0sIDE3LCA2MDYxMDU4MTkpO1xuICAgIGIgPSBtZDVmZihiLCBjLCBkLCBhLCB4W2kgKyAzXSwgMjIsIC0xMDQ0NTI1MzMwKTtcbiAgICBhID0gbWQ1ZmYoYSwgYiwgYywgZCwgeFtpICsgNF0sIDcsIC0xNzY0MTg4OTcpO1xuICAgIGQgPSBtZDVmZihkLCBhLCBiLCBjLCB4W2kgKyA1XSwgMTIsIDEyMDAwODA0MjYpO1xuICAgIGMgPSBtZDVmZihjLCBkLCBhLCBiLCB4W2kgKyA2XSwgMTcsIC0xNDczMjMxMzQxKTtcbiAgICBiID0gbWQ1ZmYoYiwgYywgZCwgYSwgeFtpICsgN10sIDIyLCAtNDU3MDU5ODMpO1xuICAgIGEgPSBtZDVmZihhLCBiLCBjLCBkLCB4W2kgKyA4XSwgNywgMTc3MDAzNTQxNik7XG4gICAgZCA9IG1kNWZmKGQsIGEsIGIsIGMsIHhbaSArIDldLCAxMiwgLTE5NTg0MTQ0MTcpO1xuICAgIGMgPSBtZDVmZihjLCBkLCBhLCBiLCB4W2kgKyAxMF0sIDE3LCAtNDIwNjMpO1xuICAgIGIgPSBtZDVmZihiLCBjLCBkLCBhLCB4W2kgKyAxMV0sIDIyLCAtMTk5MDQwNDE2Mik7XG4gICAgYSA9IG1kNWZmKGEsIGIsIGMsIGQsIHhbaSArIDEyXSwgNywgMTgwNDYwMzY4Mik7XG4gICAgZCA9IG1kNWZmKGQsIGEsIGIsIGMsIHhbaSArIDEzXSwgMTIsIC00MDM0MTEwMSk7XG4gICAgYyA9IG1kNWZmKGMsIGQsIGEsIGIsIHhbaSArIDE0XSwgMTcsIC0xNTAyMDAyMjkwKTtcbiAgICBiID0gbWQ1ZmYoYiwgYywgZCwgYSwgeFtpICsgMTVdLCAyMiwgMTIzNjUzNTMyOSk7XG4gICAgYSA9IG1kNWdnKGEsIGIsIGMsIGQsIHhbaSArIDFdLCA1LCAtMTY1Nzk2NTEwKTtcbiAgICBkID0gbWQ1Z2coZCwgYSwgYiwgYywgeFtpICsgNl0sIDksIC0xMDY5NTAxNjMyKTtcbiAgICBjID0gbWQ1Z2coYywgZCwgYSwgYiwgeFtpICsgMTFdLCAxNCwgNjQzNzE3NzEzKTtcbiAgICBiID0gbWQ1Z2coYiwgYywgZCwgYSwgeFtpXSwgMjAsIC0zNzM4OTczMDIpO1xuICAgIGEgPSBtZDVnZyhhLCBiLCBjLCBkLCB4W2kgKyA1XSwgNSwgLTcwMTU1ODY5MSk7XG4gICAgZCA9IG1kNWdnKGQsIGEsIGIsIGMsIHhbaSArIDEwXSwgOSwgMzgwMTYwODMpO1xuICAgIGMgPSBtZDVnZyhjLCBkLCBhLCBiLCB4W2kgKyAxNV0sIDE0LCAtNjYwNDc4MzM1KTtcbiAgICBiID0gbWQ1Z2coYiwgYywgZCwgYSwgeFtpICsgNF0sIDIwLCAtNDA1NTM3ODQ4KTtcbiAgICBhID0gbWQ1Z2coYSwgYiwgYywgZCwgeFtpICsgOV0sIDUsIDU2ODQ0NjQzOCk7XG4gICAgZCA9IG1kNWdnKGQsIGEsIGIsIGMsIHhbaSArIDE0XSwgOSwgLTEwMTk4MDM2OTApO1xuICAgIGMgPSBtZDVnZyhjLCBkLCBhLCBiLCB4W2kgKyAzXSwgMTQsIC0xODczNjM5NjEpO1xuICAgIGIgPSBtZDVnZyhiLCBjLCBkLCBhLCB4W2kgKyA4XSwgMjAsIDExNjM1MzE1MDEpO1xuICAgIGEgPSBtZDVnZyhhLCBiLCBjLCBkLCB4W2kgKyAxM10sIDUsIC0xNDQ0NjgxNDY3KTtcbiAgICBkID0gbWQ1Z2coZCwgYSwgYiwgYywgeFtpICsgMl0sIDksIC01MTQwMzc4NCk7XG4gICAgYyA9IG1kNWdnKGMsIGQsIGEsIGIsIHhbaSArIDddLCAxNCwgMTczNTMyODQ3Myk7XG4gICAgYiA9IG1kNWdnKGIsIGMsIGQsIGEsIHhbaSArIDEyXSwgMjAsIC0xOTI2NjA3NzM0KTtcbiAgICBhID0gbWQ1aGgoYSwgYiwgYywgZCwgeFtpICsgNV0sIDQsIC0zNzg1NTgpO1xuICAgIGQgPSBtZDVoaChkLCBhLCBiLCBjLCB4W2kgKyA4XSwgMTEsIC0yMDIyNTc0NDYzKTtcbiAgICBjID0gbWQ1aGgoYywgZCwgYSwgYiwgeFtpICsgMTFdLCAxNiwgMTgzOTAzMDU2Mik7XG4gICAgYiA9IG1kNWhoKGIsIGMsIGQsIGEsIHhbaSArIDE0XSwgMjMsIC0zNTMwOTU1Nik7XG4gICAgYSA9IG1kNWhoKGEsIGIsIGMsIGQsIHhbaSArIDFdLCA0LCAtMTUzMDk5MjA2MCk7XG4gICAgZCA9IG1kNWhoKGQsIGEsIGIsIGMsIHhbaSArIDRdLCAxMSwgMTI3Mjg5MzM1Myk7XG4gICAgYyA9IG1kNWhoKGMsIGQsIGEsIGIsIHhbaSArIDddLCAxNiwgLTE1NTQ5NzYzMik7XG4gICAgYiA9IG1kNWhoKGIsIGMsIGQsIGEsIHhbaSArIDEwXSwgMjMsIC0xMDk0NzMwNjQwKTtcbiAgICBhID0gbWQ1aGgoYSwgYiwgYywgZCwgeFtpICsgMTNdLCA0LCA2ODEyNzkxNzQpO1xuICAgIGQgPSBtZDVoaChkLCBhLCBiLCBjLCB4W2ldLCAxMSwgLTM1ODUzNzIyMik7XG4gICAgYyA9IG1kNWhoKGMsIGQsIGEsIGIsIHhbaSArIDNdLCAxNiwgLTcyMjUyMTk3OSk7XG4gICAgYiA9IG1kNWhoKGIsIGMsIGQsIGEsIHhbaSArIDZdLCAyMywgNzYwMjkxODkpO1xuICAgIGEgPSBtZDVoaChhLCBiLCBjLCBkLCB4W2kgKyA5XSwgNCwgLTY0MDM2NDQ4Nyk7XG4gICAgZCA9IG1kNWhoKGQsIGEsIGIsIGMsIHhbaSArIDEyXSwgMTEsIC00MjE4MTU4MzUpO1xuICAgIGMgPSBtZDVoaChjLCBkLCBhLCBiLCB4W2kgKyAxNV0sIDE2LCA1MzA3NDI1MjApO1xuICAgIGIgPSBtZDVoaChiLCBjLCBkLCBhLCB4W2kgKyAyXSwgMjMsIC05OTUzMzg2NTEpO1xuICAgIGEgPSBtZDVpaShhLCBiLCBjLCBkLCB4W2ldLCA2LCAtMTk4NjMwODQ0KTtcbiAgICBkID0gbWQ1aWkoZCwgYSwgYiwgYywgeFtpICsgN10sIDEwLCAxMTI2ODkxNDE1KTtcbiAgICBjID0gbWQ1aWkoYywgZCwgYSwgYiwgeFtpICsgMTRdLCAxNSwgLTE0MTYzNTQ5MDUpO1xuICAgIGIgPSBtZDVpaShiLCBjLCBkLCBhLCB4W2kgKyA1XSwgMjEsIC01NzQzNDA1NSk7XG4gICAgYSA9IG1kNWlpKGEsIGIsIGMsIGQsIHhbaSArIDEyXSwgNiwgMTcwMDQ4NTU3MSk7XG4gICAgZCA9IG1kNWlpKGQsIGEsIGIsIGMsIHhbaSArIDNdLCAxMCwgLTE4OTQ5ODY2MDYpO1xuICAgIGMgPSBtZDVpaShjLCBkLCBhLCBiLCB4W2kgKyAxMF0sIDE1LCAtMTA1MTUyMyk7XG4gICAgYiA9IG1kNWlpKGIsIGMsIGQsIGEsIHhbaSArIDFdLCAyMSwgLTIwNTQ5MjI3OTkpO1xuICAgIGEgPSBtZDVpaShhLCBiLCBjLCBkLCB4W2kgKyA4XSwgNiwgMTg3MzMxMzM1OSk7XG4gICAgZCA9IG1kNWlpKGQsIGEsIGIsIGMsIHhbaSArIDE1XSwgMTAsIC0zMDYxMTc0NCk7XG4gICAgYyA9IG1kNWlpKGMsIGQsIGEsIGIsIHhbaSArIDZdLCAxNSwgLTE1NjAxOTgzODApO1xuICAgIGIgPSBtZDVpaShiLCBjLCBkLCBhLCB4W2kgKyAxM10sIDIxLCAxMzA5MTUxNjQ5KTtcbiAgICBhID0gbWQ1aWkoYSwgYiwgYywgZCwgeFtpICsgNF0sIDYsIC0xNDU1MjMwNzApO1xuICAgIGQgPSBtZDVpaShkLCBhLCBiLCBjLCB4W2kgKyAxMV0sIDEwLCAtMTEyMDIxMDM3OSk7XG4gICAgYyA9IG1kNWlpKGMsIGQsIGEsIGIsIHhbaSArIDJdLCAxNSwgNzE4Nzg3MjU5KTtcbiAgICBiID0gbWQ1aWkoYiwgYywgZCwgYSwgeFtpICsgOV0sIDIxLCAtMzQzNDg1NTUxKTtcbiAgICBhID0gc2FmZUFkZChhLCBvbGRhKTtcbiAgICBiID0gc2FmZUFkZChiLCBvbGRiKTtcbiAgICBjID0gc2FmZUFkZChjLCBvbGRjKTtcbiAgICBkID0gc2FmZUFkZChkLCBvbGRkKTtcbiAgfVxuXG4gIHJldHVybiBbYSwgYiwgYywgZF07XG59XG4vKlxuICogQ29udmVydCBhbiBhcnJheSBieXRlcyB0byBhbiBhcnJheSBvZiBsaXR0bGUtZW5kaWFuIHdvcmRzXG4gKiBDaGFyYWN0ZXJzID4yNTUgaGF2ZSB0aGVpciBoaWdoLWJ5dGUgc2lsZW50bHkgaWdub3JlZC5cbiAqL1xuXG5cbmZ1bmN0aW9uIGJ5dGVzVG9Xb3JkcyhpbnB1dCkge1xuICBpZiAoaW5wdXQubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgY29uc3QgbGVuZ3RoOCA9IGlucHV0Lmxlbmd0aCAqIDg7XG4gIGNvbnN0IG91dHB1dCA9IG5ldyBVaW50MzJBcnJheShnZXRPdXRwdXRMZW5ndGgobGVuZ3RoOCkpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoODsgaSArPSA4KSB7XG4gICAgb3V0cHV0W2kgPj4gNV0gfD0gKGlucHV0W2kgLyA4XSAmIDB4ZmYpIDw8IGkgJSAzMjtcbiAgfVxuXG4gIHJldHVybiBvdXRwdXQ7XG59XG4vKlxuICogQWRkIGludGVnZXJzLCB3cmFwcGluZyBhdCAyXjMyLiBUaGlzIHVzZXMgMTYtYml0IG9wZXJhdGlvbnMgaW50ZXJuYWxseVxuICogdG8gd29yayBhcm91bmQgYnVncyBpbiBzb21lIEpTIGludGVycHJldGVycy5cbiAqL1xuXG5cbmZ1bmN0aW9uIHNhZmVBZGQoeCwgeSkge1xuICBjb25zdCBsc3cgPSAoeCAmIDB4ZmZmZikgKyAoeSAmIDB4ZmZmZik7XG4gIGNvbnN0IG1zdyA9ICh4ID4+IDE2KSArICh5ID4+IDE2KSArIChsc3cgPj4gMTYpO1xuICByZXR1cm4gbXN3IDw8IDE2IHwgbHN3ICYgMHhmZmZmO1xufVxuLypcbiAqIEJpdHdpc2Ugcm90YXRlIGEgMzItYml0IG51bWJlciB0byB0aGUgbGVmdC5cbiAqL1xuXG5cbmZ1bmN0aW9uIGJpdFJvdGF0ZUxlZnQobnVtLCBjbnQpIHtcbiAgcmV0dXJuIG51bSA8PCBjbnQgfCBudW0gPj4+IDMyIC0gY250O1xufVxuLypcbiAqIFRoZXNlIGZ1bmN0aW9ucyBpbXBsZW1lbnQgdGhlIGZvdXIgYmFzaWMgb3BlcmF0aW9ucyB0aGUgYWxnb3JpdGhtIHVzZXMuXG4gKi9cblxuXG5mdW5jdGlvbiBtZDVjbW4ocSwgYSwgYiwgeCwgcywgdCkge1xuICByZXR1cm4gc2FmZUFkZChiaXRSb3RhdGVMZWZ0KHNhZmVBZGQoc2FmZUFkZChhLCBxKSwgc2FmZUFkZCh4LCB0KSksIHMpLCBiKTtcbn1cblxuZnVuY3Rpb24gbWQ1ZmYoYSwgYiwgYywgZCwgeCwgcywgdCkge1xuICByZXR1cm4gbWQ1Y21uKGIgJiBjIHwgfmIgJiBkLCBhLCBiLCB4LCBzLCB0KTtcbn1cblxuZnVuY3Rpb24gbWQ1Z2coYSwgYiwgYywgZCwgeCwgcywgdCkge1xuICByZXR1cm4gbWQ1Y21uKGIgJiBkIHwgYyAmIH5kLCBhLCBiLCB4LCBzLCB0KTtcbn1cblxuZnVuY3Rpb24gbWQ1aGgoYSwgYiwgYywgZCwgeCwgcywgdCkge1xuICByZXR1cm4gbWQ1Y21uKGIgXiBjIF4gZCwgYSwgYiwgeCwgcywgdCk7XG59XG5cbmZ1bmN0aW9uIG1kNWlpKGEsIGIsIGMsIGQsIHgsIHMsIHQpIHtcbiAgcmV0dXJuIG1kNWNtbihjIF4gKGIgfCB+ZCksIGEsIGIsIHgsIHMsIHQpO1xufVxuXG52YXIgX2RlZmF1bHQgPSBtZDU7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbmNvbnN0IHJhbmRvbVVVSUQgPSB0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8ucmFuZG9tVVVJRCAmJiBjcnlwdG8ucmFuZG9tVVVJRC5iaW5kKGNyeXB0byk7XG52YXIgX2RlZmF1bHQgPSB7XG4gIHJhbmRvbVVVSURcbn07XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbnZhciBfZGVmYXVsdCA9ICcwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAnO1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfdmFsaWRhdGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3ZhbGlkYXRlLmpzXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gcGFyc2UodXVpZCkge1xuICBpZiAoISgwLCBfdmFsaWRhdGUuZGVmYXVsdCkodXVpZCkpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ0ludmFsaWQgVVVJRCcpO1xuICB9XG5cbiAgbGV0IHY7XG4gIGNvbnN0IGFyciA9IG5ldyBVaW50OEFycmF5KDE2KTsgLy8gUGFyc2UgIyMjIyMjIyMtLi4uLi0uLi4uLS4uLi4tLi4uLi4uLi4uLi4uXG5cbiAgYXJyWzBdID0gKHYgPSBwYXJzZUludCh1dWlkLnNsaWNlKDAsIDgpLCAxNikpID4+PiAyNDtcbiAgYXJyWzFdID0gdiA+Pj4gMTYgJiAweGZmO1xuICBhcnJbMl0gPSB2ID4+PiA4ICYgMHhmZjtcbiAgYXJyWzNdID0gdiAmIDB4ZmY7IC8vIFBhcnNlIC4uLi4uLi4uLSMjIyMtLi4uLi0uLi4uLS4uLi4uLi4uLi4uLlxuXG4gIGFycls0XSA9ICh2ID0gcGFyc2VJbnQodXVpZC5zbGljZSg5LCAxMyksIDE2KSkgPj4+IDg7XG4gIGFycls1XSA9IHYgJiAweGZmOyAvLyBQYXJzZSAuLi4uLi4uLi0uLi4uLSMjIyMtLi4uLi0uLi4uLi4uLi4uLi5cblxuICBhcnJbNl0gPSAodiA9IHBhcnNlSW50KHV1aWQuc2xpY2UoMTQsIDE4KSwgMTYpKSA+Pj4gODtcbiAgYXJyWzddID0gdiAmIDB4ZmY7IC8vIFBhcnNlIC4uLi4uLi4uLS4uLi4tLi4uLi0jIyMjLS4uLi4uLi4uLi4uLlxuXG4gIGFycls4XSA9ICh2ID0gcGFyc2VJbnQodXVpZC5zbGljZSgxOSwgMjMpLCAxNikpID4+PiA4O1xuICBhcnJbOV0gPSB2ICYgMHhmZjsgLy8gUGFyc2UgLi4uLi4uLi4tLi4uLi0uLi4uLS4uLi4tIyMjIyMjIyMjIyMjXG4gIC8vIChVc2UgXCIvXCIgdG8gYXZvaWQgMzItYml0IHRydW5jYXRpb24gd2hlbiBiaXQtc2hpZnRpbmcgaGlnaC1vcmRlciBieXRlcylcblxuICBhcnJbMTBdID0gKHYgPSBwYXJzZUludCh1dWlkLnNsaWNlKDI0LCAzNiksIDE2KSkgLyAweDEwMDAwMDAwMDAwICYgMHhmZjtcbiAgYXJyWzExXSA9IHYgLyAweDEwMDAwMDAwMCAmIDB4ZmY7XG4gIGFyclsxMl0gPSB2ID4+PiAyNCAmIDB4ZmY7XG4gIGFyclsxM10gPSB2ID4+PiAxNiAmIDB4ZmY7XG4gIGFyclsxNF0gPSB2ID4+PiA4ICYgMHhmZjtcbiAgYXJyWzE1XSA9IHYgJiAweGZmO1xuICByZXR1cm4gYXJyO1xufVxuXG52YXIgX2RlZmF1bHQgPSBwYXJzZTtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xudmFyIF9kZWZhdWx0ID0gL14oPzpbMC05YS1mXXs4fS1bMC05YS1mXXs0fS1bMS01XVswLTlhLWZdezN9LVs4OWFiXVswLTlhLWZdezN9LVswLTlhLWZdezEyfXwwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDApJC9pO1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBybmc7XG4vLyBVbmlxdWUgSUQgY3JlYXRpb24gcmVxdWlyZXMgYSBoaWdoIHF1YWxpdHkgcmFuZG9tICMgZ2VuZXJhdG9yLiBJbiB0aGUgYnJvd3NlciB3ZSB0aGVyZWZvcmVcbi8vIHJlcXVpcmUgdGhlIGNyeXB0byBBUEkgYW5kIGRvIG5vdCBzdXBwb3J0IGJ1aWx0LWluIGZhbGxiYWNrIHRvIGxvd2VyIHF1YWxpdHkgcmFuZG9tIG51bWJlclxuLy8gZ2VuZXJhdG9ycyAobGlrZSBNYXRoLnJhbmRvbSgpKS5cbmxldCBnZXRSYW5kb21WYWx1ZXM7XG5jb25zdCBybmRzOCA9IG5ldyBVaW50OEFycmF5KDE2KTtcblxuZnVuY3Rpb24gcm5nKCkge1xuICAvLyBsYXp5IGxvYWQgc28gdGhhdCBlbnZpcm9ubWVudHMgdGhhdCBuZWVkIHRvIHBvbHlmaWxsIGhhdmUgYSBjaGFuY2UgdG8gZG8gc29cbiAgaWYgKCFnZXRSYW5kb21WYWx1ZXMpIHtcbiAgICAvLyBnZXRSYW5kb21WYWx1ZXMgbmVlZHMgdG8gYmUgaW52b2tlZCBpbiBhIGNvbnRleHQgd2hlcmUgXCJ0aGlzXCIgaXMgYSBDcnlwdG8gaW1wbGVtZW50YXRpb24uXG4gICAgZ2V0UmFuZG9tVmFsdWVzID0gdHlwZW9mIGNyeXB0byAhPT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKTtcblxuICAgIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NyeXB0by5nZXRSYW5kb21WYWx1ZXMoKSBub3Qgc3VwcG9ydGVkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkI2dldHJhbmRvbXZhbHVlcy1ub3Qtc3VwcG9ydGVkJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGdldFJhbmRvbVZhbHVlcyhybmRzOCk7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbi8vIEFkYXB0ZWQgZnJvbSBDaHJpcyBWZW5lc3MnIFNIQTEgY29kZSBhdFxuLy8gaHR0cDovL3d3dy5tb3ZhYmxlLXR5cGUuY28udWsvc2NyaXB0cy9zaGExLmh0bWxcbmZ1bmN0aW9uIGYocywgeCwgeSwgeikge1xuICBzd2l0Y2ggKHMpIHtcbiAgICBjYXNlIDA6XG4gICAgICByZXR1cm4geCAmIHkgXiB+eCAmIHo7XG5cbiAgICBjYXNlIDE6XG4gICAgICByZXR1cm4geCBeIHkgXiB6O1xuXG4gICAgY2FzZSAyOlxuICAgICAgcmV0dXJuIHggJiB5IF4geCAmIHogXiB5ICYgejtcblxuICAgIGNhc2UgMzpcbiAgICAgIHJldHVybiB4IF4geSBeIHo7XG4gIH1cbn1cblxuZnVuY3Rpb24gUk9UTCh4LCBuKSB7XG4gIHJldHVybiB4IDw8IG4gfCB4ID4+PiAzMiAtIG47XG59XG5cbmZ1bmN0aW9uIHNoYTEoYnl0ZXMpIHtcbiAgY29uc3QgSyA9IFsweDVhODI3OTk5LCAweDZlZDllYmExLCAweDhmMWJiY2RjLCAweGNhNjJjMWQ2XTtcbiAgY29uc3QgSCA9IFsweDY3NDUyMzAxLCAweGVmY2RhYjg5LCAweDk4YmFkY2ZlLCAweDEwMzI1NDc2LCAweGMzZDJlMWYwXTtcblxuICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykge1xuICAgIGNvbnN0IG1zZyA9IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChieXRlcykpOyAvLyBVVEY4IGVzY2FwZVxuXG4gICAgYnl0ZXMgPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgKytpKSB7XG4gICAgICBieXRlcy5wdXNoKG1zZy5jaGFyQ29kZUF0KGkpKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkoYnl0ZXMpKSB7XG4gICAgLy8gQ29udmVydCBBcnJheS1saWtlIHRvIEFycmF5XG4gICAgYnl0ZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChieXRlcyk7XG4gIH1cblxuICBieXRlcy5wdXNoKDB4ODApO1xuICBjb25zdCBsID0gYnl0ZXMubGVuZ3RoIC8gNCArIDI7XG4gIGNvbnN0IE4gPSBNYXRoLmNlaWwobCAvIDE2KTtcbiAgY29uc3QgTSA9IG5ldyBBcnJheShOKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IE47ICsraSkge1xuICAgIGNvbnN0IGFyciA9IG5ldyBVaW50MzJBcnJheSgxNik7XG5cbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IDE2OyArK2opIHtcbiAgICAgIGFycltqXSA9IGJ5dGVzW2kgKiA2NCArIGogKiA0XSA8PCAyNCB8IGJ5dGVzW2kgKiA2NCArIGogKiA0ICsgMV0gPDwgMTYgfCBieXRlc1tpICogNjQgKyBqICogNCArIDJdIDw8IDggfCBieXRlc1tpICogNjQgKyBqICogNCArIDNdO1xuICAgIH1cblxuICAgIE1baV0gPSBhcnI7XG4gIH1cblxuICBNW04gLSAxXVsxNF0gPSAoYnl0ZXMubGVuZ3RoIC0gMSkgKiA4IC8gTWF0aC5wb3coMiwgMzIpO1xuICBNW04gLSAxXVsxNF0gPSBNYXRoLmZsb29yKE1bTiAtIDFdWzE0XSk7XG4gIE1bTiAtIDFdWzE1XSA9IChieXRlcy5sZW5ndGggLSAxKSAqIDggJiAweGZmZmZmZmZmO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgTjsgKytpKSB7XG4gICAgY29uc3QgVyA9IG5ldyBVaW50MzJBcnJheSg4MCk7XG5cbiAgICBmb3IgKGxldCB0ID0gMDsgdCA8IDE2OyArK3QpIHtcbiAgICAgIFdbdF0gPSBNW2ldW3RdO1xuICAgIH1cblxuICAgIGZvciAobGV0IHQgPSAxNjsgdCA8IDgwOyArK3QpIHtcbiAgICAgIFdbdF0gPSBST1RMKFdbdCAtIDNdIF4gV1t0IC0gOF0gXiBXW3QgLSAxNF0gXiBXW3QgLSAxNl0sIDEpO1xuICAgIH1cblxuICAgIGxldCBhID0gSFswXTtcbiAgICBsZXQgYiA9IEhbMV07XG4gICAgbGV0IGMgPSBIWzJdO1xuICAgIGxldCBkID0gSFszXTtcbiAgICBsZXQgZSA9IEhbNF07XG5cbiAgICBmb3IgKGxldCB0ID0gMDsgdCA8IDgwOyArK3QpIHtcbiAgICAgIGNvbnN0IHMgPSBNYXRoLmZsb29yKHQgLyAyMCk7XG4gICAgICBjb25zdCBUID0gUk9UTChhLCA1KSArIGYocywgYiwgYywgZCkgKyBlICsgS1tzXSArIFdbdF0gPj4+IDA7XG4gICAgICBlID0gZDtcbiAgICAgIGQgPSBjO1xuICAgICAgYyA9IFJPVEwoYiwgMzApID4+PiAwO1xuICAgICAgYiA9IGE7XG4gICAgICBhID0gVDtcbiAgICB9XG5cbiAgICBIWzBdID0gSFswXSArIGEgPj4+IDA7XG4gICAgSFsxXSA9IEhbMV0gKyBiID4+PiAwO1xuICAgIEhbMl0gPSBIWzJdICsgYyA+Pj4gMDtcbiAgICBIWzNdID0gSFszXSArIGQgPj4+IDA7XG4gICAgSFs0XSA9IEhbNF0gKyBlID4+PiAwO1xuICB9XG5cbiAgcmV0dXJuIFtIWzBdID4+IDI0ICYgMHhmZiwgSFswXSA+PiAxNiAmIDB4ZmYsIEhbMF0gPj4gOCAmIDB4ZmYsIEhbMF0gJiAweGZmLCBIWzFdID4+IDI0ICYgMHhmZiwgSFsxXSA+PiAxNiAmIDB4ZmYsIEhbMV0gPj4gOCAmIDB4ZmYsIEhbMV0gJiAweGZmLCBIWzJdID4+IDI0ICYgMHhmZiwgSFsyXSA+PiAxNiAmIDB4ZmYsIEhbMl0gPj4gOCAmIDB4ZmYsIEhbMl0gJiAweGZmLCBIWzNdID4+IDI0ICYgMHhmZiwgSFszXSA+PiAxNiAmIDB4ZmYsIEhbM10gPj4gOCAmIDB4ZmYsIEhbM10gJiAweGZmLCBIWzRdID4+IDI0ICYgMHhmZiwgSFs0XSA+PiAxNiAmIDB4ZmYsIEhbNF0gPj4gOCAmIDB4ZmYsIEhbNF0gJiAweGZmXTtcbn1cblxudmFyIF9kZWZhdWx0ID0gc2hhMTtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuZXhwb3J0cy51bnNhZmVTdHJpbmdpZnkgPSB1bnNhZmVTdHJpbmdpZnk7XG5cbnZhciBfdmFsaWRhdGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3ZhbGlkYXRlLmpzXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG5jb25zdCBieXRlVG9IZXggPSBbXTtcblxuZm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7ICsraSkge1xuICBieXRlVG9IZXgucHVzaCgoaSArIDB4MTAwKS50b1N0cmluZygxNikuc2xpY2UoMSkpO1xufVxuXG5mdW5jdGlvbiB1bnNhZmVTdHJpbmdpZnkoYXJyLCBvZmZzZXQgPSAwKSB7XG4gIC8vIE5vdGU6IEJlIGNhcmVmdWwgZWRpdGluZyB0aGlzIGNvZGUhICBJdCdzIGJlZW4gdHVuZWQgZm9yIHBlcmZvcm1hbmNlXG4gIC8vIGFuZCB3b3JrcyBpbiB3YXlzIHlvdSBtYXkgbm90IGV4cGVjdC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZC9wdWxsLzQzNFxuICByZXR1cm4gKGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDJdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgM11dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDVdXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA3XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDhdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMV1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxM11dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNV1dKS50b0xvd2VyQ2FzZSgpO1xufVxuXG5mdW5jdGlvbiBzdHJpbmdpZnkoYXJyLCBvZmZzZXQgPSAwKSB7XG4gIGNvbnN0IHV1aWQgPSB1bnNhZmVTdHJpbmdpZnkoYXJyLCBvZmZzZXQpOyAvLyBDb25zaXN0ZW5jeSBjaGVjayBmb3IgdmFsaWQgVVVJRC4gIElmIHRoaXMgdGhyb3dzLCBpdCdzIGxpa2VseSBkdWUgdG8gb25lXG4gIC8vIG9mIHRoZSBmb2xsb3dpbmc6XG4gIC8vIC0gT25lIG9yIG1vcmUgaW5wdXQgYXJyYXkgdmFsdWVzIGRvbid0IG1hcCB0byBhIGhleCBvY3RldCAobGVhZGluZyB0b1xuICAvLyBcInVuZGVmaW5lZFwiIGluIHRoZSB1dWlkKVxuICAvLyAtIEludmFsaWQgaW5wdXQgdmFsdWVzIGZvciB0aGUgUkZDIGB2ZXJzaW9uYCBvciBgdmFyaWFudGAgZmllbGRzXG5cbiAgaWYgKCEoMCwgX3ZhbGlkYXRlLmRlZmF1bHQpKHV1aWQpKSB7XG4gICAgdGhyb3cgVHlwZUVycm9yKCdTdHJpbmdpZmllZCBVVUlEIGlzIGludmFsaWQnKTtcbiAgfVxuXG4gIHJldHVybiB1dWlkO1xufVxuXG52YXIgX2RlZmF1bHQgPSBzdHJpbmdpZnk7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcblxudmFyIF9ybmcgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3JuZy5qc1wiKSk7XG5cbnZhciBfc3RyaW5naWZ5ID0gcmVxdWlyZShcIi4vc3RyaW5naWZ5LmpzXCIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vLyAqKmB2MSgpYCAtIEdlbmVyYXRlIHRpbWUtYmFzZWQgVVVJRCoqXG4vL1xuLy8gSW5zcGlyZWQgYnkgaHR0cHM6Ly9naXRodWIuY29tL0xpb3NLL1VVSUQuanNcbi8vIGFuZCBodHRwOi8vZG9jcy5weXRob24ub3JnL2xpYnJhcnkvdXVpZC5odG1sXG5sZXQgX25vZGVJZDtcblxubGV0IF9jbG9ja3NlcTsgLy8gUHJldmlvdXMgdXVpZCBjcmVhdGlvbiB0aW1lXG5cblxubGV0IF9sYXN0TVNlY3MgPSAwO1xubGV0IF9sYXN0TlNlY3MgPSAwOyAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkIGZvciBBUEkgZGV0YWlsc1xuXG5mdW5jdGlvbiB2MShvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICBsZXQgaSA9IGJ1ZiAmJiBvZmZzZXQgfHwgMDtcbiAgY29uc3QgYiA9IGJ1ZiB8fCBuZXcgQXJyYXkoMTYpO1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgbGV0IG5vZGUgPSBvcHRpb25zLm5vZGUgfHwgX25vZGVJZDtcbiAgbGV0IGNsb2Nrc2VxID0gb3B0aW9ucy5jbG9ja3NlcSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbG9ja3NlcSA6IF9jbG9ja3NlcTsgLy8gbm9kZSBhbmQgY2xvY2tzZXEgbmVlZCB0byBiZSBpbml0aWFsaXplZCB0byByYW5kb20gdmFsdWVzIGlmIHRoZXkncmUgbm90XG4gIC8vIHNwZWNpZmllZC4gIFdlIGRvIHRoaXMgbGF6aWx5IHRvIG1pbmltaXplIGlzc3VlcyByZWxhdGVkIHRvIGluc3VmZmljaWVudFxuICAvLyBzeXN0ZW0gZW50cm9weS4gIFNlZSAjMTg5XG5cbiAgaWYgKG5vZGUgPT0gbnVsbCB8fCBjbG9ja3NlcSA9PSBudWxsKSB7XG4gICAgY29uc3Qgc2VlZEJ5dGVzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IF9ybmcuZGVmYXVsdCkoKTtcblxuICAgIGlmIChub2RlID09IG51bGwpIHtcbiAgICAgIC8vIFBlciA0LjUsIGNyZWF0ZSBhbmQgNDgtYml0IG5vZGUgaWQsICg0NyByYW5kb20gYml0cyArIG11bHRpY2FzdCBiaXQgPSAxKVxuICAgICAgbm9kZSA9IF9ub2RlSWQgPSBbc2VlZEJ5dGVzWzBdIHwgMHgwMSwgc2VlZEJ5dGVzWzFdLCBzZWVkQnl0ZXNbMl0sIHNlZWRCeXRlc1szXSwgc2VlZEJ5dGVzWzRdLCBzZWVkQnl0ZXNbNV1dO1xuICAgIH1cblxuICAgIGlmIChjbG9ja3NlcSA9PSBudWxsKSB7XG4gICAgICAvLyBQZXIgNC4yLjIsIHJhbmRvbWl6ZSAoMTQgYml0KSBjbG9ja3NlcVxuICAgICAgY2xvY2tzZXEgPSBfY2xvY2tzZXEgPSAoc2VlZEJ5dGVzWzZdIDw8IDggfCBzZWVkQnl0ZXNbN10pICYgMHgzZmZmO1xuICAgIH1cbiAgfSAvLyBVVUlEIHRpbWVzdGFtcHMgYXJlIDEwMCBuYW5vLXNlY29uZCB1bml0cyBzaW5jZSB0aGUgR3JlZ29yaWFuIGVwb2NoLFxuICAvLyAoMTU4Mi0xMC0xNSAwMDowMCkuICBKU051bWJlcnMgYXJlbid0IHByZWNpc2UgZW5vdWdoIGZvciB0aGlzLCBzb1xuICAvLyB0aW1lIGlzIGhhbmRsZWQgaW50ZXJuYWxseSBhcyAnbXNlY3MnIChpbnRlZ2VyIG1pbGxpc2Vjb25kcykgYW5kICduc2VjcydcbiAgLy8gKDEwMC1uYW5vc2Vjb25kcyBvZmZzZXQgZnJvbSBtc2Vjcykgc2luY2UgdW5peCBlcG9jaCwgMTk3MC0wMS0wMSAwMDowMC5cblxuXG4gIGxldCBtc2VjcyA9IG9wdGlvbnMubXNlY3MgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubXNlY3MgOiBEYXRlLm5vdygpOyAvLyBQZXIgNC4yLjEuMiwgdXNlIGNvdW50IG9mIHV1aWQncyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBjdXJyZW50IGNsb2NrXG4gIC8vIGN5Y2xlIHRvIHNpbXVsYXRlIGhpZ2hlciByZXNvbHV0aW9uIGNsb2NrXG5cbiAgbGV0IG5zZWNzID0gb3B0aW9ucy5uc2VjcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5uc2VjcyA6IF9sYXN0TlNlY3MgKyAxOyAvLyBUaW1lIHNpbmNlIGxhc3QgdXVpZCBjcmVhdGlvbiAoaW4gbXNlY3MpXG5cbiAgY29uc3QgZHQgPSBtc2VjcyAtIF9sYXN0TVNlY3MgKyAobnNlY3MgLSBfbGFzdE5TZWNzKSAvIDEwMDAwOyAvLyBQZXIgNC4yLjEuMiwgQnVtcCBjbG9ja3NlcSBvbiBjbG9jayByZWdyZXNzaW9uXG5cbiAgaWYgKGR0IDwgMCAmJiBvcHRpb25zLmNsb2Nrc2VxID09PSB1bmRlZmluZWQpIHtcbiAgICBjbG9ja3NlcSA9IGNsb2Nrc2VxICsgMSAmIDB4M2ZmZjtcbiAgfSAvLyBSZXNldCBuc2VjcyBpZiBjbG9jayByZWdyZXNzZXMgKG5ldyBjbG9ja3NlcSkgb3Igd2UndmUgbW92ZWQgb250byBhIG5ld1xuICAvLyB0aW1lIGludGVydmFsXG5cblxuICBpZiAoKGR0IDwgMCB8fCBtc2VjcyA+IF9sYXN0TVNlY3MpICYmIG9wdGlvbnMubnNlY3MgPT09IHVuZGVmaW5lZCkge1xuICAgIG5zZWNzID0gMDtcbiAgfSAvLyBQZXIgNC4yLjEuMiBUaHJvdyBlcnJvciBpZiB0b28gbWFueSB1dWlkcyBhcmUgcmVxdWVzdGVkXG5cblxuICBpZiAobnNlY3MgPj0gMTAwMDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1dWlkLnYxKCk6IENhbid0IGNyZWF0ZSBtb3JlIHRoYW4gMTBNIHV1aWRzL3NlY1wiKTtcbiAgfVxuXG4gIF9sYXN0TVNlY3MgPSBtc2VjcztcbiAgX2xhc3ROU2VjcyA9IG5zZWNzO1xuICBfY2xvY2tzZXEgPSBjbG9ja3NlcTsgLy8gUGVyIDQuMS40IC0gQ29udmVydCBmcm9tIHVuaXggZXBvY2ggdG8gR3JlZ29yaWFuIGVwb2NoXG5cbiAgbXNlY3MgKz0gMTIyMTkyOTI4MDAwMDA7IC8vIGB0aW1lX2xvd2BcblxuICBjb25zdCB0bCA9ICgobXNlY3MgJiAweGZmZmZmZmYpICogMTAwMDAgKyBuc2VjcykgJSAweDEwMDAwMDAwMDtcbiAgYltpKytdID0gdGwgPj4+IDI0ICYgMHhmZjtcbiAgYltpKytdID0gdGwgPj4+IDE2ICYgMHhmZjtcbiAgYltpKytdID0gdGwgPj4+IDggJiAweGZmO1xuICBiW2krK10gPSB0bCAmIDB4ZmY7IC8vIGB0aW1lX21pZGBcblxuICBjb25zdCB0bWggPSBtc2VjcyAvIDB4MTAwMDAwMDAwICogMTAwMDAgJiAweGZmZmZmZmY7XG4gIGJbaSsrXSA9IHRtaCA+Pj4gOCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRtaCAmIDB4ZmY7IC8vIGB0aW1lX2hpZ2hfYW5kX3ZlcnNpb25gXG5cbiAgYltpKytdID0gdG1oID4+PiAyNCAmIDB4ZiB8IDB4MTA7IC8vIGluY2x1ZGUgdmVyc2lvblxuXG4gIGJbaSsrXSA9IHRtaCA+Pj4gMTYgJiAweGZmOyAvLyBgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZGAgKFBlciA0LjIuMiAtIGluY2x1ZGUgdmFyaWFudClcblxuICBiW2krK10gPSBjbG9ja3NlcSA+Pj4gOCB8IDB4ODA7IC8vIGBjbG9ja19zZXFfbG93YFxuXG4gIGJbaSsrXSA9IGNsb2Nrc2VxICYgMHhmZjsgLy8gYG5vZGVgXG5cbiAgZm9yIChsZXQgbiA9IDA7IG4gPCA2OyArK24pIHtcbiAgICBiW2kgKyBuXSA9IG5vZGVbbl07XG4gIH1cblxuICByZXR1cm4gYnVmIHx8ICgwLCBfc3RyaW5naWZ5LnVuc2FmZVN0cmluZ2lmeSkoYik7XG59XG5cbnZhciBfZGVmYXVsdCA9IHYxO1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfdiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdjM1LmpzXCIpKTtcblxudmFyIF9tZCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vbWQ1LmpzXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuY29uc3QgdjMgPSAoMCwgX3YuZGVmYXVsdCkoJ3YzJywgMHgzMCwgX21kLmRlZmF1bHQpO1xudmFyIF9kZWZhdWx0ID0gdjM7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuVVJMID0gZXhwb3J0cy5ETlMgPSB2b2lkIDA7XG5leHBvcnRzLmRlZmF1bHQgPSB2MzU7XG5cbnZhciBfc3RyaW5naWZ5ID0gcmVxdWlyZShcIi4vc3RyaW5naWZ5LmpzXCIpO1xuXG52YXIgX3BhcnNlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9wYXJzZS5qc1wiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIHN0cmluZ1RvQnl0ZXMoc3RyKSB7XG4gIHN0ciA9IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChzdHIpKTsgLy8gVVRGOCBlc2NhcGVcblxuICBjb25zdCBieXRlcyA9IFtdO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgYnl0ZXMucHVzaChzdHIuY2hhckNvZGVBdChpKSk7XG4gIH1cblxuICByZXR1cm4gYnl0ZXM7XG59XG5cbmNvbnN0IEROUyA9ICc2YmE3YjgxMC05ZGFkLTExZDEtODBiNC0wMGMwNGZkNDMwYzgnO1xuZXhwb3J0cy5ETlMgPSBETlM7XG5jb25zdCBVUkwgPSAnNmJhN2I4MTEtOWRhZC0xMWQxLTgwYjQtMDBjMDRmZDQzMGM4JztcbmV4cG9ydHMuVVJMID0gVVJMO1xuXG5mdW5jdGlvbiB2MzUobmFtZSwgdmVyc2lvbiwgaGFzaGZ1bmMpIHtcbiAgZnVuY3Rpb24gZ2VuZXJhdGVVVUlEKHZhbHVlLCBuYW1lc3BhY2UsIGJ1Ziwgb2Zmc2V0KSB7XG4gICAgdmFyIF9uYW1lc3BhY2U7XG5cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgdmFsdWUgPSBzdHJpbmdUb0J5dGVzKHZhbHVlKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG5hbWVzcGFjZSA9ICgwLCBfcGFyc2UuZGVmYXVsdCkobmFtZXNwYWNlKTtcbiAgICB9XG5cbiAgICBpZiAoKChfbmFtZXNwYWNlID0gbmFtZXNwYWNlKSA9PT0gbnVsbCB8fCBfbmFtZXNwYWNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbmFtZXNwYWNlLmxlbmd0aCkgIT09IDE2KSB7XG4gICAgICB0aHJvdyBUeXBlRXJyb3IoJ05hbWVzcGFjZSBtdXN0IGJlIGFycmF5LWxpa2UgKDE2IGl0ZXJhYmxlIGludGVnZXIgdmFsdWVzLCAwLTI1NSknKTtcbiAgICB9IC8vIENvbXB1dGUgaGFzaCBvZiBuYW1lc3BhY2UgYW5kIHZhbHVlLCBQZXIgNC4zXG4gICAgLy8gRnV0dXJlOiBVc2Ugc3ByZWFkIHN5bnRheCB3aGVuIHN1cHBvcnRlZCBvbiBhbGwgcGxhdGZvcm1zLCBlLmcuIGBieXRlcyA9XG4gICAgLy8gaGFzaGZ1bmMoWy4uLm5hbWVzcGFjZSwgLi4uIHZhbHVlXSlgXG5cblxuICAgIGxldCBieXRlcyA9IG5ldyBVaW50OEFycmF5KDE2ICsgdmFsdWUubGVuZ3RoKTtcbiAgICBieXRlcy5zZXQobmFtZXNwYWNlKTtcbiAgICBieXRlcy5zZXQodmFsdWUsIG5hbWVzcGFjZS5sZW5ndGgpO1xuICAgIGJ5dGVzID0gaGFzaGZ1bmMoYnl0ZXMpO1xuICAgIGJ5dGVzWzZdID0gYnl0ZXNbNl0gJiAweDBmIHwgdmVyc2lvbjtcbiAgICBieXRlc1s4XSA9IGJ5dGVzWzhdICYgMHgzZiB8IDB4ODA7XG5cbiAgICBpZiAoYnVmKSB7XG4gICAgICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgKytpKSB7XG4gICAgICAgIGJ1ZltvZmZzZXQgKyBpXSA9IGJ5dGVzW2ldO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnVmO1xuICAgIH1cblxuICAgIHJldHVybiAoMCwgX3N0cmluZ2lmeS51bnNhZmVTdHJpbmdpZnkpKGJ5dGVzKTtcbiAgfSAvLyBGdW5jdGlvbiNuYW1lIGlzIG5vdCBzZXR0YWJsZSBvbiBzb21lIHBsYXRmb3JtcyAoIzI3MClcblxuXG4gIHRyeSB7XG4gICAgZ2VuZXJhdGVVVUlELm5hbWUgPSBuYW1lOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZW1wdHlcbiAgfSBjYXRjaCAoZXJyKSB7fSAvLyBGb3IgQ29tbW9uSlMgZGVmYXVsdCBleHBvcnQgc3VwcG9ydFxuXG5cbiAgZ2VuZXJhdGVVVUlELkROUyA9IEROUztcbiAgZ2VuZXJhdGVVVUlELlVSTCA9IFVSTDtcbiAgcmV0dXJuIGdlbmVyYXRlVVVJRDtcbn0iLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcblxudmFyIF9uYXRpdmUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL25hdGl2ZS5qc1wiKSk7XG5cbnZhciBfcm5nID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9ybmcuanNcIikpO1xuXG52YXIgX3N0cmluZ2lmeSA9IHJlcXVpcmUoXCIuL3N0cmluZ2lmeS5qc1wiKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gdjQob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgaWYgKF9uYXRpdmUuZGVmYXVsdC5yYW5kb21VVUlEICYmICFidWYgJiYgIW9wdGlvbnMpIHtcbiAgICByZXR1cm4gX25hdGl2ZS5kZWZhdWx0LnJhbmRvbVVVSUQoKTtcbiAgfVxuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIGNvbnN0IHJuZHMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgX3JuZy5kZWZhdWx0KSgpOyAvLyBQZXIgNC40LCBzZXQgYml0cyBmb3IgdmVyc2lvbiBhbmQgYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgXG5cblxuICBybmRzWzZdID0gcm5kc1s2XSAmIDB4MGYgfCAweDQwO1xuICBybmRzWzhdID0gcm5kc1s4XSAmIDB4M2YgfCAweDgwOyAvLyBDb3B5IGJ5dGVzIHRvIGJ1ZmZlciwgaWYgcHJvdmlkZWRcblxuICBpZiAoYnVmKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHx8IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyArK2kpIHtcbiAgICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHJuZHNbaV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGJ1ZjtcbiAgfVxuXG4gIHJldHVybiAoMCwgX3N0cmluZ2lmeS51bnNhZmVTdHJpbmdpZnkpKHJuZHMpO1xufVxuXG52YXIgX2RlZmF1bHQgPSB2NDtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgX3YgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3YzNS5qc1wiKSk7XG5cbnZhciBfc2hhID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9zaGExLmpzXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuY29uc3QgdjUgPSAoMCwgX3YuZGVmYXVsdCkoJ3Y1JywgMHg1MCwgX3NoYS5kZWZhdWx0KTtcbnZhciBfZGVmYXVsdCA9IHY1O1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfcmVnZXggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3JlZ2V4LmpzXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gdmFsaWRhdGUodXVpZCkge1xuICByZXR1cm4gdHlwZW9mIHV1aWQgPT09ICdzdHJpbmcnICYmIF9yZWdleC5kZWZhdWx0LnRlc3QodXVpZCk7XG59XG5cbnZhciBfZGVmYXVsdCA9IHZhbGlkYXRlO1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfdmFsaWRhdGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3ZhbGlkYXRlLmpzXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gdmVyc2lvbih1dWlkKSB7XG4gIGlmICghKDAsIF92YWxpZGF0ZS5kZWZhdWx0KSh1dWlkKSkge1xuICAgIHRocm93IFR5cGVFcnJvcignSW52YWxpZCBVVUlEJyk7XG4gIH1cblxuICByZXR1cm4gcGFyc2VJbnQodXVpZC5zbGljZSgxNCwgMTUpLCAxNik7XG59XG5cbnZhciBfZGVmYXVsdCA9IHZlcnNpb247XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDsiLCJjb25zdCByYW5kb21VVUlEID0gdHlwZW9mIGNyeXB0byAhPT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLnJhbmRvbVVVSUQgJiYgY3J5cHRvLnJhbmRvbVVVSUQuYmluZChjcnlwdG8pO1xuZXhwb3J0IGRlZmF1bHQge1xuICByYW5kb21VVUlEXG59OyIsImV4cG9ydCBkZWZhdWx0IC9eKD86WzAtOWEtZl17OH0tWzAtOWEtZl17NH0tWzEtNV1bMC05YS1mXXszfS1bODlhYl1bMC05YS1mXXszfS1bMC05YS1mXXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwKSQvaTsiLCIvLyBVbmlxdWUgSUQgY3JlYXRpb24gcmVxdWlyZXMgYSBoaWdoIHF1YWxpdHkgcmFuZG9tICMgZ2VuZXJhdG9yLiBJbiB0aGUgYnJvd3NlciB3ZSB0aGVyZWZvcmVcbi8vIHJlcXVpcmUgdGhlIGNyeXB0byBBUEkgYW5kIGRvIG5vdCBzdXBwb3J0IGJ1aWx0LWluIGZhbGxiYWNrIHRvIGxvd2VyIHF1YWxpdHkgcmFuZG9tIG51bWJlclxuLy8gZ2VuZXJhdG9ycyAobGlrZSBNYXRoLnJhbmRvbSgpKS5cbmxldCBnZXRSYW5kb21WYWx1ZXM7XG5jb25zdCBybmRzOCA9IG5ldyBVaW50OEFycmF5KDE2KTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJuZygpIHtcbiAgLy8gbGF6eSBsb2FkIHNvIHRoYXQgZW52aXJvbm1lbnRzIHRoYXQgbmVlZCB0byBwb2x5ZmlsbCBoYXZlIGEgY2hhbmNlIHRvIGRvIHNvXG4gIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgLy8gZ2V0UmFuZG9tVmFsdWVzIG5lZWRzIHRvIGJlIGludm9rZWQgaW4gYSBjb250ZXh0IHdoZXJlIFwidGhpc1wiIGlzIGEgQ3J5cHRvIGltcGxlbWVudGF0aW9uLlxuICAgIGdldFJhbmRvbVZhbHVlcyA9IHR5cGVvZiBjcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKGNyeXB0byk7XG5cbiAgICBpZiAoIWdldFJhbmRvbVZhbHVlcykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKCkgbm90IHN1cHBvcnRlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCNnZXRyYW5kb212YWx1ZXMtbm90LXN1cHBvcnRlZCcpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBnZXRSYW5kb21WYWx1ZXMocm5kczgpO1xufSIsImltcG9ydCB2YWxpZGF0ZSBmcm9tICcuL3ZhbGlkYXRlLmpzJztcbi8qKlxuICogQ29udmVydCBhcnJheSBvZiAxNiBieXRlIHZhbHVlcyB0byBVVUlEIHN0cmluZyBmb3JtYXQgb2YgdGhlIGZvcm06XG4gKiBYWFhYWFhYWC1YWFhYLVhYWFgtWFhYWC1YWFhYWFhYWFhYWFhcbiAqL1xuXG5jb25zdCBieXRlVG9IZXggPSBbXTtcblxuZm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7ICsraSkge1xuICBieXRlVG9IZXgucHVzaCgoaSArIDB4MTAwKS50b1N0cmluZygxNikuc2xpY2UoMSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdW5zYWZlU3RyaW5naWZ5KGFyciwgb2Zmc2V0ID0gMCkge1xuICAvLyBOb3RlOiBCZSBjYXJlZnVsIGVkaXRpbmcgdGhpcyBjb2RlISAgSXQncyBiZWVuIHR1bmVkIGZvciBwZXJmb3JtYW5jZVxuICAvLyBhbmQgd29ya3MgaW4gd2F5cyB5b3UgbWF5IG5vdCBleHBlY3QuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQvcHVsbC80MzRcbiAgcmV0dXJuIChieXRlVG9IZXhbYXJyW29mZnNldCArIDBdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMV1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDNdXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA1XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDZdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgN11dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA4XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDldXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTBdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTJdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTNdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTVdXSkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5KGFyciwgb2Zmc2V0ID0gMCkge1xuICBjb25zdCB1dWlkID0gdW5zYWZlU3RyaW5naWZ5KGFyciwgb2Zmc2V0KTsgLy8gQ29uc2lzdGVuY3kgY2hlY2sgZm9yIHZhbGlkIFVVSUQuICBJZiB0aGlzIHRocm93cywgaXQncyBsaWtlbHkgZHVlIHRvIG9uZVxuICAvLyBvZiB0aGUgZm9sbG93aW5nOlxuICAvLyAtIE9uZSBvciBtb3JlIGlucHV0IGFycmF5IHZhbHVlcyBkb24ndCBtYXAgdG8gYSBoZXggb2N0ZXQgKGxlYWRpbmcgdG9cbiAgLy8gXCJ1bmRlZmluZWRcIiBpbiB0aGUgdXVpZClcbiAgLy8gLSBJbnZhbGlkIGlucHV0IHZhbHVlcyBmb3IgdGhlIFJGQyBgdmVyc2lvbmAgb3IgYHZhcmlhbnRgIGZpZWxkc1xuXG4gIGlmICghdmFsaWRhdGUodXVpZCkpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ1N0cmluZ2lmaWVkIFVVSUQgaXMgaW52YWxpZCcpO1xuICB9XG5cbiAgcmV0dXJuIHV1aWQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHN0cmluZ2lmeTsiLCJpbXBvcnQgbmF0aXZlIGZyb20gJy4vbmF0aXZlLmpzJztcbmltcG9ydCBybmcgZnJvbSAnLi9ybmcuanMnO1xuaW1wb3J0IHsgdW5zYWZlU3RyaW5naWZ5IH0gZnJvbSAnLi9zdHJpbmdpZnkuanMnO1xuXG5mdW5jdGlvbiB2NChvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICBpZiAobmF0aXZlLnJhbmRvbVVVSUQgJiYgIWJ1ZiAmJiAhb3B0aW9ucykge1xuICAgIHJldHVybiBuYXRpdmUucmFuZG9tVVVJRCgpO1xuICB9XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIGNvbnN0IHJuZHMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgcm5nKSgpOyAvLyBQZXIgNC40LCBzZXQgYml0cyBmb3IgdmVyc2lvbiBhbmQgYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgXG5cbiAgcm5kc1s2XSA9IHJuZHNbNl0gJiAweDBmIHwgMHg0MDtcbiAgcm5kc1s4XSA9IHJuZHNbOF0gJiAweDNmIHwgMHg4MDsgLy8gQ29weSBieXRlcyB0byBidWZmZXIsIGlmIHByb3ZpZGVkXG5cbiAgaWYgKGJ1Zikge1xuICAgIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgKytpKSB7XG4gICAgICBidWZbb2Zmc2V0ICsgaV0gPSBybmRzW2ldO1xuICAgIH1cblxuICAgIHJldHVybiBidWY7XG4gIH1cblxuICByZXR1cm4gdW5zYWZlU3RyaW5naWZ5KHJuZHMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB2NDsiLCJpbXBvcnQgUkVHRVggZnJvbSAnLi9yZWdleC5qcyc7XG5cbmZ1bmN0aW9uIHZhbGlkYXRlKHV1aWQpIHtcbiAgcmV0dXJuIHR5cGVvZiB1dWlkID09PSAnc3RyaW5nJyAmJiBSRUdFWC50ZXN0KHV1aWQpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB2YWxpZGF0ZTsiLCJpbXBvcnQgeyBPaWRjQ2xpZW50LCBXZWJTdG9yYWdlU3RhdGVTdG9yZSB9IGZyb20gJ0BpbnJ1cHQvb2lkYy1jbGllbnQnO1xuZXhwb3J0IHsgQ29yZG92YUlGcmFtZU5hdmlnYXRvciwgQ29yZG92YVBvcHVwTmF2aWdhdG9yLCBJbk1lbW9yeVdlYlN0b3JhZ2UsIExvZywgT2lkY0NsaWVudCwgU2Vzc2lvbk1vbml0b3IsIFVzZXIsIFVzZXJNYW5hZ2VyLCBWZXJzaW9uLCBXZWJTdG9yYWdlU3RhdGVTdG9yZSB9IGZyb20gJ0BpbnJ1cHQvb2lkYy1jbGllbnQnO1xuaW1wb3J0IHsgZGV0ZXJtaW5lU2lnbmluZ0FsZywgUFJFRkVSUkVEX1NJR05JTkdfQUxHLCBnZXRXZWJpZEZyb21Ub2tlblBheWxvYWQsIE9pZGNQcm92aWRlckVycm9yLCBJbnZhbGlkUmVzcG9uc2VFcnJvciwgZ2VuZXJhdGVEcG9wS2V5UGFpciwgY3JlYXRlRHBvcEhlYWRlciwgREVGQVVMVF9TQ09QRVMgfSBmcm9tICdAaW5ydXB0L3NvbGlkLWNsaWVudC1hdXRobi1jb3JlJztcbmltcG9ydCB7IGZldGNoIGFzIGZldGNoJDEgfSBmcm9tICdAaW5ydXB0L3VuaXZlcnNhbC1mZXRjaCc7XG5cbmZ1bmN0aW9uIHByb2Nlc3NFcnJvclJlc3BvbnNlKHJlc3BvbnNlQm9keSwgb3B0aW9ucykge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICBpZiAocmVzcG9uc2VCb2R5LmVycm9yID09PSBcImludmFsaWRfcmVkaXJlY3RfdXJpXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEeW5hbWljIGNsaWVudCByZWdpc3RyYXRpb24gZmFpbGVkOiB0aGUgcHJvdmlkZWQgcmVkaXJlY3QgdXJpIFskeyhfYSA9IG9wdGlvbnMucmVkaXJlY3RVcmwpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50b1N0cmluZygpfV0gaXMgaW52YWxpZCAtICR7KF9iID0gcmVzcG9uc2VCb2R5LmVycm9yX2Rlc2NyaXB0aW9uKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwifWApO1xuICAgIH1cbiAgICBpZiAocmVzcG9uc2VCb2R5LmVycm9yID09PSBcImludmFsaWRfY2xpZW50X21ldGFkYXRhXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEeW5hbWljIGNsaWVudCByZWdpc3RyYXRpb24gZmFpbGVkOiB0aGUgcHJvdmlkZWQgY2xpZW50IG1ldGFkYXRhICR7SlNPTi5zdHJpbmdpZnkob3B0aW9ucyl9IGlzIGludmFsaWQgLSAkeyhfYyA9IHJlc3BvbnNlQm9keS5lcnJvcl9kZXNjcmlwdGlvbikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogXCJcIn1gKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBEeW5hbWljIGNsaWVudCByZWdpc3RyYXRpb24gZmFpbGVkOiAke3Jlc3BvbnNlQm9keS5lcnJvcn0gLSAkeyhfZCA9IHJlc3BvbnNlQm9keS5lcnJvcl9kZXNjcmlwdGlvbikgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogXCJcIn1gKTtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlUmVnaXN0cmF0aW9uUmVzcG9uc2UocmVzcG9uc2VCb2R5LCBvcHRpb25zKSB7XG4gICAgaWYgKHJlc3BvbnNlQm9keS5jbGllbnRfaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYER5bmFtaWMgY2xpZW50IHJlZ2lzdHJhdGlvbiBmYWlsZWQ6IG5vIGNsaWVudF9pZCBoYXMgYmVlbiBmb3VuZCBvbiAke0pTT04uc3RyaW5naWZ5KHJlc3BvbnNlQm9keSl9YCk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnJlZGlyZWN0VXJsICYmXG4gICAgICAgIChyZXNwb25zZUJvZHkucmVkaXJlY3RfdXJpcyA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICByZXNwb25zZUJvZHkucmVkaXJlY3RfdXJpc1swXSAhPT0gb3B0aW9ucy5yZWRpcmVjdFVybC50b1N0cmluZygpKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYER5bmFtaWMgY2xpZW50IHJlZ2lzdHJhdGlvbiBmYWlsZWQ6IHRoZSByZXR1cm5lZCByZWRpcmVjdCBVUklzICR7SlNPTi5zdHJpbmdpZnkocmVzcG9uc2VCb2R5LnJlZGlyZWN0X3VyaXMpfSBkb24ndCBtYXRjaCB0aGUgcHJvdmlkZWQgJHtKU09OLnN0cmluZ2lmeShbXG4gICAgICAgICAgICBvcHRpb25zLnJlZGlyZWN0VXJsLnRvU3RyaW5nKCksXG4gICAgICAgIF0pfWApO1xuICAgIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIHJlZ2lzdGVyQ2xpZW50KG9wdGlvbnMsIGlzc3VlckNvbmZpZykge1xuICAgIHZhciBfYTtcbiAgICBpZiAoIWlzc3VlckNvbmZpZy5yZWdpc3RyYXRpb25FbmRwb2ludCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEeW5hbWljIFJlZ2lzdHJhdGlvbiBjb3VsZCBub3QgYmUgY29tcGxldGVkIGJlY2F1c2UgdGhlIGlzc3VlciBoYXMgbm8gcmVnaXN0cmF0aW9uIGVuZHBvaW50LlwiKTtcbiAgICB9XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGlzc3VlckNvbmZpZy5pZFRva2VuU2lnbmluZ0FsZ1ZhbHVlc1N1cHBvcnRlZCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIE9JREMgaXNzdWVyIGRpc2NvdmVyeSBwcm9maWxlIGlzIG1pc3NpbmcgdGhlICdpZF90b2tlbl9zaWduaW5nX2FsZ192YWx1ZXNfc3VwcG9ydGVkJyB2YWx1ZSwgd2hpY2ggaXMgbWFuZGF0b3J5LlwiKTtcbiAgICB9XG4gICAgY29uc3Qgc2lnbmluZ0FsZyA9IGRldGVybWluZVNpZ25pbmdBbGcoaXNzdWVyQ29uZmlnLmlkVG9rZW5TaWduaW5nQWxnVmFsdWVzU3VwcG9ydGVkLCBQUkVGRVJSRURfU0lHTklOR19BTEcpO1xuICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgICAgY2xpZW50X25hbWU6IG9wdGlvbnMuY2xpZW50TmFtZSxcbiAgICAgICAgYXBwbGljYXRpb25fdHlwZTogXCJ3ZWJcIixcbiAgICAgICAgcmVkaXJlY3RfdXJpczogWyhfYSA9IG9wdGlvbnMucmVkaXJlY3RVcmwpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50b1N0cmluZygpXSxcbiAgICAgICAgc3ViamVjdF90eXBlOiBcInB1YmxpY1wiLFxuICAgICAgICB0b2tlbl9lbmRwb2ludF9hdXRoX21ldGhvZDogXCJjbGllbnRfc2VjcmV0X2Jhc2ljXCIsXG4gICAgICAgIGlkX3Rva2VuX3NpZ25lZF9yZXNwb25zZV9hbGc6IHNpZ25pbmdBbGcsXG4gICAgICAgIGdyYW50X3R5cGVzOiBbXCJhdXRob3JpemF0aW9uX2NvZGVcIiwgXCJyZWZyZXNoX3Rva2VuXCJdLFxuICAgIH07XG4gICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgfTtcbiAgICBjb25zdCByZWdpc3RlclJlc3BvbnNlID0gYXdhaXQgZmV0Y2goaXNzdWVyQ29uZmlnLnJlZ2lzdHJhdGlvbkVuZHBvaW50LnRvU3RyaW5nKCksIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoY29uZmlnKSxcbiAgICB9KTtcbiAgICBpZiAocmVnaXN0ZXJSZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCByZXNwb25zZUJvZHkgPSBhd2FpdCByZWdpc3RlclJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgdmFsaWRhdGVSZWdpc3RyYXRpb25SZXNwb25zZShyZXNwb25zZUJvZHksIG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2xpZW50SWQ6IHJlc3BvbnNlQm9keS5jbGllbnRfaWQsXG4gICAgICAgICAgICBjbGllbnRTZWNyZXQ6IHJlc3BvbnNlQm9keS5jbGllbnRfc2VjcmV0LFxuICAgICAgICAgICAgaWRUb2tlblNpZ25lZFJlc3BvbnNlQWxnOiByZXNwb25zZUJvZHkuaWRfdG9rZW5fc2lnbmVkX3Jlc3BvbnNlX2FsZyxcbiAgICAgICAgICAgIGNsaWVudFR5cGU6IFwiZHluYW1pY1wiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAocmVnaXN0ZXJSZXNwb25zZS5zdGF0dXMgPT09IDQwMCkge1xuICAgICAgICBwcm9jZXNzRXJyb3JSZXNwb25zZShhd2FpdCByZWdpc3RlclJlc3BvbnNlLmpzb24oKSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihgRHluYW1pYyBjbGllbnQgcmVnaXN0cmF0aW9uIGZhaWxlZDogdGhlIHNlcnZlciByZXR1cm5lZCAke3JlZ2lzdGVyUmVzcG9uc2Uuc3RhdHVzfSAke3JlZ2lzdGVyUmVzcG9uc2Uuc3RhdHVzVGV4dH0gLSAke2F3YWl0IHJlZ2lzdGVyUmVzcG9uc2UudGV4dCgpfWApO1xufVxuXG5mdW5jdGlvbiBoYXNFcnJvcih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5lcnJvciAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiB2YWx1ZS5lcnJvciA9PT0gXCJzdHJpbmdcIjtcbn1cbmZ1bmN0aW9uIGhhc0Vycm9yRGVzY3JpcHRpb24odmFsdWUpIHtcbiAgICByZXR1cm4gKHZhbHVlLmVycm9yX2Rlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgdHlwZW9mIHZhbHVlLmVycm9yX2Rlc2NyaXB0aW9uID09PSBcInN0cmluZ1wiKTtcbn1cbmZ1bmN0aW9uIGhhc0Vycm9yVXJpKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlLmVycm9yX3VyaSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiB2YWx1ZS5lcnJvcl91cmkgPT09IFwic3RyaW5nXCI7XG59XG5mdW5jdGlvbiBoYXNBY2Nlc3NUb2tlbih2YWx1ZSkge1xuICAgIHJldHVybiAodmFsdWUuYWNjZXNzX3Rva2VuICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHZhbHVlLmFjY2Vzc190b2tlbiA9PT0gXCJzdHJpbmdcIik7XG59XG5mdW5jdGlvbiBoYXNJZFRva2VuKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlLmlkX3Rva2VuICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHZhbHVlLmlkX3Rva2VuID09PSBcInN0cmluZ1wiO1xufVxuZnVuY3Rpb24gaGFzUmVmcmVzaFRva2VuKHZhbHVlKSB7XG4gICAgcmV0dXJuICh2YWx1ZS5yZWZyZXNoX3Rva2VuICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHZhbHVlLnJlZnJlc2hfdG9rZW4gPT09IFwic3RyaW5nXCIpO1xufVxuZnVuY3Rpb24gaGFzVG9rZW5UeXBlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlLnRva2VuX3R5cGUgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgdmFsdWUudG9rZW5fdHlwZSA9PT0gXCJzdHJpbmdcIjtcbn1cbmZ1bmN0aW9uIGhhc0V4cGlyZXNJbih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5leHBpcmVzX2luID09PSB1bmRlZmluZWQgfHwgdHlwZW9mIHZhbHVlLmV4cGlyZXNfaW4gPT09IFwibnVtYmVyXCI7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVByZWNvbmRpdGlvbnMoaXNzdWVyLCBkYXRhKSB7XG4gICAgaWYgKGRhdGEuZ3JhbnRUeXBlICYmXG4gICAgICAgICghaXNzdWVyLmdyYW50VHlwZXNTdXBwb3J0ZWQgfHxcbiAgICAgICAgICAgICFpc3N1ZXIuZ3JhbnRUeXBlc1N1cHBvcnRlZC5pbmNsdWRlcyhkYXRhLmdyYW50VHlwZSkpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIGlzc3VlciBbJHtpc3N1ZXIuaXNzdWVyfV0gZG9lcyBub3Qgc3VwcG9ydCB0aGUgWyR7ZGF0YS5ncmFudFR5cGV9XSBncmFudGApO1xuICAgIH1cbiAgICBpZiAoIWlzc3Vlci50b2tlbkVuZHBvaW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhpcyBpc3N1ZXIgWyR7aXNzdWVyLmlzc3Vlcn1dIGRvZXMgbm90IGhhdmUgYSB0b2tlbiBlbmRwb2ludGApO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHZhbGlkYXRlVG9rZW5FbmRwb2ludFJlc3BvbnNlKHRva2VuUmVzcG9uc2UsIGRwb3ApIHtcbiAgICBpZiAoaGFzRXJyb3IodG9rZW5SZXNwb25zZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IE9pZGNQcm92aWRlckVycm9yKGBUb2tlbiBlbmRwb2ludCByZXR1cm5lZCBlcnJvciBbJHt0b2tlblJlc3BvbnNlLmVycm9yfV0ke2hhc0Vycm9yRGVzY3JpcHRpb24odG9rZW5SZXNwb25zZSlcbiAgICAgICAgICAgID8gYDogJHt0b2tlblJlc3BvbnNlLmVycm9yX2Rlc2NyaXB0aW9ufWBcbiAgICAgICAgICAgIDogXCJcIn0ke2hhc0Vycm9yVXJpKHRva2VuUmVzcG9uc2UpID8gYCAoc2VlICR7dG9rZW5SZXNwb25zZS5lcnJvcl91cml9KWAgOiBcIlwifWAsIHRva2VuUmVzcG9uc2UuZXJyb3IsIGhhc0Vycm9yRGVzY3JpcHRpb24odG9rZW5SZXNwb25zZSlcbiAgICAgICAgICAgID8gdG9rZW5SZXNwb25zZS5lcnJvcl9kZXNjcmlwdGlvblxuICAgICAgICAgICAgOiB1bmRlZmluZWQpO1xuICAgIH1cbiAgICBpZiAoIWhhc0FjY2Vzc1Rva2VuKHRva2VuUmVzcG9uc2UpKSB7XG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkUmVzcG9uc2VFcnJvcihbXCJhY2Nlc3NfdG9rZW5cIl0pO1xuICAgIH1cbiAgICBpZiAoIWhhc0lkVG9rZW4odG9rZW5SZXNwb25zZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRSZXNwb25zZUVycm9yKFtcImlkX3Rva2VuXCJdKTtcbiAgICB9XG4gICAgaWYgKCFoYXNUb2tlblR5cGUodG9rZW5SZXNwb25zZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRSZXNwb25zZUVycm9yKFtcInRva2VuX3R5cGVcIl0pO1xuICAgIH1cbiAgICBpZiAoIWhhc0V4cGlyZXNJbih0b2tlblJlc3BvbnNlKSkge1xuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZFJlc3BvbnNlRXJyb3IoW1wiZXhwaXJlc19pblwiXSk7XG4gICAgfVxuICAgIGlmICghZHBvcCAmJiB0b2tlblJlc3BvbnNlLnRva2VuX3R5cGUudG9Mb3dlckNhc2UoKSAhPT0gXCJiZWFyZXJcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdG9rZW4gZW5kcG9pbnQgcmVzcG9uc2U6IHJlcXVlc3RlZCBhIFtCZWFyZXJdIHRva2VuLCBidXQgZ290IGEgJ3Rva2VuX3R5cGUnIHZhbHVlIG9mIFske3Rva2VuUmVzcG9uc2UudG9rZW5fdHlwZX1dLmApO1xuICAgIH1cbiAgICByZXR1cm4gdG9rZW5SZXNwb25zZTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdldFRva2Vucyhpc3N1ZXIsIGNsaWVudCwgZGF0YSwgZHBvcCkge1xuICAgIHZhbGlkYXRlUHJlY29uZGl0aW9ucyhpc3N1ZXIsIGRhdGEpO1xuICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsXG4gICAgfTtcbiAgICBsZXQgZHBvcEtleTtcbiAgICBpZiAoZHBvcCkge1xuICAgICAgICBkcG9wS2V5ID0gYXdhaXQgZ2VuZXJhdGVEcG9wS2V5UGFpcigpO1xuICAgICAgICBoZWFkZXJzLkRQb1AgPSBhd2FpdCBjcmVhdGVEcG9wSGVhZGVyKGlzc3Vlci50b2tlbkVuZHBvaW50LCBcIlBPU1RcIiwgZHBvcEtleSk7XG4gICAgfVxuICAgIGlmIChjbGllbnQuY2xpZW50U2VjcmV0KSB7XG4gICAgICAgIGhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IGBCYXNpYyAke2J0b2EoYCR7Y2xpZW50LmNsaWVudElkfToke2NsaWVudC5jbGllbnRTZWNyZXR9YCl9YDtcbiAgICB9XG4gICAgY29uc3QgcmVxdWVzdEJvZHkgPSB7XG4gICAgICAgIGdyYW50X3R5cGU6IGRhdGEuZ3JhbnRUeXBlLFxuICAgICAgICByZWRpcmVjdF91cmk6IGRhdGEucmVkaXJlY3RVcmwsXG4gICAgICAgIGNvZGU6IGRhdGEuY29kZSxcbiAgICAgICAgY29kZV92ZXJpZmllcjogZGF0YS5jb2RlVmVyaWZpZXIsXG4gICAgICAgIGNsaWVudF9pZDogY2xpZW50LmNsaWVudElkLFxuICAgIH07XG4gICAgY29uc3QgdG9rZW5SZXF1ZXN0SW5pdCA9IHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVycyxcbiAgICAgICAgYm9keTogbmV3IFVSTFNlYXJjaFBhcmFtcyhyZXF1ZXN0Qm9keSkudG9TdHJpbmcoKSxcbiAgICB9O1xuICAgIGNvbnN0IHJhd1Rva2VuUmVzcG9uc2UgPSBhd2FpdCBmZXRjaCQxKGlzc3Vlci50b2tlbkVuZHBvaW50LCB0b2tlblJlcXVlc3RJbml0KTtcbiAgICBjb25zdCBqc29uVG9rZW5SZXNwb25zZSA9IChhd2FpdCByYXdUb2tlblJlc3BvbnNlLmpzb24oKSk7XG4gICAgY29uc3QgdG9rZW5SZXNwb25zZSA9IHZhbGlkYXRlVG9rZW5FbmRwb2ludFJlc3BvbnNlKGpzb25Ub2tlblJlc3BvbnNlLCBkcG9wKTtcbiAgICBjb25zdCB3ZWJJZCA9IGF3YWl0IGdldFdlYmlkRnJvbVRva2VuUGF5bG9hZCh0b2tlblJlc3BvbnNlLmlkX3Rva2VuLCBpc3N1ZXIuandrc1VyaSwgaXNzdWVyLmlzc3VlciwgY2xpZW50LmNsaWVudElkKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhY2Nlc3NUb2tlbjogdG9rZW5SZXNwb25zZS5hY2Nlc3NfdG9rZW4sXG4gICAgICAgIGlkVG9rZW46IHRva2VuUmVzcG9uc2UuaWRfdG9rZW4sXG4gICAgICAgIHJlZnJlc2hUb2tlbjogaGFzUmVmcmVzaFRva2VuKHRva2VuUmVzcG9uc2UpXG4gICAgICAgICAgICA/IHRva2VuUmVzcG9uc2UucmVmcmVzaF90b2tlblxuICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgIHdlYklkLFxuICAgICAgICBkcG9wS2V5LFxuICAgICAgICBleHBpcmVzSW46IHRva2VuUmVzcG9uc2UuZXhwaXJlc19pbixcbiAgICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0QmVhcmVyVG9rZW4ocmVkaXJlY3RVcmwpIHtcbiAgICBsZXQgc2lnbmluUmVzcG9uc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gbmV3IE9pZGNDbGllbnQoe1xuICAgICAgICAgICAgcmVzcG9uc2VfbW9kZTogXCJxdWVyeVwiLFxuICAgICAgICAgICAgbG9hZFVzZXJJbmZvOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHNpZ25pblJlc3BvbnNlID0gYXdhaXQgY2xpZW50LnByb2Nlc3NTaWduaW5SZXNwb25zZShyZWRpcmVjdFVybCk7XG4gICAgICAgIGlmIChjbGllbnQuc2V0dGluZ3MubWV0YWRhdGEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHJldHJpZXZlIGlzc3VlciBtZXRhZGF0YSBmcm9tIGNsaWVudCBpbmZvcm1hdGlvbiBpbiBzdG9yYWdlLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2xpZW50LnNldHRpbmdzLm1ldGFkYXRhLmp3a3NfdXJpID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3Npbmcgc29tZSBpc3N1ZXIgbWV0YWRhdGEgZnJvbSBjbGllbnQgaW5mb3JtYXRpb24gaW4gc3RvcmFnZTogJ2p3a3NfdXJpJyBpcyB1bmRlZmluZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNsaWVudC5zZXR0aW5ncy5tZXRhZGF0YS5pc3N1ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBzb21lIGlzc3VlciBtZXRhZGF0YSBmcm9tIGNsaWVudCBpbmZvcm1hdGlvbiBpbiBzdG9yYWdlOiAnaXNzdWVyJyBpcyB1bmRlZmluZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNsaWVudC5zZXR0aW5ncy5jbGllbnRfaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBzb21lIGNsaWVudCBpbmZvcm1hdGlvbiBpbiBzdG9yYWdlOiAnY2xpZW50X2lkJyBpcyB1bmRlZmluZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd2ViSWQgPSBhd2FpdCBnZXRXZWJpZEZyb21Ub2tlblBheWxvYWQoc2lnbmluUmVzcG9uc2UuaWRfdG9rZW4sIGNsaWVudC5zZXR0aW5ncy5tZXRhZGF0YS5qd2tzX3VyaSwgY2xpZW50LnNldHRpbmdzLm1ldGFkYXRhLmlzc3VlciwgY2xpZW50LnNldHRpbmdzLmNsaWVudF9pZCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogc2lnbmluUmVzcG9uc2UuYWNjZXNzX3Rva2VuLFxuICAgICAgICAgICAgaWRUb2tlbjogc2lnbmluUmVzcG9uc2UuaWRfdG9rZW4sXG4gICAgICAgICAgICB3ZWJJZCxcbiAgICAgICAgICAgIHJlZnJlc2hUb2tlbjogc2lnbmluUmVzcG9uc2UucmVmcmVzaF90b2tlbixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFByb2JsZW0gaGFuZGxpbmcgQXV0aCBDb2RlIEdyYW50IChGbG93KSByZWRpcmVjdCAtIFVSTCBbJHtyZWRpcmVjdFVybH1dOiAke2Vycn1gKTtcbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiBnZXREcG9wVG9rZW4oaXNzdWVyLCBjbGllbnQsIGRhdGEpIHtcbiAgICByZXR1cm4gZ2V0VG9rZW5zKGlzc3VlciwgY2xpZW50LCBkYXRhLCB0cnVlKTtcbn1cblxuY29uc3QgaXNWYWxpZFVybCA9ICh1cmwpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBuZXcgVVJMKHVybCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn07XG5hc3luYyBmdW5jdGlvbiByZWZyZXNoKHJlZnJlc2hUb2tlbiwgaXNzdWVyLCBjbGllbnQsIGRwb3BLZXkpIHtcbiAgICBpZiAoY2xpZW50LmNsaWVudElkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gY2xpZW50IElEIGF2YWlsYWJsZSB3aGVuIHRyeWluZyB0byByZWZyZXNoIHRoZSBhY2Nlc3MgdG9rZW4uXCIpO1xuICAgIH1cbiAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcbiAgICAgICAgZ3JhbnRfdHlwZTogXCJyZWZyZXNoX3Rva2VuXCIsXG4gICAgICAgIHJlZnJlc2hfdG9rZW46IHJlZnJlc2hUb2tlbixcbiAgICAgICAgc2NvcGU6IERFRkFVTFRfU0NPUEVTLFxuICAgIH07XG4gICAgbGV0IGRwb3BIZWFkZXIgPSB7fTtcbiAgICBpZiAoZHBvcEtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGRwb3BIZWFkZXIgPSB7XG4gICAgICAgICAgICBEUG9QOiBhd2FpdCBjcmVhdGVEcG9wSGVhZGVyKGlzc3Vlci50b2tlbkVuZHBvaW50LCBcIlBPU1RcIiwgZHBvcEtleSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGxldCBhdXRoSGVhZGVyID0ge307XG4gICAgaWYgKGNsaWVudC5jbGllbnRTZWNyZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBhdXRoSGVhZGVyID0ge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJhc2ljICR7YnRvYShgJHtjbGllbnQuY2xpZW50SWR9OiR7Y2xpZW50LmNsaWVudFNlY3JldH1gKX1gLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChpc1ZhbGlkVXJsKGNsaWVudC5jbGllbnRJZCkpIHtcbiAgICAgICAgcmVxdWVzdEJvZHkuY2xpZW50X2lkID0gY2xpZW50LmNsaWVudElkO1xuICAgIH1cbiAgICBjb25zdCByYXdSZXNwb25zZSA9IGF3YWl0IGZldGNoJDEoaXNzdWVyLnRva2VuRW5kcG9pbnQsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgYm9keTogbmV3IFVSTFNlYXJjaFBhcmFtcyhyZXF1ZXN0Qm9keSkudG9TdHJpbmcoKSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgLi4uZHBvcEhlYWRlcixcbiAgICAgICAgICAgIC4uLmF1dGhIZWFkZXIsXG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIGxldCByZXNwb25zZTtcbiAgICB0cnkge1xuICAgICAgICByZXNwb25zZSA9IGF3YWl0IHJhd1Jlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgdG9rZW4gZW5kcG9pbnQgb2YgaXNzdWVyICR7aXNzdWVyLmlzc3Vlcn0gcmV0dXJuZWQgYSBtYWxmb3JtZWQgcmVzcG9uc2UuYCk7XG4gICAgfVxuICAgIGNvbnN0IHZhbGlkYXRlZFJlc3BvbnNlID0gdmFsaWRhdGVUb2tlbkVuZHBvaW50UmVzcG9uc2UocmVzcG9uc2UsIGRwb3BLZXkgIT09IHVuZGVmaW5lZCk7XG4gICAgY29uc3Qgd2ViSWQgPSBhd2FpdCBnZXRXZWJpZEZyb21Ub2tlblBheWxvYWQodmFsaWRhdGVkUmVzcG9uc2UuaWRfdG9rZW4sIGlzc3Vlci5qd2tzVXJpLCBpc3N1ZXIuaXNzdWVyLCBjbGllbnQuY2xpZW50SWQpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFjY2Vzc1Rva2VuOiB2YWxpZGF0ZWRSZXNwb25zZS5hY2Nlc3NfdG9rZW4sXG4gICAgICAgIGlkVG9rZW46IHZhbGlkYXRlZFJlc3BvbnNlLmlkX3Rva2VuLFxuICAgICAgICByZWZyZXNoVG9rZW46IHR5cGVvZiB2YWxpZGF0ZWRSZXNwb25zZS5yZWZyZXNoX3Rva2VuID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IHZhbGlkYXRlZFJlc3BvbnNlLnJlZnJlc2hfdG9rZW5cbiAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICB3ZWJJZCxcbiAgICAgICAgZHBvcEtleSxcbiAgICAgICAgZXhwaXJlc0luOiB2YWxpZGF0ZWRSZXNwb25zZS5leHBpcmVzX2luLFxuICAgIH07XG59XG5cbmZ1bmN0aW9uIHJlbW92ZU9pZGNRdWVyeVBhcmFtKHJlZGlyZWN0VXJsKSB7XG4gICAgY29uc3QgY2xlYW5lZFVybCA9IG5ldyBVUkwocmVkaXJlY3RVcmwpO1xuICAgIGNsZWFuZWRVcmwuc2VhcmNoUGFyYW1zLmRlbGV0ZShcImNvZGVcIik7XG4gICAgY2xlYW5lZFVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKFwic3RhdGVcIik7XG4gICAgY2xlYW5lZFVybC5oYXNoID0gXCJcIjtcbiAgICBpZiAocmVkaXJlY3RVcmwuaW5jbHVkZXMoYCR7Y2xlYW5lZFVybC5vcmlnaW59L2ApKSB7XG4gICAgICAgIHJldHVybiBjbGVhbmVkVXJsLmhyZWY7XG4gICAgfVxuICAgIHJldHVybiBgJHtjbGVhbmVkVXJsLm9yaWdpbn0ke2NsZWFuZWRVcmwuaHJlZi5zdWJzdHJpbmcoY2xlYW5lZFVybC5vcmlnaW4ubGVuZ3RoICsgMSl9YDtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNsZWFyT2lkY1BlcnNpc3RlbnRTdG9yYWdlKCkge1xuICAgIGNvbnN0IGNsaWVudCA9IG5ldyBPaWRjQ2xpZW50KHtcbiAgICAgICAgcmVzcG9uc2VfbW9kZTogXCJxdWVyeVwiLFxuICAgIH0pO1xuICAgIGF3YWl0IGNsaWVudC5jbGVhclN0YWxlU3RhdGUobmV3IFdlYlN0b3JhZ2VTdGF0ZVN0b3JlKHt9KSk7XG4gICAgY29uc3QgbXlTdG9yYWdlID0gd2luZG93LmxvY2FsU3RvcmFnZTtcbiAgICBjb25zdCBpdGVtc1RvUmVtb3ZlID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gbXlTdG9yYWdlLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IG15U3RvcmFnZS5rZXkoaSk7XG4gICAgICAgIGlmIChrZXkgJiZcbiAgICAgICAgICAgIChrZXkubWF0Y2goL15vaWRjXFwuLiskLykgfHxcbiAgICAgICAgICAgICAgICBrZXkubWF0Y2goL15zb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uVXNlcjouKyQvKSkpIHtcbiAgICAgICAgICAgIGl0ZW1zVG9SZW1vdmUucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGl0ZW1zVG9SZW1vdmUuZm9yRWFjaCgoa2V5KSA9PiBteVN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpKTtcbn1cblxuZXhwb3J0IHsgY2xlYXJPaWRjUGVyc2lzdGVudFN0b3JhZ2UsIGdldEJlYXJlclRva2VuLCBnZXREcG9wVG9rZW4sIHJlZnJlc2gsIHJlZ2lzdGVyQ2xpZW50LCByZW1vdmVPaWRjUXVlcnlQYXJhbSB9O1xuIiwiIWZ1bmN0aW9uIHQoZSxyKXtpZihcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1yKCk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLHIpO2Vsc2V7dmFyIG49cigpO2Zvcih2YXIgaSBpbiBuKShcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzOmUpW2ldPW5baV19fSh0aGlzLChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgZT17fTtmdW5jdGlvbiByKG4pe2lmKGVbbl0pcmV0dXJuIGVbbl0uZXhwb3J0czt2YXIgaT1lW25dPXtpOm4sbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gdFtuXS5jYWxsKGkuZXhwb3J0cyxpLGkuZXhwb3J0cyxyKSxpLmw9ITAsaS5leHBvcnRzfXJldHVybiByLm09dCxyLmM9ZSxyLmQ9ZnVuY3Rpb24odCxlLG4pe3Iubyh0LGUpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHtlbnVtZXJhYmxlOiEwLGdldDpufSl9LHIucj1mdW5jdGlvbih0KXtcInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6XCJNb2R1bGVcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfSxyLnQ9ZnVuY3Rpb24odCxlKXtpZigxJmUmJih0PXIodCkpLDgmZSlyZXR1cm4gdDtpZig0JmUmJlwib2JqZWN0XCI9PXR5cGVvZiB0JiZ0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtpZihyLnIobiksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4sXCJkZWZhdWx0XCIse2VudW1lcmFibGU6ITAsdmFsdWU6dH0pLDImZSYmXCJzdHJpbmdcIiE9dHlwZW9mIHQpZm9yKHZhciBpIGluIHQpci5kKG4saSxmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX0uYmluZChudWxsLGkpKTtyZXR1cm4gbn0sci5uPWZ1bmN0aW9uKHQpe3ZhciBlPXQmJnQuX19lc01vZHVsZT9mdW5jdGlvbiBlKCl7cmV0dXJuIHQuZGVmYXVsdH06ZnVuY3Rpb24gZSgpe3JldHVybiB0fTtyZXR1cm4gci5kKGUsXCJhXCIsZSksZX0sci5vPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpfSxyLnA9XCJcIixyKHIucz0yMil9KFtmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBuPWVbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSxyLG4pe3JldHVybiByJiZ0KGUucHJvdG90eXBlLHIpLG4mJnQoZSxuKSxlfX0oKTt2YXIgaT17ZGVidWc6ZnVuY3Rpb24gdCgpe30saW5mbzpmdW5jdGlvbiB0KCl7fSx3YXJuOmZ1bmN0aW9uIHQoKXt9LGVycm9yOmZ1bmN0aW9uIHQoKXt9fSxvPXZvaWQgMCxzPXZvaWQgMDsoZS5Mb2c9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7IWZ1bmN0aW9uIGUodCxyKXtpZighKHQgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLHQpfXJldHVybiB0LnJlc2V0PWZ1bmN0aW9uIHQoKXtzPTMsbz1pfSx0LmRlYnVnPWZ1bmN0aW9uIHQoKXtpZihzPj00KXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCxyPUFycmF5KGUpLG49MDtuPGU7bisrKXJbbl09YXJndW1lbnRzW25dO28uZGVidWcuYXBwbHkobyxBcnJheS5mcm9tKHIpKX19LHQuaW5mbz1mdW5jdGlvbiB0KCl7aWYocz49Myl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgscj1BcnJheShlKSxuPTA7bjxlO24rKylyW25dPWFyZ3VtZW50c1tuXTtvLmluZm8uYXBwbHkobyxBcnJheS5mcm9tKHIpKX19LHQud2Fybj1mdW5jdGlvbiB0KCl7aWYocz49Mil7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgscj1BcnJheShlKSxuPTA7bjxlO24rKylyW25dPWFyZ3VtZW50c1tuXTtvLndhcm4uYXBwbHkobyxBcnJheS5mcm9tKHIpKX19LHQuZXJyb3I9ZnVuY3Rpb24gdCgpe2lmKHM+PTEpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoLHI9QXJyYXkoZSksbj0wO248ZTtuKyspcltuXT1hcmd1bWVudHNbbl07by5lcnJvci5hcHBseShvLEFycmF5LmZyb20ocikpfX0sbih0LG51bGwsW3trZXk6XCJOT05FXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gMH19LHtrZXk6XCJFUlJPUlwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIDF9fSx7a2V5OlwiV0FSTlwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIDJ9fSx7a2V5OlwiSU5GT1wiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIDN9fSx7a2V5OlwiREVCVUdcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiA0fX0se2tleTpcImxldmVsXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gc30sc2V0OmZ1bmN0aW9uIHQoZSl7aWYoISgwPD1lJiZlPD00KSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGxvZyBsZXZlbFwiKTtzPWV9fSx7a2V5OlwibG9nZ2VyXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gb30sc2V0OmZ1bmN0aW9uIHQoZSl7aWYoIWUuZGVidWcmJmUuaW5mbyYmKGUuZGVidWc9ZS5pbmZvKSwhKGUuZGVidWcmJmUuaW5mbyYmZS53YXJuJiZlLmVycm9yKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGxvZ2dlclwiKTtvPWV9fV0pLHR9KCkpLnJlc2V0KCl9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG49ZVtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbihlLHIsbil7cmV0dXJuIHImJnQoZS5wcm90b3R5cGUsciksbiYmdChlLG4pLGV9fSgpO3ZhciBpPXtzZXRJbnRlcnZhbDpmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUscil7cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHQudG9TdHJpbmcoKX0sZX0oKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHNldEludGVydmFsKHQsZSl9KSksY2xlYXJJbnRlcnZhbDpmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3JldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0LnRvU3RyaW5nKCl9LGV9KChmdW5jdGlvbih0KXtyZXR1cm4gY2xlYXJJbnRlcnZhbCh0KX0pKX0sbz0hMSxzPW51bGw7ZS5HbG9iYWw9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7IWZ1bmN0aW9uIGUodCxyKXtpZighKHQgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLHQpfXJldHVybiB0Ll90ZXN0aW5nPWZ1bmN0aW9uIHQoKXtvPSEwfSx0LnNldFhNTEh0dHBSZXF1ZXN0PWZ1bmN0aW9uIHQoZSl7cz1lfSxuKHQsbnVsbCxbe2tleTpcImxvY2F0aW9uXCIsZ2V0OmZ1bmN0aW9uIHQoKXtpZighbylyZXR1cm4gbG9jYXRpb259fSx7a2V5OlwibG9jYWxTdG9yYWdlXCIsZ2V0OmZ1bmN0aW9uIHQoKXtpZighbyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdylyZXR1cm4gbG9jYWxTdG9yYWdlfX0se2tleTpcInNlc3Npb25TdG9yYWdlXCIsZ2V0OmZ1bmN0aW9uIHQoKXtpZighbyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdylyZXR1cm4gc2Vzc2lvblN0b3JhZ2V9fSx7a2V5OlwiWE1MSHR0cFJlcXVlc3RcIixnZXQ6ZnVuY3Rpb24gdCgpe2lmKCFvJiZcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93KXJldHVybiBzfHxYTUxIdHRwUmVxdWVzdH19LHtrZXk6XCJ0aW1lclwiLGdldDpmdW5jdGlvbiB0KCl7aWYoIW8pcmV0dXJuIGl9fV0pLHR9KCl9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLk1ldGFkYXRhU2VydmljZT12b2lkIDA7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBuPWVbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSxyLG4pe3JldHVybiByJiZ0KGUucHJvdG90eXBlLHIpLG4mJnQoZSxuKSxlfX0oKSxpPXIoMCksbz1yKDcpO2Z1bmN0aW9uIHModCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfXZhciBhPVwiLndlbGwta25vd24vb3BlbmlkLWNvbmZpZ3VyYXRpb25cIjtlLk1ldGFkYXRhU2VydmljZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOm8uSnNvblNlcnZpY2U7aWYocyh0aGlzLHQpLCFlKXRocm93IGkuTG9nLmVycm9yKFwiTWV0YWRhdGFTZXJ2aWNlOiBObyBzZXR0aW5ncyBwYXNzZWQgdG8gTWV0YWRhdGFTZXJ2aWNlXCIpLG5ldyBFcnJvcihcInNldHRpbmdzXCIpO3RoaXMuX3NldHRpbmdzPWUsdGhpcy5fanNvblNlcnZpY2U9bmV3IHIoW1wiYXBwbGljYXRpb24vandrLXNldCtqc29uXCJdKX1yZXR1cm4gdC5wcm90b3R5cGUucmVzZXRTaWduaW5nS2V5cz1mdW5jdGlvbiB0KCl7dGhpcy5fc2V0dGluZ3M9dGhpcy5fc2V0dGluZ3N8fHt9LHRoaXMuX3NldHRpbmdzLnNpZ25pbmdLZXlzPXZvaWQgMH0sdC5wcm90b3R5cGUuZ2V0TWV0YWRhdGE9ZnVuY3Rpb24gdCgpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX3NldHRpbmdzLm1ldGFkYXRhPyhpLkxvZy5kZWJ1ZyhcIk1ldGFkYXRhU2VydmljZS5nZXRNZXRhZGF0YTogUmV0dXJuaW5nIG1ldGFkYXRhIGZyb20gc2V0dGluZ3NcIiksUHJvbWlzZS5yZXNvbHZlKHRoaXMuX3NldHRpbmdzLm1ldGFkYXRhKSk6dGhpcy5tZXRhZGF0YVVybD8oaS5Mb2cuZGVidWcoXCJNZXRhZGF0YVNlcnZpY2UuZ2V0TWV0YWRhdGE6IGdldHRpbmcgbWV0YWRhdGEgZnJvbVwiLHRoaXMubWV0YWRhdGFVcmwpLHRoaXMuX2pzb25TZXJ2aWNlLmdldEpzb24odGhpcy5tZXRhZGF0YVVybCkudGhlbigoZnVuY3Rpb24odCl7aS5Mb2cuZGVidWcoXCJNZXRhZGF0YVNlcnZpY2UuZ2V0TWV0YWRhdGE6IGpzb24gcmVjZWl2ZWRcIik7dmFyIHI9ZS5fc2V0dGluZ3MubWV0YWRhdGFTZWVkfHx7fTtyZXR1cm4gZS5fc2V0dGluZ3MubWV0YWRhdGE9T2JqZWN0LmFzc2lnbih7fSxyLHQpLGUuX3NldHRpbmdzLm1ldGFkYXRhfSkpKTooaS5Mb2cuZXJyb3IoXCJNZXRhZGF0YVNlcnZpY2UuZ2V0TWV0YWRhdGE6IE5vIGF1dGhvcml0eSBvciBtZXRhZGF0YVVybCBjb25maWd1cmVkIG9uIHNldHRpbmdzXCIpLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIk5vIGF1dGhvcml0eSBvciBtZXRhZGF0YVVybCBjb25maWd1cmVkIG9uIHNldHRpbmdzXCIpKSl9LHQucHJvdG90eXBlLmdldElzc3Vlcj1mdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX2dldE1ldGFkYXRhUHJvcGVydHkoXCJpc3N1ZXJcIil9LHQucHJvdG90eXBlLmdldEF1dGhvcml6YXRpb25FbmRwb2ludD1mdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX2dldE1ldGFkYXRhUHJvcGVydHkoXCJhdXRob3JpemF0aW9uX2VuZHBvaW50XCIpfSx0LnByb3RvdHlwZS5nZXRVc2VySW5mb0VuZHBvaW50PWZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fZ2V0TWV0YWRhdGFQcm9wZXJ0eShcInVzZXJpbmZvX2VuZHBvaW50XCIpfSx0LnByb3RvdHlwZS5nZXRUb2tlbkVuZHBvaW50PWZ1bmN0aW9uIHQoKXt2YXIgZT0hKGFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdKXx8YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLl9nZXRNZXRhZGF0YVByb3BlcnR5KFwidG9rZW5fZW5kcG9pbnRcIixlKX0sdC5wcm90b3R5cGUuZ2V0Q2hlY2tTZXNzaW9uSWZyYW1lPWZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fZ2V0TWV0YWRhdGFQcm9wZXJ0eShcImNoZWNrX3Nlc3Npb25faWZyYW1lXCIsITApfSx0LnByb3RvdHlwZS5nZXRFbmRTZXNzaW9uRW5kcG9pbnQ9ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9nZXRNZXRhZGF0YVByb3BlcnR5KFwiZW5kX3Nlc3Npb25fZW5kcG9pbnRcIiwhMCl9LHQucHJvdG90eXBlLmdldFJldm9jYXRpb25FbmRwb2ludD1mdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX2dldE1ldGFkYXRhUHJvcGVydHkoXCJyZXZvY2F0aW9uX2VuZHBvaW50XCIsITApfSx0LnByb3RvdHlwZS5nZXRLZXlzRW5kcG9pbnQ9ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9nZXRNZXRhZGF0YVByb3BlcnR5KFwiandrc191cmlcIiwhMCl9LHQucHJvdG90eXBlLl9nZXRNZXRhZGF0YVByb3BlcnR5PWZ1bmN0aW9uIHQoZSl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXTtyZXR1cm4gaS5Mb2cuZGVidWcoXCJNZXRhZGF0YVNlcnZpY2UuZ2V0TWV0YWRhdGFQcm9wZXJ0eSBmb3I6IFwiK2UpLHRoaXMuZ2V0TWV0YWRhdGEoKS50aGVuKChmdW5jdGlvbih0KXtpZihpLkxvZy5kZWJ1ZyhcIk1ldGFkYXRhU2VydmljZS5nZXRNZXRhZGF0YVByb3BlcnR5OiBtZXRhZGF0YSByZWNpZXZlZFwiKSx2b2lkIDA9PT10W2VdKXtpZighMD09PXIpcmV0dXJuIHZvaWQgaS5Mb2cud2FybihcIk1ldGFkYXRhU2VydmljZS5nZXRNZXRhZGF0YVByb3BlcnR5OiBNZXRhZGF0YSBkb2VzIG5vdCBjb250YWluIG9wdGlvbmFsIHByb3BlcnR5IFwiK2UpO3Rocm93IGkuTG9nLmVycm9yKFwiTWV0YWRhdGFTZXJ2aWNlLmdldE1ldGFkYXRhUHJvcGVydHk6IE1ldGFkYXRhIGRvZXMgbm90IGNvbnRhaW4gcHJvcGVydHkgXCIrZSksbmV3IEVycm9yKFwiTWV0YWRhdGEgZG9lcyBub3QgY29udGFpbiBwcm9wZXJ0eSBcIitlKX1yZXR1cm4gdFtlXX0pKX0sdC5wcm90b3R5cGUuZ2V0U2lnbmluZ0tleXM9ZnVuY3Rpb24gdCgpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX3NldHRpbmdzLnNpZ25pbmdLZXlzPyhpLkxvZy5kZWJ1ZyhcIk1ldGFkYXRhU2VydmljZS5nZXRTaWduaW5nS2V5czogUmV0dXJuaW5nIHNpZ25pbmdLZXlzIGZyb20gc2V0dGluZ3NcIiksUHJvbWlzZS5yZXNvbHZlKHRoaXMuX3NldHRpbmdzLnNpZ25pbmdLZXlzKSk6dGhpcy5fZ2V0TWV0YWRhdGFQcm9wZXJ0eShcImp3a3NfdXJpXCIpLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiBpLkxvZy5kZWJ1ZyhcIk1ldGFkYXRhU2VydmljZS5nZXRTaWduaW5nS2V5czogandrc191cmkgcmVjZWl2ZWRcIix0KSxlLl9qc29uU2VydmljZS5nZXRKc29uKHQpLnRoZW4oKGZ1bmN0aW9uKHQpe2lmKGkuTG9nLmRlYnVnKFwiTWV0YWRhdGFTZXJ2aWNlLmdldFNpZ25pbmdLZXlzOiBrZXkgc2V0IHJlY2VpdmVkXCIsdCksIXQua2V5cyl0aHJvdyBpLkxvZy5lcnJvcihcIk1ldGFkYXRhU2VydmljZS5nZXRTaWduaW5nS2V5czogTWlzc2luZyBrZXlzIG9uIGtleXNldFwiKSxuZXcgRXJyb3IoXCJNaXNzaW5nIGtleXMgb24ga2V5c2V0XCIpO3JldHVybiBlLl9zZXR0aW5ncy5zaWduaW5nS2V5cz10LmtleXMsZS5fc2V0dGluZ3Muc2lnbmluZ0tleXN9KSl9KSl9LG4odCxbe2tleTpcIm1ldGFkYXRhVXJsXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fbWV0YWRhdGFVcmx8fCh0aGlzLl9zZXR0aW5ncy5tZXRhZGF0YVVybD90aGlzLl9tZXRhZGF0YVVybD10aGlzLl9zZXR0aW5ncy5tZXRhZGF0YVVybDoodGhpcy5fbWV0YWRhdGFVcmw9dGhpcy5fc2V0dGluZ3MuYXV0aG9yaXR5LHRoaXMuX21ldGFkYXRhVXJsJiZ0aGlzLl9tZXRhZGF0YVVybC5pbmRleE9mKGEpPDAmJihcIi9cIiE9PXRoaXMuX21ldGFkYXRhVXJsW3RoaXMuX21ldGFkYXRhVXJsLmxlbmd0aC0xXSYmKHRoaXMuX21ldGFkYXRhVXJsKz1cIi9cIiksdGhpcy5fbWV0YWRhdGFVcmwrPWEpKSksdGhpcy5fbWV0YWRhdGFVcmx9fV0pLHR9KCl9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLlVybFV0aWxpdHk9dm9pZCAwO3ZhciBuPXIoMCksaT1yKDEpO2UuVXJsVXRpbGl0eT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXshZnVuY3Rpb24gZSh0LHIpe2lmKCEodCBpbnN0YW5jZW9mIHIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9KHRoaXMsdCl9cmV0dXJuIHQuYWRkUXVlcnlQYXJhbT1mdW5jdGlvbiB0KGUscixuKXtyZXR1cm4gZS5pbmRleE9mKFwiP1wiKTwwJiYoZSs9XCI/XCIpLFwiP1wiIT09ZVtlLmxlbmd0aC0xXSYmKGUrPVwiJlwiKSxlKz1lbmNvZGVVUklDb21wb25lbnQociksZSs9XCI9XCIsZSs9ZW5jb2RlVVJJQ29tcG9uZW50KG4pfSx0LnBhcnNlVXJsRnJhZ21lbnQ9ZnVuY3Rpb24gdChlKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06XCIjXCIsbz1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06aS5HbG9iYWw7XCJzdHJpbmdcIiE9dHlwZW9mIGUmJihlPW8ubG9jYXRpb24uaHJlZik7dmFyIHM9ZS5sYXN0SW5kZXhPZihyKTtzPj0wJiYoZT1lLnN1YnN0cihzKzEpKSxcIj9cIj09PXImJihzPWUuaW5kZXhPZihcIiNcIikpPj0wJiYoZT1lLnN1YnN0cigwLHMpKTtmb3IodmFyIGEsdT17fSxjPS8oW14mPV0rKT0oW14mXSopL2csaD0wO2E9Yy5leGVjKGUpOylpZih1W2RlY29kZVVSSUNvbXBvbmVudChhWzFdKV09ZGVjb2RlVVJJQ29tcG9uZW50KGFbMl0ucmVwbGFjZSgvXFwrL2csXCIgXCIpKSxoKys+NTApcmV0dXJuIG4uTG9nLmVycm9yKFwiVXJsVXRpbGl0eS5wYXJzZVVybEZyYWdtZW50OiByZXNwb25zZSBleGNlZWRlZCBleHBlY3RlZCBudW1iZXIgb2YgcGFyYW1ldGVyc1wiLGUpLHtlcnJvcjpcIlJlc3BvbnNlIGV4Y2VlZGVkIGV4cGVjdGVkIG51bWJlciBvZiBwYXJhbWV0ZXJzXCJ9O2Zvcih2YXIgbCBpbiB1KXJldHVybiB1O3JldHVybnt9fSx0fSgpfSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5Kb3NlVXRpbD12b2lkIDA7dmFyIG49cigyNiksaT1mdW5jdGlvbiBvKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0ocigzMykpO2UuSm9zZVV0aWw9KDAsaS5kZWZhdWx0KSh7andzOm4uandzLEtleVV0aWw6bi5LZXlVdGlsLFg1MDk6bi5YNTA5LGNyeXB0bzpuLmNyeXB0byxoZXh0b2I2NHU6bi5oZXh0b2I2NHUsYjY0dG9oZXg6bi5iNjR0b2hleCxBbGxvd2VkU2lnbmluZ0FsZ3M6bi5BbGxvd2VkU2lnbmluZ0FsZ3N9KX0sZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuT2lkY0NsaWVudFNldHRpbmdzPXZvaWQgMDt2YXIgbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiB0fSxpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksbz1yKDApLHM9cigyMyksYT1yKDYpLHU9cigyNCksYz1yKDIpO2Z1bmN0aW9uIGgodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfXZhciBsPVwiLndlbGwta25vd24vb3BlbmlkLWNvbmZpZ3VyYXRpb25cIixmPVwiaWRfdG9rZW5cIixnPVwib3BlbmlkXCIsZD1cImNsaWVudF9zZWNyZXRfcG9zdFwiO2UuT2lkY0NsaWVudFNldHRpbmdzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxyPWUuYXV0aG9yaXR5LGk9ZS5tZXRhZGF0YVVybCxvPWUubWV0YWRhdGEsbD1lLnNpZ25pbmdLZXlzLHA9ZS5tZXRhZGF0YVNlZWQsdj1lLmNsaWVudF9pZCx5PWUuY2xpZW50X3NlY3JldCxtPWUucmVzcG9uc2VfdHlwZSxfPXZvaWQgMD09PW0/ZjptLFM9ZS5zY29wZSxiPXZvaWQgMD09PVM/ZzpTLHc9ZS5yZWRpcmVjdF91cmksRj1lLnBvc3RfbG9nb3V0X3JlZGlyZWN0X3VyaSxFPWUuY2xpZW50X2F1dGhlbnRpY2F0aW9uLHg9dm9pZCAwPT09RT9kOkUsQT1lLnByb21wdCxrPWUuZGlzcGxheSxQPWUubWF4X2FnZSxDPWUudWlfbG9jYWxlcyxUPWUuYWNyX3ZhbHVlcyxSPWUucmVzb3VyY2UsST1lLnJlc3BvbnNlX21vZGUsRD1lLmZpbHRlclByb3RvY29sQ2xhaW1zLEw9dm9pZCAwPT09RHx8RCxOPWUubG9hZFVzZXJJbmZvLFU9dm9pZCAwPT09Tnx8TixCPWUuc3RhbGVTdGF0ZUFnZSxPPXZvaWQgMD09PUI/OTAwOkIsaj1lLmNsb2NrU2tldyxNPXZvaWQgMD09PWo/MzAwOmosSD1lLmNsb2NrU2VydmljZSxWPXZvaWQgMD09PUg/bmV3IHMuQ2xvY2tTZXJ2aWNlOkgsSz1lLnVzZXJJbmZvSnd0SXNzdWVyLHE9dm9pZCAwPT09Sz9cIk9QXCI6SyxKPWUubWVyZ2VDbGFpbXMsVz12b2lkIDAhPT1KJiZKLHo9ZS5zdGF0ZVN0b3JlLFk9dm9pZCAwPT09ej9uZXcgYS5XZWJTdG9yYWdlU3RhdGVTdG9yZTp6LEc9ZS5SZXNwb25zZVZhbGlkYXRvckN0b3IsWD12b2lkIDA9PT1HP3UuUmVzcG9uc2VWYWxpZGF0b3I6RywkPWUuTWV0YWRhdGFTZXJ2aWNlQ3RvcixRPXZvaWQgMD09PSQ/Yy5NZXRhZGF0YVNlcnZpY2U6JCxaPWUuZXh0cmFRdWVyeVBhcmFtcyx0dD12b2lkIDA9PT1aP3t9OlosZXQ9ZS5leHRyYVRva2VuUGFyYW1zLHJ0PXZvaWQgMD09PWV0P3t9OmV0O2godGhpcyx0KSx0aGlzLl9hdXRob3JpdHk9cix0aGlzLl9tZXRhZGF0YVVybD1pLHRoaXMuX21ldGFkYXRhPW8sdGhpcy5fbWV0YWRhdGFTZWVkPXAsdGhpcy5fc2lnbmluZ0tleXM9bCx0aGlzLl9jbGllbnRfaWQ9dix0aGlzLl9jbGllbnRfc2VjcmV0PXksdGhpcy5fcmVzcG9uc2VfdHlwZT1fLHRoaXMuX3Njb3BlPWIsdGhpcy5fcmVkaXJlY3RfdXJpPXcsdGhpcy5fcG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpPUYsdGhpcy5fY2xpZW50X2F1dGhlbnRpY2F0aW9uPXgsdGhpcy5fcHJvbXB0PUEsdGhpcy5fZGlzcGxheT1rLHRoaXMuX21heF9hZ2U9UCx0aGlzLl91aV9sb2NhbGVzPUMsdGhpcy5fYWNyX3ZhbHVlcz1ULHRoaXMuX3Jlc291cmNlPVIsdGhpcy5fcmVzcG9uc2VfbW9kZT1JLHRoaXMuX2ZpbHRlclByb3RvY29sQ2xhaW1zPSEhTCx0aGlzLl9sb2FkVXNlckluZm89ISFVLHRoaXMuX3N0YWxlU3RhdGVBZ2U9Tyx0aGlzLl9jbG9ja1NrZXc9TSx0aGlzLl9jbG9ja1NlcnZpY2U9Vix0aGlzLl91c2VySW5mb0p3dElzc3Vlcj1xLHRoaXMuX21lcmdlQ2xhaW1zPSEhVyx0aGlzLl9zdGF0ZVN0b3JlPVksdGhpcy5fdmFsaWRhdG9yPW5ldyBYKHRoaXMpLHRoaXMuX21ldGFkYXRhU2VydmljZT1uZXcgUSh0aGlzKSx0aGlzLl9leHRyYVF1ZXJ5UGFyYW1zPVwib2JqZWN0XCI9PT0odm9pZCAwPT09dHQ/XCJ1bmRlZmluZWRcIjpuKHR0KSk/dHQ6e30sdGhpcy5fZXh0cmFUb2tlblBhcmFtcz1cIm9iamVjdFwiPT09KHZvaWQgMD09PXJ0P1widW5kZWZpbmVkXCI6bihydCkpP3J0Ont9fXJldHVybiB0LnByb3RvdHlwZS5nZXRFcG9jaFRpbWU9ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9jbG9ja1NlcnZpY2UuZ2V0RXBvY2hUaW1lKCl9LGkodCxbe2tleTpcImNsaWVudF9pZFwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX2NsaWVudF9pZH0sc2V0OmZ1bmN0aW9uIHQoZSl7aWYodGhpcy5fY2xpZW50X2lkKXRocm93IG8uTG9nLmVycm9yKFwiT2lkY0NsaWVudFNldHRpbmdzLnNldF9jbGllbnRfaWQ6IGNsaWVudF9pZCBoYXMgYWxyZWFkeSBiZWVuIGFzc2lnbmVkLlwiKSxuZXcgRXJyb3IoXCJjbGllbnRfaWQgaGFzIGFscmVhZHkgYmVlbiBhc3NpZ25lZC5cIik7dGhpcy5fY2xpZW50X2lkPWV9fSx7a2V5OlwiY2xpZW50X3NlY3JldFwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX2NsaWVudF9zZWNyZXR9fSx7a2V5OlwicmVzcG9uc2VfdHlwZVwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX3Jlc3BvbnNlX3R5cGV9fSx7a2V5Olwic2NvcGVcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9zY29wZX19LHtrZXk6XCJyZWRpcmVjdF91cmlcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9yZWRpcmVjdF91cml9fSx7a2V5OlwicG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fcG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpfX0se2tleTpcImNsaWVudF9hdXRoZW50aWNhdGlvblwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX2NsaWVudF9hdXRoZW50aWNhdGlvbn19LHtrZXk6XCJwcm9tcHRcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9wcm9tcHR9fSx7a2V5OlwiZGlzcGxheVwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX2Rpc3BsYXl9fSx7a2V5OlwibWF4X2FnZVwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX21heF9hZ2V9fSx7a2V5OlwidWlfbG9jYWxlc1wiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX3VpX2xvY2FsZXN9fSx7a2V5OlwiYWNyX3ZhbHVlc1wiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX2Fjcl92YWx1ZXN9fSx7a2V5OlwicmVzb3VyY2VcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9yZXNvdXJjZX19LHtrZXk6XCJyZXNwb25zZV9tb2RlXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fcmVzcG9uc2VfbW9kZX19LHtrZXk6XCJhdXRob3JpdHlcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9hdXRob3JpdHl9LHNldDpmdW5jdGlvbiB0KGUpe2lmKHRoaXMuX2F1dGhvcml0eSl0aHJvdyBvLkxvZy5lcnJvcihcIk9pZGNDbGllbnRTZXR0aW5ncy5zZXRfYXV0aG9yaXR5OiBhdXRob3JpdHkgaGFzIGFscmVhZHkgYmVlbiBhc3NpZ25lZC5cIiksbmV3IEVycm9yKFwiYXV0aG9yaXR5IGhhcyBhbHJlYWR5IGJlZW4gYXNzaWduZWQuXCIpO3RoaXMuX2F1dGhvcml0eT1lfX0se2tleTpcIm1ldGFkYXRhVXJsXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fbWV0YWRhdGFVcmx8fCh0aGlzLl9tZXRhZGF0YVVybD10aGlzLmF1dGhvcml0eSx0aGlzLl9tZXRhZGF0YVVybCYmdGhpcy5fbWV0YWRhdGFVcmwuaW5kZXhPZihsKTwwJiYoXCIvXCIhPT10aGlzLl9tZXRhZGF0YVVybFt0aGlzLl9tZXRhZGF0YVVybC5sZW5ndGgtMV0mJih0aGlzLl9tZXRhZGF0YVVybCs9XCIvXCIpLHRoaXMuX21ldGFkYXRhVXJsKz1sKSksdGhpcy5fbWV0YWRhdGFVcmx9fSx7a2V5OlwibWV0YWRhdGFcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9tZXRhZGF0YX0sc2V0OmZ1bmN0aW9uIHQoZSl7dGhpcy5fbWV0YWRhdGE9ZX19LHtrZXk6XCJtZXRhZGF0YVNlZWRcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9tZXRhZGF0YVNlZWR9LHNldDpmdW5jdGlvbiB0KGUpe3RoaXMuX21ldGFkYXRhU2VlZD1lfX0se2tleTpcInNpZ25pbmdLZXlzXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fc2lnbmluZ0tleXN9LHNldDpmdW5jdGlvbiB0KGUpe3RoaXMuX3NpZ25pbmdLZXlzPWV9fSx7a2V5OlwiZmlsdGVyUHJvdG9jb2xDbGFpbXNcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9maWx0ZXJQcm90b2NvbENsYWltc319LHtrZXk6XCJsb2FkVXNlckluZm9cIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9sb2FkVXNlckluZm99fSx7a2V5Olwic3RhbGVTdGF0ZUFnZVwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX3N0YWxlU3RhdGVBZ2V9fSx7a2V5OlwiY2xvY2tTa2V3XCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fY2xvY2tTa2V3fX0se2tleTpcInVzZXJJbmZvSnd0SXNzdWVyXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fdXNlckluZm9Kd3RJc3N1ZXJ9fSx7a2V5OlwibWVyZ2VDbGFpbXNcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9tZXJnZUNsYWltc319LHtrZXk6XCJzdGF0ZVN0b3JlXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fc3RhdGVTdG9yZX19LHtrZXk6XCJ2YWxpZGF0b3JcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl92YWxpZGF0b3J9fSx7a2V5OlwibWV0YWRhdGFTZXJ2aWNlXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fbWV0YWRhdGFTZXJ2aWNlfX0se2tleTpcImV4dHJhUXVlcnlQYXJhbXNcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9leHRyYVF1ZXJ5UGFyYW1zfSxzZXQ6ZnVuY3Rpb24gdChlKXtcIm9iamVjdFwiPT09KHZvaWQgMD09PWU/XCJ1bmRlZmluZWRcIjpuKGUpKT90aGlzLl9leHRyYVF1ZXJ5UGFyYW1zPWU6dGhpcy5fZXh0cmFRdWVyeVBhcmFtcz17fX19LHtrZXk6XCJleHRyYVRva2VuUGFyYW1zXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fZXh0cmFUb2tlblBhcmFtc30sc2V0OmZ1bmN0aW9uIHQoZSl7XCJvYmplY3RcIj09PSh2b2lkIDA9PT1lP1widW5kZWZpbmVkXCI6bihlKSk/dGhpcy5fZXh0cmFUb2tlblBhcmFtcz1lOnRoaXMuX2V4dHJhVG9rZW5QYXJhbXM9e319fV0pLHR9KCl9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLldlYlN0b3JhZ2VTdGF0ZVN0b3JlPXZvaWQgMDt2YXIgbj1yKDApLGk9cigxKTtmdW5jdGlvbiBvKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1lLldlYlN0b3JhZ2VTdGF0ZVN0b3JlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxyPWUucHJlZml4LG49dm9pZCAwPT09cj9cIm9pZGMuXCI6cixzPWUuc3RvcmUsYT12b2lkIDA9PT1zP2kuR2xvYmFsLmxvY2FsU3RvcmFnZTpzO28odGhpcyx0KSx0aGlzLl9zdG9yZT1hLHRoaXMuX3ByZWZpeD1ufXJldHVybiB0LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24gdChlLHIpe3JldHVybiBuLkxvZy5kZWJ1ZyhcIldlYlN0b3JhZ2VTdGF0ZVN0b3JlLnNldFwiLGUpLGU9dGhpcy5fcHJlZml4K2UsdGhpcy5fc3RvcmUuc2V0SXRlbShlLHIpLFByb21pc2UucmVzb2x2ZSgpfSx0LnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24gdChlKXtuLkxvZy5kZWJ1ZyhcIldlYlN0b3JhZ2VTdGF0ZVN0b3JlLmdldFwiLGUpLGU9dGhpcy5fcHJlZml4K2U7dmFyIHI9dGhpcy5fc3RvcmUuZ2V0SXRlbShlKTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHIpfSx0LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24gdChlKXtuLkxvZy5kZWJ1ZyhcIldlYlN0b3JhZ2VTdGF0ZVN0b3JlLnJlbW92ZVwiLGUpLGU9dGhpcy5fcHJlZml4K2U7dmFyIHI9dGhpcy5fc3RvcmUuZ2V0SXRlbShlKTtyZXR1cm4gdGhpcy5fc3RvcmUucmVtb3ZlSXRlbShlKSxQcm9taXNlLnJlc29sdmUocil9LHQucHJvdG90eXBlLmdldEFsbEtleXM9ZnVuY3Rpb24gdCgpe24uTG9nLmRlYnVnKFwiV2ViU3RvcmFnZVN0YXRlU3RvcmUuZ2V0QWxsS2V5c1wiKTtmb3IodmFyIGU9W10scj0wO3I8dGhpcy5fc3RvcmUubGVuZ3RoO3IrKyl7dmFyIGk9dGhpcy5fc3RvcmUua2V5KHIpOzA9PT1pLmluZGV4T2YodGhpcy5fcHJlZml4KSYmZS5wdXNoKGkuc3Vic3RyKHRoaXMuX3ByZWZpeC5sZW5ndGgpKX1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGUpfSx0fSgpfSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5Kc29uU2VydmljZT12b2lkIDA7dmFyIG49cigwKSxpPXIoMSk7ZnVuY3Rpb24gbyh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZS5Kc29uU2VydmljZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06bnVsbCxyPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTppLkdsb2JhbC5YTUxIdHRwUmVxdWVzdCxuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTpudWxsO28odGhpcyx0KSxlJiZBcnJheS5pc0FycmF5KGUpP3RoaXMuX2NvbnRlbnRUeXBlcz1lLnNsaWNlKCk6dGhpcy5fY29udGVudFR5cGVzPVtdLHRoaXMuX2NvbnRlbnRUeXBlcy5wdXNoKFwiYXBwbGljYXRpb24vanNvblwiKSxuJiZ0aGlzLl9jb250ZW50VHlwZXMucHVzaChcImFwcGxpY2F0aW9uL2p3dFwiKSx0aGlzLl9YTUxIdHRwUmVxdWVzdD1yLHRoaXMuX2p3dEhhbmRsZXI9bn1yZXR1cm4gdC5wcm90b3R5cGUuZ2V0SnNvbj1mdW5jdGlvbiB0KGUscil7dmFyIGk9dGhpcztpZighZSl0aHJvdyBuLkxvZy5lcnJvcihcIkpzb25TZXJ2aWNlLmdldEpzb246IE5vIHVybCBwYXNzZWRcIiksbmV3IEVycm9yKFwidXJsXCIpO3JldHVybiBuLkxvZy5kZWJ1ZyhcIkpzb25TZXJ2aWNlLmdldEpzb24sIHVybDogXCIsZSksbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQsbyl7dmFyIHM9bmV3IGkuX1hNTEh0dHBSZXF1ZXN0O3Mub3BlbihcIkdFVFwiLGUpO3ZhciBhPWkuX2NvbnRlbnRUeXBlcyx1PWkuX2p3dEhhbmRsZXI7cy5vbmxvYWQ9ZnVuY3Rpb24oKXtpZihuLkxvZy5kZWJ1ZyhcIkpzb25TZXJ2aWNlLmdldEpzb246IEhUVFAgcmVzcG9uc2UgcmVjZWl2ZWQsIHN0YXR1c1wiLHMuc3RhdHVzKSwyMDA9PT1zLnN0YXR1cyl7dmFyIHI9cy5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKTtpZihyKXt2YXIgaT1hLmZpbmQoKGZ1bmN0aW9uKHQpe2lmKHIuc3RhcnRzV2l0aCh0KSlyZXR1cm4hMH0pKTtpZihcImFwcGxpY2F0aW9uL2p3dFwiPT1pKXJldHVybiB2b2lkIHUocykudGhlbih0LG8pO2lmKGkpdHJ5e3JldHVybiB2b2lkIHQoSlNPTi5wYXJzZShzLnJlc3BvbnNlVGV4dCkpfWNhdGNoKHQpe3JldHVybiBuLkxvZy5lcnJvcihcIkpzb25TZXJ2aWNlLmdldEpzb246IEVycm9yIHBhcnNpbmcgSlNPTiByZXNwb25zZVwiLHQubWVzc2FnZSksdm9pZCBvKHQpfX1vKEVycm9yKFwiSW52YWxpZCByZXNwb25zZSBDb250ZW50LVR5cGU6IFwiK3IrXCIsIGZyb20gVVJMOiBcIitlKSl9ZWxzZSBvKEVycm9yKHMuc3RhdHVzVGV4dCtcIiAoXCIrcy5zdGF0dXMrXCIpXCIpKX0scy5vbmVycm9yPWZ1bmN0aW9uKCl7bi5Mb2cuZXJyb3IoXCJKc29uU2VydmljZS5nZXRKc29uOiBuZXR3b3JrIGVycm9yXCIpLG8oRXJyb3IoXCJOZXR3b3JrIEVycm9yXCIpKX0sciYmKG4uTG9nLmRlYnVnKFwiSnNvblNlcnZpY2UuZ2V0SnNvbjogdG9rZW4gcGFzc2VkLCBzZXR0aW5nIEF1dGhvcml6YXRpb24gaGVhZGVyXCIpLHMuc2V0UmVxdWVzdEhlYWRlcihcIkF1dGhvcml6YXRpb25cIixcIkJlYXJlciBcIityKSkscy5zZW5kKCl9KSl9LHQucHJvdG90eXBlLnBvc3RGb3JtPWZ1bmN0aW9uIHQoZSxyLGkpe3ZhciBvPXRoaXM7aWYoIWUpdGhyb3cgbi5Mb2cuZXJyb3IoXCJKc29uU2VydmljZS5wb3N0Rm9ybTogTm8gdXJsIHBhc3NlZFwiKSxuZXcgRXJyb3IoXCJ1cmxcIik7cmV0dXJuIG4uTG9nLmRlYnVnKFwiSnNvblNlcnZpY2UucG9zdEZvcm0sIHVybDogXCIsZSksbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQscyl7dmFyIGE9bmV3IG8uX1hNTEh0dHBSZXF1ZXN0O2Eub3BlbihcIlBPU1RcIixlKTt2YXIgdT1vLl9jb250ZW50VHlwZXM7YS5vbmxvYWQ9ZnVuY3Rpb24oKXtpZihuLkxvZy5kZWJ1ZyhcIkpzb25TZXJ2aWNlLnBvc3RGb3JtOiBIVFRQIHJlc3BvbnNlIHJlY2VpdmVkLCBzdGF0dXNcIixhLnN0YXR1cyksMjAwIT09YS5zdGF0dXMpe2lmKDQwMD09PWEuc3RhdHVzKWlmKGk9YS5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSlpZih1LmZpbmQoKGZ1bmN0aW9uKHQpe2lmKGkuc3RhcnRzV2l0aCh0KSlyZXR1cm4hMH0pKSl0cnl7dmFyIHI9SlNPTi5wYXJzZShhLnJlc3BvbnNlVGV4dCk7aWYociYmci5lcnJvcilyZXR1cm4gbi5Mb2cuZXJyb3IoXCJKc29uU2VydmljZS5wb3N0Rm9ybTogRXJyb3IgZnJvbSBzZXJ2ZXI6IFwiLHIuZXJyb3IpLHZvaWQgcyhuZXcgRXJyb3Ioci5lcnJvcikpfWNhdGNoKHQpe3JldHVybiBuLkxvZy5lcnJvcihcIkpzb25TZXJ2aWNlLnBvc3RGb3JtOiBFcnJvciBwYXJzaW5nIEpTT04gcmVzcG9uc2VcIix0Lm1lc3NhZ2UpLHZvaWQgcyh0KX1zKEVycm9yKGEuc3RhdHVzVGV4dCtcIiAoXCIrYS5zdGF0dXMrXCIpXCIpKX1lbHNle3ZhciBpO2lmKChpPWEuZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LVR5cGVcIikpJiZ1LmZpbmQoKGZ1bmN0aW9uKHQpe2lmKGkuc3RhcnRzV2l0aCh0KSlyZXR1cm4hMH0pKSl0cnl7cmV0dXJuIHZvaWQgdChKU09OLnBhcnNlKGEucmVzcG9uc2VUZXh0KSl9Y2F0Y2godCl7cmV0dXJuIG4uTG9nLmVycm9yKFwiSnNvblNlcnZpY2UucG9zdEZvcm06IEVycm9yIHBhcnNpbmcgSlNPTiByZXNwb25zZVwiLHQubWVzc2FnZSksdm9pZCBzKHQpfXMoRXJyb3IoXCJJbnZhbGlkIHJlc3BvbnNlIENvbnRlbnQtVHlwZTogXCIraStcIiwgZnJvbSBVUkw6IFwiK2UpKX19LGEub25lcnJvcj1mdW5jdGlvbigpe24uTG9nLmVycm9yKFwiSnNvblNlcnZpY2UucG9zdEZvcm06IG5ldHdvcmsgZXJyb3JcIikscyhFcnJvcihcIk5ldHdvcmsgRXJyb3JcIikpfTt2YXIgYz1cIlwiO2Zvcih2YXIgaCBpbiByKXt2YXIgbD1yW2hdO2wmJihjLmxlbmd0aD4wJiYoYys9XCImXCIpLGMrPWVuY29kZVVSSUNvbXBvbmVudChoKSxjKz1cIj1cIixjKz1lbmNvZGVVUklDb21wb25lbnQobCkpfWEuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpLHZvaWQgMCE9PWkmJmEuc2V0UmVxdWVzdEhlYWRlcihcIkF1dGhvcml6YXRpb25cIixcIkJhc2ljIFwiK2J0b2EoaSkpLGEuc2VuZChjKX0pKX0sdH0oKX0sZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuU2lnbmluUmVxdWVzdD12b2lkIDA7dmFyIG49cigwKSxpPXIoMyksbz1yKDEzKTtlLlNpZ25pblJlcXVlc3Q9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3ZhciByPWUudXJsLHM9ZS5jbGllbnRfaWQsYT1lLnJlZGlyZWN0X3VyaSx1PWUucmVzcG9uc2VfdHlwZSxjPWUuc2NvcGUsaD1lLmF1dGhvcml0eSxsPWUuZGF0YSxmPWUucHJvbXB0LGc9ZS5kaXNwbGF5LGQ9ZS5tYXhfYWdlLHA9ZS51aV9sb2NhbGVzLHY9ZS5pZF90b2tlbl9oaW50LHk9ZS5sb2dpbl9oaW50LG09ZS5hY3JfdmFsdWVzLF89ZS5yZXNvdXJjZSxTPWUucmVzcG9uc2VfbW9kZSxiPWUucmVxdWVzdCx3PWUucmVxdWVzdF91cmksRj1lLmV4dHJhUXVlcnlQYXJhbXMsRT1lLnJlcXVlc3RfdHlwZSx4PWUuY2xpZW50X3NlY3JldCxBPWUuZXh0cmFUb2tlblBhcmFtcyxrPWUuc2tpcFVzZXJJbmZvO2lmKGZ1bmN0aW9uIFAodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLHQpLCFyKXRocm93IG4uTG9nLmVycm9yKFwiU2lnbmluUmVxdWVzdC5jdG9yOiBObyB1cmwgcGFzc2VkXCIpLG5ldyBFcnJvcihcInVybFwiKTtpZighcyl0aHJvdyBuLkxvZy5lcnJvcihcIlNpZ25pblJlcXVlc3QuY3RvcjogTm8gY2xpZW50X2lkIHBhc3NlZFwiKSxuZXcgRXJyb3IoXCJjbGllbnRfaWRcIik7aWYoIWEpdGhyb3cgbi5Mb2cuZXJyb3IoXCJTaWduaW5SZXF1ZXN0LmN0b3I6IE5vIHJlZGlyZWN0X3VyaSBwYXNzZWRcIiksbmV3IEVycm9yKFwicmVkaXJlY3RfdXJpXCIpO2lmKCF1KXRocm93IG4uTG9nLmVycm9yKFwiU2lnbmluUmVxdWVzdC5jdG9yOiBObyByZXNwb25zZV90eXBlIHBhc3NlZFwiKSxuZXcgRXJyb3IoXCJyZXNwb25zZV90eXBlXCIpO2lmKCFjKXRocm93IG4uTG9nLmVycm9yKFwiU2lnbmluUmVxdWVzdC5jdG9yOiBObyBzY29wZSBwYXNzZWRcIiksbmV3IEVycm9yKFwic2NvcGVcIik7aWYoIWgpdGhyb3cgbi5Mb2cuZXJyb3IoXCJTaWduaW5SZXF1ZXN0LmN0b3I6IE5vIGF1dGhvcml0eSBwYXNzZWRcIiksbmV3IEVycm9yKFwiYXV0aG9yaXR5XCIpO3ZhciBDPXQuaXNPaWRjKHUpLFQ9dC5pc0NvZGUodSk7U3x8KFM9dC5pc0NvZGUodSk/XCJxdWVyeVwiOm51bGwpLHRoaXMuc3RhdGU9bmV3IG8uU2lnbmluU3RhdGUoe25vbmNlOkMsZGF0YTpsLGNsaWVudF9pZDpzLGF1dGhvcml0eTpoLHJlZGlyZWN0X3VyaTphLGNvZGVfdmVyaWZpZXI6VCxyZXF1ZXN0X3R5cGU6RSxyZXNwb25zZV9tb2RlOlMsY2xpZW50X3NlY3JldDp4LHNjb3BlOmMsZXh0cmFUb2tlblBhcmFtczpBLHNraXBVc2VySW5mbzprfSkscj1pLlVybFV0aWxpdHkuYWRkUXVlcnlQYXJhbShyLFwiY2xpZW50X2lkXCIscykscj1pLlVybFV0aWxpdHkuYWRkUXVlcnlQYXJhbShyLFwicmVkaXJlY3RfdXJpXCIsYSkscj1pLlVybFV0aWxpdHkuYWRkUXVlcnlQYXJhbShyLFwicmVzcG9uc2VfdHlwZVwiLHUpLHI9aS5VcmxVdGlsaXR5LmFkZFF1ZXJ5UGFyYW0ocixcInNjb3BlXCIsYykscj1pLlVybFV0aWxpdHkuYWRkUXVlcnlQYXJhbShyLFwic3RhdGVcIix0aGlzLnN0YXRlLmlkKSxDJiYocj1pLlVybFV0aWxpdHkuYWRkUXVlcnlQYXJhbShyLFwibm9uY2VcIix0aGlzLnN0YXRlLm5vbmNlKSksVCYmKHI9aS5VcmxVdGlsaXR5LmFkZFF1ZXJ5UGFyYW0ocixcImNvZGVfY2hhbGxlbmdlXCIsdGhpcy5zdGF0ZS5jb2RlX2NoYWxsZW5nZSkscj1pLlVybFV0aWxpdHkuYWRkUXVlcnlQYXJhbShyLFwiY29kZV9jaGFsbGVuZ2VfbWV0aG9kXCIsXCJTMjU2XCIpKTt2YXIgUj17cHJvbXB0OmYsZGlzcGxheTpnLG1heF9hZ2U6ZCx1aV9sb2NhbGVzOnAsaWRfdG9rZW5faGludDp2LGxvZ2luX2hpbnQ6eSxhY3JfdmFsdWVzOm0scmVzb3VyY2U6XyxyZXF1ZXN0OmIscmVxdWVzdF91cmk6dyxyZXNwb25zZV9tb2RlOlN9O2Zvcih2YXIgSSBpbiBSKVJbSV0mJihyPWkuVXJsVXRpbGl0eS5hZGRRdWVyeVBhcmFtKHIsSSxSW0ldKSk7Zm9yKHZhciBEIGluIEYpcj1pLlVybFV0aWxpdHkuYWRkUXVlcnlQYXJhbShyLEQsRltEXSk7dGhpcy51cmw9cn1yZXR1cm4gdC5pc09pZGM9ZnVuY3Rpb24gdChlKXtyZXR1cm4hIWUuc3BsaXQoL1xccysvZykuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm5cImlkX3Rva2VuXCI9PT10fSkpWzBdfSx0LmlzT0F1dGg9ZnVuY3Rpb24gdChlKXtyZXR1cm4hIWUuc3BsaXQoL1xccysvZykuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm5cInRva2VuXCI9PT10fSkpWzBdfSx0LmlzQ29kZT1mdW5jdGlvbiB0KGUpe3JldHVybiEhZS5zcGxpdCgvXFxzKy9nKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVyblwiY29kZVwiPT09dH0pKVswXX0sdH0oKX0sZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuU3RhdGU9dm9pZCAwO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksaT1yKDApLG89ZnVuY3Rpb24gcyh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KHIoMTQpKTtmdW5jdGlvbiBhKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1lLlN0YXRlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxyPWUuaWQsbj1lLmRhdGEsaT1lLmNyZWF0ZWQscz1lLnJlcXVlc3RfdHlwZTthKHRoaXMsdCksdGhpcy5faWQ9cnx8KDAsby5kZWZhdWx0KSgpLHRoaXMuX2RhdGE9bix0aGlzLl9jcmVhdGVkPVwibnVtYmVyXCI9PXR5cGVvZiBpJiZpPjA/aTpwYXJzZUludChEYXRlLm5vdygpLzFlMyksdGhpcy5fcmVxdWVzdF90eXBlPXN9cmV0dXJuIHQucHJvdG90eXBlLnRvU3RvcmFnZVN0cmluZz1mdW5jdGlvbiB0KCl7cmV0dXJuIGkuTG9nLmRlYnVnKFwiU3RhdGUudG9TdG9yYWdlU3RyaW5nXCIpLEpTT04uc3RyaW5naWZ5KHtpZDp0aGlzLmlkLGRhdGE6dGhpcy5kYXRhLGNyZWF0ZWQ6dGhpcy5jcmVhdGVkLHJlcXVlc3RfdHlwZTp0aGlzLnJlcXVlc3RfdHlwZX0pfSx0LmZyb21TdG9yYWdlU3RyaW5nPWZ1bmN0aW9uIGUocil7cmV0dXJuIGkuTG9nLmRlYnVnKFwiU3RhdGUuZnJvbVN0b3JhZ2VTdHJpbmdcIiksbmV3IHQoSlNPTi5wYXJzZShyKSl9LHQuY2xlYXJTdGFsZVN0YXRlPWZ1bmN0aW9uIGUocixuKXt2YXIgbz1EYXRlLm5vdygpLzFlMy1uO3JldHVybiByLmdldEFsbEtleXMoKS50aGVuKChmdW5jdGlvbihlKXtpLkxvZy5kZWJ1ZyhcIlN0YXRlLmNsZWFyU3RhbGVTdGF0ZTogZ290IGtleXNcIixlKTtmb3IodmFyIG49W10scz1mdW5jdGlvbiBzKGEpe3ZhciBjPWVbYV07dT1yLmdldChjKS50aGVuKChmdW5jdGlvbihlKXt2YXIgbj0hMTtpZihlKXRyeXt2YXIgcz10LmZyb21TdG9yYWdlU3RyaW5nKGUpO2kuTG9nLmRlYnVnKFwiU3RhdGUuY2xlYXJTdGFsZVN0YXRlOiBnb3QgaXRlbSBmcm9tIGtleTogXCIsYyxzLmNyZWF0ZWQpLHMuY3JlYXRlZDw9byYmKG49ITApfWNhdGNoKHQpe2kuTG9nLmVycm9yKFwiU3RhdGUuY2xlYXJTdGFsZVN0YXRlOiBFcnJvciBwYXJzaW5nIHN0YXRlIGZvciBrZXlcIixjLHQubWVzc2FnZSksbj0hMH1lbHNlIGkuTG9nLmRlYnVnKFwiU3RhdGUuY2xlYXJTdGFsZVN0YXRlOiBubyBpdGVtIGluIHN0b3JhZ2UgZm9yIGtleTogXCIsYyksbj0hMDtpZihuKXJldHVybiBpLkxvZy5kZWJ1ZyhcIlN0YXRlLmNsZWFyU3RhbGVTdGF0ZTogcmVtb3ZlZCBpdGVtIGZvciBrZXk6IFwiLGMpLHIucmVtb3ZlKGMpfSkpLG4ucHVzaCh1KX0sYT0wO2E8ZS5sZW5ndGg7YSsrKXt2YXIgdTtzKGEpfXJldHVybiBpLkxvZy5kZWJ1ZyhcIlN0YXRlLmNsZWFyU3RhbGVTdGF0ZTogd2FpdGluZyBvbiBwcm9taXNlIGNvdW50OlwiLG4ubGVuZ3RoKSxQcm9taXNlLmFsbChuKX0pKX0sbih0LFt7a2V5OlwiaWRcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9pZH19LHtrZXk6XCJkYXRhXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fZGF0YX19LHtrZXk6XCJjcmVhdGVkXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fY3JlYXRlZH19LHtrZXk6XCJyZXF1ZXN0X3R5cGVcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9yZXF1ZXN0X3R5cGV9fV0pLHR9KCl9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLk9pZGNDbGllbnQ9dm9pZCAwO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksaT1yKDApLG89cig1KSxzPXIoMTIpLGE9cig4KSx1PXIoMzQpLGM9cigzNSksaD1yKDM2KSxsPXIoMTMpLGY9cig5KTtmdW5jdGlvbiBnKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1lLk9pZGNDbGllbnQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O2codGhpcyx0KSxlIGluc3RhbmNlb2Ygby5PaWRjQ2xpZW50U2V0dGluZ3M/dGhpcy5fc2V0dGluZ3M9ZTp0aGlzLl9zZXR0aW5ncz1uZXcgby5PaWRjQ2xpZW50U2V0dGluZ3MoZSl9cmV0dXJuIHQucHJvdG90eXBlLmNyZWF0ZVNpZ25pblJlcXVlc3Q9ZnVuY3Rpb24gdCgpe3ZhciBlPXRoaXMscj1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj1yLnJlc3BvbnNlX3R5cGUsbz1yLnNjb3BlLHM9ci5yZWRpcmVjdF91cmksdT1yLmRhdGEsYz1yLnN0YXRlLGg9ci5wcm9tcHQsbD1yLmRpc3BsYXksZj1yLm1heF9hZ2UsZz1yLnVpX2xvY2FsZXMsZD1yLmlkX3Rva2VuX2hpbnQscD1yLmxvZ2luX2hpbnQsdj1yLmFjcl92YWx1ZXMseT1yLnJlc291cmNlLG09ci5yZXF1ZXN0LF89ci5yZXF1ZXN0X3VyaSxTPXIucmVzcG9uc2VfbW9kZSxiPXIuZXh0cmFRdWVyeVBhcmFtcyx3PXIuZXh0cmFUb2tlblBhcmFtcyxGPXIucmVxdWVzdF90eXBlLEU9ci5za2lwVXNlckluZm8seD1hcmd1bWVudHNbMV07aS5Mb2cuZGVidWcoXCJPaWRjQ2xpZW50LmNyZWF0ZVNpZ25pblJlcXVlc3RcIik7dmFyIEE9dGhpcy5fc2V0dGluZ3MuY2xpZW50X2lkO249bnx8dGhpcy5fc2V0dGluZ3MucmVzcG9uc2VfdHlwZSxvPW98fHRoaXMuX3NldHRpbmdzLnNjb3BlLHM9c3x8dGhpcy5fc2V0dGluZ3MucmVkaXJlY3RfdXJpLGg9aHx8dGhpcy5fc2V0dGluZ3MucHJvbXB0LGw9bHx8dGhpcy5fc2V0dGluZ3MuZGlzcGxheSxmPWZ8fHRoaXMuX3NldHRpbmdzLm1heF9hZ2UsZz1nfHx0aGlzLl9zZXR0aW5ncy51aV9sb2NhbGVzLHY9dnx8dGhpcy5fc2V0dGluZ3MuYWNyX3ZhbHVlcyx5PXl8fHRoaXMuX3NldHRpbmdzLnJlc291cmNlLFM9U3x8dGhpcy5fc2V0dGluZ3MucmVzcG9uc2VfbW9kZSxiPWJ8fHRoaXMuX3NldHRpbmdzLmV4dHJhUXVlcnlQYXJhbXMsdz13fHx0aGlzLl9zZXR0aW5ncy5leHRyYVRva2VuUGFyYW1zO3ZhciBrPXRoaXMuX3NldHRpbmdzLmF1dGhvcml0eTtyZXR1cm4gYS5TaWduaW5SZXF1ZXN0LmlzQ29kZShuKSYmXCJjb2RlXCIhPT1uP1Byb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIk9wZW5JRCBDb25uZWN0IGh5YnJpZCBmbG93IGlzIG5vdCBzdXBwb3J0ZWRcIikpOnRoaXMuX21ldGFkYXRhU2VydmljZS5nZXRBdXRob3JpemF0aW9uRW5kcG9pbnQoKS50aGVuKChmdW5jdGlvbih0KXtpLkxvZy5kZWJ1ZyhcIk9pZGNDbGllbnQuY3JlYXRlU2lnbmluUmVxdWVzdDogUmVjZWl2ZWQgYXV0aG9yaXphdGlvbiBlbmRwb2ludFwiLHQpO3ZhciByPW5ldyBhLlNpZ25pblJlcXVlc3Qoe3VybDp0LGNsaWVudF9pZDpBLHJlZGlyZWN0X3VyaTpzLHJlc3BvbnNlX3R5cGU6bixzY29wZTpvLGRhdGE6dXx8YyxhdXRob3JpdHk6ayxwcm9tcHQ6aCxkaXNwbGF5OmwsbWF4X2FnZTpmLHVpX2xvY2FsZXM6ZyxpZF90b2tlbl9oaW50OmQsbG9naW5faGludDpwLGFjcl92YWx1ZXM6dixyZXNvdXJjZTp5LHJlcXVlc3Q6bSxyZXF1ZXN0X3VyaTpfLGV4dHJhUXVlcnlQYXJhbXM6YixleHRyYVRva2VuUGFyYW1zOncscmVxdWVzdF90eXBlOkYscmVzcG9uc2VfbW9kZTpTLGNsaWVudF9zZWNyZXQ6ZS5fc2V0dGluZ3MuY2xpZW50X3NlY3JldCxza2lwVXNlckluZm86RX0pLFA9ci5zdGF0ZTtyZXR1cm4oeD14fHxlLl9zdGF0ZVN0b3JlKS5zZXQoUC5pZCxQLnRvU3RvcmFnZVN0cmluZygpKS50aGVuKChmdW5jdGlvbigpe3JldHVybiByfSkpfSkpfSx0LnByb3RvdHlwZS5yZWFkU2lnbmluUmVzcG9uc2VTdGF0ZT1mdW5jdGlvbiB0KGUscil7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0mJmFyZ3VtZW50c1syXTtpLkxvZy5kZWJ1ZyhcIk9pZGNDbGllbnQucmVhZFNpZ25pblJlc3BvbnNlU3RhdGVcIik7dmFyIG89XCJxdWVyeVwiPT09dGhpcy5fc2V0dGluZ3MucmVzcG9uc2VfbW9kZXx8IXRoaXMuX3NldHRpbmdzLnJlc3BvbnNlX21vZGUmJmEuU2lnbmluUmVxdWVzdC5pc0NvZGUodGhpcy5fc2V0dGluZ3MucmVzcG9uc2VfdHlwZSkscz1vP1wiP1wiOlwiI1wiLGM9bmV3IHUuU2lnbmluUmVzcG9uc2UoZSxzKTtpZighYy5zdGF0ZSlyZXR1cm4gaS5Mb2cuZXJyb3IoXCJPaWRjQ2xpZW50LnJlYWRTaWduaW5SZXNwb25zZVN0YXRlOiBObyBzdGF0ZSBpbiByZXNwb25zZVwiKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJObyBzdGF0ZSBpbiByZXNwb25zZVwiKSk7cj1yfHx0aGlzLl9zdGF0ZVN0b3JlO3ZhciBoPW4/ci5yZW1vdmUuYmluZChyKTpyLmdldC5iaW5kKHIpO3JldHVybiBoKGMuc3RhdGUpLnRoZW4oKGZ1bmN0aW9uKHQpe2lmKCF0KXRocm93IGkuTG9nLmVycm9yKFwiT2lkY0NsaWVudC5yZWFkU2lnbmluUmVzcG9uc2VTdGF0ZTogTm8gbWF0Y2hpbmcgc3RhdGUgZm91bmQgaW4gc3RvcmFnZVwiKSxuZXcgRXJyb3IoXCJObyBtYXRjaGluZyBzdGF0ZSBmb3VuZCBpbiBzdG9yYWdlXCIpO3JldHVybntzdGF0ZTpsLlNpZ25pblN0YXRlLmZyb21TdG9yYWdlU3RyaW5nKHQpLHJlc3BvbnNlOmN9fSkpfSx0LnByb3RvdHlwZS5wcm9jZXNzU2lnbmluUmVzcG9uc2U9ZnVuY3Rpb24gdChlLHIpe3ZhciBuPXRoaXM7cmV0dXJuIGkuTG9nLmRlYnVnKFwiT2lkY0NsaWVudC5wcm9jZXNzU2lnbmluUmVzcG9uc2VcIiksdGhpcy5yZWFkU2lnbmluUmVzcG9uc2VTdGF0ZShlLHIsITApLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBlPXQuc3RhdGUscj10LnJlc3BvbnNlO3JldHVybiBpLkxvZy5kZWJ1ZyhcIk9pZGNDbGllbnQucHJvY2Vzc1NpZ25pblJlc3BvbnNlOiBSZWNlaXZlZCBzdGF0ZSBmcm9tIHN0b3JhZ2U7IHZhbGlkYXRpbmcgcmVzcG9uc2VcIiksbi5fdmFsaWRhdG9yLnZhbGlkYXRlU2lnbmluUmVzcG9uc2UoZSxyKX0pKX0sdC5wcm90b3R5cGUuY3JlYXRlU2lnbm91dFJlcXVlc3Q9ZnVuY3Rpb24gdCgpe3ZhciBlPXRoaXMscj1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj1yLmlkX3Rva2VuX2hpbnQsbz1yLmRhdGEscz1yLnN0YXRlLGE9ci5wb3N0X2xvZ291dF9yZWRpcmVjdF91cmksdT1yLmV4dHJhUXVlcnlQYXJhbXMsaD1yLnJlcXVlc3RfdHlwZSxsPWFyZ3VtZW50c1sxXTtyZXR1cm4gaS5Mb2cuZGVidWcoXCJPaWRjQ2xpZW50LmNyZWF0ZVNpZ25vdXRSZXF1ZXN0XCIpLGE9YXx8dGhpcy5fc2V0dGluZ3MucG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpLHU9dXx8dGhpcy5fc2V0dGluZ3MuZXh0cmFRdWVyeVBhcmFtcyx0aGlzLl9tZXRhZGF0YVNlcnZpY2UuZ2V0RW5kU2Vzc2lvbkVuZHBvaW50KCkudGhlbigoZnVuY3Rpb24odCl7aWYoIXQpdGhyb3cgaS5Mb2cuZXJyb3IoXCJPaWRjQ2xpZW50LmNyZWF0ZVNpZ25vdXRSZXF1ZXN0OiBObyBlbmQgc2Vzc2lvbiBlbmRwb2ludCB1cmwgcmV0dXJuZWRcIiksbmV3IEVycm9yKFwibm8gZW5kIHNlc3Npb24gZW5kcG9pbnRcIik7aS5Mb2cuZGVidWcoXCJPaWRjQ2xpZW50LmNyZWF0ZVNpZ25vdXRSZXF1ZXN0OiBSZWNlaXZlZCBlbmQgc2Vzc2lvbiBlbmRwb2ludFwiLHQpO3ZhciByPW5ldyBjLlNpZ25vdXRSZXF1ZXN0KHt1cmw6dCxpZF90b2tlbl9oaW50Om4scG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpOmEsZGF0YTpvfHxzLGV4dHJhUXVlcnlQYXJhbXM6dSxyZXF1ZXN0X3R5cGU6aH0pLGY9ci5zdGF0ZTtyZXR1cm4gZiYmKGkuTG9nLmRlYnVnKFwiT2lkY0NsaWVudC5jcmVhdGVTaWdub3V0UmVxdWVzdDogU2lnbm91dCByZXF1ZXN0IGhhcyBzdGF0ZSB0byBwZXJzaXN0XCIpLChsPWx8fGUuX3N0YXRlU3RvcmUpLnNldChmLmlkLGYudG9TdG9yYWdlU3RyaW5nKCkpKSxyfSkpfSx0LnByb3RvdHlwZS5yZWFkU2lnbm91dFJlc3BvbnNlU3RhdGU9ZnVuY3Rpb24gdChlLHIpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdJiZhcmd1bWVudHNbMl07aS5Mb2cuZGVidWcoXCJPaWRjQ2xpZW50LnJlYWRTaWdub3V0UmVzcG9uc2VTdGF0ZVwiKTt2YXIgbz1uZXcgaC5TaWdub3V0UmVzcG9uc2UoZSk7aWYoIW8uc3RhdGUpcmV0dXJuIGkuTG9nLmRlYnVnKFwiT2lkY0NsaWVudC5yZWFkU2lnbm91dFJlc3BvbnNlU3RhdGU6IE5vIHN0YXRlIGluIHJlc3BvbnNlXCIpLG8uZXJyb3I/KGkuTG9nLndhcm4oXCJPaWRjQ2xpZW50LnJlYWRTaWdub3V0UmVzcG9uc2VTdGF0ZTogUmVzcG9uc2Ugd2FzIGVycm9yOiBcIixvLmVycm9yKSxQcm9taXNlLnJlamVjdChuZXcgcy5FcnJvclJlc3BvbnNlKG8pKSk6UHJvbWlzZS5yZXNvbHZlKHtzdGF0ZTp2b2lkIDAscmVzcG9uc2U6b30pO3ZhciBhPW8uc3RhdGU7cj1yfHx0aGlzLl9zdGF0ZVN0b3JlO3ZhciB1PW4/ci5yZW1vdmUuYmluZChyKTpyLmdldC5iaW5kKHIpO3JldHVybiB1KGEpLnRoZW4oKGZ1bmN0aW9uKHQpe2lmKCF0KXRocm93IGkuTG9nLmVycm9yKFwiT2lkY0NsaWVudC5yZWFkU2lnbm91dFJlc3BvbnNlU3RhdGU6IE5vIG1hdGNoaW5nIHN0YXRlIGZvdW5kIGluIHN0b3JhZ2VcIiksbmV3IEVycm9yKFwiTm8gbWF0Y2hpbmcgc3RhdGUgZm91bmQgaW4gc3RvcmFnZVwiKTtyZXR1cm57c3RhdGU6Zi5TdGF0ZS5mcm9tU3RvcmFnZVN0cmluZyh0KSxyZXNwb25zZTpvfX0pKX0sdC5wcm90b3R5cGUucHJvY2Vzc1NpZ25vdXRSZXNwb25zZT1mdW5jdGlvbiB0KGUscil7dmFyIG49dGhpcztyZXR1cm4gaS5Mb2cuZGVidWcoXCJPaWRjQ2xpZW50LnByb2Nlc3NTaWdub3V0UmVzcG9uc2VcIiksdGhpcy5yZWFkU2lnbm91dFJlc3BvbnNlU3RhdGUoZSxyLCEwKS50aGVuKChmdW5jdGlvbih0KXt2YXIgZT10LnN0YXRlLHI9dC5yZXNwb25zZTtyZXR1cm4gZT8oaS5Mb2cuZGVidWcoXCJPaWRjQ2xpZW50LnByb2Nlc3NTaWdub3V0UmVzcG9uc2U6IFJlY2VpdmVkIHN0YXRlIGZyb20gc3RvcmFnZTsgdmFsaWRhdGluZyByZXNwb25zZVwiKSxuLl92YWxpZGF0b3IudmFsaWRhdGVTaWdub3V0UmVzcG9uc2UoZSxyKSk6KGkuTG9nLmRlYnVnKFwiT2lkY0NsaWVudC5wcm9jZXNzU2lnbm91dFJlc3BvbnNlOiBObyBzdGF0ZSBmcm9tIHN0b3JhZ2U7IHNraXBwaW5nIHZhbGlkYXRpbmcgcmVzcG9uc2VcIikscil9KSl9LHQucHJvdG90eXBlLmNsZWFyU3RhbGVTdGF0ZT1mdW5jdGlvbiB0KGUpe3JldHVybiBpLkxvZy5kZWJ1ZyhcIk9pZGNDbGllbnQuY2xlYXJTdGFsZVN0YXRlXCIpLGU9ZXx8dGhpcy5fc3RhdGVTdG9yZSxmLlN0YXRlLmNsZWFyU3RhbGVTdGF0ZShlLHRoaXMuc2V0dGluZ3Muc3RhbGVTdGF0ZUFnZSl9LG4odCxbe2tleTpcIl9zdGF0ZVN0b3JlXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5zZXR0aW5ncy5zdGF0ZVN0b3JlfX0se2tleTpcIl92YWxpZGF0b3JcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLnNldHRpbmdzLnZhbGlkYXRvcn19LHtrZXk6XCJfbWV0YWRhdGFTZXJ2aWNlXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5zZXR0aW5ncy5tZXRhZGF0YVNlcnZpY2V9fSx7a2V5Olwic2V0dGluZ3NcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9zZXR0aW5nc319LHtrZXk6XCJtZXRhZGF0YVNlcnZpY2VcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9tZXRhZGF0YVNlcnZpY2V9fV0pLHR9KCl9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLlRva2VuQ2xpZW50PXZvaWQgMDt2YXIgbj1yKDcpLGk9cigyKSxvPXIoMCk7ZnVuY3Rpb24gcyh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZS5Ub2tlbkNsaWVudD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOm4uSnNvblNlcnZpY2UsYT1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06aS5NZXRhZGF0YVNlcnZpY2U7aWYocyh0aGlzLHQpLCFlKXRocm93IG8uTG9nLmVycm9yKFwiVG9rZW5DbGllbnQuY3RvcjogTm8gc2V0dGluZ3MgcGFzc2VkXCIpLG5ldyBFcnJvcihcInNldHRpbmdzXCIpO3RoaXMuX3NldHRpbmdzPWUsdGhpcy5fanNvblNlcnZpY2U9bmV3IHIsdGhpcy5fbWV0YWRhdGFTZXJ2aWNlPW5ldyBhKHRoaXMuX3NldHRpbmdzKX1yZXR1cm4gdC5wcm90b3R5cGUuZXhjaGFuZ2VDb2RlPWZ1bmN0aW9uIHQoKXt2YXIgZT10aGlzLHI9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9OyhyPU9iamVjdC5hc3NpZ24oe30scikpLmdyYW50X3R5cGU9ci5ncmFudF90eXBlfHxcImF1dGhvcml6YXRpb25fY29kZVwiLHIuY2xpZW50X2lkPXIuY2xpZW50X2lkfHx0aGlzLl9zZXR0aW5ncy5jbGllbnRfaWQsci5jbGllbnRfc2VjcmV0PXIuY2xpZW50X3NlY3JldHx8dGhpcy5fc2V0dGluZ3MuY2xpZW50X3NlY3JldCxyLnJlZGlyZWN0X3VyaT1yLnJlZGlyZWN0X3VyaXx8dGhpcy5fc2V0dGluZ3MucmVkaXJlY3RfdXJpO3ZhciBuPXZvaWQgMCxpPXIuX2NsaWVudF9hdXRoZW50aWNhdGlvbnx8dGhpcy5fc2V0dGluZ3MuX2NsaWVudF9hdXRoZW50aWNhdGlvbjtyZXR1cm4gZGVsZXRlIHIuX2NsaWVudF9hdXRoZW50aWNhdGlvbixyLmNvZGU/ci5yZWRpcmVjdF91cmk/ci5jb2RlX3ZlcmlmaWVyP3IuY2xpZW50X2lkP3IuY2xpZW50X3NlY3JldHx8XCJjbGllbnRfc2VjcmV0X2Jhc2ljXCIhPWk/KFwiY2xpZW50X3NlY3JldF9iYXNpY1wiPT1pJiYobj1yLmNsaWVudF9pZCtcIjpcIityLmNsaWVudF9zZWNyZXQsZGVsZXRlIHIuY2xpZW50X2lkLGRlbGV0ZSByLmNsaWVudF9zZWNyZXQpLHRoaXMuX21ldGFkYXRhU2VydmljZS5nZXRUb2tlbkVuZHBvaW50KCExKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gby5Mb2cuZGVidWcoXCJUb2tlbkNsaWVudC5leGNoYW5nZUNvZGU6IFJlY2VpdmVkIHRva2VuIGVuZHBvaW50XCIpLGUuX2pzb25TZXJ2aWNlLnBvc3RGb3JtKHQscixuKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gby5Mb2cuZGVidWcoXCJUb2tlbkNsaWVudC5leGNoYW5nZUNvZGU6IHJlc3BvbnNlIHJlY2VpdmVkXCIpLHR9KSl9KSkpOihvLkxvZy5lcnJvcihcIlRva2VuQ2xpZW50LmV4Y2hhbmdlQ29kZTogTm8gY2xpZW50X3NlY3JldCBwYXNzZWRcIiksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiQSBjbGllbnRfc2VjcmV0IGlzIHJlcXVpcmVkXCIpKSk6KG8uTG9nLmVycm9yKFwiVG9rZW5DbGllbnQuZXhjaGFuZ2VDb2RlOiBObyBjbGllbnRfaWQgcGFzc2VkXCIpLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIkEgY2xpZW50X2lkIGlzIHJlcXVpcmVkXCIpKSk6KG8uTG9nLmVycm9yKFwiVG9rZW5DbGllbnQuZXhjaGFuZ2VDb2RlOiBObyBjb2RlX3ZlcmlmaWVyIHBhc3NlZFwiKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJBIGNvZGVfdmVyaWZpZXIgaXMgcmVxdWlyZWRcIikpKTooby5Mb2cuZXJyb3IoXCJUb2tlbkNsaWVudC5leGNoYW5nZUNvZGU6IE5vIHJlZGlyZWN0X3VyaSBwYXNzZWRcIiksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiQSByZWRpcmVjdF91cmkgaXMgcmVxdWlyZWRcIikpKTooby5Mb2cuZXJyb3IoXCJUb2tlbkNsaWVudC5leGNoYW5nZUNvZGU6IE5vIGNvZGUgcGFzc2VkXCIpLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIkEgY29kZSBpcyByZXF1aXJlZFwiKSkpfSx0LnByb3RvdHlwZS5leGNoYW5nZVJlZnJlc2hUb2tlbj1mdW5jdGlvbiB0KCl7dmFyIGU9dGhpcyxyPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTsocj1PYmplY3QuYXNzaWduKHt9LHIpKS5ncmFudF90eXBlPXIuZ3JhbnRfdHlwZXx8XCJyZWZyZXNoX3Rva2VuXCIsci5jbGllbnRfaWQ9ci5jbGllbnRfaWR8fHRoaXMuX3NldHRpbmdzLmNsaWVudF9pZCxyLmNsaWVudF9zZWNyZXQ9ci5jbGllbnRfc2VjcmV0fHx0aGlzLl9zZXR0aW5ncy5jbGllbnRfc2VjcmV0O3ZhciBuPXZvaWQgMCxpPXIuX2NsaWVudF9hdXRoZW50aWNhdGlvbnx8dGhpcy5fc2V0dGluZ3MuX2NsaWVudF9hdXRoZW50aWNhdGlvbjtyZXR1cm4gZGVsZXRlIHIuX2NsaWVudF9hdXRoZW50aWNhdGlvbixyLnJlZnJlc2hfdG9rZW4/ci5jbGllbnRfaWQ/KFwiY2xpZW50X3NlY3JldF9iYXNpY1wiPT1pJiYobj1yLmNsaWVudF9pZCtcIjpcIityLmNsaWVudF9zZWNyZXQsZGVsZXRlIHIuY2xpZW50X2lkLGRlbGV0ZSByLmNsaWVudF9zZWNyZXQpLHRoaXMuX21ldGFkYXRhU2VydmljZS5nZXRUb2tlbkVuZHBvaW50KCExKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gby5Mb2cuZGVidWcoXCJUb2tlbkNsaWVudC5leGNoYW5nZVJlZnJlc2hUb2tlbjogUmVjZWl2ZWQgdG9rZW4gZW5kcG9pbnRcIiksZS5fanNvblNlcnZpY2UucG9zdEZvcm0odCxyLG4pLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiBvLkxvZy5kZWJ1ZyhcIlRva2VuQ2xpZW50LmV4Y2hhbmdlUmVmcmVzaFRva2VuOiByZXNwb25zZSByZWNlaXZlZFwiKSx0fSkpfSkpKTooby5Mb2cuZXJyb3IoXCJUb2tlbkNsaWVudC5leGNoYW5nZVJlZnJlc2hUb2tlbjogTm8gY2xpZW50X2lkIHBhc3NlZFwiKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJBIGNsaWVudF9pZCBpcyByZXF1aXJlZFwiKSkpOihvLkxvZy5lcnJvcihcIlRva2VuQ2xpZW50LmV4Y2hhbmdlUmVmcmVzaFRva2VuOiBObyByZWZyZXNoX3Rva2VuIHBhc3NlZFwiKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJBIHJlZnJlc2hfdG9rZW4gaXMgcmVxdWlyZWRcIikpKX0sdH0oKX0sZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuRXJyb3JSZXNwb25zZT12b2lkIDA7dmFyIG49cigwKTtmdW5jdGlvbiBpKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZS5FcnJvclJlc3BvbnNlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30scz1yLmVycm9yLGE9ci5lcnJvcl9kZXNjcmlwdGlvbix1PXIuZXJyb3JfdXJpLGM9ci5zdGF0ZSxoPXIuc2Vzc2lvbl9zdGF0ZTtpZihpKHRoaXMsZSksIXMpdGhyb3cgbi5Mb2cuZXJyb3IoXCJObyBlcnJvciBwYXNzZWQgdG8gRXJyb3JSZXNwb25zZVwiKSxuZXcgRXJyb3IoXCJlcnJvclwiKTt2YXIgbD1vKHRoaXMsdC5jYWxsKHRoaXMsYXx8cykpO3JldHVybiBsLm5hbWU9XCJFcnJvclJlc3BvbnNlXCIsbC5lcnJvcj1zLGwuZXJyb3JfZGVzY3JpcHRpb249YSxsLmVycm9yX3VyaT11LGwuc3RhdGU9YyxsLnNlc3Npb25fc3RhdGU9aCxsfXJldHVybiBmdW5jdGlvbiByKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9KGUsdCksZX0oRXJyb3IpfSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5TaWduaW5TdGF0ZT12b2lkIDA7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBuPWVbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSxyLG4pe3JldHVybiByJiZ0KGUucHJvdG90eXBlLHIpLG4mJnQoZSxuKSxlfX0oKSxpPXIoMCksbz1yKDkpLHM9cig0KSxhPWZ1bmN0aW9uIHUodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShyKDE0KSk7ZnVuY3Rpb24gYyh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gaCh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWUuU2lnbmluU3RhdGU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXIubm9uY2UsaT1yLmF1dGhvcml0eSxvPXIuY2xpZW50X2lkLHU9ci5yZWRpcmVjdF91cmksbD1yLmNvZGVfdmVyaWZpZXIsZj1yLnJlc3BvbnNlX21vZGUsZz1yLmNsaWVudF9zZWNyZXQsZD1yLnNjb3BlLHA9ci5leHRyYVRva2VuUGFyYW1zLHY9ci5za2lwVXNlckluZm87Yyh0aGlzLGUpO3ZhciB5PWgodGhpcyx0LmNhbGwodGhpcyxhcmd1bWVudHNbMF0pKTtpZighMD09PW4/eS5fbm9uY2U9KDAsYS5kZWZhdWx0KSgpOm4mJih5Ll9ub25jZT1uKSwhMD09PWw/eS5fY29kZV92ZXJpZmllcj0oMCxhLmRlZmF1bHQpKCkrKDAsYS5kZWZhdWx0KSgpKygwLGEuZGVmYXVsdCkoKTpsJiYoeS5fY29kZV92ZXJpZmllcj1sKSx5LmNvZGVfdmVyaWZpZXIpe3ZhciBtPXMuSm9zZVV0aWwuaGFzaFN0cmluZyh5LmNvZGVfdmVyaWZpZXIsXCJTSEEyNTZcIik7eS5fY29kZV9jaGFsbGVuZ2U9cy5Kb3NlVXRpbC5oZXhUb0Jhc2U2NFVybChtKX1yZXR1cm4geS5fcmVkaXJlY3RfdXJpPXUseS5fYXV0aG9yaXR5PWkseS5fY2xpZW50X2lkPW8seS5fcmVzcG9uc2VfbW9kZT1mLHkuX2NsaWVudF9zZWNyZXQ9Zyx5Ll9zY29wZT1kLHkuX2V4dHJhVG9rZW5QYXJhbXM9cCx5Ll9za2lwVXNlckluZm89dix5fXJldHVybiBmdW5jdGlvbiByKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9KGUsdCksZS5wcm90b3R5cGUudG9TdG9yYWdlU3RyaW5nPWZ1bmN0aW9uIHQoKXtyZXR1cm4gaS5Mb2cuZGVidWcoXCJTaWduaW5TdGF0ZS50b1N0b3JhZ2VTdHJpbmdcIiksSlNPTi5zdHJpbmdpZnkoe2lkOnRoaXMuaWQsZGF0YTp0aGlzLmRhdGEsY3JlYXRlZDp0aGlzLmNyZWF0ZWQscmVxdWVzdF90eXBlOnRoaXMucmVxdWVzdF90eXBlLG5vbmNlOnRoaXMubm9uY2UsY29kZV92ZXJpZmllcjp0aGlzLmNvZGVfdmVyaWZpZXIscmVkaXJlY3RfdXJpOnRoaXMucmVkaXJlY3RfdXJpLGF1dGhvcml0eTp0aGlzLmF1dGhvcml0eSxjbGllbnRfaWQ6dGhpcy5jbGllbnRfaWQscmVzcG9uc2VfbW9kZTp0aGlzLnJlc3BvbnNlX21vZGUsY2xpZW50X3NlY3JldDp0aGlzLmNsaWVudF9zZWNyZXQsc2NvcGU6dGhpcy5zY29wZSxleHRyYVRva2VuUGFyYW1zOnRoaXMuZXh0cmFUb2tlblBhcmFtcyxza2lwVXNlckluZm86dGhpcy5za2lwVXNlckluZm99KX0sZS5mcm9tU3RvcmFnZVN0cmluZz1mdW5jdGlvbiB0KHIpe3JldHVybiBpLkxvZy5kZWJ1ZyhcIlNpZ25pblN0YXRlLmZyb21TdG9yYWdlU3RyaW5nXCIpLG5ldyBlKEpTT04ucGFyc2UocikpfSxuKGUsW3trZXk6XCJub25jZVwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX25vbmNlfX0se2tleTpcImF1dGhvcml0eVwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX2F1dGhvcml0eX19LHtrZXk6XCJjbGllbnRfaWRcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9jbGllbnRfaWR9fSx7a2V5OlwicmVkaXJlY3RfdXJpXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fcmVkaXJlY3RfdXJpfX0se2tleTpcImNvZGVfdmVyaWZpZXJcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9jb2RlX3ZlcmlmaWVyfX0se2tleTpcImNvZGVfY2hhbGxlbmdlXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fY29kZV9jaGFsbGVuZ2V9fSx7a2V5OlwicmVzcG9uc2VfbW9kZVwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX3Jlc3BvbnNlX21vZGV9fSx7a2V5OlwiY2xpZW50X3NlY3JldFwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX2NsaWVudF9zZWNyZXR9fSx7a2V5Olwic2NvcGVcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9zY29wZX19LHtrZXk6XCJleHRyYVRva2VuUGFyYW1zXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fZXh0cmFUb2tlblBhcmFtc319LHtrZXk6XCJza2lwVXNlckluZm9cIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9za2lwVXNlckluZm99fV0pLGV9KG8uU3RhdGUpfSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5kZWZhdWx0PWZ1bmN0aW9uIG4oKXtyZXR1cm4oXCJ1bmRlZmluZWRcIiE9aSYmbnVsbCE9PWkmJnZvaWQgMCE9PWkuZ2V0UmFuZG9tVmFsdWVzP286cykoKS5yZXBsYWNlKC8tL2csXCJcIil9O3ZhciBpPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93LmNyeXB0b3x8d2luZG93Lm1zQ3J5cHRvOm51bGw7ZnVuY3Rpb24gbygpe3JldHVybihbMWU3XSstMWUzKy00ZTMrLThlMystMWUxMSkucmVwbGFjZSgvWzAxOF0vZywoZnVuY3Rpb24odCl7cmV0dXJuKHReaS5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoMSkpWzBdJjE1Pj50LzQpLnRvU3RyaW5nKDE2KX0pKX1mdW5jdGlvbiBzKCl7cmV0dXJuKFsxZTddKy0xZTMrLTRlMystOGUzKy0xZTExKS5yZXBsYWNlKC9bMDE4XS9nLChmdW5jdGlvbih0KXtyZXR1cm4odF4xNipNYXRoLnJhbmRvbSgpPj50LzQpLnRvU3RyaW5nKDE2KX0pKX10LmV4cG9ydHM9ZS5kZWZhdWx0fSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5Vc2VyPXZvaWQgMDt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG49ZVtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbihlLHIsbil7cmV0dXJuIHImJnQoZS5wcm90b3R5cGUsciksbiYmdChlLG4pLGV9fSgpLGk9cigwKTtlLlVzZXI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3ZhciByPWUuaWRfdG9rZW4sbj1lLnNlc3Npb25fc3RhdGUsaT1lLmFjY2Vzc190b2tlbixvPWUucmVmcmVzaF90b2tlbixzPWUudG9rZW5fdHlwZSxhPWUuc2NvcGUsdT1lLnByb2ZpbGUsYz1lLmV4cGlyZXNfYXQsaD1lLnN0YXRlOyFmdW5jdGlvbiBsKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX0odGhpcyx0KSx0aGlzLmlkX3Rva2VuPXIsdGhpcy5zZXNzaW9uX3N0YXRlPW4sdGhpcy5hY2Nlc3NfdG9rZW49aSx0aGlzLnJlZnJlc2hfdG9rZW49byx0aGlzLnRva2VuX3R5cGU9cyx0aGlzLnNjb3BlPWEsdGhpcy5wcm9maWxlPXUsdGhpcy5leHBpcmVzX2F0PWMsdGhpcy5zdGF0ZT1ofXJldHVybiB0LnByb3RvdHlwZS50b1N0b3JhZ2VTdHJpbmc9ZnVuY3Rpb24gdCgpe3JldHVybiBpLkxvZy5kZWJ1ZyhcIlVzZXIudG9TdG9yYWdlU3RyaW5nXCIpLEpTT04uc3RyaW5naWZ5KHtpZF90b2tlbjp0aGlzLmlkX3Rva2VuLHNlc3Npb25fc3RhdGU6dGhpcy5zZXNzaW9uX3N0YXRlLGFjY2Vzc190b2tlbjp0aGlzLmFjY2Vzc190b2tlbixyZWZyZXNoX3Rva2VuOnRoaXMucmVmcmVzaF90b2tlbix0b2tlbl90eXBlOnRoaXMudG9rZW5fdHlwZSxzY29wZTp0aGlzLnNjb3BlLHByb2ZpbGU6dGhpcy5wcm9maWxlLGV4cGlyZXNfYXQ6dGhpcy5leHBpcmVzX2F0fSl9LHQuZnJvbVN0b3JhZ2VTdHJpbmc9ZnVuY3Rpb24gZShyKXtyZXR1cm4gaS5Mb2cuZGVidWcoXCJVc2VyLmZyb21TdG9yYWdlU3RyaW5nXCIpLG5ldyB0KEpTT04ucGFyc2UocikpfSxuKHQsW3trZXk6XCJleHBpcmVzX2luXCIsZ2V0OmZ1bmN0aW9uIHQoKXtpZih0aGlzLmV4cGlyZXNfYXQpe3ZhciBlPXBhcnNlSW50KERhdGUubm93KCkvMWUzKTtyZXR1cm4gdGhpcy5leHBpcmVzX2F0LWV9fSxzZXQ6ZnVuY3Rpb24gdChlKXt2YXIgcj1wYXJzZUludChlKTtpZihcIm51bWJlclwiPT10eXBlb2YgciYmcj4wKXt2YXIgbj1wYXJzZUludChEYXRlLm5vdygpLzFlMyk7dGhpcy5leHBpcmVzX2F0PW4rcn19fSx7a2V5OlwiZXhwaXJlZFwiLGdldDpmdW5jdGlvbiB0KCl7dmFyIGU9dGhpcy5leHBpcmVzX2luO2lmKHZvaWQgMCE9PWUpcmV0dXJuIGU8PTB9fSx7a2V5Olwic2NvcGVzXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4odGhpcy5zY29wZXx8XCJcIikuc3BsaXQoXCIgXCIpfX1dKSx0fSgpfSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5BY2Nlc3NUb2tlbkV2ZW50cz12b2lkIDA7dmFyIG49cigwKSxpPXIoNDYpO2Z1bmN0aW9uIG8odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWUuQWNjZXNzVG9rZW5FdmVudHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LHI9ZS5hY2Nlc3NUb2tlbkV4cGlyaW5nTm90aWZpY2F0aW9uVGltZSxuPXZvaWQgMD09PXI/NjA6cixzPWUuYWNjZXNzVG9rZW5FeHBpcmluZ1RpbWVyLGE9dm9pZCAwPT09cz9uZXcgaS5UaW1lcihcIkFjY2VzcyB0b2tlbiBleHBpcmluZ1wiKTpzLHU9ZS5hY2Nlc3NUb2tlbkV4cGlyZWRUaW1lcixjPXZvaWQgMD09PXU/bmV3IGkuVGltZXIoXCJBY2Nlc3MgdG9rZW4gZXhwaXJlZFwiKTp1O28odGhpcyx0KSx0aGlzLl9hY2Nlc3NUb2tlbkV4cGlyaW5nTm90aWZpY2F0aW9uVGltZT1uLHRoaXMuX2FjY2Vzc1Rva2VuRXhwaXJpbmc9YSx0aGlzLl9hY2Nlc3NUb2tlbkV4cGlyZWQ9Y31yZXR1cm4gdC5wcm90b3R5cGUubG9hZD1mdW5jdGlvbiB0KGUpe2lmKGUuYWNjZXNzX3Rva2VuJiZ2b2lkIDAhPT1lLmV4cGlyZXNfaW4pe3ZhciByPWUuZXhwaXJlc19pbjtpZihuLkxvZy5kZWJ1ZyhcIkFjY2Vzc1Rva2VuRXZlbnRzLmxvYWQ6IGFjY2VzcyB0b2tlbiBwcmVzZW50LCByZW1haW5pbmcgZHVyYXRpb246XCIscikscj4wKXt2YXIgaT1yLXRoaXMuX2FjY2Vzc1Rva2VuRXhwaXJpbmdOb3RpZmljYXRpb25UaW1lO2k8PTAmJihpPTEpLG4uTG9nLmRlYnVnKFwiQWNjZXNzVG9rZW5FdmVudHMubG9hZDogcmVnaXN0ZXJpbmcgZXhwaXJpbmcgdGltZXIgaW46XCIsaSksdGhpcy5fYWNjZXNzVG9rZW5FeHBpcmluZy5pbml0KGkpfWVsc2Ugbi5Mb2cuZGVidWcoXCJBY2Nlc3NUb2tlbkV2ZW50cy5sb2FkOiBjYW5jZWxpbmcgZXhpc3RpbmcgZXhwaXJpbmcgdGltZXIgYmVjYXNlIHdlJ3JlIHBhc3QgZXhwaXJhdGlvbi5cIiksdGhpcy5fYWNjZXNzVG9rZW5FeHBpcmluZy5jYW5jZWwoKTt2YXIgbz1yKzE7bi5Mb2cuZGVidWcoXCJBY2Nlc3NUb2tlbkV2ZW50cy5sb2FkOiByZWdpc3RlcmluZyBleHBpcmVkIHRpbWVyIGluOlwiLG8pLHRoaXMuX2FjY2Vzc1Rva2VuRXhwaXJlZC5pbml0KG8pfWVsc2UgdGhpcy5fYWNjZXNzVG9rZW5FeHBpcmluZy5jYW5jZWwoKSx0aGlzLl9hY2Nlc3NUb2tlbkV4cGlyZWQuY2FuY2VsKCl9LHQucHJvdG90eXBlLnVubG9hZD1mdW5jdGlvbiB0KCl7bi5Mb2cuZGVidWcoXCJBY2Nlc3NUb2tlbkV2ZW50cy51bmxvYWQ6IGNhbmNlbGluZyBleGlzdGluZyBhY2Nlc3MgdG9rZW4gdGltZXJzXCIpLHRoaXMuX2FjY2Vzc1Rva2VuRXhwaXJpbmcuY2FuY2VsKCksdGhpcy5fYWNjZXNzVG9rZW5FeHBpcmVkLmNhbmNlbCgpfSx0LnByb3RvdHlwZS5hZGRBY2Nlc3NUb2tlbkV4cGlyaW5nPWZ1bmN0aW9uIHQoZSl7dGhpcy5fYWNjZXNzVG9rZW5FeHBpcmluZy5hZGRIYW5kbGVyKGUpfSx0LnByb3RvdHlwZS5yZW1vdmVBY2Nlc3NUb2tlbkV4cGlyaW5nPWZ1bmN0aW9uIHQoZSl7dGhpcy5fYWNjZXNzVG9rZW5FeHBpcmluZy5yZW1vdmVIYW5kbGVyKGUpfSx0LnByb3RvdHlwZS5hZGRBY2Nlc3NUb2tlbkV4cGlyZWQ9ZnVuY3Rpb24gdChlKXt0aGlzLl9hY2Nlc3NUb2tlbkV4cGlyZWQuYWRkSGFuZGxlcihlKX0sdC5wcm90b3R5cGUucmVtb3ZlQWNjZXNzVG9rZW5FeHBpcmVkPWZ1bmN0aW9uIHQoZSl7dGhpcy5fYWNjZXNzVG9rZW5FeHBpcmVkLnJlbW92ZUhhbmRsZXIoZSl9LHR9KCl9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLkV2ZW50PXZvaWQgMDt2YXIgbj1yKDApO2UuRXZlbnQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpeyFmdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX0odGhpcyx0KSx0aGlzLl9uYW1lPWUsdGhpcy5fY2FsbGJhY2tzPVtdfXJldHVybiB0LnByb3RvdHlwZS5hZGRIYW5kbGVyPWZ1bmN0aW9uIHQoZSl7dGhpcy5fY2FsbGJhY2tzLnB1c2goZSl9LHQucHJvdG90eXBlLnJlbW92ZUhhbmRsZXI9ZnVuY3Rpb24gdChlKXt2YXIgcj10aGlzLl9jYWxsYmFja3MuZmluZEluZGV4KChmdW5jdGlvbih0KXtyZXR1cm4gdD09PWV9KSk7cj49MCYmdGhpcy5fY2FsbGJhY2tzLnNwbGljZShyLDEpfSx0LnByb3RvdHlwZS5yYWlzZT1mdW5jdGlvbiB0KCl7bi5Mb2cuZGVidWcoXCJFdmVudDogUmFpc2luZyBldmVudDogXCIrdGhpcy5fbmFtZSk7Zm9yKHZhciBlPTA7ZTx0aGlzLl9jYWxsYmFja3MubGVuZ3RoO2UrKyl7dmFyIHI7KHI9dGhpcy5fY2FsbGJhY2tzKVtlXS5hcHBseShyLGFyZ3VtZW50cyl9fSx0fSgpfSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5TZXNzaW9uTW9uaXRvcj12b2lkIDA7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBuPWVbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSxyLG4pe3JldHVybiByJiZ0KGUucHJvdG90eXBlLHIpLG4mJnQoZSxuKSxlfX0oKSxpPXIoMCksbz1yKDE5KSxzPXIoMSk7ZnVuY3Rpb24gYSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZS5TZXNzaW9uTW9uaXRvcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIHI9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpvLkNoZWNrU2Vzc2lvbklGcmFtZSx1PWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTpzLkdsb2JhbC50aW1lcjtpZihhKHRoaXMsdCksIWUpdGhyb3cgaS5Mb2cuZXJyb3IoXCJTZXNzaW9uTW9uaXRvci5jdG9yOiBObyB1c2VyIG1hbmFnZXIgcGFzc2VkIHRvIFNlc3Npb25Nb25pdG9yXCIpLG5ldyBFcnJvcihcInVzZXJNYW5hZ2VyXCIpO3RoaXMuX3VzZXJNYW5hZ2VyPWUsdGhpcy5fQ2hlY2tTZXNzaW9uSUZyYW1lQ3Rvcj1uLHRoaXMuX3RpbWVyPXUsdGhpcy5fdXNlck1hbmFnZXIuZXZlbnRzLmFkZFVzZXJMb2FkZWQodGhpcy5fc3RhcnQuYmluZCh0aGlzKSksdGhpcy5fdXNlck1hbmFnZXIuZXZlbnRzLmFkZFVzZXJVbmxvYWRlZCh0aGlzLl9zdG9wLmJpbmQodGhpcykpLFByb21pc2UucmVzb2x2ZSh0aGlzLl91c2VyTWFuYWdlci5nZXRVc2VyKCkudGhlbigoZnVuY3Rpb24odCl7dD9yLl9zdGFydCh0KTpyLl9zZXR0aW5ncy5tb25pdG9yQW5vbnltb3VzU2Vzc2lvbiYmci5fdXNlck1hbmFnZXIucXVlcnlTZXNzaW9uU3RhdHVzKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIGU9e3Nlc3Npb25fc3RhdGU6dC5zZXNzaW9uX3N0YXRlfTt0LnN1YiYmdC5zaWQmJihlLnByb2ZpbGU9e3N1Yjp0LnN1YixzaWQ6dC5zaWR9KSxyLl9zdGFydChlKX0pKS5jYXRjaCgoZnVuY3Rpb24odCl7aS5Mb2cuZXJyb3IoXCJTZXNzaW9uTW9uaXRvciBjdG9yOiBlcnJvciBmcm9tIHF1ZXJ5U2Vzc2lvblN0YXR1czpcIix0Lm1lc3NhZ2UpfSkpfSkpLmNhdGNoKChmdW5jdGlvbih0KXtpLkxvZy5lcnJvcihcIlNlc3Npb25Nb25pdG9yIGN0b3I6IGVycm9yIGZyb20gZ2V0VXNlcjpcIix0Lm1lc3NhZ2UpfSkpKX1yZXR1cm4gdC5wcm90b3R5cGUuX3N0YXJ0PWZ1bmN0aW9uIHQoZSl7dmFyIHI9dGhpcyxuPWUuc2Vzc2lvbl9zdGF0ZTtuJiYoZS5wcm9maWxlPyh0aGlzLl9zdWI9ZS5wcm9maWxlLnN1Yix0aGlzLl9zaWQ9ZS5wcm9maWxlLnNpZCxpLkxvZy5kZWJ1ZyhcIlNlc3Npb25Nb25pdG9yLl9zdGFydDogc2Vzc2lvbl9zdGF0ZTpcIixuLFwiLCBzdWI6XCIsdGhpcy5fc3ViKSk6KHRoaXMuX3N1Yj12b2lkIDAsdGhpcy5fc2lkPXZvaWQgMCxpLkxvZy5kZWJ1ZyhcIlNlc3Npb25Nb25pdG9yLl9zdGFydDogc2Vzc2lvbl9zdGF0ZTpcIixuLFwiLCBhbm9ueW1vdXMgdXNlclwiKSksdGhpcy5fY2hlY2tTZXNzaW9uSUZyYW1lP3RoaXMuX2NoZWNrU2Vzc2lvbklGcmFtZS5zdGFydChuKTp0aGlzLl9tZXRhZGF0YVNlcnZpY2UuZ2V0Q2hlY2tTZXNzaW9uSWZyYW1lKCkudGhlbigoZnVuY3Rpb24odCl7aWYodCl7aS5Mb2cuZGVidWcoXCJTZXNzaW9uTW9uaXRvci5fc3RhcnQ6IEluaXRpYWxpemluZyBjaGVjayBzZXNzaW9uIGlmcmFtZVwiKTt2YXIgZT1yLl9jbGllbnRfaWQsbz1yLl9jaGVja1Nlc3Npb25JbnRlcnZhbCxzPXIuX3N0b3BDaGVja1Nlc3Npb25PbkVycm9yO3IuX2NoZWNrU2Vzc2lvbklGcmFtZT1uZXcgci5fQ2hlY2tTZXNzaW9uSUZyYW1lQ3RvcihyLl9jYWxsYmFjay5iaW5kKHIpLGUsdCxvLHMpLHIuX2NoZWNrU2Vzc2lvbklGcmFtZS5sb2FkKCkudGhlbigoZnVuY3Rpb24oKXtyLl9jaGVja1Nlc3Npb25JRnJhbWUuc3RhcnQobil9KSl9ZWxzZSBpLkxvZy53YXJuKFwiU2Vzc2lvbk1vbml0b3IuX3N0YXJ0OiBObyBjaGVjayBzZXNzaW9uIGlmcmFtZSBmb3VuZCBpbiB0aGUgbWV0YWRhdGFcIil9KSkuY2F0Y2goKGZ1bmN0aW9uKHQpe2kuTG9nLmVycm9yKFwiU2Vzc2lvbk1vbml0b3IuX3N0YXJ0OiBFcnJvciBmcm9tIGdldENoZWNrU2Vzc2lvbklmcmFtZTpcIix0Lm1lc3NhZ2UpfSkpKX0sdC5wcm90b3R5cGUuX3N0b3A9ZnVuY3Rpb24gdCgpe3ZhciBlPXRoaXM7aWYodGhpcy5fc3ViPXZvaWQgMCx0aGlzLl9zaWQ9dm9pZCAwLHRoaXMuX2NoZWNrU2Vzc2lvbklGcmFtZSYmKGkuTG9nLmRlYnVnKFwiU2Vzc2lvbk1vbml0b3IuX3N0b3BcIiksdGhpcy5fY2hlY2tTZXNzaW9uSUZyYW1lLnN0b3AoKSksdGhpcy5fc2V0dGluZ3MubW9uaXRvckFub255bW91c1Nlc3Npb24pdmFyIHI9dGhpcy5fdGltZXIuc2V0SW50ZXJ2YWwoKGZ1bmN0aW9uKCl7ZS5fdGltZXIuY2xlYXJJbnRlcnZhbChyKSxlLl91c2VyTWFuYWdlci5xdWVyeVNlc3Npb25TdGF0dXMoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgcj17c2Vzc2lvbl9zdGF0ZTp0LnNlc3Npb25fc3RhdGV9O3Quc3ViJiZ0LnNpZCYmKHIucHJvZmlsZT17c3ViOnQuc3ViLHNpZDp0LnNpZH0pLGUuX3N0YXJ0KHIpfSkpLmNhdGNoKChmdW5jdGlvbih0KXtpLkxvZy5lcnJvcihcIlNlc3Npb25Nb25pdG9yOiBlcnJvciBmcm9tIHF1ZXJ5U2Vzc2lvblN0YXR1czpcIix0Lm1lc3NhZ2UpfSkpfSksMWUzKX0sdC5wcm90b3R5cGUuX2NhbGxiYWNrPWZ1bmN0aW9uIHQoKXt2YXIgZT10aGlzO3RoaXMuX3VzZXJNYW5hZ2VyLnF1ZXJ5U2Vzc2lvblN0YXR1cygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciByPSEwO3Q/dC5zdWI9PT1lLl9zdWI/KHI9ITEsZS5fY2hlY2tTZXNzaW9uSUZyYW1lLnN0YXJ0KHQuc2Vzc2lvbl9zdGF0ZSksdC5zaWQ9PT1lLl9zaWQ/aS5Mb2cuZGVidWcoXCJTZXNzaW9uTW9uaXRvci5fY2FsbGJhY2s6IFNhbWUgc3ViIHN0aWxsIGxvZ2dlZCBpbiBhdCBPUCwgcmVzdGFydGluZyBjaGVjayBzZXNzaW9uIGlmcmFtZTsgc2Vzc2lvbl9zdGF0ZTpcIix0LnNlc3Npb25fc3RhdGUpOihpLkxvZy5kZWJ1ZyhcIlNlc3Npb25Nb25pdG9yLl9jYWxsYmFjazogU2FtZSBzdWIgc3RpbGwgbG9nZ2VkIGluIGF0IE9QLCBzZXNzaW9uIHN0YXRlIGhhcyBjaGFuZ2VkLCByZXN0YXJ0aW5nIGNoZWNrIHNlc3Npb24gaWZyYW1lOyBzZXNzaW9uX3N0YXRlOlwiLHQuc2Vzc2lvbl9zdGF0ZSksZS5fdXNlck1hbmFnZXIuZXZlbnRzLl9yYWlzZVVzZXJTZXNzaW9uQ2hhbmdlZCgpKSk6aS5Mb2cuZGVidWcoXCJTZXNzaW9uTW9uaXRvci5fY2FsbGJhY2s6IERpZmZlcmVudCBzdWJqZWN0IHNpZ25lZCBpbnRvIE9QOlwiLHQuc3ViKTppLkxvZy5kZWJ1ZyhcIlNlc3Npb25Nb25pdG9yLl9jYWxsYmFjazogU3ViamVjdCBubyBsb25nZXIgc2lnbmVkIGludG8gT1BcIiksciYmKGUuX3N1Yj8oaS5Mb2cuZGVidWcoXCJTZXNzaW9uTW9uaXRvci5fY2FsbGJhY2s6IFNlc3Npb25Nb25pdG9yLl9jYWxsYmFjazsgcmFpc2luZyBzaWduZWQgb3V0IGV2ZW50XCIpLGUuX3VzZXJNYW5hZ2VyLmV2ZW50cy5fcmFpc2VVc2VyU2lnbmVkT3V0KCkpOihpLkxvZy5kZWJ1ZyhcIlNlc3Npb25Nb25pdG9yLl9jYWxsYmFjazogU2Vzc2lvbk1vbml0b3IuX2NhbGxiYWNrOyByYWlzaW5nIHNpZ25lZCBpbiBldmVudFwiKSxlLl91c2VyTWFuYWdlci5ldmVudHMuX3JhaXNlVXNlclNpZ25lZEluKCkpKX0pKS5jYXRjaCgoZnVuY3Rpb24odCl7ZS5fc3ViJiYoaS5Mb2cuZGVidWcoXCJTZXNzaW9uTW9uaXRvci5fY2FsbGJhY2s6IEVycm9yIGNhbGxpbmcgcXVlcnlDdXJyZW50U2lnbmluU2Vzc2lvbjsgcmFpc2luZyBzaWduZWQgb3V0IGV2ZW50XCIsdC5tZXNzYWdlKSxlLl91c2VyTWFuYWdlci5ldmVudHMuX3JhaXNlVXNlclNpZ25lZE91dCgpKX0pKX0sbih0LFt7a2V5OlwiX3NldHRpbmdzXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fdXNlck1hbmFnZXIuc2V0dGluZ3N9fSx7a2V5OlwiX21ldGFkYXRhU2VydmljZVwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX3VzZXJNYW5hZ2VyLm1ldGFkYXRhU2VydmljZX19LHtrZXk6XCJfY2xpZW50X2lkXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fc2V0dGluZ3MuY2xpZW50X2lkfX0se2tleTpcIl9jaGVja1Nlc3Npb25JbnRlcnZhbFwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX3NldHRpbmdzLmNoZWNrU2Vzc2lvbkludGVydmFsfX0se2tleTpcIl9zdG9wQ2hlY2tTZXNzaW9uT25FcnJvclwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX3NldHRpbmdzLnN0b3BDaGVja1Nlc3Npb25PbkVycm9yfX1dKSx0fSgpfSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5DaGVja1Nlc3Npb25JRnJhbWU9dm9pZCAwO3ZhciBuPXIoMCk7ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZS5DaGVja1Nlc3Npb25JRnJhbWU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUscixuLG8pe3ZhciBzPSEoYXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0pfHxhcmd1bWVudHNbNF07aSh0aGlzLHQpLHRoaXMuX2NhbGxiYWNrPWUsdGhpcy5fY2xpZW50X2lkPXIsdGhpcy5fdXJsPW4sdGhpcy5faW50ZXJ2YWw9b3x8MmUzLHRoaXMuX3N0b3BPbkVycm9yPXM7dmFyIGE9bi5pbmRleE9mKFwiL1wiLG4uaW5kZXhPZihcIi8vXCIpKzIpO3RoaXMuX2ZyYW1lX29yaWdpbj1uLnN1YnN0cigwLGEpLHRoaXMuX2ZyYW1lPXdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpLHRoaXMuX2ZyYW1lLnN0eWxlLnZpc2liaWxpdHk9XCJoaWRkZW5cIix0aGlzLl9mcmFtZS5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIsdGhpcy5fZnJhbWUuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLl9mcmFtZS53aWR0aD0wLHRoaXMuX2ZyYW1lLmhlaWdodD0wLHRoaXMuX2ZyYW1lLnNyYz1ufXJldHVybiB0LnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uIHQoKXt2YXIgZT10aGlzO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCl7ZS5fZnJhbWUub25sb2FkPWZ1bmN0aW9uKCl7dCgpfSx3aW5kb3cuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlLl9mcmFtZSksZS5fYm91bmRNZXNzYWdlRXZlbnQ9ZS5fbWVzc2FnZS5iaW5kKGUpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLGUuX2JvdW5kTWVzc2FnZUV2ZW50LCExKX0pKX0sdC5wcm90b3R5cGUuX21lc3NhZ2U9ZnVuY3Rpb24gdChlKXtlLm9yaWdpbj09PXRoaXMuX2ZyYW1lX29yaWdpbiYmZS5zb3VyY2U9PT10aGlzLl9mcmFtZS5jb250ZW50V2luZG93JiYoXCJlcnJvclwiPT09ZS5kYXRhPyhuLkxvZy5lcnJvcihcIkNoZWNrU2Vzc2lvbklGcmFtZTogZXJyb3IgbWVzc2FnZSBmcm9tIGNoZWNrIHNlc3Npb24gb3AgaWZyYW1lXCIpLHRoaXMuX3N0b3BPbkVycm9yJiZ0aGlzLnN0b3AoKSk6XCJjaGFuZ2VkXCI9PT1lLmRhdGE/KG4uTG9nLmRlYnVnKFwiQ2hlY2tTZXNzaW9uSUZyYW1lOiBjaGFuZ2VkIG1lc3NhZ2UgZnJvbSBjaGVjayBzZXNzaW9uIG9wIGlmcmFtZVwiKSx0aGlzLnN0b3AoKSx0aGlzLl9jYWxsYmFjaygpKTpuLkxvZy5kZWJ1ZyhcIkNoZWNrU2Vzc2lvbklGcmFtZTogXCIrZS5kYXRhK1wiIG1lc3NhZ2UgZnJvbSBjaGVjayBzZXNzaW9uIG9wIGlmcmFtZVwiKSl9LHQucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uIHQoZSl7dmFyIHI9dGhpcztpZih0aGlzLl9zZXNzaW9uX3N0YXRlIT09ZSl7bi5Mb2cuZGVidWcoXCJDaGVja1Nlc3Npb25JRnJhbWUuc3RhcnRcIiksdGhpcy5zdG9wKCksdGhpcy5fc2Vzc2lvbl9zdGF0ZT1lO3ZhciBpPWZ1bmN0aW9uIHQoKXtyLl9mcmFtZS5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKHIuX2NsaWVudF9pZCtcIiBcIityLl9zZXNzaW9uX3N0YXRlLHIuX2ZyYW1lX29yaWdpbil9O2koKSx0aGlzLl90aW1lcj13aW5kb3cuc2V0SW50ZXJ2YWwoaSx0aGlzLl9pbnRlcnZhbCl9fSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uIHQoKXt0aGlzLl9zZXNzaW9uX3N0YXRlPW51bGwsdGhpcy5fdGltZXImJihuLkxvZy5kZWJ1ZyhcIkNoZWNrU2Vzc2lvbklGcmFtZS5zdG9wXCIpLHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuX3RpbWVyKSx0aGlzLl90aW1lcj1udWxsKX0sdH0oKX0sZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuVG9rZW5SZXZvY2F0aW9uQ2xpZW50PXZvaWQgMDt2YXIgbj1yKDApLGk9cigyKSxvPXIoMSk7ZnVuY3Rpb24gcyh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9dmFyIGE9XCJhY2Nlc3NfdG9rZW5cIix1PVwicmVmcmVzaF90b2tlblwiO2UuVG9rZW5SZXZvY2F0aW9uQ2xpZW50PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06by5HbG9iYWwuWE1MSHR0cFJlcXVlc3QsYT1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06aS5NZXRhZGF0YVNlcnZpY2U7aWYocyh0aGlzLHQpLCFlKXRocm93IG4uTG9nLmVycm9yKFwiVG9rZW5SZXZvY2F0aW9uQ2xpZW50LmN0b3I6IE5vIHNldHRpbmdzIHByb3ZpZGVkXCIpLG5ldyBFcnJvcihcIk5vIHNldHRpbmdzIHByb3ZpZGVkLlwiKTt0aGlzLl9zZXR0aW5ncz1lLHRoaXMuX1hNTEh0dHBSZXF1ZXN0Q3Rvcj1yLHRoaXMuX21ldGFkYXRhU2VydmljZT1uZXcgYSh0aGlzLl9zZXR0aW5ncyl9cmV0dXJuIHQucHJvdG90eXBlLnJldm9rZT1mdW5jdGlvbiB0KGUscil7dmFyIGk9dGhpcyxvPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTpcImFjY2Vzc190b2tlblwiO2lmKCFlKXRocm93IG4uTG9nLmVycm9yKFwiVG9rZW5SZXZvY2F0aW9uQ2xpZW50LnJldm9rZTogTm8gdG9rZW4gcHJvdmlkZWRcIiksbmV3IEVycm9yKFwiTm8gdG9rZW4gcHJvdmlkZWQuXCIpO2lmKG8hPT1hJiZvIT11KXRocm93IG4uTG9nLmVycm9yKFwiVG9rZW5SZXZvY2F0aW9uQ2xpZW50LnJldm9rZTogSW52YWxpZCB0b2tlbiB0eXBlXCIpLG5ldyBFcnJvcihcIkludmFsaWQgdG9rZW4gdHlwZS5cIik7cmV0dXJuIHRoaXMuX21ldGFkYXRhU2VydmljZS5nZXRSZXZvY2F0aW9uRW5kcG9pbnQoKS50aGVuKChmdW5jdGlvbih0KXtpZih0KXtuLkxvZy5kZWJ1ZyhcIlRva2VuUmV2b2NhdGlvbkNsaWVudC5yZXZva2U6IFJldm9raW5nIFwiK28pO3ZhciBzPWkuX3NldHRpbmdzLmNsaWVudF9pZCxhPWkuX3NldHRpbmdzLmNsaWVudF9zZWNyZXQ7cmV0dXJuIGkuX3Jldm9rZSh0LHMsYSxlLG8pfWlmKHIpdGhyb3cgbi5Mb2cuZXJyb3IoXCJUb2tlblJldm9jYXRpb25DbGllbnQucmV2b2tlOiBSZXZvY2F0aW9uIG5vdCBzdXBwb3J0ZWRcIiksbmV3IEVycm9yKFwiUmV2b2NhdGlvbiBub3Qgc3VwcG9ydGVkXCIpfSkpfSx0LnByb3RvdHlwZS5fcmV2b2tlPWZ1bmN0aW9uIHQoZSxyLGksbyxzKXt2YXIgYT10aGlzO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCx1KXt2YXIgYz1uZXcgYS5fWE1MSHR0cFJlcXVlc3RDdG9yO2Mub3BlbihcIlBPU1RcIixlKSxjLm9ubG9hZD1mdW5jdGlvbigpe24uTG9nLmRlYnVnKFwiVG9rZW5SZXZvY2F0aW9uQ2xpZW50LnJldm9rZTogSFRUUCByZXNwb25zZSByZWNlaXZlZCwgc3RhdHVzXCIsYy5zdGF0dXMpLDIwMD09PWMuc3RhdHVzP3QoKTp1KEVycm9yKGMuc3RhdHVzVGV4dCtcIiAoXCIrYy5zdGF0dXMrXCIpXCIpKX0sYy5vbmVycm9yPWZ1bmN0aW9uKCl7bi5Mb2cuZGVidWcoXCJUb2tlblJldm9jYXRpb25DbGllbnQucmV2b2tlOiBOZXR3b3JrIEVycm9yLlwiKSx1KFwiTmV0d29yayBFcnJvclwiKX07dmFyIGg9XCJjbGllbnRfaWQ9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHIpO2kmJihoKz1cIiZjbGllbnRfc2VjcmV0PVwiK2VuY29kZVVSSUNvbXBvbmVudChpKSksaCs9XCImdG9rZW5fdHlwZV9oaW50PVwiK2VuY29kZVVSSUNvbXBvbmVudChzKSxoKz1cIiZ0b2tlbj1cIitlbmNvZGVVUklDb21wb25lbnQobyksYy5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIiksYy5zZW5kKGgpfSkpfSx0fSgpfSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5Db3Jkb3ZhUG9wdXBXaW5kb3c9dm9pZCAwO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksaT1yKDApO2UuQ29yZG92YVBvcHVwV2luZG93PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcj10aGlzOyFmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX0odGhpcyx0KSx0aGlzLl9wcm9taXNlPW5ldyBQcm9taXNlKChmdW5jdGlvbih0LGUpe3IuX3Jlc29sdmU9dCxyLl9yZWplY3Q9ZX0pKSx0aGlzLmZlYXR1cmVzPWUucG9wdXBXaW5kb3dGZWF0dXJlc3x8XCJsb2NhdGlvbj1ubyx0b29sYmFyPW5vLHpvb209bm9cIix0aGlzLnRhcmdldD1lLnBvcHVwV2luZG93VGFyZ2V0fHxcIl9ibGFua1wiLHRoaXMucmVkaXJlY3RfdXJpPWUuc3RhcnRVcmwsaS5Mb2cuZGVidWcoXCJDb3Jkb3ZhUG9wdXBXaW5kb3cuY3RvcjogcmVkaXJlY3RfdXJpOiBcIit0aGlzLnJlZGlyZWN0X3VyaSl9cmV0dXJuIHQucHJvdG90eXBlLl9pc0luQXBwQnJvd3Nlckluc3RhbGxlZD1mdW5jdGlvbiB0KGUpe3JldHVybltcImNvcmRvdmEtcGx1Z2luLWluYXBwYnJvd3NlclwiLFwiY29yZG92YS1wbHVnaW4taW5hcHBicm93c2VyLmluYXBwYnJvd3NlclwiLFwib3JnLmFwYWNoZS5jb3Jkb3ZhLmluYXBwYnJvd3NlclwiXS5zb21lKChmdW5jdGlvbih0KXtyZXR1cm4gZS5oYXNPd25Qcm9wZXJ0eSh0KX0pKX0sdC5wcm90b3R5cGUubmF2aWdhdGU9ZnVuY3Rpb24gdChlKXtpZihlJiZlLnVybCl7aWYoIXdpbmRvdy5jb3Jkb3ZhKXJldHVybiB0aGlzLl9lcnJvcihcImNvcmRvdmEgaXMgdW5kZWZpbmVkXCIpO3ZhciByPXdpbmRvdy5jb3Jkb3ZhLnJlcXVpcmUoXCJjb3Jkb3ZhL3BsdWdpbl9saXN0XCIpLm1ldGFkYXRhO2lmKCExPT09dGhpcy5faXNJbkFwcEJyb3dzZXJJbnN0YWxsZWQocikpcmV0dXJuIHRoaXMuX2Vycm9yKFwiSW5BcHBCcm93c2VyIHBsdWdpbiBub3QgZm91bmRcIik7dGhpcy5fcG9wdXA9Y29yZG92YS5JbkFwcEJyb3dzZXIub3BlbihlLnVybCx0aGlzLnRhcmdldCx0aGlzLmZlYXR1cmVzKSx0aGlzLl9wb3B1cD8oaS5Mb2cuZGVidWcoXCJDb3Jkb3ZhUG9wdXBXaW5kb3cubmF2aWdhdGU6IHBvcHVwIHN1Y2Nlc3NmdWxseSBjcmVhdGVkXCIpLHRoaXMuX2V4aXRDYWxsYmFja0V2ZW50PXRoaXMuX2V4aXRDYWxsYmFjay5iaW5kKHRoaXMpLHRoaXMuX2xvYWRTdGFydENhbGxiYWNrRXZlbnQ9dGhpcy5fbG9hZFN0YXJ0Q2FsbGJhY2suYmluZCh0aGlzKSx0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiZXhpdFwiLHRoaXMuX2V4aXRDYWxsYmFja0V2ZW50LCExKSx0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwibG9hZHN0YXJ0XCIsdGhpcy5fbG9hZFN0YXJ0Q2FsbGJhY2tFdmVudCwhMSkpOnRoaXMuX2Vycm9yKFwiRXJyb3Igb3BlbmluZyBwb3B1cCB3aW5kb3dcIil9ZWxzZSB0aGlzLl9lcnJvcihcIk5vIHVybCBwcm92aWRlZFwiKTtyZXR1cm4gdGhpcy5wcm9taXNlfSx0LnByb3RvdHlwZS5fbG9hZFN0YXJ0Q2FsbGJhY2s9ZnVuY3Rpb24gdChlKXswPT09ZS51cmwuaW5kZXhPZih0aGlzLnJlZGlyZWN0X3VyaSkmJnRoaXMuX3N1Y2Nlc3Moe3VybDplLnVybH0pfSx0LnByb3RvdHlwZS5fZXhpdENhbGxiYWNrPWZ1bmN0aW9uIHQoZSl7dGhpcy5fZXJyb3IoZSl9LHQucHJvdG90eXBlLl9zdWNjZXNzPWZ1bmN0aW9uIHQoZSl7dGhpcy5fY2xlYW51cCgpLGkuTG9nLmRlYnVnKFwiQ29yZG92YVBvcHVwV2luZG93OiBTdWNjZXNzZnVsIHJlc3BvbnNlIGZyb20gY29yZG92YSBwb3B1cCB3aW5kb3dcIiksdGhpcy5fcmVzb2x2ZShlKX0sdC5wcm90b3R5cGUuX2Vycm9yPWZ1bmN0aW9uIHQoZSl7dGhpcy5fY2xlYW51cCgpLGkuTG9nLmVycm9yKGUpLHRoaXMuX3JlamVjdChuZXcgRXJyb3IoZSkpfSx0LnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbiB0KCl7dGhpcy5fY2xlYW51cCgpfSx0LnByb3RvdHlwZS5fY2xlYW51cD1mdW5jdGlvbiB0KCl7dGhpcy5fcG9wdXAmJihpLkxvZy5kZWJ1ZyhcIkNvcmRvdmFQb3B1cFdpbmRvdzogY2xlYW5pbmcgdXAgcG9wdXBcIiksdGhpcy5fcG9wdXAucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImV4aXRcIix0aGlzLl9leGl0Q2FsbGJhY2tFdmVudCwhMSksdGhpcy5fcG9wdXAucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRzdGFydFwiLHRoaXMuX2xvYWRTdGFydENhbGxiYWNrRXZlbnQsITEpLHRoaXMuX3BvcHVwLmNsb3NlKCkpLHRoaXMuX3BvcHVwPW51bGx9LG4odCxbe2tleTpcInByb21pc2VcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9wcm9taXNlfX1dKSx0fSgpfSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigwKSxpPXIoMTApLG89cig1KSxzPXIoNiksYT1yKDM3KSx1PXIoMzgpLGM9cigxNiksaD1yKDIpLGw9cig0OCksZj1yKDQ5KSxnPXIoMTkpLGQ9cigyMCkscD1yKDE4KSx2PXIoMSkseT1yKDE1KSxtPXIoNTApO2UuZGVmYXVsdD17VmVyc2lvbjptLlZlcnNpb24sTG9nOm4uTG9nLE9pZGNDbGllbnQ6aS5PaWRjQ2xpZW50LE9pZGNDbGllbnRTZXR0aW5nczpvLk9pZGNDbGllbnRTZXR0aW5ncyxXZWJTdG9yYWdlU3RhdGVTdG9yZTpzLldlYlN0b3JhZ2VTdGF0ZVN0b3JlLEluTWVtb3J5V2ViU3RvcmFnZTphLkluTWVtb3J5V2ViU3RvcmFnZSxVc2VyTWFuYWdlcjp1LlVzZXJNYW5hZ2VyLEFjY2Vzc1Rva2VuRXZlbnRzOmMuQWNjZXNzVG9rZW5FdmVudHMsTWV0YWRhdGFTZXJ2aWNlOmguTWV0YWRhdGFTZXJ2aWNlLENvcmRvdmFQb3B1cE5hdmlnYXRvcjpsLkNvcmRvdmFQb3B1cE5hdmlnYXRvcixDb3Jkb3ZhSUZyYW1lTmF2aWdhdG9yOmYuQ29yZG92YUlGcmFtZU5hdmlnYXRvcixDaGVja1Nlc3Npb25JRnJhbWU6Zy5DaGVja1Nlc3Npb25JRnJhbWUsVG9rZW5SZXZvY2F0aW9uQ2xpZW50OmQuVG9rZW5SZXZvY2F0aW9uQ2xpZW50LFNlc3Npb25Nb25pdG9yOnAuU2Vzc2lvbk1vbml0b3IsR2xvYmFsOnYuR2xvYmFsLFVzZXI6eS5Vc2VyfSx0LmV4cG9ydHM9ZS5kZWZhdWx0fSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7ZS5DbG9ja1NlcnZpY2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7IWZ1bmN0aW9uIGUodCxyKXtpZighKHQgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLHQpfXJldHVybiB0LnByb3RvdHlwZS5nZXRFcG9jaFRpbWU9ZnVuY3Rpb24gdCgpe3JldHVybiBQcm9taXNlLnJlc29sdmUoRGF0ZS5ub3coKS8xZTN8MCl9LHR9KCl9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLlJlc3BvbnNlVmFsaWRhdG9yPXZvaWQgMDt2YXIgbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiB0fSxpPXIoMCksbz1yKDIpLHM9cigyNSksYT1yKDExKSx1PXIoMTIpLGM9cig0KTtmdW5jdGlvbiBoKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX12YXIgbD1bXCJub25jZVwiLFwiYXRfaGFzaFwiLFwiaWF0XCIsXCJuYmZcIixcImV4cFwiLFwiYXVkXCIsXCJpc3NcIixcImNfaGFzaFwiXTtlLlJlc3BvbnNlVmFsaWRhdG9yPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06by5NZXRhZGF0YVNlcnZpY2Usbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06cy5Vc2VySW5mb1NlcnZpY2UsdT1hcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXT9hcmd1bWVudHNbM106Yy5Kb3NlVXRpbCxsPWFyZ3VtZW50cy5sZW5ndGg+NCYmdm9pZCAwIT09YXJndW1lbnRzWzRdP2FyZ3VtZW50c1s0XTphLlRva2VuQ2xpZW50O2lmKGgodGhpcyx0KSwhZSl0aHJvdyBpLkxvZy5lcnJvcihcIlJlc3BvbnNlVmFsaWRhdG9yLmN0b3I6IE5vIHNldHRpbmdzIHBhc3NlZCB0byBSZXNwb25zZVZhbGlkYXRvclwiKSxuZXcgRXJyb3IoXCJzZXR0aW5nc1wiKTt0aGlzLl9zZXR0aW5ncz1lLHRoaXMuX21ldGFkYXRhU2VydmljZT1uZXcgcih0aGlzLl9zZXR0aW5ncyksdGhpcy5fdXNlckluZm9TZXJ2aWNlPW5ldyBuKHRoaXMuX3NldHRpbmdzKSx0aGlzLl9qb3NlVXRpbD11LHRoaXMuX3Rva2VuQ2xpZW50PW5ldyBsKHRoaXMuX3NldHRpbmdzKX1yZXR1cm4gdC5wcm90b3R5cGUudmFsaWRhdGVTaWduaW5SZXNwb25zZT1mdW5jdGlvbiB0KGUscil7dmFyIG49dGhpcztyZXR1cm4gaS5Mb2cuZGVidWcoXCJSZXNwb25zZVZhbGlkYXRvci52YWxpZGF0ZVNpZ25pblJlc3BvbnNlXCIpLHRoaXMuX3Byb2Nlc3NTaWduaW5QYXJhbXMoZSxyKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gaS5Mb2cuZGVidWcoXCJSZXNwb25zZVZhbGlkYXRvci52YWxpZGF0ZVNpZ25pblJlc3BvbnNlOiBzdGF0ZSBwcm9jZXNzZWRcIiksbi5fdmFsaWRhdGVUb2tlbnMoZSx0KS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gaS5Mb2cuZGVidWcoXCJSZXNwb25zZVZhbGlkYXRvci52YWxpZGF0ZVNpZ25pblJlc3BvbnNlOiB0b2tlbnMgdmFsaWRhdGVkXCIpLG4uX3Byb2Nlc3NDbGFpbXMoZSx0KS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gaS5Mb2cuZGVidWcoXCJSZXNwb25zZVZhbGlkYXRvci52YWxpZGF0ZVNpZ25pblJlc3BvbnNlOiBjbGFpbXMgcHJvY2Vzc2VkXCIpLHR9KSl9KSl9KSl9LHQucHJvdG90eXBlLnZhbGlkYXRlU2lnbm91dFJlc3BvbnNlPWZ1bmN0aW9uIHQoZSxyKXtyZXR1cm4gZS5pZCE9PXIuc3RhdGU/KGkuTG9nLmVycm9yKFwiUmVzcG9uc2VWYWxpZGF0b3IudmFsaWRhdGVTaWdub3V0UmVzcG9uc2U6IFN0YXRlIGRvZXMgbm90IG1hdGNoXCIpLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIlN0YXRlIGRvZXMgbm90IG1hdGNoXCIpKSk6KGkuTG9nLmRlYnVnKFwiUmVzcG9uc2VWYWxpZGF0b3IudmFsaWRhdGVTaWdub3V0UmVzcG9uc2U6IHN0YXRlIHZhbGlkYXRlZFwiKSxyLnN0YXRlPWUuZGF0YSxyLmVycm9yPyhpLkxvZy53YXJuKFwiUmVzcG9uc2VWYWxpZGF0b3IudmFsaWRhdGVTaWdub3V0UmVzcG9uc2U6IFJlc3BvbnNlIHdhcyBlcnJvclwiLHIuZXJyb3IpLFByb21pc2UucmVqZWN0KG5ldyB1LkVycm9yUmVzcG9uc2UocikpKTpQcm9taXNlLnJlc29sdmUocikpfSx0LnByb3RvdHlwZS5fcHJvY2Vzc1NpZ25pblBhcmFtcz1mdW5jdGlvbiB0KGUscil7aWYoZS5pZCE9PXIuc3RhdGUpcmV0dXJuIGkuTG9nLmVycm9yKFwiUmVzcG9uc2VWYWxpZGF0b3IuX3Byb2Nlc3NTaWduaW5QYXJhbXM6IFN0YXRlIGRvZXMgbm90IG1hdGNoXCIpLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIlN0YXRlIGRvZXMgbm90IG1hdGNoXCIpKTtpZighZS5jbGllbnRfaWQpcmV0dXJuIGkuTG9nLmVycm9yKFwiUmVzcG9uc2VWYWxpZGF0b3IuX3Byb2Nlc3NTaWduaW5QYXJhbXM6IE5vIGNsaWVudF9pZCBvbiBzdGF0ZVwiKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJObyBjbGllbnRfaWQgb24gc3RhdGVcIikpO2lmKCFlLmF1dGhvcml0eSlyZXR1cm4gaS5Mb2cuZXJyb3IoXCJSZXNwb25zZVZhbGlkYXRvci5fcHJvY2Vzc1NpZ25pblBhcmFtczogTm8gYXV0aG9yaXR5IG9uIHN0YXRlXCIpLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIk5vIGF1dGhvcml0eSBvbiBzdGF0ZVwiKSk7aWYodGhpcy5fc2V0dGluZ3MuYXV0aG9yaXR5KXtpZih0aGlzLl9zZXR0aW5ncy5hdXRob3JpdHkmJnRoaXMuX3NldHRpbmdzLmF1dGhvcml0eSE9PWUuYXV0aG9yaXR5KXJldHVybiBpLkxvZy5lcnJvcihcIlJlc3BvbnNlVmFsaWRhdG9yLl9wcm9jZXNzU2lnbmluUGFyYW1zOiBhdXRob3JpdHkgbWlzbWF0Y2ggb24gc2V0dGluZ3MgdnMuIHNpZ25pbiBzdGF0ZVwiKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJhdXRob3JpdHkgbWlzbWF0Y2ggb24gc2V0dGluZ3MgdnMuIHNpZ25pbiBzdGF0ZVwiKSl9ZWxzZSB0aGlzLl9zZXR0aW5ncy5hdXRob3JpdHk9ZS5hdXRob3JpdHk7aWYodGhpcy5fc2V0dGluZ3MuY2xpZW50X2lkKXtpZih0aGlzLl9zZXR0aW5ncy5jbGllbnRfaWQmJnRoaXMuX3NldHRpbmdzLmNsaWVudF9pZCE9PWUuY2xpZW50X2lkKXJldHVybiBpLkxvZy5lcnJvcihcIlJlc3BvbnNlVmFsaWRhdG9yLl9wcm9jZXNzU2lnbmluUGFyYW1zOiBjbGllbnRfaWQgbWlzbWF0Y2ggb24gc2V0dGluZ3MgdnMuIHNpZ25pbiBzdGF0ZVwiKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJjbGllbnRfaWQgbWlzbWF0Y2ggb24gc2V0dGluZ3MgdnMuIHNpZ25pbiBzdGF0ZVwiKSl9ZWxzZSB0aGlzLl9zZXR0aW5ncy5jbGllbnRfaWQ9ZS5jbGllbnRfaWQ7cmV0dXJuIGkuTG9nLmRlYnVnKFwiUmVzcG9uc2VWYWxpZGF0b3IuX3Byb2Nlc3NTaWduaW5QYXJhbXM6IHN0YXRlIHZhbGlkYXRlZFwiKSxyLnN0YXRlPWUuZGF0YSxyLmVycm9yPyhpLkxvZy53YXJuKFwiUmVzcG9uc2VWYWxpZGF0b3IuX3Byb2Nlc3NTaWduaW5QYXJhbXM6IFJlc3BvbnNlIHdhcyBlcnJvclwiLHIuZXJyb3IpLFByb21pc2UucmVqZWN0KG5ldyB1LkVycm9yUmVzcG9uc2UocikpKTplLm5vbmNlJiYhci5pZF90b2tlbj8oaS5Mb2cuZXJyb3IoXCJSZXNwb25zZVZhbGlkYXRvci5fcHJvY2Vzc1NpZ25pblBhcmFtczogRXhwZWN0aW5nIGlkX3Rva2VuIGluIHJlc3BvbnNlXCIpLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIk5vIGlkX3Rva2VuIGluIHJlc3BvbnNlXCIpKSk6IWUubm9uY2UmJnIuaWRfdG9rZW4/KGkuTG9nLmVycm9yKFwiUmVzcG9uc2VWYWxpZGF0b3IuX3Byb2Nlc3NTaWduaW5QYXJhbXM6IE5vdCBleHBlY3RpbmcgaWRfdG9rZW4gaW4gcmVzcG9uc2VcIiksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiVW5leHBlY3RlZCBpZF90b2tlbiBpbiByZXNwb25zZVwiKSkpOmUuY29kZV92ZXJpZmllciYmIXIuY29kZT8oaS5Mb2cuZXJyb3IoXCJSZXNwb25zZVZhbGlkYXRvci5fcHJvY2Vzc1NpZ25pblBhcmFtczogRXhwZWN0aW5nIGNvZGUgaW4gcmVzcG9uc2VcIiksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiTm8gY29kZSBpbiByZXNwb25zZVwiKSkpOiFlLmNvZGVfdmVyaWZpZXImJnIuY29kZT8oaS5Mb2cuZXJyb3IoXCJSZXNwb25zZVZhbGlkYXRvci5fcHJvY2Vzc1NpZ25pblBhcmFtczogTm90IGV4cGVjdGluZyBjb2RlIGluIHJlc3BvbnNlXCIpLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgY29kZSBpbiByZXNwb25zZVwiKSkpOihyLnNjb3BlfHwoci5zY29wZT1lLnNjb3BlKSxQcm9taXNlLnJlc29sdmUocikpfSx0LnByb3RvdHlwZS5fcHJvY2Vzc0NsYWltcz1mdW5jdGlvbiB0KGUscil7dmFyIG49dGhpcztpZihyLmlzT3BlbklkQ29ubmVjdCl7aWYoaS5Mb2cuZGVidWcoXCJSZXNwb25zZVZhbGlkYXRvci5fcHJvY2Vzc0NsYWltczogcmVzcG9uc2UgaXMgT0lEQywgcHJvY2Vzc2luZyBjbGFpbXNcIiksci5wcm9maWxlPXRoaXMuX2ZpbHRlclByb3RvY29sQ2xhaW1zKHIucHJvZmlsZSksITAhPT1lLnNraXBVc2VySW5mbyYmdGhpcy5fc2V0dGluZ3MubG9hZFVzZXJJbmZvJiZyLmFjY2Vzc190b2tlbilyZXR1cm4gaS5Mb2cuZGVidWcoXCJSZXNwb25zZVZhbGlkYXRvci5fcHJvY2Vzc0NsYWltczogbG9hZGluZyB1c2VyIGluZm9cIiksdGhpcy5fdXNlckluZm9TZXJ2aWNlLmdldENsYWltcyhyLmFjY2Vzc190b2tlbikudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIGkuTG9nLmRlYnVnKFwiUmVzcG9uc2VWYWxpZGF0b3IuX3Byb2Nlc3NDbGFpbXM6IHVzZXIgaW5mbyBjbGFpbXMgcmVjZWl2ZWQgZnJvbSB1c2VyIGluZm8gZW5kcG9pbnRcIiksdC5zdWIhPT1yLnByb2ZpbGUuc3ViPyhpLkxvZy5lcnJvcihcIlJlc3BvbnNlVmFsaWRhdG9yLl9wcm9jZXNzQ2xhaW1zOiBzdWIgZnJvbSB1c2VyIGluZm8gZW5kcG9pbnQgZG9lcyBub3QgbWF0Y2ggc3ViIGluIGlkX3Rva2VuXCIpLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcInN1YiBmcm9tIHVzZXIgaW5mbyBlbmRwb2ludCBkb2VzIG5vdCBtYXRjaCBzdWIgaW4gaWRfdG9rZW5cIikpKTooci5wcm9maWxlPW4uX21lcmdlQ2xhaW1zKHIucHJvZmlsZSx0KSxpLkxvZy5kZWJ1ZyhcIlJlc3BvbnNlVmFsaWRhdG9yLl9wcm9jZXNzQ2xhaW1zOiB1c2VyIGluZm8gY2xhaW1zIHJlY2VpdmVkLCB1cGRhdGVkIHByb2ZpbGU6XCIsci5wcm9maWxlKSxyKX0pKTtpLkxvZy5kZWJ1ZyhcIlJlc3BvbnNlVmFsaWRhdG9yLl9wcm9jZXNzQ2xhaW1zOiBub3QgbG9hZGluZyB1c2VyIGluZm9cIil9ZWxzZSBpLkxvZy5kZWJ1ZyhcIlJlc3BvbnNlVmFsaWRhdG9yLl9wcm9jZXNzQ2xhaW1zOiByZXNwb25zZSBpcyBub3QgT0lEQywgbm90IHByb2Nlc3NpbmcgY2xhaW1zXCIpO3JldHVybiBQcm9taXNlLnJlc29sdmUocil9LHQucHJvdG90eXBlLl9tZXJnZUNsYWltcz1mdW5jdGlvbiB0KGUscil7dmFyIGk9T2JqZWN0LmFzc2lnbih7fSxlKTtmb3IodmFyIG8gaW4gcil7dmFyIHM9cltvXTtBcnJheS5pc0FycmF5KHMpfHwocz1bc10pO2Zvcih2YXIgYT0wO2E8cy5sZW5ndGg7YSsrKXt2YXIgdT1zW2FdO2lbb10/QXJyYXkuaXNBcnJheShpW29dKT9pW29dLmluZGV4T2YodSk8MCYmaVtvXS5wdXNoKHUpOmlbb10hPT11JiYoXCJvYmplY3RcIj09PSh2b2lkIDA9PT11P1widW5kZWZpbmVkXCI6bih1KSkmJnRoaXMuX3NldHRpbmdzLm1lcmdlQ2xhaW1zP2lbb109dGhpcy5fbWVyZ2VDbGFpbXMoaVtvXSx1KTppW29dPVtpW29dLHVdKTppW29dPXV9fXJldHVybiBpfSx0LnByb3RvdHlwZS5fZmlsdGVyUHJvdG9jb2xDbGFpbXM9ZnVuY3Rpb24gdChlKXtpLkxvZy5kZWJ1ZyhcIlJlc3BvbnNlVmFsaWRhdG9yLl9maWx0ZXJQcm90b2NvbENsYWltcywgaW5jb21pbmcgY2xhaW1zOlwiLGUpO3ZhciByPU9iamVjdC5hc3NpZ24oe30sZSk7cmV0dXJuIHRoaXMuX3NldHRpbmdzLl9maWx0ZXJQcm90b2NvbENsYWltcz8obC5mb3JFYWNoKChmdW5jdGlvbih0KXtkZWxldGUgclt0XX0pKSxpLkxvZy5kZWJ1ZyhcIlJlc3BvbnNlVmFsaWRhdG9yLl9maWx0ZXJQcm90b2NvbENsYWltczogcHJvdG9jb2wgY2xhaW1zIGZpbHRlcmVkXCIscikpOmkuTG9nLmRlYnVnKFwiUmVzcG9uc2VWYWxpZGF0b3IuX2ZpbHRlclByb3RvY29sQ2xhaW1zOiBwcm90b2NvbCBjbGFpbXMgbm90IGZpbHRlcmVkXCIpLHJ9LHQucHJvdG90eXBlLl92YWxpZGF0ZVRva2Vucz1mdW5jdGlvbiB0KGUscil7cmV0dXJuIHIuY29kZT8oaS5Mb2cuZGVidWcoXCJSZXNwb25zZVZhbGlkYXRvci5fdmFsaWRhdGVUb2tlbnM6IFZhbGlkYXRpbmcgY29kZVwiKSx0aGlzLl9wcm9jZXNzQ29kZShlLHIpKTpyLmlkX3Rva2VuP3IuYWNjZXNzX3Rva2VuPyhpLkxvZy5kZWJ1ZyhcIlJlc3BvbnNlVmFsaWRhdG9yLl92YWxpZGF0ZVRva2VuczogVmFsaWRhdGluZyBpZF90b2tlbiBhbmQgYWNjZXNzX3Rva2VuXCIpLHRoaXMuX3ZhbGlkYXRlSWRUb2tlbkFuZEFjY2Vzc1Rva2VuKGUscikpOihpLkxvZy5kZWJ1ZyhcIlJlc3BvbnNlVmFsaWRhdG9yLl92YWxpZGF0ZVRva2VuczogVmFsaWRhdGluZyBpZF90b2tlblwiKSx0aGlzLl92YWxpZGF0ZUlkVG9rZW4oZSxyKSk6KGkuTG9nLmRlYnVnKFwiUmVzcG9uc2VWYWxpZGF0b3IuX3ZhbGlkYXRlVG9rZW5zOiBObyBjb2RlIHRvIHByb2Nlc3Mgb3IgaWRfdG9rZW4gdG8gdmFsaWRhdGVcIiksUHJvbWlzZS5yZXNvbHZlKHIpKX0sdC5wcm90b3R5cGUuX3Byb2Nlc3NDb2RlPWZ1bmN0aW9uIHQoZSxyKXt2YXIgbz10aGlzLHM9e2NsaWVudF9pZDplLmNsaWVudF9pZCxjbGllbnRfc2VjcmV0OmUuY2xpZW50X3NlY3JldCxjb2RlOnIuY29kZSxyZWRpcmVjdF91cmk6ZS5yZWRpcmVjdF91cmksY29kZV92ZXJpZmllcjplLmNvZGVfdmVyaWZpZXJ9O3JldHVybiBlLmV4dHJhVG9rZW5QYXJhbXMmJlwib2JqZWN0XCI9PT1uKGUuZXh0cmFUb2tlblBhcmFtcykmJk9iamVjdC5hc3NpZ24ocyxlLmV4dHJhVG9rZW5QYXJhbXMpLHRoaXMuX3Rva2VuQ2xpZW50LmV4Y2hhbmdlQ29kZShzKS50aGVuKChmdW5jdGlvbih0KXtmb3IodmFyIG4gaW4gdClyW25dPXRbbl07cmV0dXJuIHIuaWRfdG9rZW4/KGkuTG9nLmRlYnVnKFwiUmVzcG9uc2VWYWxpZGF0b3IuX3Byb2Nlc3NDb2RlOiB0b2tlbiByZXNwb25zZSBzdWNjZXNzZnVsLCBwcm9jZXNzaW5nIGlkX3Rva2VuXCIpLG8uX3ZhbGlkYXRlSWRUb2tlbkF0dHJpYnV0ZXMoZSxyKSk6KGkuTG9nLmRlYnVnKFwiUmVzcG9uc2VWYWxpZGF0b3IuX3Byb2Nlc3NDb2RlOiB0b2tlbiByZXNwb25zZSBzdWNjZXNzZnVsLCByZXR1cm5pbmcgcmVzcG9uc2VcIikscil9KSl9LHQucHJvdG90eXBlLl92YWxpZGF0ZUlkVG9rZW5BdHRyaWJ1dGVzPWZ1bmN0aW9uIHQoZSxyKXt2YXIgbj10aGlzO3JldHVybiB0aGlzLl9tZXRhZGF0YVNlcnZpY2UuZ2V0SXNzdWVyKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG89ZS5jbGllbnRfaWQscz1uLl9zZXR0aW5ncy5jbG9ja1NrZXc7cmV0dXJuIGkuTG9nLmRlYnVnKFwiUmVzcG9uc2VWYWxpZGF0b3IuX3ZhbGlkYXRlSWRUb2tlbkF0dHJpYnV0ZXM6IFZhbGlkYWluZyBKV1QgYXR0cmlidXRlczsgdXNpbmcgY2xvY2sgc2tldyAoaW4gc2Vjb25kcykgb2Y6IFwiLHMpLG4uX3NldHRpbmdzLmdldEVwb2NoVGltZSgpLnRoZW4oKGZ1bmN0aW9uKGEpe3JldHVybiBuLl9qb3NlVXRpbC52YWxpZGF0ZUp3dEF0dHJpYnV0ZXMoci5pZF90b2tlbix0LG8scyxhKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gZS5ub25jZSYmZS5ub25jZSE9PXQubm9uY2U/KGkuTG9nLmVycm9yKFwiUmVzcG9uc2VWYWxpZGF0b3IuX3ZhbGlkYXRlSWRUb2tlbkF0dHJpYnV0ZXM6IEludmFsaWQgbm9uY2UgaW4gaWRfdG9rZW5cIiksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiSW52YWxpZCBub25jZSBpbiBpZF90b2tlblwiKSkpOnQuc3ViPyhyLnByb2ZpbGU9dCxyKTooaS5Mb2cuZXJyb3IoXCJSZXNwb25zZVZhbGlkYXRvci5fdmFsaWRhdGVJZFRva2VuQXR0cmlidXRlczogTm8gc3ViIHByZXNlbnQgaW4gaWRfdG9rZW5cIiksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiTm8gc3ViIHByZXNlbnQgaW4gaWRfdG9rZW5cIikpKX0pKX0pKX0pKX0sdC5wcm90b3R5cGUuX3ZhbGlkYXRlSWRUb2tlbkFuZEFjY2Vzc1Rva2VuPWZ1bmN0aW9uIHQoZSxyKXt2YXIgbj10aGlzO3JldHVybiB0aGlzLl92YWxpZGF0ZUlkVG9rZW4oZSxyKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gbi5fdmFsaWRhdGVBY2Nlc3NUb2tlbih0KX0pKX0sdC5wcm90b3R5cGUuX2dldFNpZ25pbmdLZXlGb3JKd3Q9ZnVuY3Rpb24gdChlKXt2YXIgcj10aGlzO3JldHVybiB0aGlzLl9tZXRhZGF0YVNlcnZpY2UuZ2V0U2lnbmluZ0tleXMoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1lLmhlYWRlci5raWQ7aWYoIXQpcmV0dXJuIGkuTG9nLmVycm9yKFwiUmVzcG9uc2VWYWxpZGF0b3IuX3ZhbGlkYXRlSWRUb2tlbjogTm8gc2lnbmluZyBrZXlzIGZyb20gbWV0YWRhdGFcIiksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiTm8gc2lnbmluZyBrZXlzIGZyb20gbWV0YWRhdGFcIikpO2kuTG9nLmRlYnVnKFwiUmVzcG9uc2VWYWxpZGF0b3IuX3ZhbGlkYXRlSWRUb2tlbjogUmVjZWl2ZWQgc2lnbmluZyBrZXlzXCIpO3ZhciBvPXZvaWQgMDtpZihuKW89dC5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmtpZD09PW59KSlbMF07ZWxzZXtpZigodD1yLl9maWx0ZXJCeUFsZyh0LGUuaGVhZGVyLmFsZykpLmxlbmd0aD4xKXJldHVybiBpLkxvZy5lcnJvcihcIlJlc3BvbnNlVmFsaWRhdG9yLl92YWxpZGF0ZUlkVG9rZW46IE5vIGtpZCBmb3VuZCBpbiBpZF90b2tlbiBhbmQgbW9yZSB0aGFuIG9uZSBrZXkgZm91bmQgaW4gbWV0YWRhdGFcIiksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiTm8ga2lkIGZvdW5kIGluIGlkX3Rva2VuIGFuZCBtb3JlIHRoYW4gb25lIGtleSBmb3VuZCBpbiBtZXRhZGF0YVwiKSk7bz10WzBdfXJldHVybiBQcm9taXNlLnJlc29sdmUobyl9KSl9LHQucHJvdG90eXBlLl9nZXRTaWduaW5nS2V5Rm9ySnd0V2l0aFNpbmdsZVJldHJ5PWZ1bmN0aW9uIHQoZSl7dmFyIHI9dGhpcztyZXR1cm4gdGhpcy5fZ2V0U2lnbmluZ0tleUZvckp3dChlKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gdD9Qcm9taXNlLnJlc29sdmUodCk6KHIuX21ldGFkYXRhU2VydmljZS5yZXNldFNpZ25pbmdLZXlzKCksci5fZ2V0U2lnbmluZ0tleUZvckp3dChlKSl9KSl9LHQucHJvdG90eXBlLl92YWxpZGF0ZUlkVG9rZW49ZnVuY3Rpb24gdChlLHIpe3ZhciBuPXRoaXM7aWYoIWUubm9uY2UpcmV0dXJuIGkuTG9nLmVycm9yKFwiUmVzcG9uc2VWYWxpZGF0b3IuX3ZhbGlkYXRlSWRUb2tlbjogTm8gbm9uY2Ugb24gc3RhdGVcIiksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiTm8gbm9uY2Ugb24gc3RhdGVcIikpO3ZhciBvPXRoaXMuX2pvc2VVdGlsLnBhcnNlSnd0KHIuaWRfdG9rZW4pO3JldHVybiBvJiZvLmhlYWRlciYmby5wYXlsb2FkP2Uubm9uY2UhPT1vLnBheWxvYWQubm9uY2U/KGkuTG9nLmVycm9yKFwiUmVzcG9uc2VWYWxpZGF0b3IuX3ZhbGlkYXRlSWRUb2tlbjogSW52YWxpZCBub25jZSBpbiBpZF90b2tlblwiKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJJbnZhbGlkIG5vbmNlIGluIGlkX3Rva2VuXCIpKSk6dGhpcy5fbWV0YWRhdGFTZXJ2aWNlLmdldElzc3VlcigpLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiBpLkxvZy5kZWJ1ZyhcIlJlc3BvbnNlVmFsaWRhdG9yLl92YWxpZGF0ZUlkVG9rZW46IFJlY2VpdmVkIGlzc3VlclwiKSxuLl9nZXRTaWduaW5nS2V5Rm9ySnd0V2l0aFNpbmdsZVJldHJ5KG8pLnRoZW4oKGZ1bmN0aW9uKHMpe2lmKCFzKXJldHVybiBpLkxvZy5lcnJvcihcIlJlc3BvbnNlVmFsaWRhdG9yLl92YWxpZGF0ZUlkVG9rZW46IE5vIGtleSBtYXRjaGluZyBraWQgb3IgYWxnIGZvdW5kIGluIHNpZ25pbmcga2V5c1wiKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJObyBrZXkgbWF0Y2hpbmcga2lkIG9yIGFsZyBmb3VuZCBpbiBzaWduaW5nIGtleXNcIikpO3ZhciBhPWUuY2xpZW50X2lkLHU9bi5fc2V0dGluZ3MuY2xvY2tTa2V3O3JldHVybiBpLkxvZy5kZWJ1ZyhcIlJlc3BvbnNlVmFsaWRhdG9yLl92YWxpZGF0ZUlkVG9rZW46IFZhbGlkYWluZyBKV1Q7IHVzaW5nIGNsb2NrIHNrZXcgKGluIHNlY29uZHMpIG9mOiBcIix1KSxuLl9qb3NlVXRpbC52YWxpZGF0ZUp3dChyLmlkX3Rva2VuLHMsdCxhLHUpLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIGkuTG9nLmRlYnVnKFwiUmVzcG9uc2VWYWxpZGF0b3IuX3ZhbGlkYXRlSWRUb2tlbjogSldUIHZhbGlkYXRpb24gc3VjY2Vzc2Z1bFwiKSxvLnBheWxvYWQuc3ViPyhyLnByb2ZpbGU9by5wYXlsb2FkLHIpOihpLkxvZy5lcnJvcihcIlJlc3BvbnNlVmFsaWRhdG9yLl92YWxpZGF0ZUlkVG9rZW46IE5vIHN1YiBwcmVzZW50IGluIGlkX3Rva2VuXCIpLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIk5vIHN1YiBwcmVzZW50IGluIGlkX3Rva2VuXCIpKSl9KSl9KSl9KSk6KGkuTG9nLmVycm9yKFwiUmVzcG9uc2VWYWxpZGF0b3IuX3ZhbGlkYXRlSWRUb2tlbjogRmFpbGVkIHRvIHBhcnNlIGlkX3Rva2VuXCIsbyksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIGlkX3Rva2VuXCIpKSl9LHQucHJvdG90eXBlLl9maWx0ZXJCeUFsZz1mdW5jdGlvbiB0KGUscil7dmFyIG49bnVsbDtpZihyLnN0YXJ0c1dpdGgoXCJSU1wiKSluPVwiUlNBXCI7ZWxzZSBpZihyLnN0YXJ0c1dpdGgoXCJQU1wiKSluPVwiUFNcIjtlbHNle2lmKCFyLnN0YXJ0c1dpdGgoXCJFU1wiKSlyZXR1cm4gaS5Mb2cuZGVidWcoXCJSZXNwb25zZVZhbGlkYXRvci5fZmlsdGVyQnlBbGc6IGFsZyBub3Qgc3VwcG9ydGVkOiBcIixyKSxbXTtuPVwiRUNcIn1yZXR1cm4gaS5Mb2cuZGVidWcoXCJSZXNwb25zZVZhbGlkYXRvci5fZmlsdGVyQnlBbGc6IExvb2tpbmcgZm9yIGtleXMgdGhhdCBtYXRjaCBrdHk6IFwiLG4pLGU9ZS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0Lmt0eT09PW59KSksaS5Mb2cuZGVidWcoXCJSZXNwb25zZVZhbGlkYXRvci5fZmlsdGVyQnlBbGc6IE51bWJlciBvZiBrZXlzIHRoYXQgbWF0Y2gga3R5OiBcIixuLGUubGVuZ3RoKSxlfSx0LnByb3RvdHlwZS5fdmFsaWRhdGVBY2Nlc3NUb2tlbj1mdW5jdGlvbiB0KGUpe2lmKCFlLnByb2ZpbGUpcmV0dXJuIGkuTG9nLmVycm9yKFwiUmVzcG9uc2VWYWxpZGF0b3IuX3ZhbGlkYXRlQWNjZXNzVG9rZW46IE5vIHByb2ZpbGUgbG9hZGVkIGZyb20gaWRfdG9rZW5cIiksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiTm8gcHJvZmlsZSBsb2FkZWQgZnJvbSBpZF90b2tlblwiKSk7aWYoIWUucHJvZmlsZS5hdF9oYXNoKXJldHVybiBpLkxvZy5lcnJvcihcIlJlc3BvbnNlVmFsaWRhdG9yLl92YWxpZGF0ZUFjY2Vzc1Rva2VuOiBObyBhdF9oYXNoIGluIGlkX3Rva2VuXCIpLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIk5vIGF0X2hhc2ggaW4gaWRfdG9rZW5cIikpO2lmKCFlLmlkX3Rva2VuKXJldHVybiBpLkxvZy5lcnJvcihcIlJlc3BvbnNlVmFsaWRhdG9yLl92YWxpZGF0ZUFjY2Vzc1Rva2VuOiBObyBpZF90b2tlblwiKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJObyBpZF90b2tlblwiKSk7dmFyIHI9dGhpcy5fam9zZVV0aWwucGFyc2VKd3QoZS5pZF90b2tlbik7aWYoIXJ8fCFyLmhlYWRlcilyZXR1cm4gaS5Mb2cuZXJyb3IoXCJSZXNwb25zZVZhbGlkYXRvci5fdmFsaWRhdGVBY2Nlc3NUb2tlbjogRmFpbGVkIHRvIHBhcnNlIGlkX3Rva2VuXCIsciksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIGlkX3Rva2VuXCIpKTt2YXIgbj1yLmhlYWRlci5hbGc7aWYoIW58fDUhPT1uLmxlbmd0aClyZXR1cm4gaS5Mb2cuZXJyb3IoXCJSZXNwb25zZVZhbGlkYXRvci5fdmFsaWRhdGVBY2Nlc3NUb2tlbjogVW5zdXBwb3J0ZWQgYWxnOlwiLG4pLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIGFsZzogXCIrbikpO3ZhciBvPW4uc3Vic3RyKDIsMyk7aWYoIW8pcmV0dXJuIGkuTG9nLmVycm9yKFwiUmVzcG9uc2VWYWxpZGF0b3IuX3ZhbGlkYXRlQWNjZXNzVG9rZW46IFVuc3VwcG9ydGVkIGFsZzpcIixuLG8pLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIGFsZzogXCIrbikpO2lmKDI1NiE9PShvPXBhcnNlSW50KG8pKSYmMzg0IT09byYmNTEyIT09bylyZXR1cm4gaS5Mb2cuZXJyb3IoXCJSZXNwb25zZVZhbGlkYXRvci5fdmFsaWRhdGVBY2Nlc3NUb2tlbjogVW5zdXBwb3J0ZWQgYWxnOlwiLG4sbyksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgYWxnOiBcIituKSk7dmFyIHM9XCJzaGFcIitvLGE9dGhpcy5fam9zZVV0aWwuaGFzaFN0cmluZyhlLmFjY2Vzc190b2tlbixzKTtpZighYSlyZXR1cm4gaS5Mb2cuZXJyb3IoXCJSZXNwb25zZVZhbGlkYXRvci5fdmFsaWRhdGVBY2Nlc3NUb2tlbjogYWNjZXNzX3Rva2VuIGhhc2ggZmFpbGVkOlwiLHMpLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIkZhaWxlZCB0byB2YWxpZGF0ZSBhdF9oYXNoXCIpKTt2YXIgdT1hLnN1YnN0cigwLGEubGVuZ3RoLzIpLGM9dGhpcy5fam9zZVV0aWwuaGV4VG9CYXNlNjRVcmwodSk7cmV0dXJuIGMhPT1lLnByb2ZpbGUuYXRfaGFzaD8oaS5Mb2cuZXJyb3IoXCJSZXNwb25zZVZhbGlkYXRvci5fdmFsaWRhdGVBY2Nlc3NUb2tlbjogRmFpbGVkIHRvIHZhbGlkYXRlIGF0X2hhc2hcIixjLGUucHJvZmlsZS5hdF9oYXNoKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJGYWlsZWQgdG8gdmFsaWRhdGUgYXRfaGFzaFwiKSkpOihpLkxvZy5kZWJ1ZyhcIlJlc3BvbnNlVmFsaWRhdG9yLl92YWxpZGF0ZUFjY2Vzc1Rva2VuOiBzdWNjZXNzXCIpLFByb21pc2UucmVzb2x2ZShlKSl9LHR9KCl9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLlVzZXJJbmZvU2VydmljZT12b2lkIDA7dmFyIG49cig3KSxpPXIoMiksbz1yKDApLHM9cig0KTtmdW5jdGlvbiBhKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1lLlVzZXJJbmZvU2VydmljZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOm4uSnNvblNlcnZpY2UsdT1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06aS5NZXRhZGF0YVNlcnZpY2UsYz1hcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXT9hcmd1bWVudHNbM106cy5Kb3NlVXRpbDtpZihhKHRoaXMsdCksIWUpdGhyb3cgby5Mb2cuZXJyb3IoXCJVc2VySW5mb1NlcnZpY2UuY3RvcjogTm8gc2V0dGluZ3MgcGFzc2VkXCIpLG5ldyBFcnJvcihcInNldHRpbmdzXCIpO3RoaXMuX3NldHRpbmdzPWUsdGhpcy5fanNvblNlcnZpY2U9bmV3IHIodm9pZCAwLHZvaWQgMCx0aGlzLl9nZXRDbGFpbXNGcm9tSnd0LmJpbmQodGhpcykpLHRoaXMuX21ldGFkYXRhU2VydmljZT1uZXcgdSh0aGlzLl9zZXR0aW5ncyksdGhpcy5fam9zZVV0aWw9Y31yZXR1cm4gdC5wcm90b3R5cGUuZ2V0Q2xhaW1zPWZ1bmN0aW9uIHQoZSl7dmFyIHI9dGhpcztyZXR1cm4gZT90aGlzLl9tZXRhZGF0YVNlcnZpY2UuZ2V0VXNlckluZm9FbmRwb2ludCgpLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiBvLkxvZy5kZWJ1ZyhcIlVzZXJJbmZvU2VydmljZS5nZXRDbGFpbXM6IHJlY2VpdmVkIHVzZXJpbmZvIHVybFwiLHQpLHIuX2pzb25TZXJ2aWNlLmdldEpzb24odCxlKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gby5Mb2cuZGVidWcoXCJVc2VySW5mb1NlcnZpY2UuZ2V0Q2xhaW1zOiBjbGFpbXMgcmVjZWl2ZWRcIix0KSx0fSkpfSkpOihvLkxvZy5lcnJvcihcIlVzZXJJbmZvU2VydmljZS5nZXRDbGFpbXM6IE5vIHRva2VuIHBhc3NlZFwiKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJBIHRva2VuIGlzIHJlcXVpcmVkXCIpKSl9LHQucHJvdG90eXBlLl9nZXRDbGFpbXNGcm9tSnd0PWZ1bmN0aW9uIHQoZSl7dmFyIHI9dGhpczt0cnl7dmFyIG49dGhpcy5fam9zZVV0aWwucGFyc2VKd3QoZS5yZXNwb25zZVRleHQpO2lmKCFufHwhbi5oZWFkZXJ8fCFuLnBheWxvYWQpcmV0dXJuIG8uTG9nLmVycm9yKFwiVXNlckluZm9TZXJ2aWNlLl9nZXRDbGFpbXNGcm9tSnd0OiBGYWlsZWQgdG8gcGFyc2UgSldUXCIsbiksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIGlkX3Rva2VuXCIpKTt2YXIgaT1uLmhlYWRlci5raWQscz12b2lkIDA7c3dpdGNoKHRoaXMuX3NldHRpbmdzLnVzZXJJbmZvSnd0SXNzdWVyKXtjYXNlXCJPUFwiOnM9dGhpcy5fbWV0YWRhdGFTZXJ2aWNlLmdldElzc3VlcigpO2JyZWFrO2Nhc2VcIkFOWVwiOnM9UHJvbWlzZS5yZXNvbHZlKG4ucGF5bG9hZC5pc3MpO2JyZWFrO2RlZmF1bHQ6cz1Qcm9taXNlLnJlc29sdmUodGhpcy5fc2V0dGluZ3MudXNlckluZm9Kd3RJc3N1ZXIpfXJldHVybiBzLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiBvLkxvZy5kZWJ1ZyhcIlVzZXJJbmZvU2VydmljZS5fZ2V0Q2xhaW1zRnJvbUp3dDogUmVjZWl2ZWQgaXNzdWVyOlwiK3QpLHIuX21ldGFkYXRhU2VydmljZS5nZXRTaWduaW5nS2V5cygpLnRoZW4oKGZ1bmN0aW9uKHMpe2lmKCFzKXJldHVybiBvLkxvZy5lcnJvcihcIlVzZXJJbmZvU2VydmljZS5fZ2V0Q2xhaW1zRnJvbUp3dDogTm8gc2lnbmluZyBrZXlzIGZyb20gbWV0YWRhdGFcIiksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiTm8gc2lnbmluZyBrZXlzIGZyb20gbWV0YWRhdGFcIikpO28uTG9nLmRlYnVnKFwiVXNlckluZm9TZXJ2aWNlLl9nZXRDbGFpbXNGcm9tSnd0OiBSZWNlaXZlZCBzaWduaW5nIGtleXNcIik7dmFyIGE9dm9pZCAwO2lmKGkpYT1zLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHQua2lkPT09aX0pKVswXTtlbHNle2lmKChzPXIuX2ZpbHRlckJ5QWxnKHMsbi5oZWFkZXIuYWxnKSkubGVuZ3RoPjEpcmV0dXJuIG8uTG9nLmVycm9yKFwiVXNlckluZm9TZXJ2aWNlLl9nZXRDbGFpbXNGcm9tSnd0OiBObyBraWQgZm91bmQgaW4gaWRfdG9rZW4gYW5kIG1vcmUgdGhhbiBvbmUga2V5IGZvdW5kIGluIG1ldGFkYXRhXCIpLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIk5vIGtpZCBmb3VuZCBpbiBpZF90b2tlbiBhbmQgbW9yZSB0aGFuIG9uZSBrZXkgZm91bmQgaW4gbWV0YWRhdGFcIikpO2E9c1swXX1pZighYSlyZXR1cm4gby5Mb2cuZXJyb3IoXCJVc2VySW5mb1NlcnZpY2UuX2dldENsYWltc0Zyb21Kd3Q6IE5vIGtleSBtYXRjaGluZyBraWQgb3IgYWxnIGZvdW5kIGluIHNpZ25pbmcga2V5c1wiKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJObyBrZXkgbWF0Y2hpbmcga2lkIG9yIGFsZyBmb3VuZCBpbiBzaWduaW5nIGtleXNcIikpO3ZhciB1PXIuX3NldHRpbmdzLmNsaWVudF9pZCxjPXIuX3NldHRpbmdzLmNsb2NrU2tldztyZXR1cm4gby5Mb2cuZGVidWcoXCJVc2VySW5mb1NlcnZpY2UuX2dldENsYWltc0Zyb21Kd3Q6IFZhbGlkYWluZyBKV1Q7IHVzaW5nIGNsb2NrIHNrZXcgKGluIHNlY29uZHMpIG9mOiBcIixjKSxyLl9qb3NlVXRpbC52YWxpZGF0ZUp3dChlLnJlc3BvbnNlVGV4dCxhLHQsdSxjLHZvaWQgMCwhMCkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gby5Mb2cuZGVidWcoXCJVc2VySW5mb1NlcnZpY2UuX2dldENsYWltc0Zyb21Kd3Q6IEpXVCB2YWxpZGF0aW9uIHN1Y2Nlc3NmdWxcIiksbi5wYXlsb2FkfSkpfSkpfSkpfWNhdGNoKHQpe3JldHVybiBvLkxvZy5lcnJvcihcIlVzZXJJbmZvU2VydmljZS5fZ2V0Q2xhaW1zRnJvbUp3dDogRXJyb3IgcGFyc2luZyBKV1QgcmVzcG9uc2VcIix0Lm1lc3NhZ2UpLHZvaWQgcmVqZWN0KHQpfX0sdC5wcm90b3R5cGUuX2ZpbHRlckJ5QWxnPWZ1bmN0aW9uIHQoZSxyKXt2YXIgbj1udWxsO2lmKHIuc3RhcnRzV2l0aChcIlJTXCIpKW49XCJSU0FcIjtlbHNlIGlmKHIuc3RhcnRzV2l0aChcIlBTXCIpKW49XCJQU1wiO2Vsc2V7aWYoIXIuc3RhcnRzV2l0aChcIkVTXCIpKXJldHVybiBvLkxvZy5kZWJ1ZyhcIlVzZXJJbmZvU2VydmljZS5fZmlsdGVyQnlBbGc6IGFsZyBub3Qgc3VwcG9ydGVkOiBcIixyKSxbXTtuPVwiRUNcIn1yZXR1cm4gby5Mb2cuZGVidWcoXCJVc2VySW5mb1NlcnZpY2UuX2ZpbHRlckJ5QWxnOiBMb29raW5nIGZvciBrZXlzIHRoYXQgbWF0Y2gga3R5OiBcIixuKSxlPWUuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gdC5rdHk9PT1ufSkpLG8uTG9nLmRlYnVnKFwiVXNlckluZm9TZXJ2aWNlLl9maWx0ZXJCeUFsZzogTnVtYmVyIG9mIGtleXMgdGhhdCBtYXRjaCBrdHk6IFwiLG4sZS5sZW5ndGgpLGV9LHR9KCl9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLkFsbG93ZWRTaWduaW5nQWxncz1lLmI2NHRvaGV4PWUuaGV4dG9iNjR1PWUuY3J5cHRvPWUuWDUwOT1lLktleVV0aWw9ZS5qd3M9dm9pZCAwO3ZhciBuPXIoMjcpO2UuandzPW4uandzLGUuS2V5VXRpbD1uLktFWVVUSUwsZS5YNTA5PW4uWDUwOSxlLmNyeXB0bz1uLmNyeXB0byxlLmhleHRvYjY0dT1uLmhleHRvYjY0dSxlLmI2NHRvaGV4PW4uYjY0dG9oZXgsZS5BbGxvd2VkU2lnbmluZ0FsZ3M9W1wiUlMyNTZcIixcIlJTMzg0XCIsXCJSUzUxMlwiLFwiUFMyNTZcIixcIlBTMzg0XCIsXCJQUzUxMlwiLFwiRVMyNTZcIixcIkVTMzg0XCIsXCJFUzUxMlwiXX0sZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiOyhmdW5jdGlvbih0KXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcixuLGksbyxzLGEsdSxjLGgsbCxmLGc9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgdH0sZD17dXNlckFnZW50OiExfSxwPXt9LHY9dnx8KHI9TWF0aCxpPShuPXt9KS5saWI9e30sbz1pLkJhc2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybntleHRlbmQ6ZnVuY3Rpb24gZShyKXt0LnByb3RvdHlwZT10aGlzO3ZhciBuPW5ldyB0O3JldHVybiByJiZuLm1peEluKHIpLG4uaGFzT3duUHJvcGVydHkoXCJpbml0XCIpfHwobi5pbml0PWZ1bmN0aW9uKCl7bi4kc3VwZXIuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KSxuLmluaXQucHJvdG90eXBlPW4sbi4kc3VwZXI9dGhpcyxufSxjcmVhdGU6ZnVuY3Rpb24gdCgpe3ZhciBlPXRoaXMuZXh0ZW5kKCk7cmV0dXJuIGUuaW5pdC5hcHBseShlLGFyZ3VtZW50cyksZX0saW5pdDpmdW5jdGlvbiB0KCl7fSxtaXhJbjpmdW5jdGlvbiB0KGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0aGlzW3JdPWVbcl0pO2UuaGFzT3duUHJvcGVydHkoXCJ0b1N0cmluZ1wiKSYmKHRoaXMudG9TdHJpbmc9ZS50b1N0cmluZyl9LGNsb25lOmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5pbml0LnByb3RvdHlwZS5leHRlbmQodGhpcyl9fX0oKSxzPWkuV29yZEFycmF5PW8uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uIHQoZSxyKXtlPXRoaXMud29yZHM9ZXx8W10sdGhpcy5zaWdCeXRlcz1udWxsIT1yP3I6NCplLmxlbmd0aH0sdG9TdHJpbmc6ZnVuY3Rpb24gdChlKXtyZXR1cm4oZXx8dSkuc3RyaW5naWZ5KHRoaXMpfSxjb25jYXQ6ZnVuY3Rpb24gdChlKXt2YXIgcj10aGlzLndvcmRzLG49ZS53b3JkcyxpPXRoaXMuc2lnQnl0ZXMsbz1lLnNpZ0J5dGVzO2lmKHRoaXMuY2xhbXAoKSxpJTQpZm9yKHZhciBzPTA7czxvO3MrKyl7dmFyIGE9bltzPj4+Ml0+Pj4yNC1zJTQqOCYyNTU7cltpK3M+Pj4yXXw9YTw8MjQtKGkrcyklNCo4fWVsc2UgZm9yKHM9MDtzPG87cys9NClyW2krcz4+PjJdPW5bcz4+PjJdO3JldHVybiB0aGlzLnNpZ0J5dGVzKz1vLHRoaXN9LGNsYW1wOmZ1bmN0aW9uIHQoKXt2YXIgZT10aGlzLndvcmRzLG49dGhpcy5zaWdCeXRlcztlW24+Pj4yXSY9NDI5NDk2NzI5NTw8MzItbiU0KjgsZS5sZW5ndGg9ci5jZWlsKG4vNCl9LGNsb25lOmZ1bmN0aW9uIHQoKXt2YXIgZT1vLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIGUud29yZHM9dGhpcy53b3Jkcy5zbGljZSgwKSxlfSxyYW5kb206ZnVuY3Rpb24gdChlKXtmb3IodmFyIG49W10saT0wO2k8ZTtpKz00KW4ucHVzaCg0Mjk0OTY3Mjk2KnIucmFuZG9tKCl8MCk7cmV0dXJuIG5ldyBzLmluaXQobixlKX19KSxhPW4uZW5jPXt9LHU9YS5IZXg9e3N0cmluZ2lmeTpmdW5jdGlvbiB0KGUpe2Zvcih2YXIgcj1lLndvcmRzLG49ZS5zaWdCeXRlcyxpPVtdLG89MDtvPG47bysrKXt2YXIgcz1yW28+Pj4yXT4+PjI0LW8lNCo4JjI1NTtpLnB1c2goKHM+Pj40KS50b1N0cmluZygxNikpLGkucHVzaCgoMTUmcykudG9TdHJpbmcoMTYpKX1yZXR1cm4gaS5qb2luKFwiXCIpfSxwYXJzZTpmdW5jdGlvbiB0KGUpe2Zvcih2YXIgcj1lLmxlbmd0aCxuPVtdLGk9MDtpPHI7aSs9MiluW2k+Pj4zXXw9cGFyc2VJbnQoZS5zdWJzdHIoaSwyKSwxNik8PDI0LWklOCo0O3JldHVybiBuZXcgcy5pbml0KG4sci8yKX19LGM9YS5MYXRpbjE9e3N0cmluZ2lmeTpmdW5jdGlvbiB0KGUpe2Zvcih2YXIgcj1lLndvcmRzLG49ZS5zaWdCeXRlcyxpPVtdLG89MDtvPG47bysrKXt2YXIgcz1yW28+Pj4yXT4+PjI0LW8lNCo4JjI1NTtpLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShzKSl9cmV0dXJuIGkuam9pbihcIlwiKX0scGFyc2U6ZnVuY3Rpb24gdChlKXtmb3IodmFyIHI9ZS5sZW5ndGgsbj1bXSxpPTA7aTxyO2krKyluW2k+Pj4yXXw9KDI1NSZlLmNoYXJDb2RlQXQoaSkpPDwyNC1pJTQqODtyZXR1cm4gbmV3IHMuaW5pdChuLHIpfX0saD1hLlV0Zjg9e3N0cmluZ2lmeTpmdW5jdGlvbiB0KGUpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShjLnN0cmluZ2lmeShlKSkpfWNhdGNoKHQpe3Rocm93IG5ldyBFcnJvcihcIk1hbGZvcm1lZCBVVEYtOCBkYXRhXCIpfX0scGFyc2U6ZnVuY3Rpb24gdChlKXtyZXR1cm4gYy5wYXJzZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoZSkpKX19LGw9aS5CdWZmZXJlZEJsb2NrQWxnb3JpdGhtPW8uZXh0ZW5kKHtyZXNldDpmdW5jdGlvbiB0KCl7dGhpcy5fZGF0YT1uZXcgcy5pbml0LHRoaXMuX25EYXRhQnl0ZXM9MH0sX2FwcGVuZDpmdW5jdGlvbiB0KGUpe1wic3RyaW5nXCI9PXR5cGVvZiBlJiYoZT1oLnBhcnNlKGUpKSx0aGlzLl9kYXRhLmNvbmNhdChlKSx0aGlzLl9uRGF0YUJ5dGVzKz1lLnNpZ0J5dGVzfSxfcHJvY2VzczpmdW5jdGlvbiB0KGUpe3ZhciBuPXRoaXMuX2RhdGEsaT1uLndvcmRzLG89bi5zaWdCeXRlcyxhPXRoaXMuYmxvY2tTaXplLHU9by8oNCphKSxjPSh1PWU/ci5jZWlsKHUpOnIubWF4KCgwfHUpLXRoaXMuX21pbkJ1ZmZlclNpemUsMCkpKmEsaD1yLm1pbig0KmMsbyk7aWYoYyl7Zm9yKHZhciBsPTA7bDxjO2wrPWEpdGhpcy5fZG9Qcm9jZXNzQmxvY2soaSxsKTt2YXIgZj1pLnNwbGljZSgwLGMpO24uc2lnQnl0ZXMtPWh9cmV0dXJuIG5ldyBzLmluaXQoZixoKX0sY2xvbmU6ZnVuY3Rpb24gdCgpe3ZhciBlPW8uY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gZS5fZGF0YT10aGlzLl9kYXRhLmNsb25lKCksZX0sX21pbkJ1ZmZlclNpemU6MH0pLGkuSGFzaGVyPWwuZXh0ZW5kKHtjZmc6by5leHRlbmQoKSxpbml0OmZ1bmN0aW9uIHQoZSl7dGhpcy5jZmc9dGhpcy5jZmcuZXh0ZW5kKGUpLHRoaXMucmVzZXQoKX0scmVzZXQ6ZnVuY3Rpb24gdCgpe2wucmVzZXQuY2FsbCh0aGlzKSx0aGlzLl9kb1Jlc2V0KCl9LHVwZGF0ZTpmdW5jdGlvbiB0KGUpe3JldHVybiB0aGlzLl9hcHBlbmQoZSksdGhpcy5fcHJvY2VzcygpLHRoaXN9LGZpbmFsaXplOmZ1bmN0aW9uIHQoZSl7cmV0dXJuIGUmJnRoaXMuX2FwcGVuZChlKSx0aGlzLl9kb0ZpbmFsaXplKCl9LGJsb2NrU2l6ZToxNixfY3JlYXRlSGVscGVyOmZ1bmN0aW9uIHQoZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7cmV0dXJuIG5ldyBlLmluaXQocikuZmluYWxpemUodCl9fSxfY3JlYXRlSG1hY0hlbHBlcjpmdW5jdGlvbiB0KGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3JldHVybiBuZXcgZi5ITUFDLmluaXQoZSxyKS5maW5hbGl6ZSh0KX19fSksZj1uLmFsZ289e30sbik7IWZ1bmN0aW9uKHQpe3ZhciBlLHI9KGU9dikubGliLG49ci5CYXNlLGk9ci5Xb3JkQXJyYXk7KGU9ZS54NjQ9e30pLldvcmQ9bi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24gdChlLHIpe3RoaXMuaGlnaD1lLHRoaXMubG93PXJ9fSksZS5Xb3JkQXJyYXk9bi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24gdChlLHIpe2U9dGhpcy53b3Jkcz1lfHxbXSx0aGlzLnNpZ0J5dGVzPW51bGwhPXI/cjo4KmUubGVuZ3RofSx0b1gzMjpmdW5jdGlvbiB0KCl7Zm9yKHZhciBlPXRoaXMud29yZHMscj1lLmxlbmd0aCxuPVtdLG89MDtvPHI7bysrKXt2YXIgcz1lW29dO24ucHVzaChzLmhpZ2gpLG4ucHVzaChzLmxvdyl9cmV0dXJuIGkuY3JlYXRlKG4sdGhpcy5zaWdCeXRlcyl9LGNsb25lOmZ1bmN0aW9uIHQoKXtmb3IodmFyIGU9bi5jbG9uZS5jYWxsKHRoaXMpLHI9ZS53b3Jkcz10aGlzLndvcmRzLnNsaWNlKDApLGk9ci5sZW5ndGgsbz0wO288aTtvKyspcltvXT1yW29dLmNsb25lKCk7cmV0dXJuIGV9fSl9KCksZnVuY3Rpb24oKXt2YXIgdD12LGU9dC5saWIuV29yZEFycmF5O3QuZW5jLkJhc2U2ND17c3RyaW5naWZ5OmZ1bmN0aW9uIHQoZSl7dmFyIHI9ZS53b3JkcyxuPWUuc2lnQnl0ZXMsaT10aGlzLl9tYXA7ZS5jbGFtcCgpLGU9W107Zm9yKHZhciBvPTA7bzxuO28rPTMpZm9yKHZhciBzPShyW28+Pj4yXT4+PjI0LW8lNCo4JjI1NSk8PDE2fChyW28rMT4+PjJdPj4+MjQtKG8rMSklNCo4JjI1NSk8PDh8cltvKzI+Pj4yXT4+PjI0LShvKzIpJTQqOCYyNTUsYT0wOzQ+YSYmbysuNzUqYTxuO2ErKyllLnB1c2goaS5jaGFyQXQocz4+PjYqKDMtYSkmNjMpKTtpZihyPWkuY2hhckF0KDY0KSlmb3IoO2UubGVuZ3RoJTQ7KWUucHVzaChyKTtyZXR1cm4gZS5qb2luKFwiXCIpfSxwYXJzZTpmdW5jdGlvbiB0KHIpe3ZhciBuPXIubGVuZ3RoLGk9dGhpcy5fbWFwOyhvPWkuY2hhckF0KDY0KSkmJigtMSE9KG89ci5pbmRleE9mKG8pKSYmKG49bykpO2Zvcih2YXIgbz1bXSxzPTAsYT0wO2E8bjthKyspaWYoYSU0KXt2YXIgdT1pLmluZGV4T2Yoci5jaGFyQXQoYS0xKSk8PGElNCoyLGM9aS5pbmRleE9mKHIuY2hhckF0KGEpKT4+PjYtYSU0KjI7b1tzPj4+Ml18PSh1fGMpPDwyNC1zJTQqOCxzKyt9cmV0dXJuIGUuY3JlYXRlKG8scyl9LF9tYXA6XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPVwifX0oKSxmdW5jdGlvbih0KXtmb3IodmFyIGU9dixyPShpPWUubGliKS5Xb3JkQXJyYXksbj1pLkhhc2hlcixpPWUuYWxnbyxvPVtdLHM9W10sYT1mdW5jdGlvbiB0KGUpe3JldHVybiA0Mjk0OTY3Mjk2KihlLSgwfGUpKXwwfSx1PTIsYz0wOzY0PmM7KXt2YXIgaDt0OntoPXU7Zm9yKHZhciBsPXQuc3FydChoKSxmPTI7Zjw9bDtmKyspaWYoIShoJWYpKXtoPSExO2JyZWFrIHR9aD0hMH1oJiYoOD5jJiYob1tjXT1hKHQucG93KHUsLjUpKSksc1tjXT1hKHQucG93KHUsMS8zKSksYysrKSx1Kyt9dmFyIGc9W107aT1pLlNIQTI1Nj1uLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24gdCgpe3RoaXMuX2hhc2g9bmV3IHIuaW5pdChvLnNsaWNlKDApKX0sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uIHQoZSxyKXtmb3IodmFyIG49dGhpcy5faGFzaC53b3JkcyxpPW5bMF0sbz1uWzFdLGE9blsyXSx1PW5bM10sYz1uWzRdLGg9bls1XSxsPW5bNl0sZj1uWzddLGQ9MDs2ND5kO2QrKyl7aWYoMTY+ZClnW2RdPTB8ZVtyK2RdO2Vsc2V7dmFyIHA9Z1tkLTE1XSx2PWdbZC0yXTtnW2RdPSgocDw8MjV8cD4+PjcpXihwPDwxNHxwPj4+MTgpXnA+Pj4zKStnW2QtN10rKCh2PDwxNXx2Pj4+MTcpXih2PDwxM3x2Pj4+MTkpXnY+Pj4xMCkrZ1tkLTE2XX1wPWYrKChjPDwyNnxjPj4+NileKGM8PDIxfGM+Pj4xMSleKGM8PDd8Yz4+PjI1KSkrKGMmaF5+YyZsKStzW2RdK2dbZF0sdj0oKGk8PDMwfGk+Pj4yKV4oaTw8MTl8aT4+PjEzKV4oaTw8MTB8aT4+PjIyKSkrKGkmb15pJmFebyZhKSxmPWwsbD1oLGg9YyxjPXUrcHwwLHU9YSxhPW8sbz1pLGk9cCt2fDB9blswXT1uWzBdK2l8MCxuWzFdPW5bMV0rb3wwLG5bMl09blsyXSthfDAsblszXT1uWzNdK3V8MCxuWzRdPW5bNF0rY3wwLG5bNV09bls1XStofDAsbls2XT1uWzZdK2x8MCxuWzddPW5bN10rZnwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbiBlKCl7dmFyIHI9dGhpcy5fZGF0YSxuPXIud29yZHMsaT04KnRoaXMuX25EYXRhQnl0ZXMsbz04KnIuc2lnQnl0ZXM7cmV0dXJuIG5bbz4+PjVdfD0xMjg8PDI0LW8lMzIsblsxNCsobys2ND4+Pjk8PDQpXT10LmZsb29yKGkvNDI5NDk2NzI5NiksblsxNSsobys2ND4+Pjk8PDQpXT1pLHIuc2lnQnl0ZXM9NCpuLmxlbmd0aCx0aGlzLl9wcm9jZXNzKCksdGhpcy5faGFzaH0sY2xvbmU6ZnVuY3Rpb24gdCgpe3ZhciBlPW4uY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gZS5faGFzaD10aGlzLl9oYXNoLmNsb25lKCksZX19KTtlLlNIQTI1Nj1uLl9jcmVhdGVIZWxwZXIoaSksZS5IbWFjU0hBMjU2PW4uX2NyZWF0ZUhtYWNIZWxwZXIoaSl9KE1hdGgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3JldHVybiBuLmNyZWF0ZS5hcHBseShuLGFyZ3VtZW50cyl9Zm9yKHZhciBlPXYscj1lLmxpYi5IYXNoZXIsbj0obz1lLng2NCkuV29yZCxpPW8uV29yZEFycmF5LG89ZS5hbGdvLHM9W3QoMTExNjM1MjQwOCwzNjA5NzY3NDU4KSx0KDE4OTk0NDc0NDEsNjAyODkxNzI1KSx0KDMwNDkzMjM0NzEsMzk2NDQ4NDM5OSksdCgzOTIxMDA5NTczLDIxNzMyOTU1NDgpLHQoOTYxOTg3MTYzLDQwODE2Mjg0NzIpLHQoMTUwODk3MDk5MywzMDUzODM0MjY1KSx0KDI0NTM2MzU3NDgsMjkzNzY3MTU3OSksdCgyODcwNzYzMjIxLDM2NjQ2MDk1NjApLHQoMzYyNDM4MTA4MCwyNzM0ODgzMzk0KSx0KDMxMDU5ODQwMSwxMTY0OTk2NTQyKSx0KDYwNzIyNTI3OCwxMzIzNjEwNzY0KSx0KDE0MjY4ODE5ODcsMzU5MDMwNDk5NCksdCgxOTI1MDc4Mzg4LDQwNjgxODIzODMpLHQoMjE2MjA3ODIwNiw5OTEzMzYxMTMpLHQoMjYxNDg4ODEwMyw2MzM4MDMzMTcpLHQoMzI0ODIyMjU4MCwzNDc5Nzc0ODY4KSx0KDM4MzUzOTA0MDEsMjY2NjYxMzQ1OCksdCg0MDIyMjI0Nzc0LDk0NDcxMTEzOSksdCgyNjQzNDcwNzgsMjM0MTI2Mjc3MyksdCg2MDQ4MDc2MjgsMjAwNzgwMDkzMyksdCg3NzAyNTU5ODMsMTQ5NTk5MDkwMSksdCgxMjQ5MTUwMTIyLDE4NTY0MzEyMzUpLHQoMTU1NTA4MTY5MiwzMTc1MjE4MTMyKSx0KDE5OTYwNjQ5ODYsMjE5ODk1MDgzNyksdCgyNTU0MjIwODgyLDM5OTk3MTkzMzkpLHQoMjgyMTgzNDM0OSw3NjY3ODQwMTYpLHQoMjk1Mjk5NjgwOCwyNTY2NTk0ODc5KSx0KDMyMTAzMTM2NzEsMzIwMzMzNzk1NiksdCgzMzM2NTcxODkxLDEwMzQ0NTcwMjYpLHQoMzU4NDUyODcxMSwyNDY2OTQ4OTAxKSx0KDExMzkyNjk5MywzNzU4MzI2MzgzKSx0KDMzODI0MTg5NSwxNjg3MTc5MzYpLHQoNjY2MzA3MjA1LDExODgxNzk5NjQpLHQoNzczNTI5OTEyLDE1NDYwNDU3MzQpLHQoMTI5NDc1NzM3MiwxNTIyODA1NDg1KSx0KDEzOTYxODIyOTEsMjY0MzgzMzgyMyksdCgxNjk1MTgzNzAwLDIzNDM1MjczOTApLHQoMTk4NjY2MTA1MSwxMDE0NDc3NDgwKSx0KDIxNzcwMjYzNTAsMTIwNjc1OTE0MiksdCgyNDU2OTU2MDM3LDM0NDA3NzYyNyksdCgyNzMwNDg1OTIxLDEyOTA4NjM0NjApLHQoMjgyMDMwMjQxMSwzMTU4NDU0MjczKSx0KDMyNTk3MzA4MDAsMzUwNTk1MjY1NyksdCgzMzQ1NzY0NzcxLDEwNjIxNzAwOCksdCgzNTE2MDY1ODE3LDM2MDYwMDgzNDQpLHQoMzYwMDM1MjgwNCwxNDMyNzI1Nzc2KSx0KDQwOTQ1NzE5MDksMTQ2NzAzMTU5NCksdCgyNzU0MjMzNDQsODUxMTY5NzIwKSx0KDQzMDIyNzczNCwzMTAwODIzNzUyKSx0KDUwNjk0ODYxNiwxMzYzMjU4MTk1KSx0KDY1OTA2MDU1NiwzNzUwNjg1NTkzKSx0KDg4Mzk5Nzg3NywzNzg1MDUwMjgwKSx0KDk1ODEzOTU3MSwzMzE4MzA3NDI3KSx0KDEzMjI4MjIyMTgsMzgxMjcyMzQwMyksdCgxNTM3MDAyMDYzLDIwMDMwMzQ5OTUpLHQoMTc0Nzg3Mzc3OSwzNjAyMDM2ODk5KSx0KDE5NTU1NjIyMjIsMTU3NTk5MDAxMiksdCgyMDI0MTA0ODE1LDExMjU1OTI5MjgpLHQoMjIyNzczMDQ1MiwyNzE2OTA0MzA2KSx0KDIzNjE4NTI0MjQsNDQyNzc2MDQ0KSx0KDI0Mjg0MzY0NzQsNTkzNjk4MzQ0KSx0KDI3NTY3MzQxODcsMzczMzExMDI0OSksdCgzMjA0MDMxNDc5LDI5OTkzNTE1NzMpLHQoMzMyOTMyNTI5OCwzODE1OTIwNDI3KSx0KDMzOTE1Njk2MTQsMzkyODM4MzkwMCksdCgzNTE1MjY3MjcxLDU2NjI4MDcxMSksdCgzOTQwMTg3NjA2LDM0NTQwNjk1MzQpLHQoNDExODYzMDI3MSw0MDAwMjM5OTkyKSx0KDExNjQxODQ3NCwxOTE0MTM4NTU0KSx0KDE3NDI5MjQyMSwyNzMxMDU1MjcwKSx0KDI4OTM4MDM1NiwzMjAzOTkzMDA2KSx0KDQ2MDM5MzI2OSwzMjA2MjAzMTUpLHQoNjg1NDcxNzMzLDU4NzQ5NjgzNiksdCg4NTIxNDI5NzEsMTA4Njc5Mjg1MSksdCgxMDE3MDM2Mjk4LDM2NTU0MzEwMCksdCgxMTI2MDAwNTgwLDI2MTgyOTc2NzYpLHQoMTI4ODAzMzQ3MCwzNDA5ODU1MTU4KSx0KDE1MDE1MDU5NDgsNDIzNDUwOTg2NiksdCgxNjA3MTY3OTE1LDk4NzE2NzQ2OCksdCgxODE2NDAyMzE2LDEyNDYxODk1OTEpXSxhPVtdLHU9MDs4MD51O3UrKylhW3VdPXQoKTtvPW8uU0hBNTEyPXIuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbiB0KCl7dGhpcy5faGFzaD1uZXcgaS5pbml0KFtuZXcgbi5pbml0KDE3NzkwMzM3MDMsNDA4OTIzNTcyMCksbmV3IG4uaW5pdCgzMTQ0MTM0Mjc3LDIyMjc4NzM1OTUpLG5ldyBuLmluaXQoMTAxMzkwNDI0Miw0MjcxMTc1NzIzKSxuZXcgbi5pbml0KDI3NzM0ODA3NjIsMTU5NTc1MDEyOSksbmV3IG4uaW5pdCgxMzU5ODkzMTE5LDI5MTc1NjUxMzcpLG5ldyBuLmluaXQoMjYwMDgyMjkyNCw3MjU1MTExOTkpLG5ldyBuLmluaXQoNTI4NzM0NjM1LDQyMTUzODk1NDcpLG5ldyBuLmluaXQoMTU0MTQ1OTIyNSwzMjcwMzMyMDkpXSl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbiB0KGUscil7Zm9yKHZhciBuPShmPXRoaXMuX2hhc2gud29yZHMpWzBdLGk9ZlsxXSxvPWZbMl0sdT1mWzNdLGM9Zls0XSxoPWZbNV0sbD1mWzZdLGY9Zls3XSxnPW4uaGlnaCxkPW4ubG93LHA9aS5oaWdoLHY9aS5sb3cseT1vLmhpZ2gsbT1vLmxvdyxfPXUuaGlnaCxTPXUubG93LGI9Yy5oaWdoLHc9Yy5sb3csRj1oLmhpZ2gsRT1oLmxvdyx4PWwuaGlnaCxBPWwubG93LGs9Zi5oaWdoLFA9Zi5sb3csQz1nLFQ9ZCxSPXAsST12LEQ9eSxMPW0sTj1fLFU9UyxCPWIsTz13LGo9RixNPUUsSD14LFY9QSxLPWsscT1QLEo9MDs4MD5KO0orKyl7dmFyIFc9YVtKXTtpZigxNj5KKXZhciB6PVcuaGlnaD0wfGVbcisyKkpdLFk9Vy5sb3c9MHxlW3IrMipKKzFdO2Vsc2V7ej0oKFk9KHo9YVtKLTE1XSkuaGlnaCk+Pj4xfChHPXoubG93KTw8MzEpXihZPj4+OHxHPDwyNCleWT4+Pjc7dmFyIEc9KEc+Pj4xfFk8PDMxKV4oRz4+Pjh8WTw8MjQpXihHPj4+N3xZPDwyNSksWD0oKFk9KFg9YVtKLTJdKS5oaWdoKT4+PjE5fCgkPVgubG93KTw8MTMpXihZPDwzfCQ+Pj4yOSleWT4+PjYsJD0oJD4+PjE5fFk8PDEzKV4oJDw8M3xZPj4+MjkpXigkPj4+NnxZPDwyNiksUT0oWT1hW0otN10pLmhpZ2gsWj0odHQ9YVtKLTE2XSkuaGlnaCx0dD10dC5sb3c7ej0oej0oej16K1ErKChZPUcrWS5sb3cpPj4+MDxHPj4+MD8xOjApKStYKygoWT1ZKyQpPj4+MDwkPj4+MD8xOjApKStaKygoWT1ZK3R0KT4+PjA8dHQ+Pj4wPzE6MCk7Vy5oaWdoPXosVy5sb3c9WX1RPUImal5+QiZILHR0PU8mTV5+TyZWLFc9QyZSXkMmRF5SJkQ7dmFyIGV0PVQmSV5UJkxeSSZMLHJ0PShHPShDPj4+Mjh8VDw8NCleKEM8PDMwfFQ+Pj4yKV4oQzw8MjV8VD4+PjcpLFg9KFQ+Pj4yOHxDPDw0KV4oVDw8MzB8Qz4+PjIpXihUPDwyNXxDPj4+NyksKCQ9c1tKXSkuaGlnaCksbnQ9JC5sb3c7Wj1LKygoQj4+PjE0fE88PDE4KV4oQj4+PjE4fE88PDE0KV4oQjw8MjN8Tz4+PjkpKSsoKCQ9cSsoKE8+Pj4xNHxCPDwxOCleKE8+Pj4xOHxCPDwxNCleKE88PDIzfEI+Pj45KSkpPj4+MDxxPj4+MD8xOjApLEs9SCxxPVYsSD1qLFY9TSxqPUIsTT1PLEI9TisoWj0oWj0oWj1aK1ErKCgkPSQrdHQpPj4+MDx0dD4+PjA/MTowKSkrcnQrKCgkPSQrbnQpPj4+MDxudD4+PjA/MTowKSkreisoKCQ9JCtZKT4+PjA8WT4+PjA/MTowKSkrKChPPVUrJHwwKT4+PjA8VT4+PjA/MTowKXwwLE49RCxVPUwsRD1SLEw9SSxSPUMsST1ULEM9WisoVz1HK1crKChZPVgrZXQpPj4+MDxYPj4+MD8xOjApKSsoKFQ9JCtZfDApPj4+MDwkPj4+MD8xOjApfDB9ZD1uLmxvdz1kK1Qsbi5oaWdoPWcrQysoZD4+PjA8VD4+PjA/MTowKSx2PWkubG93PXYrSSxpLmhpZ2g9cCtSKyh2Pj4+MDxJPj4+MD8xOjApLG09by5sb3c9bStMLG8uaGlnaD15K0QrKG0+Pj4wPEw+Pj4wPzE6MCksUz11Lmxvdz1TK1UsdS5oaWdoPV8rTisoUz4+PjA8VT4+PjA/MTowKSx3PWMubG93PXcrTyxjLmhpZ2g9YitCKyh3Pj4+MDxPPj4+MD8xOjApLEU9aC5sb3c9RStNLGguaGlnaD1GK2orKEU+Pj4wPE0+Pj4wPzE6MCksQT1sLmxvdz1BK1YsbC5oaWdoPXgrSCsoQT4+PjA8Vj4+PjA/MTowKSxQPWYubG93PVArcSxmLmhpZ2g9aytLKyhQPj4+MDxxPj4+MD8xOjApfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbiB0KCl7dmFyIGU9dGhpcy5fZGF0YSxyPWUud29yZHMsbj04KnRoaXMuX25EYXRhQnl0ZXMsaT04KmUuc2lnQnl0ZXM7cmV0dXJuIHJbaT4+PjVdfD0xMjg8PDI0LWklMzIsclszMCsoaSsxMjg+Pj4xMDw8NSldPU1hdGguZmxvb3Iobi80Mjk0OTY3Mjk2KSxyWzMxKyhpKzEyOD4+PjEwPDw1KV09bixlLnNpZ0J5dGVzPTQqci5sZW5ndGgsdGhpcy5fcHJvY2VzcygpLHRoaXMuX2hhc2gudG9YMzIoKX0sY2xvbmU6ZnVuY3Rpb24gdCgpe3ZhciBlPXIuY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gZS5faGFzaD10aGlzLl9oYXNoLmNsb25lKCksZX0sYmxvY2tTaXplOjMyfSksZS5TSEE1MTI9ci5fY3JlYXRlSGVscGVyKG8pLGUuSG1hY1NIQTUxMj1yLl9jcmVhdGVIbWFjSGVscGVyKG8pfSgpLGZ1bmN0aW9uKCl7dmFyIHQ9dixlPShpPXQueDY0KS5Xb3JkLHI9aS5Xb3JkQXJyYXksbj0oaT10LmFsZ28pLlNIQTUxMixpPWkuU0hBMzg0PW4uZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbiB0KCl7dGhpcy5faGFzaD1uZXcgci5pbml0KFtuZXcgZS5pbml0KDM0MTgwNzAzNjUsMzIzODM3MTAzMiksbmV3IGUuaW5pdCgxNjU0MjcwMjUwLDkxNDE1MDY2MyksbmV3IGUuaW5pdCgyNDM4NTI5MzcwLDgxMjcwMjk5OSksbmV3IGUuaW5pdCgzNTU0NjIzNjAsNDE0NDkxMjY5NyksbmV3IGUuaW5pdCgxNzMxNDA1NDE1LDQyOTA3NzU4NTcpLG5ldyBlLmluaXQoMjM5NDE4MDIzMSwxNzUwNjAzMDI1KSxuZXcgZS5pbml0KDM2NzUwMDg1MjUsMTY5NDA3NjgzOSksbmV3IGUuaW5pdCgxMjAzMDYyODEzLDMyMDQwNzU0MjgpXSl9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uIHQoKXt2YXIgZT1uLl9kb0ZpbmFsaXplLmNhbGwodGhpcyk7cmV0dXJuIGUuc2lnQnl0ZXMtPTE2LGV9fSk7dC5TSEEzODQ9bi5fY3JlYXRlSGVscGVyKGkpLHQuSG1hY1NIQTM4ND1uLl9jcmVhdGVIbWFjSGVscGVyKGkpfSgpO1xuLyohIChjKSBUb20gV3UgfCBodHRwOi8vd3d3LWNzLXN0dWRlbnRzLnN0YW5mb3JkLmVkdS9+dGp3L2pzYm4vXG4gKi9cbnZhciB5LG09XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCI7ZnVuY3Rpb24gXyh0KXt2YXIgZSxyLG49XCJcIjtmb3IoZT0wO2UrMzw9dC5sZW5ndGg7ZSs9MylyPXBhcnNlSW50KHQuc3Vic3RyaW5nKGUsZSszKSwxNiksbis9bS5jaGFyQXQocj4+NikrbS5jaGFyQXQoNjMmcik7Zm9yKGUrMT09dC5sZW5ndGg/KHI9cGFyc2VJbnQodC5zdWJzdHJpbmcoZSxlKzEpLDE2KSxuKz1tLmNoYXJBdChyPDwyKSk6ZSsyPT10Lmxlbmd0aCYmKHI9cGFyc2VJbnQodC5zdWJzdHJpbmcoZSxlKzIpLDE2KSxuKz1tLmNoYXJBdChyPj4yKSttLmNoYXJBdCgoMyZyKTw8NCkpLFwiPVwiOygzJm4ubGVuZ3RoKT4wOyluKz1cIj1cIjtyZXR1cm4gbn1mdW5jdGlvbiBTKHQpe3ZhciBlLHIsbixpPVwiXCIsbz0wO2ZvcihlPTA7ZTx0Lmxlbmd0aCYmXCI9XCIhPXQuY2hhckF0KGUpOysrZSkobj1tLmluZGV4T2YodC5jaGFyQXQoZSkpKTwwfHwoMD09bz8oaSs9VChuPj4yKSxyPTMmbixvPTEpOjE9PW8/KGkrPVQocjw8MnxuPj40KSxyPTE1Jm4sbz0yKToyPT1vPyhpKz1UKHIpLGkrPVQobj4+Mikscj0zJm4sbz0zKTooaSs9VChyPDwyfG4+PjQpLGkrPVQoMTUmbiksbz0wKSk7cmV0dXJuIDE9PW8mJihpKz1UKHI8PDIpKSxpfWZ1bmN0aW9uIGIodCl7dmFyIGUscj1TKHQpLG49bmV3IEFycmF5O2ZvcihlPTA7MiplPHIubGVuZ3RoOysrZSluW2VdPXBhcnNlSW50KHIuc3Vic3RyaW5nKDIqZSwyKmUrMiksMTYpO3JldHVybiBufWZ1bmN0aW9uIHcodCxlLHIpe251bGwhPXQmJihcIm51bWJlclwiPT10eXBlb2YgdD90aGlzLmZyb21OdW1iZXIodCxlLHIpOm51bGw9PWUmJlwic3RyaW5nXCIhPXR5cGVvZiB0P3RoaXMuZnJvbVN0cmluZyh0LDI1Nik6dGhpcy5mcm9tU3RyaW5nKHQsZSkpfWZ1bmN0aW9uIEYoKXtyZXR1cm4gbmV3IHcobnVsbCl9XCJNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXJcIj09ZC5hcHBOYW1lPyh3LnByb3RvdHlwZS5hbT1mdW5jdGlvbiBFKHQsZSxyLG4saSxvKXtmb3IodmFyIHM9MzI3NjcmZSxhPWU+PjE1Oy0tbz49MDspe3ZhciB1PTMyNzY3JnRoaXNbdF0sYz10aGlzW3QrK10+PjE1LGg9YSp1K2MqcztpPSgodT1zKnUrKCgzMjc2NyZoKTw8MTUpK3Jbbl0rKDEwNzM3NDE4MjMmaSkpPj4+MzApKyhoPj4+MTUpK2EqYysoaT4+PjMwKSxyW24rK109MTA3Mzc0MTgyMyZ1fXJldHVybiBpfSx5PTMwKTpcIk5ldHNjYXBlXCIhPWQuYXBwTmFtZT8ody5wcm90b3R5cGUuYW09ZnVuY3Rpb24geCh0LGUscixuLGksbyl7Zm9yKDstLW8+PTA7KXt2YXIgcz1lKnRoaXNbdCsrXStyW25dK2k7aT1NYXRoLmZsb29yKHMvNjcxMDg4NjQpLHJbbisrXT02NzEwODg2MyZzfXJldHVybiBpfSx5PTI2KToody5wcm90b3R5cGUuYW09ZnVuY3Rpb24gQSh0LGUscixuLGksbyl7Zm9yKHZhciBzPTE2MzgzJmUsYT1lPj4xNDstLW8+PTA7KXt2YXIgdT0xNjM4MyZ0aGlzW3RdLGM9dGhpc1t0KytdPj4xNCxoPWEqdStjKnM7aT0oKHU9cyp1KygoMTYzODMmaCk8PDE0KStyW25dK2kpPj4yOCkrKGg+PjE0KSthKmMscltuKytdPTI2ODQzNTQ1NSZ1fXJldHVybiBpfSx5PTI4KSx3LnByb3RvdHlwZS5EQj15LHcucHJvdG90eXBlLkRNPSgxPDx5KS0xLHcucHJvdG90eXBlLkRWPTE8PHk7dy5wcm90b3R5cGUuRlY9TWF0aC5wb3coMiw1Miksdy5wcm90b3R5cGUuRjE9NTIteSx3LnByb3RvdHlwZS5GMj0yKnktNTI7dmFyIGssUCxDPW5ldyBBcnJheTtmb3Ioaz1cIjBcIi5jaGFyQ29kZUF0KDApLFA9MDtQPD05OysrUClDW2srK109UDtmb3Ioaz1cImFcIi5jaGFyQ29kZUF0KDApLFA9MTA7UDwzNjsrK1ApQ1trKytdPVA7Zm9yKGs9XCJBXCIuY2hhckNvZGVBdCgwKSxQPTEwO1A8MzY7KytQKUNbaysrXT1QO2Z1bmN0aW9uIFQodCl7cmV0dXJuXCIwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIi5jaGFyQXQodCl9ZnVuY3Rpb24gUih0LGUpe3ZhciByPUNbdC5jaGFyQ29kZUF0KGUpXTtyZXR1cm4gbnVsbD09cj8tMTpyfWZ1bmN0aW9uIEkodCl7dmFyIGU9RigpO3JldHVybiBlLmZyb21JbnQodCksZX1mdW5jdGlvbiBEKHQpe3ZhciBlLHI9MTtyZXR1cm4gMCE9KGU9dD4+PjE2KSYmKHQ9ZSxyKz0xNiksMCE9KGU9dD4+OCkmJih0PWUscis9OCksMCE9KGU9dD4+NCkmJih0PWUscis9NCksMCE9KGU9dD4+MikmJih0PWUscis9MiksMCE9KGU9dD4+MSkmJih0PWUscis9MSkscn1mdW5jdGlvbiBMKHQpe3RoaXMubT10fWZ1bmN0aW9uIE4odCl7dGhpcy5tPXQsdGhpcy5tcD10LmludkRpZ2l0KCksdGhpcy5tcGw9MzI3NjcmdGhpcy5tcCx0aGlzLm1waD10aGlzLm1wPj4xNSx0aGlzLnVtPSgxPDx0LkRCLTE1KS0xLHRoaXMubXQyPTIqdC50fWZ1bmN0aW9uIFUodCxlKXtyZXR1cm4gdCZlfWZ1bmN0aW9uIEIodCxlKXtyZXR1cm4gdHxlfWZ1bmN0aW9uIE8odCxlKXtyZXR1cm4gdF5lfWZ1bmN0aW9uIGoodCxlKXtyZXR1cm4gdCZ+ZX1mdW5jdGlvbiBNKHQpe2lmKDA9PXQpcmV0dXJuLTE7dmFyIGU9MDtyZXR1cm4gMD09KDY1NTM1JnQpJiYodD4+PTE2LGUrPTE2KSwwPT0oMjU1JnQpJiYodD4+PTgsZSs9OCksMD09KDE1JnQpJiYodD4+PTQsZSs9NCksMD09KDMmdCkmJih0Pj49MixlKz0yKSwwPT0oMSZ0KSYmKytlLGV9ZnVuY3Rpb24gSCh0KXtmb3IodmFyIGU9MDswIT10Oyl0Jj10LTEsKytlO3JldHVybiBlfWZ1bmN0aW9uIFYoKXt9ZnVuY3Rpb24gSyh0KXtyZXR1cm4gdH1mdW5jdGlvbiBxKHQpe3RoaXMucjI9RigpLHRoaXMucTM9RigpLHcuT05FLmRsU2hpZnRUbygyKnQudCx0aGlzLnIyKSx0aGlzLm11PXRoaXMucjIuZGl2aWRlKHQpLHRoaXMubT10fUwucHJvdG90eXBlLmNvbnZlcnQ9ZnVuY3Rpb24gSih0KXtyZXR1cm4gdC5zPDB8fHQuY29tcGFyZVRvKHRoaXMubSk+PTA/dC5tb2QodGhpcy5tKTp0fSxMLnByb3RvdHlwZS5yZXZlcnQ9ZnVuY3Rpb24gVyh0KXtyZXR1cm4gdH0sTC5wcm90b3R5cGUucmVkdWNlPWZ1bmN0aW9uIHoodCl7dC5kaXZSZW1Ubyh0aGlzLm0sbnVsbCx0KX0sTC5wcm90b3R5cGUubXVsVG89ZnVuY3Rpb24gWSh0LGUscil7dC5tdWx0aXBseVRvKGUsciksdGhpcy5yZWR1Y2Uocil9LEwucHJvdG90eXBlLnNxclRvPWZ1bmN0aW9uIEcodCxlKXt0LnNxdWFyZVRvKGUpLHRoaXMucmVkdWNlKGUpfSxOLnByb3RvdHlwZS5jb252ZXJ0PWZ1bmN0aW9uIFgodCl7dmFyIGU9RigpO3JldHVybiB0LmFicygpLmRsU2hpZnRUbyh0aGlzLm0udCxlKSxlLmRpdlJlbVRvKHRoaXMubSxudWxsLGUpLHQuczwwJiZlLmNvbXBhcmVUbyh3LlpFUk8pPjAmJnRoaXMubS5zdWJUbyhlLGUpLGV9LE4ucHJvdG90eXBlLnJldmVydD1mdW5jdGlvbiAkKHQpe3ZhciBlPUYoKTtyZXR1cm4gdC5jb3B5VG8oZSksdGhpcy5yZWR1Y2UoZSksZX0sTi5wcm90b3R5cGUucmVkdWNlPWZ1bmN0aW9uIFEodCl7Zm9yKDt0LnQ8PXRoaXMubXQyOyl0W3QudCsrXT0wO2Zvcih2YXIgZT0wO2U8dGhpcy5tLnQ7KytlKXt2YXIgcj0zMjc2NyZ0W2VdLG49cip0aGlzLm1wbCsoKHIqdGhpcy5tcGgrKHRbZV0+PjE1KSp0aGlzLm1wbCZ0aGlzLnVtKTw8MTUpJnQuRE07Zm9yKHRbcj1lK3RoaXMubS50XSs9dGhpcy5tLmFtKDAsbix0LGUsMCx0aGlzLm0udCk7dFtyXT49dC5EVjspdFtyXS09dC5EVix0Wysrcl0rK310LmNsYW1wKCksdC5kclNoaWZ0VG8odGhpcy5tLnQsdCksdC5jb21wYXJlVG8odGhpcy5tKT49MCYmdC5zdWJUbyh0aGlzLm0sdCl9LE4ucHJvdG90eXBlLm11bFRvPWZ1bmN0aW9uIFoodCxlLHIpe3QubXVsdGlwbHlUbyhlLHIpLHRoaXMucmVkdWNlKHIpfSxOLnByb3RvdHlwZS5zcXJUbz1mdW5jdGlvbiB0dCh0LGUpe3Quc3F1YXJlVG8oZSksdGhpcy5yZWR1Y2UoZSl9LHcucHJvdG90eXBlLmNvcHlUbz1mdW5jdGlvbiBldCh0KXtmb3IodmFyIGU9dGhpcy50LTE7ZT49MDstLWUpdFtlXT10aGlzW2VdO3QudD10aGlzLnQsdC5zPXRoaXMuc30sdy5wcm90b3R5cGUuZnJvbUludD1mdW5jdGlvbiBydCh0KXt0aGlzLnQ9MSx0aGlzLnM9dDwwPy0xOjAsdD4wP3RoaXNbMF09dDp0PC0xP3RoaXNbMF09dCt0aGlzLkRWOnRoaXMudD0wfSx3LnByb3RvdHlwZS5mcm9tU3RyaW5nPWZ1bmN0aW9uIG50KHQsZSl7dmFyIHI7aWYoMTY9PWUpcj00O2Vsc2UgaWYoOD09ZSlyPTM7ZWxzZSBpZigyNTY9PWUpcj04O2Vsc2UgaWYoMj09ZSlyPTE7ZWxzZSBpZigzMj09ZSlyPTU7ZWxzZXtpZig0IT1lKXJldHVybiB2b2lkIHRoaXMuZnJvbVJhZGl4KHQsZSk7cj0yfXRoaXMudD0wLHRoaXMucz0wO2Zvcih2YXIgbj10Lmxlbmd0aCxpPSExLG89MDstLW4+PTA7KXt2YXIgcz04PT1yPzI1NSZ0W25dOlIodCxuKTtzPDA/XCItXCI9PXQuY2hhckF0KG4pJiYoaT0hMCk6KGk9ITEsMD09bz90aGlzW3RoaXMudCsrXT1zOm8rcj50aGlzLkRCPyh0aGlzW3RoaXMudC0xXXw9KHMmKDE8PHRoaXMuREItbyktMSk8PG8sdGhpc1t0aGlzLnQrK109cz4+dGhpcy5EQi1vKTp0aGlzW3RoaXMudC0xXXw9czw8bywobys9cik+PXRoaXMuREImJihvLT10aGlzLkRCKSl9OD09ciYmMCE9KDEyOCZ0WzBdKSYmKHRoaXMucz0tMSxvPjAmJih0aGlzW3RoaXMudC0xXXw9KDE8PHRoaXMuREItbyktMTw8bykpLHRoaXMuY2xhbXAoKSxpJiZ3LlpFUk8uc3ViVG8odGhpcyx0aGlzKX0sdy5wcm90b3R5cGUuY2xhbXA9ZnVuY3Rpb24gaXQoKXtmb3IodmFyIHQ9dGhpcy5zJnRoaXMuRE07dGhpcy50PjAmJnRoaXNbdGhpcy50LTFdPT10OyktLXRoaXMudH0sdy5wcm90b3R5cGUuZGxTaGlmdFRvPWZ1bmN0aW9uIG90KHQsZSl7dmFyIHI7Zm9yKHI9dGhpcy50LTE7cj49MDstLXIpZVtyK3RdPXRoaXNbcl07Zm9yKHI9dC0xO3I+PTA7LS1yKWVbcl09MDtlLnQ9dGhpcy50K3QsZS5zPXRoaXMuc30sdy5wcm90b3R5cGUuZHJTaGlmdFRvPWZ1bmN0aW9uIHN0KHQsZSl7Zm9yKHZhciByPXQ7cjx0aGlzLnQ7KytyKWVbci10XT10aGlzW3JdO2UudD1NYXRoLm1heCh0aGlzLnQtdCwwKSxlLnM9dGhpcy5zfSx3LnByb3RvdHlwZS5sU2hpZnRUbz1mdW5jdGlvbiBhdCh0LGUpe3ZhciByLG49dCV0aGlzLkRCLGk9dGhpcy5EQi1uLG89KDE8PGkpLTEscz1NYXRoLmZsb29yKHQvdGhpcy5EQiksYT10aGlzLnM8PG4mdGhpcy5ETTtmb3Iocj10aGlzLnQtMTtyPj0wOy0tcillW3IrcysxXT10aGlzW3JdPj5pfGEsYT0odGhpc1tyXSZvKTw8bjtmb3Iocj1zLTE7cj49MDstLXIpZVtyXT0wO2Vbc109YSxlLnQ9dGhpcy50K3MrMSxlLnM9dGhpcy5zLGUuY2xhbXAoKX0sdy5wcm90b3R5cGUuclNoaWZ0VG89ZnVuY3Rpb24gdXQodCxlKXtlLnM9dGhpcy5zO3ZhciByPU1hdGguZmxvb3IodC90aGlzLkRCKTtpZihyPj10aGlzLnQpZS50PTA7ZWxzZXt2YXIgbj10JXRoaXMuREIsaT10aGlzLkRCLW4sbz0oMTw8biktMTtlWzBdPXRoaXNbcl0+Pm47Zm9yKHZhciBzPXIrMTtzPHRoaXMudDsrK3MpZVtzLXItMV18PSh0aGlzW3NdJm8pPDxpLGVbcy1yXT10aGlzW3NdPj5uO24+MCYmKGVbdGhpcy50LXItMV18PSh0aGlzLnMmbyk8PGkpLGUudD10aGlzLnQtcixlLmNsYW1wKCl9fSx3LnByb3RvdHlwZS5zdWJUbz1mdW5jdGlvbiBjdCh0LGUpe2Zvcih2YXIgcj0wLG49MCxpPU1hdGgubWluKHQudCx0aGlzLnQpO3I8aTspbis9dGhpc1tyXS10W3JdLGVbcisrXT1uJnRoaXMuRE0sbj4+PXRoaXMuREI7aWYodC50PHRoaXMudCl7Zm9yKG4tPXQucztyPHRoaXMudDspbis9dGhpc1tyXSxlW3IrK109biZ0aGlzLkRNLG4+Pj10aGlzLkRCO24rPXRoaXMuc31lbHNle2ZvcihuKz10aGlzLnM7cjx0LnQ7KW4tPXRbcl0sZVtyKytdPW4mdGhpcy5ETSxuPj49dGhpcy5EQjtuLT10LnN9ZS5zPW48MD8tMTowLG48LTE/ZVtyKytdPXRoaXMuRFYrbjpuPjAmJihlW3IrK109biksZS50PXIsZS5jbGFtcCgpfSx3LnByb3RvdHlwZS5tdWx0aXBseVRvPWZ1bmN0aW9uIGh0KHQsZSl7dmFyIHI9dGhpcy5hYnMoKSxuPXQuYWJzKCksaT1yLnQ7Zm9yKGUudD1pK24udDstLWk+PTA7KWVbaV09MDtmb3IoaT0wO2k8bi50OysraSllW2krci50XT1yLmFtKDAsbltpXSxlLGksMCxyLnQpO2Uucz0wLGUuY2xhbXAoKSx0aGlzLnMhPXQucyYmdy5aRVJPLnN1YlRvKGUsZSl9LHcucHJvdG90eXBlLnNxdWFyZVRvPWZ1bmN0aW9uIGx0KHQpe2Zvcih2YXIgZT10aGlzLmFicygpLHI9dC50PTIqZS50Oy0tcj49MDspdFtyXT0wO2ZvcihyPTA7cjxlLnQtMTsrK3Ipe3ZhciBuPWUuYW0ocixlW3JdLHQsMipyLDAsMSk7KHRbcitlLnRdKz1lLmFtKHIrMSwyKmVbcl0sdCwyKnIrMSxuLGUudC1yLTEpKT49ZS5EViYmKHRbcitlLnRdLT1lLkRWLHRbcitlLnQrMV09MSl9dC50PjAmJih0W3QudC0xXSs9ZS5hbShyLGVbcl0sdCwyKnIsMCwxKSksdC5zPTAsdC5jbGFtcCgpfSx3LnByb3RvdHlwZS5kaXZSZW1Ubz1mdW5jdGlvbiBmdCh0LGUscil7dmFyIG49dC5hYnMoKTtpZighKG4udDw9MCkpe3ZhciBpPXRoaXMuYWJzKCk7aWYoaS50PG4udClyZXR1cm4gbnVsbCE9ZSYmZS5mcm9tSW50KDApLHZvaWQobnVsbCE9ciYmdGhpcy5jb3B5VG8ocikpO251bGw9PXImJihyPUYoKSk7dmFyIG89RigpLHM9dGhpcy5zLGE9dC5zLHU9dGhpcy5EQi1EKG5bbi50LTFdKTt1PjA/KG4ubFNoaWZ0VG8odSxvKSxpLmxTaGlmdFRvKHUscikpOihuLmNvcHlUbyhvKSxpLmNvcHlUbyhyKSk7dmFyIGM9by50LGg9b1tjLTFdO2lmKDAhPWgpe3ZhciBsPWgqKDE8PHRoaXMuRjEpKyhjPjE/b1tjLTJdPj50aGlzLkYyOjApLGY9dGhpcy5GVi9sLGc9KDE8PHRoaXMuRjEpL2wsZD0xPDx0aGlzLkYyLHA9ci50LHY9cC1jLHk9bnVsbD09ZT9GKCk6ZTtmb3Ioby5kbFNoaWZ0VG8odix5KSxyLmNvbXBhcmVUbyh5KT49MCYmKHJbci50KytdPTEsci5zdWJUbyh5LHIpKSx3Lk9ORS5kbFNoaWZ0VG8oYyx5KSx5LnN1YlRvKG8sbyk7by50PGM7KW9bby50KytdPTA7Zm9yKDstLXY+PTA7KXt2YXIgbT1yWy0tcF09PWg/dGhpcy5ETTpNYXRoLmZsb29yKHJbcF0qZisocltwLTFdK2QpKmcpO2lmKChyW3BdKz1vLmFtKDAsbSxyLHYsMCxjKSk8bSlmb3Ioby5kbFNoaWZ0VG8odix5KSxyLnN1YlRvKHkscik7cltwXTwtLW07KXIuc3ViVG8oeSxyKX1udWxsIT1lJiYoci5kclNoaWZ0VG8oYyxlKSxzIT1hJiZ3LlpFUk8uc3ViVG8oZSxlKSksci50PWMsci5jbGFtcCgpLHU+MCYmci5yU2hpZnRUbyh1LHIpLHM8MCYmdy5aRVJPLnN1YlRvKHIscil9fX0sdy5wcm90b3R5cGUuaW52RGlnaXQ9ZnVuY3Rpb24gZ3QoKXtpZih0aGlzLnQ8MSlyZXR1cm4gMDt2YXIgdD10aGlzWzBdO2lmKDA9PSgxJnQpKXJldHVybiAwO3ZhciBlPTMmdDtyZXR1cm4oZT0oZT0oZT0oZT1lKigyLSgxNSZ0KSplKSYxNSkqKDItKDI1NSZ0KSplKSYyNTUpKigyLSgoNjU1MzUmdCkqZSY2NTUzNSkpJjY1NTM1KSooMi10KmUldGhpcy5EVikldGhpcy5EVik+MD90aGlzLkRWLWU6LWV9LHcucHJvdG90eXBlLmlzRXZlbj1mdW5jdGlvbiBkdCgpe3JldHVybiAwPT0odGhpcy50PjA/MSZ0aGlzWzBdOnRoaXMucyl9LHcucHJvdG90eXBlLmV4cD1mdW5jdGlvbiBwdCh0LGUpe2lmKHQ+NDI5NDk2NzI5NXx8dDwxKXJldHVybiB3Lk9ORTt2YXIgcj1GKCksbj1GKCksaT1lLmNvbnZlcnQodGhpcyksbz1EKHQpLTE7Zm9yKGkuY29weVRvKHIpOy0tbz49MDspaWYoZS5zcXJUbyhyLG4pLCh0JjE8PG8pPjApZS5tdWxUbyhuLGkscik7ZWxzZXt2YXIgcz1yO3I9bixuPXN9cmV0dXJuIGUucmV2ZXJ0KHIpfSx3LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbiB2dCh0KXtpZih0aGlzLnM8MClyZXR1cm5cIi1cIit0aGlzLm5lZ2F0ZSgpLnRvU3RyaW5nKHQpO3ZhciBlO2lmKDE2PT10KWU9NDtlbHNlIGlmKDg9PXQpZT0zO2Vsc2UgaWYoMj09dCllPTE7ZWxzZSBpZigzMj09dCllPTU7ZWxzZXtpZig0IT10KXJldHVybiB0aGlzLnRvUmFkaXgodCk7ZT0yfXZhciByLG49KDE8PGUpLTEsaT0hMSxvPVwiXCIscz10aGlzLnQsYT10aGlzLkRCLXMqdGhpcy5EQiVlO2lmKHMtLSA+MClmb3IoYTx0aGlzLkRCJiYocj10aGlzW3NdPj5hKT4wJiYoaT0hMCxvPVQocikpO3M+PTA7KWE8ZT8ocj0odGhpc1tzXSYoMTw8YSktMSk8PGUtYSxyfD10aGlzWy0tc10+PihhKz10aGlzLkRCLWUpKToocj10aGlzW3NdPj4oYS09ZSkmbixhPD0wJiYoYSs9dGhpcy5EQiwtLXMpKSxyPjAmJihpPSEwKSxpJiYobys9VChyKSk7cmV0dXJuIGk/bzpcIjBcIn0sdy5wcm90b3R5cGUubmVnYXRlPWZ1bmN0aW9uIHl0KCl7dmFyIHQ9RigpO3JldHVybiB3LlpFUk8uc3ViVG8odGhpcyx0KSx0fSx3LnByb3RvdHlwZS5hYnM9ZnVuY3Rpb24gbXQoKXtyZXR1cm4gdGhpcy5zPDA/dGhpcy5uZWdhdGUoKTp0aGlzfSx3LnByb3RvdHlwZS5jb21wYXJlVG89ZnVuY3Rpb24gX3QodCl7dmFyIGU9dGhpcy5zLXQucztpZigwIT1lKXJldHVybiBlO3ZhciByPXRoaXMudDtpZigwIT0oZT1yLXQudCkpcmV0dXJuIHRoaXMuczwwPy1lOmU7Zm9yKDstLXI+PTA7KWlmKDAhPShlPXRoaXNbcl0tdFtyXSkpcmV0dXJuIGU7cmV0dXJuIDB9LHcucHJvdG90eXBlLmJpdExlbmd0aD1mdW5jdGlvbiBTdCgpe3JldHVybiB0aGlzLnQ8PTA/MDp0aGlzLkRCKih0aGlzLnQtMSkrRCh0aGlzW3RoaXMudC0xXV50aGlzLnMmdGhpcy5ETSl9LHcucHJvdG90eXBlLm1vZD1mdW5jdGlvbiBidCh0KXt2YXIgZT1GKCk7cmV0dXJuIHRoaXMuYWJzKCkuZGl2UmVtVG8odCxudWxsLGUpLHRoaXMuczwwJiZlLmNvbXBhcmVUbyh3LlpFUk8pPjAmJnQuc3ViVG8oZSxlKSxlfSx3LnByb3RvdHlwZS5tb2RQb3dJbnQ9ZnVuY3Rpb24gd3QodCxlKXt2YXIgcjtyZXR1cm4gcj10PDI1Nnx8ZS5pc0V2ZW4oKT9uZXcgTChlKTpuZXcgTihlKSx0aGlzLmV4cCh0LHIpfSx3LlpFUk89SSgwKSx3Lk9ORT1JKDEpLFYucHJvdG90eXBlLmNvbnZlcnQ9SyxWLnByb3RvdHlwZS5yZXZlcnQ9SyxWLnByb3RvdHlwZS5tdWxUbz1mdW5jdGlvbiBGdCh0LGUscil7dC5tdWx0aXBseVRvKGUscil9LFYucHJvdG90eXBlLnNxclRvPWZ1bmN0aW9uIEV0KHQsZSl7dC5zcXVhcmVUbyhlKX0scS5wcm90b3R5cGUuY29udmVydD1mdW5jdGlvbiB4dCh0KXtpZih0LnM8MHx8dC50PjIqdGhpcy5tLnQpcmV0dXJuIHQubW9kKHRoaXMubSk7aWYodC5jb21wYXJlVG8odGhpcy5tKTwwKXJldHVybiB0O3ZhciBlPUYoKTtyZXR1cm4gdC5jb3B5VG8oZSksdGhpcy5yZWR1Y2UoZSksZX0scS5wcm90b3R5cGUucmV2ZXJ0PWZ1bmN0aW9uIEF0KHQpe3JldHVybiB0fSxxLnByb3RvdHlwZS5yZWR1Y2U9ZnVuY3Rpb24ga3QodCl7Zm9yKHQuZHJTaGlmdFRvKHRoaXMubS50LTEsdGhpcy5yMiksdC50PnRoaXMubS50KzEmJih0LnQ9dGhpcy5tLnQrMSx0LmNsYW1wKCkpLHRoaXMubXUubXVsdGlwbHlVcHBlclRvKHRoaXMucjIsdGhpcy5tLnQrMSx0aGlzLnEzKSx0aGlzLm0ubXVsdGlwbHlMb3dlclRvKHRoaXMucTMsdGhpcy5tLnQrMSx0aGlzLnIyKTt0LmNvbXBhcmVUbyh0aGlzLnIyKTwwOyl0LmRBZGRPZmZzZXQoMSx0aGlzLm0udCsxKTtmb3IodC5zdWJUbyh0aGlzLnIyLHQpO3QuY29tcGFyZVRvKHRoaXMubSk+PTA7KXQuc3ViVG8odGhpcy5tLHQpfSxxLnByb3RvdHlwZS5tdWxUbz1mdW5jdGlvbiBQdCh0LGUscil7dC5tdWx0aXBseVRvKGUsciksdGhpcy5yZWR1Y2Uocil9LHEucHJvdG90eXBlLnNxclRvPWZ1bmN0aW9uIEN0KHQsZSl7dC5zcXVhcmVUbyhlKSx0aGlzLnJlZHVjZShlKX07dmFyIFR0PVsyLDMsNSw3LDExLDEzLDE3LDE5LDIzLDI5LDMxLDM3LDQxLDQzLDQ3LDUzLDU5LDYxLDY3LDcxLDczLDc5LDgzLDg5LDk3LDEwMSwxMDMsMTA3LDEwOSwxMTMsMTI3LDEzMSwxMzcsMTM5LDE0OSwxNTEsMTU3LDE2MywxNjcsMTczLDE3OSwxODEsMTkxLDE5MywxOTcsMTk5LDIxMSwyMjMsMjI3LDIyOSwyMzMsMjM5LDI0MSwyNTEsMjU3LDI2MywyNjksMjcxLDI3NywyODEsMjgzLDI5MywzMDcsMzExLDMxMywzMTcsMzMxLDMzNywzNDcsMzQ5LDM1MywzNTksMzY3LDM3MywzNzksMzgzLDM4OSwzOTcsNDAxLDQwOSw0MTksNDIxLDQzMSw0MzMsNDM5LDQ0Myw0NDksNDU3LDQ2MSw0NjMsNDY3LDQ3OSw0ODcsNDkxLDQ5OSw1MDMsNTA5LDUyMSw1MjMsNTQxLDU0Nyw1NTcsNTYzLDU2OSw1NzEsNTc3LDU4Nyw1OTMsNTk5LDYwMSw2MDcsNjEzLDYxNyw2MTksNjMxLDY0MSw2NDMsNjQ3LDY1Myw2NTksNjYxLDY3Myw2NzcsNjgzLDY5MSw3MDEsNzA5LDcxOSw3MjcsNzMzLDczOSw3NDMsNzUxLDc1Nyw3NjEsNzY5LDc3Myw3ODcsNzk3LDgwOSw4MTEsODIxLDgyMyw4MjcsODI5LDgzOSw4NTMsODU3LDg1OSw4NjMsODc3LDg4MSw4ODMsODg3LDkwNyw5MTEsOTE5LDkyOSw5MzcsOTQxLDk0Nyw5NTMsOTY3LDk3MSw5NzcsOTgzLDk5MSw5OTddLFJ0PSgxPDwyNikvVHRbVHQubGVuZ3RoLTFdO1xuLyohIChjKSBUb20gV3UgfCBodHRwOi8vd3d3LWNzLXN0dWRlbnRzLnN0YW5mb3JkLmVkdS9+dGp3L2pzYm4vXG4gKi9cbmZ1bmN0aW9uIEl0KCl7dGhpcy5pPTAsdGhpcy5qPTAsdGhpcy5TPW5ldyBBcnJheX13LnByb3RvdHlwZS5jaHVua1NpemU9ZnVuY3Rpb24gRHQodCl7cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5MTjIqdGhpcy5EQi9NYXRoLmxvZyh0KSl9LHcucHJvdG90eXBlLnRvUmFkaXg9ZnVuY3Rpb24gTHQodCl7aWYobnVsbD09dCYmKHQ9MTApLDA9PXRoaXMuc2lnbnVtKCl8fHQ8Mnx8dD4zNilyZXR1cm5cIjBcIjt2YXIgZT10aGlzLmNodW5rU2l6ZSh0KSxyPU1hdGgucG93KHQsZSksbj1JKHIpLGk9RigpLG89RigpLHM9XCJcIjtmb3IodGhpcy5kaXZSZW1UbyhuLGksbyk7aS5zaWdudW0oKT4wOylzPShyK28uaW50VmFsdWUoKSkudG9TdHJpbmcodCkuc3Vic3RyKDEpK3MsaS5kaXZSZW1UbyhuLGksbyk7cmV0dXJuIG8uaW50VmFsdWUoKS50b1N0cmluZyh0KStzfSx3LnByb3RvdHlwZS5mcm9tUmFkaXg9ZnVuY3Rpb24gTnQodCxlKXt0aGlzLmZyb21JbnQoMCksbnVsbD09ZSYmKGU9MTApO2Zvcih2YXIgcj10aGlzLmNodW5rU2l6ZShlKSxuPU1hdGgucG93KGUsciksaT0hMSxvPTAscz0wLGE9MDthPHQubGVuZ3RoOysrYSl7dmFyIHU9Uih0LGEpO3U8MD9cIi1cIj09dC5jaGFyQXQoYSkmJjA9PXRoaXMuc2lnbnVtKCkmJihpPSEwKToocz1lKnMrdSwrK28+PXImJih0aGlzLmRNdWx0aXBseShuKSx0aGlzLmRBZGRPZmZzZXQocywwKSxvPTAscz0wKSl9bz4wJiYodGhpcy5kTXVsdGlwbHkoTWF0aC5wb3coZSxvKSksdGhpcy5kQWRkT2Zmc2V0KHMsMCkpLGkmJncuWkVSTy5zdWJUbyh0aGlzLHRoaXMpfSx3LnByb3RvdHlwZS5mcm9tTnVtYmVyPWZ1bmN0aW9uIFV0KHQsZSxyKXtpZihcIm51bWJlclwiPT10eXBlb2YgZSlpZih0PDIpdGhpcy5mcm9tSW50KDEpO2Vsc2UgZm9yKHRoaXMuZnJvbU51bWJlcih0LHIpLHRoaXMudGVzdEJpdCh0LTEpfHx0aGlzLmJpdHdpc2VUbyh3Lk9ORS5zaGlmdExlZnQodC0xKSxCLHRoaXMpLHRoaXMuaXNFdmVuKCkmJnRoaXMuZEFkZE9mZnNldCgxLDApOyF0aGlzLmlzUHJvYmFibGVQcmltZShlKTspdGhpcy5kQWRkT2Zmc2V0KDIsMCksdGhpcy5iaXRMZW5ndGgoKT50JiZ0aGlzLnN1YlRvKHcuT05FLnNoaWZ0TGVmdCh0LTEpLHRoaXMpO2Vsc2V7dmFyIG49bmV3IEFycmF5LGk9NyZ0O24ubGVuZ3RoPTErKHQ+PjMpLGUubmV4dEJ5dGVzKG4pLGk+MD9uWzBdJj0oMTw8aSktMTpuWzBdPTAsdGhpcy5mcm9tU3RyaW5nKG4sMjU2KX19LHcucHJvdG90eXBlLmJpdHdpc2VUbz1mdW5jdGlvbiBCdCh0LGUscil7dmFyIG4saSxvPU1hdGgubWluKHQudCx0aGlzLnQpO2ZvcihuPTA7bjxvOysrbilyW25dPWUodGhpc1tuXSx0W25dKTtpZih0LnQ8dGhpcy50KXtmb3IoaT10LnMmdGhpcy5ETSxuPW87bjx0aGlzLnQ7KytuKXJbbl09ZSh0aGlzW25dLGkpO3IudD10aGlzLnR9ZWxzZXtmb3IoaT10aGlzLnMmdGhpcy5ETSxuPW87bjx0LnQ7KytuKXJbbl09ZShpLHRbbl0pO3IudD10LnR9ci5zPWUodGhpcy5zLHQucyksci5jbGFtcCgpfSx3LnByb3RvdHlwZS5jaGFuZ2VCaXQ9ZnVuY3Rpb24gT3QodCxlKXt2YXIgcj13Lk9ORS5zaGlmdExlZnQodCk7cmV0dXJuIHRoaXMuYml0d2lzZVRvKHIsZSxyKSxyfSx3LnByb3RvdHlwZS5hZGRUbz1mdW5jdGlvbiBqdCh0LGUpe2Zvcih2YXIgcj0wLG49MCxpPU1hdGgubWluKHQudCx0aGlzLnQpO3I8aTspbis9dGhpc1tyXSt0W3JdLGVbcisrXT1uJnRoaXMuRE0sbj4+PXRoaXMuREI7aWYodC50PHRoaXMudCl7Zm9yKG4rPXQucztyPHRoaXMudDspbis9dGhpc1tyXSxlW3IrK109biZ0aGlzLkRNLG4+Pj10aGlzLkRCO24rPXRoaXMuc31lbHNle2ZvcihuKz10aGlzLnM7cjx0LnQ7KW4rPXRbcl0sZVtyKytdPW4mdGhpcy5ETSxuPj49dGhpcy5EQjtuKz10LnN9ZS5zPW48MD8tMTowLG4+MD9lW3IrK109bjpuPC0xJiYoZVtyKytdPXRoaXMuRFYrbiksZS50PXIsZS5jbGFtcCgpfSx3LnByb3RvdHlwZS5kTXVsdGlwbHk9ZnVuY3Rpb24gTXQodCl7dGhpc1t0aGlzLnRdPXRoaXMuYW0oMCx0LTEsdGhpcywwLDAsdGhpcy50KSwrK3RoaXMudCx0aGlzLmNsYW1wKCl9LHcucHJvdG90eXBlLmRBZGRPZmZzZXQ9ZnVuY3Rpb24gSHQodCxlKXtpZigwIT10KXtmb3IoO3RoaXMudDw9ZTspdGhpc1t0aGlzLnQrK109MDtmb3IodGhpc1tlXSs9dDt0aGlzW2VdPj10aGlzLkRWOyl0aGlzW2VdLT10aGlzLkRWLCsrZT49dGhpcy50JiYodGhpc1t0aGlzLnQrK109MCksKyt0aGlzW2VdfX0sdy5wcm90b3R5cGUubXVsdGlwbHlMb3dlclRvPWZ1bmN0aW9uIFZ0KHQsZSxyKXt2YXIgbixpPU1hdGgubWluKHRoaXMudCt0LnQsZSk7Zm9yKHIucz0wLHIudD1pO2k+MDspclstLWldPTA7Zm9yKG49ci50LXRoaXMudDtpPG47KytpKXJbaSt0aGlzLnRdPXRoaXMuYW0oMCx0W2ldLHIsaSwwLHRoaXMudCk7Zm9yKG49TWF0aC5taW4odC50LGUpO2k8bjsrK2kpdGhpcy5hbSgwLHRbaV0scixpLDAsZS1pKTtyLmNsYW1wKCl9LHcucHJvdG90eXBlLm11bHRpcGx5VXBwZXJUbz1mdW5jdGlvbiBLdCh0LGUscil7LS1lO3ZhciBuPXIudD10aGlzLnQrdC50LWU7Zm9yKHIucz0wOy0tbj49MDspcltuXT0wO2ZvcihuPU1hdGgubWF4KGUtdGhpcy50LDApO248dC50OysrbilyW3RoaXMudCtuLWVdPXRoaXMuYW0oZS1uLHRbbl0sciwwLDAsdGhpcy50K24tZSk7ci5jbGFtcCgpLHIuZHJTaGlmdFRvKDEscil9LHcucHJvdG90eXBlLm1vZEludD1mdW5jdGlvbiBxdCh0KXtpZih0PD0wKXJldHVybiAwO3ZhciBlPXRoaXMuRFYldCxyPXRoaXMuczwwP3QtMTowO2lmKHRoaXMudD4wKWlmKDA9PWUpcj10aGlzWzBdJXQ7ZWxzZSBmb3IodmFyIG49dGhpcy50LTE7bj49MDstLW4pcj0oZSpyK3RoaXNbbl0pJXQ7cmV0dXJuIHJ9LHcucHJvdG90eXBlLm1pbGxlclJhYmluPWZ1bmN0aW9uIEp0KHQpe3ZhciBlPXRoaXMuc3VidHJhY3Qody5PTkUpLHI9ZS5nZXRMb3dlc3RTZXRCaXQoKTtpZihyPD0wKXJldHVybiExO3ZhciBuPWUuc2hpZnRSaWdodChyKTsodD10KzE+PjEpPlR0Lmxlbmd0aCYmKHQ9VHQubGVuZ3RoKTtmb3IodmFyIGk9RigpLG89MDtvPHQ7KytvKXtpLmZyb21JbnQoVHRbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKlR0Lmxlbmd0aCldKTt2YXIgcz1pLm1vZFBvdyhuLHRoaXMpO2lmKDAhPXMuY29tcGFyZVRvKHcuT05FKSYmMCE9cy5jb21wYXJlVG8oZSkpe2Zvcih2YXIgYT0xO2ErKzxyJiYwIT1zLmNvbXBhcmVUbyhlKTspaWYoMD09KHM9cy5tb2RQb3dJbnQoMix0aGlzKSkuY29tcGFyZVRvKHcuT05FKSlyZXR1cm4hMTtpZigwIT1zLmNvbXBhcmVUbyhlKSlyZXR1cm4hMX19cmV0dXJuITB9LHcucHJvdG90eXBlLmNsb25lPVxuLyohIChjKSBUb20gV3UgfCBodHRwOi8vd3d3LWNzLXN0dWRlbnRzLnN0YW5mb3JkLmVkdS9+dGp3L2pzYm4vXG4gKi9cbmZ1bmN0aW9uIFd0KCl7dmFyIHQ9RigpO3JldHVybiB0aGlzLmNvcHlUbyh0KSx0fSx3LnByb3RvdHlwZS5pbnRWYWx1ZT1mdW5jdGlvbiB6dCgpe2lmKHRoaXMuczwwKXtpZigxPT10aGlzLnQpcmV0dXJuIHRoaXNbMF0tdGhpcy5EVjtpZigwPT10aGlzLnQpcmV0dXJuLTF9ZWxzZXtpZigxPT10aGlzLnQpcmV0dXJuIHRoaXNbMF07aWYoMD09dGhpcy50KXJldHVybiAwfXJldHVybih0aGlzWzFdJigxPDwzMi10aGlzLkRCKS0xKTw8dGhpcy5EQnx0aGlzWzBdfSx3LnByb3RvdHlwZS5ieXRlVmFsdWU9ZnVuY3Rpb24gWXQoKXtyZXR1cm4gMD09dGhpcy50P3RoaXMuczp0aGlzWzBdPDwyND4+MjR9LHcucHJvdG90eXBlLnNob3J0VmFsdWU9ZnVuY3Rpb24gR3QoKXtyZXR1cm4gMD09dGhpcy50P3RoaXMuczp0aGlzWzBdPDwxNj4+MTZ9LHcucHJvdG90eXBlLnNpZ251bT1mdW5jdGlvbiBYdCgpe3JldHVybiB0aGlzLnM8MD8tMTp0aGlzLnQ8PTB8fDE9PXRoaXMudCYmdGhpc1swXTw9MD8wOjF9LHcucHJvdG90eXBlLnRvQnl0ZUFycmF5PWZ1bmN0aW9uICR0KCl7dmFyIHQ9dGhpcy50LGU9bmV3IEFycmF5O2VbMF09dGhpcy5zO3ZhciByLG49dGhpcy5EQi10KnRoaXMuREIlOCxpPTA7aWYodC0tID4wKWZvcihuPHRoaXMuREImJihyPXRoaXNbdF0+Pm4pIT0odGhpcy5zJnRoaXMuRE0pPj5uJiYoZVtpKytdPXJ8dGhpcy5zPDx0aGlzLkRCLW4pO3Q+PTA7KW48OD8ocj0odGhpc1t0XSYoMTw8biktMSk8PDgtbixyfD10aGlzWy0tdF0+PihuKz10aGlzLkRCLTgpKToocj10aGlzW3RdPj4obi09OCkmMjU1LG48PTAmJihuKz10aGlzLkRCLC0tdCkpLDAhPSgxMjgmcikmJihyfD0tMjU2KSwwPT1pJiYoMTI4JnRoaXMucykhPSgxMjgmcikmJisraSwoaT4wfHxyIT10aGlzLnMpJiYoZVtpKytdPXIpO3JldHVybiBlfSx3LnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24gUXQodCl7cmV0dXJuIDA9PXRoaXMuY29tcGFyZVRvKHQpfSx3LnByb3RvdHlwZS5taW49ZnVuY3Rpb24gWnQodCl7cmV0dXJuIHRoaXMuY29tcGFyZVRvKHQpPDA/dGhpczp0fSx3LnByb3RvdHlwZS5tYXg9ZnVuY3Rpb24gdGUodCl7cmV0dXJuIHRoaXMuY29tcGFyZVRvKHQpPjA/dGhpczp0fSx3LnByb3RvdHlwZS5hbmQ9ZnVuY3Rpb24gZWUodCl7dmFyIGU9RigpO3JldHVybiB0aGlzLmJpdHdpc2VUbyh0LFUsZSksZX0sdy5wcm90b3R5cGUub3I9ZnVuY3Rpb24gcmUodCl7dmFyIGU9RigpO3JldHVybiB0aGlzLmJpdHdpc2VUbyh0LEIsZSksZX0sdy5wcm90b3R5cGUueG9yPWZ1bmN0aW9uIG5lKHQpe3ZhciBlPUYoKTtyZXR1cm4gdGhpcy5iaXR3aXNlVG8odCxPLGUpLGV9LHcucHJvdG90eXBlLmFuZE5vdD1mdW5jdGlvbiBpZSh0KXt2YXIgZT1GKCk7cmV0dXJuIHRoaXMuYml0d2lzZVRvKHQsaixlKSxlfSx3LnByb3RvdHlwZS5ub3Q9ZnVuY3Rpb24gb2UoKXtmb3IodmFyIHQ9RigpLGU9MDtlPHRoaXMudDsrK2UpdFtlXT10aGlzLkRNJn50aGlzW2VdO3JldHVybiB0LnQ9dGhpcy50LHQucz1+dGhpcy5zLHR9LHcucHJvdG90eXBlLnNoaWZ0TGVmdD1mdW5jdGlvbiBzZSh0KXt2YXIgZT1GKCk7cmV0dXJuIHQ8MD90aGlzLnJTaGlmdFRvKC10LGUpOnRoaXMubFNoaWZ0VG8odCxlKSxlfSx3LnByb3RvdHlwZS5zaGlmdFJpZ2h0PWZ1bmN0aW9uIGFlKHQpe3ZhciBlPUYoKTtyZXR1cm4gdDwwP3RoaXMubFNoaWZ0VG8oLXQsZSk6dGhpcy5yU2hpZnRUbyh0LGUpLGV9LHcucHJvdG90eXBlLmdldExvd2VzdFNldEJpdD1mdW5jdGlvbiB1ZSgpe2Zvcih2YXIgdD0wO3Q8dGhpcy50OysrdClpZigwIT10aGlzW3RdKXJldHVybiB0KnRoaXMuREIrTSh0aGlzW3RdKTtyZXR1cm4gdGhpcy5zPDA/dGhpcy50KnRoaXMuREI6LTF9LHcucHJvdG90eXBlLmJpdENvdW50PWZ1bmN0aW9uIGNlKCl7Zm9yKHZhciB0PTAsZT10aGlzLnMmdGhpcy5ETSxyPTA7cjx0aGlzLnQ7KytyKXQrPUgodGhpc1tyXV5lKTtyZXR1cm4gdH0sdy5wcm90b3R5cGUudGVzdEJpdD1mdW5jdGlvbiBoZSh0KXt2YXIgZT1NYXRoLmZsb29yKHQvdGhpcy5EQik7cmV0dXJuIGU+PXRoaXMudD8wIT10aGlzLnM6MCE9KHRoaXNbZV0mMTw8dCV0aGlzLkRCKX0sdy5wcm90b3R5cGUuc2V0Qml0PWZ1bmN0aW9uIGxlKHQpe3JldHVybiB0aGlzLmNoYW5nZUJpdCh0LEIpfSx3LnByb3RvdHlwZS5jbGVhckJpdD1mdW5jdGlvbiBmZSh0KXtyZXR1cm4gdGhpcy5jaGFuZ2VCaXQodCxqKX0sdy5wcm90b3R5cGUuZmxpcEJpdD1mdW5jdGlvbiBnZSh0KXtyZXR1cm4gdGhpcy5jaGFuZ2VCaXQodCxPKX0sdy5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uIGRlKHQpe3ZhciBlPUYoKTtyZXR1cm4gdGhpcy5hZGRUbyh0LGUpLGV9LHcucHJvdG90eXBlLnN1YnRyYWN0PWZ1bmN0aW9uIHBlKHQpe3ZhciBlPUYoKTtyZXR1cm4gdGhpcy5zdWJUbyh0LGUpLGV9LHcucHJvdG90eXBlLm11bHRpcGx5PWZ1bmN0aW9uIHZlKHQpe3ZhciBlPUYoKTtyZXR1cm4gdGhpcy5tdWx0aXBseVRvKHQsZSksZX0sdy5wcm90b3R5cGUuZGl2aWRlPWZ1bmN0aW9uIHllKHQpe3ZhciBlPUYoKTtyZXR1cm4gdGhpcy5kaXZSZW1Ubyh0LGUsbnVsbCksZX0sdy5wcm90b3R5cGUucmVtYWluZGVyPWZ1bmN0aW9uIG1lKHQpe3ZhciBlPUYoKTtyZXR1cm4gdGhpcy5kaXZSZW1Ubyh0LG51bGwsZSksZX0sdy5wcm90b3R5cGUuZGl2aWRlQW5kUmVtYWluZGVyPWZ1bmN0aW9uIF9lKHQpe3ZhciBlPUYoKSxyPUYoKTtyZXR1cm4gdGhpcy5kaXZSZW1Ubyh0LGUsciksbmV3IEFycmF5KGUscil9LHcucHJvdG90eXBlLm1vZFBvdz1mdW5jdGlvbiBTZSh0LGUpe3ZhciByLG4saT10LmJpdExlbmd0aCgpLG89SSgxKTtpZihpPD0wKXJldHVybiBvO3I9aTwxOD8xOmk8NDg/MzppPDE0ND80Omk8NzY4PzU6NixuPWk8OD9uZXcgTChlKTplLmlzRXZlbigpP25ldyBxKGUpOm5ldyBOKGUpO3ZhciBzPW5ldyBBcnJheSxhPTMsdT1yLTEsYz0oMTw8ciktMTtpZihzWzFdPW4uY29udmVydCh0aGlzKSxyPjEpe3ZhciBoPUYoKTtmb3Iobi5zcXJUbyhzWzFdLGgpO2E8PWM7KXNbYV09RigpLG4ubXVsVG8oaCxzW2EtMl0sc1thXSksYSs9Mn12YXIgbCxmLGc9dC50LTEsZD0hMCxwPUYoKTtmb3IoaT1EKHRbZ10pLTE7Zz49MDspe2ZvcihpPj11P2w9dFtnXT4+aS11JmM6KGw9KHRbZ10mKDE8PGkrMSktMSk8PHUtaSxnPjAmJihsfD10W2ctMV0+PnRoaXMuREIraS11KSksYT1yOzA9PSgxJmwpOylsPj49MSwtLWE7aWYoKGktPWEpPDAmJihpKz10aGlzLkRCLC0tZyksZClzW2xdLmNvcHlUbyhvKSxkPSExO2Vsc2V7Zm9yKDthPjE7KW4uc3FyVG8obyxwKSxuLnNxclRvKHAsbyksYS09MjthPjA/bi5zcXJUbyhvLHApOihmPW8sbz1wLHA9Ziksbi5tdWxUbyhwLHNbbF0sbyl9Zm9yKDtnPj0wJiYwPT0odFtnXSYxPDxpKTspbi5zcXJUbyhvLHApLGY9byxvPXAscD1mLC0taTwwJiYoaT10aGlzLkRCLTEsLS1nKX1yZXR1cm4gbi5yZXZlcnQobyl9LHcucHJvdG90eXBlLm1vZEludmVyc2U9ZnVuY3Rpb24gYmUodCl7dmFyIGU9dC5pc0V2ZW4oKTtpZih0aGlzLmlzRXZlbigpJiZlfHwwPT10LnNpZ251bSgpKXJldHVybiB3LlpFUk87Zm9yKHZhciByPXQuY2xvbmUoKSxuPXRoaXMuY2xvbmUoKSxpPUkoMSksbz1JKDApLHM9SSgwKSxhPUkoMSk7MCE9ci5zaWdudW0oKTspe2Zvcig7ci5pc0V2ZW4oKTspci5yU2hpZnRUbygxLHIpLGU/KGkuaXNFdmVuKCkmJm8uaXNFdmVuKCl8fChpLmFkZFRvKHRoaXMsaSksby5zdWJUbyh0LG8pKSxpLnJTaGlmdFRvKDEsaSkpOm8uaXNFdmVuKCl8fG8uc3ViVG8odCxvKSxvLnJTaGlmdFRvKDEsbyk7Zm9yKDtuLmlzRXZlbigpOyluLnJTaGlmdFRvKDEsbiksZT8ocy5pc0V2ZW4oKSYmYS5pc0V2ZW4oKXx8KHMuYWRkVG8odGhpcyxzKSxhLnN1YlRvKHQsYSkpLHMuclNoaWZ0VG8oMSxzKSk6YS5pc0V2ZW4oKXx8YS5zdWJUbyh0LGEpLGEuclNoaWZ0VG8oMSxhKTtyLmNvbXBhcmVUbyhuKT49MD8oci5zdWJUbyhuLHIpLGUmJmkuc3ViVG8ocyxpKSxvLnN1YlRvKGEsbykpOihuLnN1YlRvKHIsbiksZSYmcy5zdWJUbyhpLHMpLGEuc3ViVG8obyxhKSl9cmV0dXJuIDAhPW4uY29tcGFyZVRvKHcuT05FKT93LlpFUk86YS5jb21wYXJlVG8odCk+PTA/YS5zdWJ0cmFjdCh0KTphLnNpZ251bSgpPDA/KGEuYWRkVG8odCxhKSxhLnNpZ251bSgpPDA/YS5hZGQodCk6YSk6YX0sdy5wcm90b3R5cGUucG93PWZ1bmN0aW9uIHdlKHQpe3JldHVybiB0aGlzLmV4cCh0LG5ldyBWKX0sdy5wcm90b3R5cGUuZ2NkPWZ1bmN0aW9uIEZlKHQpe3ZhciBlPXRoaXMuczwwP3RoaXMubmVnYXRlKCk6dGhpcy5jbG9uZSgpLHI9dC5zPDA/dC5uZWdhdGUoKTp0LmNsb25lKCk7aWYoZS5jb21wYXJlVG8ocik8MCl7dmFyIG49ZTtlPXIscj1ufXZhciBpPWUuZ2V0TG93ZXN0U2V0Qml0KCksbz1yLmdldExvd2VzdFNldEJpdCgpO2lmKG88MClyZXR1cm4gZTtmb3IoaTxvJiYobz1pKSxvPjAmJihlLnJTaGlmdFRvKG8sZSksci5yU2hpZnRUbyhvLHIpKTtlLnNpZ251bSgpPjA7KShpPWUuZ2V0TG93ZXN0U2V0Qml0KCkpPjAmJmUuclNoaWZ0VG8oaSxlKSwoaT1yLmdldExvd2VzdFNldEJpdCgpKT4wJiZyLnJTaGlmdFRvKGksciksZS5jb21wYXJlVG8ocik+PTA/KGUuc3ViVG8ocixlKSxlLnJTaGlmdFRvKDEsZSkpOihyLnN1YlRvKGUsciksci5yU2hpZnRUbygxLHIpKTtyZXR1cm4gbz4wJiZyLmxTaGlmdFRvKG8scikscn0sdy5wcm90b3R5cGUuaXNQcm9iYWJsZVByaW1lPWZ1bmN0aW9uIEVlKHQpe3ZhciBlLHI9dGhpcy5hYnMoKTtpZigxPT1yLnQmJnJbMF08PVR0W1R0Lmxlbmd0aC0xXSl7Zm9yKGU9MDtlPFR0Lmxlbmd0aDsrK2UpaWYoclswXT09VHRbZV0pcmV0dXJuITA7cmV0dXJuITF9aWYoci5pc0V2ZW4oKSlyZXR1cm4hMTtmb3IoZT0xO2U8VHQubGVuZ3RoOyl7Zm9yKHZhciBuPVR0W2VdLGk9ZSsxO2k8VHQubGVuZ3RoJiZuPFJ0OyluKj1UdFtpKytdO2ZvcihuPXIubW9kSW50KG4pO2U8aTspaWYobiVUdFtlKytdPT0wKXJldHVybiExfXJldHVybiByLm1pbGxlclJhYmluKHQpfSx3LnByb3RvdHlwZS5zcXVhcmU9ZnVuY3Rpb24geGUoKXt2YXIgdD1GKCk7cmV0dXJuIHRoaXMuc3F1YXJlVG8odCksdH0sSXQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24gQWUodCl7dmFyIGUscixuO2ZvcihlPTA7ZTwyNTY7KytlKXRoaXMuU1tlXT1lO2ZvcihyPTAsZT0wO2U8MjU2OysrZSlyPXIrdGhpcy5TW2VdK3RbZSV0Lmxlbmd0aF0mMjU1LG49dGhpcy5TW2VdLHRoaXMuU1tlXT10aGlzLlNbcl0sdGhpcy5TW3JdPW47dGhpcy5pPTAsdGhpcy5qPTB9LEl0LnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uIGtlKCl7dmFyIHQ7cmV0dXJuIHRoaXMuaT10aGlzLmkrMSYyNTUsdGhpcy5qPXRoaXMuait0aGlzLlNbdGhpcy5pXSYyNTUsdD10aGlzLlNbdGhpcy5pXSx0aGlzLlNbdGhpcy5pXT10aGlzLlNbdGhpcy5qXSx0aGlzLlNbdGhpcy5qXT10LHRoaXMuU1t0K3RoaXMuU1t0aGlzLmldJjI1NV19O3ZhciBQZSxDZSxUZTtcbi8qISAoYykgVG9tIFd1IHwgaHR0cDovL3d3dy1jcy1zdHVkZW50cy5zdGFuZm9yZC5lZHUvfnRqdy9qc2JuL1xuICovZnVuY3Rpb24gUmUoKXshZnVuY3Rpb24gdChlKXtDZVtUZSsrXV49MjU1JmUsQ2VbVGUrK11ePWU+PjgmMjU1LENlW1RlKytdXj1lPj4xNiYyNTUsQ2VbVGUrK11ePWU+PjI0JjI1NSxUZT49MjU2JiYoVGUtPTI1Nil9KChuZXcgRGF0ZSkuZ2V0VGltZSgpKX1pZihudWxsPT1DZSl7dmFyIEllO2lmKENlPW5ldyBBcnJheSxUZT0wLHZvaWQgMCE9PXAmJih2b2lkIDAhPT1wLmNyeXB0b3x8dm9pZCAwIT09cC5tc0NyeXB0bykpe3ZhciBEZT1wLmNyeXB0b3x8cC5tc0NyeXB0bztpZihEZS5nZXRSYW5kb21WYWx1ZXMpe3ZhciBMZT1uZXcgVWludDhBcnJheSgzMik7Zm9yKERlLmdldFJhbmRvbVZhbHVlcyhMZSksSWU9MDtJZTwzMjsrK0llKUNlW1RlKytdPUxlW0llXX1lbHNlIGlmKFwiTmV0c2NhcGVcIj09ZC5hcHBOYW1lJiZkLmFwcFZlcnNpb248XCI1XCIpe3ZhciBOZT1wLmNyeXB0by5yYW5kb20oMzIpO2ZvcihJZT0wO0llPE5lLmxlbmd0aDsrK0llKUNlW1RlKytdPTI1NSZOZS5jaGFyQ29kZUF0KEllKX19Zm9yKDtUZTwyNTY7KUllPU1hdGguZmxvb3IoNjU1MzYqTWF0aC5yYW5kb20oKSksQ2VbVGUrK109SWU+Pj44LENlW1RlKytdPTI1NSZJZTtUZT0wLFJlKCl9ZnVuY3Rpb24gVWUoKXtpZihudWxsPT1QZSl7Zm9yKFJlKCksKFBlPWZ1bmN0aW9uIHQoKXtyZXR1cm4gbmV3IEl0fSgpKS5pbml0KENlKSxUZT0wO1RlPENlLmxlbmd0aDsrK1RlKUNlW1RlXT0wO1RlPTB9cmV0dXJuIFBlLm5leHQoKX1mdW5jdGlvbiBCZSgpe31cbi8qISAoYykgVG9tIFd1IHwgaHR0cDovL3d3dy1jcy1zdHVkZW50cy5zdGFuZm9yZC5lZHUvfnRqdy9qc2JuL1xuICovXG5mdW5jdGlvbiBPZSh0LGUpe3JldHVybiBuZXcgdyh0LGUpfWZ1bmN0aW9uIGplKHQsZSxyKXtmb3IodmFyIG49XCJcIixpPTA7bi5sZW5ndGg8ZTspbis9cihTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyx0LmNvbmNhdChbKDQyNzgxOTAwODAmaSk+PjI0LCgxNjcxMTY4MCZpKT4+MTYsKDY1MjgwJmkpPj44LDI1NSZpXSkpKSxpKz0xO3JldHVybiBufWZ1bmN0aW9uIE1lKCl7dGhpcy5uPW51bGwsdGhpcy5lPTAsdGhpcy5kPW51bGwsdGhpcy5wPW51bGwsdGhpcy5xPW51bGwsdGhpcy5kbXAxPW51bGwsdGhpcy5kbXExPW51bGwsdGhpcy5jb2VmZj1udWxsfVxuLyohIChjKSBUb20gV3UgfCBodHRwOi8vd3d3LWNzLXN0dWRlbnRzLnN0YW5mb3JkLmVkdS9+dGp3L2pzYm4vXG4gKi9cbmZ1bmN0aW9uIEhlKHQsZSl7dGhpcy54PWUsdGhpcy5xPXR9ZnVuY3Rpb24gVmUodCxlLHIsbil7dGhpcy5jdXJ2ZT10LHRoaXMueD1lLHRoaXMueT1yLHRoaXMuej1udWxsPT1uP3cuT05FOm4sdGhpcy56aW52PW51bGx9ZnVuY3Rpb24gS2UodCxlLHIpe3RoaXMucT10LHRoaXMuYT10aGlzLmZyb21CaWdJbnRlZ2VyKGUpLHRoaXMuYj10aGlzLmZyb21CaWdJbnRlZ2VyKHIpLHRoaXMuaW5maW5pdHk9bmV3IFZlKHRoaXMsbnVsbCxudWxsKX1CZS5wcm90b3R5cGUubmV4dEJ5dGVzPWZ1bmN0aW9uIHFlKHQpe3ZhciBlO2ZvcihlPTA7ZTx0Lmxlbmd0aDsrK2UpdFtlXT1VZSgpfSxNZS5wcm90b3R5cGUuZG9QdWJsaWM9ZnVuY3Rpb24gSmUodCl7cmV0dXJuIHQubW9kUG93SW50KHRoaXMuZSx0aGlzLm4pfSxNZS5wcm90b3R5cGUuc2V0UHVibGljPWZ1bmN0aW9uIFdlKHQsZSl7aWYodGhpcy5pc1B1YmxpYz0hMCx0aGlzLmlzUHJpdmF0ZT0hMSxcInN0cmluZ1wiIT10eXBlb2YgdCl0aGlzLm49dCx0aGlzLmU9ZTtlbHNle2lmKCEobnVsbCE9dCYmbnVsbCE9ZSYmdC5sZW5ndGg+MCYmZS5sZW5ndGg+MCkpdGhyb3dcIkludmFsaWQgUlNBIHB1YmxpYyBrZXlcIjt0aGlzLm49T2UodCwxNiksdGhpcy5lPXBhcnNlSW50KGUsMTYpfX0sTWUucHJvdG90eXBlLmVuY3J5cHQ9ZnVuY3Rpb24gemUodCl7dmFyIGU9ZnVuY3Rpb24gcih0LGUpe2lmKGU8dC5sZW5ndGgrMTEpdGhyb3dcIk1lc3NhZ2UgdG9vIGxvbmcgZm9yIFJTQVwiO2Zvcih2YXIgcj1uZXcgQXJyYXksbj10Lmxlbmd0aC0xO24+PTAmJmU+MDspe3ZhciBpPXQuY2hhckNvZGVBdChuLS0pO2k8MTI4P3JbLS1lXT1pOmk+MTI3JiZpPDIwNDg/KHJbLS1lXT02MyZpfDEyOCxyWy0tZV09aT4+NnwxOTIpOihyWy0tZV09NjMmaXwxMjgsclstLWVdPWk+PjYmNjN8MTI4LHJbLS1lXT1pPj4xMnwyMjQpfXJbLS1lXT0wO2Zvcih2YXIgbz1uZXcgQmUscz1uZXcgQXJyYXk7ZT4yOyl7Zm9yKHNbMF09MDswPT1zWzBdOylvLm5leHRCeXRlcyhzKTtyWy0tZV09c1swXX1yZXR1cm4gclstLWVdPTIsclstLWVdPTAsbmV3IHcocil9KHQsdGhpcy5uLmJpdExlbmd0aCgpKzc+PjMpO2lmKG51bGw9PWUpcmV0dXJuIG51bGw7dmFyIG49dGhpcy5kb1B1YmxpYyhlKTtpZihudWxsPT1uKXJldHVybiBudWxsO3ZhciBpPW4udG9TdHJpbmcoMTYpO3JldHVybiAwPT0oMSZpLmxlbmd0aCk/aTpcIjBcIitpfSxNZS5wcm90b3R5cGUuZW5jcnlwdE9BRVA9ZnVuY3Rpb24gWWUodCxlLHIpe3ZhciBuPWZ1bmN0aW9uIGkodCxlLHIsbil7dmFyIGk9U3IuY3J5cHRvLk1lc3NhZ2VEaWdlc3Qsbz1Tci5jcnlwdG8uVXRpbCxzPW51bGw7aWYocnx8KHI9XCJzaGExXCIpLFwic3RyaW5nXCI9PXR5cGVvZiByJiYocz1pLmdldENhbm9uaWNhbEFsZ05hbWUociksbj1pLmdldEhhc2hMZW5ndGgocykscj1mdW5jdGlvbiB0KGUpe3JldHVybiBMcihvLmhhc2hIZXgoTnIoZSkscykpfSksdC5sZW5ndGgrMipuKzI+ZSl0aHJvd1wiTWVzc2FnZSB0b28gbG9uZyBmb3IgUlNBXCI7dmFyIGEsdT1cIlwiO2ZvcihhPTA7YTxlLXQubGVuZ3RoLTIqbi0yO2ErPTEpdSs9XCJcXDBcIjt2YXIgYz1yKFwiXCIpK3UrXCJcdTAwMDFcIit0LGg9bmV3IEFycmF5KG4pOyhuZXcgQmUpLm5leHRCeXRlcyhoKTt2YXIgbD1qZShoLGMubGVuZ3RoLHIpLGY9W107Zm9yKGE9MDthPGMubGVuZ3RoO2ErPTEpZlthXT1jLmNoYXJDb2RlQXQoYSlebC5jaGFyQ29kZUF0KGEpO3ZhciBnPWplKGYsaC5sZW5ndGgsciksZD1bMF07Zm9yKGE9MDthPGgubGVuZ3RoO2ErPTEpZFthKzFdPWhbYV1eZy5jaGFyQ29kZUF0KGEpO3JldHVybiBuZXcgdyhkLmNvbmNhdChmKSl9KHQsdGhpcy5uLmJpdExlbmd0aCgpKzc+PjMsZSxyKTtpZihudWxsPT1uKXJldHVybiBudWxsO3ZhciBvPXRoaXMuZG9QdWJsaWMobik7aWYobnVsbD09bylyZXR1cm4gbnVsbDt2YXIgcz1vLnRvU3RyaW5nKDE2KTtyZXR1cm4gMD09KDEmcy5sZW5ndGgpP3M6XCIwXCIrc30sTWUucHJvdG90eXBlLnR5cGU9XCJSU0FcIixIZS5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uIEdlKHQpe3JldHVybiB0PT10aGlzfHx0aGlzLnEuZXF1YWxzKHQucSkmJnRoaXMueC5lcXVhbHModC54KX0sSGUucHJvdG90eXBlLnRvQmlnSW50ZWdlcj1mdW5jdGlvbiBYZSgpe3JldHVybiB0aGlzLnh9LEhlLnByb3RvdHlwZS5uZWdhdGU9ZnVuY3Rpb24gJGUoKXtyZXR1cm4gbmV3IEhlKHRoaXMucSx0aGlzLngubmVnYXRlKCkubW9kKHRoaXMucSkpfSxIZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uIFFlKHQpe3JldHVybiBuZXcgSGUodGhpcy5xLHRoaXMueC5hZGQodC50b0JpZ0ludGVnZXIoKSkubW9kKHRoaXMucSkpfSxIZS5wcm90b3R5cGUuc3VidHJhY3Q9ZnVuY3Rpb24gWmUodCl7cmV0dXJuIG5ldyBIZSh0aGlzLnEsdGhpcy54LnN1YnRyYWN0KHQudG9CaWdJbnRlZ2VyKCkpLm1vZCh0aGlzLnEpKX0sSGUucHJvdG90eXBlLm11bHRpcGx5PWZ1bmN0aW9uIHRyKHQpe3JldHVybiBuZXcgSGUodGhpcy5xLHRoaXMueC5tdWx0aXBseSh0LnRvQmlnSW50ZWdlcigpKS5tb2QodGhpcy5xKSl9LEhlLnByb3RvdHlwZS5zcXVhcmU9ZnVuY3Rpb24gZXIoKXtyZXR1cm4gbmV3IEhlKHRoaXMucSx0aGlzLnguc3F1YXJlKCkubW9kKHRoaXMucSkpfSxIZS5wcm90b3R5cGUuZGl2aWRlPWZ1bmN0aW9uIHJyKHQpe3JldHVybiBuZXcgSGUodGhpcy5xLHRoaXMueC5tdWx0aXBseSh0LnRvQmlnSW50ZWdlcigpLm1vZEludmVyc2UodGhpcy5xKSkubW9kKHRoaXMucSkpfSxWZS5wcm90b3R5cGUuZ2V0WD1mdW5jdGlvbiBucigpe3JldHVybiBudWxsPT10aGlzLnppbnYmJih0aGlzLnppbnY9dGhpcy56Lm1vZEludmVyc2UodGhpcy5jdXJ2ZS5xKSksdGhpcy5jdXJ2ZS5mcm9tQmlnSW50ZWdlcih0aGlzLngudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkodGhpcy56aW52KS5tb2QodGhpcy5jdXJ2ZS5xKSl9LFZlLnByb3RvdHlwZS5nZXRZPWZ1bmN0aW9uIGlyKCl7cmV0dXJuIG51bGw9PXRoaXMuemludiYmKHRoaXMuemludj10aGlzLnoubW9kSW52ZXJzZSh0aGlzLmN1cnZlLnEpKSx0aGlzLmN1cnZlLmZyb21CaWdJbnRlZ2VyKHRoaXMueS50b0JpZ0ludGVnZXIoKS5tdWx0aXBseSh0aGlzLnppbnYpLm1vZCh0aGlzLmN1cnZlLnEpKX0sVmUucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbiBvcih0KXtyZXR1cm4gdD09dGhpc3x8KHRoaXMuaXNJbmZpbml0eSgpP3QuaXNJbmZpbml0eSgpOnQuaXNJbmZpbml0eSgpP3RoaXMuaXNJbmZpbml0eSgpOiEhdC55LnRvQmlnSW50ZWdlcigpLm11bHRpcGx5KHRoaXMueikuc3VidHJhY3QodGhpcy55LnRvQmlnSW50ZWdlcigpLm11bHRpcGx5KHQueikpLm1vZCh0aGlzLmN1cnZlLnEpLmVxdWFscyh3LlpFUk8pJiZ0LngudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkodGhpcy56KS5zdWJ0cmFjdCh0aGlzLngudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkodC56KSkubW9kKHRoaXMuY3VydmUucSkuZXF1YWxzKHcuWkVSTykpfSxWZS5wcm90b3R5cGUuaXNJbmZpbml0eT1mdW5jdGlvbiBzcigpe3JldHVybiBudWxsPT10aGlzLngmJm51bGw9PXRoaXMueXx8dGhpcy56LmVxdWFscyh3LlpFUk8pJiYhdGhpcy55LnRvQmlnSW50ZWdlcigpLmVxdWFscyh3LlpFUk8pfSxWZS5wcm90b3R5cGUubmVnYXRlPWZ1bmN0aW9uIGFyKCl7cmV0dXJuIG5ldyBWZSh0aGlzLmN1cnZlLHRoaXMueCx0aGlzLnkubmVnYXRlKCksdGhpcy56KX0sVmUucHJvdG90eXBlLmFkZD1mdW5jdGlvbiB1cih0KXtpZih0aGlzLmlzSW5maW5pdHkoKSlyZXR1cm4gdDtpZih0LmlzSW5maW5pdHkoKSlyZXR1cm4gdGhpczt2YXIgZT10LnkudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkodGhpcy56KS5zdWJ0cmFjdCh0aGlzLnkudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkodC56KSkubW9kKHRoaXMuY3VydmUucSkscj10LngudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkodGhpcy56KS5zdWJ0cmFjdCh0aGlzLngudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkodC56KSkubW9kKHRoaXMuY3VydmUucSk7aWYody5aRVJPLmVxdWFscyhyKSlyZXR1cm4gdy5aRVJPLmVxdWFscyhlKT90aGlzLnR3aWNlKCk6dGhpcy5jdXJ2ZS5nZXRJbmZpbml0eSgpO3ZhciBuPW5ldyB3KFwiM1wiKSxpPXRoaXMueC50b0JpZ0ludGVnZXIoKSxvPXRoaXMueS50b0JpZ0ludGVnZXIoKSxzPSh0LngudG9CaWdJbnRlZ2VyKCksdC55LnRvQmlnSW50ZWdlcigpLHIuc3F1YXJlKCkpLGE9cy5tdWx0aXBseShyKSx1PWkubXVsdGlwbHkocyksYz1lLnNxdWFyZSgpLm11bHRpcGx5KHRoaXMueiksaD1jLnN1YnRyYWN0KHUuc2hpZnRMZWZ0KDEpKS5tdWx0aXBseSh0LnopLnN1YnRyYWN0KGEpLm11bHRpcGx5KHIpLm1vZCh0aGlzLmN1cnZlLnEpLGw9dS5tdWx0aXBseShuKS5tdWx0aXBseShlKS5zdWJ0cmFjdChvLm11bHRpcGx5KGEpKS5zdWJ0cmFjdChjLm11bHRpcGx5KGUpKS5tdWx0aXBseSh0LnopLmFkZChlLm11bHRpcGx5KGEpKS5tb2QodGhpcy5jdXJ2ZS5xKSxmPWEubXVsdGlwbHkodGhpcy56KS5tdWx0aXBseSh0LnopLm1vZCh0aGlzLmN1cnZlLnEpO3JldHVybiBuZXcgVmUodGhpcy5jdXJ2ZSx0aGlzLmN1cnZlLmZyb21CaWdJbnRlZ2VyKGgpLHRoaXMuY3VydmUuZnJvbUJpZ0ludGVnZXIobCksZil9LFZlLnByb3RvdHlwZS50d2ljZT1mdW5jdGlvbiBjcigpe2lmKHRoaXMuaXNJbmZpbml0eSgpKXJldHVybiB0aGlzO2lmKDA9PXRoaXMueS50b0JpZ0ludGVnZXIoKS5zaWdudW0oKSlyZXR1cm4gdGhpcy5jdXJ2ZS5nZXRJbmZpbml0eSgpO3ZhciB0PW5ldyB3KFwiM1wiKSxlPXRoaXMueC50b0JpZ0ludGVnZXIoKSxyPXRoaXMueS50b0JpZ0ludGVnZXIoKSxuPXIubXVsdGlwbHkodGhpcy56KSxpPW4ubXVsdGlwbHkocikubW9kKHRoaXMuY3VydmUucSksbz10aGlzLmN1cnZlLmEudG9CaWdJbnRlZ2VyKCkscz1lLnNxdWFyZSgpLm11bHRpcGx5KHQpO3cuWkVSTy5lcXVhbHMobyl8fChzPXMuYWRkKHRoaXMuei5zcXVhcmUoKS5tdWx0aXBseShvKSkpO3ZhciBhPShzPXMubW9kKHRoaXMuY3VydmUucSkpLnNxdWFyZSgpLnN1YnRyYWN0KGUuc2hpZnRMZWZ0KDMpLm11bHRpcGx5KGkpKS5zaGlmdExlZnQoMSkubXVsdGlwbHkobikubW9kKHRoaXMuY3VydmUucSksdT1zLm11bHRpcGx5KHQpLm11bHRpcGx5KGUpLnN1YnRyYWN0KGkuc2hpZnRMZWZ0KDEpKS5zaGlmdExlZnQoMikubXVsdGlwbHkoaSkuc3VidHJhY3Qocy5zcXVhcmUoKS5tdWx0aXBseShzKSkubW9kKHRoaXMuY3VydmUucSksYz1uLnNxdWFyZSgpLm11bHRpcGx5KG4pLnNoaWZ0TGVmdCgzKS5tb2QodGhpcy5jdXJ2ZS5xKTtyZXR1cm4gbmV3IFZlKHRoaXMuY3VydmUsdGhpcy5jdXJ2ZS5mcm9tQmlnSW50ZWdlcihhKSx0aGlzLmN1cnZlLmZyb21CaWdJbnRlZ2VyKHUpLGMpfSxWZS5wcm90b3R5cGUubXVsdGlwbHk9ZnVuY3Rpb24gaHIodCl7aWYodGhpcy5pc0luZmluaXR5KCkpcmV0dXJuIHRoaXM7aWYoMD09dC5zaWdudW0oKSlyZXR1cm4gdGhpcy5jdXJ2ZS5nZXRJbmZpbml0eSgpO3ZhciBlLHI9dCxuPXIubXVsdGlwbHkobmV3IHcoXCIzXCIpKSxpPXRoaXMubmVnYXRlKCksbz10aGlzLHM9dGhpcy5jdXJ2ZS5xLnN1YnRyYWN0KHQpLGE9cy5tdWx0aXBseShuZXcgdyhcIjNcIikpLHU9bmV3IFZlKHRoaXMuY3VydmUsdGhpcy54LHRoaXMueSksYz11Lm5lZ2F0ZSgpO2ZvcihlPW4uYml0TGVuZ3RoKCktMjtlPjA7LS1lKXtvPW8udHdpY2UoKTt2YXIgaD1uLnRlc3RCaXQoZSk7aCE9ci50ZXN0Qml0KGUpJiYobz1vLmFkZChoP3RoaXM6aSkpfWZvcihlPWEuYml0TGVuZ3RoKCktMjtlPjA7LS1lKXt1PXUudHdpY2UoKTt2YXIgbD1hLnRlc3RCaXQoZSk7bCE9cy50ZXN0Qml0KGUpJiYodT11LmFkZChsP3U6YykpfXJldHVybiBvfSxWZS5wcm90b3R5cGUubXVsdGlwbHlUd289ZnVuY3Rpb24gbHIodCxlLHIpe3ZhciBuO249dC5iaXRMZW5ndGgoKT5yLmJpdExlbmd0aCgpP3QuYml0TGVuZ3RoKCktMTpyLmJpdExlbmd0aCgpLTE7Zm9yKHZhciBpPXRoaXMuY3VydmUuZ2V0SW5maW5pdHkoKSxvPXRoaXMuYWRkKGUpO24+PTA7KWk9aS50d2ljZSgpLHQudGVzdEJpdChuKT9pPXIudGVzdEJpdChuKT9pLmFkZChvKTppLmFkZCh0aGlzKTpyLnRlc3RCaXQobikmJihpPWkuYWRkKGUpKSwtLW47cmV0dXJuIGl9LEtlLnByb3RvdHlwZS5nZXRRPWZ1bmN0aW9uIGZyKCl7cmV0dXJuIHRoaXMucX0sS2UucHJvdG90eXBlLmdldEE9ZnVuY3Rpb24gZ3IoKXtyZXR1cm4gdGhpcy5hfSxLZS5wcm90b3R5cGUuZ2V0Qj1mdW5jdGlvbiBkcigpe3JldHVybiB0aGlzLmJ9LEtlLnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24gcHIodCl7cmV0dXJuIHQ9PXRoaXN8fHRoaXMucS5lcXVhbHModC5xKSYmdGhpcy5hLmVxdWFscyh0LmEpJiZ0aGlzLmIuZXF1YWxzKHQuYil9LEtlLnByb3RvdHlwZS5nZXRJbmZpbml0eT1mdW5jdGlvbiB2cigpe3JldHVybiB0aGlzLmluZmluaXR5fSxLZS5wcm90b3R5cGUuZnJvbUJpZ0ludGVnZXI9ZnVuY3Rpb24geXIodCl7cmV0dXJuIG5ldyBIZSh0aGlzLnEsdCl9LEtlLnByb3RvdHlwZS5kZWNvZGVQb2ludEhleD1mdW5jdGlvbiBtcih0KXtzd2l0Y2gocGFyc2VJbnQodC5zdWJzdHIoMCwyKSwxNikpe2Nhc2UgMDpyZXR1cm4gdGhpcy5pbmZpbml0eTtjYXNlIDI6Y2FzZSAzOnJldHVybiBudWxsO2Nhc2UgNDpjYXNlIDY6Y2FzZSA3OnZhciBlPSh0Lmxlbmd0aC0yKS8yLHI9dC5zdWJzdHIoMixlKSxuPXQuc3Vic3RyKGUrMixlKTtyZXR1cm4gbmV3IFZlKHRoaXMsdGhpcy5mcm9tQmlnSW50ZWdlcihuZXcgdyhyLDE2KSksdGhpcy5mcm9tQmlnSW50ZWdlcihuZXcgdyhuLDE2KSkpO2RlZmF1bHQ6cmV0dXJuIG51bGx9fSxcbi8qISAoYykgU3RlZmFuIFRob21hcyB8IGh0dHBzOi8vZ2l0aHViLmNvbS9iaXRjb2luanMvYml0Y29pbmpzLWxpYlxuICovXG5IZS5wcm90b3R5cGUuZ2V0Qnl0ZUxlbmd0aD1mdW5jdGlvbigpe3JldHVybiBNYXRoLmZsb29yKCh0aGlzLnRvQmlnSW50ZWdlcigpLmJpdExlbmd0aCgpKzcpLzgpfSxWZS5wcm90b3R5cGUuZ2V0RW5jb2RlZD1mdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbiB0KGUscil7dmFyIG49ZS50b0J5dGVBcnJheVVuc2lnbmVkKCk7aWYocjxuLmxlbmd0aCluPW4uc2xpY2Uobi5sZW5ndGgtcik7ZWxzZSBmb3IoO3I+bi5sZW5ndGg7KW4udW5zaGlmdCgwKTtyZXR1cm4gbn0scj10aGlzLmdldFgoKS50b0JpZ0ludGVnZXIoKSxuPXRoaXMuZ2V0WSgpLnRvQmlnSW50ZWdlcigpLGk9ZShyLDMyKTtyZXR1cm4gdD9uLmlzRXZlbigpP2kudW5zaGlmdCgyKTppLnVuc2hpZnQoMyk6KGkudW5zaGlmdCg0KSxpPWkuY29uY2F0KGUobiwzMikpKSxpfSxWZS5kZWNvZGVGcm9tPWZ1bmN0aW9uKHQsZSl7ZVswXTt2YXIgcj1lLmxlbmd0aC0xLG49ZS5zbGljZSgxLDErci8yKSxpPWUuc2xpY2UoMStyLzIsMStyKTtuLnVuc2hpZnQoMCksaS51bnNoaWZ0KDApO3ZhciBvPW5ldyB3KG4pLHM9bmV3IHcoaSk7cmV0dXJuIG5ldyBWZSh0LHQuZnJvbUJpZ0ludGVnZXIobyksdC5mcm9tQmlnSW50ZWdlcihzKSl9LFZlLmRlY29kZUZyb21IZXg9ZnVuY3Rpb24odCxlKXtlLnN1YnN0cigwLDIpO3ZhciByPWUubGVuZ3RoLTIsbj1lLnN1YnN0cigyLHIvMiksaT1lLnN1YnN0cigyK3IvMixyLzIpLG89bmV3IHcobiwxNikscz1uZXcgdyhpLDE2KTtyZXR1cm4gbmV3IFZlKHQsdC5mcm9tQmlnSW50ZWdlcihvKSx0LmZyb21CaWdJbnRlZ2VyKHMpKX0sVmUucHJvdG90eXBlLmFkZDJEPWZ1bmN0aW9uKHQpe2lmKHRoaXMuaXNJbmZpbml0eSgpKXJldHVybiB0O2lmKHQuaXNJbmZpbml0eSgpKXJldHVybiB0aGlzO2lmKHRoaXMueC5lcXVhbHModC54KSlyZXR1cm4gdGhpcy55LmVxdWFscyh0LnkpP3RoaXMudHdpY2UoKTp0aGlzLmN1cnZlLmdldEluZmluaXR5KCk7dmFyIGU9dC54LnN1YnRyYWN0KHRoaXMueCkscj10Lnkuc3VidHJhY3QodGhpcy55KS5kaXZpZGUoZSksbj1yLnNxdWFyZSgpLnN1YnRyYWN0KHRoaXMueCkuc3VidHJhY3QodC54KSxpPXIubXVsdGlwbHkodGhpcy54LnN1YnRyYWN0KG4pKS5zdWJ0cmFjdCh0aGlzLnkpO3JldHVybiBuZXcgVmUodGhpcy5jdXJ2ZSxuLGkpfSxWZS5wcm90b3R5cGUudHdpY2UyRD1mdW5jdGlvbigpe2lmKHRoaXMuaXNJbmZpbml0eSgpKXJldHVybiB0aGlzO2lmKDA9PXRoaXMueS50b0JpZ0ludGVnZXIoKS5zaWdudW0oKSlyZXR1cm4gdGhpcy5jdXJ2ZS5nZXRJbmZpbml0eSgpO3ZhciB0PXRoaXMuY3VydmUuZnJvbUJpZ0ludGVnZXIody52YWx1ZU9mKDIpKSxlPXRoaXMuY3VydmUuZnJvbUJpZ0ludGVnZXIody52YWx1ZU9mKDMpKSxyPXRoaXMueC5zcXVhcmUoKS5tdWx0aXBseShlKS5hZGQodGhpcy5jdXJ2ZS5hKS5kaXZpZGUodGhpcy55Lm11bHRpcGx5KHQpKSxuPXIuc3F1YXJlKCkuc3VidHJhY3QodGhpcy54Lm11bHRpcGx5KHQpKSxpPXIubXVsdGlwbHkodGhpcy54LnN1YnRyYWN0KG4pKS5zdWJ0cmFjdCh0aGlzLnkpO3JldHVybiBuZXcgVmUodGhpcy5jdXJ2ZSxuLGkpfSxWZS5wcm90b3R5cGUubXVsdGlwbHkyRD1mdW5jdGlvbih0KXtpZih0aGlzLmlzSW5maW5pdHkoKSlyZXR1cm4gdGhpcztpZigwPT10LnNpZ251bSgpKXJldHVybiB0aGlzLmN1cnZlLmdldEluZmluaXR5KCk7dmFyIGUscj10LG49ci5tdWx0aXBseShuZXcgdyhcIjNcIikpLGk9dGhpcy5uZWdhdGUoKSxvPXRoaXM7Zm9yKGU9bi5iaXRMZW5ndGgoKS0yO2U+MDstLWUpe289by50d2ljZSgpO3ZhciBzPW4udGVzdEJpdChlKTtzIT1yLnRlc3RCaXQoZSkmJihvPW8uYWRkMkQocz90aGlzOmkpKX1yZXR1cm4gb30sVmUucHJvdG90eXBlLmlzT25DdXJ2ZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0WCgpLnRvQmlnSW50ZWdlcigpLGU9dGhpcy5nZXRZKCkudG9CaWdJbnRlZ2VyKCkscj10aGlzLmN1cnZlLmdldEEoKS50b0JpZ0ludGVnZXIoKSxuPXRoaXMuY3VydmUuZ2V0QigpLnRvQmlnSW50ZWdlcigpLGk9dGhpcy5jdXJ2ZS5nZXRRKCksbz1lLm11bHRpcGx5KGUpLm1vZChpKSxzPXQubXVsdGlwbHkodCkubXVsdGlwbHkodCkuYWRkKHIubXVsdGlwbHkodCkpLmFkZChuKS5tb2QoaSk7cmV0dXJuIG8uZXF1YWxzKHMpfSxWZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIihcIit0aGlzLmdldFgoKS50b0JpZ0ludGVnZXIoKS50b1N0cmluZygpK1wiLFwiK3RoaXMuZ2V0WSgpLnRvQmlnSW50ZWdlcigpLnRvU3RyaW5nKCkrXCIpXCJ9LFZlLnByb3RvdHlwZS52YWxpZGF0ZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuY3VydmUuZ2V0USgpO2lmKHRoaXMuaXNJbmZpbml0eSgpKXRocm93IG5ldyBFcnJvcihcIlBvaW50IGlzIGF0IGluZmluaXR5LlwiKTt2YXIgZT10aGlzLmdldFgoKS50b0JpZ0ludGVnZXIoKSxyPXRoaXMuZ2V0WSgpLnRvQmlnSW50ZWdlcigpO2lmKGUuY29tcGFyZVRvKHcuT05FKTwwfHxlLmNvbXBhcmVUbyh0LnN1YnRyYWN0KHcuT05FKSk+MCl0aHJvdyBuZXcgRXJyb3IoXCJ4IGNvb3JkaW5hdGUgb3V0IG9mIGJvdW5kc1wiKTtpZihyLmNvbXBhcmVUbyh3Lk9ORSk8MHx8ci5jb21wYXJlVG8odC5zdWJ0cmFjdCh3Lk9ORSkpPjApdGhyb3cgbmV3IEVycm9yKFwieSBjb29yZGluYXRlIG91dCBvZiBib3VuZHNcIik7aWYoIXRoaXMuaXNPbkN1cnZlKCkpdGhyb3cgbmV3IEVycm9yKFwiUG9pbnQgaXMgbm90IG9uIHRoZSBjdXJ2ZS5cIik7aWYodGhpcy5tdWx0aXBseSh0KS5pc0luZmluaXR5KCkpdGhyb3cgbmV3IEVycm9yKFwiUG9pbnQgaXMgbm90IGEgc2NhbGFyIG11bHRpcGxlIG9mIEcuXCIpO3JldHVybiEwfTtcbi8qISBNaWtlIFNhbXVlbCAoYykgMjAwOSB8IGNvZGUuZ29vZ2xlLmNvbS9wL2pzb24tc2Fucy1ldmFsXG4gKi9cbnZhciBfcj1mdW5jdGlvbigpe3ZhciB0PW5ldyBSZWdFeHAoJyg/OmZhbHNlfHRydWV8bnVsbHxbXFxcXHtcXFxcfVxcXFxbXFxcXF1dfCg/Oi0/XFxcXGIoPzowfFsxLTldWzAtOV0qKSg/OlxcXFwuWzAtOV0rKT8oPzpbZUVdWystXT9bMC05XSspP1xcXFxiKXwoPzpcIig/OlteXFxcXDAtXFxcXHgwOFxcXFx4MGEtXFxcXHgxZlwiXFxcXFxcXFxdfFxcXFxcXFxcKD86W1wiL1xcXFxcXFxcYmZucnRdfHVbMC05QS1GYS1mXXs0fSkpKlwiKSknLFwiZ1wiKSxlPW5ldyBSZWdFeHAoXCJcXFxcXFxcXCg/OihbXnVdKXx1KC57NH0pKVwiLFwiZ1wiKSxyPXsnXCInOidcIicsXCIvXCI6XCIvXCIsXCJcXFxcXCI6XCJcXFxcXCIsYjpcIlxcYlwiLGY6XCJcXGZcIixuOlwiXFxuXCIscjpcIlxcclwiLHQ6XCJcXHRcIn07ZnVuY3Rpb24gbih0LGUsbil7cmV0dXJuIGU/cltlXTpTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KG4sMTYpKX12YXIgaT1uZXcgU3RyaW5nKFwiXCIpLG89T2JqZWN0Lmhhc093blByb3BlcnR5O3JldHVybiBmdW5jdGlvbihyLHMpe3ZhciBhLHUsYz1yLm1hdGNoKHQpLGg9Y1swXSxsPSExO1wie1wiPT09aD9hPXt9OlwiW1wiPT09aD9hPVtdOihhPVtdLGw9ITApO2Zvcih2YXIgZj1bYV0sZD0xLWwscD1jLmxlbmd0aDtkPHA7KytkKXt2YXIgdjtzd2l0Y2goKGg9Y1tkXSkuY2hhckNvZGVBdCgwKSl7ZGVmYXVsdDoodj1mWzBdKVt1fHx2Lmxlbmd0aF09K2gsdT12b2lkIDA7YnJlYWs7Y2FzZSAzNDppZigtMSE9PShoPWguc3Vic3RyaW5nKDEsaC5sZW5ndGgtMSkpLmluZGV4T2YoXCJcXFxcXCIpJiYoaD1oLnJlcGxhY2UoZSxuKSksdj1mWzBdLCF1KXtpZighKHYgaW5zdGFuY2VvZiBBcnJheSkpe3U9aHx8aTticmVha311PXYubGVuZ3RofXZbdV09aCx1PXZvaWQgMDticmVhaztjYXNlIDkxOnY9ZlswXSxmLnVuc2hpZnQodlt1fHx2Lmxlbmd0aF09W10pLHU9dm9pZCAwO2JyZWFrO2Nhc2UgOTM6Zi5zaGlmdCgpO2JyZWFrO2Nhc2UgMTAyOih2PWZbMF0pW3V8fHYubGVuZ3RoXT0hMSx1PXZvaWQgMDticmVhaztjYXNlIDExMDoodj1mWzBdKVt1fHx2Lmxlbmd0aF09bnVsbCx1PXZvaWQgMDticmVhaztjYXNlIDExNjoodj1mWzBdKVt1fHx2Lmxlbmd0aF09ITAsdT12b2lkIDA7YnJlYWs7Y2FzZSAxMjM6dj1mWzBdLGYudW5zaGlmdCh2W3V8fHYubGVuZ3RoXT17fSksdT12b2lkIDA7YnJlYWs7Y2FzZSAxMjU6Zi5zaGlmdCgpfX1pZihsKXtpZigxIT09Zi5sZW5ndGgpdGhyb3cgbmV3IEVycm9yO2E9YVswXX1lbHNlIGlmKGYubGVuZ3RoKXRocm93IG5ldyBFcnJvcjtpZihzKXthPWZ1bmN0aW9uIHQoZSxyKXt2YXIgbj1lW3JdO2lmKG4mJlwib2JqZWN0XCI9PT0odm9pZCAwPT09bj9cInVuZGVmaW5lZFwiOmcobikpKXt2YXIgaT1udWxsO2Zvcih2YXIgYSBpbiBuKWlmKG8uY2FsbChuLGEpJiZuIT09ZSl7dmFyIHU9dChuLGEpO3ZvaWQgMCE9PXU/blthXT11OihpfHwoaT1bXSksaS5wdXNoKGEpKX1pZihpKWZvcih2YXIgYz1pLmxlbmd0aDstLWM+PTA7KWRlbGV0ZSBuW2lbY11dfXJldHVybiBzLmNhbGwoZSxyLG4pfSh7XCJcIjphfSxcIlwiKX1yZXR1cm4gYX19KCk7dm9pZCAwIT09U3ImJlNyfHwoZS5LSlVSPVNyPXt9KSx2b2lkIDAhPT1Tci5hc24xJiZTci5hc24xfHwoU3IuYXNuMT17fSksU3IuYXNuMS5BU04xVXRpbD1uZXcgZnVuY3Rpb24oKXt0aGlzLmludGVnZXJUb0J5dGVIZXg9ZnVuY3Rpb24odCl7dmFyIGU9dC50b1N0cmluZygxNik7cmV0dXJuIGUubGVuZ3RoJTI9PTEmJihlPVwiMFwiK2UpLGV9LHRoaXMuYmlnSW50VG9NaW5Ud29zQ29tcGxlbWVudHNIZXg9ZnVuY3Rpb24odCl7dmFyIGU9dC50b1N0cmluZygxNik7aWYoXCItXCIhPWUuc3Vic3RyKDAsMSkpZS5sZW5ndGglMj09MT9lPVwiMFwiK2U6ZS5tYXRjaCgvXlswLTddLyl8fChlPVwiMDBcIitlKTtlbHNle3ZhciByPWUuc3Vic3RyKDEpLmxlbmd0aDtyJTI9PTE/cis9MTplLm1hdGNoKC9eWzAtN10vKXx8KHIrPTIpO2Zvcih2YXIgbj1cIlwiLGk9MDtpPHI7aSsrKW4rPVwiZlwiO2U9bmV3IHcobiwxNikueG9yKHQpLmFkZCh3Lk9ORSkudG9TdHJpbmcoMTYpLnJlcGxhY2UoL14tLyxcIlwiKX1yZXR1cm4gZX0sdGhpcy5nZXRQRU1TdHJpbmdGcm9tSGV4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGpyKHQsZSl9LHRoaXMubmV3T2JqZWN0PWZ1bmN0aW9uKHQpe3ZhciBlPVNyLmFzbjEscj1lLkFTTjFPYmplY3Qsbj1lLkRFUkJvb2xlYW4saT1lLkRFUkludGVnZXIsbz1lLkRFUkJpdFN0cmluZyxzPWUuREVST2N0ZXRTdHJpbmcsYT1lLkRFUk51bGwsdT1lLkRFUk9iamVjdElkZW50aWZpZXIsYz1lLkRFUkVudW1lcmF0ZWQsaD1lLkRFUlVURjhTdHJpbmcsbD1lLkRFUk51bWVyaWNTdHJpbmcsZj1lLkRFUlByaW50YWJsZVN0cmluZyxnPWUuREVSVGVsZXRleFN0cmluZyxkPWUuREVSSUE1U3RyaW5nLHA9ZS5ERVJVVENUaW1lLHY9ZS5ERVJHZW5lcmFsaXplZFRpbWUseT1lLkRFUlZpc2libGVTdHJpbmcsbT1lLkRFUkJNUFN0cmluZyxfPWUuREVSU2VxdWVuY2UsUz1lLkRFUlNldCxiPWUuREVSVGFnZ2VkT2JqZWN0LHc9ZS5BU04xVXRpbC5uZXdPYmplY3Q7aWYodCBpbnN0YW5jZW9mIGUuQVNOMU9iamVjdClyZXR1cm4gdDt2YXIgRj1PYmplY3Qua2V5cyh0KTtpZigxIT1GLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJrZXkgb2YgcGFyYW0gc2hhbGwgYmUgb25seSBvbmUuXCIpO3ZhciBFPUZbMF07aWYoLTE9PVwiOmFzbjE6Ym9vbDppbnQ6Yml0c3RyOm9jdHN0cjpudWxsOm9pZDplbnVtOnV0ZjhzdHI6bnVtc3RyOnBybnN0cjp0ZWxzdHI6aWE1c3RyOnV0Y3RpbWU6Z2VudGltZTp2aXNzdHI6Ym1wc3RyOnNlcTpzZXQ6dGFnOlwiLmluZGV4T2YoXCI6XCIrRStcIjpcIikpdGhyb3cgbmV3IEVycm9yKFwidW5kZWZpbmVkIGtleTogXCIrRSk7aWYoXCJib29sXCI9PUUpcmV0dXJuIG5ldyBuKHRbRV0pO2lmKFwiaW50XCI9PUUpcmV0dXJuIG5ldyBpKHRbRV0pO2lmKFwiYml0c3RyXCI9PUUpcmV0dXJuIG5ldyBvKHRbRV0pO2lmKFwib2N0c3RyXCI9PUUpcmV0dXJuIG5ldyBzKHRbRV0pO2lmKFwibnVsbFwiPT1FKXJldHVybiBuZXcgYSh0W0VdKTtpZihcIm9pZFwiPT1FKXJldHVybiBuZXcgdSh0W0VdKTtpZihcImVudW1cIj09RSlyZXR1cm4gbmV3IGModFtFXSk7aWYoXCJ1dGY4c3RyXCI9PUUpcmV0dXJuIG5ldyBoKHRbRV0pO2lmKFwibnVtc3RyXCI9PUUpcmV0dXJuIG5ldyBsKHRbRV0pO2lmKFwicHJuc3RyXCI9PUUpcmV0dXJuIG5ldyBmKHRbRV0pO2lmKFwidGVsc3RyXCI9PUUpcmV0dXJuIG5ldyBnKHRbRV0pO2lmKFwiaWE1c3RyXCI9PUUpcmV0dXJuIG5ldyBkKHRbRV0pO2lmKFwidXRjdGltZVwiPT1FKXJldHVybiBuZXcgcCh0W0VdKTtpZihcImdlbnRpbWVcIj09RSlyZXR1cm4gbmV3IHYodFtFXSk7aWYoXCJ2aXNzdHJcIj09RSlyZXR1cm4gbmV3IHkodFtFXSk7aWYoXCJibXBzdHJcIj09RSlyZXR1cm4gbmV3IG0odFtFXSk7aWYoXCJhc24xXCI9PUUpcmV0dXJuIG5ldyByKHRbRV0pO2lmKFwic2VxXCI9PUUpe2Zvcih2YXIgeD10W0VdLEE9W10saz0wO2s8eC5sZW5ndGg7aysrKXt2YXIgUD13KHhba10pO0EucHVzaChQKX1yZXR1cm4gbmV3IF8oe2FycmF5OkF9KX1pZihcInNldFwiPT1FKXtmb3IoeD10W0VdLEE9W10saz0wO2s8eC5sZW5ndGg7aysrKXtQPXcoeFtrXSk7QS5wdXNoKFApfXJldHVybiBuZXcgUyh7YXJyYXk6QX0pfWlmKFwidGFnXCI9PUUpe3ZhciBDPXRbRV07aWYoXCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKEMpJiYzPT1DLmxlbmd0aCl7dmFyIFQ9dyhDWzJdKTtyZXR1cm4gbmV3IGIoe3RhZzpDWzBdLGV4cGxpY2l0OkNbMV0sb2JqOlR9KX1yZXR1cm4gbmV3IGIoQyl9fSx0aGlzLmpzb25Ub0FTTjFIRVg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubmV3T2JqZWN0KHQpLmdldEVuY29kZWRIZXgoKX19LFNyLmFzbjEuQVNOMVV0aWwub2lkSGV4VG9JbnQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVwiXCIscj1wYXJzZUludCh0LnN1YnN0cigwLDIpLDE2KSxuPShlPU1hdGguZmxvb3Ioci80MCkrXCIuXCIrciU0MCxcIlwiKSxpPTI7aTx0Lmxlbmd0aDtpKz0yKXt2YXIgbz0oXCIwMDAwMDAwMFwiK3BhcnNlSW50KHQuc3Vic3RyKGksMiksMTYpLnRvU3RyaW5nKDIpKS5zbGljZSgtOCk7aWYobis9by5zdWJzdHIoMSw3KSxcIjBcIj09by5zdWJzdHIoMCwxKSllPWUrXCIuXCIrbmV3IHcobiwyKS50b1N0cmluZygxMCksbj1cIlwifXJldHVybiBlfSxTci5hc24xLkFTTjFVdGlsLm9pZEludFRvSGV4PWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uIHQoZSl7dmFyIHI9ZS50b1N0cmluZygxNik7cmV0dXJuIDE9PXIubGVuZ3RoJiYocj1cIjBcIityKSxyfSxyPWZ1bmN0aW9uIHQocil7dmFyIG49XCJcIixpPW5ldyB3KHIsMTApLnRvU3RyaW5nKDIpLG89Ny1pLmxlbmd0aCU3Ozc9PW8mJihvPTApO2Zvcih2YXIgcz1cIlwiLGE9MDthPG87YSsrKXMrPVwiMFwiO2k9cytpO2ZvcihhPTA7YTxpLmxlbmd0aC0xO2ErPTcpe3ZhciB1PWkuc3Vic3RyKGEsNyk7YSE9aS5sZW5ndGgtNyYmKHU9XCIxXCIrdSksbis9ZShwYXJzZUludCh1LDIpKX1yZXR1cm4gbn07aWYoIXQubWF0Y2goL15bMC05Ll0rJC8pKXRocm93XCJtYWxmb3JtZWQgb2lkIHN0cmluZzogXCIrdDt2YXIgbj1cIlwiLGk9dC5zcGxpdChcIi5cIiksbz00MCpwYXJzZUludChpWzBdKStwYXJzZUludChpWzFdKTtuKz1lKG8pLGkuc3BsaWNlKDAsMik7Zm9yKHZhciBzPTA7czxpLmxlbmd0aDtzKyspbis9cihpW3NdKTtyZXR1cm4gbn0sU3IuYXNuMS5BU04xT2JqZWN0PWZ1bmN0aW9uKHQpe3RoaXMucGFyYW1zPW51bGwsdGhpcy5nZXRMZW5ndGhIZXhGcm9tVmFsdWU9ZnVuY3Rpb24oKXtpZih2b2lkIDA9PT10aGlzLmhWfHxudWxsPT10aGlzLmhWKXRocm93IG5ldyBFcnJvcihcInRoaXMuaFYgaXMgbnVsbCBvciB1bmRlZmluZWRcIik7aWYodGhpcy5oVi5sZW5ndGglMj09MSl0aHJvdyBuZXcgRXJyb3IoXCJ2YWx1ZSBoZXggbXVzdCBiZSBldmVuIGxlbmd0aDogbj1cIitcIlwiLmxlbmd0aCtcIix2PVwiK3RoaXMuaFYpO3ZhciB0PXRoaXMuaFYubGVuZ3RoLzIsZT10LnRvU3RyaW5nKDE2KTtpZihlLmxlbmd0aCUyPT0xJiYoZT1cIjBcIitlKSx0PDEyOClyZXR1cm4gZTt2YXIgcj1lLmxlbmd0aC8yO2lmKHI+MTUpdGhyb3dcIkFTTi4xIGxlbmd0aCB0b28gbG9uZyB0byByZXByZXNlbnQgYnkgOHg6IG4gPSBcIit0LnRvU3RyaW5nKDE2KTtyZXR1cm4oMTI4K3IpLnRvU3RyaW5nKDE2KStlfSx0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtyZXR1cm4obnVsbD09dGhpcy5oVExWfHx0aGlzLmlzTW9kaWZpZWQpJiYodGhpcy5oVj10aGlzLmdldEZyZXNoVmFsdWVIZXgoKSx0aGlzLmhMPXRoaXMuZ2V0TGVuZ3RoSGV4RnJvbVZhbHVlKCksdGhpcy5oVExWPXRoaXMuaFQrdGhpcy5oTCt0aGlzLmhWLHRoaXMuaXNNb2RpZmllZD0hMSksdGhpcy5oVExWfSx0aGlzLmdldFZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RW5jb2RlZEhleCgpLHRoaXMuaFZ9LHRoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe3JldHVyblwiXCJ9LHRoaXMuc2V0QnlQYXJhbT1mdW5jdGlvbih0KXt0aGlzLnBhcmFtcz10fSxudWxsIT10JiZudWxsIT10LnRsdiYmKHRoaXMuaFRMVj10LnRsdix0aGlzLmlzTW9kaWZpZWQ9ITEpfSxTci5hc24xLkRFUkFic3RyYWN0U3RyaW5nPWZ1bmN0aW9uKHQpe1NyLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuZ2V0U3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc30sdGhpcy5zZXRTdHJpbmc9ZnVuY3Rpb24odCl7dGhpcy5oVExWPW51bGwsdGhpcy5pc01vZGlmaWVkPSEwLHRoaXMucz10LHRoaXMuaFY9SXIodGhpcy5zKS50b0xvd2VyQ2FzZSgpfSx0aGlzLnNldFN0cmluZ0hleD1mdW5jdGlvbih0KXt0aGlzLmhUTFY9bnVsbCx0aGlzLmlzTW9kaWZpZWQ9ITAsdGhpcy5zPW51bGwsdGhpcy5oVj10fSx0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oVn0sdm9pZCAwIT09dCYmKFwic3RyaW5nXCI9PXR5cGVvZiB0P3RoaXMuc2V0U3RyaW5nKHQpOnZvaWQgMCE9PXQuc3RyP3RoaXMuc2V0U3RyaW5nKHQuc3RyKTp2b2lkIDAhPT10LmhleCYmdGhpcy5zZXRTdHJpbmdIZXgodC5oZXgpKX0sWnIoU3IuYXNuMS5ERVJBYnN0cmFjdFN0cmluZyxTci5hc24xLkFTTjFPYmplY3QpLFNyLmFzbjEuREVSQWJzdHJhY3RUaW1lPWZ1bmN0aW9uKHQpe1NyLmFzbjEuREVSQWJzdHJhY3RUaW1lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmxvY2FsRGF0ZVRvVVRDPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0VGltZSgpKzZlNCp0LmdldFRpbWV6b25lT2Zmc2V0KCk7cmV0dXJuIG5ldyBEYXRlKGUpfSx0aGlzLmZvcm1hdERhdGU9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPXRoaXMuemVyb1BhZGRpbmcsaT10aGlzLmxvY2FsRGF0ZVRvVVRDKHQpLG89U3RyaW5nKGkuZ2V0RnVsbFllYXIoKSk7XCJ1dGNcIj09ZSYmKG89by5zdWJzdHIoMiwyKSk7dmFyIHM9bytuKFN0cmluZyhpLmdldE1vbnRoKCkrMSksMikrbihTdHJpbmcoaS5nZXREYXRlKCkpLDIpK24oU3RyaW5nKGkuZ2V0SG91cnMoKSksMikrbihTdHJpbmcoaS5nZXRNaW51dGVzKCkpLDIpK24oU3RyaW5nKGkuZ2V0U2Vjb25kcygpKSwyKTtpZighMD09PXIpe3ZhciBhPWkuZ2V0TWlsbGlzZWNvbmRzKCk7aWYoMCE9YSl7dmFyIHU9bihTdHJpbmcoYSksMyk7cz1zK1wiLlwiKyh1PXUucmVwbGFjZSgvWzBdKyQvLFwiXCIpKX19cmV0dXJuIHMrXCJaXCJ9LHRoaXMuemVyb1BhZGRpbmc9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5sZW5ndGg+PWU/dDpuZXcgQXJyYXkoZS10Lmxlbmd0aCsxKS5qb2luKFwiMFwiKSt0fSx0aGlzLmdldFN0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN9LHRoaXMuc2V0U3RyaW5nPWZ1bmN0aW9uKHQpe3RoaXMuaFRMVj1udWxsLHRoaXMuaXNNb2RpZmllZD0hMCx0aGlzLnM9dCx0aGlzLmhWPWtyKHQpfSx0aGlzLnNldEJ5RGF0ZVZhbHVlPWZ1bmN0aW9uKHQsZSxyLG4saSxvKXt2YXIgcz1uZXcgRGF0ZShEYXRlLlVUQyh0LGUtMSxyLG4saSxvLDApKTt0aGlzLnNldEJ5RGF0ZShzKX0sdGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaFZ9fSxacihTci5hc24xLkRFUkFic3RyYWN0VGltZSxTci5hc24xLkFTTjFPYmplY3QpLFNyLmFzbjEuREVSQWJzdHJhY3RTdHJ1Y3R1cmVkPWZ1bmN0aW9uKHQpe1NyLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuc2V0QnlBU04xT2JqZWN0QXJyYXk9ZnVuY3Rpb24odCl7dGhpcy5oVExWPW51bGwsdGhpcy5pc01vZGlmaWVkPSEwLHRoaXMuYXNuMUFycmF5PXR9LHRoaXMuYXBwZW5kQVNOMU9iamVjdD1mdW5jdGlvbih0KXt0aGlzLmhUTFY9bnVsbCx0aGlzLmlzTW9kaWZpZWQ9ITAsdGhpcy5hc24xQXJyYXkucHVzaCh0KX0sdGhpcy5hc24xQXJyYXk9bmV3IEFycmF5LHZvaWQgMCE9PXQmJnZvaWQgMCE9PXQuYXJyYXkmJih0aGlzLmFzbjFBcnJheT10LmFycmF5KX0sWnIoU3IuYXNuMS5ERVJBYnN0cmFjdFN0cnVjdHVyZWQsU3IuYXNuMS5BU04xT2JqZWN0KSxTci5hc24xLkRFUkJvb2xlYW49ZnVuY3Rpb24odCl7U3IuYXNuMS5ERVJCb29sZWFuLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSx0aGlzLmhUPVwiMDFcIix0aGlzLmhUTFY9MD09dD9cIjAxMDEwMFwiOlwiMDEwMWZmXCJ9LFpyKFNyLmFzbjEuREVSQm9vbGVhbixTci5hc24xLkFTTjFPYmplY3QpLFNyLmFzbjEuREVSSW50ZWdlcj1mdW5jdGlvbih0KXtTci5hc24xLkRFUkludGVnZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLHRoaXMuaFQ9XCIwMlwiLHRoaXMuc2V0QnlCaWdJbnRlZ2VyPWZ1bmN0aW9uKHQpe3RoaXMuaFRMVj1udWxsLHRoaXMuaXNNb2RpZmllZD0hMCx0aGlzLmhWPVNyLmFzbjEuQVNOMVV0aWwuYmlnSW50VG9NaW5Ud29zQ29tcGxlbWVudHNIZXgodCl9LHRoaXMuc2V0QnlJbnRlZ2VyPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyB3KFN0cmluZyh0KSwxMCk7dGhpcy5zZXRCeUJpZ0ludGVnZXIoZSl9LHRoaXMuc2V0VmFsdWVIZXg9ZnVuY3Rpb24odCl7dGhpcy5oVj10fSx0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oVn0sdm9pZCAwIT09dCYmKHZvaWQgMCE9PXQuYmlnaW50P3RoaXMuc2V0QnlCaWdJbnRlZ2VyKHQuYmlnaW50KTp2b2lkIDAhPT10LmludD90aGlzLnNldEJ5SW50ZWdlcih0LmludCk6XCJudW1iZXJcIj09dHlwZW9mIHQ/dGhpcy5zZXRCeUludGVnZXIodCk6dm9pZCAwIT09dC5oZXgmJnRoaXMuc2V0VmFsdWVIZXgodC5oZXgpKX0sWnIoU3IuYXNuMS5ERVJJbnRlZ2VyLFNyLmFzbjEuQVNOMU9iamVjdCksU3IuYXNuMS5ERVJCaXRTdHJpbmc9ZnVuY3Rpb24odCl7aWYodm9pZCAwIT09dCYmdm9pZCAwIT09dC5vYmope3ZhciBlPVNyLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KHQub2JqKTt0LmhleD1cIjAwXCIrZS5nZXRFbmNvZGVkSGV4KCl9U3IuYXNuMS5ERVJCaXRTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLHRoaXMuaFQ9XCIwM1wiLHRoaXMuc2V0SGV4VmFsdWVJbmNsdWRpbmdVbnVzZWRCaXRzPWZ1bmN0aW9uKHQpe3RoaXMuaFRMVj1udWxsLHRoaXMuaXNNb2RpZmllZD0hMCx0aGlzLmhWPXR9LHRoaXMuc2V0VW51c2VkQml0c0FuZEhleFZhbHVlPWZ1bmN0aW9uKHQsZSl7aWYodDwwfHw3PHQpdGhyb3dcInVudXNlZCBiaXRzIHNoYWxsIGJlIGZyb20gMCB0byA3OiB1ID0gXCIrdDt2YXIgcj1cIjBcIit0O3RoaXMuaFRMVj1udWxsLHRoaXMuaXNNb2RpZmllZD0hMCx0aGlzLmhWPXIrZX0sdGhpcy5zZXRCeUJpbmFyeVN0cmluZz1mdW5jdGlvbih0KXt2YXIgZT04LSh0PXQucmVwbGFjZSgvMCskLyxcIlwiKSkubGVuZ3RoJTg7OD09ZSYmKGU9MCk7Zm9yKHZhciByPTA7cjw9ZTtyKyspdCs9XCIwXCI7dmFyIG49XCJcIjtmb3Iocj0wO3I8dC5sZW5ndGgtMTtyKz04KXt2YXIgaT10LnN1YnN0cihyLDgpLG89cGFyc2VJbnQoaSwyKS50b1N0cmluZygxNik7MT09by5sZW5ndGgmJihvPVwiMFwiK28pLG4rPW99dGhpcy5oVExWPW51bGwsdGhpcy5pc01vZGlmaWVkPSEwLHRoaXMuaFY9XCIwXCIrZStufSx0aGlzLnNldEJ5Qm9vbGVhbkFycmF5PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1cIlwiLHI9MDtyPHQubGVuZ3RoO3IrKykxPT10W3JdP2UrPVwiMVwiOmUrPVwiMFwiO3RoaXMuc2V0QnlCaW5hcnlTdHJpbmcoZSl9LHRoaXMubmV3RmFsc2VBcnJheT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEFycmF5KHQpLHI9MDtyPHQ7cisrKWVbcl09ITE7cmV0dXJuIGV9LHRoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhWfSx2b2lkIDAhPT10JiYoXCJzdHJpbmdcIj09dHlwZW9mIHQmJnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvXlswLTlhLWZdKyQvKT90aGlzLnNldEhleFZhbHVlSW5jbHVkaW5nVW51c2VkQml0cyh0KTp2b2lkIDAhPT10LmhleD90aGlzLnNldEhleFZhbHVlSW5jbHVkaW5nVW51c2VkQml0cyh0LmhleCk6dm9pZCAwIT09dC5iaW4/dGhpcy5zZXRCeUJpbmFyeVN0cmluZyh0LmJpbik6dm9pZCAwIT09dC5hcnJheSYmdGhpcy5zZXRCeUJvb2xlYW5BcnJheSh0LmFycmF5KSl9LFpyKFNyLmFzbjEuREVSQml0U3RyaW5nLFNyLmFzbjEuQVNOMU9iamVjdCksU3IuYXNuMS5ERVJPY3RldFN0cmluZz1mdW5jdGlvbih0KXtpZih2b2lkIDAhPT10JiZ2b2lkIDAhPT10Lm9iail7dmFyIGU9U3IuYXNuMS5BU04xVXRpbC5uZXdPYmplY3QodC5vYmopO3QuaGV4PWUuZ2V0RW5jb2RlZEhleCgpfVNyLmFzbjEuREVST2N0ZXRTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdCksdGhpcy5oVD1cIjA0XCJ9LFpyKFNyLmFzbjEuREVST2N0ZXRTdHJpbmcsU3IuYXNuMS5ERVJBYnN0cmFjdFN0cmluZyksU3IuYXNuMS5ERVJOdWxsPWZ1bmN0aW9uKCl7U3IuYXNuMS5ERVJOdWxsLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSx0aGlzLmhUPVwiMDVcIix0aGlzLmhUTFY9XCIwNTAwXCJ9LFpyKFNyLmFzbjEuREVSTnVsbCxTci5hc24xLkFTTjFPYmplY3QpLFNyLmFzbjEuREVST2JqZWN0SWRlbnRpZmllcj1mdW5jdGlvbih0KXtTci5hc24xLkRFUk9iamVjdElkZW50aWZpZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLHRoaXMuaFQ9XCIwNlwiLHRoaXMuc2V0VmFsdWVIZXg9ZnVuY3Rpb24odCl7dGhpcy5oVExWPW51bGwsdGhpcy5pc01vZGlmaWVkPSEwLHRoaXMucz1udWxsLHRoaXMuaFY9dH0sdGhpcy5zZXRWYWx1ZU9pZFN0cmluZz1mdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbiByKHQpe3ZhciBlPWZ1bmN0aW9uIHQoZSl7dmFyIHI9ZS50b1N0cmluZygxNik7cmV0dXJuIDE9PXIubGVuZ3RoJiYocj1cIjBcIityKSxyfSxyPWZ1bmN0aW9uIHQocil7dmFyIG49XCJcIixpPXBhcnNlSW50KHIsMTApLnRvU3RyaW5nKDIpLG89Ny1pLmxlbmd0aCU3Ozc9PW8mJihvPTApO2Zvcih2YXIgcz1cIlwiLGE9MDthPG87YSsrKXMrPVwiMFwiO2k9cytpO2ZvcihhPTA7YTxpLmxlbmd0aC0xO2ErPTcpe3ZhciB1PWkuc3Vic3RyKGEsNyk7YSE9aS5sZW5ndGgtNyYmKHU9XCIxXCIrdSksbis9ZShwYXJzZUludCh1LDIpKX1yZXR1cm4gbn07dHJ5e2lmKCF0Lm1hdGNoKC9eWzAtOS5dKyQvKSlyZXR1cm4gbnVsbDt2YXIgbj1cIlwiLGk9dC5zcGxpdChcIi5cIiksbz00MCpwYXJzZUludChpWzBdLDEwKStwYXJzZUludChpWzFdLDEwKTtuKz1lKG8pLGkuc3BsaWNlKDAsMik7Zm9yKHZhciBzPTA7czxpLmxlbmd0aDtzKyspbis9cihpW3NdKTtyZXR1cm4gbn1jYXRjaCh0KXtyZXR1cm4gbnVsbH19KHQpO2lmKG51bGw9PWUpdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIG9pZCBzdHJpbmc6IFwiK3QpO3RoaXMuaFRMVj1udWxsLHRoaXMuaXNNb2RpZmllZD0hMCx0aGlzLnM9bnVsbCx0aGlzLmhWPWV9LHRoaXMuc2V0VmFsdWVOYW1lPWZ1bmN0aW9uKHQpe3ZhciBlPVNyLmFzbjEueDUwOS5PSUQubmFtZTJvaWQodCk7aWYoXCJcIj09PWUpdGhyb3cgbmV3IEVycm9yKFwiREVST2JqZWN0SWRlbnRpZmllciBvaWROYW1lIHVuZGVmaW5lZDogXCIrdCk7dGhpcy5zZXRWYWx1ZU9pZFN0cmluZyhlKX0sdGhpcy5zZXRWYWx1ZU5hbWVPck9pZD1mdW5jdGlvbih0KXt0Lm1hdGNoKC9eWzAtMl0uWzAtOS5dKyQvKT90aGlzLnNldFZhbHVlT2lkU3RyaW5nKHQpOnRoaXMuc2V0VmFsdWVOYW1lKHQpfSx0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oVn0sdGhpcy5zZXRCeVBhcmFtPWZ1bmN0aW9uKHQpe1wic3RyaW5nXCI9PXR5cGVvZiB0P3RoaXMuc2V0VmFsdWVOYW1lT3JPaWQodCk6dm9pZCAwIT09dC5vaWQ/dGhpcy5zZXRWYWx1ZU5hbWVPck9pZCh0Lm9pZCk6dm9pZCAwIT09dC5uYW1lP3RoaXMuc2V0VmFsdWVOYW1lT3JPaWQodC5uYW1lKTp2b2lkIDAhPT10LmhleCYmdGhpcy5zZXRWYWx1ZUhleCh0LmhleCl9LHZvaWQgMCE9PXQmJnRoaXMuc2V0QnlQYXJhbSh0KX0sWnIoU3IuYXNuMS5ERVJPYmplY3RJZGVudGlmaWVyLFNyLmFzbjEuQVNOMU9iamVjdCksU3IuYXNuMS5ERVJFbnVtZXJhdGVkPWZ1bmN0aW9uKHQpe1NyLmFzbjEuREVSRW51bWVyYXRlZC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksdGhpcy5oVD1cIjBhXCIsdGhpcy5zZXRCeUJpZ0ludGVnZXI9ZnVuY3Rpb24odCl7dGhpcy5oVExWPW51bGwsdGhpcy5pc01vZGlmaWVkPSEwLHRoaXMuaFY9U3IuYXNuMS5BU04xVXRpbC5iaWdJbnRUb01pblR3b3NDb21wbGVtZW50c0hleCh0KX0sdGhpcy5zZXRCeUludGVnZXI9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IHcoU3RyaW5nKHQpLDEwKTt0aGlzLnNldEJ5QmlnSW50ZWdlcihlKX0sdGhpcy5zZXRWYWx1ZUhleD1mdW5jdGlvbih0KXt0aGlzLmhWPXR9LHRoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhWfSx2b2lkIDAhPT10JiYodm9pZCAwIT09dC5pbnQ/dGhpcy5zZXRCeUludGVnZXIodC5pbnQpOlwibnVtYmVyXCI9PXR5cGVvZiB0P3RoaXMuc2V0QnlJbnRlZ2VyKHQpOnZvaWQgMCE9PXQuaGV4JiZ0aGlzLnNldFZhbHVlSGV4KHQuaGV4KSl9LFpyKFNyLmFzbjEuREVSRW51bWVyYXRlZCxTci5hc24xLkFTTjFPYmplY3QpLFNyLmFzbjEuREVSVVRGOFN0cmluZz1mdW5jdGlvbih0KXtTci5hc24xLkRFUlVURjhTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdCksdGhpcy5oVD1cIjBjXCJ9LFpyKFNyLmFzbjEuREVSVVRGOFN0cmluZyxTci5hc24xLkRFUkFic3RyYWN0U3RyaW5nKSxTci5hc24xLkRFUk51bWVyaWNTdHJpbmc9ZnVuY3Rpb24odCl7U3IuYXNuMS5ERVJOdW1lcmljU3RyaW5nLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLHQpLHRoaXMuaFQ9XCIxMlwifSxacihTci5hc24xLkRFUk51bWVyaWNTdHJpbmcsU3IuYXNuMS5ERVJBYnN0cmFjdFN0cmluZyksU3IuYXNuMS5ERVJQcmludGFibGVTdHJpbmc9ZnVuY3Rpb24odCl7U3IuYXNuMS5ERVJQcmludGFibGVTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdCksdGhpcy5oVD1cIjEzXCJ9LFpyKFNyLmFzbjEuREVSUHJpbnRhYmxlU3RyaW5nLFNyLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcpLFNyLmFzbjEuREVSVGVsZXRleFN0cmluZz1mdW5jdGlvbih0KXtTci5hc24xLkRFUlRlbGV0ZXhTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdCksdGhpcy5oVD1cIjE0XCJ9LFpyKFNyLmFzbjEuREVSVGVsZXRleFN0cmluZyxTci5hc24xLkRFUkFic3RyYWN0U3RyaW5nKSxTci5hc24xLkRFUklBNVN0cmluZz1mdW5jdGlvbih0KXtTci5hc24xLkRFUklBNVN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyx0KSx0aGlzLmhUPVwiMTZcIn0sWnIoU3IuYXNuMS5ERVJJQTVTdHJpbmcsU3IuYXNuMS5ERVJBYnN0cmFjdFN0cmluZyksU3IuYXNuMS5ERVJWaXNpYmxlU3RyaW5nPWZ1bmN0aW9uKHQpe1NyLmFzbjEuREVSSUE1U3RyaW5nLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLHQpLHRoaXMuaFQ9XCIxYVwifSxacihTci5hc24xLkRFUlZpc2libGVTdHJpbmcsU3IuYXNuMS5ERVJBYnN0cmFjdFN0cmluZyksU3IuYXNuMS5ERVJCTVBTdHJpbmc9ZnVuY3Rpb24odCl7U3IuYXNuMS5ERVJCTVBTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdCksdGhpcy5oVD1cIjFlXCJ9LFpyKFNyLmFzbjEuREVSQk1QU3RyaW5nLFNyLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcpLFNyLmFzbjEuREVSVVRDVGltZT1mdW5jdGlvbih0KXtTci5hc24xLkRFUlVUQ1RpbWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdCksdGhpcy5oVD1cIjE3XCIsdGhpcy5zZXRCeURhdGU9ZnVuY3Rpb24odCl7dGhpcy5oVExWPW51bGwsdGhpcy5pc01vZGlmaWVkPSEwLHRoaXMuZGF0ZT10LHRoaXMucz10aGlzLmZvcm1hdERhdGUodGhpcy5kYXRlLFwidXRjXCIpLHRoaXMuaFY9a3IodGhpcy5zKX0sdGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PXRoaXMuZGF0ZSYmdm9pZCAwPT09dGhpcy5zJiYodGhpcy5kYXRlPW5ldyBEYXRlLHRoaXMucz10aGlzLmZvcm1hdERhdGUodGhpcy5kYXRlLFwidXRjXCIpLHRoaXMuaFY9a3IodGhpcy5zKSksdGhpcy5oVn0sdm9pZCAwIT09dCYmKHZvaWQgMCE9PXQuc3RyP3RoaXMuc2V0U3RyaW5nKHQuc3RyKTpcInN0cmluZ1wiPT10eXBlb2YgdCYmdC5tYXRjaCgvXlswLTldezEyfVokLyk/dGhpcy5zZXRTdHJpbmcodCk6dm9pZCAwIT09dC5oZXg/dGhpcy5zZXRTdHJpbmdIZXgodC5oZXgpOnZvaWQgMCE9PXQuZGF0ZSYmdGhpcy5zZXRCeURhdGUodC5kYXRlKSl9LFpyKFNyLmFzbjEuREVSVVRDVGltZSxTci5hc24xLkRFUkFic3RyYWN0VGltZSksU3IuYXNuMS5ERVJHZW5lcmFsaXplZFRpbWU9ZnVuY3Rpb24odCl7U3IuYXNuMS5ERVJHZW5lcmFsaXplZFRpbWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdCksdGhpcy5oVD1cIjE4XCIsdGhpcy53aXRoTWlsbGlzPSExLHRoaXMuc2V0QnlEYXRlPWZ1bmN0aW9uKHQpe3RoaXMuaFRMVj1udWxsLHRoaXMuaXNNb2RpZmllZD0hMCx0aGlzLmRhdGU9dCx0aGlzLnM9dGhpcy5mb3JtYXREYXRlKHRoaXMuZGF0ZSxcImdlblwiLHRoaXMud2l0aE1pbGxpcyksdGhpcy5oVj1rcih0aGlzLnMpfSx0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09dGhpcy5kYXRlJiZ2b2lkIDA9PT10aGlzLnMmJih0aGlzLmRhdGU9bmV3IERhdGUsdGhpcy5zPXRoaXMuZm9ybWF0RGF0ZSh0aGlzLmRhdGUsXCJnZW5cIix0aGlzLndpdGhNaWxsaXMpLHRoaXMuaFY9a3IodGhpcy5zKSksdGhpcy5oVn0sdm9pZCAwIT09dCYmKHZvaWQgMCE9PXQuc3RyP3RoaXMuc2V0U3RyaW5nKHQuc3RyKTpcInN0cmluZ1wiPT10eXBlb2YgdCYmdC5tYXRjaCgvXlswLTldezE0fVokLyk/dGhpcy5zZXRTdHJpbmcodCk6dm9pZCAwIT09dC5oZXg/dGhpcy5zZXRTdHJpbmdIZXgodC5oZXgpOnZvaWQgMCE9PXQuZGF0ZSYmdGhpcy5zZXRCeURhdGUodC5kYXRlKSwhMD09PXQubWlsbGlzJiYodGhpcy53aXRoTWlsbGlzPSEwKSl9LFpyKFNyLmFzbjEuREVSR2VuZXJhbGl6ZWRUaW1lLFNyLmFzbjEuREVSQWJzdHJhY3RUaW1lKSxTci5hc24xLkRFUlNlcXVlbmNlPWZ1bmN0aW9uKHQpe1NyLmFzbjEuREVSU2VxdWVuY2Uuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdCksdGhpcy5oVD1cIjMwXCIsdGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVwiXCIsZT0wO2U8dGhpcy5hc24xQXJyYXkubGVuZ3RoO2UrKyl7dCs9dGhpcy5hc24xQXJyYXlbZV0uZ2V0RW5jb2RlZEhleCgpfXJldHVybiB0aGlzLmhWPXQsdGhpcy5oVn19LFpyKFNyLmFzbjEuREVSU2VxdWVuY2UsU3IuYXNuMS5ERVJBYnN0cmFjdFN0cnVjdHVyZWQpLFNyLmFzbjEuREVSU2V0PWZ1bmN0aW9uKHQpe1NyLmFzbjEuREVSU2V0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLHQpLHRoaXMuaFQ9XCIzMVwiLHRoaXMuc29ydEZsYWc9ITAsdGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyBBcnJheSxlPTA7ZTx0aGlzLmFzbjFBcnJheS5sZW5ndGg7ZSsrKXt2YXIgcj10aGlzLmFzbjFBcnJheVtlXTt0LnB1c2goci5nZXRFbmNvZGVkSGV4KCkpfXJldHVybiAxPT10aGlzLnNvcnRGbGFnJiZ0LnNvcnQoKSx0aGlzLmhWPXQuam9pbihcIlwiKSx0aGlzLmhWfSx2b2lkIDAhPT10JiZ2b2lkIDAhPT10LnNvcnRmbGFnJiYwPT10LnNvcnRmbGFnJiYodGhpcy5zb3J0RmxhZz0hMSl9LFpyKFNyLmFzbjEuREVSU2V0LFNyLmFzbjEuREVSQWJzdHJhY3RTdHJ1Y3R1cmVkKSxTci5hc24xLkRFUlRhZ2dlZE9iamVjdD1mdW5jdGlvbih0KXtTci5hc24xLkRFUlRhZ2dlZE9iamVjdC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGU9U3IuYXNuMTt0aGlzLmhUPVwiYTBcIix0aGlzLmhWPVwiXCIsdGhpcy5pc0V4cGxpY2l0PSEwLHRoaXMuYXNuMU9iamVjdD1udWxsLHRoaXMuc2V0QVNOMU9iamVjdD1mdW5jdGlvbih0LGUscil7dGhpcy5oVD1lLHRoaXMuaXNFeHBsaWNpdD10LHRoaXMuYXNuMU9iamVjdD1yLHRoaXMuaXNFeHBsaWNpdD8odGhpcy5oVj10aGlzLmFzbjFPYmplY3QuZ2V0RW5jb2RlZEhleCgpLHRoaXMuaFRMVj1udWxsLHRoaXMuaXNNb2RpZmllZD0hMCk6KHRoaXMuaFY9bnVsbCx0aGlzLmhUTFY9ci5nZXRFbmNvZGVkSGV4KCksdGhpcy5oVExWPXRoaXMuaFRMVi5yZXBsYWNlKC9eLi4vLGUpLHRoaXMuaXNNb2RpZmllZD0hMSl9LHRoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhWfSx0aGlzLnNldEJ5UGFyYW09ZnVuY3Rpb24odCl7bnVsbCE9dC50YWcmJih0aGlzLmhUPXQudGFnKSxudWxsIT10LmV4cGxpY2l0JiYodGhpcy5pc0V4cGxpY2l0PXQuZXhwbGljaXQpLG51bGwhPXQudGFnZSYmKHRoaXMuaFQ9dC50YWdlLHRoaXMuaXNFeHBsaWNpdD0hMCksbnVsbCE9dC50YWdpJiYodGhpcy5oVD10LnRhZ2ksdGhpcy5pc0V4cGxpY2l0PSExKSxudWxsIT10Lm9iaiYmKHQub2JqIGluc3RhbmNlb2YgZS5BU04xT2JqZWN0Pyh0aGlzLmFzbjFPYmplY3Q9dC5vYmosdGhpcy5zZXRBU04xT2JqZWN0KHRoaXMuaXNFeHBsaWNpdCx0aGlzLmhULHRoaXMuYXNuMU9iamVjdCkpOlwib2JqZWN0XCI9PWcodC5vYmopJiYodGhpcy5hc24xT2JqZWN0PWUuQVNOMVV0aWwubmV3T2JqZWN0KHQub2JqKSx0aGlzLnNldEFTTjFPYmplY3QodGhpcy5pc0V4cGxpY2l0LHRoaXMuaFQsdGhpcy5hc24xT2JqZWN0KSkpfSxudWxsIT10JiZ0aGlzLnNldEJ5UGFyYW0odCl9LFpyKFNyLmFzbjEuREVSVGFnZ2VkT2JqZWN0LFNyLmFzbjEuQVNOMU9iamVjdCk7dmFyIFNyLGJyLHdyLEZyPW5ldyBmdW5jdGlvbigpe307ZnVuY3Rpb24gRXIodCl7Zm9yKHZhciBlPW5ldyBBcnJheSxyPTA7cjx0Lmxlbmd0aDtyKyspZVtyXT10LmNoYXJDb2RlQXQocik7cmV0dXJuIGV9ZnVuY3Rpb24geHIodCl7Zm9yKHZhciBlPVwiXCIscj0wO3I8dC5sZW5ndGg7cisrKWUrPVN0cmluZy5mcm9tQ2hhckNvZGUodFtyXSk7cmV0dXJuIGV9ZnVuY3Rpb24gQXIodCl7Zm9yKHZhciBlPVwiXCIscj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdLnRvU3RyaW5nKDE2KTsxPT1uLmxlbmd0aCYmKG49XCIwXCIrbiksZSs9bn1yZXR1cm4gZX1mdW5jdGlvbiBrcih0KXtyZXR1cm4gQXIoRXIodCkpfWZ1bmN0aW9uIFByKHQpe3JldHVybiB0PSh0PSh0PXQucmVwbGFjZSgvXFw9L2csXCJcIikpLnJlcGxhY2UoL1xcKy9nLFwiLVwiKSkucmVwbGFjZSgvXFwvL2csXCJfXCIpfWZ1bmN0aW9uIENyKHQpe3JldHVybiB0Lmxlbmd0aCU0PT0yP3QrPVwiPT1cIjp0Lmxlbmd0aCU0PT0zJiYodCs9XCI9XCIpLHQ9KHQ9dC5yZXBsYWNlKC8tL2csXCIrXCIpKS5yZXBsYWNlKC9fL2csXCIvXCIpfWZ1bmN0aW9uIFRyKHQpe3JldHVybiB0Lmxlbmd0aCUyPT0xJiYodD1cIjBcIit0KSxQcihfKHQpKX1mdW5jdGlvbiBScih0KXtyZXR1cm4gUyhDcih0KSl9ZnVuY3Rpb24gSXIodCl7cmV0dXJuIEtyKEdyKHQpKX1mdW5jdGlvbiBEcih0KXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHFyKHQpKX1mdW5jdGlvbiBMcih0KXtmb3IodmFyIGU9XCJcIixyPTA7cjx0Lmxlbmd0aC0xO3IrPTIpZSs9U3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludCh0LnN1YnN0cihyLDIpLDE2KSk7cmV0dXJuIGV9ZnVuY3Rpb24gTnIodCl7Zm9yKHZhciBlPVwiXCIscj0wO3I8dC5sZW5ndGg7cisrKWUrPShcIjBcIit0LmNoYXJDb2RlQXQocikudG9TdHJpbmcoMTYpKS5zbGljZSgtMik7cmV0dXJuIGV9ZnVuY3Rpb24gVXIodCl7cmV0dXJuIF8odCl9ZnVuY3Rpb24gQnIodCl7dmFyIGU9VXIodCkucmVwbGFjZSgvKC57NjR9KS9nLFwiJDFcXHJcXG5cIik7cmV0dXJuIGU9ZS5yZXBsYWNlKC9cXHJcXG4kLyxcIlwiKX1mdW5jdGlvbiBPcih0KXtyZXR1cm4gUyh0LnJlcGxhY2UoL1teMC05QS1aYS16XFwvKz1dKi9nLFwiXCIpKX1mdW5jdGlvbiBqcih0LGUpe3JldHVyblwiLS0tLS1CRUdJTiBcIitlK1wiLS0tLS1cXHJcXG5cIitCcih0KStcIlxcclxcbi0tLS0tRU5EIFwiK2UrXCItLS0tLVxcclxcblwifWZ1bmN0aW9uIE1yKHQsZSl7aWYoLTE9PXQuaW5kZXhPZihcIi0tLS0tQkVHSU4gXCIpKXRocm93XCJjYW4ndCBmaW5kIFBFTSBoZWFkZXI6IFwiK2U7cmV0dXJuIE9yKHQ9dm9pZCAwIT09ZT8odD10LnJlcGxhY2UobmV3IFJlZ0V4cChcIl5bXl0qLS0tLS1CRUdJTiBcIitlK1wiLS0tLS1cIiksXCJcIikpLnJlcGxhY2UobmV3IFJlZ0V4cChcIi0tLS0tRU5EIFwiK2UrXCItLS0tLVteXSokXCIpLFwiXCIpOih0PXQucmVwbGFjZSgvXlteXSotLS0tLUJFR0lOIFteLV0rLS0tLS0vLFwiXCIpKS5yZXBsYWNlKC8tLS0tLUVORCBbXi1dKy0tLS0tW15dKiQvLFwiXCIpKX1mdW5jdGlvbiBIcih0KXt2YXIgZSxyLG4saSxvLHMsYSx1LGMsaCxsO2lmKGw9dC5tYXRjaCgvXihcXGR7Mn18XFxkezR9KShcXGRcXGQpKFxcZFxcZCkoXFxkXFxkKShcXGRcXGQpKFxcZFxcZCkofFxcLlxcZCspWiQvKSlyZXR1cm4gdT1sWzFdLGU9cGFyc2VJbnQodSksMj09PXUubGVuZ3RoJiYoNTA8PWUmJmU8MTAwP2U9MTkwMCtlOjA8PWUmJmU8NTAmJihlPTJlMytlKSkscj1wYXJzZUludChsWzJdKS0xLG49cGFyc2VJbnQobFszXSksaT1wYXJzZUludChsWzRdKSxvPXBhcnNlSW50KGxbNV0pLHM9cGFyc2VJbnQobFs2XSksYT0wLFwiXCIhPT0oYz1sWzddKSYmKGg9KGMuc3Vic3RyKDEpK1wiMDBcIikuc3Vic3RyKDAsMyksYT1wYXJzZUludChoKSksRGF0ZS5VVEMoZSxyLG4saSxvLHMsYSk7dGhyb3dcInVuc3VwcG9ydGVkIHp1bHUgZm9ybWF0OiBcIit0fWZ1bmN0aW9uIFZyKHQpe3JldHVybn5+KEhyKHQpLzFlMyl9ZnVuY3Rpb24gS3IodCl7cmV0dXJuIHQucmVwbGFjZSgvJS9nLFwiXCIpfWZ1bmN0aW9uIHFyKHQpe3JldHVybiB0LnJlcGxhY2UoLyguLikvZyxcIiUkMVwiKX1mdW5jdGlvbiBKcih0KXt2YXIgZT1cIm1hbGZvcm1lZCBJUHY2IGFkZHJlc3NcIjtpZighdC5tYXRjaCgvXlswLTlBLUZhLWY6XSskLykpdGhyb3cgZTt2YXIgcj0odD10LnRvTG93ZXJDYXNlKCkpLnNwbGl0KFwiOlwiKS5sZW5ndGgtMTtpZihyPDIpdGhyb3cgZTt2YXIgbj1cIjpcIi5yZXBlYXQoNy1yKzIpLGk9KHQ9dC5yZXBsYWNlKFwiOjpcIixuKSkuc3BsaXQoXCI6XCIpO2lmKDghPWkubGVuZ3RoKXRocm93IGU7Zm9yKHZhciBvPTA7bzw4O28rKylpW29dPShcIjAwMDBcIitpW29dKS5zbGljZSgtNCk7cmV0dXJuIGkuam9pbihcIlwiKX1mdW5jdGlvbiBXcih0KXtpZighdC5tYXRjaCgvXlswLTlBLUZhLWZdezMyfSQvKSl0aHJvd1wibWFsZm9ybWVkIElQdjYgYWRkcmVzcyBvY3RldFwiO2Zvcih2YXIgZT0odD10LnRvTG93ZXJDYXNlKCkpLm1hdGNoKC8uezEsNH0vZykscj0wO3I8ODtyKyspZVtyXT1lW3JdLnJlcGxhY2UoL14wKy8sXCJcIiksXCJcIj09ZVtyXSYmKGVbcl09XCIwXCIpO3ZhciBuPSh0PVwiOlwiK2Uuam9pbihcIjpcIikrXCI6XCIpLm1hdGNoKC86KDA6KXsyLH0vZyk7aWYobnVsbD09PW4pcmV0dXJuIHQuc2xpY2UoMSwtMSk7dmFyIGk9XCJcIjtmb3Iocj0wO3I8bi5sZW5ndGg7cisrKW5bcl0ubGVuZ3RoPmkubGVuZ3RoJiYoaT1uW3JdKTtyZXR1cm4odD10LnJlcGxhY2UoaSxcIjo6XCIpKS5zbGljZSgxLC0xKX1mdW5jdGlvbiB6cih0KXt2YXIgZT1cIm1hbGZvcm1lZCBoZXggdmFsdWVcIjtpZighdC5tYXRjaCgvXihbMC05QS1GYS1mXVswLTlBLUZhLWZdKXsxLH0kLykpdGhyb3cgZTtpZig4IT10Lmxlbmd0aClyZXR1cm4gMzI9PXQubGVuZ3RoP1dyKHQpOnQ7dHJ5e3JldHVybiBwYXJzZUludCh0LnN1YnN0cigwLDIpLDE2KStcIi5cIitwYXJzZUludCh0LnN1YnN0cigyLDIpLDE2KStcIi5cIitwYXJzZUludCh0LnN1YnN0cig0LDIpLDE2KStcIi5cIitwYXJzZUludCh0LnN1YnN0cig2LDIpLDE2KX1jYXRjaCh0KXt0aHJvdyBlfX1mdW5jdGlvbiBZcih0KXtyZXR1cm4gdC5tYXRjaCgvLns0fS9nKS5tYXAoKGZ1bmN0aW9uIGUodCl7dmFyIGU9cGFyc2VJbnQodC5zdWJzdHIoMCwyKSwxNikscj1wYXJzZUludCh0LnN1YnN0cigyKSwxNik7aWYoMD09ZSZyPDEyOClyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShyKTtpZihlPDgpe3ZhciBuPTEyOHw2MyZyO3JldHVybiBEcigoMTkyfCg3JmUpPDwzfCgxOTImcik+PjYpLnRvU3RyaW5nKDE2KStuLnRvU3RyaW5nKDE2KSl9bj0xMjh8KDE1JmUpPDwyfCgxOTImcik+PjY7dmFyIGk9MTI4fDYzJnI7cmV0dXJuIERyKCgyMjR8KDI0MCZlKT4+NCkudG9TdHJpbmcoMTYpK24udG9TdHJpbmcoMTYpK2kudG9TdHJpbmcoMTYpKX0pKS5qb2luKFwiXCIpfWZ1bmN0aW9uIEdyKHQpe2Zvcih2YXIgZT1lbmNvZGVVUklDb21wb25lbnQodCkscj1cIlwiLG49MDtuPGUubGVuZ3RoO24rKylcIiVcIj09ZVtuXT8ocis9ZS5zdWJzdHIobiwzKSxuKz0yKTpyPXIrXCIlXCIra3IoZVtuXSk7cmV0dXJuIHJ9ZnVuY3Rpb24gWHIodCl7cmV0dXJuISh0Lmxlbmd0aCUyIT0wfHwhdC5tYXRjaCgvXlswLTlhLWZdKyQvKSYmIXQubWF0Y2goL15bMC05QS1GXSskLykpfWZ1bmN0aW9uICRyKHQpe3JldHVybiB0Lmxlbmd0aCUyPT0xP1wiMFwiK3Q6dC5zdWJzdHIoMCwxKT5cIjdcIj9cIjAwXCIrdDp0fUZyLmdldExibGVuPWZ1bmN0aW9uKHQsZSl7aWYoXCI4XCIhPXQuc3Vic3RyKGUrMiwxKSlyZXR1cm4gMTt2YXIgcj1wYXJzZUludCh0LnN1YnN0cihlKzMsMSkpO3JldHVybiAwPT1yPy0xOjA8ciYmcjwxMD9yKzE6LTJ9LEZyLmdldEw9ZnVuY3Rpb24odCxlKXt2YXIgcj1Gci5nZXRMYmxlbih0LGUpO3JldHVybiByPDE/XCJcIjp0LnN1YnN0cihlKzIsMipyKX0sRnIuZ2V0VmJsZW49ZnVuY3Rpb24odCxlKXt2YXIgcjtyZXR1cm5cIlwiPT0ocj1Gci5nZXRMKHQsZSkpPy0xOihcIjhcIj09PXIuc3Vic3RyKDAsMSk/bmV3IHcoci5zdWJzdHIoMiksMTYpOm5ldyB3KHIsMTYpKS5pbnRWYWx1ZSgpfSxGci5nZXRWaWR4PWZ1bmN0aW9uKHQsZSl7dmFyIHI9RnIuZ2V0TGJsZW4odCxlKTtyZXR1cm4gcjwwP3I6ZSsyKihyKzEpfSxGci5nZXRWPWZ1bmN0aW9uKHQsZSl7dmFyIHI9RnIuZ2V0VmlkeCh0LGUpLG49RnIuZ2V0VmJsZW4odCxlKTtyZXR1cm4gdC5zdWJzdHIociwyKm4pfSxGci5nZXRUTFY9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5zdWJzdHIoZSwyKStGci5nZXRMKHQsZSkrRnIuZ2V0Vih0LGUpfSxGci5nZXRUTFZibGVuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIDIrMipGci5nZXRMYmxlbih0LGUpKzIqRnIuZ2V0VmJsZW4odCxlKX0sRnIuZ2V0TmV4dFNpYmxpbmdJZHg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gRnIuZ2V0VmlkeCh0LGUpKzIqRnIuZ2V0VmJsZW4odCxlKX0sRnIuZ2V0Q2hpbGRJZHg9ZnVuY3Rpb24odCxlKXt2YXIgcixuLGksbz1GcixzPVtdO3I9by5nZXRWaWR4KHQsZSksbj0yKm8uZ2V0VmJsZW4odCxlKSxcIjAzXCI9PXQuc3Vic3RyKGUsMikmJihyKz0yLG4tPTIpLGk9MDtmb3IodmFyIGE9cjtpPD1uOyl7dmFyIHU9by5nZXRUTFZibGVuKHQsYSk7aWYoKGkrPXUpPD1uJiZzLnB1c2goYSksYSs9dSxpPj1uKWJyZWFrfXJldHVybiBzfSxGci5nZXROdGhDaGlsZElkeD1mdW5jdGlvbih0LGUscil7cmV0dXJuIEZyLmdldENoaWxkSWR4KHQsZSlbcl19LEZyLmdldElkeGJ5TGlzdD1mdW5jdGlvbih0LGUscixuKXt2YXIgaSxvLHM9RnI7cmV0dXJuIDA9PXIubGVuZ3RoP3ZvaWQgMCE9PW4mJnQuc3Vic3RyKGUsMikhPT1uPy0xOmU6KGk9ci5zaGlmdCgpKT49KG89cy5nZXRDaGlsZElkeCh0LGUpKS5sZW5ndGg/LTE6cy5nZXRJZHhieUxpc3QodCxvW2ldLHIsbil9LEZyLmdldElkeGJ5TGlzdEV4PWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBpLG8scz1GcjtpZigwPT1yLmxlbmd0aClyZXR1cm4gdm9pZCAwIT09biYmdC5zdWJzdHIoZSwyKSE9PW4/LTE6ZTtpPXIuc2hpZnQoKSxvPXMuZ2V0Q2hpbGRJZHgodCxlKTtmb3IodmFyIGE9MCx1PTA7dTxvLmxlbmd0aDt1Kyspe3ZhciBjPXQuc3Vic3RyKG9bdV0sMik7aWYoXCJudW1iZXJcIj09dHlwZW9mIGkmJiFzLmlzQ29udGV4dFRhZyhjKSYmYT09aXx8XCJzdHJpbmdcIj09dHlwZW9mIGkmJnMuaXNDb250ZXh0VGFnKGMsaSkpcmV0dXJuIHMuZ2V0SWR4YnlMaXN0RXgodCxvW3VdLHIsbik7cy5pc0NvbnRleHRUYWcoYyl8fGErK31yZXR1cm4tMX0sRnIuZ2V0VExWYnlMaXN0PWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBpPUZyLG89aS5nZXRJZHhieUxpc3QodCxlLHIsbik7cmV0dXJuLTE9PW98fG8+PXQubGVuZ3RoP251bGw6aS5nZXRUTFYodCxvKX0sRnIuZ2V0VExWYnlMaXN0RXg9ZnVuY3Rpb24odCxlLHIsbil7dmFyIGk9RnIsbz1pLmdldElkeGJ5TGlzdEV4KHQsZSxyLG4pO3JldHVybi0xPT1vP251bGw6aS5nZXRUTFYodCxvKX0sRnIuZ2V0VmJ5TGlzdD1mdW5jdGlvbih0LGUscixuLGkpe3ZhciBvLHMsYT1GcjtyZXR1cm4tMT09KG89YS5nZXRJZHhieUxpc3QodCxlLHIsbikpfHxvPj10Lmxlbmd0aD9udWxsOihzPWEuZ2V0Vih0LG8pLCEwPT09aSYmKHM9cy5zdWJzdHIoMikpLHMpfSxGci5nZXRWYnlMaXN0RXg9ZnVuY3Rpb24odCxlLHIsbixpKXt2YXIgbyxzLGE9RnI7cmV0dXJuLTE9PShvPWEuZ2V0SWR4YnlMaXN0RXgodCxlLHIsbikpP251bGw6KHM9YS5nZXRWKHQsbyksXCIwM1wiPT10LnN1YnN0cihvLDIpJiYhMSE9PWkmJihzPXMuc3Vic3RyKDIpKSxzKX0sRnIuZ2V0SW50PWZ1bmN0aW9uKHQsZSxyKXtudWxsPT1yJiYocj0tMSk7dHJ5e3ZhciBuPXQuc3Vic3RyKGUsMik7aWYoXCIwMlwiIT1uJiZcIjAzXCIhPW4pcmV0dXJuIHI7dmFyIGk9RnIuZ2V0Vih0LGUpO3JldHVyblwiMDJcIj09bj9wYXJzZUludChpLDE2KTpmdW5jdGlvbiBvKHQpe3RyeXt2YXIgZT10LnN1YnN0cigwLDIpO2lmKFwiMDBcIj09ZSlyZXR1cm4gcGFyc2VJbnQodC5zdWJzdHIoMiksMTYpO3ZhciByPXBhcnNlSW50KGUsMTYpLG49dC5zdWJzdHIoMiksaT1wYXJzZUludChuLDE2KS50b1N0cmluZygyKTtyZXR1cm5cIjBcIj09aSYmKGk9XCIwMDAwMDAwMFwiKSxpPWkuc2xpY2UoMCwwLXIpLHBhcnNlSW50KGksMil9Y2F0Y2godCl7cmV0dXJuLTF9fShpKX1jYXRjaCh0KXtyZXR1cm4gcn19LEZyLmdldE9JRD1mdW5jdGlvbih0LGUscil7bnVsbD09ciYmKHI9bnVsbCk7dHJ5e3JldHVyblwiMDZcIiE9dC5zdWJzdHIoZSwyKT9yOmZ1bmN0aW9uIG4odCl7aWYoIVhyKHQpKXJldHVybiBudWxsO3RyeXt2YXIgZT1bXSxyPXQuc3Vic3RyKDAsMiksbj1wYXJzZUludChyLDE2KTtlWzBdPW5ldyBTdHJpbmcoTWF0aC5mbG9vcihuLzQwKSksZVsxXT1uZXcgU3RyaW5nKG4lNDApO2Zvcih2YXIgaT10LnN1YnN0cigyKSxvPVtdLHM9MDtzPGkubGVuZ3RoLzI7cysrKW8ucHVzaChwYXJzZUludChpLnN1YnN0cigyKnMsMiksMTYpKTt2YXIgYT1bXSx1PVwiXCI7Zm9yKHM9MDtzPG8ubGVuZ3RoO3MrKykxMjgmb1tzXT91Kz1RcigoMTI3Jm9bc10pLnRvU3RyaW5nKDIpLDcpOih1Kz1RcigoMTI3Jm9bc10pLnRvU3RyaW5nKDIpLDcpLGEucHVzaChuZXcgU3RyaW5nKHBhcnNlSW50KHUsMikpKSx1PVwiXCIpO3ZhciBjPWUuam9pbihcIi5cIik7cmV0dXJuIGEubGVuZ3RoPjAmJihjPWMrXCIuXCIrYS5qb2luKFwiLlwiKSksY31jYXRjaCh0KXtyZXR1cm4gbnVsbH19KEZyLmdldFYodCxlKSl9Y2F0Y2godCl7cmV0dXJuIHJ9fSxGci5nZXRPSUROYW1lPWZ1bmN0aW9uKHQsZSxyKXtudWxsPT1yJiYocj1udWxsKTt0cnl7dmFyIG49RnIuZ2V0T0lEKHQsZSxyKTtpZihuPT1yKXJldHVybiByO3ZhciBpPVNyLmFzbjEueDUwOS5PSUQub2lkMm5hbWUobik7cmV0dXJuXCJcIj09aT9uOml9Y2F0Y2godCl7cmV0dXJuIHJ9fSxGci5nZXRTdHJpbmc9ZnVuY3Rpb24odCxlLHIpe251bGw9PXImJihyPW51bGwpO3RyeXtyZXR1cm4gTHIoRnIuZ2V0Vih0LGUpKX1jYXRjaCh0KXtyZXR1cm4gcn19LEZyLmhleHRvb2lkc3RyPWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uIHQoZSxyKXtyZXR1cm4gZS5sZW5ndGg+PXI/ZTpuZXcgQXJyYXkoci1lLmxlbmd0aCsxKS5qb2luKFwiMFwiKStlfSxyPVtdLG49dC5zdWJzdHIoMCwyKSxpPXBhcnNlSW50KG4sMTYpO3JbMF09bmV3IFN0cmluZyhNYXRoLmZsb29yKGkvNDApKSxyWzFdPW5ldyBTdHJpbmcoaSU0MCk7Zm9yKHZhciBvPXQuc3Vic3RyKDIpLHM9W10sYT0wO2E8by5sZW5ndGgvMjthKyspcy5wdXNoKHBhcnNlSW50KG8uc3Vic3RyKDIqYSwyKSwxNikpO3ZhciB1PVtdLGM9XCJcIjtmb3IoYT0wO2E8cy5sZW5ndGg7YSsrKTEyOCZzW2FdP2MrPWUoKDEyNyZzW2FdKS50b1N0cmluZygyKSw3KTooYys9ZSgoMTI3JnNbYV0pLnRvU3RyaW5nKDIpLDcpLHUucHVzaChuZXcgU3RyaW5nKHBhcnNlSW50KGMsMikpKSxjPVwiXCIpO3ZhciBoPXIuam9pbihcIi5cIik7cmV0dXJuIHUubGVuZ3RoPjAmJihoPWgrXCIuXCIrdS5qb2luKFwiLlwiKSksaH0sRnIuZHVtcD1mdW5jdGlvbih0LGUscixuKXt2YXIgaT1GcixvPWkuZ2V0VixzPWkuZHVtcCxhPWkuZ2V0Q2hpbGRJZHgsdT10O3QgaW5zdGFuY2VvZiBTci5hc24xLkFTTjFPYmplY3QmJih1PXQuZ2V0RW5jb2RlZEhleCgpKTt2YXIgYz1mdW5jdGlvbiB0KGUscil7cmV0dXJuIGUubGVuZ3RoPD0yKnI/ZTplLnN1YnN0cigwLHIpK1wiLi4odG90YWwgXCIrZS5sZW5ndGgvMitcImJ5dGVzKS4uXCIrZS5zdWJzdHIoZS5sZW5ndGgtcixyKX07dm9pZCAwPT09ZSYmKGU9e29tbWl0X2xvbmdfb2N0ZXQ6MzJ9KSx2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1uJiYobj1cIlwiKTt2YXIgaCxsPWUub21taXRfbG9uZ19vY3RldDtpZihcIjAxXCI9PShoPXUuc3Vic3RyKHIsMikpKXJldHVyblwiMDBcIj09KGY9byh1LHIpKT9uK1wiQk9PTEVBTiBGQUxTRVxcblwiOm4rXCJCT09MRUFOIFRSVUVcXG5cIjtpZihcIjAyXCI9PWgpcmV0dXJuIG4rXCJJTlRFR0VSIFwiK2MoZj1vKHUsciksbCkrXCJcXG5cIjtpZihcIjAzXCI9PWgpe3ZhciBmPW8odSxyKTtpZihpLmlzQVNOMUhFWChmLnN1YnN0cigyKSkpe3ZhciBnPW4rXCJCSVRTVFJJTkcsIGVuY2Fwc3VsYXRlc1xcblwiO3JldHVybiBnKz1zKGYuc3Vic3RyKDIpLGUsMCxuK1wiICBcIil9cmV0dXJuIG4rXCJCSVRTVFJJTkcgXCIrYyhmLGwpK1wiXFxuXCJ9aWYoXCIwNFwiPT1oKXtmPW8odSxyKTtpZihpLmlzQVNOMUhFWChmKSl7Zz1uK1wiT0NURVRTVFJJTkcsIGVuY2Fwc3VsYXRlc1xcblwiO3JldHVybiBnKz1zKGYsZSwwLG4rXCIgIFwiKX1yZXR1cm4gbitcIk9DVEVUU1RSSU5HIFwiK2MoZixsKStcIlxcblwifWlmKFwiMDVcIj09aClyZXR1cm4gbitcIk5VTExcXG5cIjtpZihcIjA2XCI9PWgpe3ZhciBkPW8odSxyKSxwPVNyLmFzbjEuQVNOMVV0aWwub2lkSGV4VG9JbnQoZCksdj1Tci5hc24xLng1MDkuT0lELm9pZDJuYW1lKHApLHk9cC5yZXBsYWNlKC9cXC4vZyxcIiBcIik7cmV0dXJuXCJcIiE9dj9uK1wiT2JqZWN0SWRlbnRpZmllciBcIit2K1wiIChcIit5K1wiKVxcblwiOm4rXCJPYmplY3RJZGVudGlmaWVyIChcIit5K1wiKVxcblwifWlmKFwiMGFcIj09aClyZXR1cm4gbitcIkVOVU1FUkFURUQgXCIrcGFyc2VJbnQobyh1LHIpKStcIlxcblwiO2lmKFwiMGNcIj09aClyZXR1cm4gbitcIlVURjhTdHJpbmcgJ1wiK0RyKG8odSxyKSkrXCInXFxuXCI7aWYoXCIxM1wiPT1oKXJldHVybiBuK1wiUHJpbnRhYmxlU3RyaW5nICdcIitEcihvKHUscikpK1wiJ1xcblwiO2lmKFwiMTRcIj09aClyZXR1cm4gbitcIlRlbGV0ZXhTdHJpbmcgJ1wiK0RyKG8odSxyKSkrXCInXFxuXCI7aWYoXCIxNlwiPT1oKXJldHVybiBuK1wiSUE1U3RyaW5nICdcIitEcihvKHUscikpK1wiJ1xcblwiO2lmKFwiMTdcIj09aClyZXR1cm4gbitcIlVUQ1RpbWUgXCIrRHIobyh1LHIpKStcIlxcblwiO2lmKFwiMThcIj09aClyZXR1cm4gbitcIkdlbmVyYWxpemVkVGltZSBcIitEcihvKHUscikpK1wiXFxuXCI7aWYoXCIxYVwiPT1oKXJldHVybiBuK1wiVmlzdWFsU3RyaW5nICdcIitEcihvKHUscikpK1wiJ1xcblwiO2lmKFwiMWVcIj09aClyZXR1cm4gbitcIkJNUFN0cmluZyAnXCIrWXIobyh1LHIpKStcIidcXG5cIjtpZihcIjMwXCI9PWgpe2lmKFwiMzAwMFwiPT11LnN1YnN0cihyLDQpKXJldHVybiBuK1wiU0VRVUVOQ0Uge31cXG5cIjtnPW4rXCJTRVFVRU5DRVxcblwiO3ZhciBtPWU7aWYoKDI9PShiPWEodSxyKSkubGVuZ3RofHwzPT1iLmxlbmd0aCkmJlwiMDZcIj09dS5zdWJzdHIoYlswXSwyKSYmXCIwNFwiPT11LnN1YnN0cihiW2IubGVuZ3RoLTFdLDIpKXt2PWkub2lkbmFtZShvKHUsYlswXSkpO3ZhciBfPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpO18ueDUwOUV4dE5hbWU9dixtPV99Zm9yKHZhciBTPTA7UzxiLmxlbmd0aDtTKyspZys9cyh1LG0sYltTXSxuK1wiICBcIik7cmV0dXJuIGd9aWYoXCIzMVwiPT1oKXtnPW4rXCJTRVRcXG5cIjt2YXIgYj1hKHUscik7Zm9yKFM9MDtTPGIubGVuZ3RoO1MrKylnKz1zKHUsZSxiW1NdLG4rXCIgIFwiKTtyZXR1cm4gZ31pZigwIT0oMTI4JihoPXBhcnNlSW50KGgsMTYpKSkpe3ZhciB3PTMxJmg7aWYoMCE9KDMyJmgpKXtmb3IoZz1uK1wiW1wiK3crXCJdXFxuXCIsYj1hKHUsciksUz0wO1M8Yi5sZW5ndGg7UysrKWcrPXModSxlLGJbU10sbitcIiAgXCIpO3JldHVybiBnfWY9byh1LHIpO2lmKEZyLmlzQVNOMUhFWChmKSl7dmFyIGc9bitcIltcIit3K1wiXVxcblwiO3JldHVybiBnKz1zKGYsZSwwLG4rXCIgIFwiKX1yZXR1cm4oXCI2ODc0NzQ3MFwiPT1mLnN1YnN0cigwLDgpfHxcInN1YmplY3RBbHROYW1lXCI9PT1lLng1MDlFeHROYW1lJiYyPT13KSYmKGY9RHIoZikpLGc9bitcIltcIit3K1wiXSBcIitmK1wiXFxuXCJ9cmV0dXJuIG4rXCJVTktOT1dOKFwiK2grXCIpIFwiK28odSxyKStcIlxcblwifSxGci5pc0NvbnRleHRUYWc9ZnVuY3Rpb24odCxlKXt2YXIgcixuO3Q9dC50b0xvd2VyQ2FzZSgpO3RyeXtyPXBhcnNlSW50KHQsMTYpfWNhdGNoKHQpe3JldHVybi0xfWlmKHZvaWQgMD09PWUpcmV0dXJuIDEyOD09KDE5MiZyKTt0cnl7cmV0dXJuIG51bGwhPWUubWF0Y2goL15cXFtbMC05XStcXF0kLykmJighKChuPXBhcnNlSW50KGUuc3Vic3RyKDEsZS5sZW5ndGgtMSksMTApKT4zMSkmJigxMjg9PSgxOTImcikmJigzMSZyKT09bikpfWNhdGNoKHQpe3JldHVybiExfX0sRnIuaXNBU04xSEVYPWZ1bmN0aW9uKHQpe3ZhciBlPUZyO2lmKHQubGVuZ3RoJTI9PTEpcmV0dXJuITE7dmFyIHI9ZS5nZXRWYmxlbih0LDApLG49dC5zdWJzdHIoMCwyKSxpPWUuZ2V0TCh0LDApO3JldHVybiB0Lmxlbmd0aC1uLmxlbmd0aC1pLmxlbmd0aD09MipyfSxGci5jaGVja1N0cmljdERFUj1mdW5jdGlvbih0LGUscixuLGkpe3ZhciBvPUZyO2lmKHZvaWQgMD09PXIpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiB0KXRocm93IG5ldyBFcnJvcihcIm5vdCBoZXggc3RyaW5nXCIpO2lmKHQ9dC50b0xvd2VyQ2FzZSgpLCFTci5sYW5nLlN0cmluZy5pc0hleCh0KSl0aHJvdyBuZXcgRXJyb3IoXCJub3QgaGV4IHN0cmluZ1wiKTtyPXQubGVuZ3RoLGk9KG49dC5sZW5ndGgvMik8MTI4PzE6TWF0aC5jZWlsKG4udG9TdHJpbmcoMTYpKSsxfWlmKG8uZ2V0TCh0LGUpLmxlbmd0aD4yKmkpdGhyb3cgbmV3IEVycm9yKFwiTCBvZiBUTFYgdG9vIGxvbmc6IGlkeD1cIitlKTt2YXIgcz1vLmdldFZibGVuKHQsZSk7aWYocz5uKXRocm93IG5ldyBFcnJvcihcInZhbHVlIG9mIEwgdG9vIGxvbmcgdGhhbiBoZXg6IGlkeD1cIitlKTt2YXIgYT1vLmdldFRMVih0LGUpLHU9YS5sZW5ndGgtMi1vLmdldEwodCxlKS5sZW5ndGg7aWYodSE9PTIqcyl0aHJvdyBuZXcgRXJyb3IoXCJWIHN0cmluZyBsZW5ndGggYW5kIEwncyB2YWx1ZSBub3QgdGhlIHNhbWU6XCIrdStcIi9cIisyKnMpO2lmKDA9PT1lJiZ0Lmxlbmd0aCE9YS5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwidG90YWwgbGVuZ3RoIGFuZCBUTFYgbGVuZ3RoIHVubWF0Y2g6XCIrdC5sZW5ndGgrXCIhPVwiK2EubGVuZ3RoKTt2YXIgYz10LnN1YnN0cihlLDIpO2lmKFwiMDJcIj09PWMpe3ZhciBoPW8uZ2V0VmlkeCh0LGUpO2lmKFwiMDBcIj09dC5zdWJzdHIoaCwyKSYmdC5jaGFyQ29kZUF0KGgrMik8NTYpdGhyb3cgbmV3IEVycm9yKFwibm90IGxlYXN0IHplcm9zIGZvciBERVIgSU5URUdFUlwiKX1pZigzMiZwYXJzZUludChjLDE2KSl7Zm9yKHZhciBsPW8uZ2V0VmJsZW4odCxlKSxmPTAsZz1vLmdldENoaWxkSWR4KHQsZSksZD0wO2Q8Zy5sZW5ndGg7ZCsrKXtmKz1vLmdldFRMVih0LGdbZF0pLmxlbmd0aCxvLmNoZWNrU3RyaWN0REVSKHQsZ1tkXSxyLG4saSl9aWYoMipsIT1mKXRocm93IG5ldyBFcnJvcihcInN1bSBvZiBjaGlsZHJlbidzIFRMViBsZW5ndGggYW5kIEwgdW5tYXRjaDogXCIrMipsK1wiIT1cIitmKX19LEZyLm9pZG5hbWU9ZnVuY3Rpb24odCl7dmFyIGU9U3IuYXNuMTtTci5sYW5nLlN0cmluZy5pc0hleCh0KSYmKHQ9ZS5BU04xVXRpbC5vaWRIZXhUb0ludCh0KSk7dmFyIHI9ZS54NTA5Lk9JRC5vaWQybmFtZSh0KTtyZXR1cm5cIlwiPT09ciYmKHI9dCkscn0sdm9pZCAwIT09U3ImJlNyfHwoZS5LSlVSPVNyPXt9KSx2b2lkIDAhPT1Tci5sYW5nJiZTci5sYW5nfHwoU3IubGFuZz17fSksU3IubGFuZy5TdHJpbmc9ZnVuY3Rpb24oKXt9LFwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/KGUudXRmOHRvYjY0dT1icj1mdW5jdGlvbiBlKHIpe3JldHVybiBQcih0LmZyb20ocixcInV0ZjhcIikudG9TdHJpbmcoXCJiYXNlNjRcIikpfSxlLmI2NHV0b3V0Zjg9d3I9ZnVuY3Rpb24gZShyKXtyZXR1cm4gdC5mcm9tKENyKHIpLFwiYmFzZTY0XCIpLnRvU3RyaW5nKFwidXRmOFwiKX0pOihlLnV0Zjh0b2I2NHU9YnI9ZnVuY3Rpb24gdChlKXtyZXR1cm4gVHIoS3IoR3IoZSkpKX0sZS5iNjR1dG91dGY4PXdyPWZ1bmN0aW9uIHQoZSl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChxcihScihlKSkpfSksU3IubGFuZy5TdHJpbmcuaXNJbnRlZ2VyPWZ1bmN0aW9uKHQpe3JldHVybiEhdC5tYXRjaCgvXlswLTldKyQvKXx8ISF0Lm1hdGNoKC9eLVswLTldKyQvKX0sU3IubGFuZy5TdHJpbmcuaXNIZXg9ZnVuY3Rpb24odCl7cmV0dXJuIFhyKHQpfSxTci5sYW5nLlN0cmluZy5pc0Jhc2U2ND1mdW5jdGlvbih0KXtyZXR1cm4hKCEodD10LnJlcGxhY2UoL1xccysvZyxcIlwiKSkubWF0Y2goL15bMC05QS1aYS16K1xcL10rPXswLDN9JC8pfHx0Lmxlbmd0aCU0IT0wKX0sU3IubGFuZy5TdHJpbmcuaXNCYXNlNjRVUkw9ZnVuY3Rpb24odCl7cmV0dXJuIXQubWF0Y2goL1srLz1dLykmJih0PUNyKHQpLFNyLmxhbmcuU3RyaW5nLmlzQmFzZTY0KHQpKX0sU3IubGFuZy5TdHJpbmcuaXNJbnRlZ2VyQXJyYXk9ZnVuY3Rpb24odCl7cmV0dXJuISEodD10LnJlcGxhY2UoL1xccysvZyxcIlwiKSkubWF0Y2goL15cXFtbMC05LF0rXFxdJC8pfSxTci5sYW5nLlN0cmluZy5pc1ByaW50YWJsZT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9PXQubWF0Y2goL15bMC05QS1aYS16ICcoKSssLS4vOj0/XSokLyl9LFNyLmxhbmcuU3RyaW5nLmlzSUE1PWZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT09dC5tYXRjaCgvXltcXHgyMC1cXHgyMVxceDIzLVxceDdmXSokLyl9LFNyLmxhbmcuU3RyaW5nLmlzTWFpbD1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9PXQubWF0Y2goL15bQS1aYS16MC05XXsxfVtBLVphLXowLTlfLi1dKkB7MX1bQS1aYS16MC05Xy4tXXsxLH1cXC5bQS1aYS16MC05XXsxLH0kLyl9O3ZhciBRcj1mdW5jdGlvbiB0KGUscixuKXtyZXR1cm4gbnVsbD09biYmKG49XCIwXCIpLGUubGVuZ3RoPj1yP2U6bmV3IEFycmF5KHItZS5sZW5ndGgrMSkuam9pbihuKStlfTtmdW5jdGlvbiBacih0LGUpe3ZhciByPWZ1bmN0aW9uIHQoKXt9O3IucHJvdG90eXBlPWUucHJvdG90eXBlLHQucHJvdG90eXBlPW5ldyByLHQucHJvdG90eXBlLmNvbnN0cnVjdG9yPXQsdC5zdXBlcmNsYXNzPWUucHJvdG90eXBlLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPT1PYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yJiYoZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSl9dm9pZCAwIT09U3ImJlNyfHwoZS5LSlVSPVNyPXt9KSx2b2lkIDAhPT1Tci5jcnlwdG8mJlNyLmNyeXB0b3x8KFNyLmNyeXB0bz17fSksU3IuY3J5cHRvLlV0aWw9bmV3IGZ1bmN0aW9uKCl7dGhpcy5ESUdFU1RJTkZPSEVBRD17c2hhMTpcIjMwMjEzMDA5MDYwNTJiMGUwMzAyMWEwNTAwMDQxNFwiLHNoYTIyNDpcIjMwMmQzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwNDA1MDAwNDFjXCIsc2hhMjU2OlwiMzAzMTMwMGQwNjA5NjA4NjQ4MDE2NTAzMDQwMjAxMDUwMDA0MjBcIixzaGEzODQ6XCIzMDQxMzAwZDA2MDk2MDg2NDgwMTY1MDMwNDAyMDIwNTAwMDQzMFwiLHNoYTUxMjpcIjMwNTEzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwMzA1MDAwNDQwXCIsbWQyOlwiMzAyMDMwMGMwNjA4MmE4NjQ4ODZmNzBkMDIwMjA1MDAwNDEwXCIsbWQ1OlwiMzAyMDMwMGMwNjA4MmE4NjQ4ODZmNzBkMDIwNTA1MDAwNDEwXCIscmlwZW1kMTYwOlwiMzAyMTMwMDkwNjA1MmIyNDAzMDIwMTA1MDAwNDE0XCJ9LHRoaXMuREVGQVVMVFBST1ZJREVSPXttZDU6XCJjcnlwdG9qc1wiLHNoYTE6XCJjcnlwdG9qc1wiLHNoYTIyNDpcImNyeXB0b2pzXCIsc2hhMjU2OlwiY3J5cHRvanNcIixzaGEzODQ6XCJjcnlwdG9qc1wiLHNoYTUxMjpcImNyeXB0b2pzXCIscmlwZW1kMTYwOlwiY3J5cHRvanNcIixobWFjbWQ1OlwiY3J5cHRvanNcIixobWFjc2hhMTpcImNyeXB0b2pzXCIsaG1hY3NoYTIyNDpcImNyeXB0b2pzXCIsaG1hY3NoYTI1NjpcImNyeXB0b2pzXCIsaG1hY3NoYTM4NDpcImNyeXB0b2pzXCIsaG1hY3NoYTUxMjpcImNyeXB0b2pzXCIsaG1hY3JpcGVtZDE2MDpcImNyeXB0b2pzXCIsTUQ1d2l0aFJTQTpcImNyeXB0b2pzL2pzcnNhXCIsU0hBMXdpdGhSU0E6XCJjcnlwdG9qcy9qc3JzYVwiLFNIQTIyNHdpdGhSU0E6XCJjcnlwdG9qcy9qc3JzYVwiLFNIQTI1NndpdGhSU0E6XCJjcnlwdG9qcy9qc3JzYVwiLFNIQTM4NHdpdGhSU0E6XCJjcnlwdG9qcy9qc3JzYVwiLFNIQTUxMndpdGhSU0E6XCJjcnlwdG9qcy9qc3JzYVwiLFJJUEVNRDE2MHdpdGhSU0E6XCJjcnlwdG9qcy9qc3JzYVwiLE1ENXdpdGhFQ0RTQTpcImNyeXB0b2pzL2pzcnNhXCIsU0hBMXdpdGhFQ0RTQTpcImNyeXB0b2pzL2pzcnNhXCIsU0hBMjI0d2l0aEVDRFNBOlwiY3J5cHRvanMvanNyc2FcIixTSEEyNTZ3aXRoRUNEU0E6XCJjcnlwdG9qcy9qc3JzYVwiLFNIQTM4NHdpdGhFQ0RTQTpcImNyeXB0b2pzL2pzcnNhXCIsU0hBNTEyd2l0aEVDRFNBOlwiY3J5cHRvanMvanNyc2FcIixSSVBFTUQxNjB3aXRoRUNEU0E6XCJjcnlwdG9qcy9qc3JzYVwiLFNIQTF3aXRoRFNBOlwiY3J5cHRvanMvanNyc2FcIixTSEEyMjR3aXRoRFNBOlwiY3J5cHRvanMvanNyc2FcIixTSEEyNTZ3aXRoRFNBOlwiY3J5cHRvanMvanNyc2FcIixNRDV3aXRoUlNBYW5kTUdGMTpcImNyeXB0b2pzL2pzcnNhXCIsU0hBd2l0aFJTQWFuZE1HRjE6XCJjcnlwdG9qcy9qc3JzYVwiLFNIQTF3aXRoUlNBYW5kTUdGMTpcImNyeXB0b2pzL2pzcnNhXCIsU0hBMjI0d2l0aFJTQWFuZE1HRjE6XCJjcnlwdG9qcy9qc3JzYVwiLFNIQTI1NndpdGhSU0FhbmRNR0YxOlwiY3J5cHRvanMvanNyc2FcIixTSEEzODR3aXRoUlNBYW5kTUdGMTpcImNyeXB0b2pzL2pzcnNhXCIsU0hBNTEyd2l0aFJTQWFuZE1HRjE6XCJjcnlwdG9qcy9qc3JzYVwiLFJJUEVNRDE2MHdpdGhSU0FhbmRNR0YxOlwiY3J5cHRvanMvanNyc2FcIn0sdGhpcy5DUllQVE9KU01FU1NBR0VESUdFU1ROQU1FPXttZDU6di5hbGdvLk1ENSxzaGExOnYuYWxnby5TSEExLHNoYTIyNDp2LmFsZ28uU0hBMjI0LHNoYTI1Njp2LmFsZ28uU0hBMjU2LHNoYTM4NDp2LmFsZ28uU0hBMzg0LHNoYTUxMjp2LmFsZ28uU0hBNTEyLHJpcGVtZDE2MDp2LmFsZ28uUklQRU1EMTYwfSx0aGlzLmdldERpZ2VzdEluZm9IZXg9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT10aGlzLkRJR0VTVElORk9IRUFEW2VdKXRocm93XCJhbGcgbm90IHN1cHBvcnRlZCBpbiBVdGlsLkRJR0VTVElORk9IRUFEOiBcIitlO3JldHVybiB0aGlzLkRJR0VTVElORk9IRUFEW2VdK3R9LHRoaXMuZ2V0UGFkZGVkRGlnZXN0SW5mb0hleD1mdW5jdGlvbih0LGUscil7dmFyIG49dGhpcy5nZXREaWdlc3RJbmZvSGV4KHQsZSksaT1yLzQ7aWYobi5sZW5ndGgrMjI+aSl0aHJvd1wia2V5IGlzIHRvbyBzaG9ydCBmb3IgU2lnQWxnOiBrZXlsZW49XCIrcitcIixcIitlO2Zvcih2YXIgbz1cIjAwMDFcIixzPVwiMDBcIituLGE9XCJcIix1PWktby5sZW5ndGgtcy5sZW5ndGgsYz0wO2M8dTtjKz0yKWErPVwiZmZcIjtyZXR1cm4gbythK3N9LHRoaXMuaGFzaFN0cmluZz1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgU3IuY3J5cHRvLk1lc3NhZ2VEaWdlc3Qoe2FsZzplfSkuZGlnZXN0U3RyaW5nKHQpfSx0aGlzLmhhc2hIZXg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IFNyLmNyeXB0by5NZXNzYWdlRGlnZXN0KHthbGc6ZX0pLmRpZ2VzdEhleCh0KX0sdGhpcy5zaGExPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhc2hTdHJpbmcodCxcInNoYTFcIil9LHRoaXMuc2hhMjU2PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhc2hTdHJpbmcodCxcInNoYTI1NlwiKX0sdGhpcy5zaGEyNTZIZXg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaGFzaEhleCh0LFwic2hhMjU2XCIpfSx0aGlzLnNoYTUxMj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5oYXNoU3RyaW5nKHQsXCJzaGE1MTJcIil9LHRoaXMuc2hhNTEySGV4PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhc2hIZXgodCxcInNoYTUxMlwiKX0sdGhpcy5pc0tleT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIE1lfHx0IGluc3RhbmNlb2YgU3IuY3J5cHRvLkRTQXx8dCBpbnN0YW5jZW9mIFNyLmNyeXB0by5FQ0RTQX19LFNyLmNyeXB0by5VdGlsLm1kNT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IFNyLmNyeXB0by5NZXNzYWdlRGlnZXN0KHthbGc6XCJtZDVcIixwcm92OlwiY3J5cHRvanNcIn0pLmRpZ2VzdFN0cmluZyh0KX0sU3IuY3J5cHRvLlV0aWwucmlwZW1kMTYwPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgU3IuY3J5cHRvLk1lc3NhZ2VEaWdlc3Qoe2FsZzpcInJpcGVtZDE2MFwiLHByb3Y6XCJjcnlwdG9qc1wifSkuZGlnZXN0U3RyaW5nKHQpfSxTci5jcnlwdG8uVXRpbC5TRUNVUkVSQU5ET01HRU49bmV3IEJlLFNyLmNyeXB0by5VdGlsLmdldFJhbmRvbUhleE9mTmJ5dGVzPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBBcnJheSh0KTtyZXR1cm4gU3IuY3J5cHRvLlV0aWwuU0VDVVJFUkFORE9NR0VOLm5leHRCeXRlcyhlKSxBcihlKX0sU3IuY3J5cHRvLlV0aWwuZ2V0UmFuZG9tQmlnSW50ZWdlck9mTmJ5dGVzPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgdyhTci5jcnlwdG8uVXRpbC5nZXRSYW5kb21IZXhPZk5ieXRlcyh0KSwxNil9LFNyLmNyeXB0by5VdGlsLmdldFJhbmRvbUhleE9mTmJpdHM9ZnVuY3Rpb24odCl7dmFyIGU9dCU4LHI9bmV3IEFycmF5KCh0LWUpLzgrMSk7cmV0dXJuIFNyLmNyeXB0by5VdGlsLlNFQ1VSRVJBTkRPTUdFTi5uZXh0Qnl0ZXMociksclswXT0oMjU1PDxlJjI1NV4yNTUpJnJbMF0sQXIocil9LFNyLmNyeXB0by5VdGlsLmdldFJhbmRvbUJpZ0ludGVnZXJPZk5iaXRzPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgdyhTci5jcnlwdG8uVXRpbC5nZXRSYW5kb21IZXhPZk5iaXRzKHQpLDE2KX0sU3IuY3J5cHRvLlV0aWwuZ2V0UmFuZG9tQmlnSW50ZWdlclplcm9Ub01heD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5iaXRMZW5ndGgoKTs7KXt2YXIgcj1Tci5jcnlwdG8uVXRpbC5nZXRSYW5kb21CaWdJbnRlZ2VyT2ZOYml0cyhlKTtpZigtMSE9dC5jb21wYXJlVG8ocikpcmV0dXJuIHJ9fSxTci5jcnlwdG8uVXRpbC5nZXRSYW5kb21CaWdJbnRlZ2VyTWluVG9NYXg9ZnVuY3Rpb24odCxlKXt2YXIgcj10LmNvbXBhcmVUbyhlKTtpZigxPT1yKXRocm93XCJiaU1pbiBpcyBncmVhdGVyIHRoYW4gYmlNYXhcIjtpZigwPT1yKXJldHVybiB0O3ZhciBuPWUuc3VidHJhY3QodCk7cmV0dXJuIFNyLmNyeXB0by5VdGlsLmdldFJhbmRvbUJpZ0ludGVnZXJaZXJvVG9NYXgobikuYWRkKHQpfSxTci5jcnlwdG8uTWVzc2FnZURpZ2VzdD1mdW5jdGlvbih0KXt0aGlzLnNldEFsZ0FuZFByb3ZpZGVyPWZ1bmN0aW9uKHQsZSl7aWYobnVsbCE9PSh0PVNyLmNyeXB0by5NZXNzYWdlRGlnZXN0LmdldENhbm9uaWNhbEFsZ05hbWUodCkpJiZ2b2lkIDA9PT1lJiYoZT1Tci5jcnlwdG8uVXRpbC5ERUZBVUxUUFJPVklERVJbdF0pLC0xIT1cIjptZDU6c2hhMTpzaGEyMjQ6c2hhMjU2OnNoYTM4NDpzaGE1MTI6cmlwZW1kMTYwOlwiLmluZGV4T2YodCkmJlwiY3J5cHRvanNcIj09ZSl7dHJ5e3RoaXMubWQ9U3IuY3J5cHRvLlV0aWwuQ1JZUFRPSlNNRVNTQUdFRElHRVNUTkFNRVt0XS5jcmVhdGUoKX1jYXRjaChlKXt0aHJvd1wic2V0QWxnQW5kUHJvdmlkZXIgaGFzaCBhbGcgc2V0IGZhaWwgYWxnPVwiK3QrXCIvXCIrZX10aGlzLnVwZGF0ZVN0cmluZz1mdW5jdGlvbih0KXt0aGlzLm1kLnVwZGF0ZSh0KX0sdGhpcy51cGRhdGVIZXg9ZnVuY3Rpb24odCl7dmFyIGU9di5lbmMuSGV4LnBhcnNlKHQpO3RoaXMubWQudXBkYXRlKGUpfSx0aGlzLmRpZ2VzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1kLmZpbmFsaXplKCkudG9TdHJpbmcodi5lbmMuSGV4KX0sdGhpcy5kaWdlc3RTdHJpbmc9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudXBkYXRlU3RyaW5nKHQpLHRoaXMuZGlnZXN0KCl9LHRoaXMuZGlnZXN0SGV4PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnVwZGF0ZUhleCh0KSx0aGlzLmRpZ2VzdCgpfX1pZigtMSE9XCI6c2hhMjU2OlwiLmluZGV4T2YodCkmJlwic2pjbFwiPT1lKXt0cnl7dGhpcy5tZD1uZXcgc2pjbC5oYXNoLnNoYTI1Nn1jYXRjaChlKXt0aHJvd1wic2V0QWxnQW5kUHJvdmlkZXIgaGFzaCBhbGcgc2V0IGZhaWwgYWxnPVwiK3QrXCIvXCIrZX10aGlzLnVwZGF0ZVN0cmluZz1mdW5jdGlvbih0KXt0aGlzLm1kLnVwZGF0ZSh0KX0sdGhpcy51cGRhdGVIZXg9ZnVuY3Rpb24odCl7dmFyIGU9c2pjbC5jb2RlYy5oZXgudG9CaXRzKHQpO3RoaXMubWQudXBkYXRlKGUpfSx0aGlzLmRpZ2VzdD1mdW5jdGlvbigpe3ZhciB0PXRoaXMubWQuZmluYWxpemUoKTtyZXR1cm4gc2pjbC5jb2RlYy5oZXguZnJvbUJpdHModCl9LHRoaXMuZGlnZXN0U3RyaW5nPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnVwZGF0ZVN0cmluZyh0KSx0aGlzLmRpZ2VzdCgpfSx0aGlzLmRpZ2VzdEhleD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy51cGRhdGVIZXgodCksdGhpcy5kaWdlc3QoKX19fSx0aGlzLnVwZGF0ZVN0cmluZz1mdW5jdGlvbih0KXt0aHJvd1widXBkYXRlU3RyaW5nKHN0cikgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogXCIrdGhpcy5hbGdOYW1lK1wiL1wiK3RoaXMucHJvdk5hbWV9LHRoaXMudXBkYXRlSGV4PWZ1bmN0aW9uKHQpe3Rocm93XCJ1cGRhdGVIZXgoaGV4KSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiBcIit0aGlzLmFsZ05hbWUrXCIvXCIrdGhpcy5wcm92TmFtZX0sdGhpcy5kaWdlc3Q9ZnVuY3Rpb24oKXt0aHJvd1wiZGlnZXN0KCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogXCIrdGhpcy5hbGdOYW1lK1wiL1wiK3RoaXMucHJvdk5hbWV9LHRoaXMuZGlnZXN0U3RyaW5nPWZ1bmN0aW9uKHQpe3Rocm93XCJkaWdlc3RTdHJpbmcoc3RyKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiBcIit0aGlzLmFsZ05hbWUrXCIvXCIrdGhpcy5wcm92TmFtZX0sdGhpcy5kaWdlc3RIZXg9ZnVuY3Rpb24odCl7dGhyb3dcImRpZ2VzdEhleChoZXgpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6IFwiK3RoaXMuYWxnTmFtZStcIi9cIit0aGlzLnByb3ZOYW1lfSx2b2lkIDAhPT10JiZ2b2lkIDAhPT10LmFsZyYmKHRoaXMuYWxnTmFtZT10LmFsZyx2b2lkIDA9PT10LnByb3YmJih0aGlzLnByb3ZOYW1lPVNyLmNyeXB0by5VdGlsLkRFRkFVTFRQUk9WSURFUlt0aGlzLmFsZ05hbWVdKSx0aGlzLnNldEFsZ0FuZFByb3ZpZGVyKHRoaXMuYWxnTmFtZSx0aGlzLnByb3ZOYW1lKSl9LFNyLmNyeXB0by5NZXNzYWdlRGlnZXN0LmdldENhbm9uaWNhbEFsZ05hbWU9ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQmJih0PSh0PXQudG9Mb3dlckNhc2UoKSkucmVwbGFjZSgvLS8sXCJcIikpLHR9LFNyLmNyeXB0by5NZXNzYWdlRGlnZXN0LmdldEhhc2hMZW5ndGg9ZnVuY3Rpb24odCl7dmFyIGU9U3IuY3J5cHRvLk1lc3NhZ2VEaWdlc3Qscj1lLmdldENhbm9uaWNhbEFsZ05hbWUodCk7aWYodm9pZCAwPT09ZS5IQVNITEVOR1RIW3JdKXRocm93XCJub3Qgc3VwcG9ydGVkIGFsZ29yaXRobTogXCIrdDtyZXR1cm4gZS5IQVNITEVOR1RIW3JdfSxTci5jcnlwdG8uTWVzc2FnZURpZ2VzdC5IQVNITEVOR1RIPXttZDU6MTYsc2hhMToyMCxzaGEyMjQ6Mjgsc2hhMjU2OjMyLHNoYTM4NDo0OCxzaGE1MTI6NjQscmlwZW1kMTYwOjIwfSxTci5jcnlwdG8uTWFjPWZ1bmN0aW9uKHQpe3RoaXMuc2V0QWxnQW5kUHJvdmlkZXI9ZnVuY3Rpb24odCxlKXtpZihudWxsPT0odD10LnRvTG93ZXJDYXNlKCkpJiYodD1cImhtYWNzaGExXCIpLFwiaG1hY1wiIT0odD10LnRvTG93ZXJDYXNlKCkpLnN1YnN0cigwLDQpKXRocm93XCJzZXRBbGdBbmRQcm92aWRlciB1bnN1cHBvcnRlZCBITUFDIGFsZzogXCIrdDt2b2lkIDA9PT1lJiYoZT1Tci5jcnlwdG8uVXRpbC5ERUZBVUxUUFJPVklERVJbdF0pLHRoaXMuYWxnUHJvdj10K1wiL1wiK2U7dmFyIHI9dC5zdWJzdHIoNCk7aWYoLTEhPVwiOm1kNTpzaGExOnNoYTIyNDpzaGEyNTY6c2hhMzg0OnNoYTUxMjpyaXBlbWQxNjA6XCIuaW5kZXhPZihyKSYmXCJjcnlwdG9qc1wiPT1lKXt0cnl7dmFyIG49U3IuY3J5cHRvLlV0aWwuQ1JZUFRPSlNNRVNTQUdFRElHRVNUTkFNRVtyXTt0aGlzLm1hYz12LmFsZ28uSE1BQy5jcmVhdGUobix0aGlzLnBhc3MpfWNhdGNoKHQpe3Rocm93XCJzZXRBbGdBbmRQcm92aWRlciBoYXNoIGFsZyBzZXQgZmFpbCBoYXNoQWxnPVwiK3IrXCIvXCIrdH10aGlzLnVwZGF0ZVN0cmluZz1mdW5jdGlvbih0KXt0aGlzLm1hYy51cGRhdGUodCl9LHRoaXMudXBkYXRlSGV4PWZ1bmN0aW9uKHQpe3ZhciBlPXYuZW5jLkhleC5wYXJzZSh0KTt0aGlzLm1hYy51cGRhdGUoZSl9LHRoaXMuZG9GaW5hbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1hYy5maW5hbGl6ZSgpLnRvU3RyaW5nKHYuZW5jLkhleCl9LHRoaXMuZG9GaW5hbFN0cmluZz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy51cGRhdGVTdHJpbmcodCksdGhpcy5kb0ZpbmFsKCl9LHRoaXMuZG9GaW5hbEhleD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy51cGRhdGVIZXgodCksdGhpcy5kb0ZpbmFsKCl9fX0sdGhpcy51cGRhdGVTdHJpbmc9ZnVuY3Rpb24odCl7dGhyb3dcInVwZGF0ZVN0cmluZyhzdHIpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6IFwiK3RoaXMuYWxnUHJvdn0sdGhpcy51cGRhdGVIZXg9ZnVuY3Rpb24odCl7dGhyb3dcInVwZGF0ZUhleChoZXgpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6IFwiK3RoaXMuYWxnUHJvdn0sdGhpcy5kb0ZpbmFsPWZ1bmN0aW9uKCl7dGhyb3dcImRpZ2VzdCgpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6IFwiK3RoaXMuYWxnUHJvdn0sdGhpcy5kb0ZpbmFsU3RyaW5nPWZ1bmN0aW9uKHQpe3Rocm93XCJkaWdlc3RTdHJpbmcoc3RyKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiBcIit0aGlzLmFsZ1Byb3Z9LHRoaXMuZG9GaW5hbEhleD1mdW5jdGlvbih0KXt0aHJvd1wiZGlnZXN0SGV4KGhleCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogXCIrdGhpcy5hbGdQcm92fSx0aGlzLnNldFBhc3N3b3JkPWZ1bmN0aW9uKHQpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXt2YXIgZT10O3JldHVybiB0Lmxlbmd0aCUyIT0xJiZ0Lm1hdGNoKC9eWzAtOUEtRmEtZl0rJC8pfHwoZT1Ocih0KSksdm9pZCh0aGlzLnBhc3M9di5lbmMuSGV4LnBhcnNlKGUpKX1pZihcIm9iamVjdFwiIT0odm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOmcodCkpKXRocm93XCJLSlVSLmNyeXB0by5NYWMgdW5zdXBwb3J0ZWQgcGFzc3dvcmQgdHlwZTogXCIrdDtlPW51bGw7aWYodm9pZCAwIT09dC5oZXgpe2lmKHQuaGV4Lmxlbmd0aCUyIT0wfHwhdC5oZXgubWF0Y2goL15bMC05QS1GYS1mXSskLykpdGhyb3dcIk1hYzogd3JvbmcgaGV4IHBhc3N3b3JkOiBcIit0LmhleDtlPXQuaGV4fWlmKHZvaWQgMCE9PXQudXRmOCYmKGU9SXIodC51dGY4KSksdm9pZCAwIT09dC5yc3RyJiYoZT1Ocih0LnJzdHIpKSx2b2lkIDAhPT10LmI2NCYmKGU9Uyh0LmI2NCkpLHZvaWQgMCE9PXQuYjY0dSYmKGU9UnIodC5iNjR1KSksbnVsbD09ZSl0aHJvd1wiS0pVUi5jcnlwdG8uTWFjIHVuc3VwcG9ydGVkIHBhc3N3b3JkIHR5cGU6IFwiK3Q7dGhpcy5wYXNzPXYuZW5jLkhleC5wYXJzZShlKX0sdm9pZCAwIT09dCYmKHZvaWQgMCE9PXQucGFzcyYmdGhpcy5zZXRQYXNzd29yZCh0LnBhc3MpLHZvaWQgMCE9PXQuYWxnJiYodGhpcy5hbGdOYW1lPXQuYWxnLHZvaWQgMD09PXQucHJvdiYmKHRoaXMucHJvdk5hbWU9U3IuY3J5cHRvLlV0aWwuREVGQVVMVFBST1ZJREVSW3RoaXMuYWxnTmFtZV0pLHRoaXMuc2V0QWxnQW5kUHJvdmlkZXIodGhpcy5hbGdOYW1lLHRoaXMucHJvdk5hbWUpKSl9LFNyLmNyeXB0by5TaWduYXR1cmU9ZnVuY3Rpb24odCl7dmFyIGU9bnVsbDtpZih0aGlzLl9zZXRBbGdOYW1lcz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuYWxnTmFtZS5tYXRjaCgvXiguKyl3aXRoKC4rKSQvKTt0JiYodGhpcy5tZEFsZ05hbWU9dFsxXS50b0xvd2VyQ2FzZSgpLHRoaXMucHVia2V5QWxnTmFtZT10WzJdLnRvTG93ZXJDYXNlKCksXCJyc2FhbmRtZ2YxXCI9PXRoaXMucHVia2V5QWxnTmFtZSYmXCJzaGFcIj09dGhpcy5tZEFsZ05hbWUmJih0aGlzLm1kQWxnTmFtZT1cInNoYTFcIikpfSx0aGlzLl96ZXJvUGFkZGluZ09mU2lnbmF0dXJlPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPVwiXCIsbj1lLzQtdC5sZW5ndGgsaT0wO2k8bjtpKyspcis9XCIwXCI7cmV0dXJuIHIrdH0sdGhpcy5zZXRBbGdBbmRQcm92aWRlcj1mdW5jdGlvbih0LGUpe2lmKHRoaXMuX3NldEFsZ05hbWVzKCksXCJjcnlwdG9qcy9qc3JzYVwiIT1lKXRocm93IG5ldyBFcnJvcihcInByb3ZpZGVyIG5vdCBzdXBwb3J0ZWQ6IFwiK2UpO2lmKC0xIT1cIjptZDU6c2hhMTpzaGEyMjQ6c2hhMjU2OnNoYTM4NDpzaGE1MTI6cmlwZW1kMTYwOlwiLmluZGV4T2YodGhpcy5tZEFsZ05hbWUpKXt0cnl7dGhpcy5tZD1uZXcgU3IuY3J5cHRvLk1lc3NhZ2VEaWdlc3Qoe2FsZzp0aGlzLm1kQWxnTmFtZX0pfWNhdGNoKHQpe3Rocm93IG5ldyBFcnJvcihcInNldEFsZ0FuZFByb3ZpZGVyIGhhc2ggYWxnIHNldCBmYWlsIGFsZz1cIit0aGlzLm1kQWxnTmFtZStcIi9cIit0KX10aGlzLmluaXQ9ZnVuY3Rpb24odCxlKXt2YXIgcj1udWxsO3RyeXtyPXZvaWQgMD09PWU/dG4uZ2V0S2V5KHQpOnRuLmdldEtleSh0LGUpfWNhdGNoKHQpe3Rocm93XCJpbml0IGZhaWxlZDpcIit0fWlmKCEwPT09ci5pc1ByaXZhdGUpdGhpcy5wcnZLZXk9cix0aGlzLnN0YXRlPVwiU0lHTlwiO2Vsc2V7aWYoITAhPT1yLmlzUHVibGljKXRocm93XCJpbml0IGZhaWxlZC46XCIrcjt0aGlzLnB1YktleT1yLHRoaXMuc3RhdGU9XCJWRVJJRllcIn19LHRoaXMudXBkYXRlU3RyaW5nPWZ1bmN0aW9uKHQpe3RoaXMubWQudXBkYXRlU3RyaW5nKHQpfSx0aGlzLnVwZGF0ZUhleD1mdW5jdGlvbih0KXt0aGlzLm1kLnVwZGF0ZUhleCh0KX0sdGhpcy5zaWduPWZ1bmN0aW9uKCl7aWYodGhpcy5zSGFzaEhleD10aGlzLm1kLmRpZ2VzdCgpLHZvaWQgMD09PXRoaXMucHJ2S2V5JiZ2b2lkIDAhPT10aGlzLmVjcHJ2aGV4JiZ2b2lkIDAhPT10aGlzLmVjY3VydmVuYW1lJiZ2b2lkIDAhPT1Tci5jcnlwdG8uRUNEU0EmJih0aGlzLnBydktleT1uZXcgU3IuY3J5cHRvLkVDRFNBKHtjdXJ2ZTp0aGlzLmVjY3VydmVuYW1lLHBydjp0aGlzLmVjcHJ2aGV4fSkpLHRoaXMucHJ2S2V5IGluc3RhbmNlb2YgTWUmJlwicnNhYW5kbWdmMVwiPT09dGhpcy5wdWJrZXlBbGdOYW1lKXRoaXMuaFNpZ249dGhpcy5wcnZLZXkuc2lnbldpdGhNZXNzYWdlSGFzaFBTUyh0aGlzLnNIYXNoSGV4LHRoaXMubWRBbGdOYW1lLHRoaXMucHNzU2FsdExlbik7ZWxzZSBpZih0aGlzLnBydktleSBpbnN0YW5jZW9mIE1lJiZcInJzYVwiPT09dGhpcy5wdWJrZXlBbGdOYW1lKXRoaXMuaFNpZ249dGhpcy5wcnZLZXkuc2lnbldpdGhNZXNzYWdlSGFzaCh0aGlzLnNIYXNoSGV4LHRoaXMubWRBbGdOYW1lKTtlbHNlIGlmKHRoaXMucHJ2S2V5IGluc3RhbmNlb2YgU3IuY3J5cHRvLkVDRFNBKXRoaXMuaFNpZ249dGhpcy5wcnZLZXkuc2lnbldpdGhNZXNzYWdlSGFzaCh0aGlzLnNIYXNoSGV4KTtlbHNle2lmKCEodGhpcy5wcnZLZXkgaW5zdGFuY2VvZiBTci5jcnlwdG8uRFNBKSl0aHJvd1wiU2lnbmF0dXJlOiB1bnN1cHBvcnRlZCBwcml2YXRlIGtleSBhbGc6IFwiK3RoaXMucHVia2V5QWxnTmFtZTt0aGlzLmhTaWduPXRoaXMucHJ2S2V5LnNpZ25XaXRoTWVzc2FnZUhhc2godGhpcy5zSGFzaEhleCl9cmV0dXJuIHRoaXMuaFNpZ259LHRoaXMuc2lnblN0cmluZz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy51cGRhdGVTdHJpbmcodCksdGhpcy5zaWduKCl9LHRoaXMuc2lnbkhleD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy51cGRhdGVIZXgodCksdGhpcy5zaWduKCl9LHRoaXMudmVyaWZ5PWZ1bmN0aW9uKHQpe2lmKHRoaXMuc0hhc2hIZXg9dGhpcy5tZC5kaWdlc3QoKSx2b2lkIDA9PT10aGlzLnB1YktleSYmdm9pZCAwIT09dGhpcy5lY3B1YmhleCYmdm9pZCAwIT09dGhpcy5lY2N1cnZlbmFtZSYmdm9pZCAwIT09U3IuY3J5cHRvLkVDRFNBJiYodGhpcy5wdWJLZXk9bmV3IFNyLmNyeXB0by5FQ0RTQSh7Y3VydmU6dGhpcy5lY2N1cnZlbmFtZSxwdWI6dGhpcy5lY3B1YmhleH0pKSx0aGlzLnB1YktleSBpbnN0YW5jZW9mIE1lJiZcInJzYWFuZG1nZjFcIj09PXRoaXMucHVia2V5QWxnTmFtZSlyZXR1cm4gdGhpcy5wdWJLZXkudmVyaWZ5V2l0aE1lc3NhZ2VIYXNoUFNTKHRoaXMuc0hhc2hIZXgsdCx0aGlzLm1kQWxnTmFtZSx0aGlzLnBzc1NhbHRMZW4pO2lmKHRoaXMucHViS2V5IGluc3RhbmNlb2YgTWUmJlwicnNhXCI9PT10aGlzLnB1YmtleUFsZ05hbWUpcmV0dXJuIHRoaXMucHViS2V5LnZlcmlmeVdpdGhNZXNzYWdlSGFzaCh0aGlzLnNIYXNoSGV4LHQpO2lmKHZvaWQgMCE9PVNyLmNyeXB0by5FQ0RTQSYmdGhpcy5wdWJLZXkgaW5zdGFuY2VvZiBTci5jcnlwdG8uRUNEU0EpcmV0dXJuIHRoaXMucHViS2V5LnZlcmlmeVdpdGhNZXNzYWdlSGFzaCh0aGlzLnNIYXNoSGV4LHQpO2lmKHZvaWQgMCE9PVNyLmNyeXB0by5EU0EmJnRoaXMucHViS2V5IGluc3RhbmNlb2YgU3IuY3J5cHRvLkRTQSlyZXR1cm4gdGhpcy5wdWJLZXkudmVyaWZ5V2l0aE1lc3NhZ2VIYXNoKHRoaXMuc0hhc2hIZXgsdCk7dGhyb3dcIlNpZ25hdHVyZTogdW5zdXBwb3J0ZWQgcHVibGljIGtleSBhbGc6IFwiK3RoaXMucHVia2V5QWxnTmFtZX19fSx0aGlzLmluaXQ9ZnVuY3Rpb24odCxlKXt0aHJvd1wiaW5pdChrZXksIHBhc3MpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9XCIrdGhpcy5hbGdQcm92TmFtZX0sdGhpcy51cGRhdGVTdHJpbmc9ZnVuY3Rpb24odCl7dGhyb3dcInVwZGF0ZVN0cmluZyhzdHIpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9XCIrdGhpcy5hbGdQcm92TmFtZX0sdGhpcy51cGRhdGVIZXg9ZnVuY3Rpb24odCl7dGhyb3dcInVwZGF0ZUhleChoZXgpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9XCIrdGhpcy5hbGdQcm92TmFtZX0sdGhpcy5zaWduPWZ1bmN0aW9uKCl7dGhyb3dcInNpZ24oKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PVwiK3RoaXMuYWxnUHJvdk5hbWV9LHRoaXMuc2lnblN0cmluZz1mdW5jdGlvbih0KXt0aHJvd1wiZGlnZXN0U3RyaW5nKHN0cikgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGc6cHJvdj1cIit0aGlzLmFsZ1Byb3ZOYW1lfSx0aGlzLnNpZ25IZXg9ZnVuY3Rpb24odCl7dGhyb3dcImRpZ2VzdEhleChoZXgpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9XCIrdGhpcy5hbGdQcm92TmFtZX0sdGhpcy52ZXJpZnk9ZnVuY3Rpb24odCl7dGhyb3dcInZlcmlmeShoU2lnVmFsKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PVwiK3RoaXMuYWxnUHJvdk5hbWV9LHRoaXMuaW5pdFBhcmFtcz10LHZvaWQgMCE9PXQmJih2b2lkIDAhPT10LmFsZyYmKHRoaXMuYWxnTmFtZT10LmFsZyx2b2lkIDA9PT10LnByb3Y/dGhpcy5wcm92TmFtZT1Tci5jcnlwdG8uVXRpbC5ERUZBVUxUUFJPVklERVJbdGhpcy5hbGdOYW1lXTp0aGlzLnByb3ZOYW1lPXQucHJvdix0aGlzLmFsZ1Byb3ZOYW1lPXRoaXMuYWxnTmFtZStcIjpcIit0aGlzLnByb3ZOYW1lLHRoaXMuc2V0QWxnQW5kUHJvdmlkZXIodGhpcy5hbGdOYW1lLHRoaXMucHJvdk5hbWUpLHRoaXMuX3NldEFsZ05hbWVzKCkpLHZvaWQgMCE9PXQucHNzc2FsdGxlbiYmKHRoaXMucHNzU2FsdExlbj10LnBzc3NhbHRsZW4pLHZvaWQgMCE9PXQucHJ2a2V5cGVtKSl7aWYodm9pZCAwIT09dC5wcnZrZXlwYXMpdGhyb3dcImJvdGggcHJ2a2V5cGVtIGFuZCBwcnZrZXlwYXMgcGFyYW1ldGVycyBub3Qgc3VwcG9ydGVkXCI7dHJ5e2U9dG4uZ2V0S2V5KHQucHJ2a2V5cGVtKTt0aGlzLmluaXQoZSl9Y2F0Y2godCl7dGhyb3dcImZhdGFsIGVycm9yIHRvIGxvYWQgcGVtIHByaXZhdGUga2V5OiBcIit0fX19LFNyLmNyeXB0by5DaXBoZXI9ZnVuY3Rpb24odCl7fSxTci5jcnlwdG8uQ2lwaGVyLmVuY3J5cHQ9ZnVuY3Rpb24odCxlLHIpe2lmKGUgaW5zdGFuY2VvZiBNZSYmZS5pc1B1YmxpYyl7dmFyIG49U3IuY3J5cHRvLkNpcGhlci5nZXRBbGdCeUtleUFuZE5hbWUoZSxyKTtpZihcIlJTQVwiPT09bilyZXR1cm4gZS5lbmNyeXB0KHQpO2lmKFwiUlNBT0FFUFwiPT09bilyZXR1cm4gZS5lbmNyeXB0T0FFUCh0LFwic2hhMVwiKTt2YXIgaT1uLm1hdGNoKC9eUlNBT0FFUChcXGQrKSQvKTtpZihudWxsIT09aSlyZXR1cm4gZS5lbmNyeXB0T0FFUCh0LFwic2hhXCIraVsxXSk7dGhyb3dcIkNpcGhlci5lbmNyeXB0OiB1bnN1cHBvcnRlZCBhbGdvcml0aG0gZm9yIFJTQUtleTogXCIrcn10aHJvd1wiQ2lwaGVyLmVuY3J5cHQ6IHVuc3VwcG9ydGVkIGtleSBvciBhbGdvcml0aG1cIn0sU3IuY3J5cHRvLkNpcGhlci5kZWNyeXB0PWZ1bmN0aW9uKHQsZSxyKXtpZihlIGluc3RhbmNlb2YgTWUmJmUuaXNQcml2YXRlKXt2YXIgbj1Tci5jcnlwdG8uQ2lwaGVyLmdldEFsZ0J5S2V5QW5kTmFtZShlLHIpO2lmKFwiUlNBXCI9PT1uKXJldHVybiBlLmRlY3J5cHQodCk7aWYoXCJSU0FPQUVQXCI9PT1uKXJldHVybiBlLmRlY3J5cHRPQUVQKHQsXCJzaGExXCIpO3ZhciBpPW4ubWF0Y2goL15SU0FPQUVQKFxcZCspJC8pO2lmKG51bGwhPT1pKXJldHVybiBlLmRlY3J5cHRPQUVQKHQsXCJzaGFcIitpWzFdKTt0aHJvd1wiQ2lwaGVyLmRlY3J5cHQ6IHVuc3VwcG9ydGVkIGFsZ29yaXRobSBmb3IgUlNBS2V5OiBcIityfXRocm93XCJDaXBoZXIuZGVjcnlwdDogdW5zdXBwb3J0ZWQga2V5IG9yIGFsZ29yaXRobVwifSxTci5jcnlwdG8uQ2lwaGVyLmdldEFsZ0J5S2V5QW5kTmFtZT1mdW5jdGlvbih0LGUpe2lmKHQgaW5zdGFuY2VvZiBNZSl7aWYoLTEhPVwiOlJTQTpSU0FPQUVQOlJTQU9BRVAyMjQ6UlNBT0FFUDI1NjpSU0FPQUVQMzg0OlJTQU9BRVA1MTI6XCIuaW5kZXhPZihlKSlyZXR1cm4gZTtpZihudWxsPT1lKXJldHVyblwiUlNBXCI7dGhyb3dcImdldEFsZ0J5S2V5QW5kTmFtZTogbm90IHN1cHBvcnRlZCBhbGdvcml0aG0gbmFtZSBmb3IgUlNBS2V5OiBcIitlfXRocm93XCJnZXRBbGdCeUtleUFuZE5hbWU6IG5vdCBzdXBwb3J0ZWQgYWxnb3JpdGhtIG5hbWU6IFwiK2V9LFNyLmNyeXB0by5PSUQ9bmV3IGZ1bmN0aW9uKCl7dGhpcy5vaWRoZXgybmFtZT17XCIyYTg2NDg4NmY3MGQwMTAxMDFcIjpcInJzYUVuY3J5cHRpb25cIixcIjJhODY0OGNlM2QwMjAxXCI6XCJlY1B1YmxpY0tleVwiLFwiMmE4NjQ4Y2UzODA0MDFcIjpcImRzYVwiLFwiMmE4NjQ4Y2UzZDAzMDEwN1wiOlwic2VjcDI1NnIxXCIsXCIyYjgxMDQwMDFmXCI6XCJzZWNwMTkyazFcIixcIjJiODEwNDAwMjFcIjpcInNlY3AyMjRyMVwiLFwiMmI4MTA0MDAwYVwiOlwic2VjcDI1NmsxXCIsXCIyYjgxMDQwMDIzXCI6XCJzZWNwNTIxcjFcIixcIjJiODEwNDAwMjJcIjpcInNlY3AzODRyMVwiLFwiMmE4NjQ4Y2UzODA0MDNcIjpcIlNIQTF3aXRoRFNBXCIsXCI2MDg2NDgwMTY1MDMwNDAzMDFcIjpcIlNIQTIyNHdpdGhEU0FcIixcIjYwODY0ODAxNjUwMzA0MDMwMlwiOlwiU0hBMjU2d2l0aERTQVwifX0sdm9pZCAwIT09U3ImJlNyfHwoZS5LSlVSPVNyPXt9KSx2b2lkIDAhPT1Tci5jcnlwdG8mJlNyLmNyeXB0b3x8KFNyLmNyeXB0bz17fSksU3IuY3J5cHRvLkVDRFNBPWZ1bmN0aW9uKHQpe3ZhciBlPUVycm9yLHI9dyxuPVZlLGk9U3IuY3J5cHRvLkVDRFNBLG89U3IuY3J5cHRvLkVDUGFyYW1ldGVyREIscz1pLmdldE5hbWUsYT1Gcix1PWEuZ2V0VmJ5TGlzdEV4LGM9YS5pc0FTTjFIRVgsaD1uZXcgQmU7dGhpcy50eXBlPVwiRUNcIix0aGlzLmlzUHJpdmF0ZT0hMSx0aGlzLmlzUHVibGljPSExLHRoaXMuZ2V0QmlnUmFuZG9tPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcih0LmJpdExlbmd0aCgpLGgpLm1vZCh0LnN1YnRyYWN0KHIuT05FKSkuYWRkKHIuT05FKX0sdGhpcy5zZXROYW1lZEN1cnZlPWZ1bmN0aW9uKHQpe3RoaXMuZWNwYXJhbXM9by5nZXRCeU5hbWUodCksdGhpcy5wcnZLZXlIZXg9bnVsbCx0aGlzLnB1YktleUhleD1udWxsLHRoaXMuY3VydmVOYW1lPXR9LHRoaXMuc2V0UHJpdmF0ZUtleUhleD1mdW5jdGlvbih0KXt0aGlzLmlzUHJpdmF0ZT0hMCx0aGlzLnBydktleUhleD10fSx0aGlzLnNldFB1YmxpY0tleUhleD1mdW5jdGlvbih0KXt0aGlzLmlzUHVibGljPSEwLHRoaXMucHViS2V5SGV4PXR9LHRoaXMuZ2V0UHVibGljS2V5WFlIZXg9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnB1YktleUhleDtpZihcIjA0XCIhPT10LnN1YnN0cigwLDIpKXRocm93XCJ0aGlzIG1ldGhvZCBzdXBwb3J0cyB1bmNvbXByZXNzZWQgZm9ybWF0KDA0KSBvbmx5XCI7dmFyIGU9dGhpcy5lY3BhcmFtcy5rZXlsZW4vNDtpZih0Lmxlbmd0aCE9PTIrMiplKXRocm93XCJtYWxmb3JtZWQgcHVibGljIGtleSBoZXggbGVuZ3RoXCI7dmFyIHI9e307cmV0dXJuIHIueD10LnN1YnN0cigyLGUpLHIueT10LnN1YnN0cigyK2UpLHJ9LHRoaXMuZ2V0U2hvcnROSVNUUEN1cnZlTmFtZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuY3VydmVOYW1lO3JldHVyblwic2VjcDI1NnIxXCI9PT10fHxcIk5JU1QgUC0yNTZcIj09PXR8fFwiUC0yNTZcIj09PXR8fFwicHJpbWUyNTZ2MVwiPT09dD9cIlAtMjU2XCI6XCJzZWNwMzg0cjFcIj09PXR8fFwiTklTVCBQLTM4NFwiPT09dHx8XCJQLTM4NFwiPT09dD9cIlAtMzg0XCI6bnVsbH0sdGhpcy5nZW5lcmF0ZUtleVBhaXJIZXg9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmVjcGFyYW1zLm4sZT10aGlzLmdldEJpZ1JhbmRvbSh0KSxyPXRoaXMuZWNwYXJhbXMuRy5tdWx0aXBseShlKSxuPXIuZ2V0WCgpLnRvQmlnSW50ZWdlcigpLGk9ci5nZXRZKCkudG9CaWdJbnRlZ2VyKCksbz10aGlzLmVjcGFyYW1zLmtleWxlbi80LHM9KFwiMDAwMDAwMDAwMFwiK2UudG9TdHJpbmcoMTYpKS5zbGljZSgtbyksYT1cIjA0XCIrKFwiMDAwMDAwMDAwMFwiK24udG9TdHJpbmcoMTYpKS5zbGljZSgtbykrKFwiMDAwMDAwMDAwMFwiK2kudG9TdHJpbmcoMTYpKS5zbGljZSgtbyk7cmV0dXJuIHRoaXMuc2V0UHJpdmF0ZUtleUhleChzKSx0aGlzLnNldFB1YmxpY0tleUhleChhKSx7ZWNwcnZoZXg6cyxlY3B1YmhleDphfX0sdGhpcy5zaWduV2l0aE1lc3NhZ2VIYXNoPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNpZ25IZXgodCx0aGlzLnBydktleUhleCl9LHRoaXMuc2lnbkhleD1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyByKGUsMTYpLG89dGhpcy5lY3BhcmFtcy5uLHM9bmV3IHIodC5zdWJzdHJpbmcoMCx0aGlzLmVjcGFyYW1zLmtleWxlbi80KSwxNik7ZG97dmFyIGE9dGhpcy5nZXRCaWdSYW5kb20obyksdT10aGlzLmVjcGFyYW1zLkcubXVsdGlwbHkoYSkuZ2V0WCgpLnRvQmlnSW50ZWdlcigpLm1vZChvKX13aGlsZSh1LmNvbXBhcmVUbyhyLlpFUk8pPD0wKTt2YXIgYz1hLm1vZEludmVyc2UobykubXVsdGlwbHkocy5hZGQobi5tdWx0aXBseSh1KSkpLm1vZChvKTtyZXR1cm4gaS5iaVJTU2lnVG9BU04xU2lnKHUsYyl9LHRoaXMuc2lnbj1mdW5jdGlvbih0LGUpe3ZhciBuPWUsaT10aGlzLmVjcGFyYW1zLm4sbz1yLmZyb21CeXRlQXJyYXlVbnNpZ25lZCh0KTtkb3t2YXIgcz10aGlzLmdldEJpZ1JhbmRvbShpKSxhPXRoaXMuZWNwYXJhbXMuRy5tdWx0aXBseShzKS5nZXRYKCkudG9CaWdJbnRlZ2VyKCkubW9kKGkpfXdoaWxlKGEuY29tcGFyZVRvKHcuWkVSTyk8PTApO3ZhciB1PXMubW9kSW52ZXJzZShpKS5tdWx0aXBseShvLmFkZChuLm11bHRpcGx5KGEpKSkubW9kKGkpO3JldHVybiB0aGlzLnNlcmlhbGl6ZVNpZyhhLHUpfSx0aGlzLnZlcmlmeVdpdGhNZXNzYWdlSGFzaD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnZlcmlmeUhleCh0LGUsdGhpcy5wdWJLZXlIZXgpfSx0aGlzLnZlcmlmeUhleD1mdW5jdGlvbih0LGUsbyl7dHJ5e3ZhciBzLGEsdT1pLnBhcnNlU2lnSGV4KGUpO3M9dS5yLGE9dS5zO3ZhciBjPW4uZGVjb2RlRnJvbUhleCh0aGlzLmVjcGFyYW1zLmN1cnZlLG8pLGg9bmV3IHIodC5zdWJzdHJpbmcoMCx0aGlzLmVjcGFyYW1zLmtleWxlbi80KSwxNik7cmV0dXJuIHRoaXMudmVyaWZ5UmF3KGgscyxhLGMpfWNhdGNoKHQpe3JldHVybiExfX0sdGhpcy52ZXJpZnk9ZnVuY3Rpb24odCxlLGkpe3ZhciBvLHMsYTtpZihCaXRjb2luLlV0aWwuaXNBcnJheShlKSl7dmFyIHU9dGhpcy5wYXJzZVNpZyhlKTtvPXUucixzPXUuc31lbHNle2lmKFwib2JqZWN0XCIhPT0odm9pZCAwPT09ZT9cInVuZGVmaW5lZFwiOmcoZSkpfHwhZS5yfHwhZS5zKXRocm93XCJJbnZhbGlkIHZhbHVlIGZvciBzaWduYXR1cmVcIjtvPWUucixzPWUuc31pZihpIGluc3RhbmNlb2YgVmUpYT1pO2Vsc2V7aWYoIUJpdGNvaW4uVXRpbC5pc0FycmF5KGkpKXRocm93XCJJbnZhbGlkIGZvcm1hdCBmb3IgcHVia2V5IHZhbHVlLCBtdXN0IGJlIGJ5dGUgYXJyYXkgb3IgRUNQb2ludEZwXCI7YT1uLmRlY29kZUZyb20odGhpcy5lY3BhcmFtcy5jdXJ2ZSxpKX12YXIgYz1yLmZyb21CeXRlQXJyYXlVbnNpZ25lZCh0KTtyZXR1cm4gdGhpcy52ZXJpZnlSYXcoYyxvLHMsYSl9LHRoaXMudmVyaWZ5UmF3PWZ1bmN0aW9uKHQsZSxuLGkpe3ZhciBvPXRoaXMuZWNwYXJhbXMubixzPXRoaXMuZWNwYXJhbXMuRztpZihlLmNvbXBhcmVUbyhyLk9ORSk8MHx8ZS5jb21wYXJlVG8obyk+PTApcmV0dXJuITE7aWYobi5jb21wYXJlVG8oci5PTkUpPDB8fG4uY29tcGFyZVRvKG8pPj0wKXJldHVybiExO3ZhciBhPW4ubW9kSW52ZXJzZShvKSx1PXQubXVsdGlwbHkoYSkubW9kKG8pLGM9ZS5tdWx0aXBseShhKS5tb2Qobyk7cmV0dXJuIHMubXVsdGlwbHkodSkuYWRkKGkubXVsdGlwbHkoYykpLmdldFgoKS50b0JpZ0ludGVnZXIoKS5tb2QobykuZXF1YWxzKGUpfSx0aGlzLnNlcmlhbGl6ZVNpZz1mdW5jdGlvbih0LGUpe3ZhciByPXQudG9CeXRlQXJyYXlTaWduZWQoKSxuPWUudG9CeXRlQXJyYXlTaWduZWQoKSxpPVtdO3JldHVybiBpLnB1c2goMiksaS5wdXNoKHIubGVuZ3RoKSwoaT1pLmNvbmNhdChyKSkucHVzaCgyKSxpLnB1c2gobi5sZW5ndGgpLChpPWkuY29uY2F0KG4pKS51bnNoaWZ0KGkubGVuZ3RoKSxpLnVuc2hpZnQoNDgpLGl9LHRoaXMucGFyc2VTaWc9ZnVuY3Rpb24odCl7dmFyIGU7aWYoNDghPXRbMF0pdGhyb3cgbmV3IEVycm9yKFwiU2lnbmF0dXJlIG5vdCBhIHZhbGlkIERFUlNlcXVlbmNlXCIpO2lmKDIhPXRbZT0yXSl0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBlbGVtZW50IGluIHNpZ25hdHVyZSBtdXN0IGJlIGEgREVSSW50ZWdlclwiKTt2YXIgbj10LnNsaWNlKGUrMixlKzIrdFtlKzFdKTtpZigyIT10W2UrPTIrdFtlKzFdXSl0aHJvdyBuZXcgRXJyb3IoXCJTZWNvbmQgZWxlbWVudCBpbiBzaWduYXR1cmUgbXVzdCBiZSBhIERFUkludGVnZXJcIik7dmFyIGk9dC5zbGljZShlKzIsZSsyK3RbZSsxXSk7cmV0dXJuIGUrPTIrdFtlKzFdLHtyOnIuZnJvbUJ5dGVBcnJheVVuc2lnbmVkKG4pLHM6ci5mcm9tQnl0ZUFycmF5VW5zaWduZWQoaSl9fSx0aGlzLnBhcnNlU2lnQ29tcGFjdD1mdW5jdGlvbih0KXtpZig2NSE9PXQubGVuZ3RoKXRocm93XCJTaWduYXR1cmUgaGFzIHRoZSB3cm9uZyBsZW5ndGhcIjt2YXIgZT10WzBdLTI3O2lmKGU8MHx8ZT43KXRocm93XCJJbnZhbGlkIHNpZ25hdHVyZSB0eXBlXCI7dmFyIG49dGhpcy5lY3BhcmFtcy5uO3JldHVybntyOnIuZnJvbUJ5dGVBcnJheVVuc2lnbmVkKHQuc2xpY2UoMSwzMykpLm1vZChuKSxzOnIuZnJvbUJ5dGVBcnJheVVuc2lnbmVkKHQuc2xpY2UoMzMsNjUpKS5tb2QobiksaTplfX0sdGhpcy5yZWFkUEtDUzVQcnZLZXlIZXg9ZnVuY3Rpb24odCl7aWYoITE9PT1jKHQpKXRocm93IG5ldyBFcnJvcihcIm5vdCBBU04uMSBoZXggc3RyaW5nXCIpO3ZhciBlLHIsbjt0cnl7ZT11KHQsMCxbXCJbMF1cIiwwXSxcIjA2XCIpLHI9dSh0LDAsWzFdLFwiMDRcIik7dHJ5e249dSh0LDAsW1wiWzFdXCIsMF0sXCIwM1wiKX1jYXRjaCh0KXt9fWNhdGNoKHQpe3Rocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBQS0NTIzEvNSBwbGFpbiBFQ0MgcHJpdmF0ZSBrZXlcIil9aWYodGhpcy5jdXJ2ZU5hbWU9cyhlKSx2b2lkIDA9PT10aGlzLmN1cnZlTmFtZSl0aHJvd1widW5zdXBwb3J0ZWQgY3VydmUgbmFtZVwiO3RoaXMuc2V0TmFtZWRDdXJ2ZSh0aGlzLmN1cnZlTmFtZSksdGhpcy5zZXRQdWJsaWNLZXlIZXgobiksdGhpcy5zZXRQcml2YXRlS2V5SGV4KHIpLHRoaXMuaXNQdWJsaWM9ITF9LHRoaXMucmVhZFBLQ1M4UHJ2S2V5SGV4PWZ1bmN0aW9uKHQpe2lmKCExPT09Yyh0KSl0aHJvdyBuZXcgZShcIm5vdCBBU04uMSBoZXggc3RyaW5nXCIpO3ZhciByLG4saTt0cnl7dSh0LDAsWzEsMF0sXCIwNlwiKSxyPXUodCwwLFsxLDFdLFwiMDZcIiksbj11KHQsMCxbMiwwLDFdLFwiMDRcIik7dHJ5e2k9dSh0LDAsWzIsMCxcIlsxXVwiLDBdLFwiMDNcIil9Y2F0Y2godCl7fX1jYXRjaCh0KXt0aHJvdyBuZXcgZShcIm1hbGZvcm1lZCBQS0NTIzggcGxhaW4gRUNDIHByaXZhdGUga2V5XCIpfWlmKHRoaXMuY3VydmVOYW1lPXMociksdm9pZCAwPT09dGhpcy5jdXJ2ZU5hbWUpdGhyb3cgbmV3IGUoXCJ1bnN1cHBvcnRlZCBjdXJ2ZSBuYW1lXCIpO3RoaXMuc2V0TmFtZWRDdXJ2ZSh0aGlzLmN1cnZlTmFtZSksdGhpcy5zZXRQdWJsaWNLZXlIZXgoaSksdGhpcy5zZXRQcml2YXRlS2V5SGV4KG4pLHRoaXMuaXNQdWJsaWM9ITF9LHRoaXMucmVhZFBLQ1M4UHViS2V5SGV4PWZ1bmN0aW9uKHQpe2lmKCExPT09Yyh0KSl0aHJvdyBuZXcgZShcIm5vdCBBU04uMSBoZXggc3RyaW5nXCIpO3ZhciByLG47dHJ5e3UodCwwLFswLDBdLFwiMDZcIikscj11KHQsMCxbMCwxXSxcIjA2XCIpLG49dSh0LDAsWzFdLFwiMDNcIil9Y2F0Y2godCl7dGhyb3cgbmV3IGUoXCJtYWxmb3JtZWQgUEtDUyM4IEVDQyBwdWJsaWMga2V5XCIpfWlmKHRoaXMuY3VydmVOYW1lPXMociksbnVsbD09PXRoaXMuY3VydmVOYW1lKXRocm93IG5ldyBlKFwidW5zdXBwb3J0ZWQgY3VydmUgbmFtZVwiKTt0aGlzLnNldE5hbWVkQ3VydmUodGhpcy5jdXJ2ZU5hbWUpLHRoaXMuc2V0UHVibGljS2V5SGV4KG4pfSx0aGlzLnJlYWRDZXJ0UHViS2V5SGV4PWZ1bmN0aW9uKHQscil7aWYoITE9PT1jKHQpKXRocm93IG5ldyBlKFwibm90IEFTTi4xIGhleCBzdHJpbmdcIik7dmFyIG4saTt0cnl7bj11KHQsMCxbMCw1LDAsMV0sXCIwNlwiKSxpPXUodCwwLFswLDUsMV0sXCIwM1wiKX1jYXRjaCh0KXt0aHJvdyBuZXcgZShcIm1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBFQ0MgcHVibGljIGtleVwiKX1pZih0aGlzLmN1cnZlTmFtZT1zKG4pLG51bGw9PT10aGlzLmN1cnZlTmFtZSl0aHJvdyBuZXcgZShcInVuc3VwcG9ydGVkIGN1cnZlIG5hbWVcIik7dGhpcy5zZXROYW1lZEN1cnZlKHRoaXMuY3VydmVOYW1lKSx0aGlzLnNldFB1YmxpY0tleUhleChpKX0sdm9pZCAwIT09dCYmdm9pZCAwIT09dC5jdXJ2ZSYmKHRoaXMuY3VydmVOYW1lPXQuY3VydmUpLHZvaWQgMD09PXRoaXMuY3VydmVOYW1lJiYodGhpcy5jdXJ2ZU5hbWU9XCJzZWNwMjU2cjFcIiksdGhpcy5zZXROYW1lZEN1cnZlKHRoaXMuY3VydmVOYW1lKSx2b2lkIDAhPT10JiYodm9pZCAwIT09dC5wcnYmJnRoaXMuc2V0UHJpdmF0ZUtleUhleCh0LnBydiksdm9pZCAwIT09dC5wdWImJnRoaXMuc2V0UHVibGljS2V5SGV4KHQucHViKSl9LFNyLmNyeXB0by5FQ0RTQS5wYXJzZVNpZ0hleD1mdW5jdGlvbih0KXt2YXIgZT1Tci5jcnlwdG8uRUNEU0EucGFyc2VTaWdIZXhJbkhleFJTKHQpO3JldHVybntyOm5ldyB3KGUuciwxNiksczpuZXcgdyhlLnMsMTYpfX0sU3IuY3J5cHRvLkVDRFNBLnBhcnNlU2lnSGV4SW5IZXhSUz1mdW5jdGlvbih0KXt2YXIgZT1GcixyPWUuZ2V0Q2hpbGRJZHgsbj1lLmdldFY7aWYoZS5jaGVja1N0cmljdERFUih0LDApLFwiMzBcIiE9dC5zdWJzdHIoMCwyKSl0aHJvdyBuZXcgRXJyb3IoXCJzaWduYXR1cmUgaXMgbm90IGEgQVNOLjEgc2VxdWVuY2VcIik7dmFyIGk9cih0LDApO2lmKDIhPWkubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcInNpZ25hdHVyZSBzaGFsbCBoYXZlIHR3byBlbGVtZW50c1wiKTt2YXIgbz1pWzBdLHM9aVsxXTtpZihcIjAyXCIhPXQuc3Vic3RyKG8sMikpdGhyb3cgbmV3IEVycm9yKFwiMXN0IGl0ZW0gbm90IEFTTi4xIGludGVnZXJcIik7aWYoXCIwMlwiIT10LnN1YnN0cihzLDIpKXRocm93IG5ldyBFcnJvcihcIjJuZCBpdGVtIG5vdCBBU04uMSBpbnRlZ2VyXCIpO3JldHVybntyOm4odCxvKSxzOm4odCxzKX19LFNyLmNyeXB0by5FQ0RTQS5hc24xU2lnVG9Db25jYXRTaWc9ZnVuY3Rpb24odCl7dmFyIGU9U3IuY3J5cHRvLkVDRFNBLnBhcnNlU2lnSGV4SW5IZXhSUyh0KSxyPWUucixuPWUucztpZihcIjAwXCI9PXIuc3Vic3RyKDAsMikmJnIubGVuZ3RoJTMyPT0yJiYocj1yLnN1YnN0cigyKSksXCIwMFwiPT1uLnN1YnN0cigwLDIpJiZuLmxlbmd0aCUzMj09MiYmKG49bi5zdWJzdHIoMikpLHIubGVuZ3RoJTMyPT0zMCYmKHI9XCIwMFwiK3IpLG4ubGVuZ3RoJTMyPT0zMCYmKG49XCIwMFwiK24pLHIubGVuZ3RoJTMyIT0wKXRocm93XCJ1bmtub3duIEVDRFNBIHNpZyByIGxlbmd0aCBlcnJvclwiO2lmKG4ubGVuZ3RoJTMyIT0wKXRocm93XCJ1bmtub3duIEVDRFNBIHNpZyBzIGxlbmd0aCBlcnJvclwiO3JldHVybiByK259LFNyLmNyeXB0by5FQ0RTQS5jb25jYXRTaWdUb0FTTjFTaWc9ZnVuY3Rpb24odCl7aWYodC5sZW5ndGgvMio4JTEyOCE9MCl0aHJvd1widW5rbm93biBFQ0RTQSBjb25jYXRpbmF0ZWQgci1zIHNpZyAgbGVuZ3RoIGVycm9yXCI7dmFyIGU9dC5zdWJzdHIoMCx0Lmxlbmd0aC8yKSxyPXQuc3Vic3RyKHQubGVuZ3RoLzIpO3JldHVybiBTci5jcnlwdG8uRUNEU0EuaGV4UlNTaWdUb0FTTjFTaWcoZSxyKX0sU3IuY3J5cHRvLkVDRFNBLmhleFJTU2lnVG9BU04xU2lnPWZ1bmN0aW9uKHQsZSl7dmFyIHI9bmV3IHcodCwxNiksbj1uZXcgdyhlLDE2KTtyZXR1cm4gU3IuY3J5cHRvLkVDRFNBLmJpUlNTaWdUb0FTTjFTaWcocixuKX0sU3IuY3J5cHRvLkVDRFNBLmJpUlNTaWdUb0FTTjFTaWc9ZnVuY3Rpb24odCxlKXt2YXIgcj1Tci5hc24xLG49bmV3IHIuREVSSW50ZWdlcih7YmlnaW50OnR9KSxpPW5ldyByLkRFUkludGVnZXIoe2JpZ2ludDplfSk7cmV0dXJuIG5ldyByLkRFUlNlcXVlbmNlKHthcnJheTpbbixpXX0pLmdldEVuY29kZWRIZXgoKX0sU3IuY3J5cHRvLkVDRFNBLmdldE5hbWU9ZnVuY3Rpb24odCl7cmV0dXJuXCIyYjgxMDQwMDFmXCI9PT10P1wic2VjcDE5MmsxXCI6XCIyYTg2NDhjZTNkMDMwMTA3XCI9PT10P1wic2VjcDI1NnIxXCI6XCIyYjgxMDQwMDBhXCI9PT10P1wic2VjcDI1NmsxXCI6XCIyYjgxMDQwMDIxXCI9PT10P1wic2VjcDIyNHIxXCI6XCIyYjgxMDQwMDIyXCI9PT10P1wic2VjcDM4NHIxXCI6LTEhPT1cInxzZWNwMjU2cjF8TklTVCBQLTI1NnxQLTI1NnxwcmltZTI1NnYxfFwiLmluZGV4T2YodCk/XCJzZWNwMjU2cjFcIjotMSE9PVwifHNlY3AyNTZrMXxcIi5pbmRleE9mKHQpP1wic2VjcDI1NmsxXCI6LTEhPT1cInxzZWNwMjI0cjF8TklTVCBQLTIyNHxQLTIyNHxcIi5pbmRleE9mKHQpP1wic2VjcDIyNHIxXCI6LTEhPT1cInxzZWNwMzg0cjF8TklTVCBQLTM4NHxQLTM4NHxcIi5pbmRleE9mKHQpP1wic2VjcDM4NHIxXCI6bnVsbH0sdm9pZCAwIT09U3ImJlNyfHwoZS5LSlVSPVNyPXt9KSx2b2lkIDAhPT1Tci5jcnlwdG8mJlNyLmNyeXB0b3x8KFNyLmNyeXB0bz17fSksU3IuY3J5cHRvLkVDUGFyYW1ldGVyREI9bmV3IGZ1bmN0aW9uKCl7dmFyIHQ9e30sZT17fTtmdW5jdGlvbiByKHQpe3JldHVybiBuZXcgdyh0LDE2KX10aGlzLmdldEJ5TmFtZT1mdW5jdGlvbihyKXt2YXIgbj1yO2lmKHZvaWQgMCE9PWVbbl0mJihuPWVbcl0pLHZvaWQgMCE9PXRbbl0pcmV0dXJuIHRbbl07dGhyb3dcInVucmVnaXN0ZXJlZCBFQyBjdXJ2ZSBuYW1lOiBcIitufSx0aGlzLnJlZ2lzdD1mdW5jdGlvbihuLGksbyxzLGEsdSxjLGgsbCxmLGcsZCl7dFtuXT17fTt2YXIgcD1yKG8pLHY9cihzKSx5PXIoYSksbT1yKHUpLF89cihjKSxTPW5ldyBLZShwLHYseSksYj1TLmRlY29kZVBvaW50SGV4KFwiMDRcIitoK2wpO3Rbbl0ubmFtZT1uLHRbbl0ua2V5bGVuPWksdFtuXS5jdXJ2ZT1TLHRbbl0uRz1iLHRbbl0ubj1tLHRbbl0uaD1fLHRbbl0ub2lkPWcsdFtuXS5pbmZvPWQ7Zm9yKHZhciB3PTA7dzxmLmxlbmd0aDt3KyspZVtmW3ddXT1ufX0sU3IuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KFwic2VjcDEyOHIxXCIsMTI4LFwiRkZGRkZGRkRGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZcIixcIkZGRkZGRkZERkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZDXCIsXCJFODc1NzlDMTEwNzlGNDNERDgyNDk5M0MyQ0VFNUVEM1wiLFwiRkZGRkZGRkUwMDAwMDAwMDc1QTMwRDFCOTAzOEExMTVcIixcIjFcIixcIjE2MUZGNzUyOEI4OTlCMkQwQzI4NjA3Q0E1MkM1Qjg2XCIsXCJDRjVBQzgzOTVCQUZFQjEzQzAyREEyOTJEREVEN0E4M1wiLFtdLFwiXCIsXCJzZWNwMTI4cjEgOiBTRUNHIGN1cnZlIG92ZXIgYSAxMjggYml0IHByaW1lIGZpZWxkXCIpLFNyLmNyeXB0by5FQ1BhcmFtZXRlckRCLnJlZ2lzdChcInNlY3AxNjBrMVwiLDE2MCxcIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZFRkZGRkFDNzNcIixcIjBcIixcIjdcIixcIjAxMDAwMDAwMDAwMDAwMDAwMDAwMDFCOEZBMTZERkFCOUFDQTE2QjZCM1wiLFwiMVwiLFwiM0I0QzM4MkNFMzdBQTE5MkE0MDE5RTc2MzAzNkY0RjVERDREN0VCQlwiLFwiOTM4Q0Y5MzUzMThGRENFRDZCQzI4Mjg2NTMxNzMzQzNGMDNDNEZFRVwiLFtdLFwiXCIsXCJzZWNwMTYwazEgOiBTRUNHIGN1cnZlIG92ZXIgYSAxNjAgYml0IHByaW1lIGZpZWxkXCIpLFNyLmNyeXB0by5FQ1BhcmFtZXRlckRCLnJlZ2lzdChcInNlY3AxNjByMVwiLDE2MCxcIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGN0ZGRkZGRkZcIixcIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGN0ZGRkZGRkNcIixcIjFDOTdCRUZDNTRCRDdBOEI2NUFDRjg5RjgxRDRENEFEQzU2NUZBNDVcIixcIjAxMDAwMDAwMDAwMDAwMDAwMDAwMDFGNEM4RjkyN0FFRDNDQTc1MjI1N1wiLFwiMVwiLFwiNEE5NkI1Njg4RUY1NzMyODQ2NjQ2OTg5NjhDMzhCQjkxM0NCRkM4MlwiLFwiMjNBNjI4NTUzMTY4OTQ3RDU5RENDOTEyMDQyMzUxMzc3QUM1RkIzMlwiLFtdLFwiXCIsXCJzZWNwMTYwcjEgOiBTRUNHIGN1cnZlIG92ZXIgYSAxNjAgYml0IHByaW1lIGZpZWxkXCIpLFNyLmNyeXB0by5FQ1BhcmFtZXRlckRCLnJlZ2lzdChcInNlY3AxOTJrMVwiLDE5MixcIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkVGRkZGRUUzN1wiLFwiMFwiLFwiM1wiLFwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZFMjZGMkZDMTcwRjY5NDY2QTc0REVGRDhEXCIsXCIxXCIsXCJEQjRGRjEwRUMwNTdFOUFFMjZCMDdEMDI4MEI3RjQzNDFEQTVEMUIxRUFFMDZDN0RcIixcIjlCMkYyRjZEOUM1NjI4QTc4NDQxNjNEMDE1QkU4NjM0NDA4MkFBODhEOTVFMkY5RFwiLFtdKSxTci5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoXCJzZWNwMTkycjFcIiwxOTIsXCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZGRkZGRkZGRkZGRkZcIixcIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZFRkZGRkZGRkZGRkZGRkZGQ1wiLFwiNjQyMTA1MTlFNTlDODBFNzBGQTdFOUFCNzIyNDMwNDlGRUI4REVFQ0MxNDZCOUIxXCIsXCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkY5OURFRjgzNjE0NkJDOUIxQjREMjI4MzFcIixcIjFcIixcIjE4OERBODBFQjAzMDkwRjY3Q0JGMjBFQjQzQTE4ODAwRjRGRjBBRkQ4MkZGMTAxMlwiLFwiMDcxOTJCOTVGRkM4REE3ODYzMTAxMUVENkIyNENERDU3M0Y5NzdBMTFFNzk0ODExXCIsW10pLFNyLmNyeXB0by5FQ1BhcmFtZXRlckRCLnJlZ2lzdChcInNlY3AyMjRyMVwiLDIyNCxcIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxXCIsXCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRVwiLFwiQjQwNTBBODUwQzA0QjNBQkY1NDEzMjU2NTA0NEIwQjdEN0JGRDhCQTI3MEIzOTQzMjM1NUZGQjRcIixcIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkYxNkEyRTBCOEYwM0UxM0REMjk0NTVDNUMyQTNEXCIsXCIxXCIsXCJCNzBFMENCRDZCQjRCRjdGMzIxMzkwQjk0QTAzQzFEMzU2QzIxMTIyMzQzMjgwRDYxMTVDMUQyMVwiLFwiQkQzNzYzODhCNUY3MjNGQjRDMjJERkU2Q0Q0Mzc1QTA1QTA3NDc2NDQ0RDU4MTk5ODUwMDdFMzRcIixbXSksU3IuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KFwic2VjcDI1NmsxXCIsMjU2LFwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkVGRkZGRkMyRlwiLFwiMFwiLFwiN1wiLFwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkVCQUFFRENFNkFGNDhBMDNCQkZEMjVFOENEMDM2NDE0MVwiLFwiMVwiLFwiNzlCRTY2N0VGOURDQkJBQzU1QTA2Mjk1Q0U4NzBCMDcwMjlCRkNEQjJEQ0UyOEQ5NTlGMjgxNUIxNkY4MTc5OFwiLFwiNDgzQURBNzcyNkEzQzQ2NTVEQTRGQkZDMEUxMTA4QThGRDE3QjQ0OEE2ODU1NDE5OUM0N0QwOEZGQjEwRDRCOFwiLFtdKSxTci5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoXCJzZWNwMjU2cjFcIiwyNTYsXCJGRkZGRkZGRjAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGXCIsXCJGRkZGRkZGRjAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZDXCIsXCI1QUM2MzVEOEFBM0E5M0U3QjNFQkJENTU3Njk4ODZCQzY1MUQwNkIwQ0M1M0IwRjYzQkNFM0MzRTI3RDI2MDRCXCIsXCJGRkZGRkZGRjAwMDAwMDAwRkZGRkZGRkZGRkZGRkZGRkJDRTZGQUFEQTcxNzlFODRGM0I5Q0FDMkZDNjMyNTUxXCIsXCIxXCIsXCI2QjE3RDFGMkUxMkM0MjQ3RjhCQ0U2RTU2M0E0NDBGMjc3MDM3RDgxMkRFQjMzQTBGNEExMzk0NUQ4OThDMjk2XCIsXCI0RkUzNDJFMkZFMUE3RjlCOEVFN0VCNEE3QzBGOUUxNjJCQ0UzMzU3NkIzMTVFQ0VDQkI2NDA2ODM3QkY1MUY1XCIsW1wiTklTVCBQLTI1NlwiLFwiUC0yNTZcIixcInByaW1lMjU2djFcIl0pLFNyLmNyeXB0by5FQ1BhcmFtZXRlckRCLnJlZ2lzdChcInNlY3AzODRyMVwiLDM4NCxcIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkVGRkZGRkZGRjAwMDAwMDAwMDAwMDAwMDBGRkZGRkZGRlwiLFwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZGRkZGMDAwMDAwMDAwMDAwMDAwMEZGRkZGRkZDXCIsXCJCMzMxMkZBN0UyM0VFN0U0OTg4RTA1NkJFM0Y4MkQxOTE4MUQ5QzZFRkU4MTQxMTIwMzE0MDg4RjUwMTM4NzVBQzY1NjM5OEQ4QTJFRDE5RDJBODVDOEVERDNFQzJBRUZcIixcIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkM3NjM0RDgxRjQzNzJEREY1ODFBMERCMjQ4QjBBNzdBRUNFQzE5NkFDQ0M1Mjk3M1wiLFwiMVwiLFwiQUE4N0NBMjJCRThCMDUzNzhFQjFDNzFFRjMyMEFENzQ2RTFEM0I2MjhCQTc5Qjk4NTlGNzQxRTA4MjU0MkEzODU1MDJGMjVEQkY1NTI5NkMzQTU0NUUzODcyNzYwQUI3XCIsXCIzNjE3ZGU0YTk2MjYyYzZmNWQ5ZTk4YmY5MjkyZGMyOWY4ZjQxZGJkMjg5YTE0N2NlOWRhMzExM2I1ZjBiOGMwMGE2MGIxY2UxZDdlODE5ZDdhNDMxZDdjOTBlYTBlNWZcIixbXCJOSVNUIFAtMzg0XCIsXCJQLTM4NFwiXSksU3IuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KFwic2VjcDUyMXIxXCIsNTIxLFwiMUZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZcIixcIjFGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZDXCIsXCIwNTE5NTNFQjk2MThFMUM5QTFGOTI5QTIxQTBCNjg1NDBFRUEyREE3MjVCOTlCMzE1RjNCOEI0ODk5MThFRjEwOUUxNTYxOTM5NTFFQzdFOTM3QjE2NTJDMEJEM0JCMUJGMDczNTczREY4ODNEMkMzNEYxRUY0NTFGRDQ2QjUwM0YwMFwiLFwiMUZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGQTUxODY4NzgzQkYyRjk2NkI3RkNDMDE0OEY3MDlBNUQwM0JCNUM5Qjg4OTlDNDdBRUJCNkZCNzFFOTEzODY0MDlcIixcIjFcIixcIkM2ODU4RTA2QjcwNDA0RTlDRDlFM0VDQjY2MjM5NUI0NDI5QzY0ODEzOTA1M0ZCNTIxRjgyOEFGNjA2QjREM0RCQUExNEI1RTc3RUZFNzU5MjhGRTFEQzEyN0EyRkZBOERFMzM0OEIzQzE4NTZBNDI5QkY5N0U3RTMxQzJFNUJENjZcIixcIjAxMTgzOTI5NmE3ODlhM2JjMDA0NWM4YTVmYjQyYzdkMWJkOTk4ZjU0NDQ5NTc5YjQ0NjgxN2FmYmQxNzI3M2U2NjJjOTdlZTcyOTk1ZWY0MjY0MGM1NTBiOTAxM2ZhZDA3NjEzNTNjNzA4NmEyNzJjMjQwODhiZTk0NzY5ZmQxNjY1MFwiLFtcIk5JU1QgUC01MjFcIixcIlAtNTIxXCJdKTt2YXIgdG49ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbiB0KHIsbixpKXtyZXR1cm4gZSh2LkFFUyxyLG4saSl9LGU9ZnVuY3Rpb24gdChlLHIsbixpKXt2YXIgbz12LmVuYy5IZXgucGFyc2Uocikscz12LmVuYy5IZXgucGFyc2UobiksYT12LmVuYy5IZXgucGFyc2UoaSksdT17fTt1LmtleT1zLHUuaXY9YSx1LmNpcGhlcnRleHQ9bzt2YXIgYz1lLmRlY3J5cHQodSxzLHtpdjphfSk7cmV0dXJuIHYuZW5jLkhleC5zdHJpbmdpZnkoYyl9LHI9ZnVuY3Rpb24gdChlLHIsaSl7cmV0dXJuIG4odi5BRVMsZSxyLGkpfSxuPWZ1bmN0aW9uIHQoZSxyLG4saSl7dmFyIG89di5lbmMuSGV4LnBhcnNlKHIpLHM9di5lbmMuSGV4LnBhcnNlKG4pLGE9di5lbmMuSGV4LnBhcnNlKGkpLHU9ZS5lbmNyeXB0KG8scyx7aXY6YX0pLGM9di5lbmMuSGV4LnBhcnNlKHUudG9TdHJpbmcoKSk7cmV0dXJuIHYuZW5jLkJhc2U2NC5zdHJpbmdpZnkoYyl9LGk9e1wiQUVTLTI1Ni1DQkNcIjp7cHJvYzp0LGVwcm9jOnIsa2V5bGVuOjMyLGl2bGVuOjE2fSxcIkFFUy0xOTItQ0JDXCI6e3Byb2M6dCxlcHJvYzpyLGtleWxlbjoyNCxpdmxlbjoxNn0sXCJBRVMtMTI4LUNCQ1wiOntwcm9jOnQsZXByb2M6cixrZXlsZW46MTYsaXZsZW46MTZ9LFwiREVTLUVERTMtQ0JDXCI6e3Byb2M6ZnVuY3Rpb24gdChyLG4saSl7cmV0dXJuIGUodi5UcmlwbGVERVMscixuLGkpfSxlcHJvYzpmdW5jdGlvbiB0KGUscixpKXtyZXR1cm4gbih2LlRyaXBsZURFUyxlLHIsaSl9LGtleWxlbjoyNCxpdmxlbjo4fSxcIkRFUy1DQkNcIjp7cHJvYzpmdW5jdGlvbiB0KHIsbixpKXtyZXR1cm4gZSh2LkRFUyxyLG4saSl9LGVwcm9jOmZ1bmN0aW9uIHQoZSxyLGkpe3JldHVybiBuKHYuREVTLGUscixpKX0sa2V5bGVuOjgsaXZsZW46OH19LG89ZnVuY3Rpb24gdChlKXt2YXIgcj17fSxuPWUubWF0Y2gobmV3IFJlZ0V4cChcIkRFSy1JbmZvOiAoW14sXSspLChbMC05QS1GYS1mXSspXCIsXCJtXCIpKTtuJiYoci5jaXBoZXI9blsxXSxyLml2c2FsdD1uWzJdKTt2YXIgaT1lLm1hdGNoKG5ldyBSZWdFeHAoXCItLS0tLUJFR0lOIChbQS1aXSspIFBSSVZBVEUgS0VZLS0tLS1cIikpO2kmJihyLnR5cGU9aVsxXSk7dmFyIG89LTEscz0wOy0xIT1lLmluZGV4T2YoXCJcXHJcXG5cXHJcXG5cIikmJihvPWUuaW5kZXhPZihcIlxcclxcblxcclxcblwiKSxzPTIpLC0xIT1lLmluZGV4T2YoXCJcXG5cXG5cIikmJihvPWUuaW5kZXhPZihcIlxcblxcblwiKSxzPTEpO3ZhciBhPWUuaW5kZXhPZihcIi0tLS0tRU5EXCIpO2lmKC0xIT1vJiYtMSE9YSl7dmFyIHU9ZS5zdWJzdHJpbmcobysyKnMsYS1zKTt1PXUucmVwbGFjZSgvXFxzKy9nLFwiXCIpLHIuZGF0YT11fXJldHVybiByfSxzPWZ1bmN0aW9uIHQoZSxyLG4pe2Zvcih2YXIgbz1uLnN1YnN0cmluZygwLDE2KSxzPXYuZW5jLkhleC5wYXJzZShvKSxhPXYuZW5jLlV0ZjgucGFyc2UociksdT1pW2VdLmtleWxlbitpW2VdLml2bGVuLGM9XCJcIixoPW51bGw7Oyl7dmFyIGw9di5hbGdvLk1ENS5jcmVhdGUoKTtpZihudWxsIT1oJiZsLnVwZGF0ZShoKSxsLnVwZGF0ZShhKSxsLnVwZGF0ZShzKSxoPWwuZmluYWxpemUoKSwoYys9di5lbmMuSGV4LnN0cmluZ2lmeShoKSkubGVuZ3RoPj0yKnUpYnJlYWt9dmFyIGY9e307cmV0dXJuIGYua2V5aGV4PWMuc3Vic3RyKDAsMippW2VdLmtleWxlbiksZi5pdmhleD1jLnN1YnN0cigyKmlbZV0ua2V5bGVuLDIqaVtlXS5pdmxlbiksZn0sYT1mdW5jdGlvbiB0KGUscixuLG8pe3ZhciBzPXYuZW5jLkJhc2U2NC5wYXJzZShlKSxhPXYuZW5jLkhleC5zdHJpbmdpZnkocyk7cmV0dXJuKDAsaVtyXS5wcm9jKShhLG4sbyl9O3JldHVybnt2ZXJzaW9uOlwiMS4wLjBcIixwYXJzZVBLQ1M1UEVNOmZ1bmN0aW9uIHQoZSl7cmV0dXJuIG8oZSl9LGdldEtleUFuZFVudXNlZEl2QnlQYXNzY29kZUFuZEl2c2FsdDpmdW5jdGlvbiB0KGUscixuKXtyZXR1cm4gcyhlLHIsbil9LGRlY3J5cHRLZXlCNjQ6ZnVuY3Rpb24gdChlLHIsbixpKXtyZXR1cm4gYShlLHIsbixpKX0sZ2V0RGVjcnlwdGVkS2V5SGV4OmZ1bmN0aW9uIHQoZSxyKXt2YXIgbj1vKGUpLGk9KG4udHlwZSxuLmNpcGhlciksdT1uLml2c2FsdCxjPW4uZGF0YSxoPXMoaSxyLHUpLmtleWhleDtyZXR1cm4gYShjLGksaCx1KX0sZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUHJ2S2V5SGV4OmZ1bmN0aW9uIHQoZSxyLG4sbyxhKXt2YXIgdT1cIlwiO2lmKHZvaWQgMCE9PW8mJm51bGwhPW98fChvPVwiQUVTLTI1Ni1DQkNcIiksdm9pZCAwPT09aVtvXSl0aHJvdyBuZXcgRXJyb3IoXCJLRVlVVElMIHVuc3VwcG9ydGVkIGFsZ29yaXRobTogXCIrbyk7dm9pZCAwIT09YSYmbnVsbCE9YXx8KGE9ZnVuY3Rpb24gdChlKXt2YXIgcj12LmxpYi5Xb3JkQXJyYXkucmFuZG9tKGUpO3JldHVybiB2LmVuYy5IZXguc3RyaW5naWZ5KHIpfShpW29dLml2bGVuKS50b1VwcGVyQ2FzZSgpKTt2YXIgYz1mdW5jdGlvbiB0KGUscixuLG8pe3JldHVybigwLGlbcl0uZXByb2MpKGUsbixvKX0ocixvLHMobyxuLGEpLmtleWhleCxhKTt1PVwiLS0tLS1CRUdJTiBcIitlK1wiIFBSSVZBVEUgS0VZLS0tLS1cXHJcXG5cIjtyZXR1cm4gdSs9XCJQcm9jLVR5cGU6IDQsRU5DUllQVEVEXFxyXFxuXCIsdSs9XCJERUstSW5mbzogXCIrbytcIixcIithK1wiXFxyXFxuXCIsdSs9XCJcXHJcXG5cIix1Kz1jLnJlcGxhY2UoLyguezY0fSkvZyxcIiQxXFxyXFxuXCIpLHUrPVwiXFxyXFxuLS0tLS1FTkQgXCIrZStcIiBQUklWQVRFIEtFWS0tLS0tXFxyXFxuXCJ9LHBhcnNlSGV4T2ZFbmNyeXB0ZWRQS0NTODpmdW5jdGlvbiB0KGUpe3ZhciByPUZyLG49ci5nZXRDaGlsZElkeCxpPXIuZ2V0VixvPXt9LHM9bihlLDApO2lmKDIhPXMubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDApLml0ZW1zICE9IDI6IFwiK3MubGVuZ3RoKTtvLmNpcGhlcnRleHQ9aShlLHNbMV0pO3ZhciBhPW4oZSxzWzBdKTtpZigyIT1hLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgZm9ybWF0OiBTRVFVRU5DRSgwLjApLml0ZW1zICE9IDI6IFwiK2EubGVuZ3RoKTtpZihcIjJhODY0ODg2ZjcwZDAxMDUwZFwiIT1pKGUsYVswXSkpdGhyb3cgbmV3IEVycm9yKFwidGhpcyBvbmx5IHN1cHBvcnRzIHBrY3M1UEJFUzJcIik7dmFyIHU9bihlLGFbMV0pO2lmKDIhPWEubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDAuMC4xKS5pdGVtcyAhPSAyOiBcIit1Lmxlbmd0aCk7dmFyIGM9bihlLHVbMV0pO2lmKDIhPWMubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDAuMC4xLjEpLml0ZW1zICE9IDI6IFwiK2MubGVuZ3RoKTtpZihcIjJhODY0ODg2ZjcwZDAzMDdcIiE9aShlLGNbMF0pKXRocm93XCJ0aGlzIG9ubHkgc3VwcG9ydHMgVHJpcGxlREVTXCI7by5lbmNyeXB0aW9uU2NoZW1lQWxnPVwiVHJpcGxlREVTXCIsby5lbmNyeXB0aW9uU2NoZW1lSVY9aShlLGNbMV0pO3ZhciBoPW4oZSx1WzBdKTtpZigyIT1oLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgZm9ybWF0OiBTRVFVRU5DRSgwLjAuMS4wKS5pdGVtcyAhPSAyOiBcIitoLmxlbmd0aCk7aWYoXCIyYTg2NDg4NmY3MGQwMTA1MGNcIiE9aShlLGhbMF0pKXRocm93IG5ldyBFcnJvcihcInRoaXMgb25seSBzdXBwb3J0cyBwa2NzNVBCS0RGMlwiKTt2YXIgbD1uKGUsaFsxXSk7aWYobC5sZW5ndGg8Mil0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgZm9ybWF0OiBTRVFVRU5DRSgwLjAuMS4wLjEpLml0ZW1zIDwgMjogXCIrbC5sZW5ndGgpO28ucGJrZGYyU2FsdD1pKGUsbFswXSk7dmFyIGY9aShlLGxbMV0pO3RyeXtvLnBia2RmMkl0ZXI9cGFyc2VJbnQoZiwxNil9Y2F0Y2godCl7dGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIGZvcm1hdCBwYmtkZjJJdGVyOiBcIitmKX1yZXR1cm4gb30sZ2V0UEJLREYyS2V5SGV4RnJvbVBhcmFtOmZ1bmN0aW9uIHQoZSxyKXt2YXIgbj12LmVuYy5IZXgucGFyc2UoZS5wYmtkZjJTYWx0KSxpPWUucGJrZGYySXRlcixvPXYuUEJLREYyKHIsbix7a2V5U2l6ZTo2LGl0ZXJhdGlvbnM6aX0pO3JldHVybiB2LmVuYy5IZXguc3RyaW5naWZ5KG8pfSxfZ2V0UGxhaW5QS0NTOEhleEZyb21FbmNyeXB0ZWRQS0NTOFBFTTpmdW5jdGlvbiB0KGUscil7dmFyIG49TXIoZSxcIkVOQ1JZUFRFRCBQUklWQVRFIEtFWVwiKSxpPXRoaXMucGFyc2VIZXhPZkVuY3J5cHRlZFBLQ1M4KG4pLG89dG4uZ2V0UEJLREYyS2V5SGV4RnJvbVBhcmFtKGkscikscz17fTtzLmNpcGhlcnRleHQ9di5lbmMuSGV4LnBhcnNlKGkuY2lwaGVydGV4dCk7dmFyIGE9di5lbmMuSGV4LnBhcnNlKG8pLHU9di5lbmMuSGV4LnBhcnNlKGkuZW5jcnlwdGlvblNjaGVtZUlWKSxjPXYuVHJpcGxlREVTLmRlY3J5cHQocyxhLHtpdjp1fSk7cmV0dXJuIHYuZW5jLkhleC5zdHJpbmdpZnkoYyl9LGdldEtleUZyb21FbmNyeXB0ZWRQS0NTOFBFTTpmdW5jdGlvbiB0KGUscil7dmFyIG49dGhpcy5fZ2V0UGxhaW5QS0NTOEhleEZyb21FbmNyeXB0ZWRQS0NTOFBFTShlLHIpO3JldHVybiB0aGlzLmdldEtleUZyb21QbGFpblByaXZhdGVQS0NTOEhleChuKX0scGFyc2VQbGFpblByaXZhdGVQS0NTOEhleDpmdW5jdGlvbiB0KGUpe3ZhciByPUZyLG49ci5nZXRDaGlsZElkeCxpPXIuZ2V0VixvPXthbGdwYXJhbTpudWxsfTtpZihcIjMwXCIhPWUuc3Vic3RyKDAsMikpdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIHBsYWluIFBLQ1M4IHByaXZhdGUga2V5KGNvZGU6MDAxKVwiKTt2YXIgcz1uKGUsMCk7aWYocy5sZW5ndGg8Myl0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgcGxhaW4gUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDIpXCIpO2lmKFwiMzBcIiE9ZS5zdWJzdHIoc1sxXSwyKSl0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDMpXCIpO3ZhciBhPW4oZSxzWzFdKTtpZigyIT1hLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDQpXCIpO2lmKFwiMDZcIiE9ZS5zdWJzdHIoYVswXSwyKSl0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDUpXCIpO2lmKG8uYWxnb2lkPWkoZSxhWzBdKSxcIjA2XCI9PWUuc3Vic3RyKGFbMV0sMikmJihvLmFsZ3BhcmFtPWkoZSxhWzFdKSksXCIwNFwiIT1lLnN1YnN0cihzWzJdLDIpKXRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBQS0NTOCBwcml2YXRlIGtleShjb2RlOjAwNilcIik7cmV0dXJuIG8ua2V5aWR4PXIuZ2V0VmlkeChlLHNbMl0pLG99LGdldEtleUZyb21QbGFpblByaXZhdGVQS0NTOFBFTTpmdW5jdGlvbiB0KGUpe3ZhciByPU1yKGUsXCJQUklWQVRFIEtFWVwiKTtyZXR1cm4gdGhpcy5nZXRLZXlGcm9tUGxhaW5Qcml2YXRlUEtDUzhIZXgocil9LGdldEtleUZyb21QbGFpblByaXZhdGVQS0NTOEhleDpmdW5jdGlvbiB0KGUpe3ZhciByLG49dGhpcy5wYXJzZVBsYWluUHJpdmF0ZVBLQ1M4SGV4KGUpO2lmKFwiMmE4NjQ4ODZmNzBkMDEwMTAxXCI9PW4uYWxnb2lkKXI9bmV3IE1lO2Vsc2UgaWYoXCIyYTg2NDhjZTM4MDQwMVwiPT1uLmFsZ29pZClyPW5ldyBTci5jcnlwdG8uRFNBO2Vsc2V7aWYoXCIyYTg2NDhjZTNkMDIwMVwiIT1uLmFsZ29pZCl0aHJvdyBuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZCBwcml2YXRlIGtleSBhbGdvcml0aG1cIik7cj1uZXcgU3IuY3J5cHRvLkVDRFNBfXJldHVybiByLnJlYWRQS0NTOFBydktleUhleChlKSxyfSxfZ2V0S2V5RnJvbVB1YmxpY1BLQ1M4SGV4OmZ1bmN0aW9uIHQoZSl7dmFyIHIsbj1Gci5nZXRWYnlMaXN0KGUsMCxbMCwwXSxcIjA2XCIpO2lmKFwiMmE4NjQ4ODZmNzBkMDEwMTAxXCI9PT1uKXI9bmV3IE1lO2Vsc2UgaWYoXCIyYTg2NDhjZTM4MDQwMVwiPT09bilyPW5ldyBTci5jcnlwdG8uRFNBO2Vsc2V7aWYoXCIyYTg2NDhjZTNkMDIwMVwiIT09bil0aHJvdyBuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZCBQS0NTIzggcHVibGljIGtleSBoZXhcIik7cj1uZXcgU3IuY3J5cHRvLkVDRFNBfXJldHVybiByLnJlYWRQS0NTOFB1YktleUhleChlKSxyfSxwYXJzZVB1YmxpY1Jhd1JTQUtleUhleDpmdW5jdGlvbiB0KGUpe3ZhciByPUZyLG49ci5nZXRDaGlsZElkeCxpPXIuZ2V0VixvPXt9O2lmKFwiMzBcIiE9ZS5zdWJzdHIoMCwyKSl0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgUlNBIGtleShjb2RlOjAwMSlcIik7dmFyIHM9bihlLDApO2lmKDIhPXMubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBSU0Ega2V5KGNvZGU6MDAyKVwiKTtpZihcIjAyXCIhPWUuc3Vic3RyKHNbMF0sMikpdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIFJTQSBrZXkoY29kZTowMDMpXCIpO2lmKG8ubj1pKGUsc1swXSksXCIwMlwiIT1lLnN1YnN0cihzWzFdLDIpKXRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBSU0Ega2V5KGNvZGU6MDA0KVwiKTtyZXR1cm4gby5lPWkoZSxzWzFdKSxvfSxwYXJzZVB1YmxpY1BLQ1M4SGV4OmZ1bmN0aW9uIHQoZSl7dmFyIHI9RnIsbj1yLmdldENoaWxkSWR4LGk9ci5nZXRWLG89e2FsZ3BhcmFtOm51bGx9LHM9bihlLDApO2lmKDIhPXMubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIm91dGVyIERFUlNlcXVlbmNlIHNoYWxsIGhhdmUgMiBlbGVtZW50czogXCIrcy5sZW5ndGgpO3ZhciBhPXNbMF07aWYoXCIzMFwiIT1lLnN1YnN0cihhLDIpKXRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBQS0NTOCBwdWJsaWMga2V5KGNvZGU6MDAxKVwiKTt2YXIgdT1uKGUsYSk7aWYoMiE9dS5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIFBLQ1M4IHB1YmxpYyBrZXkoY29kZTowMDIpXCIpO2lmKFwiMDZcIiE9ZS5zdWJzdHIodVswXSwyKSl0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgUEtDUzggcHVibGljIGtleShjb2RlOjAwMylcIik7aWYoby5hbGdvaWQ9aShlLHVbMF0pLFwiMDZcIj09ZS5zdWJzdHIodVsxXSwyKT9vLmFsZ3BhcmFtPWkoZSx1WzFdKTpcIjMwXCI9PWUuc3Vic3RyKHVbMV0sMikmJihvLmFsZ3BhcmFtPXt9LG8uYWxncGFyYW0ucD1yLmdldFZieUxpc3QoZSx1WzFdLFswXSxcIjAyXCIpLG8uYWxncGFyYW0ucT1yLmdldFZieUxpc3QoZSx1WzFdLFsxXSxcIjAyXCIpLG8uYWxncGFyYW0uZz1yLmdldFZieUxpc3QoZSx1WzFdLFsyXSxcIjAyXCIpKSxcIjAzXCIhPWUuc3Vic3RyKHNbMV0sMikpdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIFBLQ1M4IHB1YmxpYyBrZXkoY29kZTowMDQpXCIpO3JldHVybiBvLmtleT1pKGUsc1sxXSkuc3Vic3RyKDIpLG99fX0oKTt0bi5nZXRLZXk9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPSh2PUZyKS5nZXRDaGlsZElkeCxpPSh2LmdldFYsdi5nZXRWYnlMaXN0KSxvPVNyLmNyeXB0byxzPW8uRUNEU0EsYT1vLkRTQSx1PU1lLGM9TXIsaD10bjtpZih2b2lkIDAhPT11JiZ0IGluc3RhbmNlb2YgdSlyZXR1cm4gdDtpZih2b2lkIDAhPT1zJiZ0IGluc3RhbmNlb2YgcylyZXR1cm4gdDtpZih2b2lkIDAhPT1hJiZ0IGluc3RhbmNlb2YgYSlyZXR1cm4gdDtpZih2b2lkIDAhPT10LmN1cnZlJiZ2b2lkIDAhPT10Lnh5JiZ2b2lkIDA9PT10LmQpcmV0dXJuIG5ldyBzKHtwdWI6dC54eSxjdXJ2ZTp0LmN1cnZlfSk7aWYodm9pZCAwIT09dC5jdXJ2ZSYmdm9pZCAwIT09dC5kKXJldHVybiBuZXcgcyh7cHJ2OnQuZCxjdXJ2ZTp0LmN1cnZlfSk7aWYodm9pZCAwPT09dC5rdHkmJnZvaWQgMCE9PXQubiYmdm9pZCAwIT09dC5lJiZ2b2lkIDA9PT10LmQpcmV0dXJuKFA9bmV3IHUpLnNldFB1YmxpYyh0Lm4sdC5lKSxQO2lmKHZvaWQgMD09PXQua3R5JiZ2b2lkIDAhPT10Lm4mJnZvaWQgMCE9PXQuZSYmdm9pZCAwIT09dC5kJiZ2b2lkIDAhPT10LnAmJnZvaWQgMCE9PXQucSYmdm9pZCAwIT09dC5kcCYmdm9pZCAwIT09dC5kcSYmdm9pZCAwIT09dC5jbyYmdm9pZCAwPT09dC5xaSlyZXR1cm4oUD1uZXcgdSkuc2V0UHJpdmF0ZUV4KHQubix0LmUsdC5kLHQucCx0LnEsdC5kcCx0LmRxLHQuY28pLFA7aWYodm9pZCAwPT09dC5rdHkmJnZvaWQgMCE9PXQubiYmdm9pZCAwIT09dC5lJiZ2b2lkIDAhPT10LmQmJnZvaWQgMD09PXQucClyZXR1cm4oUD1uZXcgdSkuc2V0UHJpdmF0ZSh0Lm4sdC5lLHQuZCksUDtpZih2b2lkIDAhPT10LnAmJnZvaWQgMCE9PXQucSYmdm9pZCAwIT09dC5nJiZ2b2lkIDAhPT10LnkmJnZvaWQgMD09PXQueClyZXR1cm4oUD1uZXcgYSkuc2V0UHVibGljKHQucCx0LnEsdC5nLHQueSksUDtpZih2b2lkIDAhPT10LnAmJnZvaWQgMCE9PXQucSYmdm9pZCAwIT09dC5nJiZ2b2lkIDAhPT10LnkmJnZvaWQgMCE9PXQueClyZXR1cm4oUD1uZXcgYSkuc2V0UHJpdmF0ZSh0LnAsdC5xLHQuZyx0LnksdC54KSxQO2lmKFwiUlNBXCI9PT10Lmt0eSYmdm9pZCAwIT09dC5uJiZ2b2lkIDAhPT10LmUmJnZvaWQgMD09PXQuZClyZXR1cm4oUD1uZXcgdSkuc2V0UHVibGljKFJyKHQubiksUnIodC5lKSksUDtpZihcIlJTQVwiPT09dC5rdHkmJnZvaWQgMCE9PXQubiYmdm9pZCAwIT09dC5lJiZ2b2lkIDAhPT10LmQmJnZvaWQgMCE9PXQucCYmdm9pZCAwIT09dC5xJiZ2b2lkIDAhPT10LmRwJiZ2b2lkIDAhPT10LmRxJiZ2b2lkIDAhPT10LnFpKXJldHVybihQPW5ldyB1KS5zZXRQcml2YXRlRXgoUnIodC5uKSxScih0LmUpLFJyKHQuZCksUnIodC5wKSxScih0LnEpLFJyKHQuZHApLFJyKHQuZHEpLFJyKHQucWkpKSxQO2lmKFwiUlNBXCI9PT10Lmt0eSYmdm9pZCAwIT09dC5uJiZ2b2lkIDAhPT10LmUmJnZvaWQgMCE9PXQuZClyZXR1cm4oUD1uZXcgdSkuc2V0UHJpdmF0ZShScih0Lm4pLFJyKHQuZSksUnIodC5kKSksUDtpZihcIkVDXCI9PT10Lmt0eSYmdm9pZCAwIT09dC5jcnYmJnZvaWQgMCE9PXQueCYmdm9pZCAwIT09dC55JiZ2b2lkIDA9PT10LmQpe3ZhciBsPShrPW5ldyBzKHtjdXJ2ZTp0LmNydn0pKS5lY3BhcmFtcy5rZXlsZW4vNCxmPVwiMDRcIisoXCIwMDAwMDAwMDAwXCIrUnIodC54KSkuc2xpY2UoLWwpKyhcIjAwMDAwMDAwMDBcIitScih0LnkpKS5zbGljZSgtbCk7cmV0dXJuIGsuc2V0UHVibGljS2V5SGV4KGYpLGt9aWYoXCJFQ1wiPT09dC5rdHkmJnZvaWQgMCE9PXQuY3J2JiZ2b2lkIDAhPT10LngmJnZvaWQgMCE9PXQueSYmdm9pZCAwIT09dC5kKXtsPShrPW5ldyBzKHtjdXJ2ZTp0LmNydn0pKS5lY3BhcmFtcy5rZXlsZW4vNCxmPVwiMDRcIisoXCIwMDAwMDAwMDAwXCIrUnIodC54KSkuc2xpY2UoLWwpKyhcIjAwMDAwMDAwMDBcIitScih0LnkpKS5zbGljZSgtbCk7dmFyIGc9KFwiMDAwMDAwMDAwMFwiK1JyKHQuZCkpLnNsaWNlKC1sKTtyZXR1cm4gay5zZXRQdWJsaWNLZXlIZXgoZiksay5zZXRQcml2YXRlS2V5SGV4KGcpLGt9aWYoXCJwa2NzNXBydlwiPT09cil7dmFyIGQscD10LHY9RnI7aWYoOT09PShkPW4ocCwwKSkubGVuZ3RoKShQPW5ldyB1KS5yZWFkUEtDUzVQcnZLZXlIZXgocCk7ZWxzZSBpZig2PT09ZC5sZW5ndGgpKFA9bmV3IGEpLnJlYWRQS0NTNVBydktleUhleChwKTtlbHNle2lmKCEoZC5sZW5ndGg+MiYmXCIwNFwiPT09cC5zdWJzdHIoZFsxXSwyKSkpdGhyb3cgbmV3IEVycm9yKFwidW5zdXBwb3J0ZWQgUEtDUyMxLzUgaGV4YWRlY2ltYWwga2V5XCIpOyhQPW5ldyBzKS5yZWFkUEtDUzVQcnZLZXlIZXgocCl9cmV0dXJuIFB9aWYoXCJwa2NzOHBydlwiPT09cilyZXR1cm4gUD1oLmdldEtleUZyb21QbGFpblByaXZhdGVQS0NTOEhleCh0KTtpZihcInBrY3M4cHViXCI9PT1yKXJldHVybiBoLl9nZXRLZXlGcm9tUHVibGljUEtDUzhIZXgodCk7aWYoXCJ4NTA5cHViXCI9PT1yKXJldHVybiBvbi5nZXRQdWJsaWNLZXlGcm9tQ2VydEhleCh0KTtpZigtMSE9dC5pbmRleE9mKFwiLUVORCBDRVJUSUZJQ0FURS1cIiwwKXx8LTEhPXQuaW5kZXhPZihcIi1FTkQgWDUwOSBDRVJUSUZJQ0FURS1cIiwwKXx8LTEhPXQuaW5kZXhPZihcIi1FTkQgVFJVU1RFRCBDRVJUSUZJQ0FURS1cIiwwKSlyZXR1cm4gb24uZ2V0UHVibGljS2V5RnJvbUNlcnRQRU0odCk7aWYoLTEhPXQuaW5kZXhPZihcIi1FTkQgUFVCTElDIEtFWS1cIikpe3ZhciB5PU1yKHQsXCJQVUJMSUMgS0VZXCIpO3JldHVybiBoLl9nZXRLZXlGcm9tUHVibGljUEtDUzhIZXgoeSl9aWYoLTEhPXQuaW5kZXhPZihcIi1FTkQgUlNBIFBSSVZBVEUgS0VZLVwiKSYmLTE9PXQuaW5kZXhPZihcIjQsRU5DUllQVEVEXCIpKXt2YXIgbT1jKHQsXCJSU0EgUFJJVkFURSBLRVlcIik7cmV0dXJuIGguZ2V0S2V5KG0sbnVsbCxcInBrY3M1cHJ2XCIpfWlmKC0xIT10LmluZGV4T2YoXCItRU5EIERTQSBQUklWQVRFIEtFWS1cIikmJi0xPT10LmluZGV4T2YoXCI0LEVOQ1JZUFRFRFwiKSl7dmFyIF89aShSPWModCxcIkRTQSBQUklWQVRFIEtFWVwiKSwwLFsxXSxcIjAyXCIpLFM9aShSLDAsWzJdLFwiMDJcIiksYj1pKFIsMCxbM10sXCIwMlwiKSxGPWkoUiwwLFs0XSxcIjAyXCIpLEU9aShSLDAsWzVdLFwiMDJcIik7cmV0dXJuKFA9bmV3IGEpLnNldFByaXZhdGUobmV3IHcoXywxNiksbmV3IHcoUywxNiksbmV3IHcoYiwxNiksbmV3IHcoRiwxNiksbmV3IHcoRSwxNikpLFB9aWYoLTEhPXQuaW5kZXhPZihcIi1FTkQgRUMgUFJJVkFURSBLRVktXCIpJiYtMT09dC5pbmRleE9mKFwiNCxFTkNSWVBURURcIikpe209Yyh0LFwiRUMgUFJJVkFURSBLRVlcIik7cmV0dXJuIGguZ2V0S2V5KG0sbnVsbCxcInBrY3M1cHJ2XCIpfWlmKC0xIT10LmluZGV4T2YoXCItRU5EIFBSSVZBVEUgS0VZLVwiKSlyZXR1cm4gaC5nZXRLZXlGcm9tUGxhaW5Qcml2YXRlUEtDUzhQRU0odCk7aWYoLTEhPXQuaW5kZXhPZihcIi1FTkQgUlNBIFBSSVZBVEUgS0VZLVwiKSYmLTEhPXQuaW5kZXhPZihcIjQsRU5DUllQVEVEXCIpKXt2YXIgeD1oLmdldERlY3J5cHRlZEtleUhleCh0LGUpLEE9bmV3IE1lO3JldHVybiBBLnJlYWRQS0NTNVBydktleUhleCh4KSxBfWlmKC0xIT10LmluZGV4T2YoXCItRU5EIEVDIFBSSVZBVEUgS0VZLVwiKSYmLTEhPXQuaW5kZXhPZihcIjQsRU5DUllQVEVEXCIpKXt2YXIgayxQPWkoUj1oLmdldERlY3J5cHRlZEtleUhleCh0LGUpLDAsWzFdLFwiMDRcIiksQz1pKFIsMCxbMiwwXSxcIjA2XCIpLFQ9aShSLDAsWzMsMF0sXCIwM1wiKS5zdWJzdHIoMik7aWYodm9pZCAwPT09U3IuY3J5cHRvLk9JRC5vaWRoZXgybmFtZVtDXSl0aHJvdyBuZXcgRXJyb3IoXCJ1bmRlZmluZWQgT0lEKGhleCkgaW4gS0pVUi5jcnlwdG8uT0lEOiBcIitDKTtyZXR1cm4oaz1uZXcgcyh7Y3VydmU6U3IuY3J5cHRvLk9JRC5vaWRoZXgybmFtZVtDXX0pKS5zZXRQdWJsaWNLZXlIZXgoVCksay5zZXRQcml2YXRlS2V5SGV4KFApLGsuaXNQdWJsaWM9ITEsa31pZigtMSE9dC5pbmRleE9mKFwiLUVORCBEU0EgUFJJVkFURSBLRVktXCIpJiYtMSE9dC5pbmRleE9mKFwiNCxFTkNSWVBURURcIikpe3ZhciBSO189aShSPWguZ2V0RGVjcnlwdGVkS2V5SGV4KHQsZSksMCxbMV0sXCIwMlwiKSxTPWkoUiwwLFsyXSxcIjAyXCIpLGI9aShSLDAsWzNdLFwiMDJcIiksRj1pKFIsMCxbNF0sXCIwMlwiKSxFPWkoUiwwLFs1XSxcIjAyXCIpO3JldHVybihQPW5ldyBhKS5zZXRQcml2YXRlKG5ldyB3KF8sMTYpLG5ldyB3KFMsMTYpLG5ldyB3KGIsMTYpLG5ldyB3KEYsMTYpLG5ldyB3KEUsMTYpKSxQfWlmKC0xIT10LmluZGV4T2YoXCItRU5EIEVOQ1JZUFRFRCBQUklWQVRFIEtFWS1cIikpcmV0dXJuIGguZ2V0S2V5RnJvbUVuY3J5cHRlZFBLQ1M4UEVNKHQsZSk7dGhyb3cgbmV3IEVycm9yKFwibm90IHN1cHBvcnRlZCBhcmd1bWVudFwiKX0sdG4uZ2VuZXJhdGVLZXlwYWlyPWZ1bmN0aW9uKHQsZSl7aWYoXCJSU0FcIj09dCl7dmFyIHI9ZTsocz1uZXcgTWUpLmdlbmVyYXRlKHIsXCIxMDAwMVwiKSxzLmlzUHJpdmF0ZT0hMCxzLmlzUHVibGljPSEwO3ZhciBuPW5ldyBNZSxpPXMubi50b1N0cmluZygxNiksbz1zLmUudG9TdHJpbmcoMTYpO3JldHVybiBuLnNldFB1YmxpYyhpLG8pLG4uaXNQcml2YXRlPSExLG4uaXNQdWJsaWM9ITAsKGE9e30pLnBydktleU9iaj1zLGEucHViS2V5T2JqPW4sYX1pZihcIkVDXCI9PXQpe3ZhciBzLGEsdT1lLGM9bmV3IFNyLmNyeXB0by5FQ0RTQSh7Y3VydmU6dX0pLmdlbmVyYXRlS2V5UGFpckhleCgpO3JldHVybihzPW5ldyBTci5jcnlwdG8uRUNEU0Eoe2N1cnZlOnV9KSkuc2V0UHVibGljS2V5SGV4KGMuZWNwdWJoZXgpLHMuc2V0UHJpdmF0ZUtleUhleChjLmVjcHJ2aGV4KSxzLmlzUHJpdmF0ZT0hMCxzLmlzUHVibGljPSExLChuPW5ldyBTci5jcnlwdG8uRUNEU0Eoe2N1cnZlOnV9KSkuc2V0UHVibGljS2V5SGV4KGMuZWNwdWJoZXgpLG4uaXNQcml2YXRlPSExLG4uaXNQdWJsaWM9ITAsKGE9e30pLnBydktleU9iaj1zLGEucHViS2V5T2JqPW4sYX10aHJvdyBuZXcgRXJyb3IoXCJ1bmtub3duIGFsZ29yaXRobTogXCIrdCl9LHRuLmdldFBFTT1mdW5jdGlvbih0LGUscixuLGksbyl7dmFyIHM9U3IsYT1zLmFzbjEsdT1hLkRFUk9iamVjdElkZW50aWZpZXIsYz1hLkRFUkludGVnZXIsaD1hLkFTTjFVdGlsLm5ld09iamVjdCxsPWEueDUwOS5TdWJqZWN0UHVibGljS2V5SW5mbyxmPXMuY3J5cHRvLGc9Zi5EU0EsZD1mLkVDRFNBLHA9TWU7ZnVuY3Rpb24geSh0KXtyZXR1cm4gaCh7c2VxOlt7aW50OjB9LHtpbnQ6e2JpZ2ludDp0Lm59fSx7aW50OnQuZX0se2ludDp7YmlnaW50OnQuZH19LHtpbnQ6e2JpZ2ludDp0LnB9fSx7aW50OntiaWdpbnQ6dC5xfX0se2ludDp7YmlnaW50OnQuZG1wMX19LHtpbnQ6e2JpZ2ludDp0LmRtcTF9fSx7aW50OntiaWdpbnQ6dC5jb2VmZn19XX0pfWZ1bmN0aW9uIG0odCl7cmV0dXJuIGgoe3NlcTpbe2ludDoxfSx7b2N0c3RyOntoZXg6dC5wcnZLZXlIZXh9fSx7dGFnOltcImEwXCIsITAse29pZDp7bmFtZTp0LmN1cnZlTmFtZX19XX0se3RhZzpbXCJhMVwiLCEwLHtiaXRzdHI6e2hleDpcIjAwXCIrdC5wdWJLZXlIZXh9fV19XX0pfWZ1bmN0aW9uIF8odCl7cmV0dXJuIGgoe3NlcTpbe2ludDowfSx7aW50OntiaWdpbnQ6dC5wfX0se2ludDp7YmlnaW50OnQucX19LHtpbnQ6e2JpZ2ludDp0Lmd9fSx7aW50OntiaWdpbnQ6dC55fX0se2ludDp7YmlnaW50OnQueH19XX0pfWlmKCh2b2lkIDAhPT1wJiZ0IGluc3RhbmNlb2YgcHx8dm9pZCAwIT09ZyYmdCBpbnN0YW5jZW9mIGd8fHZvaWQgMCE9PWQmJnQgaW5zdGFuY2VvZiBkKSYmMT09dC5pc1B1YmxpYyYmKHZvaWQgMD09PWV8fFwiUEtDUzhQVUJcIj09ZSkpcmV0dXJuIGpyKEY9bmV3IGwodCkuZ2V0RW5jb2RlZEhleCgpLFwiUFVCTElDIEtFWVwiKTtpZihcIlBLQ1MxUFJWXCI9PWUmJnZvaWQgMCE9PXAmJnQgaW5zdGFuY2VvZiBwJiYodm9pZCAwPT09cnx8bnVsbD09cikmJjE9PXQuaXNQcml2YXRlKXJldHVybiBqcihGPXkodCkuZ2V0RW5jb2RlZEhleCgpLFwiUlNBIFBSSVZBVEUgS0VZXCIpO2lmKFwiUEtDUzFQUlZcIj09ZSYmdm9pZCAwIT09ZCYmdCBpbnN0YW5jZW9mIGQmJih2b2lkIDA9PT1yfHxudWxsPT1yKSYmMT09dC5pc1ByaXZhdGUpe3ZhciBTPW5ldyB1KHtuYW1lOnQuY3VydmVOYW1lfSkuZ2V0RW5jb2RlZEhleCgpLGI9bSh0KS5nZXRFbmNvZGVkSGV4KCksdz1cIlwiO3JldHVybiB3Kz1qcihTLFwiRUMgUEFSQU1FVEVSU1wiKSx3Kz1qcihiLFwiRUMgUFJJVkFURSBLRVlcIil9aWYoXCJQS0NTMVBSVlwiPT1lJiZ2b2lkIDAhPT1nJiZ0IGluc3RhbmNlb2YgZyYmKHZvaWQgMD09PXJ8fG51bGw9PXIpJiYxPT10LmlzUHJpdmF0ZSlyZXR1cm4ganIoRj1fKHQpLmdldEVuY29kZWRIZXgoKSxcIkRTQSBQUklWQVRFIEtFWVwiKTtpZihcIlBLQ1M1UFJWXCI9PWUmJnZvaWQgMCE9PXAmJnQgaW5zdGFuY2VvZiBwJiZ2b2lkIDAhPT1yJiZudWxsIT1yJiYxPT10LmlzUHJpdmF0ZSl7dmFyIEY9eSh0KS5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHZvaWQgMD09PW4mJihuPVwiREVTLUVERTMtQ0JDXCIpLHRoaXMuZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUHJ2S2V5SGV4KFwiUlNBXCIsRixyLG4sbyl9aWYoXCJQS0NTNVBSVlwiPT1lJiZ2b2lkIDAhPT1kJiZ0IGluc3RhbmNlb2YgZCYmdm9pZCAwIT09ciYmbnVsbCE9ciYmMT09dC5pc1ByaXZhdGUpe0Y9bSh0KS5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHZvaWQgMD09PW4mJihuPVwiREVTLUVERTMtQ0JDXCIpLHRoaXMuZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUHJ2S2V5SGV4KFwiRUNcIixGLHIsbixvKX1pZihcIlBLQ1M1UFJWXCI9PWUmJnZvaWQgMCE9PWcmJnQgaW5zdGFuY2VvZiBnJiZ2b2lkIDAhPT1yJiZudWxsIT1yJiYxPT10LmlzUHJpdmF0ZSl7Rj1fKHQpLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdm9pZCAwPT09biYmKG49XCJERVMtRURFMy1DQkNcIiksdGhpcy5nZXRFbmNyeXB0ZWRQS0NTNVBFTUZyb21QcnZLZXlIZXgoXCJEU0FcIixGLHIsbixvKX12YXIgRT1mdW5jdGlvbiB0KGUscil7dmFyIG49eChlLHIpO3JldHVybiBuZXcgaCh7c2VxOlt7c2VxOlt7b2lkOntuYW1lOlwicGtjczVQQkVTMlwifX0se3NlcTpbe3NlcTpbe29pZDp7bmFtZTpcInBrY3M1UEJLREYyXCJ9fSx7c2VxOlt7b2N0c3RyOntoZXg6bi5wYmtkZjJTYWx0fX0se2ludDpuLnBia2RmMkl0ZXJ9XX1dfSx7c2VxOlt7b2lkOntuYW1lOlwiZGVzLUVERTMtQ0JDXCJ9fSx7b2N0c3RyOntoZXg6bi5lbmNyeXB0aW9uU2NoZW1lSVZ9fV19XX1dfSx7b2N0c3RyOntoZXg6bi5jaXBoZXJ0ZXh0fX1dfSkuZ2V0RW5jb2RlZEhleCgpfSx4PWZ1bmN0aW9uIHQoZSxyKXt2YXIgbj12LmxpYi5Xb3JkQXJyYXkucmFuZG9tKDgpLGk9di5saWIuV29yZEFycmF5LnJhbmRvbSg4KSxvPXYuUEJLREYyKHIsbix7a2V5U2l6ZTo2LGl0ZXJhdGlvbnM6MTAwfSkscz12LmVuYy5IZXgucGFyc2UoZSksYT12LlRyaXBsZURFUy5lbmNyeXB0KHMsbyx7aXY6aX0pK1wiXCIsdT17fTtyZXR1cm4gdS5jaXBoZXJ0ZXh0PWEsdS5wYmtkZjJTYWx0PXYuZW5jLkhleC5zdHJpbmdpZnkobiksdS5wYmtkZjJJdGVyPTEwMCx1LmVuY3J5cHRpb25TY2hlbWVBbGc9XCJERVMtRURFMy1DQkNcIix1LmVuY3J5cHRpb25TY2hlbWVJVj12LmVuYy5IZXguc3RyaW5naWZ5KGkpLHV9O2lmKFwiUEtDUzhQUlZcIj09ZSYmbnVsbCE9cCYmdCBpbnN0YW5jZW9mIHAmJjE9PXQuaXNQcml2YXRlKXt2YXIgQT15KHQpLmdldEVuY29kZWRIZXgoKTtGPWgoe3NlcTpbe2ludDowfSx7c2VxOlt7b2lkOntuYW1lOlwicnNhRW5jcnlwdGlvblwifX0se251bGw6ITB9XX0se29jdHN0cjp7aGV4OkF9fV19KS5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHZvaWQgMD09PXJ8fG51bGw9PXI/anIoRixcIlBSSVZBVEUgS0VZXCIpOmpyKGI9RShGLHIpLFwiRU5DUllQVEVEIFBSSVZBVEUgS0VZXCIpfWlmKFwiUEtDUzhQUlZcIj09ZSYmdm9pZCAwIT09ZCYmdCBpbnN0YW5jZW9mIGQmJjE9PXQuaXNQcml2YXRlKXtBPW5ldyBoKHtzZXE6W3tpbnQ6MX0se29jdHN0cjp7aGV4OnQucHJ2S2V5SGV4fX0se3RhZzpbXCJhMVwiLCEwLHtiaXRzdHI6e2hleDpcIjAwXCIrdC5wdWJLZXlIZXh9fV19XX0pLmdldEVuY29kZWRIZXgoKSxGPWgoe3NlcTpbe2ludDowfSx7c2VxOlt7b2lkOntuYW1lOlwiZWNQdWJsaWNLZXlcIn19LHtvaWQ6e25hbWU6dC5jdXJ2ZU5hbWV9fV19LHtvY3RzdHI6e2hleDpBfX1dfSkuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB2b2lkIDA9PT1yfHxudWxsPT1yP2pyKEYsXCJQUklWQVRFIEtFWVwiKTpqcihiPUUoRixyKSxcIkVOQ1JZUFRFRCBQUklWQVRFIEtFWVwiKX1pZihcIlBLQ1M4UFJWXCI9PWUmJnZvaWQgMCE9PWcmJnQgaW5zdGFuY2VvZiBnJiYxPT10LmlzUHJpdmF0ZSl7QT1uZXcgYyh7YmlnaW50OnQueH0pLmdldEVuY29kZWRIZXgoKSxGPWgoe3NlcTpbe2ludDowfSx7c2VxOlt7b2lkOntuYW1lOlwiZHNhXCJ9fSx7c2VxOlt7aW50OntiaWdpbnQ6dC5wfX0se2ludDp7YmlnaW50OnQucX19LHtpbnQ6e2JpZ2ludDp0Lmd9fV19XX0se29jdHN0cjp7aGV4OkF9fV19KS5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHZvaWQgMD09PXJ8fG51bGw9PXI/anIoRixcIlBSSVZBVEUgS0VZXCIpOmpyKGI9RShGLHIpLFwiRU5DUllQVEVEIFBSSVZBVEUgS0VZXCIpfXRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkIG9iamVjdCBub3IgZm9ybWF0XCIpfSx0bi5nZXRLZXlGcm9tQ1NSUEVNPWZ1bmN0aW9uKHQpe3ZhciBlPU1yKHQsXCJDRVJUSUZJQ0FURSBSRVFVRVNUXCIpO3JldHVybiB0bi5nZXRLZXlGcm9tQ1NSSGV4KGUpfSx0bi5nZXRLZXlGcm9tQ1NSSGV4PWZ1bmN0aW9uKHQpe3ZhciBlPXRuLnBhcnNlQ1NSSGV4KHQpO3JldHVybiB0bi5nZXRLZXkoZS5wOHB1YmtleWhleCxudWxsLFwicGtjczhwdWJcIil9LHRuLnBhcnNlQ1NSSGV4PWZ1bmN0aW9uKHQpe3ZhciBlPUZyLHI9ZS5nZXRDaGlsZElkeCxuPWUuZ2V0VExWLGk9e30sbz10O2lmKFwiMzBcIiE9by5zdWJzdHIoMCwyKSl0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgQ1NSKGNvZGU6MDAxKVwiKTt2YXIgcz1yKG8sMCk7aWYocy5sZW5ndGg8MSl0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgQ1NSKGNvZGU6MDAyKVwiKTtpZihcIjMwXCIhPW8uc3Vic3RyKHNbMF0sMikpdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIENTUihjb2RlOjAwMylcIik7dmFyIGE9cihvLHNbMF0pO2lmKGEubGVuZ3RoPDMpdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIENTUihjb2RlOjAwNClcIik7cmV0dXJuIGkucDhwdWJrZXloZXg9bihvLGFbMl0pLGl9LHRuLmdldEtleUlEPWZ1bmN0aW9uKHQpe3ZhciBlPXRuLHI9RnI7XCJzdHJpbmdcIj09dHlwZW9mIHQmJi0xIT10LmluZGV4T2YoXCJCRUdJTiBcIikmJih0PWUuZ2V0S2V5KHQpKTt2YXIgbj1NcihlLmdldFBFTSh0KSksaT1yLmdldElkeGJ5TGlzdChuLDAsWzFdKSxvPXIuZ2V0VihuLGkpLnN1YnN0cmluZygyKTtyZXR1cm4gU3IuY3J5cHRvLlV0aWwuaGFzaEhleChvLFwic2hhMVwiKX0sdG4uZ2V0SldLRnJvbUtleT1mdW5jdGlvbih0KXt2YXIgZT17fTtpZih0IGluc3RhbmNlb2YgTWUmJnQuaXNQcml2YXRlKXJldHVybiBlLmt0eT1cIlJTQVwiLGUubj1Ucih0Lm4udG9TdHJpbmcoMTYpKSxlLmU9VHIodC5lLnRvU3RyaW5nKDE2KSksZS5kPVRyKHQuZC50b1N0cmluZygxNikpLGUucD1Ucih0LnAudG9TdHJpbmcoMTYpKSxlLnE9VHIodC5xLnRvU3RyaW5nKDE2KSksZS5kcD1Ucih0LmRtcDEudG9TdHJpbmcoMTYpKSxlLmRxPVRyKHQuZG1xMS50b1N0cmluZygxNikpLGUucWk9VHIodC5jb2VmZi50b1N0cmluZygxNikpLGU7aWYodCBpbnN0YW5jZW9mIE1lJiZ0LmlzUHVibGljKXJldHVybiBlLmt0eT1cIlJTQVwiLGUubj1Ucih0Lm4udG9TdHJpbmcoMTYpKSxlLmU9VHIodC5lLnRvU3RyaW5nKDE2KSksZTtpZih0IGluc3RhbmNlb2YgU3IuY3J5cHRvLkVDRFNBJiZ0LmlzUHJpdmF0ZSl7aWYoXCJQLTI1NlwiIT09KG49dC5nZXRTaG9ydE5JU1RQQ3VydmVOYW1lKCkpJiZcIlAtMzg0XCIhPT1uKXRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkIGN1cnZlIG5hbWUgZm9yIEpXVDogXCIrbik7dmFyIHI9dC5nZXRQdWJsaWNLZXlYWUhleCgpO3JldHVybiBlLmt0eT1cIkVDXCIsZS5jcnY9bixlLng9VHIoci54KSxlLnk9VHIoci55KSxlLmQ9VHIodC5wcnZLZXlIZXgpLGV9aWYodCBpbnN0YW5jZW9mIFNyLmNyeXB0by5FQ0RTQSYmdC5pc1B1YmxpYyl7dmFyIG47aWYoXCJQLTI1NlwiIT09KG49dC5nZXRTaG9ydE5JU1RQQ3VydmVOYW1lKCkpJiZcIlAtMzg0XCIhPT1uKXRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkIGN1cnZlIG5hbWUgZm9yIEpXVDogXCIrbik7cj10LmdldFB1YmxpY0tleVhZSGV4KCk7cmV0dXJuIGUua3R5PVwiRUNcIixlLmNydj1uLGUueD1UcihyLngpLGUueT1UcihyLnkpLGV9dGhyb3cgbmV3IEVycm9yKFwibm90IHN1cHBvcnRlZCBrZXkgb2JqZWN0XCIpfSxNZS5nZXRQb3NBcnJheU9mQ2hpbGRyZW5Gcm9tSGV4PWZ1bmN0aW9uKHQpe3JldHVybiBGci5nZXRDaGlsZElkeCh0LDApfSxNZS5nZXRIZXhWYWx1ZUFycmF5T2ZDaGlsZHJlbkZyb21IZXg9ZnVuY3Rpb24odCl7dmFyIGUscj1Gci5nZXRWLG49cih0LChlPU1lLmdldFBvc0FycmF5T2ZDaGlsZHJlbkZyb21IZXgodCkpWzBdKSxpPXIodCxlWzFdKSxvPXIodCxlWzJdKSxzPXIodCxlWzNdKSxhPXIodCxlWzRdKSx1PXIodCxlWzVdKSxjPXIodCxlWzZdKSxoPXIodCxlWzddKSxsPXIodCxlWzhdKTtyZXR1cm4oZT1uZXcgQXJyYXkpLnB1c2gobixpLG8scyxhLHUsYyxoLGwpLGV9LE1lLnByb3RvdHlwZS5yZWFkUHJpdmF0ZUtleUZyb21QRU1TdHJpbmc9ZnVuY3Rpb24odCl7dmFyIGU9TXIodCkscj1NZS5nZXRIZXhWYWx1ZUFycmF5T2ZDaGlsZHJlbkZyb21IZXgoZSk7dGhpcy5zZXRQcml2YXRlRXgoclsxXSxyWzJdLHJbM10scls0XSxyWzVdLHJbNl0scls3XSxyWzhdKX0sTWUucHJvdG90eXBlLnJlYWRQS0NTNVBydktleUhleD1mdW5jdGlvbih0KXt2YXIgZT1NZS5nZXRIZXhWYWx1ZUFycmF5T2ZDaGlsZHJlbkZyb21IZXgodCk7dGhpcy5zZXRQcml2YXRlRXgoZVsxXSxlWzJdLGVbM10sZVs0XSxlWzVdLGVbNl0sZVs3XSxlWzhdKX0sTWUucHJvdG90eXBlLnJlYWRQS0NTOFBydktleUhleD1mdW5jdGlvbih0KXt2YXIgZSxyLG4saSxvLHMsYSx1LGM9RnIsaD1jLmdldFZieUxpc3RFeDtpZighMT09PWMuaXNBU04xSEVYKHQpKXRocm93IG5ldyBFcnJvcihcIm5vdCBBU04uMSBoZXggc3RyaW5nXCIpO3RyeXtlPWgodCwwLFsyLDAsMV0sXCIwMlwiKSxyPWgodCwwLFsyLDAsMl0sXCIwMlwiKSxuPWgodCwwLFsyLDAsM10sXCIwMlwiKSxpPWgodCwwLFsyLDAsNF0sXCIwMlwiKSxvPWgodCwwLFsyLDAsNV0sXCIwMlwiKSxzPWgodCwwLFsyLDAsNl0sXCIwMlwiKSxhPWgodCwwLFsyLDAsN10sXCIwMlwiKSx1PWgodCwwLFsyLDAsOF0sXCIwMlwiKX1jYXRjaCh0KXt0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgUEtDUyM4IHBsYWluIFJTQSBwcml2YXRlIGtleVwiKX10aGlzLnNldFByaXZhdGVFeChlLHIsbixpLG8scyxhLHUpfSxNZS5wcm90b3R5cGUucmVhZFBLQ1M1UHViS2V5SGV4PWZ1bmN0aW9uKHQpe3ZhciBlPUZyLHI9ZS5nZXRWO2lmKCExPT09ZS5pc0FTTjFIRVgodCkpdGhyb3cgbmV3IEVycm9yKFwia2V5SGV4IGlzIG5vdCBBU04uMSBoZXggc3RyaW5nXCIpO3ZhciBuPWUuZ2V0Q2hpbGRJZHgodCwwKTtpZigyIT09bi5sZW5ndGh8fFwiMDJcIiE9PXQuc3Vic3RyKG5bMF0sMil8fFwiMDJcIiE9PXQuc3Vic3RyKG5bMV0sMikpdGhyb3cgbmV3IEVycm9yKFwid3JvbmcgaGV4IGZvciBQS0NTIzUgcHVibGljIGtleVwiKTt2YXIgaT1yKHQsblswXSksbz1yKHQsblsxXSk7dGhpcy5zZXRQdWJsaWMoaSxvKX0sTWUucHJvdG90eXBlLnJlYWRQS0NTOFB1YktleUhleD1mdW5jdGlvbih0KXt2YXIgZT1GcjtpZighMT09PWUuaXNBU04xSEVYKHQpKXRocm93IG5ldyBFcnJvcihcIm5vdCBBU04uMSBoZXggc3RyaW5nXCIpO2lmKFwiMDYwOTJhODY0ODg2ZjcwZDAxMDEwMVwiIT09ZS5nZXRUTFZieUxpc3RFeCh0LDAsWzAsMF0pKXRocm93IG5ldyBFcnJvcihcIm5vdCBQS0NTOCBSU0EgcHVibGljIGtleVwiKTt2YXIgcj1lLmdldFRMVmJ5TGlzdEV4KHQsMCxbMSwwXSk7dGhpcy5yZWFkUEtDUzVQdWJLZXlIZXgocil9LE1lLnByb3RvdHlwZS5yZWFkQ2VydFB1YktleUhleD1mdW5jdGlvbih0LGUpe3ZhciByLG47KHI9bmV3IG9uKS5yZWFkQ2VydEhleCh0KSxuPXIuZ2V0UHVibGljS2V5SGV4KCksdGhpcy5yZWFkUEtDUzhQdWJLZXlIZXgobil9O25ldyBSZWdFeHAoXCJbXjAtOWEtZl1cIixcImdpXCIpO2Z1bmN0aW9uIGVuKHQsZSl7Zm9yKHZhciByPVwiXCIsbj1lLzQtdC5sZW5ndGgsaT0wO2k8bjtpKyspcis9XCIwXCI7cmV0dXJuIHIrdH1mdW5jdGlvbiBybih0LGUscil7Zm9yKHZhciBuPVwiXCIsaT0wO24ubGVuZ3RoPGU7KW4rPUxyKHIoTnIodCtTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxbKDQyNzgxOTAwODAmaSk+PjI0LCgxNjcxMTY4MCZpKT4+MTYsKDY1MjgwJmkpPj44LDI1NSZpXSkpKSksaSs9MTtyZXR1cm4gbn1mdW5jdGlvbiBubih0KXtmb3IodmFyIGUgaW4gU3IuY3J5cHRvLlV0aWwuRElHRVNUSU5GT0hFQUQpe3ZhciByPVNyLmNyeXB0by5VdGlsLkRJR0VTVElORk9IRUFEW2VdLG49ci5sZW5ndGg7aWYodC5zdWJzdHJpbmcoMCxuKT09cilyZXR1cm5bZSx0LnN1YnN0cmluZyhuKV19cmV0dXJuW119ZnVuY3Rpb24gb24odCl7dmFyIGUscj1GcixuPXIuZ2V0Q2hpbGRJZHgsaT1yLmdldFYsbz1yLmdldFRMVixzPXIuZ2V0VmJ5TGlzdCxhPXIuZ2V0VmJ5TGlzdEV4LHU9ci5nZXRUTFZieUxpc3QsYz1yLmdldFRMVmJ5TGlzdEV4LGg9ci5nZXRJZHhieUxpc3QsbD1yLmdldElkeGJ5TGlzdEV4LGY9ci5nZXRWaWR4LGc9ci5nZXRJbnQsZD1yLm9pZG5hbWUscD1yLmhleHRvb2lkc3RyLHY9TXI7dHJ5e2U9U3IuYXNuMS54NTA5LkFsZ29yaXRobUlkZW50aWZpZXIuUFNTTkFNRTJBU04xVExWfWNhdGNoKHQpe310aGlzLkhFWDJTVEFHPXtcIjBjXCI6XCJ1dGY4XCIsMTM6XCJwcm5cIiwxNjpcImlhNVwiLFwiMWFcIjpcInZpc1wiLFwiMWVcIjpcImJtcFwifSx0aGlzLmhleD1udWxsLHRoaXMudmVyc2lvbj0wLHRoaXMuZm9mZnNldD0wLHRoaXMuYUV4dEluZm89bnVsbCx0aGlzLmdldFZlcnNpb249ZnVuY3Rpb24oKXtpZihudWxsPT09dGhpcy5oZXh8fDAhPT10aGlzLnZlcnNpb24pcmV0dXJuIHRoaXMudmVyc2lvbjt2YXIgdD11KHRoaXMuaGV4LDAsWzAsMF0pO2lmKFwiYTBcIj09dC5zdWJzdHIoMCwyKSl7dmFyIGU9dSh0LDAsWzBdKSxyPWcoZSwwKTtpZihyPDB8fDI8cil0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgdmVyc2lvbiBmaWVsZFwiKTtyZXR1cm4gdGhpcy52ZXJzaW9uPXIrMSx0aGlzLnZlcnNpb259cmV0dXJuIHRoaXMudmVyc2lvbj0xLHRoaXMuZm9mZnNldD0tMSwxfSx0aGlzLmdldFNlcmlhbE51bWJlckhleD1mdW5jdGlvbigpe3JldHVybiBhKHRoaXMuaGV4LDAsWzAsMF0sXCIwMlwiKX0sdGhpcy5nZXRTaWduYXR1cmVBbGdvcml0aG1GaWVsZD1mdW5jdGlvbigpe3ZhciB0PWModGhpcy5oZXgsMCxbMCwxXSk7cmV0dXJuIHRoaXMuZ2V0QWxnb3JpdGhtSWRlbnRpZmllck5hbWUodCl9LHRoaXMuZ2V0QWxnb3JpdGhtSWRlbnRpZmllck5hbWU9ZnVuY3Rpb24odCl7Zm9yKHZhciByIGluIGUpaWYodD09PWVbcl0pcmV0dXJuIHI7cmV0dXJuIGQoYSh0LDAsWzBdLFwiMDZcIikpfSx0aGlzLmdldElzc3Vlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFg1MDBOYW1lKHRoaXMuZ2V0SXNzdWVySGV4KCkpfSx0aGlzLmdldElzc3VlckhleD1mdW5jdGlvbigpe3JldHVybiB1KHRoaXMuaGV4LDAsWzAsMyt0aGlzLmZvZmZzZXRdLFwiMzBcIil9LHRoaXMuZ2V0SXNzdWVyU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0SXNzdWVyKCkuc3RyfSx0aGlzLmdldFN1YmplY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRYNTAwTmFtZSh0aGlzLmdldFN1YmplY3RIZXgoKSl9LHRoaXMuZ2V0U3ViamVjdEhleD1mdW5jdGlvbigpe3JldHVybiB1KHRoaXMuaGV4LDAsWzAsNSt0aGlzLmZvZmZzZXRdLFwiMzBcIil9LHRoaXMuZ2V0U3ViamVjdFN0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFN1YmplY3QoKS5zdHJ9LHRoaXMuZ2V0Tm90QmVmb3JlPWZ1bmN0aW9uKCl7dmFyIHQ9cyh0aGlzLmhleCwwLFswLDQrdGhpcy5mb2Zmc2V0LDBdKTtyZXR1cm4gdD10LnJlcGxhY2UoLyguLikvZyxcIiUkMVwiKSx0PWRlY29kZVVSSUNvbXBvbmVudCh0KX0sdGhpcy5nZXROb3RBZnRlcj1mdW5jdGlvbigpe3ZhciB0PXModGhpcy5oZXgsMCxbMCw0K3RoaXMuZm9mZnNldCwxXSk7cmV0dXJuIHQ9dC5yZXBsYWNlKC8oLi4pL2csXCIlJDFcIiksdD1kZWNvZGVVUklDb21wb25lbnQodCl9LHRoaXMuZ2V0UHVibGljS2V5SGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHIuZ2V0VExWYnlMaXN0KHRoaXMuaGV4LDAsWzAsNit0aGlzLmZvZmZzZXRdLFwiMzBcIil9LHRoaXMuZ2V0UHVibGljS2V5SWR4PWZ1bmN0aW9uKCl7cmV0dXJuIGgodGhpcy5oZXgsMCxbMCw2K3RoaXMuZm9mZnNldF0sXCIzMFwiKX0sdGhpcy5nZXRQdWJsaWNLZXlDb250ZW50SWR4PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRQdWJsaWNLZXlJZHgoKTtyZXR1cm4gaCh0aGlzLmhleCx0LFsxLDBdLFwiMzBcIil9LHRoaXMuZ2V0UHVibGljS2V5PWZ1bmN0aW9uKCl7cmV0dXJuIHRuLmdldEtleSh0aGlzLmdldFB1YmxpY0tleUhleCgpLG51bGwsXCJwa2NzOHB1YlwiKX0sdGhpcy5nZXRTaWduYXR1cmVBbGdvcml0aG1OYW1lPWZ1bmN0aW9uKCl7dmFyIHQ9dSh0aGlzLmhleCwwLFsxXSxcIjMwXCIpO3JldHVybiB0aGlzLmdldEFsZ29yaXRobUlkZW50aWZpZXJOYW1lKHQpfSx0aGlzLmdldFNpZ25hdHVyZVZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHModGhpcy5oZXgsMCxbMl0sXCIwM1wiLCEwKX0sdGhpcy52ZXJpZnlTaWduYXR1cmU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRTaWduYXR1cmVBbGdvcml0aG1GaWVsZCgpLHI9dGhpcy5nZXRTaWduYXR1cmVWYWx1ZUhleCgpLG49dSh0aGlzLmhleCwwLFswXSxcIjMwXCIpLGk9bmV3IFNyLmNyeXB0by5TaWduYXR1cmUoe2FsZzplfSk7cmV0dXJuIGkuaW5pdCh0KSxpLnVwZGF0ZUhleChuKSxpLnZlcmlmeShyKX0sdGhpcy5wYXJzZUV4dD1mdW5jdGlvbih0KXt2YXIgZSxvLGE7aWYodm9pZCAwPT09dCl7aWYoYT10aGlzLmhleCwzIT09dGhpcy52ZXJzaW9uKXJldHVybi0xO2U9aChhLDAsWzAsNywwXSxcIjMwXCIpLG89bihhLGUpfWVsc2V7YT1Ncih0KTt2YXIgdT1oKGEsMCxbMCwzLDAsMF0sXCIwNlwiKTtpZihcIjJhODY0ODg2ZjcwZDAxMDkwZVwiIT1pKGEsdSkpcmV0dXJuIHZvaWQodGhpcy5hRXh0SW5mbz1uZXcgQXJyYXkpO2U9aChhLDAsWzAsMywwLDEsMF0sXCIzMFwiKSxvPW4oYSxlKSx0aGlzLmhleD1hfXRoaXMuYUV4dEluZm89bmV3IEFycmF5O2Zvcih2YXIgYz0wO2M8by5sZW5ndGg7YysrKXt2YXIgbD17Y3JpdGljYWw6ITF9LGc9MDszPT09bihhLG9bY10pLmxlbmd0aCYmKGwuY3JpdGljYWw9ITAsZz0xKSxsLm9pZD1yLmhleHRvb2lkc3RyKHMoYSxvW2NdLFswXSxcIjA2XCIpKTt2YXIgZD1oKGEsb1tjXSxbMStnXSk7bC52aWR4PWYoYSxkKSx0aGlzLmFFeHRJbmZvLnB1c2gobCl9fSx0aGlzLmdldEV4dEluZm89ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5hRXh0SW5mbyxyPXQ7aWYodC5tYXRjaCgvXlswLTkuXSskLyl8fChyPVNyLmFzbjEueDUwOS5PSUQubmFtZTJvaWQodCkpLFwiXCIhPT1yKWZvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKWlmKGVbbl0ub2lkPT09cilyZXR1cm4gZVtuXX0sdGhpcy5nZXRFeHRCYXNpY0NvbnN0cmFpbnRzPWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09dCYmdm9pZCAwPT09ZSl7dmFyIHI9dGhpcy5nZXRFeHRJbmZvKFwiYmFzaWNDb25zdHJhaW50c1wiKTtpZih2b2lkIDA9PT1yKXJldHVybjt0PW8odGhpcy5oZXgsci52aWR4KSxlPXIuY3JpdGljYWx9dmFyIG49e2V4dG5hbWU6XCJiYXNpY0NvbnN0cmFpbnRzXCJ9O2lmKGUmJihuLmNyaXRpY2FsPSEwKSxcIjMwMDBcIj09PXQpcmV0dXJuIG47aWYoXCIzMDAzMDEwMWZmXCI9PT10KXJldHVybiBuLmNBPSEwLG47aWYoXCIzMDA2MDEwMWZmMDJcIj09PXQuc3Vic3RyKDAsMTIpKXt2YXIgcz1pKHQsMTApLGE9cGFyc2VJbnQocywxNik7cmV0dXJuIG4uY0E9ITAsbi5wYXRoTGVuPWEsbn10aHJvdyBuZXcgRXJyb3IoXCJoRXh0ViBwYXJzZSBlcnJvcjogXCIrdCl9LHRoaXMuZ2V0RXh0S2V5VXNhZ2U9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT10JiZ2b2lkIDA9PT1lKXt2YXIgcj10aGlzLmdldEV4dEluZm8oXCJrZXlVc2FnZVwiKTtpZih2b2lkIDA9PT1yKXJldHVybjt0PW8odGhpcy5oZXgsci52aWR4KSxlPXIuY3JpdGljYWx9dmFyIG49e2V4dG5hbWU6XCJrZXlVc2FnZVwifTtyZXR1cm4gZSYmKG4uY3JpdGljYWw9ITApLG4ubmFtZXM9dGhpcy5nZXRFeHRLZXlVc2FnZVN0cmluZyh0KS5zcGxpdChcIixcIiksbn0sdGhpcy5nZXRFeHRLZXlVc2FnZUJpbj1mdW5jdGlvbih0KXtpZih2b2lkIDA9PT10KXt2YXIgZT10aGlzLmdldEV4dEluZm8oXCJrZXlVc2FnZVwiKTtpZih2b2lkIDA9PT1lKXJldHVyblwiXCI7dD1vKHRoaXMuaGV4LGUudmlkeCl9aWYoOCE9dC5sZW5ndGgmJjEwIT10Lmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQga2V5IHVzYWdlIHZhbHVlOiBcIit0KTt2YXIgcj1cIjAwMDAwMDAwMDAwMDAwMFwiK3BhcnNlSW50KHQuc3Vic3RyKDYpLDE2KS50b1N0cmluZygyKTtyZXR1cm4gOD09dC5sZW5ndGgmJihyPXIuc2xpY2UoLTgpKSwxMD09dC5sZW5ndGgmJihyPXIuc2xpY2UoLTE2KSksXCJcIj09KHI9ci5yZXBsYWNlKC8wKyQvLFwiXCIpKSYmKHI9XCIwXCIpLHJ9LHRoaXMuZ2V0RXh0S2V5VXNhZ2VTdHJpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuZ2V0RXh0S2V5VXNhZ2VCaW4odCkscj1uZXcgQXJyYXksbj0wO248ZS5sZW5ndGg7bisrKVwiMVwiPT1lLnN1YnN0cihuLDEpJiZyLnB1c2gob24uS0VZVVNBR0VfTkFNRVtuXSk7cmV0dXJuIHIuam9pbihcIixcIil9LHRoaXMuZ2V0RXh0U3ViamVjdEtleUlkZW50aWZpZXI9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT10JiZ2b2lkIDA9PT1lKXt2YXIgcj10aGlzLmdldEV4dEluZm8oXCJzdWJqZWN0S2V5SWRlbnRpZmllclwiKTtpZih2b2lkIDA9PT1yKXJldHVybjt0PW8odGhpcy5oZXgsci52aWR4KSxlPXIuY3JpdGljYWx9dmFyIG49e2V4dG5hbWU6XCJzdWJqZWN0S2V5SWRlbnRpZmllclwifTtlJiYobi5jcml0aWNhbD0hMCk7dmFyIHM9aSh0LDApO3JldHVybiBuLmtpZD17aGV4OnN9LG59LHRoaXMuZ2V0RXh0QXV0aG9yaXR5S2V5SWRlbnRpZmllcj1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PXQmJnZvaWQgMD09PWUpe3ZhciByPXRoaXMuZ2V0RXh0SW5mbyhcImF1dGhvcml0eUtleUlkZW50aWZpZXJcIik7aWYodm9pZCAwPT09cilyZXR1cm47dD1vKHRoaXMuaGV4LHIudmlkeCksZT1yLmNyaXRpY2FsfXZhciBzPXtleHRuYW1lOlwiYXV0aG9yaXR5S2V5SWRlbnRpZmllclwifTtlJiYocy5jcml0aWNhbD0hMCk7Zm9yKHZhciBhPW4odCwwKSx1PTA7dTxhLmxlbmd0aDt1Kyspe3ZhciBjPXQuc3Vic3RyKGFbdV0sMik7aWYoXCI4MFwiPT09YyYmKHMua2lkPXtoZXg6aSh0LGFbdV0pfSksXCJhMVwiPT09Yyl7dmFyIGg9byh0LGFbdV0pLGw9dGhpcy5nZXRHZW5lcmFsTmFtZXMoaCk7cy5pc3N1ZXI9bFswXS5kbn1cIjgyXCI9PT1jJiYocy5zbj17aGV4OmkodCxhW3VdKX0pfXJldHVybiBzfSx0aGlzLmdldEV4dEV4dEtleVVzYWdlPWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09dCYmdm9pZCAwPT09ZSl7dmFyIHI9dGhpcy5nZXRFeHRJbmZvKFwiZXh0S2V5VXNhZ2VcIik7aWYodm9pZCAwPT09cilyZXR1cm47dD1vKHRoaXMuaGV4LHIudmlkeCksZT1yLmNyaXRpY2FsfXZhciBzPXtleHRuYW1lOlwiZXh0S2V5VXNhZ2VcIixhcnJheTpbXX07ZSYmKHMuY3JpdGljYWw9ITApO2Zvcih2YXIgYT1uKHQsMCksdT0wO3U8YS5sZW5ndGg7dSsrKXMuYXJyYXkucHVzaChkKGkodCxhW3VdKSkpO3JldHVybiBzfSx0aGlzLmdldEV4dEV4dEtleVVzYWdlTmFtZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0RXh0SW5mbyhcImV4dEtleVVzYWdlXCIpO2lmKHZvaWQgMD09PXQpcmV0dXJuIHQ7dmFyIGU9bmV3IEFycmF5LHI9byh0aGlzLmhleCx0LnZpZHgpO2lmKFwiXCI9PT1yKXJldHVybiBlO2Zvcih2YXIgcz1uKHIsMCksYT0wO2E8cy5sZW5ndGg7YSsrKWUucHVzaChkKGkocixzW2FdKSkpO3JldHVybiBlfSx0aGlzLmdldEV4dFN1YmplY3RBbHROYW1lPWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09dCYmdm9pZCAwPT09ZSl7dmFyIHI9dGhpcy5nZXRFeHRJbmZvKFwic3ViamVjdEFsdE5hbWVcIik7aWYodm9pZCAwPT09cilyZXR1cm47dD1vKHRoaXMuaGV4LHIudmlkeCksZT1yLmNyaXRpY2FsfXZhciBuPXtleHRuYW1lOlwic3ViamVjdEFsdE5hbWVcIixhcnJheTpbXX07cmV0dXJuIGUmJihuLmNyaXRpY2FsPSEwKSxuLmFycmF5PXRoaXMuZ2V0R2VuZXJhbE5hbWVzKHQpLG59LHRoaXMuZ2V0RXh0SXNzdWVyQWx0TmFtZT1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PXQmJnZvaWQgMD09PWUpe3ZhciByPXRoaXMuZ2V0RXh0SW5mbyhcImlzc3VlckFsdE5hbWVcIik7aWYodm9pZCAwPT09cilyZXR1cm47dD1vKHRoaXMuaGV4LHIudmlkeCksZT1yLmNyaXRpY2FsfXZhciBuPXtleHRuYW1lOlwiaXNzdWVyQWx0TmFtZVwiLGFycmF5OltdfTtyZXR1cm4gZSYmKG4uY3JpdGljYWw9ITApLG4uYXJyYXk9dGhpcy5nZXRHZW5lcmFsTmFtZXModCksbn0sdGhpcy5nZXRHZW5lcmFsTmFtZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW4odCwwKSxyPVtdLGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIHM9dGhpcy5nZXRHZW5lcmFsTmFtZShvKHQsZVtpXSkpO3ZvaWQgMCE9PXMmJnIucHVzaChzKX1yZXR1cm4gcn0sdGhpcy5nZXRHZW5lcmFsTmFtZT1mdW5jdGlvbih0KXt2YXIgZT10LnN1YnN0cigwLDIpLHI9aSh0LDApLG49THIocik7cmV0dXJuXCI4MVwiPT1lP3tyZmM4MjI6bn06XCI4MlwiPT1lP3tkbnM6bn06XCI4NlwiPT1lP3t1cmk6bn06XCI4N1wiPT1lP3tpcDp6cihyKX06XCJhNFwiPT1lP3tkbjp0aGlzLmdldFg1MDBOYW1lKHIpfTp2b2lkIDB9LHRoaXMuZ2V0RXh0U3ViamVjdEFsdE5hbWUyPWZ1bmN0aW9uKCl7dmFyIHQsZSxyLHM9dGhpcy5nZXRFeHRJbmZvKFwic3ViamVjdEFsdE5hbWVcIik7aWYodm9pZCAwPT09cylyZXR1cm4gcztmb3IodmFyIGE9bmV3IEFycmF5LHU9byh0aGlzLmhleCxzLnZpZHgpLGM9bih1LDApLGg9MDtoPGMubGVuZ3RoO2grKylyPXUuc3Vic3RyKGNbaF0sMiksdD1pKHUsY1toXSksXCI4MVwiPT09ciYmKGU9RHIodCksYS5wdXNoKFtcIk1BSUxcIixlXSkpLFwiODJcIj09PXImJihlPURyKHQpLGEucHVzaChbXCJETlNcIixlXSkpLFwiODRcIj09PXImJihlPW9uLmhleDJkbih0LDApLGEucHVzaChbXCJETlwiLGVdKSksXCI4NlwiPT09ciYmKGU9RHIodCksYS5wdXNoKFtcIlVSSVwiLGVdKSksXCI4N1wiPT09ciYmKGU9enIodCksYS5wdXNoKFtcIklQXCIsZV0pKTtyZXR1cm4gYX0sdGhpcy5nZXRFeHRDUkxEaXN0cmlidXRpb25Qb2ludHM9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT10JiZ2b2lkIDA9PT1lKXt2YXIgcj10aGlzLmdldEV4dEluZm8oXCJjUkxEaXN0cmlidXRpb25Qb2ludHNcIik7aWYodm9pZCAwPT09cilyZXR1cm47dD1vKHRoaXMuaGV4LHIudmlkeCksZT1yLmNyaXRpY2FsfXZhciBpPXtleHRuYW1lOlwiY1JMRGlzdHJpYnV0aW9uUG9pbnRzXCIsYXJyYXk6W119O2UmJihpLmNyaXRpY2FsPSEwKTtmb3IodmFyIHM9bih0LDApLGE9MDthPHMubGVuZ3RoO2ErKyl7dmFyIHU9byh0LHNbYV0pO2kuYXJyYXkucHVzaCh0aGlzLmdldERpc3RyaWJ1dGlvblBvaW50KHUpKX1yZXR1cm4gaX0sdGhpcy5nZXREaXN0cmlidXRpb25Qb2ludD1mdW5jdGlvbih0KXtmb3IodmFyIGU9e30scj1uKHQsMCksaT0wO2k8ci5sZW5ndGg7aSsrKXt2YXIgcz10LnN1YnN0cihyW2ldLDIpLGE9byh0LHJbaV0pO1wiYTBcIj09cyYmKGUuZHBuYW1lPXRoaXMuZ2V0RGlzdHJpYnV0aW9uUG9pbnROYW1lKGEpKX1yZXR1cm4gZX0sdGhpcy5nZXREaXN0cmlidXRpb25Qb2ludE5hbWU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXt9LHI9bih0LDApLGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIHM9dC5zdWJzdHIocltpXSwyKSxhPW8odCxyW2ldKTtcImEwXCI9PXMmJihlLmZ1bGw9dGhpcy5nZXRHZW5lcmFsTmFtZXMoYSkpfXJldHVybiBlfSx0aGlzLmdldEV4dENSTERpc3RyaWJ1dGlvblBvaW50c1VSST1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0RXh0SW5mbyhcImNSTERpc3RyaWJ1dGlvblBvaW50c1wiKTtpZih2b2lkIDA9PT10KXJldHVybiB0O2Zvcih2YXIgZT1uZXcgQXJyYXkscj1uKHRoaXMuaGV4LHQudmlkeCksaT0wO2k8ci5sZW5ndGg7aSsrKXRyeXt2YXIgbz1EcihzKHRoaXMuaGV4LHJbaV0sWzAsMCwwXSxcIjg2XCIpKTtlLnB1c2gobyl9Y2F0Y2godCl7fXJldHVybiBlfSx0aGlzLmdldEV4dEFJQUluZm89ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldEV4dEluZm8oXCJhdXRob3JpdHlJbmZvQWNjZXNzXCIpO2lmKHZvaWQgMD09PXQpcmV0dXJuIHQ7Zm9yKHZhciBlPXtvY3NwOltdLGNhaXNzdWVyOltdfSxyPW4odGhpcy5oZXgsdC52aWR4KSxpPTA7aTxyLmxlbmd0aDtpKyspe3ZhciBvPXModGhpcy5oZXgscltpXSxbMF0sXCIwNlwiKSxhPXModGhpcy5oZXgscltpXSxbMV0sXCI4NlwiKTtcIjJiMDYwMTA1MDUwNzMwMDFcIj09PW8mJmUub2NzcC5wdXNoKERyKGEpKSxcIjJiMDYwMTA1MDUwNzMwMDJcIj09PW8mJmUuY2Fpc3N1ZXIucHVzaChEcihhKSl9cmV0dXJuIGV9LHRoaXMuZ2V0RXh0QXV0aG9yaXR5SW5mb0FjY2Vzcz1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PXQmJnZvaWQgMD09PWUpe3ZhciByPXRoaXMuZ2V0RXh0SW5mbyhcImF1dGhvcml0eUluZm9BY2Nlc3NcIik7aWYodm9pZCAwPT09cilyZXR1cm47dD1vKHRoaXMuaGV4LHIudmlkeCksZT1yLmNyaXRpY2FsfXZhciBpPXtleHRuYW1lOlwiYXV0aG9yaXR5SW5mb0FjY2Vzc1wiLGFycmF5OltdfTtlJiYoaS5jcml0aWNhbD0hMCk7Zm9yKHZhciB1PW4odCwwKSxjPTA7Yzx1Lmxlbmd0aDtjKyspe3ZhciBoPWEodCx1W2NdLFswXSxcIjA2XCIpLGw9RHIocyh0LHVbY10sWzFdLFwiODZcIikpO2lmKFwiMmIwNjAxMDUwNTA3MzAwMVwiPT1oKWkuYXJyYXkucHVzaCh7b2NzcDpsfSk7ZWxzZXtpZihcIjJiMDYwMTA1MDUwNzMwMDJcIiE9aCl0aHJvdyBuZXcgRXJyb3IoXCJ1bmtub3duIG1ldGhvZDogXCIraCk7aS5hcnJheS5wdXNoKHtjYWlzc3VlcjpsfSl9fXJldHVybiBpfSx0aGlzLmdldEV4dENlcnRpZmljYXRlUG9saWNpZXM9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT10JiZ2b2lkIDA9PT1lKXt2YXIgcj10aGlzLmdldEV4dEluZm8oXCJjZXJ0aWZpY2F0ZVBvbGljaWVzXCIpO2lmKHZvaWQgMD09PXIpcmV0dXJuO3Q9byh0aGlzLmhleCxyLnZpZHgpLGU9ci5jcml0aWNhbH12YXIgaT17ZXh0bmFtZTpcImNlcnRpZmljYXRlUG9saWNpZXNcIixhcnJheTpbXX07ZSYmKGkuY3JpdGljYWw9ITApO2Zvcih2YXIgcz1uKHQsMCksYT0wO2E8cy5sZW5ndGg7YSsrKXt2YXIgdT1vKHQsc1thXSksYz10aGlzLmdldFBvbGljeUluZm9ybWF0aW9uKHUpO2kuYXJyYXkucHVzaChjKX1yZXR1cm4gaX0sdGhpcy5nZXRQb2xpY3lJbmZvcm1hdGlvbj1mdW5jdGlvbih0KXt2YXIgZT17fSxyPXModCwwLFswXSxcIjA2XCIpO2UucG9saWN5b2lkPWQocik7dmFyIGk9bCh0LDAsWzFdLFwiMzBcIik7aWYoLTEhPWkpe2UuYXJyYXk9W107Zm9yKHZhciBhPW4odCxpKSx1PTA7dTxhLmxlbmd0aDt1Kyspe3ZhciBjPW8odCxhW3VdKSxoPXRoaXMuZ2V0UG9saWN5UXVhbGlmaWVySW5mbyhjKTtlLmFycmF5LnB1c2goaCl9fXJldHVybiBlfSx0aGlzLmdldFBvbGljeVF1YWxpZmllckluZm89ZnVuY3Rpb24odCl7dmFyIGU9e30scj1zKHQsMCxbMF0sXCIwNlwiKTtpZihcIjJiMDYwMTA1MDUwNzAyMDFcIj09PXIpe3ZhciBuPWEodCwwLFsxXSxcIjE2XCIpO2UuY3BzPUxyKG4pfWVsc2UgaWYoXCIyYjA2MDEwNTA1MDcwMjAyXCI9PT1yKXt2YXIgaT11KHQsMCxbMV0sXCIzMFwiKTtlLnVub3RpY2U9dGhpcy5nZXRVc2VyTm90aWNlKGkpfXJldHVybiBlfSx0aGlzLmdldFVzZXJOb3RpY2U9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXt9LHI9bih0LDApLGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIHM9byh0LHJbaV0pO1wiMzBcIiE9cy5zdWJzdHIoMCwyKSYmKGUuZXhwdGV4dD10aGlzLmdldERpc3BsYXlUZXh0KHMpKX1yZXR1cm4gZX0sdGhpcy5nZXREaXNwbGF5VGV4dD1mdW5jdGlvbih0KXt2YXIgZT17fTtyZXR1cm4gZS50eXBlPXtcIjBjXCI6XCJ1dGY4XCIsMTY6XCJpYTVcIixcIjFhXCI6XCJ2aXNcIixcIjFlXCI6XCJibXBcIn1bdC5zdWJzdHIoMCwyKV0sZS5zdHI9THIoaSh0LDApKSxlfSx0aGlzLmdldEV4dENSTE51bWJlcj1mdW5jdGlvbih0LGUpe3ZhciByPXtleHRuYW1lOlwiY1JMTnVtYmVyXCJ9O2lmKGUmJihyLmNyaXRpY2FsPSEwKSxcIjAyXCI9PXQuc3Vic3RyKDAsMikpcmV0dXJuIHIubnVtPXtoZXg6aSh0LDApfSxyO3Rocm93IG5ldyBFcnJvcihcImhFeHRWIHBhcnNlIGVycm9yOiBcIit0KX0sdGhpcy5nZXRFeHRDUkxSZWFzb249ZnVuY3Rpb24odCxlKXt2YXIgcj17ZXh0bmFtZTpcImNSTFJlYXNvblwifTtpZihlJiYoci5jcml0aWNhbD0hMCksXCIwYVwiPT10LnN1YnN0cigwLDIpKXJldHVybiByLmNvZGU9cGFyc2VJbnQoaSh0LDApLDE2KSxyO3Rocm93IG5ldyBFcnJvcihcImhFeHRWIHBhcnNlIGVycm9yOiBcIit0KX0sdGhpcy5nZXRFeHRPY3NwTm9uY2U9ZnVuY3Rpb24odCxlKXt2YXIgcj17ZXh0bmFtZTpcIm9jc3BOb25jZVwifTtlJiYoci5jcml0aWNhbD0hMCk7dmFyIG49aSh0LDApO3JldHVybiByLmhleD1uLHJ9LHRoaXMuZ2V0RXh0T2NzcE5vQ2hlY2s9ZnVuY3Rpb24odCxlKXt2YXIgcj17ZXh0bmFtZTpcIm9jc3BOb0NoZWNrXCJ9O3JldHVybiBlJiYoci5jcml0aWNhbD0hMCkscn0sdGhpcy5nZXRFeHRBZG9iZVRpbWVTdGFtcD1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PXQmJnZvaWQgMD09PWUpe3ZhciByPXRoaXMuZ2V0RXh0SW5mbyhcImFkb2JlVGltZVN0YW1wXCIpO2lmKHZvaWQgMD09PXIpcmV0dXJuO3Q9byh0aGlzLmhleCxyLnZpZHgpLGU9ci5jcml0aWNhbH12YXIgaT17ZXh0bmFtZTpcImFkb2JlVGltZVN0YW1wXCJ9O2UmJihpLmNyaXRpY2FsPSEwKTt2YXIgcz1uKHQsMCk7aWYocy5sZW5ndGg+MSl7dmFyIGE9byh0LHNbMV0pLHU9dGhpcy5nZXRHZW5lcmFsTmFtZShhKTtudWxsIT11LnVyaSYmKGkudXJpPXUudXJpKX1pZihzLmxlbmd0aD4yKXt2YXIgYz1vKHQsc1syXSk7XCIwMTAxZmZcIj09YyYmKGkucmVxYXV0aD0hMCksXCIwMTAxMDBcIj09YyYmKGkucmVxYXV0aD0hMSl9cmV0dXJuIGl9LHRoaXMuZ2V0WDUwME5hbWVSdWxlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1udWxsLHI9W10sbj0wO248dC5sZW5ndGg7bisrKWZvcih2YXIgaT10W25dLG89MDtvPGkubGVuZ3RoO28rKylyLnB1c2goaVtvXSk7Zm9yKG49MDtuPHIubGVuZ3RoO24rKyl7dmFyIHM9cltuXSxhPXMuZHMsdT1zLnZhbHVlLGM9cy50eXBlO2lmKFwiOlwiK2EsXCJwcm5cIiE9YSYmXCJ1dGY4XCIhPWEmJlwiaWE1XCIhPWEpcmV0dXJuXCJtaXhlZFwiO2lmKFwiaWE1XCI9PWEpe2lmKFwiQ05cIiE9YylyZXR1cm5cIm1peGVkXCI7aWYoU3IubGFuZy5TdHJpbmcuaXNNYWlsKHUpKWNvbnRpbnVlO3JldHVyblwibWl4ZWRcIn1pZihcIkNcIj09Yyl7aWYoXCJwcm5cIj09YSljb250aW51ZTtyZXR1cm5cIm1peGVkXCJ9aWYoXCI6XCIrYSxudWxsPT1lKWU9YTtlbHNlIGlmKGUhPT1hKXJldHVyblwibWl4ZWRcIn1yZXR1cm4gbnVsbD09ZT9cInByblwiOmV9LHRoaXMuZ2V0WDUwME5hbWU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRYNTAwTmFtZUFycmF5KHQpO3JldHVybnthcnJheTplLHN0cjp0aGlzLmRuYXJyYXl0b3N0cihlKX19LHRoaXMuZ2V0WDUwME5hbWVBcnJheT1mdW5jdGlvbih0KXtmb3IodmFyIGU9W10scj1uKHQsMCksaT0wO2k8ci5sZW5ndGg7aSsrKWUucHVzaCh0aGlzLmdldFJETihvKHQscltpXSkpKTtyZXR1cm4gZX0sdGhpcy5nZXRSRE49ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLHI9bih0LDApLGk9MDtpPHIubGVuZ3RoO2krKyllLnB1c2godGhpcy5nZXRBdHRyVHlwZUFuZFZhbHVlKG8odCxyW2ldKSkpO3JldHVybiBlfSx0aGlzLmdldEF0dHJUeXBlQW5kVmFsdWU9ZnVuY3Rpb24odCl7dmFyIGU9e3R5cGU6bnVsbCx2YWx1ZTpudWxsLGRzOm51bGx9LHI9bih0LDApLGk9cyh0LHJbMF0sW10sXCIwNlwiKSxvPXModCxyWzFdLFtdKSxhPVNyLmFzbjEuQVNOMVV0aWwub2lkSGV4VG9JbnQoaSk7cmV0dXJuIGUudHlwZT1Tci5hc24xLng1MDkuT0lELm9pZDJhdHlwZShhKSxlLmRzPXRoaXMuSEVYMlNUQUdbdC5zdWJzdHIoclsxXSwyKV0sXCJibXBcIiE9ZS5kcz9lLnZhbHVlPURyKG8pOmUudmFsdWU9WXIobyksZX0sdGhpcy5yZWFkQ2VydFBFTT1mdW5jdGlvbih0KXt0aGlzLnJlYWRDZXJ0SGV4KHYodCkpfSx0aGlzLnJlYWRDZXJ0SGV4PWZ1bmN0aW9uKHQpe3RoaXMuaGV4PXQsdGhpcy5nZXRWZXJzaW9uKCk7dHJ5e2godGhpcy5oZXgsMCxbMCw3XSxcImEzXCIpLHRoaXMucGFyc2VFeHQoKX1jYXRjaCh0KXt9fSx0aGlzLmdldFBhcmFtPWZ1bmN0aW9uKCl7dmFyIHQ9e307cmV0dXJuIHQudmVyc2lvbj10aGlzLmdldFZlcnNpb24oKSx0LnNlcmlhbD17aGV4OnRoaXMuZ2V0U2VyaWFsTnVtYmVySGV4KCl9LHQuc2lnYWxnPXRoaXMuZ2V0U2lnbmF0dXJlQWxnb3JpdGhtRmllbGQoKSx0Lmlzc3Vlcj10aGlzLmdldElzc3VlcigpLHQubm90YmVmb3JlPXRoaXMuZ2V0Tm90QmVmb3JlKCksdC5ub3RhZnRlcj10aGlzLmdldE5vdEFmdGVyKCksdC5zdWJqZWN0PXRoaXMuZ2V0U3ViamVjdCgpLHQuc2JqcHVia2V5PWpyKHRoaXMuZ2V0UHVibGljS2V5SGV4KCksXCJQVUJMSUMgS0VZXCIpLHRoaXMuYUV4dEluZm8ubGVuZ3RoPjAmJih0LmV4dD10aGlzLmdldEV4dFBhcmFtQXJyYXkoKSksdC5zaWdoZXg9dGhpcy5nZXRTaWduYXR1cmVWYWx1ZUhleCgpLHR9LHRoaXMuZ2V0RXh0UGFyYW1BcnJheT1mdW5jdGlvbih0KXtudWxsPT10JiYoLTEhPWwodGhpcy5oZXgsMCxbMCxcIlszXVwiXSkmJih0PWModGhpcy5oZXgsMCxbMCxcIlszXVwiLDBdLFwiMzBcIikpKTtmb3IodmFyIGU9W10scj1uKHQsMCksaT0wO2k8ci5sZW5ndGg7aSsrKXt2YXIgcz1vKHQscltpXSksYT10aGlzLmdldEV4dFBhcmFtKHMpO251bGwhPWEmJmUucHVzaChhKX1yZXR1cm4gZX0sdGhpcy5nZXRFeHRQYXJhbT1mdW5jdGlvbih0KXt2YXIgZT1uKHQsMCkubGVuZ3RoO2lmKDIhPWUmJjMhPWUpdGhyb3cgbmV3IEVycm9yKFwid3JvbmcgbnVtYmVyIGVsZW1lbnRzIGluIEV4dGVuc2lvbjogXCIrZStcIiBcIit0KTt2YXIgcj1wKHModCwwLFswXSxcIjA2XCIpKSxpPSExOzM9PWUmJlwiMDEwMWZmXCI9PXUodCwwLFsxXSkmJihpPSEwKTt2YXIgbz11KHQsMCxbZS0xLDBdKSxhPXZvaWQgMDtpZihcIjIuNS4yOS4xNFwiPT1yP2E9dGhpcy5nZXRFeHRTdWJqZWN0S2V5SWRlbnRpZmllcihvLGkpOlwiMi41LjI5LjE1XCI9PXI/YT10aGlzLmdldEV4dEtleVVzYWdlKG8saSk6XCIyLjUuMjkuMTdcIj09cj9hPXRoaXMuZ2V0RXh0U3ViamVjdEFsdE5hbWUobyxpKTpcIjIuNS4yOS4xOFwiPT1yP2E9dGhpcy5nZXRFeHRJc3N1ZXJBbHROYW1lKG8saSk6XCIyLjUuMjkuMTlcIj09cj9hPXRoaXMuZ2V0RXh0QmFzaWNDb25zdHJhaW50cyhvLGkpOlwiMi41LjI5LjMxXCI9PXI/YT10aGlzLmdldEV4dENSTERpc3RyaWJ1dGlvblBvaW50cyhvLGkpOlwiMi41LjI5LjMyXCI9PXI/YT10aGlzLmdldEV4dENlcnRpZmljYXRlUG9saWNpZXMobyxpKTpcIjIuNS4yOS4zNVwiPT1yP2E9dGhpcy5nZXRFeHRBdXRob3JpdHlLZXlJZGVudGlmaWVyKG8saSk6XCIyLjUuMjkuMzdcIj09cj9hPXRoaXMuZ2V0RXh0RXh0S2V5VXNhZ2UobyxpKTpcIjEuMy42LjEuNS41LjcuMS4xXCI9PXI/YT10aGlzLmdldEV4dEF1dGhvcml0eUluZm9BY2Nlc3MobyxpKTpcIjIuNS4yOS4yMFwiPT1yP2E9dGhpcy5nZXRFeHRDUkxOdW1iZXIobyxpKTpcIjIuNS4yOS4yMVwiPT1yP2E9dGhpcy5nZXRFeHRDUkxSZWFzb24obyxpKTpcIjEuMy42LjEuNS41LjcuNDguMS4yXCI9PXI/YT10aGlzLmdldEV4dE9jc3BOb25jZShvLGkpOlwiMS4zLjYuMS41LjUuNy40OC4xLjVcIj09cj9hPXRoaXMuZ2V0RXh0T2NzcE5vQ2hlY2sobyxpKTpcIjEuMi44NDAuMTEzNTgzLjEuMS45LjFcIj09ciYmKGE9dGhpcy5nZXRFeHRBZG9iZVRpbWVTdGFtcChvLGkpKSxudWxsIT1hKXJldHVybiBhO3ZhciBjPXtleHRuYW1lOnIsZXh0bjpvfTtyZXR1cm4gaSYmKGMuY3JpdGljYWw9ITApLGN9LHRoaXMuZmluZEV4dD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWlmKHRbcl0uZXh0bmFtZT09ZSlyZXR1cm4gdFtyXTtyZXR1cm4gbnVsbH0sdGhpcy51cGRhdGVFeHRDRFBGdWxsVVJJPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcy5maW5kRXh0KHQsXCJjUkxEaXN0cmlidXRpb25Qb2ludHNcIik7aWYobnVsbCE9ciYmbnVsbCE9ci5hcnJheSlmb3IodmFyIG49ci5hcnJheSxpPTA7aTxuLmxlbmd0aDtpKyspaWYobnVsbCE9bltpXS5kcG5hbWUmJm51bGwhPW5baV0uZHBuYW1lLmZ1bGwpZm9yKHZhciBvPW5baV0uZHBuYW1lLmZ1bGwscz0wO3M8by5sZW5ndGg7cysrKXt2YXIgYT1vW2ldO251bGwhPWEudXJpJiYoYS51cmk9ZSl9fSx0aGlzLnVwZGF0ZUV4dEFJQU9DU1A9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLmZpbmRFeHQodCxcImF1dGhvcml0eUluZm9BY2Nlc3NcIik7aWYobnVsbCE9ciYmbnVsbCE9ci5hcnJheSlmb3IodmFyIG49ci5hcnJheSxpPTA7aTxuLmxlbmd0aDtpKyspbnVsbCE9bltpXS5vY3NwJiYobltpXS5vY3NwPWUpfSx0aGlzLnVwZGF0ZUV4dEFJQUNBSXNzdWVyPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcy5maW5kRXh0KHQsXCJhdXRob3JpdHlJbmZvQWNjZXNzXCIpO2lmKG51bGwhPXImJm51bGwhPXIuYXJyYXkpZm9yKHZhciBuPXIuYXJyYXksaT0wO2k8bi5sZW5ndGg7aSsrKW51bGwhPW5baV0uY2Fpc3N1ZXImJihuW2ldLmNhaXNzdWVyPWUpfSx0aGlzLmRuYXJyYXl0b3N0cj1mdW5jdGlvbih0KXtyZXR1cm5cIi9cIit0Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uIGUodCl7cmV0dXJuIHQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24gZSh0KXtyZXR1cm4gdC50eXBlK1wiPVwiK3QudmFsdWV9KHQpLnJlcGxhY2UoL1xcKy8sXCJcXFxcK1wiKX0pKS5qb2luKFwiK1wiKX0odCkucmVwbGFjZSgvXFwvLyxcIlxcXFwvXCIpfSkpLmpvaW4oXCIvXCIpfSx0aGlzLmdldEluZm89ZnVuY3Rpb24oKXt2YXIgdCxlLHIsbj1mdW5jdGlvbiB0KGUpe3JldHVybiBKU09OLnN0cmluZ2lmeShlLmFycmF5KS5yZXBsYWNlKC9bXFxbXFxdXFx7XFx9XFxcIl0vZyxcIlwiKX0saT1mdW5jdGlvbiB0KGUpe2Zvcih2YXIgcj1cIlwiLG49ZS5hcnJheSxpPTA7aTxuLmxlbmd0aDtpKyspe3ZhciBvPW5baV07aWYocis9XCIgICAgcG9saWN5IG9pZDogXCIrby5wb2xpY3lvaWQrXCJcXG5cIix2b2lkIDAhPT1vLmFycmF5KWZvcih2YXIgcz0wO3M8by5hcnJheS5sZW5ndGg7cysrKXt2YXIgYT1vLmFycmF5W3NdO3ZvaWQgMCE9PWEuY3BzJiYocis9XCIgICAgY3BzOiBcIithLmNwcytcIlxcblwiKX19cmV0dXJuIHJ9LG89ZnVuY3Rpb24gdChlKXtmb3IodmFyIHI9XCJcIixuPWUuYXJyYXksaT0wO2k8bi5sZW5ndGg7aSsrKXt2YXIgbz1uW2ldO3RyeXt2b2lkIDAhPT1vLmRwbmFtZS5mdWxsWzBdLnVyaSYmKHIrPVwiICAgIFwiK28uZHBuYW1lLmZ1bGxbMF0udXJpK1wiXFxuXCIpfWNhdGNoKHQpe310cnl7dm9pZCAwIT09by5kbmFtZS5mdWxsWzBdLmRuLmhleCYmKHIrPVwiICAgIFwiK29uLmhleDJkbihvLmRwbmFtZS5mdWxsWzBdLmRuLmhleCkrXCJcXG5cIil9Y2F0Y2godCl7fX1yZXR1cm4gcn0scz1mdW5jdGlvbiB0KGUpe2Zvcih2YXIgcj1cIlwiLG49ZS5hcnJheSxpPTA7aTxuLmxlbmd0aDtpKyspe3ZhciBvPW5baV07dm9pZCAwIT09by5jYWlzc3VlciYmKHIrPVwiICAgIGNhaXNzdWVyOiBcIitvLmNhaXNzdWVyK1wiXFxuXCIpLHZvaWQgMCE9PW8ub2NzcCYmKHIrPVwiICAgIG9jc3A6IFwiK28ub2NzcCtcIlxcblwiKX1yZXR1cm4gcn07aWYodD1cIkJhc2ljIEZpZWxkc1xcblwiLHQrPVwiICBzZXJpYWwgbnVtYmVyOiBcIit0aGlzLmdldFNlcmlhbE51bWJlckhleCgpK1wiXFxuXCIsdCs9XCIgIHNpZ25hdHVyZSBhbGdvcml0aG06IFwiK3RoaXMuZ2V0U2lnbmF0dXJlQWxnb3JpdGhtRmllbGQoKStcIlxcblwiLHQrPVwiICBpc3N1ZXI6IFwiK3RoaXMuZ2V0SXNzdWVyU3RyaW5nKCkrXCJcXG5cIix0Kz1cIiAgbm90QmVmb3JlOiBcIit0aGlzLmdldE5vdEJlZm9yZSgpK1wiXFxuXCIsdCs9XCIgIG5vdEFmdGVyOiBcIit0aGlzLmdldE5vdEFmdGVyKCkrXCJcXG5cIix0Kz1cIiAgc3ViamVjdDogXCIrdGhpcy5nZXRTdWJqZWN0U3RyaW5nKCkrXCJcXG5cIix0Kz1cIiAgc3ViamVjdCBwdWJsaWMga2V5IGluZm86IFxcblwiLHQrPVwiICAgIGtleSBhbGdvcml0aG06IFwiKyhlPXRoaXMuZ2V0UHVibGljS2V5KCkpLnR5cGUrXCJcXG5cIixcIlJTQVwiPT09ZS50eXBlJiYodCs9XCIgICAgbj1cIiskcihlLm4udG9TdHJpbmcoMTYpKS5zdWJzdHIoMCwxNikrXCIuLi5cXG5cIix0Kz1cIiAgICBlPVwiKyRyKGUuZS50b1N0cmluZygxNikpK1wiXFxuXCIpLG51bGwhPShyPXRoaXMuYUV4dEluZm8pKXt0Kz1cIlg1MDl2MyBFeHRlbnNpb25zOlxcblwiO2Zvcih2YXIgYT0wO2E8ci5sZW5ndGg7YSsrKXt2YXIgdT1yW2FdLGM9U3IuYXNuMS54NTA5Lk9JRC5vaWQybmFtZSh1Lm9pZCk7XCJcIj09PWMmJihjPXUub2lkKTt2YXIgaD1cIlwiO2lmKCEwPT09dS5jcml0aWNhbCYmKGg9XCJDUklUSUNBTFwiKSx0Kz1cIiAgXCIrYytcIiBcIitoK1wiOlxcblwiLFwiYmFzaWNDb25zdHJhaW50c1wiPT09Yyl7dmFyIGw9dGhpcy5nZXRFeHRCYXNpY0NvbnN0cmFpbnRzKCk7dm9pZCAwPT09bC5jQT90Kz1cIiAgICB7fVxcblwiOih0Kz1cIiAgICBjQT10cnVlXCIsdm9pZCAwIT09bC5wYXRoTGVuJiYodCs9XCIsIHBhdGhMZW49XCIrbC5wYXRoTGVuKSx0Kz1cIlxcblwiKX1lbHNlIGlmKFwia2V5VXNhZ2VcIj09PWMpdCs9XCIgICAgXCIrdGhpcy5nZXRFeHRLZXlVc2FnZVN0cmluZygpK1wiXFxuXCI7ZWxzZSBpZihcInN1YmplY3RLZXlJZGVudGlmaWVyXCI9PT1jKXQrPVwiICAgIFwiK3RoaXMuZ2V0RXh0U3ViamVjdEtleUlkZW50aWZpZXIoKS5raWQuaGV4K1wiXFxuXCI7ZWxzZSBpZihcImF1dGhvcml0eUtleUlkZW50aWZpZXJcIj09PWMpe3ZhciBmPXRoaXMuZ2V0RXh0QXV0aG9yaXR5S2V5SWRlbnRpZmllcigpO3ZvaWQgMCE9PWYua2lkJiYodCs9XCIgICAga2lkPVwiK2Yua2lkLmhleCtcIlxcblwiKX1lbHNle2lmKFwiZXh0S2V5VXNhZ2VcIj09PWMpdCs9XCIgICAgXCIrdGhpcy5nZXRFeHRFeHRLZXlVc2FnZSgpLmFycmF5LmpvaW4oXCIsIFwiKStcIlxcblwiO2Vsc2UgaWYoXCJzdWJqZWN0QWx0TmFtZVwiPT09Yyl0Kz1cIiAgICBcIituKHRoaXMuZ2V0RXh0U3ViamVjdEFsdE5hbWUoKSkrXCJcXG5cIjtlbHNlIGlmKFwiY1JMRGlzdHJpYnV0aW9uUG9pbnRzXCI9PT1jKXQrPW8odGhpcy5nZXRFeHRDUkxEaXN0cmlidXRpb25Qb2ludHMoKSk7ZWxzZSBpZihcImF1dGhvcml0eUluZm9BY2Nlc3NcIj09PWMpdCs9cyh0aGlzLmdldEV4dEF1dGhvcml0eUluZm9BY2Nlc3MoKSk7ZWxzZVwiY2VydGlmaWNhdGVQb2xpY2llc1wiPT09YyYmKHQrPWkodGhpcy5nZXRFeHRDZXJ0aWZpY2F0ZVBvbGljaWVzKCkpKX19fXJldHVybiB0Kz1cInNpZ25hdHVyZSBhbGdvcml0aG06IFwiK3RoaXMuZ2V0U2lnbmF0dXJlQWxnb3JpdGhtTmFtZSgpK1wiXFxuXCIsdCs9XCJzaWduYXR1cmU6IFwiK3RoaXMuZ2V0U2lnbmF0dXJlVmFsdWVIZXgoKS5zdWJzdHIoMCwxNikrXCIuLi5cXG5cIn0sXCJzdHJpbmdcIj09dHlwZW9mIHQmJigtMSE9dC5pbmRleE9mKFwiLS0tLS1CRUdJTlwiKT90aGlzLnJlYWRDZXJ0UEVNKHQpOlNyLmxhbmcuU3RyaW5nLmlzSGV4KHQpJiZ0aGlzLnJlYWRDZXJ0SGV4KHQpKX1NZS5wcm90b3R5cGUuc2lnbj1mdW5jdGlvbih0LGUpe3ZhciByPWZ1bmN0aW9uIHQocil7cmV0dXJuIFNyLmNyeXB0by5VdGlsLmhhc2hTdHJpbmcocixlKX0odCk7cmV0dXJuIHRoaXMuc2lnbldpdGhNZXNzYWdlSGFzaChyLGUpfSxNZS5wcm90b3R5cGUuc2lnbldpdGhNZXNzYWdlSGFzaD1mdW5jdGlvbih0LGUpe3ZhciByPU9lKFNyLmNyeXB0by5VdGlsLmdldFBhZGRlZERpZ2VzdEluZm9IZXgodCxlLHRoaXMubi5iaXRMZW5ndGgoKSksMTYpO3JldHVybiBlbih0aGlzLmRvUHJpdmF0ZShyKS50b1N0cmluZygxNiksdGhpcy5uLmJpdExlbmd0aCgpKX0sTWUucHJvdG90eXBlLnNpZ25QU1M9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPWZ1bmN0aW9uIHQocil7cmV0dXJuIFNyLmNyeXB0by5VdGlsLmhhc2hIZXgocixlKX0oTnIodCkpO3JldHVybiB2b2lkIDA9PT1yJiYocj0tMSksdGhpcy5zaWduV2l0aE1lc3NhZ2VIYXNoUFNTKG4sZSxyKX0sTWUucHJvdG90eXBlLnNpZ25XaXRoTWVzc2FnZUhhc2hQU1M9ZnVuY3Rpb24odCxlLHIpe3ZhciBuLGk9THIodCksbz1pLmxlbmd0aCxzPXRoaXMubi5iaXRMZW5ndGgoKS0xLGE9TWF0aC5jZWlsKHMvOCksdT1mdW5jdGlvbiB0KHIpe3JldHVybiBTci5jcnlwdG8uVXRpbC5oYXNoSGV4KHIsZSl9O2lmKC0xPT09cnx8dm9pZCAwPT09cilyPW87ZWxzZSBpZigtMj09PXIpcj1hLW8tMjtlbHNlIGlmKHI8LTIpdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBzYWx0IGxlbmd0aFwiKTtpZihhPG8rcisyKXRocm93IG5ldyBFcnJvcihcImRhdGEgdG9vIGxvbmdcIik7dmFyIGM9XCJcIjtyPjAmJihjPW5ldyBBcnJheShyKSwobmV3IEJlKS5uZXh0Qnl0ZXMoYyksYz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxjKSk7dmFyIGg9THIodShOcihcIlxcMFxcMFxcMFxcMFxcMFxcMFxcMFxcMFwiK2krYykpKSxsPVtdO2ZvcihuPTA7bjxhLXItby0yO24rPTEpbFtuXT0wO3ZhciBmPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGwpK1wiXHUwMDAxXCIrYyxnPXJuKGgsZi5sZW5ndGgsdSksZD1bXTtmb3Iobj0wO248Zi5sZW5ndGg7bis9MSlkW25dPWYuY2hhckNvZGVBdChuKV5nLmNoYXJDb2RlQXQobik7dmFyIHA9NjUyODA+PjgqYS1zJjI1NTtmb3IoZFswXSY9fnAsbj0wO248bztuKyspZC5wdXNoKGguY2hhckNvZGVBdChuKSk7cmV0dXJuIGQucHVzaCgxODgpLGVuKHRoaXMuZG9Qcml2YXRlKG5ldyB3KGQpKS50b1N0cmluZygxNiksdGhpcy5uLmJpdExlbmd0aCgpKX0sTWUucHJvdG90eXBlLnZlcmlmeT1mdW5jdGlvbih0LGUpe2lmKG51bGw9PShlPWUudG9Mb3dlckNhc2UoKSkubWF0Y2goL15bMC05YS1mXSskLykpcmV0dXJuITE7dmFyIHI9T2UoZSwxNiksbj10aGlzLm4uYml0TGVuZ3RoKCk7aWYoci5iaXRMZW5ndGgoKT5uKXJldHVybiExO3ZhciBpPXRoaXMuZG9QdWJsaWMocikudG9TdHJpbmcoMTYpO2lmKGkubGVuZ3RoKzMhPW4vNClyZXR1cm4hMTt2YXIgbz1ubihpLnJlcGxhY2UoL14xZiswMC8sXCJcIikpO2lmKDA9PW8ubGVuZ3RoKXJldHVybiExO3ZhciBzPW9bMF07cmV0dXJuIG9bMV09PWZ1bmN0aW9uIHQoZSl7cmV0dXJuIFNyLmNyeXB0by5VdGlsLmhhc2hTdHJpbmcoZSxzKX0odCl9LE1lLnByb3RvdHlwZS52ZXJpZnlXaXRoTWVzc2FnZUhhc2g9ZnVuY3Rpb24odCxlKXtpZihlLmxlbmd0aCE9TWF0aC5jZWlsKHRoaXMubi5iaXRMZW5ndGgoKS80KSlyZXR1cm4hMTt2YXIgcj1PZShlLDE2KTtpZihyLmJpdExlbmd0aCgpPnRoaXMubi5iaXRMZW5ndGgoKSlyZXR1cm4gMDt2YXIgbj1ubih0aGlzLmRvUHVibGljKHIpLnRvU3RyaW5nKDE2KS5yZXBsYWNlKC9eMWYrMDAvLFwiXCIpKTtpZigwPT1uLmxlbmd0aClyZXR1cm4hMTtuWzBdO3JldHVybiBuWzFdPT10fSxNZS5wcm90b3R5cGUudmVyaWZ5UFNTPWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBpPWZ1bmN0aW9uIHQoZSl7cmV0dXJuIFNyLmNyeXB0by5VdGlsLmhhc2hIZXgoZSxyKX0oTnIodCkpO3JldHVybiB2b2lkIDA9PT1uJiYobj0tMSksdGhpcy52ZXJpZnlXaXRoTWVzc2FnZUhhc2hQU1MoaSxlLHIsbil9LE1lLnByb3RvdHlwZS52ZXJpZnlXaXRoTWVzc2FnZUhhc2hQU1M9ZnVuY3Rpb24odCxlLHIsbil7aWYoZS5sZW5ndGghPU1hdGguY2VpbCh0aGlzLm4uYml0TGVuZ3RoKCkvNCkpcmV0dXJuITE7dmFyIGksbz1uZXcgdyhlLDE2KSxzPWZ1bmN0aW9uIHQoZSl7cmV0dXJuIFNyLmNyeXB0by5VdGlsLmhhc2hIZXgoZSxyKX0sYT1Mcih0KSx1PWEubGVuZ3RoLGM9dGhpcy5uLmJpdExlbmd0aCgpLTEsaD1NYXRoLmNlaWwoYy84KTtpZigtMT09PW58fHZvaWQgMD09PW4pbj11O2Vsc2UgaWYoLTI9PT1uKW49aC11LTI7ZWxzZSBpZihuPC0yKXRocm93IG5ldyBFcnJvcihcImludmFsaWQgc2FsdCBsZW5ndGhcIik7aWYoaDx1K24rMil0aHJvdyBuZXcgRXJyb3IoXCJkYXRhIHRvbyBsb25nXCIpO3ZhciBsPXRoaXMuZG9QdWJsaWMobykudG9CeXRlQXJyYXkoKTtmb3IoaT0wO2k8bC5sZW5ndGg7aSs9MSlsW2ldJj0yNTU7Zm9yKDtsLmxlbmd0aDxoOylsLnVuc2hpZnQoMCk7aWYoMTg4IT09bFtoLTFdKXRocm93IG5ldyBFcnJvcihcImVuY29kZWQgbWVzc2FnZSBkb2VzIG5vdCBlbmQgaW4gMHhiY1wiKTt2YXIgZj0obD1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxsKSkuc3Vic3RyKDAsaC11LTEpLGc9bC5zdWJzdHIoZi5sZW5ndGgsdSksZD02NTI4MD4+OCpoLWMmMjU1O2lmKDAhPShmLmNoYXJDb2RlQXQoMCkmZCkpdGhyb3cgbmV3IEVycm9yKFwiYml0cyBiZXlvbmQga2V5c2l6ZSBub3QgemVyb1wiKTt2YXIgcD1ybihnLGYubGVuZ3RoLHMpLHY9W107Zm9yKGk9MDtpPGYubGVuZ3RoO2krPTEpdltpXT1mLmNoYXJDb2RlQXQoaSlecC5jaGFyQ29kZUF0KGkpO3ZbMF0mPX5kO3ZhciB5PWgtdS1uLTI7Zm9yKGk9MDtpPHk7aSs9MSlpZigwIT09dltpXSl0aHJvdyBuZXcgRXJyb3IoXCJsZWZ0bW9zdCBvY3RldHMgbm90IHplcm9cIik7aWYoMSE9PXZbeV0pdGhyb3cgbmV3IEVycm9yKFwiMHgwMSBtYXJrZXIgbm90IGZvdW5kXCIpO3JldHVybiBnPT09THIocyhOcihcIlxcMFxcMFxcMFxcMFxcMFxcMFxcMFxcMFwiK2ErU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsdi5zbGljZSgtbikpKSkpfSxNZS5TQUxUX0xFTl9ITEVOPS0xLE1lLlNBTFRfTEVOX01BWD0tMixNZS5TQUxUX0xFTl9SRUNPVkVSPS0yLG9uLmhleDJkbj1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPTApO3ZhciByPW5ldyBvbjtGci5nZXRUTFYodCxlKTtyZXR1cm4gci5nZXRYNTAwTmFtZSh0KS5zdHJ9LG9uLmhleDJyZG49ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT1lJiYoZT0wKSxcIjMxXCIhPT10LnN1YnN0cihlLDIpKXRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBSRE5cIik7Zm9yKHZhciByPW5ldyBBcnJheSxuPUZyLmdldENoaWxkSWR4KHQsZSksaT0wO2k8bi5sZW5ndGg7aSsrKXIucHVzaChvbi5oZXgyYXR0clR5cGVWYWx1ZSh0LG5baV0pKTtyZXR1cm4ocj1yLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZShcIitcIixcIlxcXFwrXCIpfSkpKS5qb2luKFwiK1wiKX0sb24uaGV4MmF0dHJUeXBlVmFsdWU9ZnVuY3Rpb24odCxlKXt2YXIgcj1GcixuPXIuZ2V0VjtpZih2b2lkIDA9PT1lJiYoZT0wKSxcIjMwXCIhPT10LnN1YnN0cihlLDIpKXRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBhdHRyaWJ1dGUgdHlwZSBhbmQgdmFsdWVcIik7dmFyIGk9ci5nZXRDaGlsZElkeCh0LGUpOzIhPT1pLmxlbmd0aHx8dC5zdWJzdHIoaVswXSwyKTt2YXIgbz1uKHQsaVswXSkscz1Tci5hc24xLkFTTjFVdGlsLm9pZEhleFRvSW50KG8pO3JldHVybiBTci5hc24xLng1MDkuT0lELm9pZDJhdHlwZShzKStcIj1cIitMcihuKHQsaVsxXSkpfSxvbi5nZXRQdWJsaWNLZXlGcm9tQ2VydEhleD1mdW5jdGlvbih0KXt2YXIgZT1uZXcgb247cmV0dXJuIGUucmVhZENlcnRIZXgodCksZS5nZXRQdWJsaWNLZXkoKX0sb24uZ2V0UHVibGljS2V5RnJvbUNlcnRQRU09ZnVuY3Rpb24odCl7dmFyIGU9bmV3IG9uO3JldHVybiBlLnJlYWRDZXJ0UEVNKHQpLGUuZ2V0UHVibGljS2V5KCl9LG9uLmdldFB1YmxpY0tleUluZm9Qcm9wT2ZDZXJ0UEVNPWZ1bmN0aW9uKHQpe3ZhciBlLHIsbj1Gci5nZXRWYnlMaXN0LGk9e307cmV0dXJuIGkuYWxncGFyYW09bnVsbCwoZT1uZXcgb24pLnJlYWRDZXJ0UEVNKHQpLHI9ZS5nZXRQdWJsaWNLZXlIZXgoKSxpLmtleWhleD1uKHIsMCxbMV0sXCIwM1wiKS5zdWJzdHIoMiksaS5hbGdvaWQ9bihyLDAsWzAsMF0sXCIwNlwiKSxcIjJhODY0OGNlM2QwMjAxXCI9PT1pLmFsZ29pZCYmKGkuYWxncGFyYW09bihyLDAsWzAsMV0sXCIwNlwiKSksaX0sb24uS0VZVVNBR0VfTkFNRT1bXCJkaWdpdGFsU2lnbmF0dXJlXCIsXCJub25SZXB1ZGlhdGlvblwiLFwia2V5RW5jaXBoZXJtZW50XCIsXCJkYXRhRW5jaXBoZXJtZW50XCIsXCJrZXlBZ3JlZW1lbnRcIixcImtleUNlcnRTaWduXCIsXCJjUkxTaWduXCIsXCJlbmNpcGhlck9ubHlcIixcImRlY2lwaGVyT25seVwiXSx2b2lkIDAhPT1TciYmU3J8fChlLktKVVI9U3I9e30pLHZvaWQgMCE9PVNyLmp3cyYmU3IuandzfHwoU3IuandzPXt9KSxTci5qd3MuSldTPWZ1bmN0aW9uKCl7dmFyIHQ9U3IuandzLkpXUy5pc1NhZmVKU09OU3RyaW5nO3RoaXMucGFyc2VKV1M9ZnVuY3Rpb24oZSxyKXtpZih2b2lkIDA9PT10aGlzLnBhcnNlZEpXU3x8IXImJnZvaWQgMD09PXRoaXMucGFyc2VkSldTLnNpZ3ZhbEgpe3ZhciBuPWUubWF0Y2goL14oW14uXSspXFwuKFteLl0rKVxcLihbXi5dKykkLyk7aWYobnVsbD09bil0aHJvd1wiSldTIHNpZ25hdHVyZSBpcyBub3QgYSBmb3JtIG9mICdIZWFkLlBheWxvYWQuU2lnVmFsdWUnLlwiO3ZhciBpPW5bMV0sbz1uWzJdLHM9blszXSxhPWkrXCIuXCIrbztpZih0aGlzLnBhcnNlZEpXUz17fSx0aGlzLnBhcnNlZEpXUy5oZWFkQjY0VT1pLHRoaXMucGFyc2VkSldTLnBheWxvYWRCNjRVPW8sdGhpcy5wYXJzZWRKV1Muc2lndmFsQjY0VT1zLHRoaXMucGFyc2VkSldTLnNpPWEsIXIpe3ZhciB1PVJyKHMpLGM9T2UodSwxNik7dGhpcy5wYXJzZWRKV1Muc2lndmFsSD11LHRoaXMucGFyc2VkSldTLnNpZ3ZhbEJJPWN9dmFyIGg9d3IoaSksbD13cihvKTtpZih0aGlzLnBhcnNlZEpXUy5oZWFkUz1oLHRoaXMucGFyc2VkSldTLnBheWxvYWRTPWwsIXQoaCx0aGlzLnBhcnNlZEpXUyxcImhlYWRQXCIpKXRocm93XCJtYWxmb3JtZWQgSlNPTiBzdHJpbmcgZm9yIEpXUyBIZWFkOiBcIitofX19LFNyLmp3cy5KV1Muc2lnbj1mdW5jdGlvbih0LGUscixuLGkpe3ZhciBvLHMsYSx1PVNyLGM9dS5qd3MuSldTLGg9Yy5yZWFkU2FmZUpTT05TdHJpbmcsbD1jLmlzU2FmZUpTT05TdHJpbmcsZj11LmNyeXB0byxkPShmLkVDRFNBLGYuTWFjKSxwPWYuU2lnbmF0dXJlLHY9SlNPTjtpZihcInN0cmluZ1wiIT10eXBlb2YgZSYmXCJvYmplY3RcIiE9KHZvaWQgMD09PWU/XCJ1bmRlZmluZWRcIjpnKGUpKSl0aHJvd1wic3BIZWFkZXIgbXVzdCBiZSBKU09OIHN0cmluZyBvciBvYmplY3Q6IFwiK2U7aWYoXCJvYmplY3RcIj09KHZvaWQgMD09PWU/XCJ1bmRlZmluZWRcIjpnKGUpKSYmKHM9ZSxvPXYuc3RyaW5naWZ5KHMpKSxcInN0cmluZ1wiPT10eXBlb2YgZSl7aWYoIWwobz1lKSl0aHJvd1wiSldTIEhlYWQgaXMgbm90IHNhZmUgSlNPTiBzdHJpbmc6IFwiK287cz1oKG8pfWlmKGE9cixcIm9iamVjdFwiPT0odm9pZCAwPT09cj9cInVuZGVmaW5lZFwiOmcocikpJiYoYT12LnN0cmluZ2lmeShyKSksXCJcIiE9dCYmbnVsbCE9dHx8dm9pZCAwPT09cy5hbGd8fCh0PXMuYWxnKSxcIlwiIT10JiZudWxsIT10JiZ2b2lkIDA9PT1zLmFsZyYmKHMuYWxnPXQsbz12LnN0cmluZ2lmeShzKSksdCE9PXMuYWxnKXRocm93XCJhbGcgYW5kIHNIZWFkZXIuYWxnIGRvZXNuJ3QgbWF0Y2g6IFwiK3QrXCIhPVwiK3MuYWxnO3ZhciB5PW51bGw7aWYodm9pZCAwPT09Yy5qd3NhbGcyc2lnYWxnW3RdKXRocm93XCJ1bnN1cHBvcnRlZCBhbGcgbmFtZTogXCIrdDt5PWMuandzYWxnMnNpZ2FsZ1t0XTt2YXIgbT1icihvKStcIi5cIiticihhKSxfPVwiXCI7aWYoXCJIbWFjXCI9PXkuc3Vic3RyKDAsNCkpe2lmKHZvaWQgMD09PW4pdGhyb3dcIm1hYyBrZXkgc2hhbGwgYmUgc3BlY2lmaWVkIGZvciBIUyogYWxnXCI7dmFyIFM9bmV3IGQoe2FsZzp5LHByb3Y6XCJjcnlwdG9qc1wiLHBhc3M6bn0pO1MudXBkYXRlU3RyaW5nKG0pLF89Uy5kb0ZpbmFsKCl9ZWxzZSBpZigtMSE9eS5pbmRleE9mKFwid2l0aEVDRFNBXCIpKXsodz1uZXcgcCh7YWxnOnl9KSkuaW5pdChuLGkpLHcudXBkYXRlU3RyaW5nKG0pO3ZhciBiPXcuc2lnbigpO189U3IuY3J5cHRvLkVDRFNBLmFzbjFTaWdUb0NvbmNhdFNpZyhiKX1lbHNle3ZhciB3O2lmKFwibm9uZVwiIT15KSh3PW5ldyBwKHthbGc6eX0pKS5pbml0KG4saSksdy51cGRhdGVTdHJpbmcobSksXz13LnNpZ24oKX1yZXR1cm4gbStcIi5cIitUcihfKX0sU3IuandzLkpXUy52ZXJpZnk9ZnVuY3Rpb24odCxlLHIpe3ZhciBuLGk9U3Isbz1pLmp3cy5KV1Mscz1vLnJlYWRTYWZlSlNPTlN0cmluZyxhPWkuY3J5cHRvLHU9YS5FQ0RTQSxjPWEuTWFjLGg9YS5TaWduYXR1cmU7dm9pZCAwIT09ZyhNZSkmJihuPU1lKTt2YXIgbD10LnNwbGl0KFwiLlwiKTtpZigzIT09bC5sZW5ndGgpcmV0dXJuITE7dmFyIGY9bFswXStcIi5cIitsWzFdLGQ9UnIobFsyXSkscD1zKHdyKGxbMF0pKSx2PW51bGwseT1udWxsO2lmKHZvaWQgMD09PXAuYWxnKXRocm93XCJhbGdvcml0aG0gbm90IHNwZWNpZmllZCBpbiBoZWFkZXJcIjtpZigoeT0odj1wLmFsZykuc3Vic3RyKDAsMiksbnVsbCE9ciYmXCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHIpJiZyLmxlbmd0aD4wKSYmLTE9PShcIjpcIityLmpvaW4oXCI6XCIpK1wiOlwiKS5pbmRleE9mKFwiOlwiK3YrXCI6XCIpKXRocm93XCJhbGdvcml0aG0gJ1wiK3YrXCInIG5vdCBhY2NlcHRlZCBpbiB0aGUgbGlzdFwiO2lmKFwibm9uZVwiIT12JiZudWxsPT09ZSl0aHJvd1wia2V5IHNoYWxsIGJlIHNwZWNpZmllZCB0byB2ZXJpZnkuXCI7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUmJi0xIT1lLmluZGV4T2YoXCItLS0tLUJFR0lOIFwiKSYmKGU9dG4uZ2V0S2V5KGUpKSwhKFwiUlNcIiE9eSYmXCJQU1wiIT15fHxlIGluc3RhbmNlb2YgbikpdGhyb3dcImtleSBzaGFsbCBiZSBhIFJTQUtleSBvYmogZm9yIFJTKiBhbmQgUFMqIGFsZ3NcIjtpZihcIkVTXCI9PXkmJiEoZSBpbnN0YW5jZW9mIHUpKXRocm93XCJrZXkgc2hhbGwgYmUgYSBFQ0RTQSBvYmogZm9yIEVTKiBhbGdzXCI7dmFyIG09bnVsbDtpZih2b2lkIDA9PT1vLmp3c2FsZzJzaWdhbGdbcC5hbGddKXRocm93XCJ1bnN1cHBvcnRlZCBhbGcgbmFtZTogXCIrdjtpZihcIm5vbmVcIj09KG09by5qd3NhbGcyc2lnYWxnW3ZdKSl0aHJvd1wibm90IHN1cHBvcnRlZFwiO2lmKFwiSG1hY1wiPT1tLnN1YnN0cigwLDQpKXtpZih2b2lkIDA9PT1lKXRocm93XCJoZXhhZGVjaW1hbCBrZXkgc2hhbGwgYmUgc3BlY2lmaWVkIGZvciBITUFDXCI7dmFyIF89bmV3IGMoe2FsZzptLHBhc3M6ZX0pO3JldHVybiBfLnVwZGF0ZVN0cmluZyhmKSxkPT1fLmRvRmluYWwoKX1pZigtMSE9bS5pbmRleE9mKFwid2l0aEVDRFNBXCIpKXt2YXIgUyxiPW51bGw7dHJ5e2I9dS5jb25jYXRTaWdUb0FTTjFTaWcoZCl9Y2F0Y2godCl7cmV0dXJuITF9cmV0dXJuKFM9bmV3IGgoe2FsZzptfSkpLmluaXQoZSksUy51cGRhdGVTdHJpbmcoZiksUy52ZXJpZnkoYil9cmV0dXJuKFM9bmV3IGgoe2FsZzptfSkpLmluaXQoZSksUy51cGRhdGVTdHJpbmcoZiksUy52ZXJpZnkoZCl9LFNyLmp3cy5KV1MucGFyc2U9ZnVuY3Rpb24odCl7dmFyIGUscixuLGk9dC5zcGxpdChcIi5cIiksbz17fTtpZigyIT1pLmxlbmd0aCYmMyE9aS5sZW5ndGgpdGhyb3dcIm1hbGZvcm1lZCBzSldTOiB3cm9uZyBudW1iZXIgb2YgJy4nIHNwbGl0dGVkIGVsZW1lbnRzXCI7cmV0dXJuIGU9aVswXSxyPWlbMV0sMz09aS5sZW5ndGgmJihuPWlbMl0pLG8uaGVhZGVyT2JqPVNyLmp3cy5KV1MucmVhZFNhZmVKU09OU3RyaW5nKHdyKGUpKSxvLnBheWxvYWRPYmo9U3IuandzLkpXUy5yZWFkU2FmZUpTT05TdHJpbmcod3IocikpLG8uaGVhZGVyUFA9SlNPTi5zdHJpbmdpZnkoby5oZWFkZXJPYmosbnVsbCxcIiAgXCIpLG51bGw9PW8ucGF5bG9hZE9iaj9vLnBheWxvYWRQUD13cihyKTpvLnBheWxvYWRQUD1KU09OLnN0cmluZ2lmeShvLnBheWxvYWRPYmosbnVsbCxcIiAgXCIpLHZvaWQgMCE9PW4mJihvLnNpZ0hleD1ScihuKSksb30sU3IuandzLkpXUy52ZXJpZnlKV1Q9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPVNyLmp3cyxpPW4uSldTLG89aS5yZWFkU2FmZUpTT05TdHJpbmcscz1pLmluQXJyYXksYT1pLmluY2x1ZGVkQXJyYXksdT10LnNwbGl0KFwiLlwiKSxjPXVbMF0saD11WzFdLGw9KFJyKHVbMl0pLG8od3IoYykpKSxmPW8od3IoaCkpO2lmKHZvaWQgMD09PWwuYWxnKXJldHVybiExO2lmKHZvaWQgMD09PXIuYWxnKXRocm93XCJhY2NlcHRGaWVsZC5hbGcgc2hhbGwgYmUgc3BlY2lmaWVkXCI7aWYoIXMobC5hbGcsci5hbGcpKXJldHVybiExO2lmKHZvaWQgMCE9PWYuaXNzJiZcIm9iamVjdFwiPT09ZyhyLmlzcykmJiFzKGYuaXNzLHIuaXNzKSlyZXR1cm4hMTtpZih2b2lkIDAhPT1mLnN1YiYmXCJvYmplY3RcIj09PWcoci5zdWIpJiYhcyhmLnN1YixyLnN1YikpcmV0dXJuITE7aWYodm9pZCAwIT09Zi5hdWQmJlwib2JqZWN0XCI9PT1nKHIuYXVkKSlpZihcInN0cmluZ1wiPT10eXBlb2YgZi5hdWQpe2lmKCFzKGYuYXVkLHIuYXVkKSlyZXR1cm4hMX1lbHNlIGlmKFwib2JqZWN0XCI9PWcoZi5hdWQpJiYhYShmLmF1ZCxyLmF1ZCkpcmV0dXJuITE7dmFyIGQ9bi5JbnREYXRlLmdldE5vdygpO3JldHVybiB2b2lkIDAhPT1yLnZlcmlmeUF0JiZcIm51bWJlclwiPT10eXBlb2Ygci52ZXJpZnlBdCYmKGQ9ci52ZXJpZnlBdCksdm9pZCAwIT09ci5ncmFjZVBlcmlvZCYmXCJudW1iZXJcIj09dHlwZW9mIHIuZ3JhY2VQZXJpb2R8fChyLmdyYWNlUGVyaW9kPTApLCEodm9pZCAwIT09Zi5leHAmJlwibnVtYmVyXCI9PXR5cGVvZiBmLmV4cCYmZi5leHArci5ncmFjZVBlcmlvZDxkKSYmKCEodm9pZCAwIT09Zi5uYmYmJlwibnVtYmVyXCI9PXR5cGVvZiBmLm5iZiYmZDxmLm5iZi1yLmdyYWNlUGVyaW9kKSYmKCEodm9pZCAwIT09Zi5pYXQmJlwibnVtYmVyXCI9PXR5cGVvZiBmLmlhdCYmZDxmLmlhdC1yLmdyYWNlUGVyaW9kKSYmKCh2b2lkIDA9PT1mLmp0aXx8dm9pZCAwPT09ci5qdGl8fGYuanRpPT09ci5qdGkpJiYhIWkudmVyaWZ5KHQsZSxyLmFsZykpKSl9LFNyLmp3cy5KV1MuaW5jbHVkZWRBcnJheT1mdW5jdGlvbih0LGUpe3ZhciByPVNyLmp3cy5KV1MuaW5BcnJheTtpZihudWxsPT09dClyZXR1cm4hMTtpZihcIm9iamVjdFwiIT09KHZvaWQgMD09PXQ/XCJ1bmRlZmluZWRcIjpnKHQpKSlyZXR1cm4hMTtpZihcIm51bWJlclwiIT10eXBlb2YgdC5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIXIodFtuXSxlKSlyZXR1cm4hMTtyZXR1cm4hMH0sU3IuandzLkpXUy5pbkFycmF5PWZ1bmN0aW9uKHQsZSl7aWYobnVsbD09PWUpcmV0dXJuITE7aWYoXCJvYmplY3RcIiE9PSh2b2lkIDA9PT1lP1widW5kZWZpbmVkXCI6ZyhlKSkpcmV0dXJuITE7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGUubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKWlmKGVbcl09PXQpcmV0dXJuITA7cmV0dXJuITF9LFNyLmp3cy5KV1MuandzYWxnMnNpZ2FsZz17SFMyNTY6XCJIbWFjU0hBMjU2XCIsSFMzODQ6XCJIbWFjU0hBMzg0XCIsSFM1MTI6XCJIbWFjU0hBNTEyXCIsUlMyNTY6XCJTSEEyNTZ3aXRoUlNBXCIsUlMzODQ6XCJTSEEzODR3aXRoUlNBXCIsUlM1MTI6XCJTSEE1MTJ3aXRoUlNBXCIsRVMyNTY6XCJTSEEyNTZ3aXRoRUNEU0FcIixFUzM4NDpcIlNIQTM4NHdpdGhFQ0RTQVwiLFBTMjU2OlwiU0hBMjU2d2l0aFJTQWFuZE1HRjFcIixQUzM4NDpcIlNIQTM4NHdpdGhSU0FhbmRNR0YxXCIsUFM1MTI6XCJTSEE1MTJ3aXRoUlNBYW5kTUdGMVwiLG5vbmU6XCJub25lXCJ9LFNyLmp3cy5KV1MuaXNTYWZlSlNPTlN0cmluZz1mdW5jdGlvbih0LGUscil7dmFyIG49bnVsbDt0cnl7cmV0dXJuXCJvYmplY3RcIiE9KHZvaWQgMD09PShuPV9yKHQpKT9cInVuZGVmaW5lZFwiOmcobikpfHxuLmNvbnN0cnVjdG9yPT09QXJyYXk/MDooZSYmKGVbcl09biksMSl9Y2F0Y2godCl7cmV0dXJuIDB9fSxTci5qd3MuSldTLnJlYWRTYWZlSlNPTlN0cmluZz1mdW5jdGlvbih0KXt2YXIgZT1udWxsO3RyeXtyZXR1cm5cIm9iamVjdFwiIT0odm9pZCAwPT09KGU9X3IodCkpP1widW5kZWZpbmVkXCI6ZyhlKSl8fGUuY29uc3RydWN0b3I9PT1BcnJheT9udWxsOmV9Y2F0Y2godCl7cmV0dXJuIG51bGx9fSxTci5qd3MuSldTLmdldEVuY29kZWRTaWduYXR1cmVWYWx1ZUZyb21KV1M9ZnVuY3Rpb24odCl7dmFyIGU9dC5tYXRjaCgvXlteLl0rXFwuW14uXStcXC4oW14uXSspJC8pO2lmKG51bGw9PWUpdGhyb3dcIkpXUyBzaWduYXR1cmUgaXMgbm90IGEgZm9ybSBvZiAnSGVhZC5QYXlsb2FkLlNpZ1ZhbHVlJy5cIjtyZXR1cm4gZVsxXX0sU3IuandzLkpXUy5nZXRKV0t0aHVtYnByaW50PWZ1bmN0aW9uKHQpe2lmKFwiUlNBXCIhPT10Lmt0eSYmXCJFQ1wiIT09dC5rdHkmJlwib2N0XCIhPT10Lmt0eSl0aHJvd1widW5zdXBwb3J0ZWQgYWxnb3JpdGhtIGZvciBKV0sgVGh1bXByaW50XCI7dmFyIGU9XCJ7XCI7aWYoXCJSU0FcIj09PXQua3R5KXtpZihcInN0cmluZ1wiIT10eXBlb2YgdC5ufHxcInN0cmluZ1wiIT10eXBlb2YgdC5lKXRocm93XCJ3cm9uZyBuIGFuZCBlIHZhbHVlIGZvciBSU0Ega2V5XCI7ZSs9J1wiZVwiOlwiJyt0LmUrJ1wiLCcsZSs9J1wia3R5XCI6XCInK3Qua3R5KydcIiwnLGUrPSdcIm5cIjpcIicrdC5uKydcIn0nfWVsc2UgaWYoXCJFQ1wiPT09dC5rdHkpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiB0LmNydnx8XCJzdHJpbmdcIiE9dHlwZW9mIHQueHx8XCJzdHJpbmdcIiE9dHlwZW9mIHQueSl0aHJvd1wid3JvbmcgY3J2LCB4IGFuZCB5IHZhbHVlIGZvciBFQyBrZXlcIjtlKz0nXCJjcnZcIjpcIicrdC5jcnYrJ1wiLCcsZSs9J1wia3R5XCI6XCInK3Qua3R5KydcIiwnLGUrPSdcInhcIjpcIicrdC54KydcIiwnLGUrPSdcInlcIjpcIicrdC55KydcIn0nfWVsc2UgaWYoXCJvY3RcIj09PXQua3R5KXtpZihcInN0cmluZ1wiIT10eXBlb2YgdC5rKXRocm93XCJ3cm9uZyBrIHZhbHVlIGZvciBvY3Qoc3ltbWV0cmljKSBrZXlcIjtlKz0nXCJrdHlcIjpcIicrdC5rdHkrJ1wiLCcsZSs9J1wia1wiOlwiJyt0LmsrJ1wifSd9dmFyIHI9TnIoZSk7cmV0dXJuIFRyKFNyLmNyeXB0by5VdGlsLmhhc2hIZXgocixcInNoYTI1NlwiKSl9LFNyLmp3cy5JbnREYXRlPXt9LFNyLmp3cy5JbnREYXRlLmdldD1mdW5jdGlvbih0KXt2YXIgZT1Tci5qd3MuSW50RGF0ZSxyPWUuZ2V0Tm93LG49ZS5nZXRadWx1O2lmKFwibm93XCI9PXQpcmV0dXJuIHIoKTtpZihcIm5vdyArIDFob3VyXCI9PXQpcmV0dXJuIHIoKSszNjAwO2lmKFwibm93ICsgMWRheVwiPT10KXJldHVybiByKCkrODY0MDA7aWYoXCJub3cgKyAxbW9udGhcIj09dClyZXR1cm4gcigpKzI1OTJlMztpZihcIm5vdyArIDF5ZWFyXCI9PXQpcmV0dXJuIHIoKSszMTUzNmUzO2lmKHQubWF0Y2goL1okLykpcmV0dXJuIG4odCk7aWYodC5tYXRjaCgvXlswLTldKyQvKSlyZXR1cm4gcGFyc2VJbnQodCk7dGhyb3dcInVuc3VwcG9ydGVkIGZvcm1hdDogXCIrdH0sU3IuandzLkludERhdGUuZ2V0WnVsdT1mdW5jdGlvbih0KXtyZXR1cm4gVnIodCl9LFNyLmp3cy5JbnREYXRlLmdldE5vdz1mdW5jdGlvbigpe3JldHVybn5+KG5ldyBEYXRlLzFlMyl9LFNyLmp3cy5JbnREYXRlLmludERhdGUyVVRDU3RyaW5nPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgRGF0ZSgxZTMqdCkudG9VVENTdHJpbmcoKX0sU3IuandzLkludERhdGUuaW50RGF0ZTJadWx1PWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBEYXRlKDFlMyp0KTtyZXR1cm4oXCIwMDAwXCIrZS5nZXRVVENGdWxsWWVhcigpKS5zbGljZSgtNCkrKFwiMDBcIisoZS5nZXRVVENNb250aCgpKzEpKS5zbGljZSgtMikrKFwiMDBcIitlLmdldFVUQ0RhdGUoKSkuc2xpY2UoLTIpKyhcIjAwXCIrZS5nZXRVVENIb3VycygpKS5zbGljZSgtMikrKFwiMDBcIitlLmdldFVUQ01pbnV0ZXMoKSkuc2xpY2UoLTIpKyhcIjAwXCIrZS5nZXRVVENTZWNvbmRzKCkpLnNsaWNlKC0yKStcIlpcIn0sZS5TZWN1cmVSYW5kb209QmUsZS5ybmdfc2VlZF90aW1lPVJlLGUuQmlnSW50ZWdlcj13LGUuUlNBS2V5PU1lO3ZhciBzbj1Tci5jcnlwdG8uRURTQTtlLkVEU0E9c247dmFyIGFuPVNyLmNyeXB0by5EU0E7ZS5EU0E9YW47dmFyIHVuPVNyLmNyeXB0by5TaWduYXR1cmU7ZS5TaWduYXR1cmU9dW47dmFyIGNuPVNyLmNyeXB0by5NZXNzYWdlRGlnZXN0O2UuTWVzc2FnZURpZ2VzdD1jbjt2YXIgaG49U3IuY3J5cHRvLk1hYztlLk1hYz1objt2YXIgbG49U3IuY3J5cHRvLkNpcGhlcjtlLkNpcGhlcj1sbixlLktFWVVUSUw9dG4sZS5BU04xSEVYPUZyLGUuWDUwOT1vbixlLkNyeXB0b0pTPXYsZS5iNjR0b2hleD1TLGUuYjY0dG9CQT1iLGUuc3RvQkE9RXIsZS5CQXRvcz14cixlLkJBdG9oZXg9QXIsZS5zdG9oZXg9a3IsZS5zdG9iNjQ9ZnVuY3Rpb24gZm4odCl7cmV0dXJuIF8oa3IodCkpfSxlLnN0b2I2NHU9ZnVuY3Rpb24gZ24odCl7cmV0dXJuIFByKF8oa3IodCkpKX0sZS5iNjR1dG9zPWZ1bmN0aW9uIGRuKHQpe3JldHVybiB4cihiKENyKHQpKSl9LGUuYjY0dG9iNjR1PVByLGUuYjY0dXRvYjY0PUNyLGUuaGV4MmI2ND1fLGUuaGV4dG9iNjR1PVRyLGUuYjY0dXRvaGV4PVJyLGUudXRmOHRvYjY0dT1icixlLmI2NHV0b3V0Zjg9d3IsZS51dGY4dG9iNjQ9ZnVuY3Rpb24gcG4odCl7cmV0dXJuIF8oS3IoR3IodCkpKX0sZS5iNjR0b3V0Zjg9ZnVuY3Rpb24gdm4odCl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChxcihTKHQpKSl9LGUudXRmOHRvaGV4PUlyLGUuaGV4dG91dGY4PURyLGUuaGV4dG9yc3RyPUxyLGUucnN0cnRvaGV4PU5yLGUuaGV4dG9iNjQ9VXIsZS5oZXh0b2I2NG5sPUJyLGUuYjY0bmx0b2hleD1PcixlLmhleHRvcGVtPWpyLGUucGVtdG9oZXg9TXIsZS5oZXh0b0FycmF5QnVmZmVyPWZ1bmN0aW9uIHluKHQpe2lmKHQubGVuZ3RoJTIhPTApdGhyb3dcImlucHV0IGlzIG5vdCBldmVuIGxlbmd0aFwiO2lmKG51bGw9PXQubWF0Y2goL15bMC05QS1GYS1mXSskLykpdGhyb3dcImlucHV0IGlzIG5vdCBoZXhhZGVjaW1hbFwiO2Zvcih2YXIgZT1uZXcgQXJyYXlCdWZmZXIodC5sZW5ndGgvMikscj1uZXcgRGF0YVZpZXcoZSksbj0wO248dC5sZW5ndGgvMjtuKyspci5zZXRVaW50OChuLHBhcnNlSW50KHQuc3Vic3RyKDIqbiwyKSwxNikpO3JldHVybiBlfSxlLkFycmF5QnVmZmVydG9oZXg9ZnVuY3Rpb24gbW4odCl7Zm9yKHZhciBlPVwiXCIscj1uZXcgRGF0YVZpZXcodCksbj0wO248dC5ieXRlTGVuZ3RoO24rKyllKz0oXCIwMFwiK3IuZ2V0VWludDgobikudG9TdHJpbmcoMTYpKS5zbGljZSgtMik7cmV0dXJuIGV9LGUuenVsdXRvbXNlYz1IcixlLnp1bHV0b3NlYz1WcixlLnp1bHV0b2RhdGU9ZnVuY3Rpb24gX24odCl7cmV0dXJuIG5ldyBEYXRlKEhyKHQpKX0sZS5kYXRldG96dWx1PWZ1bmN0aW9uIFNuKHQsZSxyKXt2YXIgbixpPXQuZ2V0VVRDRnVsbFllYXIoKTtpZihlKXtpZihpPDE5NTB8fDIwNDk8aSl0aHJvd1wibm90IHByb3BlciB5ZWFyIGZvciBVVENUaW1lOiBcIitpO249KFwiXCIraSkuc2xpY2UoLTIpfWVsc2Ugbj0oXCIwMDBcIitpKS5zbGljZSgtNCk7aWYobis9KFwiMFwiKyh0LmdldFVUQ01vbnRoKCkrMSkpLnNsaWNlKC0yKSxuKz0oXCIwXCIrdC5nZXRVVENEYXRlKCkpLnNsaWNlKC0yKSxuKz0oXCIwXCIrdC5nZXRVVENIb3VycygpKS5zbGljZSgtMiksbis9KFwiMFwiK3QuZ2V0VVRDTWludXRlcygpKS5zbGljZSgtMiksbis9KFwiMFwiK3QuZ2V0VVRDU2Vjb25kcygpKS5zbGljZSgtMikscil7dmFyIG89dC5nZXRVVENNaWxsaXNlY29uZHMoKTswIT09byYmKG4rPVwiLlwiKyhvPShvPShcIjAwXCIrbykuc2xpY2UoLTMpKS5yZXBsYWNlKC8wKyQvZyxcIlwiKSkpfXJldHVybiBuKz1cIlpcIn0sZS51cmljbXB0b2hleD1LcixlLmhleHRvdXJpY21wPXFyLGUuaXB2NnRvaGV4PUpyLGUuaGV4dG9pcHY2PVdyLGUuaGV4dG9pcD16cixlLmlwdG9oZXg9ZnVuY3Rpb24gYm4odCl7dmFyIGU9XCJtYWxmb3JtZWQgSVAgYWRkcmVzc1wiO2lmKCEodD10LnRvTG93ZXJDYXNlKHQpKS5tYXRjaCgvXlswLTkuXSskLykpe2lmKHQubWF0Y2goL15bMC05YS1mOl0rJC8pJiYtMSE9PXQuaW5kZXhPZihcIjpcIikpcmV0dXJuIEpyKHQpO3Rocm93IGV9dmFyIHI9dC5zcGxpdChcIi5cIik7aWYoNCE9PXIubGVuZ3RoKXRocm93IGU7dmFyIG49XCJcIjt0cnl7Zm9yKHZhciBpPTA7aTw0O2krKyl7bis9KFwiMFwiK3BhcnNlSW50KHJbaV0pLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpfXJldHVybiBufWNhdGNoKHQpe3Rocm93IGV9fSxlLmVuY29kZVVSSUNvbXBvbmVudEFsbD1HcixlLm5ld2xpbmVfdG9Vbml4PWZ1bmN0aW9uIHduKHQpe3JldHVybiB0PXQucmVwbGFjZSgvXFxyXFxuL2dtLFwiXFxuXCIpfSxlLm5ld2xpbmVfdG9Eb3M9ZnVuY3Rpb24gRm4odCl7cmV0dXJuIHQ9KHQ9dC5yZXBsYWNlKC9cXHJcXG4vZ20sXCJcXG5cIikpLnJlcGxhY2UoL1xcbi9nbSxcIlxcclxcblwiKX0sZS5oZXh0b3Bvc2hleD0kcixlLmludGFyeXN0cnRvaGV4PWZ1bmN0aW9uIEVuKHQpe3Q9KHQ9KHQ9dC5yZXBsYWNlKC9eXFxzKlxcW1xccyovLFwiXCIpKS5yZXBsYWNlKC9cXHMqXFxdXFxzKiQvLFwiXCIpKS5yZXBsYWNlKC9cXHMqL2csXCJcIik7dHJ5e3JldHVybiB0LnNwbGl0KC8sLykubWFwKChmdW5jdGlvbih0LGUscil7dmFyIG49cGFyc2VJbnQodCk7aWYobjwwfHwyNTU8bil0aHJvd1wiaW50ZWdlciBub3QgaW4gcmFuZ2UgMC0yNTVcIjtyZXR1cm4oXCIwMFwiK24udG9TdHJpbmcoMTYpKS5zbGljZSgtMil9KSkuam9pbihcIlwiKX1jYXRjaCh0KXt0aHJvd1wibWFsZm9ybWVkIGludGVnZXIgYXJyYXkgc3RyaW5nOiBcIit0fX0sZS5zdHJkaWZmaWR4PWZ1bmN0aW9uIHQoZSxyKXt2YXIgbj1lLmxlbmd0aDtlLmxlbmd0aD5yLmxlbmd0aCYmKG49ci5sZW5ndGgpO2Zvcih2YXIgaT0wO2k8bjtpKyspaWYoZS5jaGFyQ29kZUF0KGkpIT1yLmNoYXJDb2RlQXQoaSkpcmV0dXJuIGk7cmV0dXJuIGUubGVuZ3RoIT1yLmxlbmd0aD9uOi0xfSxlLktKVVI9U3I7dmFyIHhuPVNyLmNyeXB0bztlLmNyeXB0bz14bjt2YXIgQW49U3IuYXNuMTtlLmFzbjE9QW47dmFyIGtuPVNyLmp3cztlLmp3cz1rbjt2YXIgUG49U3IubGFuZztlLmxhbmc9UG59KS5jYWxsKHRoaXMscigyOCkuQnVmZmVyKX0sZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiOyhmdW5jdGlvbih0KXtcbi8qIVxuICogVGhlIGJ1ZmZlciBtb2R1bGUgZnJvbSBub2RlLmpzLCBmb3IgdGhlIGJyb3dzZXIuXG4gKlxuICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGh0dHA6Ly9mZXJvc3Mub3JnPlxuICogQGxpY2Vuc2UgIE1JVFxuICovXG52YXIgbj1yKDMwKSxpPXIoMzEpLG89cigzMik7ZnVuY3Rpb24gcygpe3JldHVybiB1LlRZUEVEX0FSUkFZX1NVUFBPUlQ/MjE0NzQ4MzY0NzoxMDczNzQxODIzfWZ1bmN0aW9uIGEodCxlKXtpZihzKCk8ZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgdHlwZWQgYXJyYXkgbGVuZ3RoXCIpO3JldHVybiB1LlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHQ9bmV3IFVpbnQ4QXJyYXkoZSkpLl9fcHJvdG9fXz11LnByb3RvdHlwZToobnVsbD09PXQmJih0PW5ldyB1KGUpKSx0Lmxlbmd0aD1lKSx0fWZ1bmN0aW9uIHUodCxlLHIpe2lmKCEodS5UWVBFRF9BUlJBWV9TVVBQT1JUfHx0aGlzIGluc3RhbmNlb2YgdSkpcmV0dXJuIG5ldyB1KHQsZSxyKTtpZihcIm51bWJlclwiPT10eXBlb2YgdCl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKFwiSWYgZW5jb2RpbmcgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmdcIik7cmV0dXJuIGwodGhpcyx0KX1yZXR1cm4gYyh0aGlzLHQsZSxyKX1mdW5jdGlvbiBjKHQsZSxyLG4pe2lmKFwibnVtYmVyXCI9PXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoJ1widmFsdWVcIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBhIG51bWJlcicpO3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBBcnJheUJ1ZmZlciYmZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyP2Z1bmN0aW9uIGkodCxlLHIsbil7aWYoZS5ieXRlTGVuZ3RoLHI8MHx8ZS5ieXRlTGVuZ3RoPHIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCInb2Zmc2V0JyBpcyBvdXQgb2YgYm91bmRzXCIpO2lmKGUuYnl0ZUxlbmd0aDxyKyhufHwwKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIidsZW5ndGgnIGlzIG91dCBvZiBib3VuZHNcIik7ZT12b2lkIDA9PT1yJiZ2b2lkIDA9PT1uP25ldyBVaW50OEFycmF5KGUpOnZvaWQgMD09PW4/bmV3IFVpbnQ4QXJyYXkoZSxyKTpuZXcgVWludDhBcnJheShlLHIsbik7dS5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0PWUpLl9fcHJvdG9fXz11LnByb3RvdHlwZTp0PWYodCxlKTtyZXR1cm4gdH0odCxlLHIsbik6XCJzdHJpbmdcIj09dHlwZW9mIGU/ZnVuY3Rpb24gcyh0LGUscil7XCJzdHJpbmdcIj09dHlwZW9mIHImJlwiXCIhPT1yfHwocj1cInV0ZjhcIik7aWYoIXUuaXNFbmNvZGluZyhyKSl0aHJvdyBuZXcgVHlwZUVycm9yKCdcImVuY29kaW5nXCIgbXVzdCBiZSBhIHZhbGlkIHN0cmluZyBlbmNvZGluZycpO3ZhciBuPTB8ZChlLHIpLGk9KHQ9YSh0LG4pKS53cml0ZShlLHIpO2khPT1uJiYodD10LnNsaWNlKDAsaSkpO3JldHVybiB0fSh0LGUscik6ZnVuY3Rpb24gYyh0LGUpe2lmKHUuaXNCdWZmZXIoZSkpe3ZhciByPTB8ZyhlLmxlbmd0aCk7cmV0dXJuIDA9PT0odD1hKHQscikpLmxlbmd0aHx8ZS5jb3B5KHQsMCwwLHIpLHR9aWYoZSl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEFycmF5QnVmZmVyJiZlLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyfHxcImxlbmd0aFwiaW4gZSlyZXR1cm5cIm51bWJlclwiIT10eXBlb2YgZS5sZW5ndGh8fGZ1bmN0aW9uIG4odCl7cmV0dXJuIHQhPXR9KGUubGVuZ3RoKT9hKHQsMCk6Zih0LGUpO2lmKFwiQnVmZmVyXCI9PT1lLnR5cGUmJm8oZS5kYXRhKSlyZXR1cm4gZih0LGUuZGF0YSl9dGhyb3cgbmV3IFR5cGVFcnJvcihcIkZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBvciBhcnJheS1saWtlIG9iamVjdC5cIil9KHQsZSl9ZnVuY3Rpb24gaCh0KXtpZihcIm51bWJlclwiIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJyk7aWYodDwwKXRocm93IG5ldyBSYW5nZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBuZWdhdGl2ZScpfWZ1bmN0aW9uIGwodCxlKXtpZihoKGUpLHQ9YSh0LGU8MD8wOjB8ZyhlKSksIXUuVFlQRURfQVJSQVlfU1VQUE9SVClmb3IodmFyIHI9MDtyPGU7KytyKXRbcl09MDtyZXR1cm4gdH1mdW5jdGlvbiBmKHQsZSl7dmFyIHI9ZS5sZW5ndGg8MD8wOjB8ZyhlLmxlbmd0aCk7dD1hKHQscik7Zm9yKHZhciBuPTA7bjxyO24rPTEpdFtuXT0yNTUmZVtuXTtyZXR1cm4gdH1mdW5jdGlvbiBnKHQpe2lmKHQ+PXMoKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkF0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gc2l6ZTogMHhcIitzKCkudG9TdHJpbmcoMTYpK1wiIGJ5dGVzXCIpO3JldHVybiAwfHR9ZnVuY3Rpb24gZCh0LGUpe2lmKHUuaXNCdWZmZXIodCkpcmV0dXJuIHQubGVuZ3RoO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBBcnJheUJ1ZmZlciYmXCJmdW5jdGlvblwiPT10eXBlb2YgQXJyYXlCdWZmZXIuaXNWaWV3JiYoQXJyYXlCdWZmZXIuaXNWaWV3KHQpfHx0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKXJldHVybiB0LmJ5dGVMZW5ndGg7XCJzdHJpbmdcIiE9dHlwZW9mIHQmJih0PVwiXCIrdCk7dmFyIHI9dC5sZW5ndGg7aWYoMD09PXIpcmV0dXJuIDA7Zm9yKHZhciBuPSExOzspc3dpdGNoKGUpe2Nhc2VcImFzY2lpXCI6Y2FzZVwibGF0aW4xXCI6Y2FzZVwiYmluYXJ5XCI6cmV0dXJuIHI7Y2FzZVwidXRmOFwiOmNhc2VcInV0Zi04XCI6Y2FzZSB2b2lkIDA6cmV0dXJuIEsodCkubGVuZ3RoO2Nhc2VcInVjczJcIjpjYXNlXCJ1Y3MtMlwiOmNhc2VcInV0ZjE2bGVcIjpjYXNlXCJ1dGYtMTZsZVwiOnJldHVybiAyKnI7Y2FzZVwiaGV4XCI6cmV0dXJuIHI+Pj4xO2Nhc2VcImJhc2U2NFwiOnJldHVybiBxKHQpLmxlbmd0aDtkZWZhdWx0OmlmKG4pcmV0dXJuIEsodCkubGVuZ3RoO2U9KFwiXCIrZSkudG9Mb3dlckNhc2UoKSxuPSEwfX1mdW5jdGlvbiBwKHQsZSxyKXt2YXIgbj0hMTtpZigodm9pZCAwPT09ZXx8ZTwwKSYmKGU9MCksZT50aGlzLmxlbmd0aClyZXR1cm5cIlwiO2lmKCh2b2lkIDA9PT1yfHxyPnRoaXMubGVuZ3RoKSYmKHI9dGhpcy5sZW5ndGgpLHI8PTApcmV0dXJuXCJcIjtpZigocj4+Pj0wKTw9KGU+Pj49MCkpcmV0dXJuXCJcIjtmb3IodHx8KHQ9XCJ1dGY4XCIpOzspc3dpdGNoKHQpe2Nhc2VcImhleFwiOnJldHVybiBJKHRoaXMsZSxyKTtjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjpyZXR1cm4gQSh0aGlzLGUscik7Y2FzZVwiYXNjaWlcIjpyZXR1cm4gVCh0aGlzLGUscik7Y2FzZVwibGF0aW4xXCI6Y2FzZVwiYmluYXJ5XCI6cmV0dXJuIFIodGhpcyxlLHIpO2Nhc2VcImJhc2U2NFwiOnJldHVybiB4KHRoaXMsZSxyKTtjYXNlXCJ1Y3MyXCI6Y2FzZVwidWNzLTJcIjpjYXNlXCJ1dGYxNmxlXCI6Y2FzZVwidXRmLTE2bGVcIjpyZXR1cm4gRCh0aGlzLGUscik7ZGVmYXVsdDppZihuKXRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmtub3duIGVuY29kaW5nOiBcIit0KTt0PSh0K1wiXCIpLnRvTG93ZXJDYXNlKCksbj0hMH19ZnVuY3Rpb24gdih0LGUscil7dmFyIG49dFtlXTt0W2VdPXRbcl0sdFtyXT1ufWZ1bmN0aW9uIHkodCxlLHIsbixpKXtpZigwPT09dC5sZW5ndGgpcmV0dXJuLTE7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHI/KG49cixyPTApOnI+MjE0NzQ4MzY0Nz9yPTIxNDc0ODM2NDc6cjwtMjE0NzQ4MzY0OCYmKHI9LTIxNDc0ODM2NDgpLHI9K3IsaXNOYU4ocikmJihyPWk/MDp0Lmxlbmd0aC0xKSxyPDAmJihyPXQubGVuZ3RoK3IpLHI+PXQubGVuZ3RoKXtpZihpKXJldHVybi0xO3I9dC5sZW5ndGgtMX1lbHNlIGlmKHI8MCl7aWYoIWkpcmV0dXJuLTE7cj0wfWlmKFwic3RyaW5nXCI9PXR5cGVvZiBlJiYoZT11LmZyb20oZSxuKSksdS5pc0J1ZmZlcihlKSlyZXR1cm4gMD09PWUubGVuZ3RoPy0xOm0odCxlLHIsbixpKTtpZihcIm51bWJlclwiPT10eXBlb2YgZSlyZXR1cm4gZSY9MjU1LHUuVFlQRURfQVJSQVlfU1VQUE9SVCYmXCJmdW5jdGlvblwiPT10eXBlb2YgVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZj9pP1VpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0LGUscik6VWludDhBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2YuY2FsbCh0LGUscik6bSh0LFtlXSxyLG4saSk7dGhyb3cgbmV3IFR5cGVFcnJvcihcInZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlclwiKX1mdW5jdGlvbiBtKHQsZSxyLG4saSl7dmFyIG8scz0xLGE9dC5sZW5ndGgsdT1lLmxlbmd0aDtpZih2b2lkIDAhPT1uJiYoXCJ1Y3MyXCI9PT0obj1TdHJpbmcobikudG9Mb3dlckNhc2UoKSl8fFwidWNzLTJcIj09PW58fFwidXRmMTZsZVwiPT09bnx8XCJ1dGYtMTZsZVwiPT09bikpe2lmKHQubGVuZ3RoPDJ8fGUubGVuZ3RoPDIpcmV0dXJuLTE7cz0yLGEvPTIsdS89MixyLz0yfWZ1bmN0aW9uIGModCxlKXtyZXR1cm4gMT09PXM/dFtlXTp0LnJlYWRVSW50MTZCRShlKnMpfWlmKGkpe3ZhciBoPS0xO2ZvcihvPXI7bzxhO28rKylpZihjKHQsbyk9PT1jKGUsLTE9PT1oPzA6by1oKSl7aWYoLTE9PT1oJiYoaD1vKSxvLWgrMT09PXUpcmV0dXJuIGgqc31lbHNlLTEhPT1oJiYoby09by1oKSxoPS0xfWVsc2UgZm9yKHIrdT5hJiYocj1hLXUpLG89cjtvPj0wO28tLSl7Zm9yKHZhciBsPSEwLGY9MDtmPHU7ZisrKWlmKGModCxvK2YpIT09YyhlLGYpKXtsPSExO2JyZWFrfWlmKGwpcmV0dXJuIG99cmV0dXJuLTF9ZnVuY3Rpb24gXyh0LGUscixuKXtyPU51bWJlcihyKXx8MDt2YXIgaT10Lmxlbmd0aC1yO24/KG49TnVtYmVyKG4pKT5pJiYobj1pKTpuPWk7dmFyIG89ZS5sZW5ndGg7aWYobyUyIT0wKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGhleCBzdHJpbmdcIik7bj5vLzImJihuPW8vMik7Zm9yKHZhciBzPTA7czxuOysrcyl7dmFyIGE9cGFyc2VJbnQoZS5zdWJzdHIoMipzLDIpLDE2KTtpZihpc05hTihhKSlyZXR1cm4gczt0W3Irc109YX1yZXR1cm4gc31mdW5jdGlvbiBTKHQsZSxyLG4pe3JldHVybiBKKEsoZSx0Lmxlbmd0aC1yKSx0LHIsbil9ZnVuY3Rpb24gYih0LGUscixuKXtyZXR1cm4gSihmdW5jdGlvbiBpKHQpe2Zvcih2YXIgZT1bXSxyPTA7cjx0Lmxlbmd0aDsrK3IpZS5wdXNoKDI1NSZ0LmNoYXJDb2RlQXQocikpO3JldHVybiBlfShlKSx0LHIsbil9ZnVuY3Rpb24gdyh0LGUscixuKXtyZXR1cm4gYih0LGUscixuKX1mdW5jdGlvbiBGKHQsZSxyLG4pe3JldHVybiBKKHEoZSksdCxyLG4pfWZ1bmN0aW9uIEUodCxlLHIsbil7cmV0dXJuIEooZnVuY3Rpb24gaSh0LGUpe2Zvcih2YXIgcixuLGksbz1bXSxzPTA7czx0Lmxlbmd0aCYmISgoZS09Mik8MCk7KytzKW49KHI9dC5jaGFyQ29kZUF0KHMpKT4+OCxpPXIlMjU2LG8ucHVzaChpKSxvLnB1c2gobik7cmV0dXJuIG99KGUsdC5sZW5ndGgtciksdCxyLG4pfWZ1bmN0aW9uIHgodCxlLHIpe3JldHVybiAwPT09ZSYmcj09PXQubGVuZ3RoP24uZnJvbUJ5dGVBcnJheSh0KTpuLmZyb21CeXRlQXJyYXkodC5zbGljZShlLHIpKX1mdW5jdGlvbiBBKHQsZSxyKXtyPU1hdGgubWluKHQubGVuZ3RoLHIpO2Zvcih2YXIgbj1bXSxpPWU7aTxyOyl7dmFyIG8scyxhLHUsYz10W2ldLGg9bnVsbCxsPWM+MjM5PzQ6Yz4yMjM/MzpjPjE5MT8yOjE7aWYoaStsPD1yKXN3aXRjaChsKXtjYXNlIDE6YzwxMjgmJihoPWMpO2JyZWFrO2Nhc2UgMjoxMjg9PSgxOTImKG89dFtpKzFdKSkmJih1PSgzMSZjKTw8Nnw2MyZvKT4xMjcmJihoPXUpO2JyZWFrO2Nhc2UgMzpvPXRbaSsxXSxzPXRbaSsyXSwxMjg9PSgxOTImbykmJjEyOD09KDE5MiZzKSYmKHU9KDE1JmMpPDwxMnwoNjMmbyk8PDZ8NjMmcyk+MjA0NyYmKHU8NTUyOTZ8fHU+NTczNDMpJiYoaD11KTticmVhaztjYXNlIDQ6bz10W2krMV0scz10W2krMl0sYT10W2krM10sMTI4PT0oMTkyJm8pJiYxMjg9PSgxOTImcykmJjEyOD09KDE5MiZhKSYmKHU9KDE1JmMpPDwxOHwoNjMmbyk8PDEyfCg2MyZzKTw8Nnw2MyZhKT42NTUzNSYmdTwxMTE0MTEyJiYoaD11KX1udWxsPT09aD8oaD02NTUzMyxsPTEpOmg+NjU1MzUmJihoLT02NTUzNixuLnB1c2goaD4+PjEwJjEwMjN8NTUyOTYpLGg9NTYzMjB8MTAyMyZoKSxuLnB1c2goaCksaSs9bH1yZXR1cm4gZnVuY3Rpb24gZih0KXt2YXIgZT10Lmxlbmd0aDtpZihlPD1DKXJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyx0KTt2YXIgcj1cIlwiLG49MDtmb3IoO248ZTspcis9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsdC5zbGljZShuLG4rPUMpKTtyZXR1cm4gcn0obil9ZS5CdWZmZXI9dSxlLlNsb3dCdWZmZXI9ZnVuY3Rpb24gayh0KXsrdCE9dCYmKHQ9MCk7cmV0dXJuIHUuYWxsb2MoK3QpfSxlLklOU1BFQ1RfTUFYX0JZVEVTPTUwLHUuVFlQRURfQVJSQVlfU1VQUE9SVD12b2lkIDAhPT10LlRZUEVEX0FSUkFZX1NVUFBPUlQ/dC5UWVBFRF9BUlJBWV9TVVBQT1JUOmZ1bmN0aW9uIFAoKXt0cnl7dmFyIHQ9bmV3IFVpbnQ4QXJyYXkoMSk7cmV0dXJuIHQuX19wcm90b19fPXtfX3Byb3RvX186VWludDhBcnJheS5wcm90b3R5cGUsZm9vOmZ1bmN0aW9uKCl7cmV0dXJuIDQyfX0sNDI9PT10LmZvbygpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LnN1YmFycmF5JiYwPT09dC5zdWJhcnJheSgxLDEpLmJ5dGVMZW5ndGh9Y2F0Y2godCl7cmV0dXJuITF9fSgpLGUua01heExlbmd0aD1zKCksdS5wb29sU2l6ZT04MTkyLHUuX2F1Z21lbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuX19wcm90b19fPXUucHJvdG90eXBlLHR9LHUuZnJvbT1mdW5jdGlvbih0LGUscil7cmV0dXJuIGMobnVsbCx0LGUscil9LHUuVFlQRURfQVJSQVlfU1VQUE9SVCYmKHUucHJvdG90eXBlLl9fcHJvdG9fXz1VaW50OEFycmF5LnByb3RvdHlwZSx1Ll9fcHJvdG9fXz1VaW50OEFycmF5LFwidW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5zcGVjaWVzJiZ1W1N5bWJvbC5zcGVjaWVzXT09PXUmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh1LFN5bWJvbC5zcGVjaWVzLHt2YWx1ZTpudWxsLGNvbmZpZ3VyYWJsZTohMH0pKSx1LmFsbG9jPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gZnVuY3Rpb24gbih0LGUscixpKXtyZXR1cm4gaChlKSxlPD0wP2EodCxlKTp2b2lkIDAhPT1yP1wic3RyaW5nXCI9PXR5cGVvZiBpP2EodCxlKS5maWxsKHIsaSk6YSh0LGUpLmZpbGwocik6YSh0LGUpfShudWxsLHQsZSxyKX0sdS5hbGxvY1Vuc2FmZT1mdW5jdGlvbih0KXtyZXR1cm4gbChudWxsLHQpfSx1LmFsbG9jVW5zYWZlU2xvdz1mdW5jdGlvbih0KXtyZXR1cm4gbChudWxsLHQpfSx1LmlzQnVmZmVyPWZ1bmN0aW9uIHQoZSl7cmV0dXJuIShudWxsPT1lfHwhZS5faXNCdWZmZXIpfSx1LmNvbXBhcmU9ZnVuY3Rpb24gdChlLHIpe2lmKCF1LmlzQnVmZmVyKGUpfHwhdS5pc0J1ZmZlcihyKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJndW1lbnRzIG11c3QgYmUgQnVmZmVyc1wiKTtpZihlPT09cilyZXR1cm4gMDtmb3IodmFyIG49ZS5sZW5ndGgsaT1yLmxlbmd0aCxvPTAscz1NYXRoLm1pbihuLGkpO288czsrK28paWYoZVtvXSE9PXJbb10pe249ZVtvXSxpPXJbb107YnJlYWt9cmV0dXJuIG48aT8tMTppPG4/MTowfSx1LmlzRW5jb2Rpbmc9ZnVuY3Rpb24gdChlKXtzd2l0Y2goU3RyaW5nKGUpLnRvTG93ZXJDYXNlKCkpe2Nhc2VcImhleFwiOmNhc2VcInV0ZjhcIjpjYXNlXCJ1dGYtOFwiOmNhc2VcImFzY2lpXCI6Y2FzZVwibGF0aW4xXCI6Y2FzZVwiYmluYXJ5XCI6Y2FzZVwiYmFzZTY0XCI6Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19LHUuY29uY2F0PWZ1bmN0aW9uIHQoZSxyKXtpZighbyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKTtpZigwPT09ZS5sZW5ndGgpcmV0dXJuIHUuYWxsb2MoMCk7dmFyIG47aWYodm9pZCAwPT09cilmb3Iocj0wLG49MDtuPGUubGVuZ3RoOysrbilyKz1lW25dLmxlbmd0aDt2YXIgaT11LmFsbG9jVW5zYWZlKHIpLHM9MDtmb3Iobj0wO248ZS5sZW5ndGg7KytuKXt2YXIgYT1lW25dO2lmKCF1LmlzQnVmZmVyKGEpKXRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpO2EuY29weShpLHMpLHMrPWEubGVuZ3RofXJldHVybiBpfSx1LmJ5dGVMZW5ndGg9ZCx1LnByb3RvdHlwZS5faXNCdWZmZXI9ITAsdS5wcm90b3R5cGUuc3dhcDE2PWZ1bmN0aW9uIHQoKXt2YXIgZT10aGlzLmxlbmd0aDtpZihlJTIhPTApdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMTYtYml0c1wiKTtmb3IodmFyIHI9MDtyPGU7cis9Mil2KHRoaXMscixyKzEpO3JldHVybiB0aGlzfSx1LnByb3RvdHlwZS5zd2FwMzI9ZnVuY3Rpb24gdCgpe3ZhciBlPXRoaXMubGVuZ3RoO2lmKGUlNCE9MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkJ1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAzMi1iaXRzXCIpO2Zvcih2YXIgcj0wO3I8ZTtyKz00KXYodGhpcyxyLHIrMyksdih0aGlzLHIrMSxyKzIpO3JldHVybiB0aGlzfSx1LnByb3RvdHlwZS5zd2FwNjQ9ZnVuY3Rpb24gdCgpe3ZhciBlPXRoaXMubGVuZ3RoO2lmKGUlOCE9MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkJ1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA2NC1iaXRzXCIpO2Zvcih2YXIgcj0wO3I8ZTtyKz04KXYodGhpcyxyLHIrNyksdih0aGlzLHIrMSxyKzYpLHYodGhpcyxyKzIscis1KSx2KHRoaXMsciszLHIrNCk7cmV0dXJuIHRoaXN9LHUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uIHQoKXt2YXIgZT0wfHRoaXMubGVuZ3RoO3JldHVybiAwPT09ZT9cIlwiOjA9PT1hcmd1bWVudHMubGVuZ3RoP0EodGhpcywwLGUpOnAuYXBwbHkodGhpcyxhcmd1bWVudHMpfSx1LnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24gdChlKXtpZighdS5pc0J1ZmZlcihlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlclwiKTtyZXR1cm4gdGhpcz09PWV8fDA9PT11LmNvbXBhcmUodGhpcyxlKX0sdS5wcm90b3R5cGUuaW5zcGVjdD1mdW5jdGlvbiB0KCl7dmFyIHI9XCJcIixuPWUuSU5TUEVDVF9NQVhfQllURVM7cmV0dXJuIHRoaXMubGVuZ3RoPjAmJihyPXRoaXMudG9TdHJpbmcoXCJoZXhcIiwwLG4pLm1hdGNoKC8uezJ9L2cpLmpvaW4oXCIgXCIpLHRoaXMubGVuZ3RoPm4mJihyKz1cIiAuLi4gXCIpKSxcIjxCdWZmZXIgXCIrcitcIj5cIn0sdS5wcm90b3R5cGUuY29tcGFyZT1mdW5jdGlvbiB0KGUscixuLGksbyl7aWYoIXUuaXNCdWZmZXIoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXJcIik7aWYodm9pZCAwPT09ciYmKHI9MCksdm9pZCAwPT09biYmKG49ZT9lLmxlbmd0aDowKSx2b2lkIDA9PT1pJiYoaT0wKSx2b2lkIDA9PT1vJiYobz10aGlzLmxlbmd0aCkscjwwfHxuPmUubGVuZ3RofHxpPDB8fG8+dGhpcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJvdXQgb2YgcmFuZ2UgaW5kZXhcIik7aWYoaT49byYmcj49bilyZXR1cm4gMDtpZihpPj1vKXJldHVybi0xO2lmKHI+PW4pcmV0dXJuIDE7aWYodGhpcz09PWUpcmV0dXJuIDA7Zm9yKHZhciBzPShvPj4+PTApLShpPj4+PTApLGE9KG4+Pj49MCktKHI+Pj49MCksYz1NYXRoLm1pbihzLGEpLGg9dGhpcy5zbGljZShpLG8pLGw9ZS5zbGljZShyLG4pLGY9MDtmPGM7KytmKWlmKGhbZl0hPT1sW2ZdKXtzPWhbZl0sYT1sW2ZdO2JyZWFrfXJldHVybiBzPGE/LTE6YTxzPzE6MH0sdS5wcm90b3R5cGUuaW5jbHVkZXM9ZnVuY3Rpb24gdChlLHIsbil7cmV0dXJuLTEhPT10aGlzLmluZGV4T2YoZSxyLG4pfSx1LnByb3RvdHlwZS5pbmRleE9mPWZ1bmN0aW9uIHQoZSxyLG4pe3JldHVybiB5KHRoaXMsZSxyLG4sITApfSx1LnByb3RvdHlwZS5sYXN0SW5kZXhPZj1mdW5jdGlvbiB0KGUscixuKXtyZXR1cm4geSh0aGlzLGUscixuLCExKX0sdS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24gdChlLHIsbixpKXtpZih2b2lkIDA9PT1yKWk9XCJ1dGY4XCIsbj10aGlzLmxlbmd0aCxyPTA7ZWxzZSBpZih2b2lkIDA9PT1uJiZcInN0cmluZ1wiPT10eXBlb2YgcilpPXIsbj10aGlzLmxlbmd0aCxyPTA7ZWxzZXtpZighaXNGaW5pdGUocikpdGhyb3cgbmV3IEVycm9yKFwiQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWRcIik7cnw9MCxpc0Zpbml0ZShuKT8obnw9MCx2b2lkIDA9PT1pJiYoaT1cInV0ZjhcIikpOihpPW4sbj12b2lkIDApfXZhciBvPXRoaXMubGVuZ3RoLXI7aWYoKHZvaWQgMD09PW58fG4+bykmJihuPW8pLGUubGVuZ3RoPjAmJihuPDB8fHI8MCl8fHI+dGhpcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kc1wiKTtpfHwoaT1cInV0ZjhcIik7Zm9yKHZhciBzPSExOzspc3dpdGNoKGkpe2Nhc2VcImhleFwiOnJldHVybiBfKHRoaXMsZSxyLG4pO2Nhc2VcInV0ZjhcIjpjYXNlXCJ1dGYtOFwiOnJldHVybiBTKHRoaXMsZSxyLG4pO2Nhc2VcImFzY2lpXCI6cmV0dXJuIGIodGhpcyxlLHIsbik7Y2FzZVwibGF0aW4xXCI6Y2FzZVwiYmluYXJ5XCI6cmV0dXJuIHcodGhpcyxlLHIsbik7Y2FzZVwiYmFzZTY0XCI6cmV0dXJuIEYodGhpcyxlLHIsbik7Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6cmV0dXJuIEUodGhpcyxlLHIsbik7ZGVmYXVsdDppZihzKXRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmtub3duIGVuY29kaW5nOiBcIitpKTtpPShcIlwiK2kpLnRvTG93ZXJDYXNlKCkscz0hMH19LHUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbiB0KCl7cmV0dXJue3R5cGU6XCJCdWZmZXJcIixkYXRhOkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2Fycnx8dGhpcywwKX19O3ZhciBDPTQwOTY7ZnVuY3Rpb24gVCh0LGUscil7dmFyIG49XCJcIjtyPU1hdGgubWluKHQubGVuZ3RoLHIpO2Zvcih2YXIgaT1lO2k8cjsrK2kpbis9U3RyaW5nLmZyb21DaGFyQ29kZSgxMjcmdFtpXSk7cmV0dXJuIG59ZnVuY3Rpb24gUih0LGUscil7dmFyIG49XCJcIjtyPU1hdGgubWluKHQubGVuZ3RoLHIpO2Zvcih2YXIgaT1lO2k8cjsrK2kpbis9U3RyaW5nLmZyb21DaGFyQ29kZSh0W2ldKTtyZXR1cm4gbn1mdW5jdGlvbiBJKHQsZSxyKXt2YXIgbj10Lmxlbmd0aDsoIWV8fGU8MCkmJihlPTApLCghcnx8cjwwfHxyPm4pJiYocj1uKTtmb3IodmFyIGk9XCJcIixvPWU7bzxyOysrbylpKz1WKHRbb10pO3JldHVybiBpfWZ1bmN0aW9uIEQodCxlLHIpe2Zvcih2YXIgbj10LnNsaWNlKGUsciksaT1cIlwiLG89MDtvPG4ubGVuZ3RoO28rPTIpaSs9U3RyaW5nLmZyb21DaGFyQ29kZShuW29dKzI1NipuW28rMV0pO3JldHVybiBpfWZ1bmN0aW9uIEwodCxlLHIpe2lmKHQlMSE9MHx8dDwwKXRocm93IG5ldyBSYW5nZUVycm9yKFwib2Zmc2V0IGlzIG5vdCB1aW50XCIpO2lmKHQrZT5yKXRocm93IG5ldyBSYW5nZUVycm9yKFwiVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKX1mdW5jdGlvbiBOKHQsZSxyLG4saSxvKXtpZighdS5pc0J1ZmZlcih0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCdcImJ1ZmZlclwiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKTtpZihlPml8fGU8byl0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IGlzIG91dCBvZiBib3VuZHMnKTtpZihyK24+dC5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbmRleCBvdXQgb2YgcmFuZ2VcIil9ZnVuY3Rpb24gVSh0LGUscixuKXtlPDAmJihlPTY1NTM1K2UrMSk7Zm9yKHZhciBpPTAsbz1NYXRoLm1pbih0Lmxlbmd0aC1yLDIpO2k8bzsrK2kpdFtyK2ldPShlJjI1NTw8OCoobj9pOjEtaSkpPj4+OCoobj9pOjEtaSl9ZnVuY3Rpb24gQih0LGUscixuKXtlPDAmJihlPTQyOTQ5NjcyOTUrZSsxKTtmb3IodmFyIGk9MCxvPU1hdGgubWluKHQubGVuZ3RoLXIsNCk7aTxvOysraSl0W3IraV09ZT4+PjgqKG4/aTozLWkpJjI1NX1mdW5jdGlvbiBPKHQsZSxyLG4saSxvKXtpZihyK24+dC5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbmRleCBvdXQgb2YgcmFuZ2VcIik7aWYocjwwKXRocm93IG5ldyBSYW5nZUVycm9yKFwiSW5kZXggb3V0IG9mIHJhbmdlXCIpfWZ1bmN0aW9uIGoodCxlLHIsbixvKXtyZXR1cm4gb3x8Tyh0LDAsciw0KSxpLndyaXRlKHQsZSxyLG4sMjMsNCkscis0fWZ1bmN0aW9uIE0odCxlLHIsbixvKXtyZXR1cm4gb3x8Tyh0LDAsciw4KSxpLndyaXRlKHQsZSxyLG4sNTIsOCkscis4fXUucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uIHQoZSxyKXt2YXIgbixpPXRoaXMubGVuZ3RoO2lmKChlPX5+ZSk8MD8oZSs9aSk8MCYmKGU9MCk6ZT5pJiYoZT1pKSwocj12b2lkIDA9PT1yP2k6fn5yKTwwPyhyKz1pKTwwJiYocj0wKTpyPmkmJihyPWkpLHI8ZSYmKHI9ZSksdS5UWVBFRF9BUlJBWV9TVVBQT1JUKShuPXRoaXMuc3ViYXJyYXkoZSxyKSkuX19wcm90b19fPXUucHJvdG90eXBlO2Vsc2V7dmFyIG89ci1lO249bmV3IHUobyx2b2lkIDApO2Zvcih2YXIgcz0wO3M8bzsrK3MpbltzXT10aGlzW3MrZV19cmV0dXJuIG59LHUucHJvdG90eXBlLnJlYWRVSW50TEU9ZnVuY3Rpb24gdChlLHIsbil7ZXw9MCxyfD0wLG58fEwoZSxyLHRoaXMubGVuZ3RoKTtmb3IodmFyIGk9dGhpc1tlXSxvPTEscz0wOysrczxyJiYobyo9MjU2KTspaSs9dGhpc1tlK3NdKm87cmV0dXJuIGl9LHUucHJvdG90eXBlLnJlYWRVSW50QkU9ZnVuY3Rpb24gdChlLHIsbil7ZXw9MCxyfD0wLG58fEwoZSxyLHRoaXMubGVuZ3RoKTtmb3IodmFyIGk9dGhpc1tlKy0tcl0sbz0xO3I+MCYmKG8qPTI1Nik7KWkrPXRoaXNbZSstLXJdKm87cmV0dXJuIGl9LHUucHJvdG90eXBlLnJlYWRVSW50OD1mdW5jdGlvbiB0KGUscil7cmV0dXJuIHJ8fEwoZSwxLHRoaXMubGVuZ3RoKSx0aGlzW2VdfSx1LnByb3RvdHlwZS5yZWFkVUludDE2TEU9ZnVuY3Rpb24gdChlLHIpe3JldHVybiByfHxMKGUsMix0aGlzLmxlbmd0aCksdGhpc1tlXXx0aGlzW2UrMV08PDh9LHUucHJvdG90eXBlLnJlYWRVSW50MTZCRT1mdW5jdGlvbiB0KGUscil7cmV0dXJuIHJ8fEwoZSwyLHRoaXMubGVuZ3RoKSx0aGlzW2VdPDw4fHRoaXNbZSsxXX0sdS5wcm90b3R5cGUucmVhZFVJbnQzMkxFPWZ1bmN0aW9uIHQoZSxyKXtyZXR1cm4gcnx8TChlLDQsdGhpcy5sZW5ndGgpLCh0aGlzW2VdfHRoaXNbZSsxXTw8OHx0aGlzW2UrMl08PDE2KSsxNjc3NzIxNip0aGlzW2UrM119LHUucHJvdG90eXBlLnJlYWRVSW50MzJCRT1mdW5jdGlvbiB0KGUscil7cmV0dXJuIHJ8fEwoZSw0LHRoaXMubGVuZ3RoKSwxNjc3NzIxNip0aGlzW2VdKyh0aGlzW2UrMV08PDE2fHRoaXNbZSsyXTw8OHx0aGlzW2UrM10pfSx1LnByb3RvdHlwZS5yZWFkSW50TEU9ZnVuY3Rpb24gdChlLHIsbil7ZXw9MCxyfD0wLG58fEwoZSxyLHRoaXMubGVuZ3RoKTtmb3IodmFyIGk9dGhpc1tlXSxvPTEscz0wOysrczxyJiYobyo9MjU2KTspaSs9dGhpc1tlK3NdKm87cmV0dXJuIGk+PShvKj0xMjgpJiYoaS09TWF0aC5wb3coMiw4KnIpKSxpfSx1LnByb3RvdHlwZS5yZWFkSW50QkU9ZnVuY3Rpb24gdChlLHIsbil7ZXw9MCxyfD0wLG58fEwoZSxyLHRoaXMubGVuZ3RoKTtmb3IodmFyIGk9cixvPTEscz10aGlzW2UrLS1pXTtpPjAmJihvKj0yNTYpOylzKz10aGlzW2UrLS1pXSpvO3JldHVybiBzPj0obyo9MTI4KSYmKHMtPU1hdGgucG93KDIsOCpyKSksc30sdS5wcm90b3R5cGUucmVhZEludDg9ZnVuY3Rpb24gdChlLHIpe3JldHVybiByfHxMKGUsMSx0aGlzLmxlbmd0aCksMTI4JnRoaXNbZV0/LTEqKDI1NS10aGlzW2VdKzEpOnRoaXNbZV19LHUucHJvdG90eXBlLnJlYWRJbnQxNkxFPWZ1bmN0aW9uIHQoZSxyKXtyfHxMKGUsMix0aGlzLmxlbmd0aCk7dmFyIG49dGhpc1tlXXx0aGlzW2UrMV08PDg7cmV0dXJuIDMyNzY4Jm4/NDI5NDkwMTc2MHxuOm59LHUucHJvdG90eXBlLnJlYWRJbnQxNkJFPWZ1bmN0aW9uIHQoZSxyKXtyfHxMKGUsMix0aGlzLmxlbmd0aCk7dmFyIG49dGhpc1tlKzFdfHRoaXNbZV08PDg7cmV0dXJuIDMyNzY4Jm4/NDI5NDkwMTc2MHxuOm59LHUucHJvdG90eXBlLnJlYWRJbnQzMkxFPWZ1bmN0aW9uIHQoZSxyKXtyZXR1cm4gcnx8TChlLDQsdGhpcy5sZW5ndGgpLHRoaXNbZV18dGhpc1tlKzFdPDw4fHRoaXNbZSsyXTw8MTZ8dGhpc1tlKzNdPDwyNH0sdS5wcm90b3R5cGUucmVhZEludDMyQkU9ZnVuY3Rpb24gdChlLHIpe3JldHVybiByfHxMKGUsNCx0aGlzLmxlbmd0aCksdGhpc1tlXTw8MjR8dGhpc1tlKzFdPDwxNnx0aGlzW2UrMl08PDh8dGhpc1tlKzNdfSx1LnByb3RvdHlwZS5yZWFkRmxvYXRMRT1mdW5jdGlvbiB0KGUscil7cmV0dXJuIHJ8fEwoZSw0LHRoaXMubGVuZ3RoKSxpLnJlYWQodGhpcyxlLCEwLDIzLDQpfSx1LnByb3RvdHlwZS5yZWFkRmxvYXRCRT1mdW5jdGlvbiB0KGUscil7cmV0dXJuIHJ8fEwoZSw0LHRoaXMubGVuZ3RoKSxpLnJlYWQodGhpcyxlLCExLDIzLDQpfSx1LnByb3RvdHlwZS5yZWFkRG91YmxlTEU9ZnVuY3Rpb24gdChlLHIpe3JldHVybiByfHxMKGUsOCx0aGlzLmxlbmd0aCksaS5yZWFkKHRoaXMsZSwhMCw1Miw4KX0sdS5wcm90b3R5cGUucmVhZERvdWJsZUJFPWZ1bmN0aW9uIHQoZSxyKXtyZXR1cm4gcnx8TChlLDgsdGhpcy5sZW5ndGgpLGkucmVhZCh0aGlzLGUsITEsNTIsOCl9LHUucHJvdG90eXBlLndyaXRlVUludExFPWZ1bmN0aW9uIHQoZSxyLG4saSl7KGU9K2Uscnw9MCxufD0wLGkpfHxOKHRoaXMsZSxyLG4sTWF0aC5wb3coMiw4Km4pLTEsMCk7dmFyIG89MSxzPTA7Zm9yKHRoaXNbcl09MjU1JmU7KytzPG4mJihvKj0yNTYpOyl0aGlzW3Irc109ZS9vJjI1NTtyZXR1cm4gcitufSx1LnByb3RvdHlwZS53cml0ZVVJbnRCRT1mdW5jdGlvbiB0KGUscixuLGkpeyhlPStlLHJ8PTAsbnw9MCxpKXx8Tih0aGlzLGUscixuLE1hdGgucG93KDIsOCpuKS0xLDApO3ZhciBvPW4tMSxzPTE7Zm9yKHRoaXNbcitvXT0yNTUmZTstLW8+PTAmJihzKj0yNTYpOyl0aGlzW3Irb109ZS9zJjI1NTtyZXR1cm4gcitufSx1LnByb3RvdHlwZS53cml0ZVVJbnQ4PWZ1bmN0aW9uIHQoZSxyLG4pe3JldHVybiBlPStlLHJ8PTAsbnx8Tih0aGlzLGUsciwxLDI1NSwwKSx1LlRZUEVEX0FSUkFZX1NVUFBPUlR8fChlPU1hdGguZmxvb3IoZSkpLHRoaXNbcl09MjU1JmUscisxfSx1LnByb3RvdHlwZS53cml0ZVVJbnQxNkxFPWZ1bmN0aW9uIHQoZSxyLG4pe3JldHVybiBlPStlLHJ8PTAsbnx8Tih0aGlzLGUsciwyLDY1NTM1LDApLHUuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tyXT0yNTUmZSx0aGlzW3IrMV09ZT4+PjgpOlUodGhpcyxlLHIsITApLHIrMn0sdS5wcm90b3R5cGUud3JpdGVVSW50MTZCRT1mdW5jdGlvbiB0KGUscixuKXtyZXR1cm4gZT0rZSxyfD0wLG58fE4odGhpcyxlLHIsMiw2NTUzNSwwKSx1LlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbcl09ZT4+PjgsdGhpc1tyKzFdPTI1NSZlKTpVKHRoaXMsZSxyLCExKSxyKzJ9LHUucHJvdG90eXBlLndyaXRlVUludDMyTEU9ZnVuY3Rpb24gdChlLHIsbil7cmV0dXJuIGU9K2Uscnw9MCxufHxOKHRoaXMsZSxyLDQsNDI5NDk2NzI5NSwwKSx1LlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbciszXT1lPj4+MjQsdGhpc1tyKzJdPWU+Pj4xNix0aGlzW3IrMV09ZT4+PjgsdGhpc1tyXT0yNTUmZSk6Qih0aGlzLGUsciwhMCkscis0fSx1LnByb3RvdHlwZS53cml0ZVVJbnQzMkJFPWZ1bmN0aW9uIHQoZSxyLG4pe3JldHVybiBlPStlLHJ8PTAsbnx8Tih0aGlzLGUsciw0LDQyOTQ5NjcyOTUsMCksdS5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW3JdPWU+Pj4yNCx0aGlzW3IrMV09ZT4+PjE2LHRoaXNbcisyXT1lPj4+OCx0aGlzW3IrM109MjU1JmUpOkIodGhpcyxlLHIsITEpLHIrNH0sdS5wcm90b3R5cGUud3JpdGVJbnRMRT1mdW5jdGlvbiB0KGUscixuLGkpe2lmKGU9K2Uscnw9MCwhaSl7dmFyIG89TWF0aC5wb3coMiw4Km4tMSk7Tih0aGlzLGUscixuLG8tMSwtbyl9dmFyIHM9MCxhPTEsdT0wO2Zvcih0aGlzW3JdPTI1NSZlOysrczxuJiYoYSo9MjU2KTspZTwwJiYwPT09dSYmMCE9PXRoaXNbcitzLTFdJiYodT0xKSx0aGlzW3Irc109KGUvYT4+MCktdSYyNTU7cmV0dXJuIHIrbn0sdS5wcm90b3R5cGUud3JpdGVJbnRCRT1mdW5jdGlvbiB0KGUscixuLGkpe2lmKGU9K2Uscnw9MCwhaSl7dmFyIG89TWF0aC5wb3coMiw4Km4tMSk7Tih0aGlzLGUscixuLG8tMSwtbyl9dmFyIHM9bi0xLGE9MSx1PTA7Zm9yKHRoaXNbcitzXT0yNTUmZTstLXM+PTAmJihhKj0yNTYpOyllPDAmJjA9PT11JiYwIT09dGhpc1tyK3MrMV0mJih1PTEpLHRoaXNbcitzXT0oZS9hPj4wKS11JjI1NTtyZXR1cm4gcitufSx1LnByb3RvdHlwZS53cml0ZUludDg9ZnVuY3Rpb24gdChlLHIsbil7cmV0dXJuIGU9K2Uscnw9MCxufHxOKHRoaXMsZSxyLDEsMTI3LC0xMjgpLHUuVFlQRURfQVJSQVlfU1VQUE9SVHx8KGU9TWF0aC5mbG9vcihlKSksZTwwJiYoZT0yNTUrZSsxKSx0aGlzW3JdPTI1NSZlLHIrMX0sdS5wcm90b3R5cGUud3JpdGVJbnQxNkxFPWZ1bmN0aW9uIHQoZSxyLG4pe3JldHVybiBlPStlLHJ8PTAsbnx8Tih0aGlzLGUsciwyLDMyNzY3LC0zMjc2OCksdS5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW3JdPTI1NSZlLHRoaXNbcisxXT1lPj4+OCk6VSh0aGlzLGUsciwhMCkscisyfSx1LnByb3RvdHlwZS53cml0ZUludDE2QkU9ZnVuY3Rpb24gdChlLHIsbil7cmV0dXJuIGU9K2Uscnw9MCxufHxOKHRoaXMsZSxyLDIsMzI3NjcsLTMyNzY4KSx1LlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbcl09ZT4+PjgsdGhpc1tyKzFdPTI1NSZlKTpVKHRoaXMsZSxyLCExKSxyKzJ9LHUucHJvdG90eXBlLndyaXRlSW50MzJMRT1mdW5jdGlvbiB0KGUscixuKXtyZXR1cm4gZT0rZSxyfD0wLG58fE4odGhpcyxlLHIsNCwyMTQ3NDgzNjQ3LC0yMTQ3NDgzNjQ4KSx1LlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbcl09MjU1JmUsdGhpc1tyKzFdPWU+Pj44LHRoaXNbcisyXT1lPj4+MTYsdGhpc1tyKzNdPWU+Pj4yNCk6Qih0aGlzLGUsciwhMCkscis0fSx1LnByb3RvdHlwZS53cml0ZUludDMyQkU9ZnVuY3Rpb24gdChlLHIsbil7cmV0dXJuIGU9K2Uscnw9MCxufHxOKHRoaXMsZSxyLDQsMjE0NzQ4MzY0NywtMjE0NzQ4MzY0OCksZTwwJiYoZT00Mjk0OTY3Mjk1K2UrMSksdS5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW3JdPWU+Pj4yNCx0aGlzW3IrMV09ZT4+PjE2LHRoaXNbcisyXT1lPj4+OCx0aGlzW3IrM109MjU1JmUpOkIodGhpcyxlLHIsITEpLHIrNH0sdS5wcm90b3R5cGUud3JpdGVGbG9hdExFPWZ1bmN0aW9uIHQoZSxyLG4pe3JldHVybiBqKHRoaXMsZSxyLCEwLG4pfSx1LnByb3RvdHlwZS53cml0ZUZsb2F0QkU9ZnVuY3Rpb24gdChlLHIsbil7cmV0dXJuIGoodGhpcyxlLHIsITEsbil9LHUucHJvdG90eXBlLndyaXRlRG91YmxlTEU9ZnVuY3Rpb24gdChlLHIsbil7cmV0dXJuIE0odGhpcyxlLHIsITAsbil9LHUucHJvdG90eXBlLndyaXRlRG91YmxlQkU9ZnVuY3Rpb24gdChlLHIsbil7cmV0dXJuIE0odGhpcyxlLHIsITEsbil9LHUucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24gdChlLHIsbixpKXtpZihufHwobj0wKSxpfHwwPT09aXx8KGk9dGhpcy5sZW5ndGgpLHI+PWUubGVuZ3RoJiYocj1lLmxlbmd0aCkscnx8KHI9MCksaT4wJiZpPG4mJihpPW4pLGk9PT1uKXJldHVybiAwO2lmKDA9PT1lLmxlbmd0aHx8MD09PXRoaXMubGVuZ3RoKXJldHVybiAwO2lmKHI8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcInRhcmdldFN0YXJ0IG91dCBvZiBib3VuZHNcIik7aWYobjwwfHxuPj10aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcInNvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHNcIik7aWYoaTwwKXRocm93IG5ldyBSYW5nZUVycm9yKFwic291cmNlRW5kIG91dCBvZiBib3VuZHNcIik7aT50aGlzLmxlbmd0aCYmKGk9dGhpcy5sZW5ndGgpLGUubGVuZ3RoLXI8aS1uJiYoaT1lLmxlbmd0aC1yK24pO3ZhciBvLHM9aS1uO2lmKHRoaXM9PT1lJiZuPHImJnI8aSlmb3Iobz1zLTE7bz49MDstLW8pZVtvK3JdPXRoaXNbbytuXTtlbHNlIGlmKHM8MWUzfHwhdS5UWVBFRF9BUlJBWV9TVVBQT1JUKWZvcihvPTA7bzxzOysrbyllW28rcl09dGhpc1tvK25dO2Vsc2UgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwoZSx0aGlzLnN1YmFycmF5KG4sbitzKSxyKTtyZXR1cm4gc30sdS5wcm90b3R5cGUuZmlsbD1mdW5jdGlvbiB0KGUscixuLGkpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXtpZihcInN0cmluZ1wiPT10eXBlb2Ygcj8oaT1yLHI9MCxuPXRoaXMubGVuZ3RoKTpcInN0cmluZ1wiPT10eXBlb2YgbiYmKGk9bixuPXRoaXMubGVuZ3RoKSwxPT09ZS5sZW5ndGgpe3ZhciBvPWUuY2hhckNvZGVBdCgwKTtvPDI1NiYmKGU9byl9aWYodm9pZCAwIT09aSYmXCJzdHJpbmdcIiE9dHlwZW9mIGkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImVuY29kaW5nIG11c3QgYmUgYSBzdHJpbmdcIik7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGkmJiF1LmlzRW5jb2RpbmcoaSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVua25vd24gZW5jb2Rpbmc6IFwiK2kpfWVsc2VcIm51bWJlclwiPT10eXBlb2YgZSYmKGUmPTI1NSk7aWYocjwwfHx0aGlzLmxlbmd0aDxyfHx0aGlzLmxlbmd0aDxuKXRocm93IG5ldyBSYW5nZUVycm9yKFwiT3V0IG9mIHJhbmdlIGluZGV4XCIpO2lmKG48PXIpcmV0dXJuIHRoaXM7dmFyIHM7aWYocj4+Pj0wLG49dm9pZCAwPT09bj90aGlzLmxlbmd0aDpuPj4+MCxlfHwoZT0wKSxcIm51bWJlclwiPT10eXBlb2YgZSlmb3Iocz1yO3M8bjsrK3MpdGhpc1tzXT1lO2Vsc2V7dmFyIGE9dS5pc0J1ZmZlcihlKT9lOksobmV3IHUoZSxpKS50b1N0cmluZygpKSxjPWEubGVuZ3RoO2ZvcihzPTA7czxuLXI7KytzKXRoaXNbcytyXT1hW3MlY119cmV0dXJuIHRoaXN9O3ZhciBIPS9bXitcXC8wLTlBLVphLXotX10vZztmdW5jdGlvbiBWKHQpe3JldHVybiB0PDE2P1wiMFwiK3QudG9TdHJpbmcoMTYpOnQudG9TdHJpbmcoMTYpfWZ1bmN0aW9uIEsodCxlKXt2YXIgcjtlPWV8fDEvMDtmb3IodmFyIG49dC5sZW5ndGgsaT1udWxsLG89W10scz0wO3M8bjsrK3Mpe2lmKChyPXQuY2hhckNvZGVBdChzKSk+NTUyOTUmJnI8NTczNDQpe2lmKCFpKXtpZihyPjU2MzE5KXsoZS09Myk+LTEmJm8ucHVzaCgyMzksMTkxLDE4OSk7Y29udGludWV9aWYocysxPT09bil7KGUtPTMpPi0xJiZvLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfWk9cjtjb250aW51ZX1pZihyPDU2MzIwKXsoZS09Myk+LTEmJm8ucHVzaCgyMzksMTkxLDE4OSksaT1yO2NvbnRpbnVlfXI9NjU1MzYrKGktNTUyOTY8PDEwfHItNTYzMjApfWVsc2UgaSYmKGUtPTMpPi0xJiZvLnB1c2goMjM5LDE5MSwxODkpO2lmKGk9bnVsbCxyPDEyOCl7aWYoKGUtPTEpPDApYnJlYWs7by5wdXNoKHIpfWVsc2UgaWYocjwyMDQ4KXtpZigoZS09Mik8MClicmVhaztvLnB1c2gocj4+NnwxOTIsNjMmcnwxMjgpfWVsc2UgaWYocjw2NTUzNil7aWYoKGUtPTMpPDApYnJlYWs7by5wdXNoKHI+PjEyfDIyNCxyPj42JjYzfDEyOCw2MyZyfDEyOCl9ZWxzZXtpZighKHI8MTExNDExMikpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjb2RlIHBvaW50XCIpO2lmKChlLT00KTwwKWJyZWFrO28ucHVzaChyPj4xOHwyNDAscj4+MTImNjN8MTI4LHI+PjYmNjN8MTI4LDYzJnJ8MTI4KX19cmV0dXJuIG99ZnVuY3Rpb24gcSh0KXtyZXR1cm4gbi50b0J5dGVBcnJheShmdW5jdGlvbiBlKHQpe2lmKCh0PWZ1bmN0aW9uIGUodCl7cmV0dXJuIHQudHJpbT90LnRyaW0oKTp0LnJlcGxhY2UoL15cXHMrfFxccyskL2csXCJcIil9KHQpLnJlcGxhY2UoSCxcIlwiKSkubGVuZ3RoPDIpcmV0dXJuXCJcIjtmb3IoO3QubGVuZ3RoJTQhPTA7KXQrPVwiPVwiO3JldHVybiB0fSh0KSl9ZnVuY3Rpb24gSih0LGUscixuKXtmb3IodmFyIGk9MDtpPG4mJiEoaStyPj1lLmxlbmd0aHx8aT49dC5sZW5ndGgpOysraSllW2krcl09dFtpXTtyZXR1cm4gaX19KS5jYWxsKHRoaXMscigyOSkpfSxmdW5jdGlvbih0LGUpe3ZhciByO3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKTt0cnl7cj1yfHxuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpfWNhdGNoKHQpe1wib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cmJihyPXdpbmRvdyl9dC5leHBvcnRzPXJ9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtlLmJ5dGVMZW5ndGg9ZnVuY3Rpb24gbih0KXt2YXIgZT1mKHQpLHI9ZVswXSxuPWVbMV07cmV0dXJuIDMqKHIrbikvNC1ufSxlLnRvQnl0ZUFycmF5PWZ1bmN0aW9uIGkodCl7dmFyIGUscixuPWYodCksaT1uWzBdLG89blsxXSxzPW5ldyB1KGZ1bmN0aW9uIGModCxlLHIpe3JldHVybiAzKihlK3IpLzQtcn0oMCxpLG8pKSxoPTAsbD1vPjA/aS00Omk7Zm9yKHI9MDtyPGw7cis9NCllPWFbdC5jaGFyQ29kZUF0KHIpXTw8MTh8YVt0LmNoYXJDb2RlQXQocisxKV08PDEyfGFbdC5jaGFyQ29kZUF0KHIrMildPDw2fGFbdC5jaGFyQ29kZUF0KHIrMyldLHNbaCsrXT1lPj4xNiYyNTUsc1toKytdPWU+PjgmMjU1LHNbaCsrXT0yNTUmZTsyPT09byYmKGU9YVt0LmNoYXJDb2RlQXQocildPDwyfGFbdC5jaGFyQ29kZUF0KHIrMSldPj40LHNbaCsrXT0yNTUmZSk7MT09PW8mJihlPWFbdC5jaGFyQ29kZUF0KHIpXTw8MTB8YVt0LmNoYXJDb2RlQXQocisxKV08PDR8YVt0LmNoYXJDb2RlQXQocisyKV0+PjIsc1toKytdPWU+PjgmMjU1LHNbaCsrXT0yNTUmZSk7cmV0dXJuIHN9LGUuZnJvbUJ5dGVBcnJheT1mdW5jdGlvbiBvKHQpe2Zvcih2YXIgZSxyPXQubGVuZ3RoLG49ciUzLGk9W10sbz0xNjM4MyxhPTAsdT1yLW47YTx1O2ErPW8paS5wdXNoKGcodCxhLGErbz51P3U6YStvKSk7MT09PW4/KGU9dFtyLTFdLGkucHVzaChzW2U+PjJdK3NbZTw8NCY2M10rXCI9PVwiKSk6Mj09PW4mJihlPSh0W3ItMl08PDgpK3Rbci0xXSxpLnB1c2goc1tlPj4xMF0rc1tlPj40JjYzXStzW2U8PDImNjNdK1wiPVwiKSk7cmV0dXJuIGkuam9pbihcIlwiKX07Zm9yKHZhciBzPVtdLGE9W10sdT1cInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDhBcnJheT9VaW50OEFycmF5OkFycmF5LGM9XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCIsaD0wLGw9Yy5sZW5ndGg7aDxsOysraClzW2hdPWNbaF0sYVtjLmNoYXJDb2RlQXQoaCldPWg7ZnVuY3Rpb24gZih0KXt2YXIgZT10Lmxlbmd0aDtpZihlJTQ+MCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0XCIpO3ZhciByPXQuaW5kZXhPZihcIj1cIik7cmV0dXJuLTE9PT1yJiYocj1lKSxbcixyPT09ZT8wOjQtciU0XX1mdW5jdGlvbiBnKHQsZSxyKXtmb3IodmFyIG4saSxvPVtdLGE9ZTthPHI7YSs9MyluPSh0W2FdPDwxNiYxNjcxMTY4MCkrKHRbYSsxXTw8OCY2NTI4MCkrKDI1NSZ0W2ErMl0pLG8ucHVzaChzWyhpPW4pPj4xOCY2M10rc1tpPj4xMiY2M10rc1tpPj42JjYzXStzWzYzJmldKTtyZXR1cm4gby5qb2luKFwiXCIpfWFbXCItXCIuY2hhckNvZGVBdCgwKV09NjIsYVtcIl9cIi5jaGFyQ29kZUF0KDApXT02M30sZnVuY3Rpb24odCxlKXtcbi8qISBpZWVlNzU0LiBCU0QtMy1DbGF1c2UgTGljZW5zZS4gRmVyb3NzIEFib3VraGFkaWplaCA8aHR0cHM6Ly9mZXJvc3Mub3JnL29wZW5zb3VyY2U+ICovXG5lLnJlYWQ9ZnVuY3Rpb24odCxlLHIsbixpKXt2YXIgbyxzLGE9OCppLW4tMSx1PSgxPDxhKS0xLGM9dT4+MSxoPS03LGw9cj9pLTE6MCxmPXI/LTE6MSxnPXRbZStsXTtmb3IobCs9ZixvPWcmKDE8PC1oKS0xLGc+Pj0taCxoKz1hO2g+MDtvPTI1NipvK3RbZStsXSxsKz1mLGgtPTgpO2ZvcihzPW8mKDE8PC1oKS0xLG8+Pj0taCxoKz1uO2g+MDtzPTI1NipzK3RbZStsXSxsKz1mLGgtPTgpO2lmKDA9PT1vKW89MS1jO2Vsc2V7aWYobz09PXUpcmV0dXJuIHM/TmFOOjEvMCooZz8tMToxKTtzKz1NYXRoLnBvdygyLG4pLG8tPWN9cmV0dXJuKGc/LTE6MSkqcypNYXRoLnBvdygyLG8tbil9LGUud3JpdGU9ZnVuY3Rpb24odCxlLHIsbixpLG8pe3ZhciBzLGEsdSxjPTgqby1pLTEsaD0oMTw8YyktMSxsPWg+PjEsZj0yMz09PWk/TWF0aC5wb3coMiwtMjQpLU1hdGgucG93KDIsLTc3KTowLGc9bj8wOm8tMSxkPW4/MTotMSxwPWU8MHx8MD09PWUmJjEvZTwwPzE6MDtmb3IoZT1NYXRoLmFicyhlKSxpc05hTihlKXx8ZT09PTEvMD8oYT1pc05hTihlKT8xOjAscz1oKToocz1NYXRoLmZsb29yKE1hdGgubG9nKGUpL01hdGguTE4yKSxlKih1PU1hdGgucG93KDIsLXMpKTwxJiYocy0tLHUqPTIpLChlKz1zK2w+PTE/Zi91OmYqTWF0aC5wb3coMiwxLWwpKSp1Pj0yJiYocysrLHUvPTIpLHMrbD49aD8oYT0wLHM9aCk6cytsPj0xPyhhPShlKnUtMSkqTWF0aC5wb3coMixpKSxzKz1sKTooYT1lKk1hdGgucG93KDIsbC0xKSpNYXRoLnBvdygyLGkpLHM9MCkpO2k+PTg7dFtyK2ddPTI1NSZhLGcrPWQsYS89MjU2LGktPTgpO2ZvcihzPXM8PGl8YSxjKz1pO2M+MDt0W3IrZ109MjU1JnMsZys9ZCxzLz0yNTYsYy09OCk7dFtyK2ctZF18PTEyOCpwfX0sZnVuY3Rpb24odCxlKXt2YXIgcj17fS50b1N0cmluZzt0LmV4cG9ydHM9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24odCl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT1yLmNhbGwodCl9fSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5kZWZhdWx0PWZ1bmN0aW9uIG4odCl7dmFyIGU9dC5qd3Mscj10LktleVV0aWwsbj10Llg1MDksbz10LmNyeXB0byxzPXQuaGV4dG9iNjR1LGE9dC5iNjR0b2hleCx1PXQuQWxsb3dlZFNpZ25pbmdBbGdzO3JldHVybiBmdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXshZnVuY3Rpb24gZSh0LHIpe2lmKCEodCBpbnN0YW5jZW9mIHIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9KHRoaXMsdCl9cmV0dXJuIHQucGFyc2VKd3Q9ZnVuY3Rpb24gdChyKXtpLkxvZy5kZWJ1ZyhcIkpvc2VVdGlsLnBhcnNlSnd0XCIpO3RyeXt2YXIgbj1lLkpXUy5wYXJzZShyKTtyZXR1cm57aGVhZGVyOm4uaGVhZGVyT2JqLHBheWxvYWQ6bi5wYXlsb2FkT2JqfX1jYXRjaCh0KXtpLkxvZy5lcnJvcih0KX19LHQudmFsaWRhdGVKd3Q9ZnVuY3Rpb24gZShvLHMsdSxjLGgsbCxmKXtpLkxvZy5kZWJ1ZyhcIkpvc2VVdGlsLnZhbGlkYXRlSnd0XCIpO3RyeXtpZihcIlJTQVwiPT09cy5rdHkpaWYocy5lJiZzLm4pcz1yLmdldEtleShzKTtlbHNle2lmKCFzLng1Y3x8IXMueDVjLmxlbmd0aClyZXR1cm4gaS5Mb2cuZXJyb3IoXCJKb3NlVXRpbC52YWxpZGF0ZUp3dDogUlNBIGtleSBtaXNzaW5nIGtleSBtYXRlcmlhbFwiLHMpLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIlJTQSBrZXkgbWlzc2luZyBrZXkgbWF0ZXJpYWxcIikpO3ZhciBnPWEocy54NWNbMF0pO3M9bi5nZXRQdWJsaWNLZXlGcm9tQ2VydEhleChnKX1lbHNle2lmKFwiRUNcIiE9PXMua3R5KXJldHVybiBpLkxvZy5lcnJvcihcIkpvc2VVdGlsLnZhbGlkYXRlSnd0OiBVbnN1cHBvcnRlZCBrZXkgdHlwZVwiLHMmJnMua3R5KSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3Iocy5rdHkpKTtpZighKHMuY3J2JiZzLngmJnMueSkpcmV0dXJuIGkuTG9nLmVycm9yKFwiSm9zZVV0aWwudmFsaWRhdGVKd3Q6IEVDIGtleSBtaXNzaW5nIGtleSBtYXRlcmlhbFwiLHMpLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIkVDIGtleSBtaXNzaW5nIGtleSBtYXRlcmlhbFwiKSk7cz1yLmdldEtleShzKX1yZXR1cm4gdC5fdmFsaWRhdGVKd3QobyxzLHUsYyxoLGwsZil9Y2F0Y2godCl7cmV0dXJuIGkuTG9nLmVycm9yKHQmJnQubWVzc2FnZXx8dCksUHJvbWlzZS5yZWplY3QoXCJKV1QgdmFsaWRhdGlvbiBmYWlsZWRcIil9fSx0LnZhbGlkYXRlSnd0QXR0cmlidXRlcz1mdW5jdGlvbiBlKHIsbixvLHMsYSx1KXtzfHwocz0wKSxhfHwoYT1wYXJzZUludChEYXRlLm5vdygpLzFlMykpO3ZhciBjPXQucGFyc2VKd3QocikucGF5bG9hZDtpZighYy5pc3MpcmV0dXJuIGkuTG9nLmVycm9yKFwiSm9zZVV0aWwuX3ZhbGlkYXRlSnd0OiBpc3N1ZXIgd2FzIG5vdCBwcm92aWRlZFwiKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJpc3N1ZXIgd2FzIG5vdCBwcm92aWRlZFwiKSk7aWYoYy5pc3MhPT1uKXJldHVybiBpLkxvZy5lcnJvcihcIkpvc2VVdGlsLl92YWxpZGF0ZUp3dDogSW52YWxpZCBpc3N1ZXIgaW4gdG9rZW5cIixjLmlzcyksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiSW52YWxpZCBpc3N1ZXIgaW4gdG9rZW46IFwiK2MuaXNzKSk7aWYoIWMuYXVkKXJldHVybiBpLkxvZy5lcnJvcihcIkpvc2VVdGlsLl92YWxpZGF0ZUp3dDogYXVkIHdhcyBub3QgcHJvdmlkZWRcIiksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiYXVkIHdhcyBub3QgcHJvdmlkZWRcIikpO2lmKCEoYy5hdWQ9PT1vfHxBcnJheS5pc0FycmF5KGMuYXVkKSYmYy5hdWQuaW5kZXhPZihvKT49MCkpcmV0dXJuIGkuTG9nLmVycm9yKFwiSm9zZVV0aWwuX3ZhbGlkYXRlSnd0OiBJbnZhbGlkIGF1ZGllbmNlIGluIHRva2VuXCIsYy5hdWQpLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIkludmFsaWQgYXVkaWVuY2UgaW4gdG9rZW46IFwiK2MuYXVkKSk7aWYoYy5henAmJmMuYXpwIT09bylyZXR1cm4gaS5Mb2cuZXJyb3IoXCJKb3NlVXRpbC5fdmFsaWRhdGVKd3Q6IEludmFsaWQgYXpwIGluIHRva2VuXCIsYy5henApLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIkludmFsaWQgYXpwIGluIHRva2VuOiBcIitjLmF6cCkpO2lmKCF1KXt2YXIgaD1hK3MsbD1hLXM7aWYoIWMuaWF0KXJldHVybiBpLkxvZy5lcnJvcihcIkpvc2VVdGlsLl92YWxpZGF0ZUp3dDogaWF0IHdhcyBub3QgcHJvdmlkZWRcIiksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiaWF0IHdhcyBub3QgcHJvdmlkZWRcIikpO2lmKGg8Yy5pYXQpcmV0dXJuIGkuTG9nLmVycm9yKFwiSm9zZVV0aWwuX3ZhbGlkYXRlSnd0OiBpYXQgaXMgaW4gdGhlIGZ1dHVyZVwiLGMuaWF0KSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJpYXQgaXMgaW4gdGhlIGZ1dHVyZTogXCIrYy5pYXQpKTtpZihjLm5iZiYmaDxjLm5iZilyZXR1cm4gaS5Mb2cuZXJyb3IoXCJKb3NlVXRpbC5fdmFsaWRhdGVKd3Q6IG5iZiBpcyBpbiB0aGUgZnV0dXJlXCIsYy5uYmYpLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIm5iZiBpcyBpbiB0aGUgZnV0dXJlOiBcIitjLm5iZikpO2lmKCFjLmV4cClyZXR1cm4gaS5Mb2cuZXJyb3IoXCJKb3NlVXRpbC5fdmFsaWRhdGVKd3Q6IGV4cCB3YXMgbm90IHByb3ZpZGVkXCIpLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcImV4cCB3YXMgbm90IHByb3ZpZGVkXCIpKTtpZihjLmV4cDxsKXJldHVybiBpLkxvZy5lcnJvcihcIkpvc2VVdGlsLl92YWxpZGF0ZUp3dDogZXhwIGlzIGluIHRoZSBwYXN0XCIsYy5leHApLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcImV4cCBpcyBpbiB0aGUgcGFzdDpcIitjLmV4cCkpfXJldHVybiBQcm9taXNlLnJlc29sdmUoYyl9LHQuX3ZhbGlkYXRlSnd0PWZ1bmN0aW9uIHIobixvLHMsYSxjLGgsbCl7cmV0dXJuIHQudmFsaWRhdGVKd3RBdHRyaWJ1dGVzKG4scyxhLGMsaCxsKS50aGVuKChmdW5jdGlvbih0KXt0cnl7cmV0dXJuIGUuSldTLnZlcmlmeShuLG8sdSk/dDooaS5Mb2cuZXJyb3IoXCJKb3NlVXRpbC5fdmFsaWRhdGVKd3Q6IHNpZ25hdHVyZSB2YWxpZGF0aW9uIGZhaWxlZFwiKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJzaWduYXR1cmUgdmFsaWRhdGlvbiBmYWlsZWRcIikpKX1jYXRjaCh0KXtyZXR1cm4gaS5Mb2cuZXJyb3IodCYmdC5tZXNzYWdlfHx0KSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJzaWduYXR1cmUgdmFsaWRhdGlvbiBmYWlsZWRcIikpfX0pKX0sdC5oYXNoU3RyaW5nPWZ1bmN0aW9uIHQoZSxyKXt0cnl7cmV0dXJuIG8uVXRpbC5oYXNoU3RyaW5nKGUscil9Y2F0Y2godCl7aS5Mb2cuZXJyb3IodCl9fSx0LmhleFRvQmFzZTY0VXJsPWZ1bmN0aW9uIHQoZSl7dHJ5e3JldHVybiBzKGUpfWNhdGNoKHQpe2kuTG9nLmVycm9yKHQpfX0sdH0oKX07dmFyIGk9cigwKTt0LmV4cG9ydHM9ZS5kZWZhdWx0fSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5TaWduaW5SZXNwb25zZT12b2lkIDA7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBuPWVbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSxyLG4pe3JldHVybiByJiZ0KGUucHJvdG90eXBlLHIpLG4mJnQoZSxuKSxlfX0oKSxpPXIoMyk7ZnVuY3Rpb24gbyh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZS5TaWduaW5SZXNwb25zZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOlwiI1wiO28odGhpcyx0KTt2YXIgbj1pLlVybFV0aWxpdHkucGFyc2VVcmxGcmFnbWVudChlLHIpO3RoaXMuZXJyb3I9bi5lcnJvcix0aGlzLmVycm9yX2Rlc2NyaXB0aW9uPW4uZXJyb3JfZGVzY3JpcHRpb24sdGhpcy5lcnJvcl91cmk9bi5lcnJvcl91cmksdGhpcy5jb2RlPW4uY29kZSx0aGlzLnN0YXRlPW4uc3RhdGUsdGhpcy5pZF90b2tlbj1uLmlkX3Rva2VuLHRoaXMuc2Vzc2lvbl9zdGF0ZT1uLnNlc3Npb25fc3RhdGUsdGhpcy5hY2Nlc3NfdG9rZW49bi5hY2Nlc3NfdG9rZW4sdGhpcy50b2tlbl90eXBlPW4udG9rZW5fdHlwZSx0aGlzLnNjb3BlPW4uc2NvcGUsdGhpcy5wcm9maWxlPXZvaWQgMCx0aGlzLmV4cGlyZXNfaW49bi5leHBpcmVzX2lufXJldHVybiBuKHQsW3trZXk6XCJleHBpcmVzX2luXCIsZ2V0OmZ1bmN0aW9uIHQoKXtpZih0aGlzLmV4cGlyZXNfYXQpe3ZhciBlPXBhcnNlSW50KERhdGUubm93KCkvMWUzKTtyZXR1cm4gdGhpcy5leHBpcmVzX2F0LWV9fSxzZXQ6ZnVuY3Rpb24gdChlKXt2YXIgcj1wYXJzZUludChlKTtpZihcIm51bWJlclwiPT10eXBlb2YgciYmcj4wKXt2YXIgbj1wYXJzZUludChEYXRlLm5vdygpLzFlMyk7dGhpcy5leHBpcmVzX2F0PW4rcn19fSx7a2V5OlwiZXhwaXJlZFwiLGdldDpmdW5jdGlvbiB0KCl7dmFyIGU9dGhpcy5leHBpcmVzX2luO2lmKHZvaWQgMCE9PWUpcmV0dXJuIGU8PTB9fSx7a2V5Olwic2NvcGVzXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4odGhpcy5zY29wZXx8XCJcIikuc3BsaXQoXCIgXCIpfX0se2tleTpcImlzT3BlbklkQ29ubmVjdFwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuc2NvcGVzLmluZGV4T2YoXCJvcGVuaWRcIik+PTB8fCEhdGhpcy5pZF90b2tlbn19XSksdH0oKX0sZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuU2lnbm91dFJlcXVlc3Q9dm9pZCAwO3ZhciBuPXIoMCksaT1yKDMpLG89cig5KTtlLlNpZ25vdXRSZXF1ZXN0PWZ1bmN0aW9uIHQoZSl7dmFyIHI9ZS51cmwscz1lLmlkX3Rva2VuX2hpbnQsYT1lLnBvc3RfbG9nb3V0X3JlZGlyZWN0X3VyaSx1PWUuZGF0YSxjPWUuZXh0cmFRdWVyeVBhcmFtcyxoPWUucmVxdWVzdF90eXBlO2lmKGZ1bmN0aW9uIGwodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLHQpLCFyKXRocm93IG4uTG9nLmVycm9yKFwiU2lnbm91dFJlcXVlc3QuY3RvcjogTm8gdXJsIHBhc3NlZFwiKSxuZXcgRXJyb3IoXCJ1cmxcIik7Zm9yKHZhciBmIGluIHMmJihyPWkuVXJsVXRpbGl0eS5hZGRRdWVyeVBhcmFtKHIsXCJpZF90b2tlbl9oaW50XCIscykpLGEmJihyPWkuVXJsVXRpbGl0eS5hZGRRdWVyeVBhcmFtKHIsXCJwb3N0X2xvZ291dF9yZWRpcmVjdF91cmlcIixhKSx1JiYodGhpcy5zdGF0ZT1uZXcgby5TdGF0ZSh7ZGF0YTp1LHJlcXVlc3RfdHlwZTpofSkscj1pLlVybFV0aWxpdHkuYWRkUXVlcnlQYXJhbShyLFwic3RhdGVcIix0aGlzLnN0YXRlLmlkKSkpLGMpcj1pLlVybFV0aWxpdHkuYWRkUXVlcnlQYXJhbShyLGYsY1tmXSk7dGhpcy51cmw9cn19LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLlNpZ25vdXRSZXNwb25zZT12b2lkIDA7dmFyIG49cigzKTtlLlNpZ25vdXRSZXNwb25zZT1mdW5jdGlvbiB0KGUpeyFmdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX0odGhpcyx0KTt2YXIgaT1uLlVybFV0aWxpdHkucGFyc2VVcmxGcmFnbWVudChlLFwiP1wiKTt0aGlzLmVycm9yPWkuZXJyb3IsdGhpcy5lcnJvcl9kZXNjcmlwdGlvbj1pLmVycm9yX2Rlc2NyaXB0aW9uLHRoaXMuZXJyb3JfdXJpPWkuZXJyb3JfdXJpLHRoaXMuc3RhdGU9aS5zdGF0ZX19LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLkluTWVtb3J5V2ViU3RvcmFnZT12b2lkIDA7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBuPWVbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSxyLG4pe3JldHVybiByJiZ0KGUucHJvdG90eXBlLHIpLG4mJnQoZSxuKSxlfX0oKSxpPXIoMCk7ZS5Jbk1lbW9yeVdlYlN0b3JhZ2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7IWZ1bmN0aW9uIGUodCxyKXtpZighKHQgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLHQpLHRoaXMuX2RhdGE9e319cmV0dXJuIHQucHJvdG90eXBlLmdldEl0ZW09ZnVuY3Rpb24gdChlKXtyZXR1cm4gaS5Mb2cuZGVidWcoXCJJbk1lbW9yeVdlYlN0b3JhZ2UuZ2V0SXRlbVwiLGUpLHRoaXMuX2RhdGFbZV19LHQucHJvdG90eXBlLnNldEl0ZW09ZnVuY3Rpb24gdChlLHIpe2kuTG9nLmRlYnVnKFwiSW5NZW1vcnlXZWJTdG9yYWdlLnNldEl0ZW1cIixlKSx0aGlzLl9kYXRhW2VdPXJ9LHQucHJvdG90eXBlLnJlbW92ZUl0ZW09ZnVuY3Rpb24gdChlKXtpLkxvZy5kZWJ1ZyhcIkluTWVtb3J5V2ViU3RvcmFnZS5yZW1vdmVJdGVtXCIsZSksZGVsZXRlIHRoaXMuX2RhdGFbZV19LHQucHJvdG90eXBlLmtleT1mdW5jdGlvbiB0KGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzLl9kYXRhKVtlXX0sbih0LFt7a2V5OlwibGVuZ3RoXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcy5fZGF0YSkubGVuZ3RofX1dKSx0fSgpfSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5Vc2VyTWFuYWdlcj12b2lkIDA7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBuPWVbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSxyLG4pe3JldHVybiByJiZ0KGUucHJvdG90eXBlLHIpLG4mJnQoZSxuKSxlfX0oKSxpPXIoMCksbz1yKDEwKSxzPXIoMzkpLGE9cigxNSksdT1yKDQ1KSxjPXIoNDcpLGg9cigxOCksbD1yKDgpLGY9cigyMCksZz1yKDExKSxkPXIoNCk7ZnVuY3Rpb24gcCh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gdih0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWUuVXNlck1hbmFnZXI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpjLlNpbGVudFJlbmV3U2VydmljZSxvPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTpoLlNlc3Npb25Nb25pdG9yLGE9YXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10/YXJndW1lbnRzWzNdOmYuVG9rZW5SZXZvY2F0aW9uQ2xpZW50LGw9YXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0/YXJndW1lbnRzWzRdOmcuVG9rZW5DbGllbnQseT1hcmd1bWVudHMubGVuZ3RoPjUmJnZvaWQgMCE9PWFyZ3VtZW50c1s1XT9hcmd1bWVudHNbNV06ZC5Kb3NlVXRpbDtwKHRoaXMsZSksciBpbnN0YW5jZW9mIHMuVXNlck1hbmFnZXJTZXR0aW5nc3x8KHI9bmV3IHMuVXNlck1hbmFnZXJTZXR0aW5ncyhyKSk7dmFyIG09dih0aGlzLHQuY2FsbCh0aGlzLHIpKTtyZXR1cm4gbS5fZXZlbnRzPW5ldyB1LlVzZXJNYW5hZ2VyRXZlbnRzKHIpLG0uX3NpbGVudFJlbmV3U2VydmljZT1uZXcgbihtKSxtLnNldHRpbmdzLmF1dG9tYXRpY1NpbGVudFJlbmV3JiYoaS5Mb2cuZGVidWcoXCJVc2VyTWFuYWdlci5jdG9yOiBhdXRvbWF0aWNTaWxlbnRSZW5ldyBpcyBjb25maWd1cmVkLCBzZXR0aW5nIHVwIHNpbGVudCByZW5ld1wiKSxtLnN0YXJ0U2lsZW50UmVuZXcoKSksbS5zZXR0aW5ncy5tb25pdG9yU2Vzc2lvbiYmKGkuTG9nLmRlYnVnKFwiVXNlck1hbmFnZXIuY3RvcjogbW9uaXRvclNlc3Npb24gaXMgY29uZmlndXJlZCwgc2V0dGluZyB1cCBzZXNzaW9uIG1vbml0b3JcIiksbS5fc2Vzc2lvbk1vbml0b3I9bmV3IG8obSkpLG0uX3Rva2VuUmV2b2NhdGlvbkNsaWVudD1uZXcgYShtLl9zZXR0aW5ncyksbS5fdG9rZW5DbGllbnQ9bmV3IGwobS5fc2V0dGluZ3MpLG0uX2pvc2VVdGlsPXksbX1yZXR1cm4gZnVuY3Rpb24gcih0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfShlLHQpLGUucHJvdG90eXBlLmdldFVzZXI9ZnVuY3Rpb24gdCgpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX2xvYWRVc2VyKCkudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIHQ/KGkuTG9nLmluZm8oXCJVc2VyTWFuYWdlci5nZXRVc2VyOiB1c2VyIGxvYWRlZFwiKSxlLl9ldmVudHMubG9hZCh0LCExKSx0KTooaS5Mb2cuaW5mbyhcIlVzZXJNYW5hZ2VyLmdldFVzZXI6IHVzZXIgbm90IGZvdW5kIGluIHN0b3JhZ2VcIiksbnVsbCl9KSl9LGUucHJvdG90eXBlLnJlbW92ZVVzZXI9ZnVuY3Rpb24gdCgpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuc3RvcmVVc2VyKG51bGwpLnRoZW4oKGZ1bmN0aW9uKCl7aS5Mb2cuaW5mbyhcIlVzZXJNYW5hZ2VyLnJlbW92ZVVzZXI6IHVzZXIgcmVtb3ZlZCBmcm9tIHN0b3JhZ2VcIiksZS5fZXZlbnRzLnVubG9hZCgpfSkpfSxlLnByb3RvdHlwZS5zaWduaW5SZWRpcmVjdD1mdW5jdGlvbiB0KCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9OyhlPU9iamVjdC5hc3NpZ24oe30sZSkpLnJlcXVlc3RfdHlwZT1cInNpOnJcIjt2YXIgcj17dXNlUmVwbGFjZVRvTmF2aWdhdGU6ZS51c2VSZXBsYWNlVG9OYXZpZ2F0ZX07cmV0dXJuIHRoaXMuX3NpZ25pblN0YXJ0KGUsdGhpcy5fcmVkaXJlY3ROYXZpZ2F0b3IscikudGhlbigoZnVuY3Rpb24oKXtpLkxvZy5pbmZvKFwiVXNlck1hbmFnZXIuc2lnbmluUmVkaXJlY3Q6IHN1Y2Nlc3NmdWxcIil9KSl9LGUucHJvdG90eXBlLnNpZ25pblJlZGlyZWN0Q2FsbGJhY2s9ZnVuY3Rpb24gdChlKXtyZXR1cm4gdGhpcy5fc2lnbmluRW5kKGV8fHRoaXMuX3JlZGlyZWN0TmF2aWdhdG9yLnVybCkudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIHQucHJvZmlsZSYmdC5wcm9maWxlLnN1Yj9pLkxvZy5pbmZvKFwiVXNlck1hbmFnZXIuc2lnbmluUmVkaXJlY3RDYWxsYmFjazogc3VjY2Vzc2Z1bCwgc2lnbmVkIGluIHN1YjogXCIsdC5wcm9maWxlLnN1Yik6aS5Mb2cuaW5mbyhcIlVzZXJNYW5hZ2VyLnNpZ25pblJlZGlyZWN0Q2FsbGJhY2s6IG5vIHN1YlwiKSx0fSkpfSxlLnByb3RvdHlwZS5zaWduaW5Qb3B1cD1mdW5jdGlvbiB0KCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9OyhlPU9iamVjdC5hc3NpZ24oe30sZSkpLnJlcXVlc3RfdHlwZT1cInNpOnBcIjt2YXIgcj1lLnJlZGlyZWN0X3VyaXx8dGhpcy5zZXR0aW5ncy5wb3B1cF9yZWRpcmVjdF91cml8fHRoaXMuc2V0dGluZ3MucmVkaXJlY3RfdXJpO3JldHVybiByPyhlLnJlZGlyZWN0X3VyaT1yLGUuZGlzcGxheT1cInBvcHVwXCIsdGhpcy5fc2lnbmluKGUsdGhpcy5fcG9wdXBOYXZpZ2F0b3Ise3N0YXJ0VXJsOnIscG9wdXBXaW5kb3dGZWF0dXJlczplLnBvcHVwV2luZG93RmVhdHVyZXN8fHRoaXMuc2V0dGluZ3MucG9wdXBXaW5kb3dGZWF0dXJlcyxwb3B1cFdpbmRvd1RhcmdldDplLnBvcHVwV2luZG93VGFyZ2V0fHx0aGlzLnNldHRpbmdzLnBvcHVwV2luZG93VGFyZ2V0fSkudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIHQmJih0LnByb2ZpbGUmJnQucHJvZmlsZS5zdWI/aS5Mb2cuaW5mbyhcIlVzZXJNYW5hZ2VyLnNpZ25pblBvcHVwOiBzaWduaW5Qb3B1cCBzdWNjZXNzZnVsLCBzaWduZWQgaW4gc3ViOiBcIix0LnByb2ZpbGUuc3ViKTppLkxvZy5pbmZvKFwiVXNlck1hbmFnZXIuc2lnbmluUG9wdXA6IG5vIHN1YlwiKSksdH0pKSk6KGkuTG9nLmVycm9yKFwiVXNlck1hbmFnZXIuc2lnbmluUG9wdXA6IE5vIHBvcHVwX3JlZGlyZWN0X3VyaSBvciByZWRpcmVjdF91cmkgY29uZmlndXJlZFwiKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJObyBwb3B1cF9yZWRpcmVjdF91cmkgb3IgcmVkaXJlY3RfdXJpIGNvbmZpZ3VyZWRcIikpKX0sZS5wcm90b3R5cGUuc2lnbmluUG9wdXBDYWxsYmFjaz1mdW5jdGlvbiB0KGUpe3JldHVybiB0aGlzLl9zaWduaW5DYWxsYmFjayhlLHRoaXMuX3BvcHVwTmF2aWdhdG9yKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gdCYmKHQucHJvZmlsZSYmdC5wcm9maWxlLnN1Yj9pLkxvZy5pbmZvKFwiVXNlck1hbmFnZXIuc2lnbmluUG9wdXBDYWxsYmFjazogc3VjY2Vzc2Z1bCwgc2lnbmVkIGluIHN1YjogXCIsdC5wcm9maWxlLnN1Yik6aS5Mb2cuaW5mbyhcIlVzZXJNYW5hZ2VyLnNpZ25pblBvcHVwQ2FsbGJhY2s6IG5vIHN1YlwiKSksdH0pKS5jYXRjaCgoZnVuY3Rpb24odCl7aS5Mb2cuZXJyb3IodC5tZXNzYWdlKX0pKX0sZS5wcm90b3R5cGUuc2lnbmluU2lsZW50PWZ1bmN0aW9uIHQoKXt2YXIgZT10aGlzLHI9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3JldHVybiByPU9iamVjdC5hc3NpZ24oe30sciksdGhpcy5fbG9hZFVzZXIoKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5yZWZyZXNoX3Rva2VuPyhyLnJlZnJlc2hfdG9rZW49dC5yZWZyZXNoX3Rva2VuLGUuX3VzZVJlZnJlc2hUb2tlbihyKSk6KHIucmVxdWVzdF90eXBlPVwic2k6c1wiLHIuaWRfdG9rZW5faGludD1yLmlkX3Rva2VuX2hpbnR8fGUuc2V0dGluZ3MuaW5jbHVkZUlkVG9rZW5JblNpbGVudFJlbmV3JiZ0JiZ0LmlkX3Rva2VuLHQmJmUuX3NldHRpbmdzLnZhbGlkYXRlU3ViT25TaWxlbnRSZW5ldyYmKGkuTG9nLmRlYnVnKFwiVXNlck1hbmFnZXIuc2lnbmluU2lsZW50LCBzdWJqZWN0IHByaW9yIHRvIHNpbGVudCByZW5ldzogXCIsdC5wcm9maWxlLnN1Yiksci5jdXJyZW50X3N1Yj10LnByb2ZpbGUuc3ViKSxlLl9zaWduaW5TaWxlbnRJZnJhbWUocikpfSkpfSxlLnByb3RvdHlwZS5fdXNlUmVmcmVzaFRva2VuPWZ1bmN0aW9uIHQoKXt2YXIgZT10aGlzLHI9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3JldHVybiB0aGlzLl90b2tlbkNsaWVudC5leGNoYW5nZVJlZnJlc2hUb2tlbihyKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gdD90LmFjY2Vzc190b2tlbj9lLl9sb2FkVXNlcigpLnRoZW4oKGZ1bmN0aW9uKHIpe2lmKHIpe3ZhciBuPVByb21pc2UucmVzb2x2ZSgpO3JldHVybiB0LmlkX3Rva2VuJiYobj1lLl92YWxpZGF0ZUlkVG9rZW5Gcm9tVG9rZW5SZWZyZXNoVG9rZW4oci5wcm9maWxlLHQuaWRfdG9rZW4pKSxuLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIGkuTG9nLmRlYnVnKFwiVXNlck1hbmFnZXIuX3VzZVJlZnJlc2hUb2tlbjogcmVmcmVzaCB0b2tlbiByZXNwb25zZSBzdWNjZXNzXCIpLHIuaWRfdG9rZW49dC5pZF90b2tlbnx8ci5pZF90b2tlbixyLmFjY2Vzc190b2tlbj10LmFjY2Vzc190b2tlbixyLnJlZnJlc2hfdG9rZW49dC5yZWZyZXNoX3Rva2VufHxyLnJlZnJlc2hfdG9rZW4sci5leHBpcmVzX2luPXQuZXhwaXJlc19pbixlLnN0b3JlVXNlcihyKS50aGVuKChmdW5jdGlvbigpe3JldHVybiBlLl9ldmVudHMubG9hZChyKSxyfSkpfSkpfXJldHVybiBudWxsfSkpOihpLkxvZy5lcnJvcihcIlVzZXJNYW5hZ2VyLl91c2VSZWZyZXNoVG9rZW46IE5vIGFjY2VzcyB0b2tlbiByZXR1cm5lZCBmcm9tIHRva2VuIGVuZHBvaW50XCIpLFByb21pc2UucmVqZWN0KFwiTm8gYWNjZXNzIHRva2VuIHJldHVybmVkIGZyb20gdG9rZW4gZW5kcG9pbnRcIikpOihpLkxvZy5lcnJvcihcIlVzZXJNYW5hZ2VyLl91c2VSZWZyZXNoVG9rZW46IE5vIHJlc3BvbnNlIHJldHVybmVkIGZyb20gdG9rZW4gZW5kcG9pbnRcIiksUHJvbWlzZS5yZWplY3QoXCJObyByZXNwb25zZSByZXR1cm5lZCBmcm9tIHRva2VuIGVuZHBvaW50XCIpKX0pKX0sZS5wcm90b3R5cGUuX3ZhbGlkYXRlSWRUb2tlbkZyb21Ub2tlblJlZnJlc2hUb2tlbj1mdW5jdGlvbiB0KGUscil7dmFyIG49dGhpcztyZXR1cm4gdGhpcy5fbWV0YWRhdGFTZXJ2aWNlLmdldElzc3VlcigpLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiBuLnNldHRpbmdzLmdldEVwb2NoVGltZSgpLnRoZW4oKGZ1bmN0aW9uKG8pe3JldHVybiBuLl9qb3NlVXRpbC52YWxpZGF0ZUp3dEF0dHJpYnV0ZXMocix0LG4uX3NldHRpbmdzLmNsaWVudF9pZCxuLl9zZXR0aW5ncy5jbG9ja1NrZXcsbykudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIHQ/dC5zdWIhPT1lLnN1Yj8oaS5Mb2cuZXJyb3IoXCJVc2VyTWFuYWdlci5fdmFsaWRhdGVJZFRva2VuRnJvbVRva2VuUmVmcmVzaFRva2VuOiBzdWIgaW4gaWRfdG9rZW4gZG9lcyBub3QgbWF0Y2ggY3VycmVudCBzdWJcIiksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwic3ViIGluIGlkX3Rva2VuIGRvZXMgbm90IG1hdGNoIGN1cnJlbnQgc3ViXCIpKSk6dC5hdXRoX3RpbWUmJnQuYXV0aF90aW1lIT09ZS5hdXRoX3RpbWU/KGkuTG9nLmVycm9yKFwiVXNlck1hbmFnZXIuX3ZhbGlkYXRlSWRUb2tlbkZyb21Ub2tlblJlZnJlc2hUb2tlbjogYXV0aF90aW1lIGluIGlkX3Rva2VuIGRvZXMgbm90IG1hdGNoIG9yaWdpbmFsIGF1dGhfdGltZVwiKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJhdXRoX3RpbWUgaW4gaWRfdG9rZW4gZG9lcyBub3QgbWF0Y2ggb3JpZ2luYWwgYXV0aF90aW1lXCIpKSk6dC5henAmJnQuYXpwIT09ZS5henA/KGkuTG9nLmVycm9yKFwiVXNlck1hbmFnZXIuX3ZhbGlkYXRlSWRUb2tlbkZyb21Ub2tlblJlZnJlc2hUb2tlbjogYXpwIGluIGlkX3Rva2VuIGRvZXMgbm90IG1hdGNoIG9yaWdpbmFsIGF6cFwiKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJhenAgaW4gaWRfdG9rZW4gZG9lcyBub3QgbWF0Y2ggb3JpZ2luYWwgYXpwXCIpKSk6IXQuYXpwJiZlLmF6cD8oaS5Mb2cuZXJyb3IoXCJVc2VyTWFuYWdlci5fdmFsaWRhdGVJZFRva2VuRnJvbVRva2VuUmVmcmVzaFRva2VuOiBhenAgbm90IGluIGlkX3Rva2VuLCBidXQgcHJlc2VudCBpbiBvcmlnaW5hbCBpZF90b2tlblwiKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJhenAgbm90IGluIGlkX3Rva2VuLCBidXQgcHJlc2VudCBpbiBvcmlnaW5hbCBpZF90b2tlblwiKSkpOnZvaWQgMDooaS5Mb2cuZXJyb3IoXCJVc2VyTWFuYWdlci5fdmFsaWRhdGVJZFRva2VuRnJvbVRva2VuUmVmcmVzaFRva2VuOiBGYWlsZWQgdG8gdmFsaWRhdGUgaWRfdG9rZW5cIiksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiRmFpbGVkIHRvIHZhbGlkYXRlIGlkX3Rva2VuXCIpKSl9KSl9KSl9KSl9LGUucHJvdG90eXBlLl9zaWduaW5TaWxlbnRJZnJhbWU9ZnVuY3Rpb24gdCgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxyPWUucmVkaXJlY3RfdXJpfHx0aGlzLnNldHRpbmdzLnNpbGVudF9yZWRpcmVjdF91cml8fHRoaXMuc2V0dGluZ3MucmVkaXJlY3RfdXJpO3JldHVybiByPyhlLnJlZGlyZWN0X3VyaT1yLGUucHJvbXB0PWUucHJvbXB0fHxcIm5vbmVcIix0aGlzLl9zaWduaW4oZSx0aGlzLl9pZnJhbWVOYXZpZ2F0b3Ise3N0YXJ0VXJsOnIsc2lsZW50UmVxdWVzdFRpbWVvdXQ6ZS5zaWxlbnRSZXF1ZXN0VGltZW91dHx8dGhpcy5zZXR0aW5ncy5zaWxlbnRSZXF1ZXN0VGltZW91dH0pLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiB0JiYodC5wcm9maWxlJiZ0LnByb2ZpbGUuc3ViP2kuTG9nLmluZm8oXCJVc2VyTWFuYWdlci5zaWduaW5TaWxlbnQ6IHN1Y2Nlc3NmdWwsIHNpZ25lZCBpbiBzdWI6IFwiLHQucHJvZmlsZS5zdWIpOmkuTG9nLmluZm8oXCJVc2VyTWFuYWdlci5zaWduaW5TaWxlbnQ6IG5vIHN1YlwiKSksdH0pKSk6KGkuTG9nLmVycm9yKFwiVXNlck1hbmFnZXIuc2lnbmluU2lsZW50OiBObyBzaWxlbnRfcmVkaXJlY3RfdXJpIGNvbmZpZ3VyZWRcIiksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiTm8gc2lsZW50X3JlZGlyZWN0X3VyaSBjb25maWd1cmVkXCIpKSl9LGUucHJvdG90eXBlLnNpZ25pblNpbGVudENhbGxiYWNrPWZ1bmN0aW9uIHQoZSl7cmV0dXJuIHRoaXMuX3NpZ25pbkNhbGxiYWNrKGUsdGhpcy5faWZyYW1lTmF2aWdhdG9yKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gdCYmKHQucHJvZmlsZSYmdC5wcm9maWxlLnN1Yj9pLkxvZy5pbmZvKFwiVXNlck1hbmFnZXIuc2lnbmluU2lsZW50Q2FsbGJhY2s6IHN1Y2Nlc3NmdWwsIHNpZ25lZCBpbiBzdWI6IFwiLHQucHJvZmlsZS5zdWIpOmkuTG9nLmluZm8oXCJVc2VyTWFuYWdlci5zaWduaW5TaWxlbnRDYWxsYmFjazogbm8gc3ViXCIpKSx0fSkpfSxlLnByb3RvdHlwZS5zaWduaW5DYWxsYmFjaz1mdW5jdGlvbiB0KGUpe3ZhciByPXRoaXM7cmV0dXJuIHRoaXMucmVhZFNpZ25pblJlc3BvbnNlU3RhdGUoZSkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49dC5zdGF0ZTt0LnJlc3BvbnNlO3JldHVyblwic2k6clwiPT09bi5yZXF1ZXN0X3R5cGU/ci5zaWduaW5SZWRpcmVjdENhbGxiYWNrKGUpOlwic2k6cFwiPT09bi5yZXF1ZXN0X3R5cGU/ci5zaWduaW5Qb3B1cENhbGxiYWNrKGUpOlwic2k6c1wiPT09bi5yZXF1ZXN0X3R5cGU/ci5zaWduaW5TaWxlbnRDYWxsYmFjayhlKTpQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJpbnZhbGlkIHJlc3BvbnNlX3R5cGUgaW4gc3RhdGVcIikpfSkpfSxlLnByb3RvdHlwZS5zaWdub3V0Q2FsbGJhY2s9ZnVuY3Rpb24gdChlLHIpe3ZhciBuPXRoaXM7cmV0dXJuIHRoaXMucmVhZFNpZ25vdXRSZXNwb25zZVN0YXRlKGUpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBpPXQuc3RhdGUsbz10LnJlc3BvbnNlO3JldHVybiBpP1wic286clwiPT09aS5yZXF1ZXN0X3R5cGU/bi5zaWdub3V0UmVkaXJlY3RDYWxsYmFjayhlKTpcInNvOnBcIj09PWkucmVxdWVzdF90eXBlP24uc2lnbm91dFBvcHVwQ2FsbGJhY2soZSxyKTpQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJpbnZhbGlkIHJlc3BvbnNlX3R5cGUgaW4gc3RhdGVcIikpOm99KSl9LGUucHJvdG90eXBlLnF1ZXJ5U2Vzc2lvblN0YXR1cz1mdW5jdGlvbiB0KCl7dmFyIGU9dGhpcyxyPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTsocj1PYmplY3QuYXNzaWduKHt9LHIpKS5yZXF1ZXN0X3R5cGU9XCJzaTpzXCI7dmFyIG49ci5yZWRpcmVjdF91cml8fHRoaXMuc2V0dGluZ3Muc2lsZW50X3JlZGlyZWN0X3VyaXx8dGhpcy5zZXR0aW5ncy5yZWRpcmVjdF91cmk7cmV0dXJuIG4/KHIucmVkaXJlY3RfdXJpPW4sci5wcm9tcHQ9XCJub25lXCIsci5yZXNwb25zZV90eXBlPXIucmVzcG9uc2VfdHlwZXx8dGhpcy5zZXR0aW5ncy5xdWVyeV9zdGF0dXNfcmVzcG9uc2VfdHlwZSxyLnNjb3BlPXIuc2NvcGV8fFwib3BlbmlkXCIsci5za2lwVXNlckluZm89ITAsdGhpcy5fc2lnbmluU3RhcnQocix0aGlzLl9pZnJhbWVOYXZpZ2F0b3Ise3N0YXJ0VXJsOm4sc2lsZW50UmVxdWVzdFRpbWVvdXQ6ci5zaWxlbnRSZXF1ZXN0VGltZW91dHx8dGhpcy5zZXR0aW5ncy5zaWxlbnRSZXF1ZXN0VGltZW91dH0pLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiBlLnByb2Nlc3NTaWduaW5SZXNwb25zZSh0LnVybCkudGhlbigoZnVuY3Rpb24odCl7aWYoaS5Mb2cuZGVidWcoXCJVc2VyTWFuYWdlci5xdWVyeVNlc3Npb25TdGF0dXM6IGdvdCBzaWduaW4gcmVzcG9uc2VcIiksdC5zZXNzaW9uX3N0YXRlJiZ0LnByb2ZpbGUuc3ViKXJldHVybiBpLkxvZy5pbmZvKFwiVXNlck1hbmFnZXIucXVlcnlTZXNzaW9uU3RhdHVzOiBxdWVyeVNlc3Npb25TdGF0dXMgc3VjY2VzcyBmb3Igc3ViOiBcIix0LnByb2ZpbGUuc3ViKSx7c2Vzc2lvbl9zdGF0ZTp0LnNlc3Npb25fc3RhdGUsc3ViOnQucHJvZmlsZS5zdWIsc2lkOnQucHJvZmlsZS5zaWR9O2kuTG9nLmluZm8oXCJxdWVyeVNlc3Npb25TdGF0dXMgc3VjY2Vzc2Z1bCwgdXNlciBub3QgYXV0aGVudGljYXRlZFwiKX0pKS5jYXRjaCgoZnVuY3Rpb24odCl7aWYodC5zZXNzaW9uX3N0YXRlJiZlLnNldHRpbmdzLm1vbml0b3JBbm9ueW1vdXNTZXNzaW9uJiYoXCJsb2dpbl9yZXF1aXJlZFwiPT10Lm1lc3NhZ2V8fFwiY29uc2VudF9yZXF1aXJlZFwiPT10Lm1lc3NhZ2V8fFwiaW50ZXJhY3Rpb25fcmVxdWlyZWRcIj09dC5tZXNzYWdlfHxcImFjY291bnRfc2VsZWN0aW9uX3JlcXVpcmVkXCI9PXQubWVzc2FnZSkpcmV0dXJuIGkuTG9nLmluZm8oXCJVc2VyTWFuYWdlci5xdWVyeVNlc3Npb25TdGF0dXM6IHF1ZXJ5U2Vzc2lvblN0YXR1cyBzdWNjZXNzIGZvciBhbm9ueW1vdXMgdXNlclwiKSx7c2Vzc2lvbl9zdGF0ZTp0LnNlc3Npb25fc3RhdGV9O3Rocm93IHR9KSl9KSkpOihpLkxvZy5lcnJvcihcIlVzZXJNYW5hZ2VyLnF1ZXJ5U2Vzc2lvblN0YXR1czogTm8gc2lsZW50X3JlZGlyZWN0X3VyaSBjb25maWd1cmVkXCIpLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIk5vIHNpbGVudF9yZWRpcmVjdF91cmkgY29uZmlndXJlZFwiKSkpfSxlLnByb3RvdHlwZS5fc2lnbmluPWZ1bmN0aW9uIHQoZSxyKXt2YXIgbj10aGlzLGk9YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9O3JldHVybiB0aGlzLl9zaWduaW5TdGFydChlLHIsaSkudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIG4uX3NpZ25pbkVuZCh0LnVybCxlKX0pKX0sZS5wcm90b3R5cGUuX3NpZ25pblN0YXJ0PWZ1bmN0aW9uIHQoZSxyKXt2YXIgbj10aGlzLG89YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9O3JldHVybiByLnByZXBhcmUobykudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIGkuTG9nLmRlYnVnKFwiVXNlck1hbmFnZXIuX3NpZ25pblN0YXJ0OiBnb3QgbmF2aWdhdG9yIHdpbmRvdyBoYW5kbGVcIiksbi5jcmVhdGVTaWduaW5SZXF1ZXN0KGUpLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBpLkxvZy5kZWJ1ZyhcIlVzZXJNYW5hZ2VyLl9zaWduaW5TdGFydDogZ290IHNpZ25pbiByZXF1ZXN0XCIpLG8udXJsPWUudXJsLG8uaWQ9ZS5zdGF0ZS5pZCx0Lm5hdmlnYXRlKG8pfSkpLmNhdGNoKChmdW5jdGlvbihlKXt0aHJvdyB0LmNsb3NlJiYoaS5Mb2cuZGVidWcoXCJVc2VyTWFuYWdlci5fc2lnbmluU3RhcnQ6IEVycm9yIGFmdGVyIHByZXBhcmluZyBuYXZpZ2F0b3IsIGNsb3NpbmcgbmF2aWdhdG9yIHdpbmRvd1wiKSx0LmNsb3NlKCkpLGV9KSl9KSl9LGUucHJvdG90eXBlLl9zaWduaW5FbmQ9ZnVuY3Rpb24gdChlKXt2YXIgcj10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3JldHVybiB0aGlzLnByb2Nlc3NTaWduaW5SZXNwb25zZShlKS50aGVuKChmdW5jdGlvbih0KXtpLkxvZy5kZWJ1ZyhcIlVzZXJNYW5hZ2VyLl9zaWduaW5FbmQ6IGdvdCBzaWduaW4gcmVzcG9uc2VcIik7dmFyIGU9bmV3IGEuVXNlcih0KTtpZihuLmN1cnJlbnRfc3ViKXtpZihuLmN1cnJlbnRfc3ViIT09ZS5wcm9maWxlLnN1YilyZXR1cm4gaS5Mb2cuZGVidWcoXCJVc2VyTWFuYWdlci5fc2lnbmluRW5kOiBjdXJyZW50IHVzZXIgZG9lcyBub3QgbWF0Y2ggdXNlciByZXR1cm5lZCBmcm9tIHNpZ25pbi4gc3ViIGZyb20gc2lnbmluOiBcIixlLnByb2ZpbGUuc3ViKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJsb2dpbl9yZXF1aXJlZFwiKSk7aS5Mb2cuZGVidWcoXCJVc2VyTWFuYWdlci5fc2lnbmluRW5kOiBjdXJyZW50IHVzZXIgbWF0Y2hlcyB1c2VyIHJldHVybmVkIGZyb20gc2lnbmluXCIpfXJldHVybiByLnN0b3JlVXNlcihlKS50aGVuKChmdW5jdGlvbigpe3JldHVybiBpLkxvZy5kZWJ1ZyhcIlVzZXJNYW5hZ2VyLl9zaWduaW5FbmQ6IHVzZXIgc3RvcmVkXCIpLHIuX2V2ZW50cy5sb2FkKGUpLGV9KSl9KSl9LGUucHJvdG90eXBlLl9zaWduaW5DYWxsYmFjaz1mdW5jdGlvbiB0KGUscil7aS5Mb2cuZGVidWcoXCJVc2VyTWFuYWdlci5fc2lnbmluQ2FsbGJhY2tcIik7dmFyIG49XCJxdWVyeVwiPT09dGhpcy5fc2V0dGluZ3MucmVzcG9uc2VfbW9kZXx8IXRoaXMuX3NldHRpbmdzLnJlc3BvbnNlX21vZGUmJmwuU2lnbmluUmVxdWVzdC5pc0NvZGUodGhpcy5fc2V0dGluZ3MucmVzcG9uc2VfdHlwZSk/XCI/XCI6XCIjXCI7cmV0dXJuIHIuY2FsbGJhY2soZSx2b2lkIDAsbil9LGUucHJvdG90eXBlLnNpZ25vdXRSZWRpcmVjdD1mdW5jdGlvbiB0KCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9OyhlPU9iamVjdC5hc3NpZ24oe30sZSkpLnJlcXVlc3RfdHlwZT1cInNvOnJcIjt2YXIgcj1lLnBvc3RfbG9nb3V0X3JlZGlyZWN0X3VyaXx8dGhpcy5zZXR0aW5ncy5wb3N0X2xvZ291dF9yZWRpcmVjdF91cmk7ciYmKGUucG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpPXIpO3ZhciBuPXt1c2VSZXBsYWNlVG9OYXZpZ2F0ZTplLnVzZVJlcGxhY2VUb05hdmlnYXRlfTtyZXR1cm4gdGhpcy5fc2lnbm91dFN0YXJ0KGUsdGhpcy5fcmVkaXJlY3ROYXZpZ2F0b3IsbikudGhlbigoZnVuY3Rpb24oKXtpLkxvZy5pbmZvKFwiVXNlck1hbmFnZXIuc2lnbm91dFJlZGlyZWN0OiBzdWNjZXNzZnVsXCIpfSkpfSxlLnByb3RvdHlwZS5zaWdub3V0UmVkaXJlY3RDYWxsYmFjaz1mdW5jdGlvbiB0KGUpe3JldHVybiB0aGlzLl9zaWdub3V0RW5kKGV8fHRoaXMuX3JlZGlyZWN0TmF2aWdhdG9yLnVybCkudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIGkuTG9nLmluZm8oXCJVc2VyTWFuYWdlci5zaWdub3V0UmVkaXJlY3RDYWxsYmFjazogc3VjY2Vzc2Z1bFwiKSx0fSkpfSxlLnByb3RvdHlwZS5zaWdub3V0UG9wdXA9ZnVuY3Rpb24gdCgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTsoZT1PYmplY3QuYXNzaWduKHt9LGUpKS5yZXF1ZXN0X3R5cGU9XCJzbzpwXCI7dmFyIHI9ZS5wb3N0X2xvZ291dF9yZWRpcmVjdF91cml8fHRoaXMuc2V0dGluZ3MucG9wdXBfcG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpfHx0aGlzLnNldHRpbmdzLnBvc3RfbG9nb3V0X3JlZGlyZWN0X3VyaTtyZXR1cm4gZS5wb3N0X2xvZ291dF9yZWRpcmVjdF91cmk9cixlLmRpc3BsYXk9XCJwb3B1cFwiLGUucG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpJiYoZS5zdGF0ZT1lLnN0YXRlfHx7fSksdGhpcy5fc2lnbm91dChlLHRoaXMuX3BvcHVwTmF2aWdhdG9yLHtzdGFydFVybDpyLHBvcHVwV2luZG93RmVhdHVyZXM6ZS5wb3B1cFdpbmRvd0ZlYXR1cmVzfHx0aGlzLnNldHRpbmdzLnBvcHVwV2luZG93RmVhdHVyZXMscG9wdXBXaW5kb3dUYXJnZXQ6ZS5wb3B1cFdpbmRvd1RhcmdldHx8dGhpcy5zZXR0aW5ncy5wb3B1cFdpbmRvd1RhcmdldH0pLnRoZW4oKGZ1bmN0aW9uKCl7aS5Mb2cuaW5mbyhcIlVzZXJNYW5hZ2VyLnNpZ25vdXRQb3B1cDogc3VjY2Vzc2Z1bFwiKX0pKX0sZS5wcm90b3R5cGUuc2lnbm91dFBvcHVwQ2FsbGJhY2s9ZnVuY3Rpb24gdChlLHIpe3ZvaWQgMD09PXImJlwiYm9vbGVhblwiPT10eXBlb2YgZSYmKHI9ZSxlPW51bGwpO3JldHVybiB0aGlzLl9wb3B1cE5hdmlnYXRvci5jYWxsYmFjayhlLHIsXCI/XCIpLnRoZW4oKGZ1bmN0aW9uKCl7aS5Mb2cuaW5mbyhcIlVzZXJNYW5hZ2VyLnNpZ25vdXRQb3B1cENhbGxiYWNrOiBzdWNjZXNzZnVsXCIpfSkpfSxlLnByb3RvdHlwZS5fc2lnbm91dD1mdW5jdGlvbiB0KGUscil7dmFyIG49dGhpcyxpPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTp7fTtyZXR1cm4gdGhpcy5fc2lnbm91dFN0YXJ0KGUscixpKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gbi5fc2lnbm91dEVuZCh0LnVybCl9KSl9LGUucHJvdG90eXBlLl9zaWdub3V0U3RhcnQ9ZnVuY3Rpb24gdCgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxyPXRoaXMsbj1hcmd1bWVudHNbMV0sbz1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e307cmV0dXJuIG4ucHJlcGFyZShvKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gaS5Mb2cuZGVidWcoXCJVc2VyTWFuYWdlci5fc2lnbm91dFN0YXJ0OiBnb3QgbmF2aWdhdG9yIHdpbmRvdyBoYW5kbGVcIiksci5fbG9hZFVzZXIoKS50aGVuKChmdW5jdGlvbihuKXtyZXR1cm4gaS5Mb2cuZGVidWcoXCJVc2VyTWFuYWdlci5fc2lnbm91dFN0YXJ0OiBsb2FkZWQgY3VycmVudCB1c2VyIGZyb20gc3RvcmFnZVwiKSwoci5fc2V0dGluZ3MucmV2b2tlQWNjZXNzVG9rZW5PblNpZ25vdXQ/ci5fcmV2b2tlSW50ZXJuYWwobik6UHJvbWlzZS5yZXNvbHZlKCkpLnRoZW4oKGZ1bmN0aW9uKCl7dmFyIHM9ZS5pZF90b2tlbl9oaW50fHxuJiZuLmlkX3Rva2VuO3JldHVybiBzJiYoaS5Mb2cuZGVidWcoXCJVc2VyTWFuYWdlci5fc2lnbm91dFN0YXJ0OiBTZXR0aW5nIGlkX3Rva2VuIGludG8gc2lnbm91dCByZXF1ZXN0XCIpLGUuaWRfdG9rZW5faGludD1zKSxyLnJlbW92ZVVzZXIoKS50aGVuKChmdW5jdGlvbigpe3JldHVybiBpLkxvZy5kZWJ1ZyhcIlVzZXJNYW5hZ2VyLl9zaWdub3V0U3RhcnQ6IHVzZXIgcmVtb3ZlZCwgY3JlYXRpbmcgc2lnbm91dCByZXF1ZXN0XCIpLHIuY3JlYXRlU2lnbm91dFJlcXVlc3QoZSkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIGkuTG9nLmRlYnVnKFwiVXNlck1hbmFnZXIuX3NpZ25vdXRTdGFydDogZ290IHNpZ25vdXQgcmVxdWVzdFwiKSxvLnVybD1lLnVybCxlLnN0YXRlJiYoby5pZD1lLnN0YXRlLmlkKSx0Lm5hdmlnYXRlKG8pfSkpfSkpfSkpfSkpLmNhdGNoKChmdW5jdGlvbihlKXt0aHJvdyB0LmNsb3NlJiYoaS5Mb2cuZGVidWcoXCJVc2VyTWFuYWdlci5fc2lnbm91dFN0YXJ0OiBFcnJvciBhZnRlciBwcmVwYXJpbmcgbmF2aWdhdG9yLCBjbG9zaW5nIG5hdmlnYXRvciB3aW5kb3dcIiksdC5jbG9zZSgpKSxlfSkpfSkpfSxlLnByb3RvdHlwZS5fc2lnbm91dEVuZD1mdW5jdGlvbiB0KGUpe3JldHVybiB0aGlzLnByb2Nlc3NTaWdub3V0UmVzcG9uc2UoZSkudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIGkuTG9nLmRlYnVnKFwiVXNlck1hbmFnZXIuX3NpZ25vdXRFbmQ6IGdvdCBzaWdub3V0IHJlc3BvbnNlXCIpLHR9KSl9LGUucHJvdG90eXBlLnJldm9rZUFjY2Vzc1Rva2VuPWZ1bmN0aW9uIHQoKXt2YXIgZT10aGlzO3JldHVybiB0aGlzLl9sb2FkVXNlcigpLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiBlLl9yZXZva2VJbnRlcm5hbCh0LCEwKS50aGVuKChmdW5jdGlvbihyKXtpZihyKXJldHVybiBpLkxvZy5kZWJ1ZyhcIlVzZXJNYW5hZ2VyLnJldm9rZUFjY2Vzc1Rva2VuOiByZW1vdmluZyB0b2tlbiBwcm9wZXJ0aWVzIGZyb20gdXNlciBhbmQgcmUtc3RvcmluZ1wiKSx0LmFjY2Vzc190b2tlbj1udWxsLHQucmVmcmVzaF90b2tlbj1udWxsLHQuZXhwaXJlc19hdD1udWxsLHQudG9rZW5fdHlwZT1udWxsLGUuc3RvcmVVc2VyKHQpLnRoZW4oKGZ1bmN0aW9uKCl7aS5Mb2cuZGVidWcoXCJVc2VyTWFuYWdlci5yZXZva2VBY2Nlc3NUb2tlbjogdXNlciBzdG9yZWRcIiksZS5fZXZlbnRzLmxvYWQodCl9KSl9KSl9KSkudGhlbigoZnVuY3Rpb24oKXtpLkxvZy5pbmZvKFwiVXNlck1hbmFnZXIucmV2b2tlQWNjZXNzVG9rZW46IGFjY2VzcyB0b2tlbiByZXZva2VkIHN1Y2Nlc3NmdWxseVwiKX0pKX0sZS5wcm90b3R5cGUuX3Jldm9rZUludGVybmFsPWZ1bmN0aW9uIHQoZSxyKXt2YXIgbj10aGlzO2lmKGUpe3ZhciBvPWUuYWNjZXNzX3Rva2VuLHM9ZS5yZWZyZXNoX3Rva2VuO3JldHVybiB0aGlzLl9yZXZva2VBY2Nlc3NUb2tlbkludGVybmFsKG8scikudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIG4uX3Jldm9rZVJlZnJlc2hUb2tlbkludGVybmFsKHMscikudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIHR8fGV8fGkuTG9nLmRlYnVnKFwiVXNlck1hbmFnZXIucmV2b2tlQWNjZXNzVG9rZW46IG5vIG5lZWQgdG8gcmV2b2tlIGR1ZSB0byBubyB0b2tlbihzKSwgb3IgSldUIGZvcm1hdFwiKSx0fHxlfSkpfSkpfXJldHVybiBQcm9taXNlLnJlc29sdmUoITEpfSxlLnByb3RvdHlwZS5fcmV2b2tlQWNjZXNzVG9rZW5JbnRlcm5hbD1mdW5jdGlvbiB0KGUscil7cmV0dXJuIWV8fGUuaW5kZXhPZihcIi5cIik+PTA/UHJvbWlzZS5yZXNvbHZlKCExKTp0aGlzLl90b2tlblJldm9jYXRpb25DbGllbnQucmV2b2tlKGUscikudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4hMH0pKX0sZS5wcm90b3R5cGUuX3Jldm9rZVJlZnJlc2hUb2tlbkludGVybmFsPWZ1bmN0aW9uIHQoZSxyKXtyZXR1cm4gZT90aGlzLl90b2tlblJldm9jYXRpb25DbGllbnQucmV2b2tlKGUscixcInJlZnJlc2hfdG9rZW5cIikudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4hMH0pKTpQcm9taXNlLnJlc29sdmUoITEpfSxlLnByb3RvdHlwZS5zdGFydFNpbGVudFJlbmV3PWZ1bmN0aW9uIHQoKXt0aGlzLl9zaWxlbnRSZW5ld1NlcnZpY2Uuc3RhcnQoKX0sZS5wcm90b3R5cGUuc3RvcFNpbGVudFJlbmV3PWZ1bmN0aW9uIHQoKXt0aGlzLl9zaWxlbnRSZW5ld1NlcnZpY2Uuc3RvcCgpfSxlLnByb3RvdHlwZS5fbG9hZFVzZXI9ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl91c2VyU3RvcmUuZ2V0KHRoaXMuX3VzZXJTdG9yZUtleSkudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIHQ/KGkuTG9nLmRlYnVnKFwiVXNlck1hbmFnZXIuX2xvYWRVc2VyOiB1c2VyIHN0b3JhZ2VTdHJpbmcgbG9hZGVkXCIpLGEuVXNlci5mcm9tU3RvcmFnZVN0cmluZyh0KSk6KGkuTG9nLmRlYnVnKFwiVXNlck1hbmFnZXIuX2xvYWRVc2VyOiBubyB1c2VyIHN0b3JhZ2VTdHJpbmdcIiksbnVsbCl9KSl9LGUucHJvdG90eXBlLnN0b3JlVXNlcj1mdW5jdGlvbiB0KGUpe2lmKGUpe2kuTG9nLmRlYnVnKFwiVXNlck1hbmFnZXIuc3RvcmVVc2VyOiBzdG9yaW5nIHVzZXJcIik7dmFyIHI9ZS50b1N0b3JhZ2VTdHJpbmcoKTtyZXR1cm4gdGhpcy5fdXNlclN0b3JlLnNldCh0aGlzLl91c2VyU3RvcmVLZXkscil9cmV0dXJuIGkuTG9nLmRlYnVnKFwic3RvcmVVc2VyLnN0b3JlVXNlcjogcmVtb3ZpbmcgdXNlclwiKSx0aGlzLl91c2VyU3RvcmUucmVtb3ZlKHRoaXMuX3VzZXJTdG9yZUtleSl9LG4oZSxbe2tleTpcIl9yZWRpcmVjdE5hdmlnYXRvclwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuc2V0dGluZ3MucmVkaXJlY3ROYXZpZ2F0b3J9fSx7a2V5OlwiX3BvcHVwTmF2aWdhdG9yXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5zZXR0aW5ncy5wb3B1cE5hdmlnYXRvcn19LHtrZXk6XCJfaWZyYW1lTmF2aWdhdG9yXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5zZXR0aW5ncy5pZnJhbWVOYXZpZ2F0b3J9fSx7a2V5OlwiX3VzZXJTdG9yZVwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuc2V0dGluZ3MudXNlclN0b3JlfX0se2tleTpcImV2ZW50c1wiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX2V2ZW50c319LHtrZXk6XCJfdXNlclN0b3JlS2V5XCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm5cInVzZXI6XCIrdGhpcy5zZXR0aW5ncy5hdXRob3JpdHkrXCI6XCIrdGhpcy5zZXR0aW5ncy5jbGllbnRfaWR9fV0pLGV9KG8uT2lkY0NsaWVudCl9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLlVzZXJNYW5hZ2VyU2V0dGluZ3M9dm9pZCAwO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksaT0ocigwKSxyKDUpKSxvPXIoNDApLHM9cig0MSksYT1yKDQzKSx1PXIoNiksYz1yKDEpLGg9cig4KTtmdW5jdGlvbiBsKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBmKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZS5Vc2VyTWFuYWdlclNldHRpbmdzPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj1yLnBvcHVwX3JlZGlyZWN0X3VyaSxpPXIucG9wdXBfcG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpLGc9ci5wb3B1cFdpbmRvd0ZlYXR1cmVzLGQ9ci5wb3B1cFdpbmRvd1RhcmdldCxwPXIuc2lsZW50X3JlZGlyZWN0X3VyaSx2PXIuc2lsZW50UmVxdWVzdFRpbWVvdXQseT1yLmF1dG9tYXRpY1NpbGVudFJlbmV3LG09dm9pZCAwIT09eSYmeSxfPXIudmFsaWRhdGVTdWJPblNpbGVudFJlbmV3LFM9dm9pZCAwIT09XyYmXyxiPXIuaW5jbHVkZUlkVG9rZW5JblNpbGVudFJlbmV3LHc9dm9pZCAwPT09Ynx8YixGPXIubW9uaXRvclNlc3Npb24sRT12b2lkIDA9PT1GfHxGLHg9ci5tb25pdG9yQW5vbnltb3VzU2Vzc2lvbixBPXZvaWQgMCE9PXgmJngsaz1yLmNoZWNrU2Vzc2lvbkludGVydmFsLFA9dm9pZCAwPT09az8yZTM6ayxDPXIuc3RvcENoZWNrU2Vzc2lvbk9uRXJyb3IsVD12b2lkIDA9PT1DfHxDLFI9ci5xdWVyeV9zdGF0dXNfcmVzcG9uc2VfdHlwZSxJPXIucmV2b2tlQWNjZXNzVG9rZW5PblNpZ25vdXQsRD12b2lkIDAhPT1JJiZJLEw9ci5hY2Nlc3NUb2tlbkV4cGlyaW5nTm90aWZpY2F0aW9uVGltZSxOPXZvaWQgMD09PUw/NjA6TCxVPXIucmVkaXJlY3ROYXZpZ2F0b3IsQj12b2lkIDA9PT1VP25ldyBvLlJlZGlyZWN0TmF2aWdhdG9yOlUsTz1yLnBvcHVwTmF2aWdhdG9yLGo9dm9pZCAwPT09Tz9uZXcgcy5Qb3B1cE5hdmlnYXRvcjpPLE09ci5pZnJhbWVOYXZpZ2F0b3IsSD12b2lkIDA9PT1NP25ldyBhLklGcmFtZU5hdmlnYXRvcjpNLFY9ci51c2VyU3RvcmUsSz12b2lkIDA9PT1WP25ldyB1LldlYlN0b3JhZ2VTdGF0ZVN0b3JlKHtzdG9yZTpjLkdsb2JhbC5zZXNzaW9uU3RvcmFnZX0pOlY7bCh0aGlzLGUpO3ZhciBxPWYodGhpcyx0LmNhbGwodGhpcyxhcmd1bWVudHNbMF0pKTtyZXR1cm4gcS5fcG9wdXBfcmVkaXJlY3RfdXJpPW4scS5fcG9wdXBfcG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpPWkscS5fcG9wdXBXaW5kb3dGZWF0dXJlcz1nLHEuX3BvcHVwV2luZG93VGFyZ2V0PWQscS5fc2lsZW50X3JlZGlyZWN0X3VyaT1wLHEuX3NpbGVudFJlcXVlc3RUaW1lb3V0PXYscS5fYXV0b21hdGljU2lsZW50UmVuZXc9bSxxLl92YWxpZGF0ZVN1Yk9uU2lsZW50UmVuZXc9UyxxLl9pbmNsdWRlSWRUb2tlbkluU2lsZW50UmVuZXc9dyxxLl9hY2Nlc3NUb2tlbkV4cGlyaW5nTm90aWZpY2F0aW9uVGltZT1OLHEuX21vbml0b3JTZXNzaW9uPUUscS5fbW9uaXRvckFub255bW91c1Nlc3Npb249QSxxLl9jaGVja1Nlc3Npb25JbnRlcnZhbD1QLHEuX3N0b3BDaGVja1Nlc3Npb25PbkVycm9yPVQsUj9xLl9xdWVyeV9zdGF0dXNfcmVzcG9uc2VfdHlwZT1SOmFyZ3VtZW50c1swXSYmYXJndW1lbnRzWzBdLnJlc3BvbnNlX3R5cGU/cS5fcXVlcnlfc3RhdHVzX3Jlc3BvbnNlX3R5cGU9aC5TaWduaW5SZXF1ZXN0LmlzT2lkYyhhcmd1bWVudHNbMF0ucmVzcG9uc2VfdHlwZSk/XCJpZF90b2tlblwiOlwiY29kZVwiOnEuX3F1ZXJ5X3N0YXR1c19yZXNwb25zZV90eXBlPVwiaWRfdG9rZW5cIixxLl9yZXZva2VBY2Nlc3NUb2tlbk9uU2lnbm91dD1ELHEuX3JlZGlyZWN0TmF2aWdhdG9yPUIscS5fcG9wdXBOYXZpZ2F0b3I9aixxLl9pZnJhbWVOYXZpZ2F0b3I9SCxxLl91c2VyU3RvcmU9SyxxfXJldHVybiBmdW5jdGlvbiByKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9KGUsdCksbihlLFt7a2V5OlwicG9wdXBfcmVkaXJlY3RfdXJpXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fcG9wdXBfcmVkaXJlY3RfdXJpfX0se2tleTpcInBvcHVwX3Bvc3RfbG9nb3V0X3JlZGlyZWN0X3VyaVwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX3BvcHVwX3Bvc3RfbG9nb3V0X3JlZGlyZWN0X3VyaX19LHtrZXk6XCJwb3B1cFdpbmRvd0ZlYXR1cmVzXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fcG9wdXBXaW5kb3dGZWF0dXJlc319LHtrZXk6XCJwb3B1cFdpbmRvd1RhcmdldFwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX3BvcHVwV2luZG93VGFyZ2V0fX0se2tleTpcInNpbGVudF9yZWRpcmVjdF91cmlcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9zaWxlbnRfcmVkaXJlY3RfdXJpfX0se2tleTpcInNpbGVudFJlcXVlc3RUaW1lb3V0XCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fc2lsZW50UmVxdWVzdFRpbWVvdXR9fSx7a2V5OlwiYXV0b21hdGljU2lsZW50UmVuZXdcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9hdXRvbWF0aWNTaWxlbnRSZW5ld319LHtrZXk6XCJ2YWxpZGF0ZVN1Yk9uU2lsZW50UmVuZXdcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl92YWxpZGF0ZVN1Yk9uU2lsZW50UmVuZXd9fSx7a2V5OlwiaW5jbHVkZUlkVG9rZW5JblNpbGVudFJlbmV3XCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5faW5jbHVkZUlkVG9rZW5JblNpbGVudFJlbmV3fX0se2tleTpcImFjY2Vzc1Rva2VuRXhwaXJpbmdOb3RpZmljYXRpb25UaW1lXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fYWNjZXNzVG9rZW5FeHBpcmluZ05vdGlmaWNhdGlvblRpbWV9fSx7a2V5OlwibW9uaXRvclNlc3Npb25cIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9tb25pdG9yU2Vzc2lvbn19LHtrZXk6XCJtb25pdG9yQW5vbnltb3VzU2Vzc2lvblwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX21vbml0b3JBbm9ueW1vdXNTZXNzaW9ufX0se2tleTpcImNoZWNrU2Vzc2lvbkludGVydmFsXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fY2hlY2tTZXNzaW9uSW50ZXJ2YWx9fSx7a2V5Olwic3RvcENoZWNrU2Vzc2lvbk9uRXJyb3JcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9zdG9wQ2hlY2tTZXNzaW9uT25FcnJvcn19LHtrZXk6XCJxdWVyeV9zdGF0dXNfcmVzcG9uc2VfdHlwZVwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX3F1ZXJ5X3N0YXR1c19yZXNwb25zZV90eXBlfX0se2tleTpcInJldm9rZUFjY2Vzc1Rva2VuT25TaWdub3V0XCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fcmV2b2tlQWNjZXNzVG9rZW5PblNpZ25vdXR9fSx7a2V5OlwicmVkaXJlY3ROYXZpZ2F0b3JcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9yZWRpcmVjdE5hdmlnYXRvcn19LHtrZXk6XCJwb3B1cE5hdmlnYXRvclwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX3BvcHVwTmF2aWdhdG9yfX0se2tleTpcImlmcmFtZU5hdmlnYXRvclwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX2lmcmFtZU5hdmlnYXRvcn19LHtrZXk6XCJ1c2VyU3RvcmVcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl91c2VyU3RvcmV9fV0pLGV9KGkuT2lkY0NsaWVudFNldHRpbmdzKX0sZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuUmVkaXJlY3ROYXZpZ2F0b3I9dm9pZCAwO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksaT1yKDApO2UuUmVkaXJlY3ROYXZpZ2F0b3I9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7IWZ1bmN0aW9uIGUodCxyKXtpZighKHQgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLHQpfXJldHVybiB0LnByb3RvdHlwZS5wcmVwYXJlPWZ1bmN0aW9uIHQoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMpfSx0LnByb3RvdHlwZS5uYXZpZ2F0ZT1mdW5jdGlvbiB0KGUpe3JldHVybiBlJiZlLnVybD8oZS51c2VSZXBsYWNlVG9OYXZpZ2F0ZT93aW5kb3cubG9jYXRpb24ucmVwbGFjZShlLnVybCk6d2luZG93LmxvY2F0aW9uPWUudXJsLFByb21pc2UucmVzb2x2ZSgpKTooaS5Mb2cuZXJyb3IoXCJSZWRpcmVjdE5hdmlnYXRvci5uYXZpZ2F0ZTogTm8gdXJsIHByb3ZpZGVkXCIpLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIk5vIHVybCBwcm92aWRlZFwiKSkpfSxuKHQsW3trZXk6XCJ1cmxcIixnZXQ6ZnVuY3Rpb24gdCgpe3JldHVybiB3aW5kb3cubG9jYXRpb24uaHJlZn19XSksdH0oKX0sZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuUG9wdXBOYXZpZ2F0b3I9dm9pZCAwO3ZhciBuPXIoMCksaT1yKDQyKTtlLlBvcHVwTmF2aWdhdG9yPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpeyFmdW5jdGlvbiBlKHQscil7aWYoISh0IGluc3RhbmNlb2YgcikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX0odGhpcyx0KX1yZXR1cm4gdC5wcm90b3R5cGUucHJlcGFyZT1mdW5jdGlvbiB0KGUpe3ZhciByPW5ldyBpLlBvcHVwV2luZG93KGUpO3JldHVybiBQcm9taXNlLnJlc29sdmUocil9LHQucHJvdG90eXBlLmNhbGxiYWNrPWZ1bmN0aW9uIHQoZSxyLG8pe24uTG9nLmRlYnVnKFwiUG9wdXBOYXZpZ2F0b3IuY2FsbGJhY2tcIik7dHJ5e3JldHVybiBpLlBvcHVwV2luZG93Lm5vdGlmeU9wZW5lcihlLHIsbyksUHJvbWlzZS5yZXNvbHZlKCl9Y2F0Y2godCl7cmV0dXJuIFByb21pc2UucmVqZWN0KHQpfX0sdH0oKX0sZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuUG9wdXBXaW5kb3c9dm9pZCAwO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksaT1yKDApLG89cigzKTtlLlBvcHVwV2luZG93PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcj10aGlzOyFmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX0odGhpcyx0KSx0aGlzLl9wcm9taXNlPW5ldyBQcm9taXNlKChmdW5jdGlvbih0LGUpe3IuX3Jlc29sdmU9dCxyLl9yZWplY3Q9ZX0pKTt2YXIgbz1lLnBvcHVwV2luZG93VGFyZ2V0fHxcIl9ibGFua1wiLHM9ZS5wb3B1cFdpbmRvd0ZlYXR1cmVzfHxcImxvY2F0aW9uPW5vLHRvb2xiYXI9bm8sd2lkdGg9NTAwLGhlaWdodD01MDAsbGVmdD0xMDAsdG9wPTEwMDtcIjt0aGlzLl9wb3B1cD13aW5kb3cub3BlbihcIlwiLG8scyksdGhpcy5fcG9wdXAmJihpLkxvZy5kZWJ1ZyhcIlBvcHVwV2luZG93LmN0b3I6IHBvcHVwIHN1Y2Nlc3NmdWxseSBjcmVhdGVkXCIpLHRoaXMuX2NoZWNrRm9yUG9wdXBDbG9zZWRUaW1lcj13aW5kb3cuc2V0SW50ZXJ2YWwodGhpcy5fY2hlY2tGb3JQb3B1cENsb3NlZC5iaW5kKHRoaXMpLDUwMCkpfXJldHVybiB0LnByb3RvdHlwZS5uYXZpZ2F0ZT1mdW5jdGlvbiB0KGUpe3JldHVybiB0aGlzLl9wb3B1cD9lJiZlLnVybD8oaS5Mb2cuZGVidWcoXCJQb3B1cFdpbmRvdy5uYXZpZ2F0ZTogU2V0dGluZyBVUkwgaW4gcG9wdXBcIiksdGhpcy5faWQ9ZS5pZCx0aGlzLl9pZCYmKHdpbmRvd1tcInBvcHVwQ2FsbGJhY2tfXCIrZS5pZF09dGhpcy5fY2FsbGJhY2suYmluZCh0aGlzKSksdGhpcy5fcG9wdXAuZm9jdXMoKSx0aGlzLl9wb3B1cC53aW5kb3cubG9jYXRpb249ZS51cmwpOih0aGlzLl9lcnJvcihcIlBvcHVwV2luZG93Lm5hdmlnYXRlOiBubyB1cmwgcHJvdmlkZWRcIiksdGhpcy5fZXJyb3IoXCJObyB1cmwgcHJvdmlkZWRcIikpOnRoaXMuX2Vycm9yKFwiUG9wdXBXaW5kb3cubmF2aWdhdGU6IEVycm9yIG9wZW5pbmcgcG9wdXAgd2luZG93XCIpLHRoaXMucHJvbWlzZX0sdC5wcm90b3R5cGUuX3N1Y2Nlc3M9ZnVuY3Rpb24gdChlKXtpLkxvZy5kZWJ1ZyhcIlBvcHVwV2luZG93LmNhbGxiYWNrOiBTdWNjZXNzZnVsIHJlc3BvbnNlIGZyb20gcG9wdXAgd2luZG93XCIpLHRoaXMuX2NsZWFudXAoKSx0aGlzLl9yZXNvbHZlKGUpfSx0LnByb3RvdHlwZS5fZXJyb3I9ZnVuY3Rpb24gdChlKXtpLkxvZy5lcnJvcihcIlBvcHVwV2luZG93LmVycm9yOiBcIixlKSx0aGlzLl9jbGVhbnVwKCksdGhpcy5fcmVqZWN0KG5ldyBFcnJvcihlKSl9LHQucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uIHQoKXt0aGlzLl9jbGVhbnVwKCExKX0sdC5wcm90b3R5cGUuX2NsZWFudXA9ZnVuY3Rpb24gdChlKXtpLkxvZy5kZWJ1ZyhcIlBvcHVwV2luZG93LmNsZWFudXBcIiksd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5fY2hlY2tGb3JQb3B1cENsb3NlZFRpbWVyKSx0aGlzLl9jaGVja0ZvclBvcHVwQ2xvc2VkVGltZXI9bnVsbCxkZWxldGUgd2luZG93W1wicG9wdXBDYWxsYmFja19cIit0aGlzLl9pZF0sdGhpcy5fcG9wdXAmJiFlJiZ0aGlzLl9wb3B1cC5jbG9zZSgpLHRoaXMuX3BvcHVwPW51bGx9LHQucHJvdG90eXBlLl9jaGVja0ZvclBvcHVwQ2xvc2VkPWZ1bmN0aW9uIHQoKXt0aGlzLl9wb3B1cCYmIXRoaXMuX3BvcHVwLmNsb3NlZHx8dGhpcy5fZXJyb3IoXCJQb3B1cCB3aW5kb3cgY2xvc2VkXCIpfSx0LnByb3RvdHlwZS5fY2FsbGJhY2s9ZnVuY3Rpb24gdChlLHIpe3RoaXMuX2NsZWFudXAociksZT8oaS5Mb2cuZGVidWcoXCJQb3B1cFdpbmRvdy5jYWxsYmFjayBzdWNjZXNzXCIpLHRoaXMuX3N1Y2Nlc3Moe3VybDplfSkpOihpLkxvZy5kZWJ1ZyhcIlBvcHVwV2luZG93LmNhbGxiYWNrOiBJbnZhbGlkIHJlc3BvbnNlIGZyb20gcG9wdXBcIiksdGhpcy5fZXJyb3IoXCJJbnZhbGlkIHJlc3BvbnNlIGZyb20gcG9wdXBcIikpfSx0Lm5vdGlmeU9wZW5lcj1mdW5jdGlvbiB0KGUscixuKXtpZih3aW5kb3cub3BlbmVyKXtpZihlPWV8fHdpbmRvdy5sb2NhdGlvbi5ocmVmKXt2YXIgcz1vLlVybFV0aWxpdHkucGFyc2VVcmxGcmFnbWVudChlLG4pO2lmKHMuc3RhdGUpe3ZhciBhPVwicG9wdXBDYWxsYmFja19cIitzLnN0YXRlLHU9d2luZG93Lm9wZW5lclthXTt1PyhpLkxvZy5kZWJ1ZyhcIlBvcHVwV2luZG93Lm5vdGlmeU9wZW5lcjogcGFzc2luZyB1cmwgbWVzc2FnZSB0byBvcGVuZXJcIiksdShlLHIpKTppLkxvZy53YXJuKFwiUG9wdXBXaW5kb3cubm90aWZ5T3BlbmVyOiBubyBtYXRjaGluZyBjYWxsYmFjayBmb3VuZCBvbiBvcGVuZXJcIil9ZWxzZSBpLkxvZy53YXJuKFwiUG9wdXBXaW5kb3cubm90aWZ5T3BlbmVyOiBubyBzdGF0ZSBmb3VuZCBpbiByZXNwb25zZSB1cmxcIil9fWVsc2UgaS5Mb2cud2FybihcIlBvcHVwV2luZG93Lm5vdGlmeU9wZW5lcjogbm8gd2luZG93Lm9wZW5lci4gQ2FuJ3QgY29tcGxldGUgbm90aWZpY2F0aW9uLlwiKX0sbih0LFt7a2V5OlwicHJvbWlzZVwiLGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX3Byb21pc2V9fV0pLHR9KCl9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLklGcmFtZU5hdmlnYXRvcj12b2lkIDA7dmFyIG49cigwKSxpPXIoNDQpO2UuSUZyYW1lTmF2aWdhdG9yPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpeyFmdW5jdGlvbiBlKHQscil7aWYoISh0IGluc3RhbmNlb2YgcikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX0odGhpcyx0KX1yZXR1cm4gdC5wcm90b3R5cGUucHJlcGFyZT1mdW5jdGlvbiB0KGUpe3ZhciByPW5ldyBpLklGcmFtZVdpbmRvdyhlKTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHIpfSx0LnByb3RvdHlwZS5jYWxsYmFjaz1mdW5jdGlvbiB0KGUpe24uTG9nLmRlYnVnKFwiSUZyYW1lTmF2aWdhdG9yLmNhbGxiYWNrXCIpO3RyeXtyZXR1cm4gaS5JRnJhbWVXaW5kb3cubm90aWZ5UGFyZW50KGUpLFByb21pc2UucmVzb2x2ZSgpfWNhdGNoKHQpe3JldHVybiBQcm9taXNlLnJlamVjdCh0KX19LHR9KCl9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLklGcmFtZVdpbmRvdz12b2lkIDA7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBuPWVbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSxyLG4pe3JldHVybiByJiZ0KGUucHJvdG90eXBlLHIpLG4mJnQoZSxuKSxlfX0oKSxpPXIoMCk7ZS5JRnJhbWVXaW5kb3c9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3ZhciByPXRoaXM7IWZ1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLHQpLHRoaXMuX3Byb21pc2U9bmV3IFByb21pc2UoKGZ1bmN0aW9uKHQsZSl7ci5fcmVzb2x2ZT10LHIuX3JlamVjdD1lfSkpLHRoaXMuX2JvdW5kTWVzc2FnZUV2ZW50PXRoaXMuX21lc3NhZ2UuYmluZCh0aGlzKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIix0aGlzLl9ib3VuZE1lc3NhZ2VFdmVudCwhMSksdGhpcy5fZnJhbWU9d2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIiksdGhpcy5fZnJhbWUuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiLHRoaXMuX2ZyYW1lLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIix0aGlzLl9mcmFtZS53aWR0aD0wLHRoaXMuX2ZyYW1lLmhlaWdodD0wLHdpbmRvdy5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuX2ZyYW1lKX1yZXR1cm4gdC5wcm90b3R5cGUubmF2aWdhdGU9ZnVuY3Rpb24gdChlKXtpZihlJiZlLnVybCl7dmFyIHI9ZS5zaWxlbnRSZXF1ZXN0VGltZW91dHx8MWU0O2kuTG9nLmRlYnVnKFwiSUZyYW1lV2luZG93Lm5hdmlnYXRlOiBVc2luZyB0aW1lb3V0IG9mOlwiLHIpLHRoaXMuX3RpbWVyPXdpbmRvdy5zZXRUaW1lb3V0KHRoaXMuX3RpbWVvdXQuYmluZCh0aGlzKSxyKSx0aGlzLl9mcmFtZS5zcmM9ZS51cmx9ZWxzZSB0aGlzLl9lcnJvcihcIk5vIHVybCBwcm92aWRlZFwiKTtyZXR1cm4gdGhpcy5wcm9taXNlfSx0LnByb3RvdHlwZS5fc3VjY2Vzcz1mdW5jdGlvbiB0KGUpe3RoaXMuX2NsZWFudXAoKSxpLkxvZy5kZWJ1ZyhcIklGcmFtZVdpbmRvdzogU3VjY2Vzc2Z1bCByZXNwb25zZSBmcm9tIGZyYW1lIHdpbmRvd1wiKSx0aGlzLl9yZXNvbHZlKGUpfSx0LnByb3RvdHlwZS5fZXJyb3I9ZnVuY3Rpb24gdChlKXt0aGlzLl9jbGVhbnVwKCksaS5Mb2cuZXJyb3IoZSksdGhpcy5fcmVqZWN0KG5ldyBFcnJvcihlKSl9LHQucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uIHQoKXt0aGlzLl9jbGVhbnVwKCl9LHQucHJvdG90eXBlLl9jbGVhbnVwPWZ1bmN0aW9uIHQoKXt0aGlzLl9mcmFtZSYmKGkuTG9nLmRlYnVnKFwiSUZyYW1lV2luZG93OiBjbGVhbnVwXCIpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLHRoaXMuX2JvdW5kTWVzc2FnZUV2ZW50LCExKSx3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKSx3aW5kb3cuZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLl9mcmFtZSksdGhpcy5fdGltZXI9bnVsbCx0aGlzLl9mcmFtZT1udWxsLHRoaXMuX2JvdW5kTWVzc2FnZUV2ZW50PW51bGwpfSx0LnByb3RvdHlwZS5fdGltZW91dD1mdW5jdGlvbiB0KCl7aS5Mb2cuZGVidWcoXCJJRnJhbWVXaW5kb3cudGltZW91dFwiKSx0aGlzLl9lcnJvcihcIkZyYW1lIHdpbmRvdyB0aW1lZCBvdXRcIil9LHQucHJvdG90eXBlLl9tZXNzYWdlPWZ1bmN0aW9uIHQoZSl7aWYoaS5Mb2cuZGVidWcoXCJJRnJhbWVXaW5kb3cubWVzc2FnZVwiKSx0aGlzLl90aW1lciYmZS5vcmlnaW49PT10aGlzLl9vcmlnaW4mJmUuc291cmNlPT09dGhpcy5fZnJhbWUuY29udGVudFdpbmRvdyYmXCJzdHJpbmdcIj09dHlwZW9mIGUuZGF0YSYmKGUuZGF0YS5zdGFydHNXaXRoKFwiaHR0cDovL1wiKXx8ZS5kYXRhLnN0YXJ0c1dpdGgoXCJodHRwczovL1wiKSkpe3ZhciByPWUuZGF0YTtyP3RoaXMuX3N1Y2Nlc3Moe3VybDpyfSk6dGhpcy5fZXJyb3IoXCJJbnZhbGlkIHJlc3BvbnNlIGZyb20gZnJhbWVcIil9fSx0Lm5vdGlmeVBhcmVudD1mdW5jdGlvbiB0KGUpe2kuTG9nLmRlYnVnKFwiSUZyYW1lV2luZG93Lm5vdGlmeVBhcmVudFwiKSwoZT1lfHx3aW5kb3cubG9jYXRpb24uaHJlZikmJihpLkxvZy5kZWJ1ZyhcIklGcmFtZVdpbmRvdy5ub3RpZnlQYXJlbnQ6IHBvc3RpbmcgdXJsIG1lc3NhZ2UgdG8gcGFyZW50XCIpLHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UoZSxsb2NhdGlvbi5wcm90b2NvbCtcIi8vXCIrbG9jYXRpb24uaG9zdCkpfSxuKHQsW3trZXk6XCJwcm9taXNlXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fcHJvbWlzZX19LHtrZXk6XCJfb3JpZ2luXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gbG9jYXRpb24ucHJvdG9jb2wrXCIvL1wiK2xvY2F0aW9uLmhvc3R9fV0pLHR9KCl9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLlVzZXJNYW5hZ2VyRXZlbnRzPXZvaWQgMDt2YXIgbj1yKDApLGk9cigxNiksbz1yKDE3KTtlLlVzZXJNYW5hZ2VyRXZlbnRzPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUocil7IWZ1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLGUpO3ZhciBpPWZ1bmN0aW9uIHModCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX0odGhpcyx0LmNhbGwodGhpcyxyKSk7cmV0dXJuIGkuX3VzZXJMb2FkZWQ9bmV3IG8uRXZlbnQoXCJVc2VyIGxvYWRlZFwiKSxpLl91c2VyVW5sb2FkZWQ9bmV3IG8uRXZlbnQoXCJVc2VyIHVubG9hZGVkXCIpLGkuX3NpbGVudFJlbmV3RXJyb3I9bmV3IG8uRXZlbnQoXCJTaWxlbnQgcmVuZXcgZXJyb3JcIiksaS5fdXNlclNpZ25lZEluPW5ldyBvLkV2ZW50KFwiVXNlciBzaWduZWQgaW5cIiksaS5fdXNlclNpZ25lZE91dD1uZXcgby5FdmVudChcIlVzZXIgc2lnbmVkIG91dFwiKSxpLl91c2VyU2Vzc2lvbkNoYW5nZWQ9bmV3IG8uRXZlbnQoXCJVc2VyIHNlc3Npb24gY2hhbmdlZFwiKSxpfXJldHVybiBmdW5jdGlvbiByKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9KGUsdCksZS5wcm90b3R5cGUubG9hZD1mdW5jdGlvbiBlKHIpe3ZhciBpPSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV07bi5Mb2cuZGVidWcoXCJVc2VyTWFuYWdlckV2ZW50cy5sb2FkXCIpLHQucHJvdG90eXBlLmxvYWQuY2FsbCh0aGlzLHIpLGkmJnRoaXMuX3VzZXJMb2FkZWQucmFpc2Uocil9LGUucHJvdG90eXBlLnVubG9hZD1mdW5jdGlvbiBlKCl7bi5Mb2cuZGVidWcoXCJVc2VyTWFuYWdlckV2ZW50cy51bmxvYWRcIiksdC5wcm90b3R5cGUudW5sb2FkLmNhbGwodGhpcyksdGhpcy5fdXNlclVubG9hZGVkLnJhaXNlKCl9LGUucHJvdG90eXBlLmFkZFVzZXJMb2FkZWQ9ZnVuY3Rpb24gdChlKXt0aGlzLl91c2VyTG9hZGVkLmFkZEhhbmRsZXIoZSl9LGUucHJvdG90eXBlLnJlbW92ZVVzZXJMb2FkZWQ9ZnVuY3Rpb24gdChlKXt0aGlzLl91c2VyTG9hZGVkLnJlbW92ZUhhbmRsZXIoZSl9LGUucHJvdG90eXBlLmFkZFVzZXJVbmxvYWRlZD1mdW5jdGlvbiB0KGUpe3RoaXMuX3VzZXJVbmxvYWRlZC5hZGRIYW5kbGVyKGUpfSxlLnByb3RvdHlwZS5yZW1vdmVVc2VyVW5sb2FkZWQ9ZnVuY3Rpb24gdChlKXt0aGlzLl91c2VyVW5sb2FkZWQucmVtb3ZlSGFuZGxlcihlKX0sZS5wcm90b3R5cGUuYWRkU2lsZW50UmVuZXdFcnJvcj1mdW5jdGlvbiB0KGUpe3RoaXMuX3NpbGVudFJlbmV3RXJyb3IuYWRkSGFuZGxlcihlKX0sZS5wcm90b3R5cGUucmVtb3ZlU2lsZW50UmVuZXdFcnJvcj1mdW5jdGlvbiB0KGUpe3RoaXMuX3NpbGVudFJlbmV3RXJyb3IucmVtb3ZlSGFuZGxlcihlKX0sZS5wcm90b3R5cGUuX3JhaXNlU2lsZW50UmVuZXdFcnJvcj1mdW5jdGlvbiB0KGUpe24uTG9nLmRlYnVnKFwiVXNlck1hbmFnZXJFdmVudHMuX3JhaXNlU2lsZW50UmVuZXdFcnJvclwiLGUubWVzc2FnZSksdGhpcy5fc2lsZW50UmVuZXdFcnJvci5yYWlzZShlKX0sZS5wcm90b3R5cGUuYWRkVXNlclNpZ25lZEluPWZ1bmN0aW9uIHQoZSl7dGhpcy5fdXNlclNpZ25lZEluLmFkZEhhbmRsZXIoZSl9LGUucHJvdG90eXBlLnJlbW92ZVVzZXJTaWduZWRJbj1mdW5jdGlvbiB0KGUpe3RoaXMuX3VzZXJTaWduZWRJbi5yZW1vdmVIYW5kbGVyKGUpfSxlLnByb3RvdHlwZS5fcmFpc2VVc2VyU2lnbmVkSW49ZnVuY3Rpb24gdCgpe24uTG9nLmRlYnVnKFwiVXNlck1hbmFnZXJFdmVudHMuX3JhaXNlVXNlclNpZ25lZEluXCIpLHRoaXMuX3VzZXJTaWduZWRJbi5yYWlzZSgpfSxlLnByb3RvdHlwZS5hZGRVc2VyU2lnbmVkT3V0PWZ1bmN0aW9uIHQoZSl7dGhpcy5fdXNlclNpZ25lZE91dC5hZGRIYW5kbGVyKGUpfSxlLnByb3RvdHlwZS5yZW1vdmVVc2VyU2lnbmVkT3V0PWZ1bmN0aW9uIHQoZSl7dGhpcy5fdXNlclNpZ25lZE91dC5yZW1vdmVIYW5kbGVyKGUpfSxlLnByb3RvdHlwZS5fcmFpc2VVc2VyU2lnbmVkT3V0PWZ1bmN0aW9uIHQoKXtuLkxvZy5kZWJ1ZyhcIlVzZXJNYW5hZ2VyRXZlbnRzLl9yYWlzZVVzZXJTaWduZWRPdXRcIiksdGhpcy5fdXNlclNpZ25lZE91dC5yYWlzZSgpfSxlLnByb3RvdHlwZS5hZGRVc2VyU2Vzc2lvbkNoYW5nZWQ9ZnVuY3Rpb24gdChlKXt0aGlzLl91c2VyU2Vzc2lvbkNoYW5nZWQuYWRkSGFuZGxlcihlKX0sZS5wcm90b3R5cGUucmVtb3ZlVXNlclNlc3Npb25DaGFuZ2VkPWZ1bmN0aW9uIHQoZSl7dGhpcy5fdXNlclNlc3Npb25DaGFuZ2VkLnJlbW92ZUhhbmRsZXIoZSl9LGUucHJvdG90eXBlLl9yYWlzZVVzZXJTZXNzaW9uQ2hhbmdlZD1mdW5jdGlvbiB0KCl7bi5Mb2cuZGVidWcoXCJVc2VyTWFuYWdlckV2ZW50cy5fcmFpc2VVc2VyU2Vzc2lvbkNoYW5nZWRcIiksdGhpcy5fdXNlclNlc3Npb25DaGFuZ2VkLnJhaXNlKCl9LGV9KGkuQWNjZXNzVG9rZW5FdmVudHMpfSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5UaW1lcj12b2lkIDA7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBuPWVbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSxyLG4pe3JldHVybiByJiZ0KGUucHJvdG90eXBlLHIpLG4mJnQoZSxuKSxlfX0oKSxpPXIoMCksbz1yKDEpLHM9cigxNyk7ZnVuY3Rpb24gYSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gdSh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWUuVGltZXI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShyKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06by5HbG9iYWwudGltZXIsaT1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06dm9pZCAwO2EodGhpcyxlKTt2YXIgcz11KHRoaXMsdC5jYWxsKHRoaXMscikpO3JldHVybiBzLl90aW1lcj1uLHMuX25vd0Z1bmM9aXx8ZnVuY3Rpb24oKXtyZXR1cm4gRGF0ZS5ub3coKS8xZTN9LHN9cmV0dXJuIGZ1bmN0aW9uIHIodCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX0oZSx0KSxlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uIHQoZSl7ZTw9MCYmKGU9MSksZT1wYXJzZUludChlKTt2YXIgcj10aGlzLm5vdytlO2lmKHRoaXMuZXhwaXJhdGlvbj09PXImJnRoaXMuX3RpbWVySGFuZGxlKWkuTG9nLmRlYnVnKFwiVGltZXIuaW5pdCB0aW1lciBcIit0aGlzLl9uYW1lK1wiIHNraXBwaW5nIGluaXRpYWxpemF0aW9uIHNpbmNlIGFscmVhZHkgaW5pdGlhbGl6ZWQgZm9yIGV4cGlyYXRpb246XCIsdGhpcy5leHBpcmF0aW9uKTtlbHNle3RoaXMuY2FuY2VsKCksaS5Mb2cuZGVidWcoXCJUaW1lci5pbml0IHRpbWVyIFwiK3RoaXMuX25hbWUrXCIgZm9yIGR1cmF0aW9uOlwiLGUpLHRoaXMuX2V4cGlyYXRpb249cjt2YXIgbj01O2U8biYmKG49ZSksdGhpcy5fdGltZXJIYW5kbGU9dGhpcy5fdGltZXIuc2V0SW50ZXJ2YWwodGhpcy5fY2FsbGJhY2suYmluZCh0aGlzKSwxZTMqbil9fSxlLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24gdCgpe3RoaXMuX3RpbWVySGFuZGxlJiYoaS5Mb2cuZGVidWcoXCJUaW1lci5jYW5jZWw6IFwiLHRoaXMuX25hbWUpLHRoaXMuX3RpbWVyLmNsZWFySW50ZXJ2YWwodGhpcy5fdGltZXJIYW5kbGUpLHRoaXMuX3RpbWVySGFuZGxlPW51bGwpfSxlLnByb3RvdHlwZS5fY2FsbGJhY2s9ZnVuY3Rpb24gZSgpe3ZhciByPXRoaXMuX2V4cGlyYXRpb24tdGhpcy5ub3c7aS5Mb2cuZGVidWcoXCJUaW1lci5jYWxsYmFjazsgXCIrdGhpcy5fbmFtZStcIiB0aW1lciBleHBpcmVzIGluOlwiLHIpLHRoaXMuX2V4cGlyYXRpb248PXRoaXMubm93JiYodGhpcy5jYW5jZWwoKSx0LnByb3RvdHlwZS5yYWlzZS5jYWxsKHRoaXMpKX0sbihlLFt7a2V5Olwibm93XCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gcGFyc2VJbnQodGhpcy5fbm93RnVuYygpKX19LHtrZXk6XCJleHBpcmF0aW9uXCIsZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fZXhwaXJhdGlvbn19XSksZX0ocy5FdmVudCl9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLlNpbGVudFJlbmV3U2VydmljZT12b2lkIDA7dmFyIG49cigwKTtlLlNpbGVudFJlbmV3U2VydmljZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7IWZ1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLHQpLHRoaXMuX3VzZXJNYW5hZ2VyPWV9cmV0dXJuIHQucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uIHQoKXt0aGlzLl9jYWxsYmFja3x8KHRoaXMuX2NhbGxiYWNrPXRoaXMuX3Rva2VuRXhwaXJpbmcuYmluZCh0aGlzKSx0aGlzLl91c2VyTWFuYWdlci5ldmVudHMuYWRkQWNjZXNzVG9rZW5FeHBpcmluZyh0aGlzLl9jYWxsYmFjayksdGhpcy5fdXNlck1hbmFnZXIuZ2V0VXNlcigpLnRoZW4oKGZ1bmN0aW9uKHQpe30pKS5jYXRjaCgoZnVuY3Rpb24odCl7bi5Mb2cuZXJyb3IoXCJTaWxlbnRSZW5ld1NlcnZpY2Uuc3RhcnQ6IEVycm9yIGZyb20gZ2V0VXNlcjpcIix0Lm1lc3NhZ2UpfSkpKX0sdC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbiB0KCl7dGhpcy5fY2FsbGJhY2smJih0aGlzLl91c2VyTWFuYWdlci5ldmVudHMucmVtb3ZlQWNjZXNzVG9rZW5FeHBpcmluZyh0aGlzLl9jYWxsYmFjayksZGVsZXRlIHRoaXMuX2NhbGxiYWNrKX0sdC5wcm90b3R5cGUuX3Rva2VuRXhwaXJpbmc9ZnVuY3Rpb24gdCgpe3ZhciBlPXRoaXM7dGhpcy5fdXNlck1hbmFnZXIuc2lnbmluU2lsZW50KCkudGhlbigoZnVuY3Rpb24odCl7bi5Mb2cuZGVidWcoXCJTaWxlbnRSZW5ld1NlcnZpY2UuX3Rva2VuRXhwaXJpbmc6IFNpbGVudCB0b2tlbiByZW5ld2FsIHN1Y2Nlc3NmdWxcIil9KSwoZnVuY3Rpb24odCl7bi5Mb2cuZXJyb3IoXCJTaWxlbnRSZW5ld1NlcnZpY2UuX3Rva2VuRXhwaXJpbmc6IEVycm9yIGZyb20gc2lnbmluU2lsZW50OlwiLHQubWVzc2FnZSksZS5fdXNlck1hbmFnZXIuZXZlbnRzLl9yYWlzZVNpbGVudFJlbmV3RXJyb3IodCl9KSl9LHR9KCl9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLkNvcmRvdmFQb3B1cE5hdmlnYXRvcj12b2lkIDA7dmFyIG49cigyMSk7ZS5Db3Jkb3ZhUG9wdXBOYXZpZ2F0b3I9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7IWZ1bmN0aW9uIGUodCxyKXtpZighKHQgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLHQpfXJldHVybiB0LnByb3RvdHlwZS5wcmVwYXJlPWZ1bmN0aW9uIHQoZSl7dmFyIHI9bmV3IG4uQ29yZG92YVBvcHVwV2luZG93KGUpO3JldHVybiBQcm9taXNlLnJlc29sdmUocil9LHR9KCl9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLkNvcmRvdmFJRnJhbWVOYXZpZ2F0b3I9dm9pZCAwO3ZhciBuPXIoMjEpO2UuQ29yZG92YUlGcmFtZU5hdmlnYXRvcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXshZnVuY3Rpb24gZSh0LHIpe2lmKCEodCBpbnN0YW5jZW9mIHIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9KHRoaXMsdCl9cmV0dXJuIHQucHJvdG90eXBlLnByZXBhcmU9ZnVuY3Rpb24gdChlKXtlLnBvcHVwV2luZG93RmVhdHVyZXM9XCJoaWRkZW49eWVzXCI7dmFyIHI9bmV3IG4uQ29yZG92YVBvcHVwV2luZG93KGUpO3JldHVybiBQcm9taXNlLnJlc29sdmUocil9LHR9KCl9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtlLlZlcnNpb249XCIxLjExLjZcIn1dKX0pKTsiLCJpbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdldmVudHMnO1xuaW1wb3J0IHsgZmV0Y2gsIEhlYWRlcnMgfSBmcm9tICdAaW5ydXB0L3VuaXZlcnNhbC1mZXRjaCc7XG5pbXBvcnQgeyBqd3RWZXJpZnksIGltcG9ydEpXSywgZXhwb3J0SldLLCBTaWduSldULCBnZW5lcmF0ZUtleVBhaXIgfSBmcm9tICdqb3NlJztcbmltcG9ydCB7IHY0IH0gZnJvbSAndXVpZCc7XG5cbmNvbnN0IFNPTElEX0NMSUVOVF9BVVRITl9LRVlfUFJFRklYID0gXCJzb2xpZENsaWVudEF1dGhuOlwiO1xuY29uc3QgUFJFRkVSUkVEX1NJR05JTkdfQUxHID0gW1wiRVMyNTZcIiwgXCJSUzI1NlwiXTtcbmNvbnN0IEVWRU5UUyA9IHtcbiAgICBFUlJPUjogXCJlcnJvclwiLFxuICAgIExPR0lOOiBcImxvZ2luXCIsXG4gICAgTE9HT1VUOiBcImxvZ291dFwiLFxuICAgIE5FV19SRUZSRVNIX1RPS0VOOiBcIm5ld1JlZnJlc2hUb2tlblwiLFxuICAgIFNFU1NJT05fRVhQSVJFRDogXCJzZXNzaW9uRXhwaXJlZFwiLFxuICAgIFNFU1NJT05fRVhURU5ERUQ6IFwic2Vzc2lvbkV4dGVuZGVkXCIsXG4gICAgU0VTU0lPTl9SRVNUT1JFRDogXCJzZXNzaW9uUmVzdG9yZVwiLFxuICAgIFRJTUVPVVRfU0VUOiBcInRpbWVvdXRTZXRcIixcbn07XG5jb25zdCBSRUZSRVNIX0JFRk9SRV9FWFBJUkFUSU9OX1NFQ09ORFMgPSA1O1xuY29uc3QgU0NPUEVfT1BFTklEID0gXCJvcGVuaWRcIjtcbmNvbnN0IFNDT1BFX09GRkxJTkUgPSBcIm9mZmxpbmVfYWNjZXNzXCI7XG5jb25zdCBTQ09QRV9XRUJJRCA9IFwid2ViaWRcIjtcbmNvbnN0IERFRkFVTFRfU0NPUEVTID0gW1NDT1BFX09QRU5JRCwgU0NPUEVfT0ZGTElORSwgU0NPUEVfV0VCSURdLmpvaW4oXCIgXCIpO1xuXG5jb25zdCBidWlsZFByb3h5SGFuZGxlciA9ICh0b0V4Y2x1ZGUsIGVycm9yTWVzc2FnZSkgPT4gKHtcbiAgICBnZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikge1xuICAgICAgICBpZiAoIU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKEV2ZW50RW1pdHRlcikuaW5jbHVkZXMocHJvcCkgJiZcbiAgICAgICAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRvRXhjbHVkZSkuaW5jbHVkZXMocHJvcCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtlcnJvck1lc3NhZ2V9OiBbJHtwcm9wfV0gaXMgbm90IHN1cHBvcnRlZGApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKTtcbiAgICB9LFxufSk7XG5cbmNsYXNzIEFnZ3JlZ2F0ZUhhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKGhhbmRsZWFibGVzKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlYWJsZXMgPSBoYW5kbGVhYmxlcztcbiAgICB9XG4gICAgYXN5bmMgZ2V0UHJvcGVySGFuZGxlcihwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY2FuSGFuZGxlTGlzdCA9IGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlYWJsZXMubWFwKChoYW5kbGVhYmxlKSA9PiBoYW5kbGVhYmxlLmNhbkhhbmRsZSguLi5wYXJhbXMpKSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FuSGFuZGxlTGlzdC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgaWYgKGNhbkhhbmRsZUxpc3RbaV0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVhYmxlc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgYXN5bmMgY2FuSGFuZGxlKC4uLnBhcmFtcykge1xuICAgICAgICByZXR1cm4gKGF3YWl0IHRoaXMuZ2V0UHJvcGVySGFuZGxlcihwYXJhbXMpKSAhPT0gbnVsbDtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlKC4uLnBhcmFtcykge1xuICAgICAgICBjb25zdCBoYW5kbGVyID0gYXdhaXQgdGhpcy5nZXRQcm9wZXJIYW5kbGVyKHBhcmFtcyk7XG4gICAgICAgIGlmIChoYW5kbGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlci5oYW5kbGUoLi4ucGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFske3RoaXMuY29uc3RydWN0b3IubmFtZX1dIGNhbm5vdCBmaW5kIGEgc3VpdGFibGUgaGFuZGxlciBmb3I6ICR7cGFyYW1zXG4gICAgICAgICAgICAubWFwKChwYXJhbSkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocGFyYW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbS50b1N0cmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1gKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGZldGNoSndrcyhqd2tzSXJpLCBpc3N1ZXJJcmkpIHtcbiAgICBjb25zdCBqd2tzUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChqd2tzSXJpKTtcbiAgICBpZiAoandrc1Jlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZldGNoIEpXS1MgZm9yIFske2lzc3VlcklyaX1dIGF0IFske2p3a3NJcml9XTogJHtqd2tzUmVzcG9uc2Uuc3RhdHVzfSAke2p3a3NSZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgIH1cbiAgICBsZXQgandrO1xuICAgIHRyeSB7XG4gICAgICAgIGp3ayA9IChhd2FpdCBqd2tzUmVzcG9uc2UuanNvbigpKS5rZXlzWzBdO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1hbGZvcm1lZCBKV0tTIGZvciBbJHtpc3N1ZXJJcml9XSBhdCBbJHtqd2tzSXJpfV06ICR7ZS5tZXNzYWdlfWApO1xuICAgIH1cbiAgICByZXR1cm4gandrO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0V2ViaWRGcm9tVG9rZW5QYXlsb2FkKGlkVG9rZW4sIGp3a3NJcmksIGlzc3VlcklyaSwgY2xpZW50SWQpIHtcbiAgICBjb25zdCBqd2sgPSBhd2FpdCBmZXRjaEp3a3Moandrc0lyaSwgaXNzdWVySXJpKTtcbiAgICBsZXQgcGF5bG9hZDtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB7IHBheWxvYWQ6IHZlcmlmaWVkUGF5bG9hZCB9ID0gYXdhaXQgand0VmVyaWZ5KGlkVG9rZW4sIGF3YWl0IGltcG9ydEpXSyhqd2spLCB7XG4gICAgICAgICAgICBpc3N1ZXI6IGlzc3VlcklyaSxcbiAgICAgICAgICAgIGF1ZGllbmNlOiBjbGllbnRJZCxcbiAgICAgICAgfSk7XG4gICAgICAgIHBheWxvYWQgPSB2ZXJpZmllZFBheWxvYWQ7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVG9rZW4gdmVyaWZpY2F0aW9uIGZhaWxlZDogJHtlLnN0YWNrfWApO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHBheWxvYWQud2ViaWQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHBheWxvYWQud2ViaWQ7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcGF5bG9hZC5zdWIgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgdG9rZW4gJHtKU09OLnN0cmluZ2lmeShwYXlsb2FkKX0gaXMgaW52YWxpZDogaXQgaGFzIG5vICd3ZWJpZCcgY2xhaW0gYW5kIG5vICdzdWInIGNsYWltLmApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBuZXcgVVJMKHBheWxvYWQuc3ViKTtcbiAgICAgICAgcmV0dXJuIHBheWxvYWQuc3ViO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSB0b2tlbiBoYXMgbm8gJ3dlYmlkJyBjbGFpbSwgYW5kIGl0cyAnc3ViJyBjbGFpbSBvZiBbJHtwYXlsb2FkLnN1Yn1dIGlzIGludmFsaWQgYXMgYSBVUkwgLSBlcnJvciBbJHtlfV0uYCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc1ZhbGlkUmVkaXJlY3RVcmwocmVkaXJlY3RVcmwpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB1cmxPYmplY3QgPSBuZXcgVVJMKHJlZGlyZWN0VXJsKTtcbiAgICAgICAgcmV0dXJuIHVybE9iamVjdC5oYXNoID09PSBcIlwiO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc1N1cHBvcnRlZFRva2VuVHlwZSh0b2tlbikge1xuICAgIHJldHVybiB0eXBlb2YgdG9rZW4gPT09IFwic3RyaW5nXCIgJiYgW1wiRFBvUFwiLCBcIkJlYXJlclwiXS5pbmNsdWRlcyh0b2tlbik7XG59XG5cbmNvbnN0IFVTRVJfU0VTU0lPTl9QUkVGSVggPSBcInNvbGlkQ2xpZW50QXV0aGVudGljYXRpb25Vc2VyXCI7XG5cbmZ1bmN0aW9uIGlzVmFsaWRVcmwodXJsKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgbmV3IFVSTCh1cmwpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY2F0Y2ggKF9hKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiBkZXRlcm1pbmVTaWduaW5nQWxnKHN1cHBvcnRlZCwgcHJlZmVycmVkKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoKF9hID0gcHJlZmVycmVkLmZpbmQoKHNpZ25pbmdBbGcpID0+IHtcbiAgICAgICAgcmV0dXJuIHN1cHBvcnRlZC5pbmNsdWRlcyhzaWduaW5nQWxnKTtcbiAgICB9KSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbnVsbCk7XG59XG5mdW5jdGlvbiBkZXRlcm1pbmVDbGllbnRUeXBlKG9wdGlvbnMsIGlzc3VlckNvbmZpZykge1xuICAgIGlmIChvcHRpb25zLmNsaWVudElkICE9PSB1bmRlZmluZWQgJiYgIWlzVmFsaWRVcmwob3B0aW9ucy5jbGllbnRJZCkpIHtcbiAgICAgICAgcmV0dXJuIFwic3RhdGljXCI7XG4gICAgfVxuICAgIGlmIChpc3N1ZXJDb25maWcuc2NvcGVzU3VwcG9ydGVkLmluY2x1ZGVzKFwid2ViaWRcIikgJiZcbiAgICAgICAgb3B0aW9ucy5jbGllbnRJZCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgIGlzVmFsaWRVcmwob3B0aW9ucy5jbGllbnRJZCkpIHtcbiAgICAgICAgcmV0dXJuIFwic29saWQtb2lkY1wiO1xuICAgIH1cbiAgICByZXR1cm4gXCJkeW5hbWljXCI7XG59XG5hc3luYyBmdW5jdGlvbiBoYW5kbGVSZWdpc3RyYXRpb24ob3B0aW9ucywgaXNzdWVyQ29uZmlnLCBzdG9yYWdlVXRpbGl0eSwgY2xpZW50UmVnaXN0cmFyKSB7XG4gICAgY29uc3QgY2xpZW50VHlwZSA9IGRldGVybWluZUNsaWVudFR5cGUob3B0aW9ucywgaXNzdWVyQ29uZmlnKTtcbiAgICBpZiAoY2xpZW50VHlwZSA9PT0gXCJkeW5hbWljXCIpIHtcbiAgICAgICAgcmV0dXJuIGNsaWVudFJlZ2lzdHJhci5nZXRDbGllbnQoe1xuICAgICAgICAgICAgc2Vzc2lvbklkOiBvcHRpb25zLnNlc3Npb25JZCxcbiAgICAgICAgICAgIGNsaWVudE5hbWU6IG9wdGlvbnMuY2xpZW50TmFtZSxcbiAgICAgICAgICAgIHJlZGlyZWN0VXJsOiBvcHRpb25zLnJlZGlyZWN0VXJsLFxuICAgICAgICB9LCBpc3N1ZXJDb25maWcpO1xuICAgIH1cbiAgICBhd2FpdCBzdG9yYWdlVXRpbGl0eS5zZXRGb3JVc2VyKG9wdGlvbnMuc2Vzc2lvbklkLCB7XG4gICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgIH0pO1xuICAgIGlmIChvcHRpb25zLmNsaWVudFNlY3JldCkge1xuICAgICAgICBhd2FpdCBzdG9yYWdlVXRpbGl0eS5zZXRGb3JVc2VyKG9wdGlvbnMuc2Vzc2lvbklkLCB7XG4gICAgICAgICAgICBjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuY2xpZW50TmFtZSkge1xuICAgICAgICBhd2FpdCBzdG9yYWdlVXRpbGl0eS5zZXRGb3JVc2VyKG9wdGlvbnMuc2Vzc2lvbklkLCB7XG4gICAgICAgICAgICBjbGllbnROYW1lOiBvcHRpb25zLmNsaWVudE5hbWUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgY2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldCxcbiAgICAgICAgY2xpZW50TmFtZTogb3B0aW9ucy5jbGllbnROYW1lLFxuICAgICAgICBjbGllbnRUeXBlLFxuICAgIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFNlc3Npb25JZEZyb21PYXV0aFN0YXRlKHN0b3JhZ2VVdGlsaXR5LCBvYXV0aFN0YXRlKSB7XG4gICAgcmV0dXJuIHN0b3JhZ2VVdGlsaXR5LmdldEZvclVzZXIob2F1dGhTdGF0ZSwgXCJzZXNzaW9uSWRcIik7XG59XG5hc3luYyBmdW5jdGlvbiBsb2FkT2lkY0NvbnRleHRGcm9tU3RvcmFnZShzZXNzaW9uSWQsIHN0b3JhZ2VVdGlsaXR5LCBjb25maWdGZXRjaGVyKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgW2lzc3VlcklyaSwgY29kZVZlcmlmaWVyLCBzdG9yZWRSZWRpcmVjdElyaSwgZHBvcF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICBzdG9yYWdlVXRpbGl0eS5nZXRGb3JVc2VyKHNlc3Npb25JZCwgXCJpc3N1ZXJcIiwge1xuICAgICAgICAgICAgICAgIGVycm9ySWZOdWxsOiB0cnVlLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBzdG9yYWdlVXRpbGl0eS5nZXRGb3JVc2VyKHNlc3Npb25JZCwgXCJjb2RlVmVyaWZpZXJcIiksXG4gICAgICAgICAgICBzdG9yYWdlVXRpbGl0eS5nZXRGb3JVc2VyKHNlc3Npb25JZCwgXCJyZWRpcmVjdFVybFwiKSxcbiAgICAgICAgICAgIHN0b3JhZ2VVdGlsaXR5LmdldEZvclVzZXIoc2Vzc2lvbklkLCBcImRwb3BcIiwgeyBlcnJvcklmTnVsbDogdHJ1ZSB9KSxcbiAgICAgICAgXSk7XG4gICAgICAgIGF3YWl0IHN0b3JhZ2VVdGlsaXR5LmRlbGV0ZUZvclVzZXIoc2Vzc2lvbklkLCBcImNvZGVWZXJpZmllclwiKTtcbiAgICAgICAgY29uc3QgaXNzdWVyQ29uZmlnID0gYXdhaXQgY29uZmlnRmV0Y2hlci5mZXRjaENvbmZpZyhpc3N1ZXJJcmkpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29kZVZlcmlmaWVyLFxuICAgICAgICAgICAgcmVkaXJlY3RVcmw6IHN0b3JlZFJlZGlyZWN0SXJpLFxuICAgICAgICAgICAgaXNzdWVyQ29uZmlnLFxuICAgICAgICAgICAgZHBvcDogZHBvcCA9PT0gXCJ0cnVlXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHJldHJpZXZlIE9JREMgY29udGV4dCBmcm9tIHN0b3JhZ2UgYXNzb2NpYXRlZCB3aXRoIHNlc3Npb24gWyR7c2Vzc2lvbklkfV06ICR7ZX1gKTtcbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiBzYXZlU2Vzc2lvbkluZm9Ub1N0b3JhZ2Uoc3RvcmFnZVV0aWxpdHksIHNlc3Npb25JZCwgd2ViSWQsIGlzTG9nZ2VkSW4sIHJlZnJlc2hUb2tlbiwgc2VjdXJlLCBkcG9wS2V5KSB7XG4gICAgaWYgKHJlZnJlc2hUb2tlbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGF3YWl0IHN0b3JhZ2VVdGlsaXR5LnNldEZvclVzZXIoc2Vzc2lvbklkLCB7IHJlZnJlc2hUb2tlbiB9LCB7IHNlY3VyZSB9KTtcbiAgICB9XG4gICAgaWYgKHdlYklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYXdhaXQgc3RvcmFnZVV0aWxpdHkuc2V0Rm9yVXNlcihzZXNzaW9uSWQsIHsgd2ViSWQgfSwgeyBzZWN1cmUgfSk7XG4gICAgfVxuICAgIGlmIChpc0xvZ2dlZEluICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYXdhaXQgc3RvcmFnZVV0aWxpdHkuc2V0Rm9yVXNlcihzZXNzaW9uSWQsIHsgaXNMb2dnZWRJbiB9LCB7IHNlY3VyZSB9KTtcbiAgICB9XG4gICAgaWYgKGRwb3BLZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBhd2FpdCBzdG9yYWdlVXRpbGl0eS5zZXRGb3JVc2VyKHNlc3Npb25JZCwge1xuICAgICAgICAgICAgcHVibGljS2V5OiBKU09OLnN0cmluZ2lmeShkcG9wS2V5LnB1YmxpY0tleSksXG4gICAgICAgICAgICBwcml2YXRlS2V5OiBKU09OLnN0cmluZ2lmeShhd2FpdCBleHBvcnRKV0soZHBvcEtleS5wcml2YXRlS2V5KSksXG4gICAgICAgIH0sIHsgc2VjdXJlIH0pO1xuICAgIH1cbn1cbmNsYXNzIFN0b3JhZ2VVdGlsaXR5IHtcbiAgICBjb25zdHJ1Y3RvcihzZWN1cmVTdG9yYWdlLCBpbnNlY3VyZVN0b3JhZ2UpIHtcbiAgICAgICAgdGhpcy5zZWN1cmVTdG9yYWdlID0gc2VjdXJlU3RvcmFnZTtcbiAgICAgICAgdGhpcy5pbnNlY3VyZVN0b3JhZ2UgPSBpbnNlY3VyZVN0b3JhZ2U7XG4gICAgfVxuICAgIGdldEtleSh1c2VySWQpIHtcbiAgICAgICAgcmV0dXJuIGBzb2xpZENsaWVudEF1dGhlbnRpY2F0aW9uVXNlcjoke3VzZXJJZH1gO1xuICAgIH1cbiAgICBhc3luYyBnZXRVc2VyRGF0YSh1c2VySWQsIHNlY3VyZSkge1xuICAgICAgICBjb25zdCBzdG9yZWQgPSBhd2FpdCAoc2VjdXJlXG4gICAgICAgICAgICA/IHRoaXMuc2VjdXJlU3RvcmFnZVxuICAgICAgICAgICAgOiB0aGlzLmluc2VjdXJlU3RvcmFnZSkuZ2V0KHRoaXMuZ2V0S2V5KHVzZXJJZCkpO1xuICAgICAgICBpZiAoc3RvcmVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RvcmVkKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERhdGEgZm9yIHVzZXIgWyR7dXNlcklkfV0gaW4gWyR7c2VjdXJlID8gXCJzZWN1cmVcIiA6IFwidW5zZWN1cmVcIn1dIHN0b3JhZ2UgaXMgY29ycnVwdGVkIC0gZXhwZWN0ZWQgdmFsaWQgSlNPTiwgYnV0IGdvdDogJHtzdG9yZWR9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc2V0VXNlckRhdGEodXNlcklkLCBkYXRhLCBzZWN1cmUpIHtcbiAgICAgICAgYXdhaXQgKHNlY3VyZSA/IHRoaXMuc2VjdXJlU3RvcmFnZSA6IHRoaXMuaW5zZWN1cmVTdG9yYWdlKS5zZXQodGhpcy5nZXRLZXkodXNlcklkKSwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgIH1cbiAgICBhc3luYyBnZXQoa2V5LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgKChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuc2VjdXJlKVxuICAgICAgICAgICAgPyB0aGlzLnNlY3VyZVN0b3JhZ2VcbiAgICAgICAgICAgIDogdGhpcy5pbnNlY3VyZVN0b3JhZ2UpLmdldChrZXkpO1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCAmJiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmVycm9ySWZOdWxsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBbJHtrZXl9XSBpcyBub3Qgc3RvcmVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBhc3luYyBzZXQoa2V5LCB2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gKChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuc2VjdXJlKSA/IHRoaXMuc2VjdXJlU3RvcmFnZSA6IHRoaXMuaW5zZWN1cmVTdG9yYWdlKS5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgfVxuICAgIGFzeW5jIGRlbGV0ZShrZXksIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuICgob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnNlY3VyZSkgPyB0aGlzLnNlY3VyZVN0b3JhZ2UgOiB0aGlzLmluc2VjdXJlU3RvcmFnZSkuZGVsZXRlKGtleSk7XG4gICAgfVxuICAgIGFzeW5jIGdldEZvclVzZXIodXNlcklkLCBrZXksIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgdXNlckRhdGEgPSBhd2FpdCB0aGlzLmdldFVzZXJEYXRhKHVzZXJJZCwgb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnNlY3VyZSk7XG4gICAgICAgIGxldCB2YWx1ZTtcbiAgICAgICAgaWYgKCF1c2VyRGF0YSB8fCAhdXNlckRhdGFba2V5XSkge1xuICAgICAgICAgICAgdmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSB1c2VyRGF0YVtrZXldO1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCAmJiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmVycm9ySWZOdWxsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGaWVsZCBbJHtrZXl9XSBmb3IgdXNlciBbJHt1c2VySWR9XSBpcyBub3Qgc3RvcmVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlIHx8IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgYXN5bmMgc2V0Rm9yVXNlcih1c2VySWQsIHZhbHVlcywgb3B0aW9ucykge1xuICAgICAgICBsZXQgdXNlckRhdGE7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB1c2VyRGF0YSA9IGF3YWl0IHRoaXMuZ2V0VXNlckRhdGEodXNlcklkLCBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuc2VjdXJlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgICAgIHVzZXJEYXRhID0ge307XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5zZXRVc2VyRGF0YSh1c2VySWQsIHsgLi4udXNlckRhdGEsIC4uLnZhbHVlcyB9LCBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuc2VjdXJlKTtcbiAgICB9XG4gICAgYXN5bmMgZGVsZXRlRm9yVXNlcih1c2VySWQsIGtleSwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCB1c2VyRGF0YSA9IGF3YWl0IHRoaXMuZ2V0VXNlckRhdGEodXNlcklkLCBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuc2VjdXJlKTtcbiAgICAgICAgZGVsZXRlIHVzZXJEYXRhW2tleV07XG4gICAgICAgIGF3YWl0IHRoaXMuc2V0VXNlckRhdGEodXNlcklkLCB1c2VyRGF0YSwgb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnNlY3VyZSk7XG4gICAgfVxuICAgIGFzeW5jIGRlbGV0ZUFsbFVzZXJEYXRhKHVzZXJJZCwgb3B0aW9ucykge1xuICAgICAgICBhd2FpdCAoKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5zZWN1cmUpID8gdGhpcy5zZWN1cmVTdG9yYWdlIDogdGhpcy5pbnNlY3VyZVN0b3JhZ2UpLmRlbGV0ZSh0aGlzLmdldEtleSh1c2VySWQpKTtcbiAgICB9XG59XG5cbmNsYXNzIEluTWVtb3J5U3RvcmFnZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubWFwID0ge307XG4gICAgfVxuICAgIGFzeW5jIGdldChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwW2tleV0gfHwgdW5kZWZpbmVkO1xuICAgIH1cbiAgICBhc3luYyBzZXQoa2V5LCB2YWx1ZSkge1xuICAgICAgICB0aGlzLm1hcFtrZXldID0gdmFsdWU7XG4gICAgfVxuICAgIGFzeW5jIGRlbGV0ZShrZXkpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMubWFwW2tleV07XG4gICAgfVxufVxuXG5jbGFzcyBDb25maWd1cmF0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB9XG59XG5cbmNsYXNzIE5vdEltcGxlbWVudGVkRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWV0aG9kTmFtZSkge1xuICAgICAgICBzdXBlcihgWyR7bWV0aG9kTmFtZX1dIGlzIG5vdCBpbXBsZW1lbnRlZGApO1xuICAgIH1cbn1cblxuY2xhc3MgSW52YWxpZFJlc3BvbnNlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWlzc2luZ0ZpZWxkcykge1xuICAgICAgICBzdXBlcihgSW52YWxpZCByZXNwb25zZSBmcm9tIE9JREMgcHJvdmlkZXI6IG1pc3NpbmcgZmllbGRzICR7bWlzc2luZ0ZpZWxkc31gKTtcbiAgICAgICAgdGhpcy5taXNzaW5nRmllbGRzID0gbWlzc2luZ0ZpZWxkcztcbiAgICB9XG59XG5cbmNsYXNzIE9pZGNQcm92aWRlckVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGVycm9yLCBlcnJvckRlc2NyaXB0aW9uKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gICAgICAgIHRoaXMuZXJyb3JEZXNjcmlwdGlvbiA9IGVycm9yRGVzY3JpcHRpb247XG4gICAgfVxufVxuXG5mdW5jdGlvbiBub3JtYWxpemVIVFUoYXVkaWVuY2UpIHtcbiAgICBjb25zdCBhdWRpZW5jZVVybCA9IG5ldyBVUkwoYXVkaWVuY2UpO1xuICAgIHJldHVybiBuZXcgVVJMKGF1ZGllbmNlVXJsLnBhdGhuYW1lLCBhdWRpZW5jZVVybC5vcmlnaW4pLnRvU3RyaW5nKCk7XG59XG5hc3luYyBmdW5jdGlvbiBjcmVhdGVEcG9wSGVhZGVyKGF1ZGllbmNlLCBtZXRob2QsIGRwb3BLZXkpIHtcbiAgICByZXR1cm4gbmV3IFNpZ25KV1Qoe1xuICAgICAgICBodHU6IG5vcm1hbGl6ZUhUVShhdWRpZW5jZSksXG4gICAgICAgIGh0bTogbWV0aG9kLnRvVXBwZXJDYXNlKCksXG4gICAgICAgIGp0aTogdjQoKSxcbiAgICB9KVxuICAgICAgICAuc2V0UHJvdGVjdGVkSGVhZGVyKHtcbiAgICAgICAgYWxnOiBQUkVGRVJSRURfU0lHTklOR19BTEdbMF0sXG4gICAgICAgIGp3azogZHBvcEtleS5wdWJsaWNLZXksXG4gICAgICAgIHR5cDogXCJkcG9wK2p3dFwiLFxuICAgIH0pXG4gICAgICAgIC5zZXRJc3N1ZWRBdCgpXG4gICAgICAgIC5zaWduKGRwb3BLZXkucHJpdmF0ZUtleSwge30pO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVEcG9wS2V5UGFpcigpIHtcbiAgICBjb25zdCB7IHByaXZhdGVLZXksIHB1YmxpY0tleSB9ID0gYXdhaXQgZ2VuZXJhdGVLZXlQYWlyKFBSRUZFUlJFRF9TSUdOSU5HX0FMR1swXSk7XG4gICAgY29uc3QgZHBvcEtleVBhaXIgPSB7XG4gICAgICAgIHByaXZhdGVLZXksXG4gICAgICAgIHB1YmxpY0tleTogYXdhaXQgZXhwb3J0SldLKHB1YmxpY0tleSksXG4gICAgfTtcbiAgICBbZHBvcEtleVBhaXIucHVibGljS2V5LmFsZ10gPSBQUkVGRVJSRURfU0lHTklOR19BTEc7XG4gICAgcmV0dXJuIGRwb3BLZXlQYWlyO1xufVxuXG5jb25zdCBERUZBVUxUX0VYUElSQVRJT05fVElNRV9TRUNPTkRTID0gNjAwO1xuZnVuY3Rpb24gaXNFeHBlY3RlZEF1dGhFcnJvcihzdGF0dXNDb2RlKSB7XG4gICAgcmV0dXJuIFs0MDEsIDQwM10uaW5jbHVkZXMoc3RhdHVzQ29kZSk7XG59XG5hc3luYyBmdW5jdGlvbiBidWlsZERwb3BGZXRjaE9wdGlvbnModGFyZ2V0VXJsLCBhdXRoVG9rZW4sIGRwb3BLZXksIGRlZmF1bHRPcHRpb25zKSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyhkZWZhdWx0T3B0aW9ucyA9PT0gbnVsbCB8fCBkZWZhdWx0T3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGVmYXVsdE9wdGlvbnMuaGVhZGVycyk7XG4gICAgaGVhZGVycy5zZXQoXCJBdXRob3JpemF0aW9uXCIsIGBEUG9QICR7YXV0aFRva2VufWApO1xuICAgIGhlYWRlcnMuc2V0KFwiRFBvUFwiLCBhd2FpdCBjcmVhdGVEcG9wSGVhZGVyKHRhcmdldFVybCwgKF9hID0gZGVmYXVsdE9wdGlvbnMgPT09IG51bGwgfHwgZGVmYXVsdE9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRlZmF1bHRPcHRpb25zLm1ldGhvZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJnZXRcIiwgZHBvcEtleSkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmRlZmF1bHRPcHRpb25zLFxuICAgICAgICBoZWFkZXJzLFxuICAgIH07XG59XG5hc3luYyBmdW5jdGlvbiBidWlsZEF1dGhlbnRpY2F0ZWRIZWFkZXJzKHRhcmdldFVybCwgYXV0aFRva2VuLCBkcG9wS2V5LCBkZWZhdWx0T3B0aW9ucykge1xuICAgIGlmIChkcG9wS2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGJ1aWxkRHBvcEZldGNoT3B0aW9ucyh0YXJnZXRVcmwsIGF1dGhUb2tlbiwgZHBvcEtleSwgZGVmYXVsdE9wdGlvbnMpO1xuICAgIH1cbiAgICBjb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoZGVmYXVsdE9wdGlvbnMgPT09IG51bGwgfHwgZGVmYXVsdE9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRlZmF1bHRPcHRpb25zLmhlYWRlcnMpO1xuICAgIGhlYWRlcnMuc2V0KFwiQXV0aG9yaXphdGlvblwiLCBgQmVhcmVyICR7YXV0aFRva2VufWApO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmRlZmF1bHRPcHRpb25zLFxuICAgICAgICBoZWFkZXJzLFxuICAgIH07XG59XG5hc3luYyBmdW5jdGlvbiBtYWtlQXV0aGVudGljYXRlZFJlcXVlc3QodW5hdXRoRmV0Y2gsIGFjY2Vzc1Rva2VuLCB1cmwsIGRlZmF1bHRSZXF1ZXN0SW5pdCwgZHBvcEtleSkge1xuICAgIHJldHVybiB1bmF1dGhGZXRjaCh1cmwsIGF3YWl0IGJ1aWxkQXV0aGVudGljYXRlZEhlYWRlcnModXJsLnRvU3RyaW5nKCksIGFjY2Vzc1Rva2VuLCBkcG9wS2V5LCBkZWZhdWx0UmVxdWVzdEluaXQpKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHJlZnJlc2hBY2Nlc3NUb2tlbihyZWZyZXNoT3B0aW9ucywgZHBvcEtleSwgZXZlbnRFbWl0dGVyKSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IHRva2VuU2V0ID0gYXdhaXQgcmVmcmVzaE9wdGlvbnMudG9rZW5SZWZyZXNoZXIucmVmcmVzaChyZWZyZXNoT3B0aW9ucy5zZXNzaW9uSWQsIHJlZnJlc2hPcHRpb25zLnJlZnJlc2hUb2tlbiwgZHBvcEtleSk7XG4gICAgZXZlbnRFbWl0dGVyID09PSBudWxsIHx8IGV2ZW50RW1pdHRlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXZlbnRFbWl0dGVyLmVtaXQoRVZFTlRTLlNFU1NJT05fRVhURU5ERUQsIChfYSA9IHRva2VuU2V0LmV4cGlyZXNJbikgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogREVGQVVMVF9FWFBJUkFUSU9OX1RJTUVfU0VDT05EUyk7XG4gICAgaWYgKHR5cGVvZiB0b2tlblNldC5yZWZyZXNoVG9rZW4gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgZXZlbnRFbWl0dGVyID09PSBudWxsIHx8IGV2ZW50RW1pdHRlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXZlbnRFbWl0dGVyLmVtaXQoRVZFTlRTLk5FV19SRUZSRVNIX1RPS0VOLCB0b2tlblNldC5yZWZyZXNoVG9rZW4pO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBhY2Nlc3NUb2tlbjogdG9rZW5TZXQuYWNjZXNzVG9rZW4sXG4gICAgICAgIHJlZnJlc2hUb2tlbjogdG9rZW5TZXQucmVmcmVzaFRva2VuLFxuICAgICAgICBleHBpcmVzSW46IHRva2VuU2V0LmV4cGlyZXNJbixcbiAgICB9O1xufVxuY29uc3QgY29tcHV0ZVJlZnJlc2hEZWxheSA9IChleHBpcmVzSW4pID0+IHtcbiAgICBpZiAoZXhwaXJlc0luICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGV4cGlyZXNJbiAtIFJFRlJFU0hfQkVGT1JFX0VYUElSQVRJT05fU0VDT05EUyA+IDBcbiAgICAgICAgICAgID9cbiAgICAgICAgICAgICAgICBleHBpcmVzSW4gLSBSRUZSRVNIX0JFRk9SRV9FWFBJUkFUSU9OX1NFQ09ORFNcbiAgICAgICAgICAgIDogZXhwaXJlc0luO1xuICAgIH1cbiAgICByZXR1cm4gREVGQVVMVF9FWFBJUkFUSU9OX1RJTUVfU0VDT05EUztcbn07XG5hc3luYyBmdW5jdGlvbiBidWlsZEF1dGhlbnRpY2F0ZWRGZXRjaCh1bmF1dGhGZXRjaCwgYWNjZXNzVG9rZW4sIG9wdGlvbnMpIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IGN1cnJlbnRBY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuO1xuICAgIGxldCBsYXRlc3RUaW1lb3V0O1xuICAgIGNvbnN0IGN1cnJlbnRSZWZyZXNoT3B0aW9ucyA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5yZWZyZXNoT3B0aW9ucztcbiAgICBpZiAoY3VycmVudFJlZnJlc2hPcHRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgcHJvYWN0aXZlbHlSZWZyZXNoVG9rZW4gPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgYWNjZXNzVG9rZW46IHJlZnJlc2hlZEFjY2Vzc1Rva2VuLCByZWZyZXNoVG9rZW4sIGV4cGlyZXNJbiwgfSA9IGF3YWl0IHJlZnJlc2hBY2Nlc3NUb2tlbihjdXJyZW50UmVmcmVzaE9wdGlvbnMsIG9wdGlvbnMuZHBvcEtleSwgb3B0aW9ucy5ldmVudEVtaXR0ZXIpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRBY2Nlc3NUb2tlbiA9IHJlZnJlc2hlZEFjY2Vzc1Rva2VuO1xuICAgICAgICAgICAgICAgIGlmIChyZWZyZXNoVG9rZW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50UmVmcmVzaE9wdGlvbnMucmVmcmVzaFRva2VuID0gcmVmcmVzaFRva2VuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQobGF0ZXN0VGltZW91dCk7XG4gICAgICAgICAgICAgICAgbGF0ZXN0VGltZW91dCA9IHNldFRpbWVvdXQocHJvYWN0aXZlbHlSZWZyZXNoVG9rZW4sIGNvbXB1dGVSZWZyZXNoRGVsYXkoZXhwaXJlc0luKSAqIDEwMDApO1xuICAgICAgICAgICAgICAgIChfYSA9IG9wdGlvbnMuZXZlbnRFbWl0dGVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZW1pdChFVkVOVFMuVElNRU9VVF9TRVQsIGxhdGVzdFRpbWVvdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIE9pZGNQcm92aWRlckVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIChfYiA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5ldmVudEVtaXR0ZXIpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5lbWl0KEVWRU5UUy5FUlJPUiwgZS5lcnJvciwgZS5lcnJvckRlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgKF9jID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmV2ZW50RW1pdHRlcikgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmVtaXQoRVZFTlRTLlNFU1NJT05fRVhQSVJFRCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgSW52YWxpZFJlc3BvbnNlRXJyb3IgJiZcbiAgICAgICAgICAgICAgICAgICAgZS5taXNzaW5nRmllbGRzLmluY2x1ZGVzKFwiYWNjZXNzX3Rva2VuXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIChfZCA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5ldmVudEVtaXR0ZXIpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5lbWl0KEVWRU5UUy5TRVNTSU9OX0VYUElSRUQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgbGF0ZXN0VGltZW91dCA9IHNldFRpbWVvdXQocHJvYWN0aXZlbHlSZWZyZXNoVG9rZW4sIGNvbXB1dGVSZWZyZXNoRGVsYXkob3B0aW9ucy5leHBpcmVzSW4pICogMTAwMCk7XG4gICAgICAgIChfYSA9IG9wdGlvbnMuZXZlbnRFbWl0dGVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZW1pdChFVkVOVFMuVElNRU9VVF9TRVQsIGxhdGVzdFRpbWVvdXQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChvcHRpb25zICE9PSB1bmRlZmluZWQgJiYgb3B0aW9ucy5ldmVudEVtaXR0ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBleHBpcmF0aW9uVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgb3B0aW9ucy5ldmVudEVtaXR0ZXIuZW1pdChFVkVOVFMuU0VTU0lPTl9FWFBJUkVEKTtcbiAgICAgICAgfSwgY29tcHV0ZVJlZnJlc2hEZWxheShvcHRpb25zLmV4cGlyZXNJbikgKiAxMDAwKTtcbiAgICAgICAgb3B0aW9ucy5ldmVudEVtaXR0ZXIuZW1pdChFVkVOVFMuVElNRU9VVF9TRVQsIGV4cGlyYXRpb25UaW1lb3V0KTtcbiAgICB9XG4gICAgcmV0dXJuIGFzeW5jICh1cmwsIHJlcXVlc3RJbml0KSA9PiB7XG4gICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IG1ha2VBdXRoZW50aWNhdGVkUmVxdWVzdCh1bmF1dGhGZXRjaCwgY3VycmVudEFjY2Vzc1Rva2VuLCB1cmwsIHJlcXVlc3RJbml0LCBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZHBvcEtleSk7XG4gICAgICAgIGNvbnN0IGZhaWxlZEJ1dE5vdEV4cGVjdGVkQXV0aEVycm9yID0gIXJlc3BvbnNlLm9rICYmICFpc0V4cGVjdGVkQXV0aEVycm9yKHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgICAgIGlmIChyZXNwb25zZS5vayB8fCBmYWlsZWRCdXROb3RFeHBlY3RlZEF1dGhFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhhc0JlZW5SZWRpcmVjdGVkID0gcmVzcG9uc2UudXJsICE9PSB1cmw7XG4gICAgICAgIGlmIChoYXNCZWVuUmVkaXJlY3RlZCAmJiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmRwb3BLZXkpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgbWFrZUF1dGhlbnRpY2F0ZWRSZXF1ZXN0KHVuYXV0aEZldGNoLCBjdXJyZW50QWNjZXNzVG9rZW4sIHJlc3BvbnNlLnVybCwgcmVxdWVzdEluaXQsIG9wdGlvbnMuZHBvcEtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH07XG59XG5cbmNvbnN0IFN0b3JhZ2VVdGlsaXR5R2V0UmVzcG9uc2UgPSBcImdldFJlc3BvbnNlXCI7XG5jb25zdCBTdG9yYWdlVXRpbGl0eU1vY2sgPSB7XG4gICAgZ2V0OiBhc3luYyAoa2V5LCBvcHRpb25zKSA9PiBTdG9yYWdlVXRpbGl0eUdldFJlc3BvbnNlLFxuICAgIHNldDogYXN5bmMgKGtleSwgdmFsdWUpID0+IHtcbiAgICB9LFxuICAgIGRlbGV0ZTogYXN5bmMgKGtleSkgPT4ge1xuICAgIH0sXG4gICAgZ2V0Rm9yVXNlcjogYXN5bmMgKHVzZXJJZCwga2V5LCBvcHRpb25zKSA9PiBTdG9yYWdlVXRpbGl0eUdldFJlc3BvbnNlLFxuICAgIHNldEZvclVzZXI6IGFzeW5jICh1c2VySWQsIHZhbHVlcywgb3B0aW9ucykgPT4ge1xuICAgIH0sXG4gICAgZGVsZXRlRm9yVXNlcjogYXN5bmMgKHVzZXJJZCwga2V5LCBvcHRpb25zKSA9PiB7XG4gICAgfSxcbiAgICBkZWxldGVBbGxVc2VyRGF0YTogYXN5bmMgKHVzZXJJZCwgb3B0aW9ucykgPT4ge1xuICAgIH0sXG59O1xuY29uc3QgbW9ja1N0b3JhZ2UgPSAoc3RvcmVkKSA9PiB7XG4gICAgY29uc3Qgc3RvcmUgPSBzdG9yZWQ7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0OiBhc3luYyAoa2V5KSA9PiB7XG4gICAgICAgICAgICBpZiAoc3RvcmVba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RvcmVba2V5XSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdG9yZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHN0b3JlW2tleV0pO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGFzeW5jIChrZXksIHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBzdG9yZVtrZXldID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGRlbGV0ZTogYXN5bmMgKGtleSkgPT4ge1xuICAgICAgICAgICAgZGVsZXRlIHN0b3JlW2tleV07XG4gICAgICAgIH0sXG4gICAgfTtcbn07XG5jb25zdCBtb2NrU3RvcmFnZVV0aWxpdHkgPSAoc3RvcmVkLCBpc1NlY3VyZSA9IGZhbHNlKSA9PiB7XG4gICAgaWYgKGlzU2VjdXJlKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3RvcmFnZVV0aWxpdHkobW9ja1N0b3JhZ2Uoc3RvcmVkKSwgbW9ja1N0b3JhZ2Uoe30pKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBTdG9yYWdlVXRpbGl0eShtb2NrU3RvcmFnZSh7fSksIG1vY2tTdG9yYWdlKHN0b3JlZCkpO1xufTtcblxuZXhwb3J0IHsgQWdncmVnYXRlSGFuZGxlciwgQ29uZmlndXJhdGlvbkVycm9yLCBERUZBVUxUX1NDT1BFUywgRVZFTlRTLCBJbk1lbW9yeVN0b3JhZ2UsIEludmFsaWRSZXNwb25zZUVycm9yLCBOb3RJbXBsZW1lbnRlZEVycm9yLCBPaWRjUHJvdmlkZXJFcnJvciwgUFJFRkVSUkVEX1NJR05JTkdfQUxHLCBSRUZSRVNIX0JFRk9SRV9FWFBJUkFUSU9OX1NFQ09ORFMsIFNPTElEX0NMSUVOVF9BVVRITl9LRVlfUFJFRklYLCBTdG9yYWdlVXRpbGl0eSwgU3RvcmFnZVV0aWxpdHlHZXRSZXNwb25zZSwgU3RvcmFnZVV0aWxpdHlNb2NrLCBVU0VSX1NFU1NJT05fUFJFRklYLCBidWlsZEF1dGhlbnRpY2F0ZWRGZXRjaCwgYnVpbGRQcm94eUhhbmRsZXIsIGNyZWF0ZURwb3BIZWFkZXIsIGRldGVybWluZVNpZ25pbmdBbGcsIGZldGNoSndrcywgZ2VuZXJhdGVEcG9wS2V5UGFpciwgZ2V0U2Vzc2lvbklkRnJvbU9hdXRoU3RhdGUsIGdldFdlYmlkRnJvbVRva2VuUGF5bG9hZCwgaGFuZGxlUmVnaXN0cmF0aW9uLCBpc1N1cHBvcnRlZFRva2VuVHlwZSwgaXNWYWxpZFJlZGlyZWN0VXJsLCBsb2FkT2lkY0NvbnRleHRGcm9tU3RvcmFnZSwgbW9ja1N0b3JhZ2UsIG1vY2tTdG9yYWdlVXRpbGl0eSwgc2F2ZVNlc3Npb25JbmZvVG9TdG9yYWdlIH07XG4iLCJ2YXIgaW5kZXhCcm93c2VyID0gZ2xvYmFsVGhpcy5mZXRjaDtcclxuY29uc3QgeyBmZXRjaCwgUmVzcG9uc2UsIFJlcXVlc3QsIEhlYWRlcnMgfSA9IGdsb2JhbFRoaXM7XG5cbmV4cG9ydCB7IEhlYWRlcnMsIFJlcXVlc3QsIFJlc3BvbnNlLCBpbmRleEJyb3dzZXIgYXMgZGVmYXVsdCwgZmV0Y2ggfTtcbiIsImV4cG9ydCB7IGNvbXBhY3REZWNyeXB0IH0gZnJvbSAnLi9qd2UvY29tcGFjdC9kZWNyeXB0LmpzJztcbmV4cG9ydCB7IGZsYXR0ZW5lZERlY3J5cHQgfSBmcm9tICcuL2p3ZS9mbGF0dGVuZWQvZGVjcnlwdC5qcyc7XG5leHBvcnQgeyBnZW5lcmFsRGVjcnlwdCB9IGZyb20gJy4vandlL2dlbmVyYWwvZGVjcnlwdC5qcyc7XG5leHBvcnQgeyBHZW5lcmFsRW5jcnlwdCB9IGZyb20gJy4vandlL2dlbmVyYWwvZW5jcnlwdC5qcyc7XG5leHBvcnQgeyBjb21wYWN0VmVyaWZ5IH0gZnJvbSAnLi9qd3MvY29tcGFjdC92ZXJpZnkuanMnO1xuZXhwb3J0IHsgZmxhdHRlbmVkVmVyaWZ5IH0gZnJvbSAnLi9qd3MvZmxhdHRlbmVkL3ZlcmlmeS5qcyc7XG5leHBvcnQgeyBnZW5lcmFsVmVyaWZ5IH0gZnJvbSAnLi9qd3MvZ2VuZXJhbC92ZXJpZnkuanMnO1xuZXhwb3J0IHsgand0VmVyaWZ5IH0gZnJvbSAnLi9qd3QvdmVyaWZ5LmpzJztcbmV4cG9ydCB7IGp3dERlY3J5cHQgfSBmcm9tICcuL2p3dC9kZWNyeXB0LmpzJztcbmV4cG9ydCB7IENvbXBhY3RFbmNyeXB0IH0gZnJvbSAnLi9qd2UvY29tcGFjdC9lbmNyeXB0LmpzJztcbmV4cG9ydCB7IEZsYXR0ZW5lZEVuY3J5cHQgfSBmcm9tICcuL2p3ZS9mbGF0dGVuZWQvZW5jcnlwdC5qcyc7XG5leHBvcnQgeyBDb21wYWN0U2lnbiB9IGZyb20gJy4vandzL2NvbXBhY3Qvc2lnbi5qcyc7XG5leHBvcnQgeyBGbGF0dGVuZWRTaWduIH0gZnJvbSAnLi9qd3MvZmxhdHRlbmVkL3NpZ24uanMnO1xuZXhwb3J0IHsgR2VuZXJhbFNpZ24gfSBmcm9tICcuL2p3cy9nZW5lcmFsL3NpZ24uanMnO1xuZXhwb3J0IHsgU2lnbkpXVCB9IGZyb20gJy4vand0L3NpZ24uanMnO1xuZXhwb3J0IHsgRW5jcnlwdEpXVCB9IGZyb20gJy4vand0L2VuY3J5cHQuanMnO1xuZXhwb3J0IHsgY2FsY3VsYXRlSndrVGh1bWJwcmludCwgY2FsY3VsYXRlSndrVGh1bWJwcmludFVyaSB9IGZyb20gJy4vandrL3RodW1icHJpbnQuanMnO1xuZXhwb3J0IHsgRW1iZWRkZWRKV0sgfSBmcm9tICcuL2p3ay9lbWJlZGRlZC5qcyc7XG5leHBvcnQgeyBjcmVhdGVMb2NhbEpXS1NldCB9IGZyb20gJy4vandrcy9sb2NhbC5qcyc7XG5leHBvcnQgeyBjcmVhdGVSZW1vdGVKV0tTZXQgfSBmcm9tICcuL2p3a3MvcmVtb3RlLmpzJztcbmV4cG9ydCB7IFVuc2VjdXJlZEpXVCB9IGZyb20gJy4vand0L3Vuc2VjdXJlZC5qcyc7XG5leHBvcnQgeyBleHBvcnRQS0NTOCwgZXhwb3J0U1BLSSwgZXhwb3J0SldLIH0gZnJvbSAnLi9rZXkvZXhwb3J0LmpzJztcbmV4cG9ydCB7IGltcG9ydFNQS0ksIGltcG9ydFBLQ1M4LCBpbXBvcnRYNTA5LCBpbXBvcnRKV0sgfSBmcm9tICcuL2tleS9pbXBvcnQuanMnO1xuZXhwb3J0IHsgZGVjb2RlUHJvdGVjdGVkSGVhZGVyIH0gZnJvbSAnLi91dGlsL2RlY29kZV9wcm90ZWN0ZWRfaGVhZGVyLmpzJztcbmV4cG9ydCB7IGRlY29kZUp3dCB9IGZyb20gJy4vdXRpbC9kZWNvZGVfand0LmpzJztcbmltcG9ydCAqIGFzIGVycm9yc18xIGZyb20gJy4vdXRpbC9lcnJvcnMuanMnO1xuZXhwb3J0IHsgZXJyb3JzXzEgYXMgZXJyb3JzIH07XG5leHBvcnQgeyBnZW5lcmF0ZUtleVBhaXIgfSBmcm9tICcuL2tleS9nZW5lcmF0ZV9rZXlfcGFpci5qcyc7XG5leHBvcnQgeyBnZW5lcmF0ZVNlY3JldCB9IGZyb20gJy4va2V5L2dlbmVyYXRlX3NlY3JldC5qcyc7XG5pbXBvcnQgKiBhcyBiYXNlNjR1cmxfMSBmcm9tICcuL3V0aWwvYmFzZTY0dXJsLmpzJztcbmV4cG9ydCB7IGJhc2U2NHVybF8xIGFzIGJhc2U2NHVybCB9O1xuIiwiaW1wb3J0IHsgZmxhdHRlbmVkRGVjcnlwdCB9IGZyb20gJy4uL2ZsYXR0ZW5lZC9kZWNyeXB0LmpzJztcbmltcG9ydCB7IEpXRUludmFsaWQgfSBmcm9tICcuLi8uLi91dGlsL2Vycm9ycy5qcyc7XG5pbXBvcnQgeyBkZWNvZGVyIH0gZnJvbSAnLi4vLi4vbGliL2J1ZmZlcl91dGlscy5qcyc7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29tcGFjdERlY3J5cHQoandlLCBrZXksIG9wdGlvbnMpIHtcbiAgICBpZiAoandlIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICBqd2UgPSBkZWNvZGVyLmRlY29kZShqd2UpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGp3ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpXRUludmFsaWQoJ0NvbXBhY3QgSldFIG11c3QgYmUgYSBzdHJpbmcgb3IgVWludDhBcnJheScpO1xuICAgIH1cbiAgICBjb25zdCB7IDA6IHByb3RlY3RlZEhlYWRlciwgMTogZW5jcnlwdGVkS2V5LCAyOiBpdiwgMzogY2lwaGVydGV4dCwgNDogdGFnLCBsZW5ndGgsIH0gPSBqd2Uuc3BsaXQoJy4nKTtcbiAgICBpZiAobGVuZ3RoICE9PSA1KSB7XG4gICAgICAgIHRocm93IG5ldyBKV0VJbnZhbGlkKCdJbnZhbGlkIENvbXBhY3QgSldFJyk7XG4gICAgfVxuICAgIGNvbnN0IGRlY3J5cHRlZCA9IGF3YWl0IGZsYXR0ZW5lZERlY3J5cHQoe1xuICAgICAgICBjaXBoZXJ0ZXh0LFxuICAgICAgICBpdjogKGl2IHx8IHVuZGVmaW5lZCksXG4gICAgICAgIHByb3RlY3RlZDogcHJvdGVjdGVkSGVhZGVyIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgdGFnOiAodGFnIHx8IHVuZGVmaW5lZCksXG4gICAgICAgIGVuY3J5cHRlZF9rZXk6IGVuY3J5cHRlZEtleSB8fCB1bmRlZmluZWQsXG4gICAgfSwga2V5LCBvcHRpb25zKTtcbiAgICBjb25zdCByZXN1bHQgPSB7IHBsYWludGV4dDogZGVjcnlwdGVkLnBsYWludGV4dCwgcHJvdGVjdGVkSGVhZGVyOiBkZWNyeXB0ZWQucHJvdGVjdGVkSGVhZGVyIH07XG4gICAgaWYgKHR5cGVvZiBrZXkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHsgLi4ucmVzdWx0LCBrZXk6IGRlY3J5cHRlZC5rZXkgfTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbiIsImltcG9ydCB7IEZsYXR0ZW5lZEVuY3J5cHQgfSBmcm9tICcuLi9mbGF0dGVuZWQvZW5jcnlwdC5qcyc7XG5leHBvcnQgY2xhc3MgQ29tcGFjdEVuY3J5cHQge1xuICAgIGNvbnN0cnVjdG9yKHBsYWludGV4dCkge1xuICAgICAgICB0aGlzLl9mbGF0dGVuZWQgPSBuZXcgRmxhdHRlbmVkRW5jcnlwdChwbGFpbnRleHQpO1xuICAgIH1cbiAgICBzZXRDb250ZW50RW5jcnlwdGlvbktleShjZWspIHtcbiAgICAgICAgdGhpcy5fZmxhdHRlbmVkLnNldENvbnRlbnRFbmNyeXB0aW9uS2V5KGNlayk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzZXRJbml0aWFsaXphdGlvblZlY3Rvcihpdikge1xuICAgICAgICB0aGlzLl9mbGF0dGVuZWQuc2V0SW5pdGlhbGl6YXRpb25WZWN0b3IoaXYpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc2V0UHJvdGVjdGVkSGVhZGVyKHByb3RlY3RlZEhlYWRlcikge1xuICAgICAgICB0aGlzLl9mbGF0dGVuZWQuc2V0UHJvdGVjdGVkSGVhZGVyKHByb3RlY3RlZEhlYWRlcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzZXRLZXlNYW5hZ2VtZW50UGFyYW1ldGVycyhwYXJhbWV0ZXJzKSB7XG4gICAgICAgIHRoaXMuX2ZsYXR0ZW5lZC5zZXRLZXlNYW5hZ2VtZW50UGFyYW1ldGVycyhwYXJhbWV0ZXJzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGFzeW5jIGVuY3J5cHQoa2V5LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGp3ZSA9IGF3YWl0IHRoaXMuX2ZsYXR0ZW5lZC5lbmNyeXB0KGtleSwgb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBbandlLnByb3RlY3RlZCwgandlLmVuY3J5cHRlZF9rZXksIGp3ZS5pdiwgandlLmNpcGhlcnRleHQsIGp3ZS50YWddLmpvaW4oJy4nKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBkZWNvZGUgYXMgYmFzZTY0dXJsIH0gZnJvbSAnLi4vLi4vcnVudGltZS9iYXNlNjR1cmwuanMnO1xuaW1wb3J0IGRlY3J5cHQgZnJvbSAnLi4vLi4vcnVudGltZS9kZWNyeXB0LmpzJztcbmltcG9ydCB7IGluZmxhdGUgfSBmcm9tICcuLi8uLi9ydW50aW1lL3psaWIuanMnO1xuaW1wb3J0IHsgSk9TRUFsZ05vdEFsbG93ZWQsIEpPU0VOb3RTdXBwb3J0ZWQsIEpXRUludmFsaWQgfSBmcm9tICcuLi8uLi91dGlsL2Vycm9ycy5qcyc7XG5pbXBvcnQgaXNEaXNqb2ludCBmcm9tICcuLi8uLi9saWIvaXNfZGlzam9pbnQuanMnO1xuaW1wb3J0IGlzT2JqZWN0IGZyb20gJy4uLy4uL2xpYi9pc19vYmplY3QuanMnO1xuaW1wb3J0IGRlY3J5cHRLZXlNYW5hZ2VtZW50IGZyb20gJy4uLy4uL2xpYi9kZWNyeXB0X2tleV9tYW5hZ2VtZW50LmpzJztcbmltcG9ydCB7IGVuY29kZXIsIGRlY29kZXIsIGNvbmNhdCB9IGZyb20gJy4uLy4uL2xpYi9idWZmZXJfdXRpbHMuanMnO1xuaW1wb3J0IGdlbmVyYXRlQ2VrIGZyb20gJy4uLy4uL2xpYi9jZWsuanMnO1xuaW1wb3J0IHZhbGlkYXRlQ3JpdCBmcm9tICcuLi8uLi9saWIvdmFsaWRhdGVfY3JpdC5qcyc7XG5pbXBvcnQgdmFsaWRhdGVBbGdvcml0aG1zIGZyb20gJy4uLy4uL2xpYi92YWxpZGF0ZV9hbGdvcml0aG1zLmpzJztcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmbGF0dGVuZWREZWNyeXB0KGp3ZSwga2V5LCBvcHRpb25zKSB7XG4gICAgdmFyIF9hO1xuICAgIGlmICghaXNPYmplY3QoandlKSkge1xuICAgICAgICB0aHJvdyBuZXcgSldFSW52YWxpZCgnRmxhdHRlbmVkIEpXRSBtdXN0IGJlIGFuIG9iamVjdCcpO1xuICAgIH1cbiAgICBpZiAoandlLnByb3RlY3RlZCA9PT0gdW5kZWZpbmVkICYmIGp3ZS5oZWFkZXIgPT09IHVuZGVmaW5lZCAmJiBqd2UudW5wcm90ZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgSldFSW52YWxpZCgnSk9TRSBIZWFkZXIgbWlzc2luZycpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGp3ZS5pdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpXRUludmFsaWQoJ0pXRSBJbml0aWFsaXphdGlvbiBWZWN0b3IgbWlzc2luZyBvciBpbmNvcnJlY3QgdHlwZScpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGp3ZS5jaXBoZXJ0ZXh0ICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgSldFSW52YWxpZCgnSldFIENpcGhlcnRleHQgbWlzc2luZyBvciBpbmNvcnJlY3QgdHlwZScpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGp3ZS50YWcgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBKV0VJbnZhbGlkKCdKV0UgQXV0aGVudGljYXRpb24gVGFnIG1pc3Npbmcgb3IgaW5jb3JyZWN0IHR5cGUnKTtcbiAgICB9XG4gICAgaWYgKGp3ZS5wcm90ZWN0ZWQgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgandlLnByb3RlY3RlZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpXRUludmFsaWQoJ0pXRSBQcm90ZWN0ZWQgSGVhZGVyIGluY29ycmVjdCB0eXBlJyk7XG4gICAgfVxuICAgIGlmIChqd2UuZW5jcnlwdGVkX2tleSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBqd2UuZW5jcnlwdGVkX2tleSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpXRUludmFsaWQoJ0pXRSBFbmNyeXB0ZWQgS2V5IGluY29ycmVjdCB0eXBlJyk7XG4gICAgfVxuICAgIGlmIChqd2UuYWFkICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGp3ZS5hYWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBKV0VJbnZhbGlkKCdKV0UgQUFEIGluY29ycmVjdCB0eXBlJyk7XG4gICAgfVxuICAgIGlmIChqd2UuaGVhZGVyICE9PSB1bmRlZmluZWQgJiYgIWlzT2JqZWN0KGp3ZS5oZWFkZXIpKSB7XG4gICAgICAgIHRocm93IG5ldyBKV0VJbnZhbGlkKCdKV0UgU2hhcmVkIFVucHJvdGVjdGVkIEhlYWRlciBpbmNvcnJlY3QgdHlwZScpO1xuICAgIH1cbiAgICBpZiAoandlLnVucHJvdGVjdGVkICE9PSB1bmRlZmluZWQgJiYgIWlzT2JqZWN0KGp3ZS51bnByb3RlY3RlZCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpXRUludmFsaWQoJ0pXRSBQZXItUmVjaXBpZW50IFVucHJvdGVjdGVkIEhlYWRlciBpbmNvcnJlY3QgdHlwZScpO1xuICAgIH1cbiAgICBsZXQgcGFyc2VkUHJvdDtcbiAgICBpZiAoandlLnByb3RlY3RlZCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcHJvdGVjdGVkSGVhZGVyID0gYmFzZTY0dXJsKGp3ZS5wcm90ZWN0ZWQpO1xuICAgICAgICAgICAgcGFyc2VkUHJvdCA9IEpTT04ucGFyc2UoZGVjb2Rlci5kZWNvZGUocHJvdGVjdGVkSGVhZGVyKSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9iKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSldFSW52YWxpZCgnSldFIFByb3RlY3RlZCBIZWFkZXIgaXMgaW52YWxpZCcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghaXNEaXNqb2ludChwYXJzZWRQcm90LCBqd2UuaGVhZGVyLCBqd2UudW5wcm90ZWN0ZWQpKSB7XG4gICAgICAgIHRocm93IG5ldyBKV0VJbnZhbGlkKCdKV0UgUHJvdGVjdGVkLCBKV0UgVW5wcm90ZWN0ZWQgSGVhZGVyLCBhbmQgSldFIFBlci1SZWNpcGllbnQgVW5wcm90ZWN0ZWQgSGVhZGVyIFBhcmFtZXRlciBuYW1lcyBtdXN0IGJlIGRpc2pvaW50Jyk7XG4gICAgfVxuICAgIGNvbnN0IGpvc2VIZWFkZXIgPSB7XG4gICAgICAgIC4uLnBhcnNlZFByb3QsXG4gICAgICAgIC4uLmp3ZS5oZWFkZXIsXG4gICAgICAgIC4uLmp3ZS51bnByb3RlY3RlZCxcbiAgICB9O1xuICAgIHZhbGlkYXRlQ3JpdChKV0VJbnZhbGlkLCBuZXcgTWFwKCksIG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5jcml0LCBwYXJzZWRQcm90LCBqb3NlSGVhZGVyKTtcbiAgICBpZiAoam9zZUhlYWRlci56aXAgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoIXBhcnNlZFByb3QgfHwgIXBhcnNlZFByb3QuemlwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSldFSW52YWxpZCgnSldFIFwiemlwXCIgKENvbXByZXNzaW9uIEFsZ29yaXRobSkgSGVhZGVyIE1VU1QgYmUgaW50ZWdyaXR5IHByb3RlY3RlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChqb3NlSGVhZGVyLnppcCAhPT0gJ0RFRicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBKT1NFTm90U3VwcG9ydGVkKCdVbnN1cHBvcnRlZCBKV0UgXCJ6aXBcIiAoQ29tcHJlc3Npb24gQWxnb3JpdGhtKSBIZWFkZXIgUGFyYW1ldGVyIHZhbHVlJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgeyBhbGcsIGVuYyB9ID0gam9zZUhlYWRlcjtcbiAgICBpZiAodHlwZW9mIGFsZyAhPT0gJ3N0cmluZycgfHwgIWFsZykge1xuICAgICAgICB0aHJvdyBuZXcgSldFSW52YWxpZCgnbWlzc2luZyBKV0UgQWxnb3JpdGhtIChhbGcpIGluIEpXRSBIZWFkZXInKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBlbmMgIT09ICdzdHJpbmcnIHx8ICFlbmMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpXRUludmFsaWQoJ21pc3NpbmcgSldFIEVuY3J5cHRpb24gQWxnb3JpdGhtIChlbmMpIGluIEpXRSBIZWFkZXInKTtcbiAgICB9XG4gICAgY29uc3Qga2V5TWFuYWdlbWVudEFsZ29yaXRobXMgPSBvcHRpb25zICYmIHZhbGlkYXRlQWxnb3JpdGhtcygna2V5TWFuYWdlbWVudEFsZ29yaXRobXMnLCBvcHRpb25zLmtleU1hbmFnZW1lbnRBbGdvcml0aG1zKTtcbiAgICBjb25zdCBjb250ZW50RW5jcnlwdGlvbkFsZ29yaXRobXMgPSBvcHRpb25zICYmXG4gICAgICAgIHZhbGlkYXRlQWxnb3JpdGhtcygnY29udGVudEVuY3J5cHRpb25BbGdvcml0aG1zJywgb3B0aW9ucy5jb250ZW50RW5jcnlwdGlvbkFsZ29yaXRobXMpO1xuICAgIGlmIChrZXlNYW5hZ2VtZW50QWxnb3JpdGhtcyAmJiAha2V5TWFuYWdlbWVudEFsZ29yaXRobXMuaGFzKGFsZykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpPU0VBbGdOb3RBbGxvd2VkKCdcImFsZ1wiIChBbGdvcml0aG0pIEhlYWRlciBQYXJhbWV0ZXIgbm90IGFsbG93ZWQnKTtcbiAgICB9XG4gICAgaWYgKGNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtcyAmJiAhY29udGVudEVuY3J5cHRpb25BbGdvcml0aG1zLmhhcyhlbmMpKSB7XG4gICAgICAgIHRocm93IG5ldyBKT1NFQWxnTm90QWxsb3dlZCgnXCJlbmNcIiAoRW5jcnlwdGlvbiBBbGdvcml0aG0pIEhlYWRlciBQYXJhbWV0ZXIgbm90IGFsbG93ZWQnKTtcbiAgICB9XG4gICAgbGV0IGVuY3J5cHRlZEtleTtcbiAgICBpZiAoandlLmVuY3J5cHRlZF9rZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBlbmNyeXB0ZWRLZXkgPSBiYXNlNjR1cmwoandlLmVuY3J5cHRlZF9rZXkpO1xuICAgIH1cbiAgICBsZXQgcmVzb2x2ZWRLZXkgPSBmYWxzZTtcbiAgICBpZiAodHlwZW9mIGtleSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBrZXkgPSBhd2FpdCBrZXkocGFyc2VkUHJvdCwgandlKTtcbiAgICAgICAgcmVzb2x2ZWRLZXkgPSB0cnVlO1xuICAgIH1cbiAgICBsZXQgY2VrO1xuICAgIHRyeSB7XG4gICAgICAgIGNlayA9IGF3YWl0IGRlY3J5cHRLZXlNYW5hZ2VtZW50KGFsZywga2V5LCBlbmNyeXB0ZWRLZXksIGpvc2VIZWFkZXIsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBUeXBlRXJyb3IgfHwgZXJyIGluc3RhbmNlb2YgSldFSW52YWxpZCB8fCBlcnIgaW5zdGFuY2VvZiBKT1NFTm90U3VwcG9ydGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgY2VrID0gZ2VuZXJhdGVDZWsoZW5jKTtcbiAgICB9XG4gICAgY29uc3QgaXYgPSBiYXNlNjR1cmwoandlLml2KTtcbiAgICBjb25zdCB0YWcgPSBiYXNlNjR1cmwoandlLnRhZyk7XG4gICAgY29uc3QgcHJvdGVjdGVkSGVhZGVyID0gZW5jb2Rlci5lbmNvZGUoKF9hID0gandlLnByb3RlY3RlZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycpO1xuICAgIGxldCBhZGRpdGlvbmFsRGF0YTtcbiAgICBpZiAoandlLmFhZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGFkZGl0aW9uYWxEYXRhID0gY29uY2F0KHByb3RlY3RlZEhlYWRlciwgZW5jb2Rlci5lbmNvZGUoJy4nKSwgZW5jb2Rlci5lbmNvZGUoandlLmFhZCkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYWRkaXRpb25hbERhdGEgPSBwcm90ZWN0ZWRIZWFkZXI7XG4gICAgfVxuICAgIGxldCBwbGFpbnRleHQgPSBhd2FpdCBkZWNyeXB0KGVuYywgY2VrLCBiYXNlNjR1cmwoandlLmNpcGhlcnRleHQpLCBpdiwgdGFnLCBhZGRpdGlvbmFsRGF0YSk7XG4gICAgaWYgKGpvc2VIZWFkZXIuemlwID09PSAnREVGJykge1xuICAgICAgICBwbGFpbnRleHQgPSBhd2FpdCAoKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5pbmZsYXRlUmF3KSB8fCBpbmZsYXRlKShwbGFpbnRleHQpO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSB7IHBsYWludGV4dCB9O1xuICAgIGlmIChqd2UucHJvdGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmVzdWx0LnByb3RlY3RlZEhlYWRlciA9IHBhcnNlZFByb3Q7XG4gICAgfVxuICAgIGlmIChqd2UuYWFkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmVzdWx0LmFkZGl0aW9uYWxBdXRoZW50aWNhdGVkRGF0YSA9IGJhc2U2NHVybChqd2UuYWFkKTtcbiAgICB9XG4gICAgaWYgKGp3ZS51bnByb3RlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJlc3VsdC5zaGFyZWRVbnByb3RlY3RlZEhlYWRlciA9IGp3ZS51bnByb3RlY3RlZDtcbiAgICB9XG4gICAgaWYgKGp3ZS5oZWFkZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXN1bHQudW5wcm90ZWN0ZWRIZWFkZXIgPSBqd2UuaGVhZGVyO1xuICAgIH1cbiAgICBpZiAocmVzb2x2ZWRLZXkpIHtcbiAgICAgICAgcmV0dXJuIHsgLi4ucmVzdWx0LCBrZXkgfTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbiIsImltcG9ydCB7IGVuY29kZSBhcyBiYXNlNjR1cmwgfSBmcm9tICcuLi8uLi9ydW50aW1lL2Jhc2U2NHVybC5qcyc7XG5pbXBvcnQgZW5jcnlwdCBmcm9tICcuLi8uLi9ydW50aW1lL2VuY3J5cHQuanMnO1xuaW1wb3J0IHsgZGVmbGF0ZSB9IGZyb20gJy4uLy4uL3J1bnRpbWUvemxpYi5qcyc7XG5pbXBvcnQgZ2VuZXJhdGVJdiBmcm9tICcuLi8uLi9saWIvaXYuanMnO1xuaW1wb3J0IGVuY3J5cHRLZXlNYW5hZ2VtZW50IGZyb20gJy4uLy4uL2xpYi9lbmNyeXB0X2tleV9tYW5hZ2VtZW50LmpzJztcbmltcG9ydCB7IEpPU0VOb3RTdXBwb3J0ZWQsIEpXRUludmFsaWQgfSBmcm9tICcuLi8uLi91dGlsL2Vycm9ycy5qcyc7XG5pbXBvcnQgaXNEaXNqb2ludCBmcm9tICcuLi8uLi9saWIvaXNfZGlzam9pbnQuanMnO1xuaW1wb3J0IHsgZW5jb2RlciwgZGVjb2RlciwgY29uY2F0IH0gZnJvbSAnLi4vLi4vbGliL2J1ZmZlcl91dGlscy5qcyc7XG5pbXBvcnQgdmFsaWRhdGVDcml0IGZyb20gJy4uLy4uL2xpYi92YWxpZGF0ZV9jcml0LmpzJztcbmV4cG9ydCBjb25zdCB1bnByb3RlY3RlZCA9IFN5bWJvbCgpO1xuZXhwb3J0IGNsYXNzIEZsYXR0ZW5lZEVuY3J5cHQge1xuICAgIGNvbnN0cnVjdG9yKHBsYWludGV4dCkge1xuICAgICAgICBpZiAoIShwbGFpbnRleHQgaW5zdGFuY2VvZiBVaW50OEFycmF5KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigncGxhaW50ZXh0IG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgVWludDhBcnJheScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3BsYWludGV4dCA9IHBsYWludGV4dDtcbiAgICB9XG4gICAgc2V0S2V5TWFuYWdlbWVudFBhcmFtZXRlcnMocGFyYW1ldGVycykge1xuICAgICAgICBpZiAodGhpcy5fa2V5TWFuYWdlbWVudFBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3NldEtleU1hbmFnZW1lbnRQYXJhbWV0ZXJzIGNhbiBvbmx5IGJlIGNhbGxlZCBvbmNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fa2V5TWFuYWdlbWVudFBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc2V0UHJvdGVjdGVkSGVhZGVyKHByb3RlY3RlZEhlYWRlcikge1xuICAgICAgICBpZiAodGhpcy5fcHJvdGVjdGVkSGVhZGVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdzZXRQcm90ZWN0ZWRIZWFkZXIgY2FuIG9ubHkgYmUgY2FsbGVkIG9uY2UnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wcm90ZWN0ZWRIZWFkZXIgPSBwcm90ZWN0ZWRIZWFkZXI7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzZXRTaGFyZWRVbnByb3RlY3RlZEhlYWRlcihzaGFyZWRVbnByb3RlY3RlZEhlYWRlcikge1xuICAgICAgICBpZiAodGhpcy5fc2hhcmVkVW5wcm90ZWN0ZWRIZWFkZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3NldFNoYXJlZFVucHJvdGVjdGVkSGVhZGVyIGNhbiBvbmx5IGJlIGNhbGxlZCBvbmNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc2hhcmVkVW5wcm90ZWN0ZWRIZWFkZXIgPSBzaGFyZWRVbnByb3RlY3RlZEhlYWRlcjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHNldFVucHJvdGVjdGVkSGVhZGVyKHVucHJvdGVjdGVkSGVhZGVyKSB7XG4gICAgICAgIGlmICh0aGlzLl91bnByb3RlY3RlZEhlYWRlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignc2V0VW5wcm90ZWN0ZWRIZWFkZXIgY2FuIG9ubHkgYmUgY2FsbGVkIG9uY2UnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl91bnByb3RlY3RlZEhlYWRlciA9IHVucHJvdGVjdGVkSGVhZGVyO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc2V0QWRkaXRpb25hbEF1dGhlbnRpY2F0ZWREYXRhKGFhZCkge1xuICAgICAgICB0aGlzLl9hYWQgPSBhYWQ7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzZXRDb250ZW50RW5jcnlwdGlvbktleShjZWspIHtcbiAgICAgICAgaWYgKHRoaXMuX2Nlaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignc2V0Q29udGVudEVuY3J5cHRpb25LZXkgY2FuIG9ubHkgYmUgY2FsbGVkIG9uY2UnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jZWsgPSBjZWs7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzZXRJbml0aWFsaXphdGlvblZlY3Rvcihpdikge1xuICAgICAgICBpZiAodGhpcy5faXYpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3NldEluaXRpYWxpemF0aW9uVmVjdG9yIGNhbiBvbmx5IGJlIGNhbGxlZCBvbmNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faXYgPSBpdjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGFzeW5jIGVuY3J5cHQoa2V5LCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghdGhpcy5fcHJvdGVjdGVkSGVhZGVyICYmICF0aGlzLl91bnByb3RlY3RlZEhlYWRlciAmJiAhdGhpcy5fc2hhcmVkVW5wcm90ZWN0ZWRIZWFkZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBKV0VJbnZhbGlkKCdlaXRoZXIgc2V0UHJvdGVjdGVkSGVhZGVyLCBzZXRVbnByb3RlY3RlZEhlYWRlciwgb3Igc2hhcmVkVW5wcm90ZWN0ZWRIZWFkZXIgbXVzdCBiZSBjYWxsZWQgYmVmb3JlICNlbmNyeXB0KCknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzRGlzam9pbnQodGhpcy5fcHJvdGVjdGVkSGVhZGVyLCB0aGlzLl91bnByb3RlY3RlZEhlYWRlciwgdGhpcy5fc2hhcmVkVW5wcm90ZWN0ZWRIZWFkZXIpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSldFSW52YWxpZCgnSldFIFByb3RlY3RlZCwgSldFIFNoYXJlZCBVbnByb3RlY3RlZCBhbmQgSldFIFBlci1SZWNpcGllbnQgSGVhZGVyIFBhcmFtZXRlciBuYW1lcyBtdXN0IGJlIGRpc2pvaW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgam9zZUhlYWRlciA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMuX3Byb3RlY3RlZEhlYWRlcixcbiAgICAgICAgICAgIC4uLnRoaXMuX3VucHJvdGVjdGVkSGVhZGVyLFxuICAgICAgICAgICAgLi4udGhpcy5fc2hhcmVkVW5wcm90ZWN0ZWRIZWFkZXIsXG4gICAgICAgIH07XG4gICAgICAgIHZhbGlkYXRlQ3JpdChKV0VJbnZhbGlkLCBuZXcgTWFwKCksIG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5jcml0LCB0aGlzLl9wcm90ZWN0ZWRIZWFkZXIsIGpvc2VIZWFkZXIpO1xuICAgICAgICBpZiAoam9zZUhlYWRlci56aXAgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9wcm90ZWN0ZWRIZWFkZXIgfHwgIXRoaXMuX3Byb3RlY3RlZEhlYWRlci56aXApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSldFSW52YWxpZCgnSldFIFwiemlwXCIgKENvbXByZXNzaW9uIEFsZ29yaXRobSkgSGVhZGVyIE1VU1QgYmUgaW50ZWdyaXR5IHByb3RlY3RlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGpvc2VIZWFkZXIuemlwICE9PSAnREVGJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKT1NFTm90U3VwcG9ydGVkKCdVbnN1cHBvcnRlZCBKV0UgXCJ6aXBcIiAoQ29tcHJlc3Npb24gQWxnb3JpdGhtKSBIZWFkZXIgUGFyYW1ldGVyIHZhbHVlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBhbGcsIGVuYyB9ID0gam9zZUhlYWRlcjtcbiAgICAgICAgaWYgKHR5cGVvZiBhbGcgIT09ICdzdHJpbmcnIHx8ICFhbGcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBKV0VJbnZhbGlkKCdKV0UgXCJhbGdcIiAoQWxnb3JpdGhtKSBIZWFkZXIgUGFyYW1ldGVyIG1pc3Npbmcgb3IgaW52YWxpZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgZW5jICE9PSAnc3RyaW5nJyB8fCAhZW5jKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSldFSW52YWxpZCgnSldFIFwiZW5jXCIgKEVuY3J5cHRpb24gQWxnb3JpdGhtKSBIZWFkZXIgUGFyYW1ldGVyIG1pc3Npbmcgb3IgaW52YWxpZCcpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBlbmNyeXB0ZWRLZXk7XG4gICAgICAgIGlmIChhbGcgPT09ICdkaXInKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY2VrKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignc2V0Q29udGVudEVuY3J5cHRpb25LZXkgY2Fubm90IGJlIGNhbGxlZCB3aGVuIHVzaW5nIERpcmVjdCBFbmNyeXB0aW9uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYWxnID09PSAnRUNESC1FUycpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jZWspIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdzZXRDb250ZW50RW5jcnlwdGlvbktleSBjYW5ub3QgYmUgY2FsbGVkIHdoZW4gdXNpbmcgRGlyZWN0IEtleSBBZ3JlZW1lbnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgY2VrO1xuICAgICAgICB7XG4gICAgICAgICAgICBsZXQgcGFyYW1ldGVycztcbiAgICAgICAgICAgICh7IGNlaywgZW5jcnlwdGVkS2V5LCBwYXJhbWV0ZXJzIH0gPSBhd2FpdCBlbmNyeXB0S2V5TWFuYWdlbWVudChhbGcsIGVuYywga2V5LCB0aGlzLl9jZWssIHRoaXMuX2tleU1hbmFnZW1lbnRQYXJhbWV0ZXJzKSk7XG4gICAgICAgICAgICBpZiAocGFyYW1ldGVycykge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zICYmIHVucHJvdGVjdGVkIGluIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl91bnByb3RlY3RlZEhlYWRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRVbnByb3RlY3RlZEhlYWRlcihwYXJhbWV0ZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3VucHJvdGVjdGVkSGVhZGVyID0geyAuLi50aGlzLl91bnByb3RlY3RlZEhlYWRlciwgLi4ucGFyYW1ldGVycyB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX3Byb3RlY3RlZEhlYWRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQcm90ZWN0ZWRIZWFkZXIocGFyYW1ldGVycyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcm90ZWN0ZWRIZWFkZXIgPSB7IC4uLnRoaXMuX3Byb3RlY3RlZEhlYWRlciwgLi4ucGFyYW1ldGVycyB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2l2IHx8ICh0aGlzLl9pdiA9IGdlbmVyYXRlSXYoZW5jKSk7XG4gICAgICAgIGxldCBhZGRpdGlvbmFsRGF0YTtcbiAgICAgICAgbGV0IHByb3RlY3RlZEhlYWRlcjtcbiAgICAgICAgbGV0IGFhZE1lbWJlcjtcbiAgICAgICAgaWYgKHRoaXMuX3Byb3RlY3RlZEhlYWRlcikge1xuICAgICAgICAgICAgcHJvdGVjdGVkSGVhZGVyID0gZW5jb2Rlci5lbmNvZGUoYmFzZTY0dXJsKEpTT04uc3RyaW5naWZ5KHRoaXMuX3Byb3RlY3RlZEhlYWRlcikpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHByb3RlY3RlZEhlYWRlciA9IGVuY29kZXIuZW5jb2RlKCcnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fYWFkKSB7XG4gICAgICAgICAgICBhYWRNZW1iZXIgPSBiYXNlNjR1cmwodGhpcy5fYWFkKTtcbiAgICAgICAgICAgIGFkZGl0aW9uYWxEYXRhID0gY29uY2F0KHByb3RlY3RlZEhlYWRlciwgZW5jb2Rlci5lbmNvZGUoJy4nKSwgZW5jb2Rlci5lbmNvZGUoYWFkTWVtYmVyKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhZGRpdGlvbmFsRGF0YSA9IHByb3RlY3RlZEhlYWRlcjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY2lwaGVydGV4dDtcbiAgICAgICAgbGV0IHRhZztcbiAgICAgICAgaWYgKGpvc2VIZWFkZXIuemlwID09PSAnREVGJykge1xuICAgICAgICAgICAgY29uc3QgZGVmbGF0ZWQgPSBhd2FpdCAoKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5kZWZsYXRlUmF3KSB8fCBkZWZsYXRlKSh0aGlzLl9wbGFpbnRleHQpO1xuICAgICAgICAgICAgKHsgY2lwaGVydGV4dCwgdGFnIH0gPSBhd2FpdCBlbmNyeXB0KGVuYywgZGVmbGF0ZWQsIGNlaywgdGhpcy5faXYsIGFkZGl0aW9uYWxEYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICA7XG4gICAgICAgICAgICAoeyBjaXBoZXJ0ZXh0LCB0YWcgfSA9IGF3YWl0IGVuY3J5cHQoZW5jLCB0aGlzLl9wbGFpbnRleHQsIGNlaywgdGhpcy5faXYsIGFkZGl0aW9uYWxEYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgandlID0ge1xuICAgICAgICAgICAgY2lwaGVydGV4dDogYmFzZTY0dXJsKGNpcGhlcnRleHQpLFxuICAgICAgICAgICAgaXY6IGJhc2U2NHVybCh0aGlzLl9pdiksXG4gICAgICAgICAgICB0YWc6IGJhc2U2NHVybCh0YWcpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoZW5jcnlwdGVkS2V5KSB7XG4gICAgICAgICAgICBqd2UuZW5jcnlwdGVkX2tleSA9IGJhc2U2NHVybChlbmNyeXB0ZWRLZXkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhYWRNZW1iZXIpIHtcbiAgICAgICAgICAgIGp3ZS5hYWQgPSBhYWRNZW1iZXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX3Byb3RlY3RlZEhlYWRlcikge1xuICAgICAgICAgICAgandlLnByb3RlY3RlZCA9IGRlY29kZXIuZGVjb2RlKHByb3RlY3RlZEhlYWRlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX3NoYXJlZFVucHJvdGVjdGVkSGVhZGVyKSB7XG4gICAgICAgICAgICBqd2UudW5wcm90ZWN0ZWQgPSB0aGlzLl9zaGFyZWRVbnByb3RlY3RlZEhlYWRlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fdW5wcm90ZWN0ZWRIZWFkZXIpIHtcbiAgICAgICAgICAgIGp3ZS5oZWFkZXIgPSB0aGlzLl91bnByb3RlY3RlZEhlYWRlcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gandlO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGZsYXR0ZW5lZERlY3J5cHQgfSBmcm9tICcuLi9mbGF0dGVuZWQvZGVjcnlwdC5qcyc7XG5pbXBvcnQgeyBKV0VEZWNyeXB0aW9uRmFpbGVkLCBKV0VJbnZhbGlkIH0gZnJvbSAnLi4vLi4vdXRpbC9lcnJvcnMuanMnO1xuaW1wb3J0IGlzT2JqZWN0IGZyb20gJy4uLy4uL2xpYi9pc19vYmplY3QuanMnO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYWxEZWNyeXB0KGp3ZSwga2V5LCBvcHRpb25zKSB7XG4gICAgaWYgKCFpc09iamVjdChqd2UpKSB7XG4gICAgICAgIHRocm93IG5ldyBKV0VJbnZhbGlkKCdHZW5lcmFsIEpXRSBtdXN0IGJlIGFuIG9iamVjdCcpO1xuICAgIH1cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoandlLnJlY2lwaWVudHMpIHx8ICFqd2UucmVjaXBpZW50cy5ldmVyeShpc09iamVjdCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpXRUludmFsaWQoJ0pXRSBSZWNpcGllbnRzIG1pc3Npbmcgb3IgaW5jb3JyZWN0IHR5cGUnKTtcbiAgICB9XG4gICAgaWYgKCFqd2UucmVjaXBpZW50cy5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpXRUludmFsaWQoJ0pXRSBSZWNpcGllbnRzIGhhcyBubyBtZW1iZXJzJyk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgcmVjaXBpZW50IG9mIGp3ZS5yZWNpcGllbnRzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZmxhdHRlbmVkRGVjcnlwdCh7XG4gICAgICAgICAgICAgICAgYWFkOiBqd2UuYWFkLFxuICAgICAgICAgICAgICAgIGNpcGhlcnRleHQ6IGp3ZS5jaXBoZXJ0ZXh0LFxuICAgICAgICAgICAgICAgIGVuY3J5cHRlZF9rZXk6IHJlY2lwaWVudC5lbmNyeXB0ZWRfa2V5LFxuICAgICAgICAgICAgICAgIGhlYWRlcjogcmVjaXBpZW50LmhlYWRlcixcbiAgICAgICAgICAgICAgICBpdjogandlLml2LFxuICAgICAgICAgICAgICAgIHByb3RlY3RlZDogandlLnByb3RlY3RlZCxcbiAgICAgICAgICAgICAgICB0YWc6IGp3ZS50YWcsXG4gICAgICAgICAgICAgICAgdW5wcm90ZWN0ZWQ6IGp3ZS51bnByb3RlY3RlZCxcbiAgICAgICAgICAgIH0sIGtleSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9hKSB7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IEpXRURlY3J5cHRpb25GYWlsZWQoKTtcbn1cbiIsImltcG9ydCB7IEZsYXR0ZW5lZEVuY3J5cHQsIHVucHJvdGVjdGVkIH0gZnJvbSAnLi4vZmxhdHRlbmVkL2VuY3J5cHQuanMnO1xuaW1wb3J0IHsgSldFSW52YWxpZCB9IGZyb20gJy4uLy4uL3V0aWwvZXJyb3JzLmpzJztcbmltcG9ydCBnZW5lcmF0ZUNlayBmcm9tICcuLi8uLi9saWIvY2VrLmpzJztcbmltcG9ydCBpc0Rpc2pvaW50IGZyb20gJy4uLy4uL2xpYi9pc19kaXNqb2ludC5qcyc7XG5pbXBvcnQgZW5jcnlwdEtleU1hbmFnZW1lbnQgZnJvbSAnLi4vLi4vbGliL2VuY3J5cHRfa2V5X21hbmFnZW1lbnQuanMnO1xuaW1wb3J0IHsgZW5jb2RlIGFzIGJhc2U2NHVybCB9IGZyb20gJy4uLy4uL3J1bnRpbWUvYmFzZTY0dXJsLmpzJztcbmltcG9ydCB2YWxpZGF0ZUNyaXQgZnJvbSAnLi4vLi4vbGliL3ZhbGlkYXRlX2NyaXQuanMnO1xuY2xhc3MgSW5kaXZpZHVhbFJlY2lwaWVudCB7XG4gICAgY29uc3RydWN0b3IoZW5jLCBrZXksIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBlbmM7XG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIH1cbiAgICBzZXRVbnByb3RlY3RlZEhlYWRlcih1bnByb3RlY3RlZEhlYWRlcikge1xuICAgICAgICBpZiAodGhpcy51bnByb3RlY3RlZEhlYWRlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignc2V0VW5wcm90ZWN0ZWRIZWFkZXIgY2FuIG9ubHkgYmUgY2FsbGVkIG9uY2UnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVucHJvdGVjdGVkSGVhZGVyID0gdW5wcm90ZWN0ZWRIZWFkZXI7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBhZGRSZWNpcGllbnQoLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuYWRkUmVjaXBpZW50KC4uLmFyZ3MpO1xuICAgIH1cbiAgICBlbmNyeXB0KC4uLmFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmVuY3J5cHQoLi4uYXJncyk7XG4gICAgfVxuICAgIGRvbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgR2VuZXJhbEVuY3J5cHQge1xuICAgIGNvbnN0cnVjdG9yKHBsYWludGV4dCkge1xuICAgICAgICB0aGlzLl9yZWNpcGllbnRzID0gW107XG4gICAgICAgIHRoaXMuX3BsYWludGV4dCA9IHBsYWludGV4dDtcbiAgICB9XG4gICAgYWRkUmVjaXBpZW50KGtleSwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCByZWNpcGllbnQgPSBuZXcgSW5kaXZpZHVhbFJlY2lwaWVudCh0aGlzLCBrZXksIHsgY3JpdDogb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmNyaXQgfSk7XG4gICAgICAgIHRoaXMuX3JlY2lwaWVudHMucHVzaChyZWNpcGllbnQpO1xuICAgICAgICByZXR1cm4gcmVjaXBpZW50O1xuICAgIH1cbiAgICBzZXRQcm90ZWN0ZWRIZWFkZXIocHJvdGVjdGVkSGVhZGVyKSB7XG4gICAgICAgIGlmICh0aGlzLl9wcm90ZWN0ZWRIZWFkZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3NldFByb3RlY3RlZEhlYWRlciBjYW4gb25seSBiZSBjYWxsZWQgb25jZScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3Byb3RlY3RlZEhlYWRlciA9IHByb3RlY3RlZEhlYWRlcjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHNldFNoYXJlZFVucHJvdGVjdGVkSGVhZGVyKHNoYXJlZFVucHJvdGVjdGVkSGVhZGVyKSB7XG4gICAgICAgIGlmICh0aGlzLl91bnByb3RlY3RlZEhlYWRlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignc2V0U2hhcmVkVW5wcm90ZWN0ZWRIZWFkZXIgY2FuIG9ubHkgYmUgY2FsbGVkIG9uY2UnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl91bnByb3RlY3RlZEhlYWRlciA9IHNoYXJlZFVucHJvdGVjdGVkSGVhZGVyO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc2V0QWRkaXRpb25hbEF1dGhlbnRpY2F0ZWREYXRhKGFhZCkge1xuICAgICAgICB0aGlzLl9hYWQgPSBhYWQ7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBhc3luYyBlbmNyeXB0KG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIGlmICghdGhpcy5fcmVjaXBpZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBKV0VJbnZhbGlkKCdhdCBsZWFzdCBvbmUgcmVjaXBpZW50IG11c3QgYmUgYWRkZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0geyBkZWZsYXRlUmF3OiBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZGVmbGF0ZVJhdyB9O1xuICAgICAgICBpZiAodGhpcy5fcmVjaXBpZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IFtyZWNpcGllbnRdID0gdGhpcy5fcmVjaXBpZW50cztcbiAgICAgICAgICAgIGNvbnN0IGZsYXR0ZW5lZCA9IGF3YWl0IG5ldyBGbGF0dGVuZWRFbmNyeXB0KHRoaXMuX3BsYWludGV4dClcbiAgICAgICAgICAgICAgICAuc2V0QWRkaXRpb25hbEF1dGhlbnRpY2F0ZWREYXRhKHRoaXMuX2FhZClcbiAgICAgICAgICAgICAgICAuc2V0UHJvdGVjdGVkSGVhZGVyKHRoaXMuX3Byb3RlY3RlZEhlYWRlcilcbiAgICAgICAgICAgICAgICAuc2V0U2hhcmVkVW5wcm90ZWN0ZWRIZWFkZXIodGhpcy5fdW5wcm90ZWN0ZWRIZWFkZXIpXG4gICAgICAgICAgICAgICAgLnNldFVucHJvdGVjdGVkSGVhZGVyKHJlY2lwaWVudC51bnByb3RlY3RlZEhlYWRlcilcbiAgICAgICAgICAgICAgICAuZW5jcnlwdChyZWNpcGllbnQua2V5LCB7IC4uLnJlY2lwaWVudC5vcHRpb25zLCAuLi5vcHRpb25zIH0pO1xuICAgICAgICAgICAgbGV0IGp3ZSA9IHtcbiAgICAgICAgICAgICAgICBjaXBoZXJ0ZXh0OiBmbGF0dGVuZWQuY2lwaGVydGV4dCxcbiAgICAgICAgICAgICAgICBpdjogZmxhdHRlbmVkLml2LFxuICAgICAgICAgICAgICAgIHJlY2lwaWVudHM6IFt7fV0sXG4gICAgICAgICAgICAgICAgdGFnOiBmbGF0dGVuZWQudGFnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChmbGF0dGVuZWQuYWFkKVxuICAgICAgICAgICAgICAgIGp3ZS5hYWQgPSBmbGF0dGVuZWQuYWFkO1xuICAgICAgICAgICAgaWYgKGZsYXR0ZW5lZC5wcm90ZWN0ZWQpXG4gICAgICAgICAgICAgICAgandlLnByb3RlY3RlZCA9IGZsYXR0ZW5lZC5wcm90ZWN0ZWQ7XG4gICAgICAgICAgICBpZiAoZmxhdHRlbmVkLnVucHJvdGVjdGVkKVxuICAgICAgICAgICAgICAgIGp3ZS51bnByb3RlY3RlZCA9IGZsYXR0ZW5lZC51bnByb3RlY3RlZDtcbiAgICAgICAgICAgIGlmIChmbGF0dGVuZWQuZW5jcnlwdGVkX2tleSlcbiAgICAgICAgICAgICAgICBqd2UucmVjaXBpZW50c1swXS5lbmNyeXB0ZWRfa2V5ID0gZmxhdHRlbmVkLmVuY3J5cHRlZF9rZXk7XG4gICAgICAgICAgICBpZiAoZmxhdHRlbmVkLmhlYWRlcilcbiAgICAgICAgICAgICAgICBqd2UucmVjaXBpZW50c1swXS5oZWFkZXIgPSBmbGF0dGVuZWQuaGVhZGVyO1xuICAgICAgICAgICAgcmV0dXJuIGp3ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZW5jO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3JlY2lwaWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHJlY2lwaWVudCA9IHRoaXMuX3JlY2lwaWVudHNbaV07XG4gICAgICAgICAgICBpZiAoIWlzRGlzam9pbnQodGhpcy5fcHJvdGVjdGVkSGVhZGVyLCB0aGlzLl91bnByb3RlY3RlZEhlYWRlciwgcmVjaXBpZW50LnVucHJvdGVjdGVkSGVhZGVyKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKV0VJbnZhbGlkKCdKV0UgUHJvdGVjdGVkLCBKV0UgU2hhcmVkIFVucHJvdGVjdGVkIGFuZCBKV0UgUGVyLVJlY2lwaWVudCBIZWFkZXIgUGFyYW1ldGVyIG5hbWVzIG11c3QgYmUgZGlzam9pbnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGpvc2VIZWFkZXIgPSB7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5fcHJvdGVjdGVkSGVhZGVyLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuX3VucHJvdGVjdGVkSGVhZGVyLFxuICAgICAgICAgICAgICAgIC4uLnJlY2lwaWVudC51bnByb3RlY3RlZEhlYWRlcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCB7IGFsZyB9ID0gam9zZUhlYWRlcjtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYWxnICE9PSAnc3RyaW5nJyB8fCAhYWxnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpXRUludmFsaWQoJ0pXRSBcImFsZ1wiIChBbGdvcml0aG0pIEhlYWRlciBQYXJhbWV0ZXIgbWlzc2luZyBvciBpbnZhbGlkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYWxnID09PSAnZGlyJyB8fCBhbGcgPT09ICdFQ0RILUVTJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKV0VJbnZhbGlkKCdcImRpclwiIGFuZCBcIkVDREgtRVNcIiBhbGcgbWF5IG9ubHkgYmUgdXNlZCB3aXRoIGEgc2luZ2xlIHJlY2lwaWVudCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBqb3NlSGVhZGVyLmVuYyAhPT0gJ3N0cmluZycgfHwgIWpvc2VIZWFkZXIuZW5jKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpXRUludmFsaWQoJ0pXRSBcImVuY1wiIChFbmNyeXB0aW9uIEFsZ29yaXRobSkgSGVhZGVyIFBhcmFtZXRlciBtaXNzaW5nIG9yIGludmFsaWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZW5jKSB7XG4gICAgICAgICAgICAgICAgZW5jID0gam9zZUhlYWRlci5lbmM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlbmMgIT09IGpvc2VIZWFkZXIuZW5jKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpXRUludmFsaWQoJ0pXRSBcImVuY1wiIChFbmNyeXB0aW9uIEFsZ29yaXRobSkgSGVhZGVyIFBhcmFtZXRlciBtdXN0IGJlIHRoZSBzYW1lIGZvciBhbGwgcmVjaXBpZW50cycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsaWRhdGVDcml0KEpXRUludmFsaWQsIG5ldyBNYXAoKSwgcmVjaXBpZW50Lm9wdGlvbnMuY3JpdCwgdGhpcy5fcHJvdGVjdGVkSGVhZGVyLCBqb3NlSGVhZGVyKTtcbiAgICAgICAgICAgIGlmIChqb3NlSGVhZGVyLnppcCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9wcm90ZWN0ZWRIZWFkZXIgfHwgIXRoaXMuX3Byb3RlY3RlZEhlYWRlci56aXApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpXRUludmFsaWQoJ0pXRSBcInppcFwiIChDb21wcmVzc2lvbiBBbGdvcml0aG0pIEhlYWRlciBNVVNUIGJlIGludGVncml0eSBwcm90ZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2VrID0gZ2VuZXJhdGVDZWsoZW5jKTtcbiAgICAgICAgbGV0IGp3ZSA9IHtcbiAgICAgICAgICAgIGNpcGhlcnRleHQ6ICcnLFxuICAgICAgICAgICAgaXY6ICcnLFxuICAgICAgICAgICAgcmVjaXBpZW50czogW10sXG4gICAgICAgICAgICB0YWc6ICcnLFxuICAgICAgICB9O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3JlY2lwaWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHJlY2lwaWVudCA9IHRoaXMuX3JlY2lwaWVudHNbaV07XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSB7fTtcbiAgICAgICAgICAgIGp3ZS5yZWNpcGllbnRzLnB1c2godGFyZ2V0KTtcbiAgICAgICAgICAgIGNvbnN0IGpvc2VIZWFkZXIgPSB7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5fcHJvdGVjdGVkSGVhZGVyLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuX3VucHJvdGVjdGVkSGVhZGVyLFxuICAgICAgICAgICAgICAgIC4uLnJlY2lwaWVudC51bnByb3RlY3RlZEhlYWRlcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBwMmMgPSBqb3NlSGVhZGVyLmFsZy5zdGFydHNXaXRoKCdQQkVTMicpID8gMjA0OCArIGkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZsYXR0ZW5lZCA9IGF3YWl0IG5ldyBGbGF0dGVuZWRFbmNyeXB0KHRoaXMuX3BsYWludGV4dClcbiAgICAgICAgICAgICAgICAgICAgLnNldEFkZGl0aW9uYWxBdXRoZW50aWNhdGVkRGF0YSh0aGlzLl9hYWQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDb250ZW50RW5jcnlwdGlvbktleShjZWspXG4gICAgICAgICAgICAgICAgICAgIC5zZXRQcm90ZWN0ZWRIZWFkZXIodGhpcy5fcHJvdGVjdGVkSGVhZGVyKVxuICAgICAgICAgICAgICAgICAgICAuc2V0U2hhcmVkVW5wcm90ZWN0ZWRIZWFkZXIodGhpcy5fdW5wcm90ZWN0ZWRIZWFkZXIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRVbnByb3RlY3RlZEhlYWRlcihyZWNpcGllbnQudW5wcm90ZWN0ZWRIZWFkZXIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRLZXlNYW5hZ2VtZW50UGFyYW1ldGVycyh7IHAyYyB9KVxuICAgICAgICAgICAgICAgICAgICAuZW5jcnlwdChyZWNpcGllbnQua2V5LCB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnJlY2lwaWVudC5vcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICBbdW5wcm90ZWN0ZWRdOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGp3ZS5jaXBoZXJ0ZXh0ID0gZmxhdHRlbmVkLmNpcGhlcnRleHQ7XG4gICAgICAgICAgICAgICAgandlLml2ID0gZmxhdHRlbmVkLml2O1xuICAgICAgICAgICAgICAgIGp3ZS50YWcgPSBmbGF0dGVuZWQudGFnO1xuICAgICAgICAgICAgICAgIGlmIChmbGF0dGVuZWQuYWFkKVxuICAgICAgICAgICAgICAgICAgICBqd2UuYWFkID0gZmxhdHRlbmVkLmFhZDtcbiAgICAgICAgICAgICAgICBpZiAoZmxhdHRlbmVkLnByb3RlY3RlZClcbiAgICAgICAgICAgICAgICAgICAgandlLnByb3RlY3RlZCA9IGZsYXR0ZW5lZC5wcm90ZWN0ZWQ7XG4gICAgICAgICAgICAgICAgaWYgKGZsYXR0ZW5lZC51bnByb3RlY3RlZClcbiAgICAgICAgICAgICAgICAgICAgandlLnVucHJvdGVjdGVkID0gZmxhdHRlbmVkLnVucHJvdGVjdGVkO1xuICAgICAgICAgICAgICAgIHRhcmdldC5lbmNyeXB0ZWRfa2V5ID0gZmxhdHRlbmVkLmVuY3J5cHRlZF9rZXk7XG4gICAgICAgICAgICAgICAgaWYgKGZsYXR0ZW5lZC5oZWFkZXIpXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5oZWFkZXIgPSBmbGF0dGVuZWQuaGVhZGVyO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgeyBlbmNyeXB0ZWRLZXksIHBhcmFtZXRlcnMgfSA9IGF3YWl0IGVuY3J5cHRLZXlNYW5hZ2VtZW50KCgoX2EgPSByZWNpcGllbnQudW5wcm90ZWN0ZWRIZWFkZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hbGcpIHx8XG4gICAgICAgICAgICAgICAgKChfYiA9IHRoaXMuX3Byb3RlY3RlZEhlYWRlcikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmFsZykgfHxcbiAgICAgICAgICAgICAgICAoKF9jID0gdGhpcy5fdW5wcm90ZWN0ZWRIZWFkZXIpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5hbGcpLCBlbmMsIHJlY2lwaWVudC5rZXksIGNlaywgeyBwMmMgfSk7XG4gICAgICAgICAgICB0YXJnZXQuZW5jcnlwdGVkX2tleSA9IGJhc2U2NHVybChlbmNyeXB0ZWRLZXkpO1xuICAgICAgICAgICAgaWYgKHJlY2lwaWVudC51bnByb3RlY3RlZEhlYWRlciB8fCBwYXJhbWV0ZXJzKVxuICAgICAgICAgICAgICAgIHRhcmdldC5oZWFkZXIgPSB7IC4uLnJlY2lwaWVudC51bnByb3RlY3RlZEhlYWRlciwgLi4ucGFyYW1ldGVycyB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBqd2U7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgaW1wb3J0SldLIH0gZnJvbSAnLi4va2V5L2ltcG9ydC5qcyc7XG5pbXBvcnQgaXNPYmplY3QgZnJvbSAnLi4vbGliL2lzX29iamVjdC5qcyc7XG5pbXBvcnQgeyBKV1NJbnZhbGlkIH0gZnJvbSAnLi4vdXRpbC9lcnJvcnMuanMnO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEVtYmVkZGVkSldLKHByb3RlY3RlZEhlYWRlciwgdG9rZW4pIHtcbiAgICBjb25zdCBqb3NlSGVhZGVyID0ge1xuICAgICAgICAuLi5wcm90ZWN0ZWRIZWFkZXIsXG4gICAgICAgIC4uLnRva2VuID09PSBudWxsIHx8IHRva2VuID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0b2tlbi5oZWFkZXIsXG4gICAgfTtcbiAgICBpZiAoIWlzT2JqZWN0KGpvc2VIZWFkZXIuandrKSkge1xuICAgICAgICB0aHJvdyBuZXcgSldTSW52YWxpZCgnXCJqd2tcIiAoSlNPTiBXZWIgS2V5KSBIZWFkZXIgUGFyYW1ldGVyIG11c3QgYmUgYSBKU09OIG9iamVjdCcpO1xuICAgIH1cbiAgICBjb25zdCBrZXkgPSBhd2FpdCBpbXBvcnRKV0soeyAuLi5qb3NlSGVhZGVyLmp3aywgZXh0OiB0cnVlIH0sIGpvc2VIZWFkZXIuYWxnLCB0cnVlKTtcbiAgICBpZiAoa2V5IGluc3RhbmNlb2YgVWludDhBcnJheSB8fCBrZXkudHlwZSAhPT0gJ3B1YmxpYycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpXU0ludmFsaWQoJ1wiandrXCIgKEpTT04gV2ViIEtleSkgSGVhZGVyIFBhcmFtZXRlciBtdXN0IGJlIGEgcHVibGljIGtleScpO1xuICAgIH1cbiAgICByZXR1cm4ga2V5O1xufVxuIiwiaW1wb3J0IGRpZ2VzdCBmcm9tICcuLi9ydW50aW1lL2RpZ2VzdC5qcyc7XG5pbXBvcnQgeyBlbmNvZGUgYXMgYmFzZTY0dXJsIH0gZnJvbSAnLi4vcnVudGltZS9iYXNlNjR1cmwuanMnO1xuaW1wb3J0IHsgSk9TRU5vdFN1cHBvcnRlZCwgSldLSW52YWxpZCB9IGZyb20gJy4uL3V0aWwvZXJyb3JzLmpzJztcbmltcG9ydCB7IGVuY29kZXIgfSBmcm9tICcuLi9saWIvYnVmZmVyX3V0aWxzLmpzJztcbmltcG9ydCBpc09iamVjdCBmcm9tICcuLi9saWIvaXNfb2JqZWN0LmpzJztcbmNvbnN0IGNoZWNrID0gKHZhbHVlLCBkZXNjcmlwdGlvbikgPT4ge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnIHx8ICF2YWx1ZSkge1xuICAgICAgICB0aHJvdyBuZXcgSldLSW52YWxpZChgJHtkZXNjcmlwdGlvbn0gbWlzc2luZyBvciBpbnZhbGlkYCk7XG4gICAgfVxufTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjYWxjdWxhdGVKd2tUaHVtYnByaW50KGp3aywgZGlnZXN0QWxnb3JpdGhtKSB7XG4gICAgaWYgKCFpc09iamVjdChqd2spKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0pXSyBtdXN0IGJlIGFuIG9iamVjdCcpO1xuICAgIH1cbiAgICBkaWdlc3RBbGdvcml0aG0gIT09IG51bGwgJiYgZGlnZXN0QWxnb3JpdGhtICE9PSB2b2lkIDAgPyBkaWdlc3RBbGdvcml0aG0gOiAoZGlnZXN0QWxnb3JpdGhtID0gJ3NoYTI1NicpO1xuICAgIGlmIChkaWdlc3RBbGdvcml0aG0gIT09ICdzaGEyNTYnICYmXG4gICAgICAgIGRpZ2VzdEFsZ29yaXRobSAhPT0gJ3NoYTM4NCcgJiZcbiAgICAgICAgZGlnZXN0QWxnb3JpdGhtICE9PSAnc2hhNTEyJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdkaWdlc3RBbGdvcml0aG0gbXVzdCBvbmUgb2YgXCJzaGEyNTZcIiwgXCJzaGEzODRcIiwgb3IgXCJzaGE1MTJcIicpO1xuICAgIH1cbiAgICBsZXQgY29tcG9uZW50cztcbiAgICBzd2l0Y2ggKGp3ay5rdHkpIHtcbiAgICAgICAgY2FzZSAnRUMnOlxuICAgICAgICAgICAgY2hlY2soandrLmNydiwgJ1wiY3J2XCIgKEN1cnZlKSBQYXJhbWV0ZXInKTtcbiAgICAgICAgICAgIGNoZWNrKGp3ay54LCAnXCJ4XCIgKFggQ29vcmRpbmF0ZSkgUGFyYW1ldGVyJyk7XG4gICAgICAgICAgICBjaGVjayhqd2sueSwgJ1wieVwiIChZIENvb3JkaW5hdGUpIFBhcmFtZXRlcicpO1xuICAgICAgICAgICAgY29tcG9uZW50cyA9IHsgY3J2OiBqd2suY3J2LCBrdHk6IGp3ay5rdHksIHg6IGp3ay54LCB5OiBqd2sueSB9O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ09LUCc6XG4gICAgICAgICAgICBjaGVjayhqd2suY3J2LCAnXCJjcnZcIiAoU3VidHlwZSBvZiBLZXkgUGFpcikgUGFyYW1ldGVyJyk7XG4gICAgICAgICAgICBjaGVjayhqd2sueCwgJ1wieFwiIChQdWJsaWMgS2V5KSBQYXJhbWV0ZXInKTtcbiAgICAgICAgICAgIGNvbXBvbmVudHMgPSB7IGNydjogandrLmNydiwga3R5OiBqd2sua3R5LCB4OiBqd2sueCB9O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1JTQSc6XG4gICAgICAgICAgICBjaGVjayhqd2suZSwgJ1wiZVwiIChFeHBvbmVudCkgUGFyYW1ldGVyJyk7XG4gICAgICAgICAgICBjaGVjayhqd2subiwgJ1wiblwiIChNb2R1bHVzKSBQYXJhbWV0ZXInKTtcbiAgICAgICAgICAgIGNvbXBvbmVudHMgPSB7IGU6IGp3ay5lLCBrdHk6IGp3ay5rdHksIG46IGp3ay5uIH07XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnb2N0JzpcbiAgICAgICAgICAgIGNoZWNrKGp3ay5rLCAnXCJrXCIgKEtleSBWYWx1ZSkgUGFyYW1ldGVyJyk7XG4gICAgICAgICAgICBjb21wb25lbnRzID0geyBrOiBqd2suaywga3R5OiBqd2sua3R5IH07XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBKT1NFTm90U3VwcG9ydGVkKCdcImt0eVwiIChLZXkgVHlwZSkgUGFyYW1ldGVyIG1pc3Npbmcgb3IgdW5zdXBwb3J0ZWQnKTtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IGVuY29kZXIuZW5jb2RlKEpTT04uc3RyaW5naWZ5KGNvbXBvbmVudHMpKTtcbiAgICByZXR1cm4gYmFzZTY0dXJsKGF3YWl0IGRpZ2VzdChkaWdlc3RBbGdvcml0aG0sIGRhdGEpKTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjYWxjdWxhdGVKd2tUaHVtYnByaW50VXJpKGp3aywgZGlnZXN0QWxnb3JpdGhtKSB7XG4gICAgZGlnZXN0QWxnb3JpdGhtICE9PSBudWxsICYmIGRpZ2VzdEFsZ29yaXRobSAhPT0gdm9pZCAwID8gZGlnZXN0QWxnb3JpdGhtIDogKGRpZ2VzdEFsZ29yaXRobSA9ICdzaGEyNTYnKTtcbiAgICBjb25zdCB0aHVtYnByaW50ID0gYXdhaXQgY2FsY3VsYXRlSndrVGh1bWJwcmludChqd2ssIGRpZ2VzdEFsZ29yaXRobSk7XG4gICAgcmV0dXJuIGB1cm46aWV0ZjpwYXJhbXM6b2F1dGg6andrLXRodW1icHJpbnQ6c2hhLSR7ZGlnZXN0QWxnb3JpdGhtLnNsaWNlKC0zKX06JHt0aHVtYnByaW50fWA7XG59XG4iLCJpbXBvcnQgeyBpbXBvcnRKV0sgfSBmcm9tICcuLi9rZXkvaW1wb3J0LmpzJztcbmltcG9ydCB7IEpXS1NJbnZhbGlkLCBKT1NFTm90U3VwcG9ydGVkLCBKV0tTTm9NYXRjaGluZ0tleSwgSldLU011bHRpcGxlTWF0Y2hpbmdLZXlzLCB9IGZyb20gJy4uL3V0aWwvZXJyb3JzLmpzJztcbmltcG9ydCBpc09iamVjdCBmcm9tICcuLi9saWIvaXNfb2JqZWN0LmpzJztcbmZ1bmN0aW9uIGdldEt0eUZyb21BbGcoYWxnKSB7XG4gICAgc3dpdGNoICh0eXBlb2YgYWxnID09PSAnc3RyaW5nJyAmJiBhbGcuc2xpY2UoMCwgMikpIHtcbiAgICAgICAgY2FzZSAnUlMnOlxuICAgICAgICBjYXNlICdQUyc6XG4gICAgICAgICAgICByZXR1cm4gJ1JTQSc7XG4gICAgICAgIGNhc2UgJ0VTJzpcbiAgICAgICAgICAgIHJldHVybiAnRUMnO1xuICAgICAgICBjYXNlICdFZCc6XG4gICAgICAgICAgICByZXR1cm4gJ09LUCc7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgSk9TRU5vdFN1cHBvcnRlZCgnVW5zdXBwb3J0ZWQgXCJhbGdcIiB2YWx1ZSBmb3IgYSBKU09OIFdlYiBLZXkgU2V0Jyk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzSldLU0xpa2Uoandrcykge1xuICAgIHJldHVybiAoandrcyAmJlxuICAgICAgICB0eXBlb2YgandrcyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgQXJyYXkuaXNBcnJheShqd2tzLmtleXMpICYmXG4gICAgICAgIGp3a3Mua2V5cy5ldmVyeShpc0pXS0xpa2UpKTtcbn1cbmZ1bmN0aW9uIGlzSldLTGlrZShrZXkpIHtcbiAgICByZXR1cm4gaXNPYmplY3Qoa2V5KTtcbn1cbmZ1bmN0aW9uIGNsb25lKG9iaikge1xuICAgIGlmICh0eXBlb2Ygc3RydWN0dXJlZENsb25lID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBzdHJ1Y3R1cmVkQ2xvbmUob2JqKTtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7XG59XG5leHBvcnQgY2xhc3MgTG9jYWxKV0tTZXQge1xuICAgIGNvbnN0cnVjdG9yKGp3a3MpIHtcbiAgICAgICAgdGhpcy5fY2FjaGVkID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgaWYgKCFpc0pXS1NMaWtlKGp3a3MpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSldLU0ludmFsaWQoJ0pTT04gV2ViIEtleSBTZXQgbWFsZm9ybWVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fandrcyA9IGNsb25lKGp3a3MpO1xuICAgIH1cbiAgICBhc3luYyBnZXRLZXkocHJvdGVjdGVkSGVhZGVyLCB0b2tlbikge1xuICAgICAgICBjb25zdCB7IGFsZywga2lkIH0gPSB7IC4uLnByb3RlY3RlZEhlYWRlciwgLi4udG9rZW4gPT09IG51bGwgfHwgdG9rZW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRva2VuLmhlYWRlciB9O1xuICAgICAgICBjb25zdCBrdHkgPSBnZXRLdHlGcm9tQWxnKGFsZyk7XG4gICAgICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSB0aGlzLl9qd2tzLmtleXMuZmlsdGVyKChqd2spID0+IHtcbiAgICAgICAgICAgIGxldCBjYW5kaWRhdGUgPSBrdHkgPT09IGp3ay5rdHk7XG4gICAgICAgICAgICBpZiAoY2FuZGlkYXRlICYmIHR5cGVvZiBraWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgY2FuZGlkYXRlID0ga2lkID09PSBqd2sua2lkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZSAmJiB0eXBlb2YgandrLmFsZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBjYW5kaWRhdGUgPSBhbGcgPT09IGp3ay5hbGc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2FuZGlkYXRlICYmIHR5cGVvZiBqd2sudXNlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGNhbmRpZGF0ZSA9IGp3ay51c2UgPT09ICdzaWcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZSAmJiBBcnJheS5pc0FycmF5KGp3ay5rZXlfb3BzKSkge1xuICAgICAgICAgICAgICAgIGNhbmRpZGF0ZSA9IGp3ay5rZXlfb3BzLmluY2x1ZGVzKCd2ZXJpZnknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjYW5kaWRhdGUgJiYgYWxnID09PSAnRWREU0EnKSB7XG4gICAgICAgICAgICAgICAgY2FuZGlkYXRlID0gandrLmNydiA9PT0gJ0VkMjU1MTknIHx8IGp3ay5jcnYgPT09ICdFZDQ0OCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2FuZGlkYXRlKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChhbGcpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnRVMyNTYnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlID0gandrLmNydiA9PT0gJ1AtMjU2JztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdFUzI1NksnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlID0gandrLmNydiA9PT0gJ3NlY3AyNTZrMSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnRVMzODQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlID0gandrLmNydiA9PT0gJ1AtMzg0JztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdFUzUxMic6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGUgPSBqd2suY3J2ID09PSAnUC01MjEnO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgMDogandrLCBsZW5ndGggfSA9IGNhbmRpZGF0ZXM7XG4gICAgICAgIGlmIChsZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBKV0tTTm9NYXRjaGluZ0tleSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgSldLU011bHRpcGxlTWF0Y2hpbmdLZXlzKCk7XG4gICAgICAgICAgICBjb25zdCB7IF9jYWNoZWQgfSA9IHRoaXM7XG4gICAgICAgICAgICBlcnJvcltTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBhc3luYyBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgandrIG9mIGNhbmRpZGF0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIGF3YWl0IGltcG9ydFdpdGhBbGdDYWNoZShfY2FjaGVkLCBqd2ssIGFsZyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW1wb3J0V2l0aEFsZ0NhY2hlKHRoaXMuX2NhY2hlZCwgandrLCBhbGcpO1xuICAgIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIGltcG9ydFdpdGhBbGdDYWNoZShjYWNoZSwgandrLCBhbGcpIHtcbiAgICBjb25zdCBjYWNoZWQgPSBjYWNoZS5nZXQoandrKSB8fCBjYWNoZS5zZXQoandrLCB7fSkuZ2V0KGp3ayk7XG4gICAgaWYgKGNhY2hlZFthbGddID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgaW1wb3J0SldLKHsgLi4uandrLCBleHQ6IHRydWUgfSwgYWxnKTtcbiAgICAgICAgaWYgKGtleSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgfHwga2V5LnR5cGUgIT09ICdwdWJsaWMnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSldLU0ludmFsaWQoJ0pTT04gV2ViIEtleSBTZXQgbWVtYmVycyBtdXN0IGJlIHB1YmxpYyBrZXlzJyk7XG4gICAgICAgIH1cbiAgICAgICAgY2FjaGVkW2FsZ10gPSBrZXk7XG4gICAgfVxuICAgIHJldHVybiBjYWNoZWRbYWxnXTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVMb2NhbEpXS1NldChqd2tzKSB7XG4gICAgY29uc3Qgc2V0ID0gbmV3IExvY2FsSldLU2V0KGp3a3MpO1xuICAgIHJldHVybiBhc3luYyBmdW5jdGlvbiAocHJvdGVjdGVkSGVhZGVyLCB0b2tlbikge1xuICAgICAgICByZXR1cm4gc2V0LmdldEtleShwcm90ZWN0ZWRIZWFkZXIsIHRva2VuKTtcbiAgICB9O1xufVxuIiwiaW1wb3J0IGZldGNoSndrcyBmcm9tICcuLi9ydW50aW1lL2ZldGNoX2p3a3MuanMnO1xuaW1wb3J0IHsgaXNDbG91ZGZsYXJlV29ya2VycyB9IGZyb20gJy4uL3J1bnRpbWUvZW52LmpzJztcbmltcG9ydCB7IEpXS1NJbnZhbGlkLCBKV0tTTm9NYXRjaGluZ0tleSB9IGZyb20gJy4uL3V0aWwvZXJyb3JzLmpzJztcbmltcG9ydCB7IGlzSldLU0xpa2UsIExvY2FsSldLU2V0IH0gZnJvbSAnLi9sb2NhbC5qcyc7XG5jbGFzcyBSZW1vdGVKV0tTZXQgZXh0ZW5kcyBMb2NhbEpXS1NldCB7XG4gICAgY29uc3RydWN0b3IodXJsLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKHsga2V5czogW10gfSk7XG4gICAgICAgIHRoaXMuX2p3a3MgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICghKHVybCBpbnN0YW5jZW9mIFVSTCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3VybCBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIFVSTCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3VybCA9IG5ldyBVUkwodXJsLmhyZWYpO1xuICAgICAgICB0aGlzLl9vcHRpb25zID0geyBhZ2VudDogb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmFnZW50LCBoZWFkZXJzOiBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuaGVhZGVycyB9O1xuICAgICAgICB0aGlzLl90aW1lb3V0RHVyYXRpb24gPVxuICAgICAgICAgICAgdHlwZW9mIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMudGltZW91dER1cmF0aW9uKSA9PT0gJ251bWJlcicgPyBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMudGltZW91dER1cmF0aW9uIDogNTAwMDtcbiAgICAgICAgdGhpcy5fY29vbGRvd25EdXJhdGlvbiA9XG4gICAgICAgICAgICB0eXBlb2YgKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5jb29sZG93bkR1cmF0aW9uKSA9PT0gJ251bWJlcicgPyBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuY29vbGRvd25EdXJhdGlvbiA6IDMwMDAwO1xuICAgICAgICB0aGlzLl9jYWNoZU1heEFnZSA9IHR5cGVvZiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmNhY2hlTWF4QWdlKSA9PT0gJ251bWJlcicgPyBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuY2FjaGVNYXhBZ2UgOiA2MDAwMDA7XG4gICAgfVxuICAgIGNvb2xpbmdEb3duKCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHRoaXMuX2p3a3NUaW1lc3RhbXAgPT09ICdudW1iZXInXG4gICAgICAgICAgICA/IERhdGUubm93KCkgPCB0aGlzLl9qd2tzVGltZXN0YW1wICsgdGhpcy5fY29vbGRvd25EdXJhdGlvblxuICAgICAgICAgICAgOiBmYWxzZTtcbiAgICB9XG4gICAgZnJlc2goKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgdGhpcy5fandrc1RpbWVzdGFtcCA9PT0gJ251bWJlcidcbiAgICAgICAgICAgID8gRGF0ZS5ub3coKSA8IHRoaXMuX2p3a3NUaW1lc3RhbXAgKyB0aGlzLl9jYWNoZU1heEFnZVxuICAgICAgICAgICAgOiBmYWxzZTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0S2V5KHByb3RlY3RlZEhlYWRlciwgdG9rZW4pIHtcbiAgICAgICAgaWYgKCF0aGlzLl9qd2tzIHx8ICF0aGlzLmZyZXNoKCkpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVsb2FkKCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBzdXBlci5nZXRLZXkocHJvdGVjdGVkSGVhZGVyLCB0b2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIEpXS1NOb01hdGNoaW5nS2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29vbGluZ0Rvd24oKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmdldEtleShwcm90ZWN0ZWRIZWFkZXIsIHRva2VuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgcmVsb2FkKCkge1xuICAgICAgICBpZiAodGhpcy5fcGVuZGluZ0ZldGNoICYmIGlzQ2xvdWRmbGFyZVdvcmtlcnMoKSkge1xuICAgICAgICAgICAgdGhpcy5fcGVuZGluZ0ZldGNoID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3BlbmRpbmdGZXRjaCB8fCAodGhpcy5fcGVuZGluZ0ZldGNoID0gZmV0Y2hKd2tzKHRoaXMuX3VybCwgdGhpcy5fdGltZW91dER1cmF0aW9uLCB0aGlzLl9vcHRpb25zKVxuICAgICAgICAgICAgLnRoZW4oKGpzb24pID0+IHtcbiAgICAgICAgICAgIGlmICghaXNKV0tTTGlrZShqc29uKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKV0tTSW52YWxpZCgnSlNPTiBXZWIgS2V5IFNldCBtYWxmb3JtZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2p3a3MgPSB7IGtleXM6IGpzb24ua2V5cyB9O1xuICAgICAgICAgICAgdGhpcy5fandrc1RpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgICAgICAgICB0aGlzLl9wZW5kaW5nRmV0Y2ggPSB1bmRlZmluZWQ7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcGVuZGluZ0ZldGNoID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9KSk7XG4gICAgICAgIGF3YWl0IHRoaXMuX3BlbmRpbmdGZXRjaDtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVtb3RlSldLU2V0KHVybCwgb3B0aW9ucykge1xuICAgIGNvbnN0IHNldCA9IG5ldyBSZW1vdGVKV0tTZXQodXJsLCBvcHRpb25zKTtcbiAgICByZXR1cm4gYXN5bmMgZnVuY3Rpb24gKHByb3RlY3RlZEhlYWRlciwgdG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIHNldC5nZXRLZXkocHJvdGVjdGVkSGVhZGVyLCB0b2tlbik7XG4gICAgfTtcbn1cbiIsImltcG9ydCB7IEZsYXR0ZW5lZFNpZ24gfSBmcm9tICcuLi9mbGF0dGVuZWQvc2lnbi5qcyc7XG5leHBvcnQgY2xhc3MgQ29tcGFjdFNpZ24ge1xuICAgIGNvbnN0cnVjdG9yKHBheWxvYWQpIHtcbiAgICAgICAgdGhpcy5fZmxhdHRlbmVkID0gbmV3IEZsYXR0ZW5lZFNpZ24ocGF5bG9hZCk7XG4gICAgfVxuICAgIHNldFByb3RlY3RlZEhlYWRlcihwcm90ZWN0ZWRIZWFkZXIpIHtcbiAgICAgICAgdGhpcy5fZmxhdHRlbmVkLnNldFByb3RlY3RlZEhlYWRlcihwcm90ZWN0ZWRIZWFkZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgYXN5bmMgc2lnbihrZXksIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgandzID0gYXdhaXQgdGhpcy5fZmxhdHRlbmVkLnNpZ24oa2V5LCBvcHRpb25zKTtcbiAgICAgICAgaWYgKGp3cy5wYXlsb2FkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3VzZSB0aGUgZmxhdHRlbmVkIG1vZHVsZSBmb3IgY3JlYXRpbmcgSldTIHdpdGggYjY0OiBmYWxzZScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHtqd3MucHJvdGVjdGVkfS4ke2p3cy5wYXlsb2FkfS4ke2p3cy5zaWduYXR1cmV9YDtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBmbGF0dGVuZWRWZXJpZnkgfSBmcm9tICcuLi9mbGF0dGVuZWQvdmVyaWZ5LmpzJztcbmltcG9ydCB7IEpXU0ludmFsaWQgfSBmcm9tICcuLi8uLi91dGlsL2Vycm9ycy5qcyc7XG5pbXBvcnQgeyBkZWNvZGVyIH0gZnJvbSAnLi4vLi4vbGliL2J1ZmZlcl91dGlscy5qcyc7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29tcGFjdFZlcmlmeShqd3MsIGtleSwgb3B0aW9ucykge1xuICAgIGlmIChqd3MgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgIGp3cyA9IGRlY29kZXIuZGVjb2RlKGp3cyk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgandzICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgSldTSW52YWxpZCgnQ29tcGFjdCBKV1MgbXVzdCBiZSBhIHN0cmluZyBvciBVaW50OEFycmF5Jyk7XG4gICAgfVxuICAgIGNvbnN0IHsgMDogcHJvdGVjdGVkSGVhZGVyLCAxOiBwYXlsb2FkLCAyOiBzaWduYXR1cmUsIGxlbmd0aCB9ID0gandzLnNwbGl0KCcuJyk7XG4gICAgaWYgKGxlbmd0aCAhPT0gMykge1xuICAgICAgICB0aHJvdyBuZXcgSldTSW52YWxpZCgnSW52YWxpZCBDb21wYWN0IEpXUycpO1xuICAgIH1cbiAgICBjb25zdCB2ZXJpZmllZCA9IGF3YWl0IGZsYXR0ZW5lZFZlcmlmeSh7IHBheWxvYWQsIHByb3RlY3RlZDogcHJvdGVjdGVkSGVhZGVyLCBzaWduYXR1cmUgfSwga2V5LCBvcHRpb25zKTtcbiAgICBjb25zdCByZXN1bHQgPSB7IHBheWxvYWQ6IHZlcmlmaWVkLnBheWxvYWQsIHByb3RlY3RlZEhlYWRlcjogdmVyaWZpZWQucHJvdGVjdGVkSGVhZGVyIH07XG4gICAgaWYgKHR5cGVvZiBrZXkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHsgLi4ucmVzdWx0LCBrZXk6IHZlcmlmaWVkLmtleSB9O1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuIiwiaW1wb3J0IHsgZW5jb2RlIGFzIGJhc2U2NHVybCB9IGZyb20gJy4uLy4uL3J1bnRpbWUvYmFzZTY0dXJsLmpzJztcbmltcG9ydCBzaWduIGZyb20gJy4uLy4uL3J1bnRpbWUvc2lnbi5qcyc7XG5pbXBvcnQgaXNEaXNqb2ludCBmcm9tICcuLi8uLi9saWIvaXNfZGlzam9pbnQuanMnO1xuaW1wb3J0IHsgSldTSW52YWxpZCB9IGZyb20gJy4uLy4uL3V0aWwvZXJyb3JzLmpzJztcbmltcG9ydCB7IGVuY29kZXIsIGRlY29kZXIsIGNvbmNhdCB9IGZyb20gJy4uLy4uL2xpYi9idWZmZXJfdXRpbHMuanMnO1xuaW1wb3J0IGNoZWNrS2V5VHlwZSBmcm9tICcuLi8uLi9saWIvY2hlY2tfa2V5X3R5cGUuanMnO1xuaW1wb3J0IHZhbGlkYXRlQ3JpdCBmcm9tICcuLi8uLi9saWIvdmFsaWRhdGVfY3JpdC5qcyc7XG5leHBvcnQgY2xhc3MgRmxhdHRlbmVkU2lnbiB7XG4gICAgY29uc3RydWN0b3IocGF5bG9hZCkge1xuICAgICAgICBpZiAoIShwYXlsb2FkIGluc3RhbmNlb2YgVWludDhBcnJheSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3BheWxvYWQgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBVaW50OEFycmF5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcGF5bG9hZCA9IHBheWxvYWQ7XG4gICAgfVxuICAgIHNldFByb3RlY3RlZEhlYWRlcihwcm90ZWN0ZWRIZWFkZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuX3Byb3RlY3RlZEhlYWRlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignc2V0UHJvdGVjdGVkSGVhZGVyIGNhbiBvbmx5IGJlIGNhbGxlZCBvbmNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcHJvdGVjdGVkSGVhZGVyID0gcHJvdGVjdGVkSGVhZGVyO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc2V0VW5wcm90ZWN0ZWRIZWFkZXIodW5wcm90ZWN0ZWRIZWFkZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuX3VucHJvdGVjdGVkSGVhZGVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdzZXRVbnByb3RlY3RlZEhlYWRlciBjYW4gb25seSBiZSBjYWxsZWQgb25jZScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3VucHJvdGVjdGVkSGVhZGVyID0gdW5wcm90ZWN0ZWRIZWFkZXI7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBhc3luYyBzaWduKGtleSwgb3B0aW9ucykge1xuICAgICAgICBpZiAoIXRoaXMuX3Byb3RlY3RlZEhlYWRlciAmJiAhdGhpcy5fdW5wcm90ZWN0ZWRIZWFkZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBKV1NJbnZhbGlkKCdlaXRoZXIgc2V0UHJvdGVjdGVkSGVhZGVyIG9yIHNldFVucHJvdGVjdGVkSGVhZGVyIG11c3QgYmUgY2FsbGVkIGJlZm9yZSAjc2lnbigpJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc0Rpc2pvaW50KHRoaXMuX3Byb3RlY3RlZEhlYWRlciwgdGhpcy5fdW5wcm90ZWN0ZWRIZWFkZXIpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSldTSW52YWxpZCgnSldTIFByb3RlY3RlZCBhbmQgSldTIFVucHJvdGVjdGVkIEhlYWRlciBQYXJhbWV0ZXIgbmFtZXMgbXVzdCBiZSBkaXNqb2ludCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGpvc2VIZWFkZXIgPSB7XG4gICAgICAgICAgICAuLi50aGlzLl9wcm90ZWN0ZWRIZWFkZXIsXG4gICAgICAgICAgICAuLi50aGlzLl91bnByb3RlY3RlZEhlYWRlcixcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZXh0ZW5zaW9ucyA9IHZhbGlkYXRlQ3JpdChKV1NJbnZhbGlkLCBuZXcgTWFwKFtbJ2I2NCcsIHRydWVdXSksIG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5jcml0LCB0aGlzLl9wcm90ZWN0ZWRIZWFkZXIsIGpvc2VIZWFkZXIpO1xuICAgICAgICBsZXQgYjY0ID0gdHJ1ZTtcbiAgICAgICAgaWYgKGV4dGVuc2lvbnMuaGFzKCdiNjQnKSkge1xuICAgICAgICAgICAgYjY0ID0gdGhpcy5fcHJvdGVjdGVkSGVhZGVyLmI2NDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYjY0ICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSldTSW52YWxpZCgnVGhlIFwiYjY0XCIgKGJhc2U2NHVybC1lbmNvZGUgcGF5bG9hZCkgSGVhZGVyIFBhcmFtZXRlciBtdXN0IGJlIGEgYm9vbGVhbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgYWxnIH0gPSBqb3NlSGVhZGVyO1xuICAgICAgICBpZiAodHlwZW9mIGFsZyAhPT0gJ3N0cmluZycgfHwgIWFsZykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEpXU0ludmFsaWQoJ0pXUyBcImFsZ1wiIChBbGdvcml0aG0pIEhlYWRlciBQYXJhbWV0ZXIgbWlzc2luZyBvciBpbnZhbGlkJyk7XG4gICAgICAgIH1cbiAgICAgICAgY2hlY2tLZXlUeXBlKGFsZywga2V5LCAnc2lnbicpO1xuICAgICAgICBsZXQgcGF5bG9hZCA9IHRoaXMuX3BheWxvYWQ7XG4gICAgICAgIGlmIChiNjQpIHtcbiAgICAgICAgICAgIHBheWxvYWQgPSBlbmNvZGVyLmVuY29kZShiYXNlNjR1cmwocGF5bG9hZCkpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBwcm90ZWN0ZWRIZWFkZXI7XG4gICAgICAgIGlmICh0aGlzLl9wcm90ZWN0ZWRIZWFkZXIpIHtcbiAgICAgICAgICAgIHByb3RlY3RlZEhlYWRlciA9IGVuY29kZXIuZW5jb2RlKGJhc2U2NHVybChKU09OLnN0cmluZ2lmeSh0aGlzLl9wcm90ZWN0ZWRIZWFkZXIpKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwcm90ZWN0ZWRIZWFkZXIgPSBlbmNvZGVyLmVuY29kZSgnJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGF0YSA9IGNvbmNhdChwcm90ZWN0ZWRIZWFkZXIsIGVuY29kZXIuZW5jb2RlKCcuJyksIHBheWxvYWQpO1xuICAgICAgICBjb25zdCBzaWduYXR1cmUgPSBhd2FpdCBzaWduKGFsZywga2V5LCBkYXRhKTtcbiAgICAgICAgY29uc3QgandzID0ge1xuICAgICAgICAgICAgc2lnbmF0dXJlOiBiYXNlNjR1cmwoc2lnbmF0dXJlKSxcbiAgICAgICAgICAgIHBheWxvYWQ6ICcnLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoYjY0KSB7XG4gICAgICAgICAgICBqd3MucGF5bG9hZCA9IGRlY29kZXIuZGVjb2RlKHBheWxvYWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl91bnByb3RlY3RlZEhlYWRlcikge1xuICAgICAgICAgICAgandzLmhlYWRlciA9IHRoaXMuX3VucHJvdGVjdGVkSGVhZGVyO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9wcm90ZWN0ZWRIZWFkZXIpIHtcbiAgICAgICAgICAgIGp3cy5wcm90ZWN0ZWQgPSBkZWNvZGVyLmRlY29kZShwcm90ZWN0ZWRIZWFkZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBqd3M7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgZGVjb2RlIGFzIGJhc2U2NHVybCB9IGZyb20gJy4uLy4uL3J1bnRpbWUvYmFzZTY0dXJsLmpzJztcbmltcG9ydCB2ZXJpZnkgZnJvbSAnLi4vLi4vcnVudGltZS92ZXJpZnkuanMnO1xuaW1wb3J0IHsgSk9TRUFsZ05vdEFsbG93ZWQsIEpXU0ludmFsaWQsIEpXU1NpZ25hdHVyZVZlcmlmaWNhdGlvbkZhaWxlZCB9IGZyb20gJy4uLy4uL3V0aWwvZXJyb3JzLmpzJztcbmltcG9ydCB7IGNvbmNhdCwgZW5jb2RlciwgZGVjb2RlciB9IGZyb20gJy4uLy4uL2xpYi9idWZmZXJfdXRpbHMuanMnO1xuaW1wb3J0IGlzRGlzam9pbnQgZnJvbSAnLi4vLi4vbGliL2lzX2Rpc2pvaW50LmpzJztcbmltcG9ydCBpc09iamVjdCBmcm9tICcuLi8uLi9saWIvaXNfb2JqZWN0LmpzJztcbmltcG9ydCBjaGVja0tleVR5cGUgZnJvbSAnLi4vLi4vbGliL2NoZWNrX2tleV90eXBlLmpzJztcbmltcG9ydCB2YWxpZGF0ZUNyaXQgZnJvbSAnLi4vLi4vbGliL3ZhbGlkYXRlX2NyaXQuanMnO1xuaW1wb3J0IHZhbGlkYXRlQWxnb3JpdGhtcyBmcm9tICcuLi8uLi9saWIvdmFsaWRhdGVfYWxnb3JpdGhtcy5qcyc7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmxhdHRlbmVkVmVyaWZ5KGp3cywga2V5LCBvcHRpb25zKSB7XG4gICAgdmFyIF9hO1xuICAgIGlmICghaXNPYmplY3QoandzKSkge1xuICAgICAgICB0aHJvdyBuZXcgSldTSW52YWxpZCgnRmxhdHRlbmVkIEpXUyBtdXN0IGJlIGFuIG9iamVjdCcpO1xuICAgIH1cbiAgICBpZiAoandzLnByb3RlY3RlZCA9PT0gdW5kZWZpbmVkICYmIGp3cy5oZWFkZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgSldTSW52YWxpZCgnRmxhdHRlbmVkIEpXUyBtdXN0IGhhdmUgZWl0aGVyIG9mIHRoZSBcInByb3RlY3RlZFwiIG9yIFwiaGVhZGVyXCIgbWVtYmVycycpO1xuICAgIH1cbiAgICBpZiAoandzLnByb3RlY3RlZCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBqd3MucHJvdGVjdGVkICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgSldTSW52YWxpZCgnSldTIFByb3RlY3RlZCBIZWFkZXIgaW5jb3JyZWN0IHR5cGUnKTtcbiAgICB9XG4gICAgaWYgKGp3cy5wYXlsb2FkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpXU0ludmFsaWQoJ0pXUyBQYXlsb2FkIG1pc3NpbmcnKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBqd3Muc2lnbmF0dXJlICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgSldTSW52YWxpZCgnSldTIFNpZ25hdHVyZSBtaXNzaW5nIG9yIGluY29ycmVjdCB0eXBlJyk7XG4gICAgfVxuICAgIGlmIChqd3MuaGVhZGVyICE9PSB1bmRlZmluZWQgJiYgIWlzT2JqZWN0KGp3cy5oZWFkZXIpKSB7XG4gICAgICAgIHRocm93IG5ldyBKV1NJbnZhbGlkKCdKV1MgVW5wcm90ZWN0ZWQgSGVhZGVyIGluY29ycmVjdCB0eXBlJyk7XG4gICAgfVxuICAgIGxldCBwYXJzZWRQcm90ID0ge307XG4gICAgaWYgKGp3cy5wcm90ZWN0ZWQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHByb3RlY3RlZEhlYWRlciA9IGJhc2U2NHVybChqd3MucHJvdGVjdGVkKTtcbiAgICAgICAgICAgIHBhcnNlZFByb3QgPSBKU09OLnBhcnNlKGRlY29kZXIuZGVjb2RlKHByb3RlY3RlZEhlYWRlcikpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfYikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEpXU0ludmFsaWQoJ0pXUyBQcm90ZWN0ZWQgSGVhZGVyIGlzIGludmFsaWQnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWlzRGlzam9pbnQocGFyc2VkUHJvdCwgandzLmhlYWRlcikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpXU0ludmFsaWQoJ0pXUyBQcm90ZWN0ZWQgYW5kIEpXUyBVbnByb3RlY3RlZCBIZWFkZXIgUGFyYW1ldGVyIG5hbWVzIG11c3QgYmUgZGlzam9pbnQnKTtcbiAgICB9XG4gICAgY29uc3Qgam9zZUhlYWRlciA9IHtcbiAgICAgICAgLi4ucGFyc2VkUHJvdCxcbiAgICAgICAgLi4uandzLmhlYWRlcixcbiAgICB9O1xuICAgIGNvbnN0IGV4dGVuc2lvbnMgPSB2YWxpZGF0ZUNyaXQoSldTSW52YWxpZCwgbmV3IE1hcChbWydiNjQnLCB0cnVlXV0pLCBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuY3JpdCwgcGFyc2VkUHJvdCwgam9zZUhlYWRlcik7XG4gICAgbGV0IGI2NCA9IHRydWU7XG4gICAgaWYgKGV4dGVuc2lvbnMuaGFzKCdiNjQnKSkge1xuICAgICAgICBiNjQgPSBwYXJzZWRQcm90LmI2NDtcbiAgICAgICAgaWYgKHR5cGVvZiBiNjQgIT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEpXU0ludmFsaWQoJ1RoZSBcImI2NFwiIChiYXNlNjR1cmwtZW5jb2RlIHBheWxvYWQpIEhlYWRlciBQYXJhbWV0ZXIgbXVzdCBiZSBhIGJvb2xlYW4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB7IGFsZyB9ID0gam9zZUhlYWRlcjtcbiAgICBpZiAodHlwZW9mIGFsZyAhPT0gJ3N0cmluZycgfHwgIWFsZykge1xuICAgICAgICB0aHJvdyBuZXcgSldTSW52YWxpZCgnSldTIFwiYWxnXCIgKEFsZ29yaXRobSkgSGVhZGVyIFBhcmFtZXRlciBtaXNzaW5nIG9yIGludmFsaWQnKTtcbiAgICB9XG4gICAgY29uc3QgYWxnb3JpdGhtcyA9IG9wdGlvbnMgJiYgdmFsaWRhdGVBbGdvcml0aG1zKCdhbGdvcml0aG1zJywgb3B0aW9ucy5hbGdvcml0aG1zKTtcbiAgICBpZiAoYWxnb3JpdGhtcyAmJiAhYWxnb3JpdGhtcy5oYXMoYWxnKSkge1xuICAgICAgICB0aHJvdyBuZXcgSk9TRUFsZ05vdEFsbG93ZWQoJ1wiYWxnXCIgKEFsZ29yaXRobSkgSGVhZGVyIFBhcmFtZXRlciBub3QgYWxsb3dlZCcpO1xuICAgIH1cbiAgICBpZiAoYjY0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgandzLnBheWxvYWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSldTSW52YWxpZCgnSldTIFBheWxvYWQgbXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBqd3MucGF5bG9hZCAhPT0gJ3N0cmluZycgJiYgIShqd3MucGF5bG9hZCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpKSB7XG4gICAgICAgIHRocm93IG5ldyBKV1NJbnZhbGlkKCdKV1MgUGF5bG9hZCBtdXN0IGJlIGEgc3RyaW5nIG9yIGFuIFVpbnQ4QXJyYXkgaW5zdGFuY2UnKTtcbiAgICB9XG4gICAgbGV0IHJlc29sdmVkS2V5ID0gZmFsc2U7XG4gICAgaWYgKHR5cGVvZiBrZXkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAga2V5ID0gYXdhaXQga2V5KHBhcnNlZFByb3QsIGp3cyk7XG4gICAgICAgIHJlc29sdmVkS2V5ID0gdHJ1ZTtcbiAgICB9XG4gICAgY2hlY2tLZXlUeXBlKGFsZywga2V5LCAndmVyaWZ5Jyk7XG4gICAgY29uc3QgZGF0YSA9IGNvbmNhdChlbmNvZGVyLmVuY29kZSgoX2EgPSBqd3MucHJvdGVjdGVkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyksIGVuY29kZXIuZW5jb2RlKCcuJyksIHR5cGVvZiBqd3MucGF5bG9hZCA9PT0gJ3N0cmluZycgPyBlbmNvZGVyLmVuY29kZShqd3MucGF5bG9hZCkgOiBqd3MucGF5bG9hZCk7XG4gICAgY29uc3Qgc2lnbmF0dXJlID0gYmFzZTY0dXJsKGp3cy5zaWduYXR1cmUpO1xuICAgIGNvbnN0IHZlcmlmaWVkID0gYXdhaXQgdmVyaWZ5KGFsZywga2V5LCBzaWduYXR1cmUsIGRhdGEpO1xuICAgIGlmICghdmVyaWZpZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpXU1NpZ25hdHVyZVZlcmlmaWNhdGlvbkZhaWxlZCgpO1xuICAgIH1cbiAgICBsZXQgcGF5bG9hZDtcbiAgICBpZiAoYjY0KSB7XG4gICAgICAgIHBheWxvYWQgPSBiYXNlNjR1cmwoandzLnBheWxvYWQpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgandzLnBheWxvYWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHBheWxvYWQgPSBlbmNvZGVyLmVuY29kZShqd3MucGF5bG9hZCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBwYXlsb2FkID0gandzLnBheWxvYWQ7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IHsgcGF5bG9hZCB9O1xuICAgIGlmIChqd3MucHJvdGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmVzdWx0LnByb3RlY3RlZEhlYWRlciA9IHBhcnNlZFByb3Q7XG4gICAgfVxuICAgIGlmIChqd3MuaGVhZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmVzdWx0LnVucHJvdGVjdGVkSGVhZGVyID0gandzLmhlYWRlcjtcbiAgICB9XG4gICAgaWYgKHJlc29sdmVkS2V5KSB7XG4gICAgICAgIHJldHVybiB7IC4uLnJlc3VsdCwga2V5IH07XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG4iLCJpbXBvcnQgeyBGbGF0dGVuZWRTaWduIH0gZnJvbSAnLi4vZmxhdHRlbmVkL3NpZ24uanMnO1xuaW1wb3J0IHsgSldTSW52YWxpZCB9IGZyb20gJy4uLy4uL3V0aWwvZXJyb3JzLmpzJztcbmNsYXNzIEluZGl2aWR1YWxTaWduYXR1cmUge1xuICAgIGNvbnN0cnVjdG9yKHNpZywga2V5LCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMucGFyZW50ID0gc2lnO1xuICAgICAgICB0aGlzLmtleSA9IGtleTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG4gICAgc2V0UHJvdGVjdGVkSGVhZGVyKHByb3RlY3RlZEhlYWRlcikge1xuICAgICAgICBpZiAodGhpcy5wcm90ZWN0ZWRIZWFkZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3NldFByb3RlY3RlZEhlYWRlciBjYW4gb25seSBiZSBjYWxsZWQgb25jZScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJvdGVjdGVkSGVhZGVyID0gcHJvdGVjdGVkSGVhZGVyO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc2V0VW5wcm90ZWN0ZWRIZWFkZXIodW5wcm90ZWN0ZWRIZWFkZXIpIHtcbiAgICAgICAgaWYgKHRoaXMudW5wcm90ZWN0ZWRIZWFkZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3NldFVucHJvdGVjdGVkSGVhZGVyIGNhbiBvbmx5IGJlIGNhbGxlZCBvbmNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51bnByb3RlY3RlZEhlYWRlciA9IHVucHJvdGVjdGVkSGVhZGVyO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgYWRkU2lnbmF0dXJlKC4uLmFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmFkZFNpZ25hdHVyZSguLi5hcmdzKTtcbiAgICB9XG4gICAgc2lnbiguLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5zaWduKC4uLmFyZ3MpO1xuICAgIH1cbiAgICBkb25lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQ7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEdlbmVyYWxTaWduIHtcbiAgICBjb25zdHJ1Y3RvcihwYXlsb2FkKSB7XG4gICAgICAgIHRoaXMuX3NpZ25hdHVyZXMgPSBbXTtcbiAgICAgICAgdGhpcy5fcGF5bG9hZCA9IHBheWxvYWQ7XG4gICAgfVxuICAgIGFkZFNpZ25hdHVyZShrZXksIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qgc2lnbmF0dXJlID0gbmV3IEluZGl2aWR1YWxTaWduYXR1cmUodGhpcywga2V5LCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5fc2lnbmF0dXJlcy5wdXNoKHNpZ25hdHVyZSk7XG4gICAgICAgIHJldHVybiBzaWduYXR1cmU7XG4gICAgfVxuICAgIGFzeW5jIHNpZ24oKSB7XG4gICAgICAgIGlmICghdGhpcy5fc2lnbmF0dXJlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBKV1NJbnZhbGlkKCdhdCBsZWFzdCBvbmUgc2lnbmF0dXJlIG11c3QgYmUgYWRkZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBqd3MgPSB7XG4gICAgICAgICAgICBzaWduYXR1cmVzOiBbXSxcbiAgICAgICAgICAgIHBheWxvYWQ6ICcnLFxuICAgICAgICB9O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3NpZ25hdHVyZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IHRoaXMuX3NpZ25hdHVyZXNbaV07XG4gICAgICAgICAgICBjb25zdCBmbGF0dGVuZWQgPSBuZXcgRmxhdHRlbmVkU2lnbih0aGlzLl9wYXlsb2FkKTtcbiAgICAgICAgICAgIGZsYXR0ZW5lZC5zZXRQcm90ZWN0ZWRIZWFkZXIoc2lnbmF0dXJlLnByb3RlY3RlZEhlYWRlcik7XG4gICAgICAgICAgICBmbGF0dGVuZWQuc2V0VW5wcm90ZWN0ZWRIZWFkZXIoc2lnbmF0dXJlLnVucHJvdGVjdGVkSGVhZGVyKTtcbiAgICAgICAgICAgIGNvbnN0IHsgcGF5bG9hZCwgLi4ucmVzdCB9ID0gYXdhaXQgZmxhdHRlbmVkLnNpZ24oc2lnbmF0dXJlLmtleSwgc2lnbmF0dXJlLm9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBqd3MucGF5bG9hZCA9IHBheWxvYWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChqd3MucGF5bG9hZCAhPT0gcGF5bG9hZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKV1NJbnZhbGlkKCdpbmNvbnNpc3RlbnQgdXNlIG9mIEpXUyBVbmVuY29kZWQgUGF5bG9hZCBPcHRpb24gKFJGQzc3OTcpJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBqd3Muc2lnbmF0dXJlcy5wdXNoKHJlc3QpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBqd3M7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgZmxhdHRlbmVkVmVyaWZ5IH0gZnJvbSAnLi4vZmxhdHRlbmVkL3ZlcmlmeS5qcyc7XG5pbXBvcnQgeyBKV1NJbnZhbGlkLCBKV1NTaWduYXR1cmVWZXJpZmljYXRpb25GYWlsZWQgfSBmcm9tICcuLi8uLi91dGlsL2Vycm9ycy5qcyc7XG5pbXBvcnQgaXNPYmplY3QgZnJvbSAnLi4vLi4vbGliL2lzX29iamVjdC5qcyc7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhbFZlcmlmeShqd3MsIGtleSwgb3B0aW9ucykge1xuICAgIGlmICghaXNPYmplY3QoandzKSkge1xuICAgICAgICB0aHJvdyBuZXcgSldTSW52YWxpZCgnR2VuZXJhbCBKV1MgbXVzdCBiZSBhbiBvYmplY3QnKTtcbiAgICB9XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGp3cy5zaWduYXR1cmVzKSB8fCAhandzLnNpZ25hdHVyZXMuZXZlcnkoaXNPYmplY3QpKSB7XG4gICAgICAgIHRocm93IG5ldyBKV1NJbnZhbGlkKCdKV1MgU2lnbmF0dXJlcyBtaXNzaW5nIG9yIGluY29ycmVjdCB0eXBlJyk7XG4gICAgfVxuICAgIGZvciAoY29uc3Qgc2lnbmF0dXJlIG9mIGp3cy5zaWduYXR1cmVzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZmxhdHRlbmVkVmVyaWZ5KHtcbiAgICAgICAgICAgICAgICBoZWFkZXI6IHNpZ25hdHVyZS5oZWFkZXIsXG4gICAgICAgICAgICAgICAgcGF5bG9hZDogandzLnBheWxvYWQsXG4gICAgICAgICAgICAgICAgcHJvdGVjdGVkOiBzaWduYXR1cmUucHJvdGVjdGVkLFxuICAgICAgICAgICAgICAgIHNpZ25hdHVyZTogc2lnbmF0dXJlLnNpZ25hdHVyZSxcbiAgICAgICAgICAgIH0sIGtleSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9hKSB7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IEpXU1NpZ25hdHVyZVZlcmlmaWNhdGlvbkZhaWxlZCgpO1xufVxuIiwiaW1wb3J0IHsgY29tcGFjdERlY3J5cHQgfSBmcm9tICcuLi9qd2UvY29tcGFjdC9kZWNyeXB0LmpzJztcbmltcG9ydCBqd3RQYXlsb2FkIGZyb20gJy4uL2xpYi9qd3RfY2xhaW1zX3NldC5qcyc7XG5pbXBvcnQgeyBKV1RDbGFpbVZhbGlkYXRpb25GYWlsZWQgfSBmcm9tICcuLi91dGlsL2Vycm9ycy5qcyc7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gand0RGVjcnlwdChqd3QsIGtleSwgb3B0aW9ucykge1xuICAgIGNvbnN0IGRlY3J5cHRlZCA9IGF3YWl0IGNvbXBhY3REZWNyeXB0KGp3dCwga2V5LCBvcHRpb25zKTtcbiAgICBjb25zdCBwYXlsb2FkID0gand0UGF5bG9hZChkZWNyeXB0ZWQucHJvdGVjdGVkSGVhZGVyLCBkZWNyeXB0ZWQucGxhaW50ZXh0LCBvcHRpb25zKTtcbiAgICBjb25zdCB7IHByb3RlY3RlZEhlYWRlciB9ID0gZGVjcnlwdGVkO1xuICAgIGlmIChwcm90ZWN0ZWRIZWFkZXIuaXNzICE9PSB1bmRlZmluZWQgJiYgcHJvdGVjdGVkSGVhZGVyLmlzcyAhPT0gcGF5bG9hZC5pc3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpXVENsYWltVmFsaWRhdGlvbkZhaWxlZCgncmVwbGljYXRlZCBcImlzc1wiIGNsYWltIGhlYWRlciBwYXJhbWV0ZXIgbWlzbWF0Y2gnLCAnaXNzJywgJ21pc21hdGNoJyk7XG4gICAgfVxuICAgIGlmIChwcm90ZWN0ZWRIZWFkZXIuc3ViICE9PSB1bmRlZmluZWQgJiYgcHJvdGVjdGVkSGVhZGVyLnN1YiAhPT0gcGF5bG9hZC5zdWIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpXVENsYWltVmFsaWRhdGlvbkZhaWxlZCgncmVwbGljYXRlZCBcInN1YlwiIGNsYWltIGhlYWRlciBwYXJhbWV0ZXIgbWlzbWF0Y2gnLCAnc3ViJywgJ21pc21hdGNoJyk7XG4gICAgfVxuICAgIGlmIChwcm90ZWN0ZWRIZWFkZXIuYXVkICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkocHJvdGVjdGVkSGVhZGVyLmF1ZCkgIT09IEpTT04uc3RyaW5naWZ5KHBheWxvYWQuYXVkKSkge1xuICAgICAgICB0aHJvdyBuZXcgSldUQ2xhaW1WYWxpZGF0aW9uRmFpbGVkKCdyZXBsaWNhdGVkIFwiYXVkXCIgY2xhaW0gaGVhZGVyIHBhcmFtZXRlciBtaXNtYXRjaCcsICdhdWQnLCAnbWlzbWF0Y2gnKTtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0geyBwYXlsb2FkLCBwcm90ZWN0ZWRIZWFkZXIgfTtcbiAgICBpZiAodHlwZW9mIGtleSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4geyAuLi5yZXN1bHQsIGtleTogZGVjcnlwdGVkLmtleSB9O1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuIiwiaW1wb3J0IHsgQ29tcGFjdEVuY3J5cHQgfSBmcm9tICcuLi9qd2UvY29tcGFjdC9lbmNyeXB0LmpzJztcbmltcG9ydCB7IGVuY29kZXIgfSBmcm9tICcuLi9saWIvYnVmZmVyX3V0aWxzLmpzJztcbmltcG9ydCB7IFByb2R1Y2VKV1QgfSBmcm9tICcuL3Byb2R1Y2UuanMnO1xuZXhwb3J0IGNsYXNzIEVuY3J5cHRKV1QgZXh0ZW5kcyBQcm9kdWNlSldUIHtcbiAgICBzZXRQcm90ZWN0ZWRIZWFkZXIocHJvdGVjdGVkSGVhZGVyKSB7XG4gICAgICAgIGlmICh0aGlzLl9wcm90ZWN0ZWRIZWFkZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3NldFByb3RlY3RlZEhlYWRlciBjYW4gb25seSBiZSBjYWxsZWQgb25jZScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3Byb3RlY3RlZEhlYWRlciA9IHByb3RlY3RlZEhlYWRlcjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHNldEtleU1hbmFnZW1lbnRQYXJhbWV0ZXJzKHBhcmFtZXRlcnMpIHtcbiAgICAgICAgaWYgKHRoaXMuX2tleU1hbmFnZW1lbnRQYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdzZXRLZXlNYW5hZ2VtZW50UGFyYW1ldGVycyBjYW4gb25seSBiZSBjYWxsZWQgb25jZScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2tleU1hbmFnZW1lbnRQYXJhbWV0ZXJzID0gcGFyYW1ldGVycztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHNldENvbnRlbnRFbmNyeXB0aW9uS2V5KGNlaykge1xuICAgICAgICBpZiAodGhpcy5fY2VrKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdzZXRDb250ZW50RW5jcnlwdGlvbktleSBjYW4gb25seSBiZSBjYWxsZWQgb25jZScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NlayA9IGNlaztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHNldEluaXRpYWxpemF0aW9uVmVjdG9yKGl2KSB7XG4gICAgICAgIGlmICh0aGlzLl9pdikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignc2V0SW5pdGlhbGl6YXRpb25WZWN0b3IgY2FuIG9ubHkgYmUgY2FsbGVkIG9uY2UnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9pdiA9IGl2O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmVwbGljYXRlSXNzdWVyQXNIZWFkZXIoKSB7XG4gICAgICAgIHRoaXMuX3JlcGxpY2F0ZUlzc3VlckFzSGVhZGVyID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJlcGxpY2F0ZVN1YmplY3RBc0hlYWRlcigpIHtcbiAgICAgICAgdGhpcy5fcmVwbGljYXRlU3ViamVjdEFzSGVhZGVyID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJlcGxpY2F0ZUF1ZGllbmNlQXNIZWFkZXIoKSB7XG4gICAgICAgIHRoaXMuX3JlcGxpY2F0ZUF1ZGllbmNlQXNIZWFkZXIgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgYXN5bmMgZW5jcnlwdChrZXksIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgZW5jID0gbmV3IENvbXBhY3RFbmNyeXB0KGVuY29kZXIuZW5jb2RlKEpTT04uc3RyaW5naWZ5KHRoaXMuX3BheWxvYWQpKSk7XG4gICAgICAgIGlmICh0aGlzLl9yZXBsaWNhdGVJc3N1ZXJBc0hlYWRlcikge1xuICAgICAgICAgICAgdGhpcy5fcHJvdGVjdGVkSGVhZGVyID0geyAuLi50aGlzLl9wcm90ZWN0ZWRIZWFkZXIsIGlzczogdGhpcy5fcGF5bG9hZC5pc3MgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fcmVwbGljYXRlU3ViamVjdEFzSGVhZGVyKSB7XG4gICAgICAgICAgICB0aGlzLl9wcm90ZWN0ZWRIZWFkZXIgPSB7IC4uLnRoaXMuX3Byb3RlY3RlZEhlYWRlciwgc3ViOiB0aGlzLl9wYXlsb2FkLnN1YiB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9yZXBsaWNhdGVBdWRpZW5jZUFzSGVhZGVyKSB7XG4gICAgICAgICAgICB0aGlzLl9wcm90ZWN0ZWRIZWFkZXIgPSB7IC4uLnRoaXMuX3Byb3RlY3RlZEhlYWRlciwgYXVkOiB0aGlzLl9wYXlsb2FkLmF1ZCB9O1xuICAgICAgICB9XG4gICAgICAgIGVuYy5zZXRQcm90ZWN0ZWRIZWFkZXIodGhpcy5fcHJvdGVjdGVkSGVhZGVyKTtcbiAgICAgICAgaWYgKHRoaXMuX2l2KSB7XG4gICAgICAgICAgICBlbmMuc2V0SW5pdGlhbGl6YXRpb25WZWN0b3IodGhpcy5faXYpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9jZWspIHtcbiAgICAgICAgICAgIGVuYy5zZXRDb250ZW50RW5jcnlwdGlvbktleSh0aGlzLl9jZWspO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9rZXlNYW5hZ2VtZW50UGFyYW1ldGVycykge1xuICAgICAgICAgICAgZW5jLnNldEtleU1hbmFnZW1lbnRQYXJhbWV0ZXJzKHRoaXMuX2tleU1hbmFnZW1lbnRQYXJhbWV0ZXJzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW5jLmVuY3J5cHQoa2V5LCBvcHRpb25zKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgZXBvY2ggZnJvbSAnLi4vbGliL2Vwb2NoLmpzJztcbmltcG9ydCBpc09iamVjdCBmcm9tICcuLi9saWIvaXNfb2JqZWN0LmpzJztcbmltcG9ydCBzZWNzIGZyb20gJy4uL2xpYi9zZWNzLmpzJztcbmV4cG9ydCBjbGFzcyBQcm9kdWNlSldUIHtcbiAgICBjb25zdHJ1Y3RvcihwYXlsb2FkKSB7XG4gICAgICAgIGlmICghaXNPYmplY3QocGF5bG9hZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0pXVCBDbGFpbXMgU2V0IE1VU1QgYmUgYW4gb2JqZWN0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcGF5bG9hZCA9IHBheWxvYWQ7XG4gICAgfVxuICAgIHNldElzc3Vlcihpc3N1ZXIpIHtcbiAgICAgICAgdGhpcy5fcGF5bG9hZCA9IHsgLi4udGhpcy5fcGF5bG9hZCwgaXNzOiBpc3N1ZXIgfTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHNldFN1YmplY3Qoc3ViamVjdCkge1xuICAgICAgICB0aGlzLl9wYXlsb2FkID0geyAuLi50aGlzLl9wYXlsb2FkLCBzdWI6IHN1YmplY3QgfTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHNldEF1ZGllbmNlKGF1ZGllbmNlKSB7XG4gICAgICAgIHRoaXMuX3BheWxvYWQgPSB7IC4uLnRoaXMuX3BheWxvYWQsIGF1ZDogYXVkaWVuY2UgfTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHNldEp0aShqd3RJZCkge1xuICAgICAgICB0aGlzLl9wYXlsb2FkID0geyAuLi50aGlzLl9wYXlsb2FkLCBqdGk6IGp3dElkIH07XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzZXROb3RCZWZvcmUoaW5wdXQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHRoaXMuX3BheWxvYWQgPSB7IC4uLnRoaXMuX3BheWxvYWQsIG5iZjogaW5wdXQgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3BheWxvYWQgPSB7IC4uLnRoaXMuX3BheWxvYWQsIG5iZjogZXBvY2gobmV3IERhdGUoKSkgKyBzZWNzKGlucHV0KSB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzZXRFeHBpcmF0aW9uVGltZShpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdGhpcy5fcGF5bG9hZCA9IHsgLi4udGhpcy5fcGF5bG9hZCwgZXhwOiBpbnB1dCB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcGF5bG9hZCA9IHsgLi4udGhpcy5fcGF5bG9hZCwgZXhwOiBlcG9jaChuZXcgRGF0ZSgpKSArIHNlY3MoaW5wdXQpIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHNldElzc3VlZEF0KGlucHV0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLl9wYXlsb2FkID0geyAuLi50aGlzLl9wYXlsb2FkLCBpYXQ6IGVwb2NoKG5ldyBEYXRlKCkpIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9wYXlsb2FkID0geyAuLi50aGlzLl9wYXlsb2FkLCBpYXQ6IGlucHV0IH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ29tcGFjdFNpZ24gfSBmcm9tICcuLi9qd3MvY29tcGFjdC9zaWduLmpzJztcbmltcG9ydCB7IEpXVEludmFsaWQgfSBmcm9tICcuLi91dGlsL2Vycm9ycy5qcyc7XG5pbXBvcnQgeyBlbmNvZGVyIH0gZnJvbSAnLi4vbGliL2J1ZmZlcl91dGlscy5qcyc7XG5pbXBvcnQgeyBQcm9kdWNlSldUIH0gZnJvbSAnLi9wcm9kdWNlLmpzJztcbmV4cG9ydCBjbGFzcyBTaWduSldUIGV4dGVuZHMgUHJvZHVjZUpXVCB7XG4gICAgc2V0UHJvdGVjdGVkSGVhZGVyKHByb3RlY3RlZEhlYWRlcikge1xuICAgICAgICB0aGlzLl9wcm90ZWN0ZWRIZWFkZXIgPSBwcm90ZWN0ZWRIZWFkZXI7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBhc3luYyBzaWduKGtleSwgb3B0aW9ucykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IHNpZyA9IG5ldyBDb21wYWN0U2lnbihlbmNvZGVyLmVuY29kZShKU09OLnN0cmluZ2lmeSh0aGlzLl9wYXlsb2FkKSkpO1xuICAgICAgICBzaWcuc2V0UHJvdGVjdGVkSGVhZGVyKHRoaXMuX3Byb3RlY3RlZEhlYWRlcik7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KChfYSA9IHRoaXMuX3Byb3RlY3RlZEhlYWRlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNyaXQpICYmXG4gICAgICAgICAgICB0aGlzLl9wcm90ZWN0ZWRIZWFkZXIuY3JpdC5pbmNsdWRlcygnYjY0JykgJiZcbiAgICAgICAgICAgIHRoaXMuX3Byb3RlY3RlZEhlYWRlci5iNjQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSldUSW52YWxpZCgnSldUcyBNVVNUIE5PVCB1c2UgdW5lbmNvZGVkIHBheWxvYWQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2lnLnNpZ24oa2V5LCBvcHRpb25zKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgKiBhcyBiYXNlNjR1cmwgZnJvbSAnLi4vcnVudGltZS9iYXNlNjR1cmwuanMnO1xuaW1wb3J0IHsgZGVjb2RlciB9IGZyb20gJy4uL2xpYi9idWZmZXJfdXRpbHMuanMnO1xuaW1wb3J0IHsgSldUSW52YWxpZCB9IGZyb20gJy4uL3V0aWwvZXJyb3JzLmpzJztcbmltcG9ydCBqd3RQYXlsb2FkIGZyb20gJy4uL2xpYi9qd3RfY2xhaW1zX3NldC5qcyc7XG5pbXBvcnQgeyBQcm9kdWNlSldUIH0gZnJvbSAnLi9wcm9kdWNlLmpzJztcbmV4cG9ydCBjbGFzcyBVbnNlY3VyZWRKV1QgZXh0ZW5kcyBQcm9kdWNlSldUIHtcbiAgICBlbmNvZGUoKSB7XG4gICAgICAgIGNvbnN0IGhlYWRlciA9IGJhc2U2NHVybC5lbmNvZGUoSlNPTi5zdHJpbmdpZnkoeyBhbGc6ICdub25lJyB9KSk7XG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSBiYXNlNjR1cmwuZW5jb2RlKEpTT04uc3RyaW5naWZ5KHRoaXMuX3BheWxvYWQpKTtcbiAgICAgICAgcmV0dXJuIGAke2hlYWRlcn0uJHtwYXlsb2FkfS5gO1xuICAgIH1cbiAgICBzdGF0aWMgZGVjb2RlKGp3dCwgb3B0aW9ucykge1xuICAgICAgICBpZiAodHlwZW9mIGp3dCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBKV1RJbnZhbGlkKCdVbnNlY3VyZWQgSldUIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IDA6IGVuY29kZWRIZWFkZXIsIDE6IGVuY29kZWRQYXlsb2FkLCAyOiBzaWduYXR1cmUsIGxlbmd0aCB9ID0gand0LnNwbGl0KCcuJyk7XG4gICAgICAgIGlmIChsZW5ndGggIT09IDMgfHwgc2lnbmF0dXJlICE9PSAnJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEpXVEludmFsaWQoJ0ludmFsaWQgVW5zZWN1cmVkIEpXVCcpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBoZWFkZXI7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBoZWFkZXIgPSBKU09OLnBhcnNlKGRlY29kZXIuZGVjb2RlKGJhc2U2NHVybC5kZWNvZGUoZW5jb2RlZEhlYWRlcikpKTtcbiAgICAgICAgICAgIGlmIChoZWFkZXIuYWxnICE9PSAnbm9uZScpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9hKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSldUSW52YWxpZCgnSW52YWxpZCBVbnNlY3VyZWQgSldUJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IGp3dFBheWxvYWQoaGVhZGVyLCBiYXNlNjR1cmwuZGVjb2RlKGVuY29kZWRQYXlsb2FkKSwgb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiB7IHBheWxvYWQsIGhlYWRlciB9O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGNvbXBhY3RWZXJpZnkgfSBmcm9tICcuLi9qd3MvY29tcGFjdC92ZXJpZnkuanMnO1xuaW1wb3J0IGp3dFBheWxvYWQgZnJvbSAnLi4vbGliL2p3dF9jbGFpbXNfc2V0LmpzJztcbmltcG9ydCB7IEpXVEludmFsaWQgfSBmcm9tICcuLi91dGlsL2Vycm9ycy5qcyc7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gand0VmVyaWZ5KGp3dCwga2V5LCBvcHRpb25zKSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IHZlcmlmaWVkID0gYXdhaXQgY29tcGFjdFZlcmlmeShqd3QsIGtleSwgb3B0aW9ucyk7XG4gICAgaWYgKCgoX2EgPSB2ZXJpZmllZC5wcm90ZWN0ZWRIZWFkZXIuY3JpdCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmluY2x1ZGVzKCdiNjQnKSkgJiYgdmVyaWZpZWQucHJvdGVjdGVkSGVhZGVyLmI2NCA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpXVEludmFsaWQoJ0pXVHMgTVVTVCBOT1QgdXNlIHVuZW5jb2RlZCBwYXlsb2FkJyk7XG4gICAgfVxuICAgIGNvbnN0IHBheWxvYWQgPSBqd3RQYXlsb2FkKHZlcmlmaWVkLnByb3RlY3RlZEhlYWRlciwgdmVyaWZpZWQucGF5bG9hZCwgb3B0aW9ucyk7XG4gICAgY29uc3QgcmVzdWx0ID0geyBwYXlsb2FkLCBwcm90ZWN0ZWRIZWFkZXI6IHZlcmlmaWVkLnByb3RlY3RlZEhlYWRlciB9O1xuICAgIGlmICh0eXBlb2Yga2V5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiB7IC4uLnJlc3VsdCwga2V5OiB2ZXJpZmllZC5rZXkgfTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbiIsImltcG9ydCB7IHRvU1BLSSBhcyBleHBvcnRQdWJsaWMgfSBmcm9tICcuLi9ydW50aW1lL2FzbjEuanMnO1xuaW1wb3J0IHsgdG9QS0NTOCBhcyBleHBvcnRQcml2YXRlIH0gZnJvbSAnLi4vcnVudGltZS9hc24xLmpzJztcbmltcG9ydCBrZXlUb0pXSyBmcm9tICcuLi9ydW50aW1lL2tleV90b19qd2suanMnO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4cG9ydFNQS0koa2V5KSB7XG4gICAgcmV0dXJuIGV4cG9ydFB1YmxpYyhrZXkpO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4cG9ydFBLQ1M4KGtleSkge1xuICAgIHJldHVybiBleHBvcnRQcml2YXRlKGtleSk7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhwb3J0SldLKGtleSkge1xuICAgIHJldHVybiBrZXlUb0pXSyhrZXkpO1xufVxuIiwiaW1wb3J0IHsgZ2VuZXJhdGVLZXlQYWlyIGFzIGdlbmVyYXRlIH0gZnJvbSAnLi4vcnVudGltZS9nZW5lcmF0ZS5qcyc7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVLZXlQYWlyKGFsZywgb3B0aW9ucykge1xuICAgIHJldHVybiBnZW5lcmF0ZShhbGcsIG9wdGlvbnMpO1xufVxuIiwiaW1wb3J0IHsgZ2VuZXJhdGVTZWNyZXQgYXMgZ2VuZXJhdGUgfSBmcm9tICcuLi9ydW50aW1lL2dlbmVyYXRlLmpzJztcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVNlY3JldChhbGcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZ2VuZXJhdGUoYWxnLCBvcHRpb25zKTtcbn1cbiIsImltcG9ydCB7IGRlY29kZSBhcyBkZWNvZGVCYXNlNjRVUkwgfSBmcm9tICcuLi9ydW50aW1lL2Jhc2U2NHVybC5qcyc7XG5pbXBvcnQgeyBmcm9tU1BLSSwgZnJvbVBLQ1M4LCBmcm9tWDUwOSB9IGZyb20gJy4uL3J1bnRpbWUvYXNuMS5qcyc7XG5pbXBvcnQgYXNLZXlPYmplY3QgZnJvbSAnLi4vcnVudGltZS9qd2tfdG9fa2V5LmpzJztcbmltcG9ydCB7IEpPU0VOb3RTdXBwb3J0ZWQgfSBmcm9tICcuLi91dGlsL2Vycm9ycy5qcyc7XG5pbXBvcnQgaXNPYmplY3QgZnJvbSAnLi4vbGliL2lzX29iamVjdC5qcyc7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW1wb3J0U1BLSShzcGtpLCBhbGcsIG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIHNwa2kgIT09ICdzdHJpbmcnIHx8IHNwa2kuaW5kZXhPZignLS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS0nKSAhPT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInNwa2lcIiBtdXN0IGJlIFNQS0kgZm9ybWF0dGVkIHN0cmluZycpO1xuICAgIH1cbiAgICByZXR1cm4gZnJvbVNQS0koc3BraSwgYWxnLCBvcHRpb25zKTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbXBvcnRYNTA5KHg1MDksIGFsZywgb3B0aW9ucykge1xuICAgIGlmICh0eXBlb2YgeDUwOSAhPT0gJ3N0cmluZycgfHwgeDUwOS5pbmRleE9mKCctLS0tLUJFR0lOIENFUlRJRklDQVRFLS0tLS0nKSAhPT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcIng1MDlcIiBtdXN0IGJlIFguNTA5IGZvcm1hdHRlZCBzdHJpbmcnKTtcbiAgICB9XG4gICAgcmV0dXJuIGZyb21YNTA5KHg1MDksIGFsZywgb3B0aW9ucyk7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW1wb3J0UEtDUzgocGtjczgsIGFsZywgb3B0aW9ucykge1xuICAgIGlmICh0eXBlb2YgcGtjczggIT09ICdzdHJpbmcnIHx8IHBrY3M4LmluZGV4T2YoJy0tLS0tQkVHSU4gUFJJVkFURSBLRVktLS0tLScpICE9PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wicGtjczhcIiBtdXN0IGJlIFBLQ1MjOCBmb3JtYXR0ZWQgc3RyaW5nJyk7XG4gICAgfVxuICAgIHJldHVybiBmcm9tUEtDUzgocGtjczgsIGFsZywgb3B0aW9ucyk7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW1wb3J0SldLKGp3aywgYWxnLCBvY3RBc0tleU9iamVjdCkge1xuICAgIHZhciBfYTtcbiAgICBpZiAoIWlzT2JqZWN0KGp3aykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSldLIG11c3QgYmUgYW4gb2JqZWN0Jyk7XG4gICAgfVxuICAgIGFsZyB8fCAoYWxnID0gandrLmFsZyk7XG4gICAgc3dpdGNoIChqd2sua3R5KSB7XG4gICAgICAgIGNhc2UgJ29jdCc6XG4gICAgICAgICAgICBpZiAodHlwZW9mIGp3ay5rICE9PSAnc3RyaW5nJyB8fCAhandrLmspIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdtaXNzaW5nIFwia1wiIChLZXkgVmFsdWUpIFBhcmFtZXRlciB2YWx1ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb2N0QXNLZXlPYmplY3QgIT09IG51bGwgJiYgb2N0QXNLZXlPYmplY3QgIT09IHZvaWQgMCA/IG9jdEFzS2V5T2JqZWN0IDogKG9jdEFzS2V5T2JqZWN0ID0gandrLmV4dCAhPT0gdHJ1ZSk7XG4gICAgICAgICAgICBpZiAob2N0QXNLZXlPYmplY3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXNLZXlPYmplY3QoeyAuLi5qd2ssIGFsZywgZXh0OiAoX2EgPSBqd2suZXh0KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkZWNvZGVCYXNlNjRVUkwoandrLmspO1xuICAgICAgICBjYXNlICdSU0EnOlxuICAgICAgICAgICAgaWYgKGp3ay5vdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKT1NFTm90U3VwcG9ydGVkKCdSU0EgSldLIFwib3RoXCIgKE90aGVyIFByaW1lcyBJbmZvKSBQYXJhbWV0ZXIgdmFsdWUgaXMgbm90IHN1cHBvcnRlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICBjYXNlICdFQyc6XG4gICAgICAgIGNhc2UgJ09LUCc6XG4gICAgICAgICAgICByZXR1cm4gYXNLZXlPYmplY3QoeyAuLi5qd2ssIGFsZyB9KTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBKT1NFTm90U3VwcG9ydGVkKCdVbnN1cHBvcnRlZCBcImt0eVwiIChLZXkgVHlwZSkgUGFyYW1ldGVyIHZhbHVlJyk7XG4gICAgfVxufVxuIiwiaW1wb3J0IGVuY3J5cHQgZnJvbSAnLi4vcnVudGltZS9lbmNyeXB0LmpzJztcbmltcG9ydCBkZWNyeXB0IGZyb20gJy4uL3J1bnRpbWUvZGVjcnlwdC5qcyc7XG5pbXBvcnQgZ2VuZXJhdGVJdiBmcm9tICcuL2l2LmpzJztcbmltcG9ydCB7IGVuY29kZSBhcyBiYXNlNjR1cmwgfSBmcm9tICcuLi9ydW50aW1lL2Jhc2U2NHVybC5qcyc7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd3JhcChhbGcsIGtleSwgY2VrLCBpdikge1xuICAgIGNvbnN0IGp3ZUFsZ29yaXRobSA9IGFsZy5zbGljZSgwLCA3KTtcbiAgICBpdiB8fCAoaXYgPSBnZW5lcmF0ZUl2KGp3ZUFsZ29yaXRobSkpO1xuICAgIGNvbnN0IHsgY2lwaGVydGV4dDogZW5jcnlwdGVkS2V5LCB0YWcgfSA9IGF3YWl0IGVuY3J5cHQoandlQWxnb3JpdGhtLCBjZWssIGtleSwgaXYsIG5ldyBVaW50OEFycmF5KDApKTtcbiAgICByZXR1cm4geyBlbmNyeXB0ZWRLZXksIGl2OiBiYXNlNjR1cmwoaXYpLCB0YWc6IGJhc2U2NHVybCh0YWcpIH07XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdW53cmFwKGFsZywga2V5LCBlbmNyeXB0ZWRLZXksIGl2LCB0YWcpIHtcbiAgICBjb25zdCBqd2VBbGdvcml0aG0gPSBhbGcuc2xpY2UoMCwgNyk7XG4gICAgcmV0dXJuIGRlY3J5cHQoandlQWxnb3JpdGhtLCBrZXksIGVuY3J5cHRlZEtleSwgaXYsIHRhZywgbmV3IFVpbnQ4QXJyYXkoMCkpO1xufVxuIiwiaW1wb3J0IGRpZ2VzdCBmcm9tICcuLi9ydW50aW1lL2RpZ2VzdC5qcyc7XG5leHBvcnQgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuZXhwb3J0IGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcbmNvbnN0IE1BWF9JTlQzMiA9IDIgKiogMzI7XG5leHBvcnQgZnVuY3Rpb24gY29uY2F0KC4uLmJ1ZmZlcnMpIHtcbiAgICBjb25zdCBzaXplID0gYnVmZmVycy5yZWR1Y2UoKGFjYywgeyBsZW5ndGggfSkgPT4gYWNjICsgbGVuZ3RoLCAwKTtcbiAgICBjb25zdCBidWYgPSBuZXcgVWludDhBcnJheShzaXplKTtcbiAgICBsZXQgaSA9IDA7XG4gICAgYnVmZmVycy5mb3JFYWNoKChidWZmZXIpID0+IHtcbiAgICAgICAgYnVmLnNldChidWZmZXIsIGkpO1xuICAgICAgICBpICs9IGJ1ZmZlci5sZW5ndGg7XG4gICAgfSk7XG4gICAgcmV0dXJuIGJ1Zjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwMnMoYWxnLCBwMnNJbnB1dCkge1xuICAgIHJldHVybiBjb25jYXQoZW5jb2Rlci5lbmNvZGUoYWxnKSwgbmV3IFVpbnQ4QXJyYXkoWzBdKSwgcDJzSW5wdXQpO1xufVxuZnVuY3Rpb24gd3JpdGVVSW50MzJCRShidWYsIHZhbHVlLCBvZmZzZXQpIHtcbiAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IE1BWF9JTlQzMikge1xuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgdmFsdWUgbXVzdCBiZSA+PSAwIGFuZCA8PSAke01BWF9JTlQzMiAtIDF9LiBSZWNlaXZlZCAke3ZhbHVlfWApO1xuICAgIH1cbiAgICBidWYuc2V0KFt2YWx1ZSA+Pj4gMjQsIHZhbHVlID4+PiAxNiwgdmFsdWUgPj4+IDgsIHZhbHVlICYgMHhmZl0sIG9mZnNldCk7XG59XG5leHBvcnQgZnVuY3Rpb24gdWludDY0YmUodmFsdWUpIHtcbiAgICBjb25zdCBoaWdoID0gTWF0aC5mbG9vcih2YWx1ZSAvIE1BWF9JTlQzMik7XG4gICAgY29uc3QgbG93ID0gdmFsdWUgJSBNQVhfSU5UMzI7XG4gICAgY29uc3QgYnVmID0gbmV3IFVpbnQ4QXJyYXkoOCk7XG4gICAgd3JpdGVVSW50MzJCRShidWYsIGhpZ2gsIDApO1xuICAgIHdyaXRlVUludDMyQkUoYnVmLCBsb3csIDQpO1xuICAgIHJldHVybiBidWY7XG59XG5leHBvcnQgZnVuY3Rpb24gdWludDMyYmUodmFsdWUpIHtcbiAgICBjb25zdCBidWYgPSBuZXcgVWludDhBcnJheSg0KTtcbiAgICB3cml0ZVVJbnQzMkJFKGJ1ZiwgdmFsdWUpO1xuICAgIHJldHVybiBidWY7XG59XG5leHBvcnQgZnVuY3Rpb24gbGVuZ3RoQW5kSW5wdXQoaW5wdXQpIHtcbiAgICByZXR1cm4gY29uY2F0KHVpbnQzMmJlKGlucHV0Lmxlbmd0aCksIGlucHV0KTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25jYXRLZGYoc2VjcmV0LCBiaXRzLCB2YWx1ZSkge1xuICAgIGNvbnN0IGl0ZXJhdGlvbnMgPSBNYXRoLmNlaWwoKGJpdHMgPj4gMykgLyAzMik7XG4gICAgY29uc3QgcmVzID0gbmV3IFVpbnQ4QXJyYXkoaXRlcmF0aW9ucyAqIDMyKTtcbiAgICBmb3IgKGxldCBpdGVyID0gMDsgaXRlciA8IGl0ZXJhdGlvbnM7IGl0ZXIrKykge1xuICAgICAgICBjb25zdCBidWYgPSBuZXcgVWludDhBcnJheSg0ICsgc2VjcmV0Lmxlbmd0aCArIHZhbHVlLmxlbmd0aCk7XG4gICAgICAgIGJ1Zi5zZXQodWludDMyYmUoaXRlciArIDEpKTtcbiAgICAgICAgYnVmLnNldChzZWNyZXQsIDQpO1xuICAgICAgICBidWYuc2V0KHZhbHVlLCA0ICsgc2VjcmV0Lmxlbmd0aCk7XG4gICAgICAgIHJlcy5zZXQoYXdhaXQgZGlnZXN0KCdzaGEyNTYnLCBidWYpLCBpdGVyICogMzIpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzLnNsaWNlKDAsIGJpdHMgPj4gMyk7XG59XG4iLCJpbXBvcnQgeyBKT1NFTm90U3VwcG9ydGVkIH0gZnJvbSAnLi4vdXRpbC9lcnJvcnMuanMnO1xuaW1wb3J0IHJhbmRvbSBmcm9tICcuLi9ydW50aW1lL3JhbmRvbS5qcyc7XG5leHBvcnQgZnVuY3Rpb24gYml0TGVuZ3RoKGFsZykge1xuICAgIHN3aXRjaCAoYWxnKSB7XG4gICAgICAgIGNhc2UgJ0ExMjhHQ00nOlxuICAgICAgICAgICAgcmV0dXJuIDEyODtcbiAgICAgICAgY2FzZSAnQTE5MkdDTSc6XG4gICAgICAgICAgICByZXR1cm4gMTkyO1xuICAgICAgICBjYXNlICdBMjU2R0NNJzpcbiAgICAgICAgY2FzZSAnQTEyOENCQy1IUzI1Nic6XG4gICAgICAgICAgICByZXR1cm4gMjU2O1xuICAgICAgICBjYXNlICdBMTkyQ0JDLUhTMzg0JzpcbiAgICAgICAgICAgIHJldHVybiAzODQ7XG4gICAgICAgIGNhc2UgJ0EyNTZDQkMtSFM1MTInOlxuICAgICAgICAgICAgcmV0dXJuIDUxMjtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBKT1NFTm90U3VwcG9ydGVkKGBVbnN1cHBvcnRlZCBKV0UgQWxnb3JpdGhtOiAke2FsZ31gKTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCAoYWxnKSA9PiByYW5kb20obmV3IFVpbnQ4QXJyYXkoYml0TGVuZ3RoKGFsZykgPj4gMykpO1xuIiwiaW1wb3J0IHsgSldFSW52YWxpZCB9IGZyb20gJy4uL3V0aWwvZXJyb3JzLmpzJztcbmltcG9ydCB7IGJpdExlbmd0aCB9IGZyb20gJy4vaXYuanMnO1xuY29uc3QgY2hlY2tJdkxlbmd0aCA9IChlbmMsIGl2KSA9PiB7XG4gICAgaWYgKGl2Lmxlbmd0aCA8PCAzICE9PSBiaXRMZW5ndGgoZW5jKSkge1xuICAgICAgICB0aHJvdyBuZXcgSldFSW52YWxpZCgnSW52YWxpZCBJbml0aWFsaXphdGlvbiBWZWN0b3IgbGVuZ3RoJyk7XG4gICAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IGNoZWNrSXZMZW5ndGg7XG4iLCJpbXBvcnQgeyB3aXRoQWxnIGFzIGludmFsaWRLZXlJbnB1dCB9IGZyb20gJy4vaW52YWxpZF9rZXlfaW5wdXQuanMnO1xuaW1wb3J0IGlzS2V5TGlrZSwgeyB0eXBlcyB9IGZyb20gJy4uL3J1bnRpbWUvaXNfa2V5X2xpa2UuanMnO1xuY29uc3Qgc3ltbWV0cmljVHlwZUNoZWNrID0gKGFsZywga2V5KSA9PiB7XG4gICAgaWYgKGtleSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpXG4gICAgICAgIHJldHVybjtcbiAgICBpZiAoIWlzS2V5TGlrZShrZXkpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoaW52YWxpZEtleUlucHV0KGFsZywga2V5LCAuLi50eXBlcywgJ1VpbnQ4QXJyYXknKSk7XG4gICAgfVxuICAgIGlmIChrZXkudHlwZSAhPT0gJ3NlY3JldCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgJHt0eXBlcy5qb2luKCcgb3IgJyl9IGluc3RhbmNlcyBmb3Igc3ltbWV0cmljIGFsZ29yaXRobXMgbXVzdCBiZSBvZiB0eXBlIFwic2VjcmV0XCJgKTtcbiAgICB9XG59O1xuY29uc3QgYXN5bW1ldHJpY1R5cGVDaGVjayA9IChhbGcsIGtleSwgdXNhZ2UpID0+IHtcbiAgICBpZiAoIWlzS2V5TGlrZShrZXkpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoaW52YWxpZEtleUlucHV0KGFsZywga2V5LCAuLi50eXBlcykpO1xuICAgIH1cbiAgICBpZiAoa2V5LnR5cGUgPT09ICdzZWNyZXQnKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYCR7dHlwZXMuam9pbignIG9yICcpfSBpbnN0YW5jZXMgZm9yIGFzeW1tZXRyaWMgYWxnb3JpdGhtcyBtdXN0IG5vdCBiZSBvZiB0eXBlIFwic2VjcmV0XCJgKTtcbiAgICB9XG4gICAgaWYgKHVzYWdlID09PSAnc2lnbicgJiYga2V5LnR5cGUgPT09ICdwdWJsaWMnKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYCR7dHlwZXMuam9pbignIG9yICcpfSBpbnN0YW5jZXMgZm9yIGFzeW1tZXRyaWMgYWxnb3JpdGhtIHNpZ25pbmcgbXVzdCBiZSBvZiB0eXBlIFwicHJpdmF0ZVwiYCk7XG4gICAgfVxuICAgIGlmICh1c2FnZSA9PT0gJ2RlY3J5cHQnICYmIGtleS50eXBlID09PSAncHVibGljJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGAke3R5cGVzLmpvaW4oJyBvciAnKX0gaW5zdGFuY2VzIGZvciBhc3ltbWV0cmljIGFsZ29yaXRobSBkZWNyeXB0aW9uIG11c3QgYmUgb2YgdHlwZSBcInByaXZhdGVcImApO1xuICAgIH1cbiAgICBpZiAoa2V5LmFsZ29yaXRobSAmJiB1c2FnZSA9PT0gJ3ZlcmlmeScgJiYga2V5LnR5cGUgPT09ICdwcml2YXRlJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGAke3R5cGVzLmpvaW4oJyBvciAnKX0gaW5zdGFuY2VzIGZvciBhc3ltbWV0cmljIGFsZ29yaXRobSB2ZXJpZnlpbmcgbXVzdCBiZSBvZiB0eXBlIFwicHVibGljXCJgKTtcbiAgICB9XG4gICAgaWYgKGtleS5hbGdvcml0aG0gJiYgdXNhZ2UgPT09ICdlbmNyeXB0JyAmJiBrZXkudHlwZSA9PT0gJ3ByaXZhdGUnKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYCR7dHlwZXMuam9pbignIG9yICcpfSBpbnN0YW5jZXMgZm9yIGFzeW1tZXRyaWMgYWxnb3JpdGhtIGVuY3J5cHRpb24gbXVzdCBiZSBvZiB0eXBlIFwicHVibGljXCJgKTtcbiAgICB9XG59O1xuY29uc3QgY2hlY2tLZXlUeXBlID0gKGFsZywga2V5LCB1c2FnZSkgPT4ge1xuICAgIGNvbnN0IHN5bW1ldHJpYyA9IGFsZy5zdGFydHNXaXRoKCdIUycpIHx8XG4gICAgICAgIGFsZyA9PT0gJ2RpcicgfHxcbiAgICAgICAgYWxnLnN0YXJ0c1dpdGgoJ1BCRVMyJykgfHxcbiAgICAgICAgL15BXFxkezN9KD86R0NNKT9LVyQvLnRlc3QoYWxnKTtcbiAgICBpZiAoc3ltbWV0cmljKSB7XG4gICAgICAgIHN5bW1ldHJpY1R5cGVDaGVjayhhbGcsIGtleSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhc3ltbWV0cmljVHlwZUNoZWNrKGFsZywga2V5LCB1c2FnZSk7XG4gICAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IGNoZWNrS2V5VHlwZTtcbiIsImltcG9ydCB7IEpXRUludmFsaWQgfSBmcm9tICcuLi91dGlsL2Vycm9ycy5qcyc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjaGVja1AycyhwMnMpIHtcbiAgICBpZiAoIShwMnMgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB8fCBwMnMubGVuZ3RoIDwgOCkge1xuICAgICAgICB0aHJvdyBuZXcgSldFSW52YWxpZCgnUEJFUzIgU2FsdCBJbnB1dCBtdXN0IGJlIDggb3IgbW9yZSBvY3RldHMnKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBpc0Nsb3VkZmxhcmVXb3JrZXJzIH0gZnJvbSAnLi4vcnVudGltZS9lbnYuanMnO1xuZnVuY3Rpb24gdW51c2FibGUobmFtZSwgcHJvcCA9ICdhbGdvcml0aG0ubmFtZScpIHtcbiAgICByZXR1cm4gbmV3IFR5cGVFcnJvcihgQ3J5cHRvS2V5IGRvZXMgbm90IHN1cHBvcnQgdGhpcyBvcGVyYXRpb24sIGl0cyAke3Byb3B9IG11c3QgYmUgJHtuYW1lfWApO1xufVxuZnVuY3Rpb24gaXNBbGdvcml0aG0oYWxnb3JpdGhtLCBuYW1lKSB7XG4gICAgcmV0dXJuIGFsZ29yaXRobS5uYW1lID09PSBuYW1lO1xufVxuZnVuY3Rpb24gZ2V0SGFzaExlbmd0aChoYXNoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KGhhc2gubmFtZS5zbGljZSg0KSwgMTApO1xufVxuZnVuY3Rpb24gZ2V0TmFtZWRDdXJ2ZShhbGcpIHtcbiAgICBzd2l0Y2ggKGFsZykge1xuICAgICAgICBjYXNlICdFUzI1Nic6XG4gICAgICAgICAgICByZXR1cm4gJ1AtMjU2JztcbiAgICAgICAgY2FzZSAnRVMzODQnOlxuICAgICAgICAgICAgcmV0dXJuICdQLTM4NCc7XG4gICAgICAgIGNhc2UgJ0VTNTEyJzpcbiAgICAgICAgICAgIHJldHVybiAnUC01MjEnO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bnJlYWNoYWJsZScpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNoZWNrVXNhZ2Uoa2V5LCB1c2FnZXMpIHtcbiAgICBpZiAodXNhZ2VzLmxlbmd0aCAmJiAhdXNhZ2VzLnNvbWUoKGV4cGVjdGVkKSA9PiBrZXkudXNhZ2VzLmluY2x1ZGVzKGV4cGVjdGVkKSkpIHtcbiAgICAgICAgbGV0IG1zZyA9ICdDcnlwdG9LZXkgZG9lcyBub3Qgc3VwcG9ydCB0aGlzIG9wZXJhdGlvbiwgaXRzIHVzYWdlcyBtdXN0IGluY2x1ZGUgJztcbiAgICAgICAgaWYgKHVzYWdlcy5sZW5ndGggPiAyKSB7XG4gICAgICAgICAgICBjb25zdCBsYXN0ID0gdXNhZ2VzLnBvcCgpO1xuICAgICAgICAgICAgbXNnICs9IGBvbmUgb2YgJHt1c2FnZXMuam9pbignLCAnKX0sIG9yICR7bGFzdH0uYDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh1c2FnZXMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICBtc2cgKz0gYG9uZSBvZiAke3VzYWdlc1swXX0gb3IgJHt1c2FnZXNbMV19LmA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtc2cgKz0gYCR7dXNhZ2VzWzBdfS5gO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IobXNnKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gY2hlY2tTaWdDcnlwdG9LZXkoa2V5LCBhbGcsIC4uLnVzYWdlcykge1xuICAgIHN3aXRjaCAoYWxnKSB7XG4gICAgICAgIGNhc2UgJ0hTMjU2JzpcbiAgICAgICAgY2FzZSAnSFMzODQnOlxuICAgICAgICBjYXNlICdIUzUxMic6IHtcbiAgICAgICAgICAgIGlmICghaXNBbGdvcml0aG0oa2V5LmFsZ29yaXRobSwgJ0hNQUMnKSlcbiAgICAgICAgICAgICAgICB0aHJvdyB1bnVzYWJsZSgnSE1BQycpO1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWQgPSBwYXJzZUludChhbGcuc2xpY2UoMiksIDEwKTtcbiAgICAgICAgICAgIGNvbnN0IGFjdHVhbCA9IGdldEhhc2hMZW5ndGgoa2V5LmFsZ29yaXRobS5oYXNoKTtcbiAgICAgICAgICAgIGlmIChhY3R1YWwgIT09IGV4cGVjdGVkKVxuICAgICAgICAgICAgICAgIHRocm93IHVudXNhYmxlKGBTSEEtJHtleHBlY3RlZH1gLCAnYWxnb3JpdGhtLmhhc2gnKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ1JTMjU2JzpcbiAgICAgICAgY2FzZSAnUlMzODQnOlxuICAgICAgICBjYXNlICdSUzUxMic6IHtcbiAgICAgICAgICAgIGlmICghaXNBbGdvcml0aG0oa2V5LmFsZ29yaXRobSwgJ1JTQVNTQS1QS0NTMS12MV81JykpXG4gICAgICAgICAgICAgICAgdGhyb3cgdW51c2FibGUoJ1JTQVNTQS1QS0NTMS12MV81Jyk7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZCA9IHBhcnNlSW50KGFsZy5zbGljZSgyKSwgMTApO1xuICAgICAgICAgICAgY29uc3QgYWN0dWFsID0gZ2V0SGFzaExlbmd0aChrZXkuYWxnb3JpdGhtLmhhc2gpO1xuICAgICAgICAgICAgaWYgKGFjdHVhbCAhPT0gZXhwZWN0ZWQpXG4gICAgICAgICAgICAgICAgdGhyb3cgdW51c2FibGUoYFNIQS0ke2V4cGVjdGVkfWAsICdhbGdvcml0aG0uaGFzaCcpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnUFMyNTYnOlxuICAgICAgICBjYXNlICdQUzM4NCc6XG4gICAgICAgIGNhc2UgJ1BTNTEyJzoge1xuICAgICAgICAgICAgaWYgKCFpc0FsZ29yaXRobShrZXkuYWxnb3JpdGhtLCAnUlNBLVBTUycpKVxuICAgICAgICAgICAgICAgIHRocm93IHVudXNhYmxlKCdSU0EtUFNTJyk7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZCA9IHBhcnNlSW50KGFsZy5zbGljZSgyKSwgMTApO1xuICAgICAgICAgICAgY29uc3QgYWN0dWFsID0gZ2V0SGFzaExlbmd0aChrZXkuYWxnb3JpdGhtLmhhc2gpO1xuICAgICAgICAgICAgaWYgKGFjdHVhbCAhPT0gZXhwZWN0ZWQpXG4gICAgICAgICAgICAgICAgdGhyb3cgdW51c2FibGUoYFNIQS0ke2V4cGVjdGVkfWAsICdhbGdvcml0aG0uaGFzaCcpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnRWREU0EnOiB7XG4gICAgICAgICAgICBpZiAoa2V5LmFsZ29yaXRobS5uYW1lICE9PSAnRWQyNTUxOScgJiYga2V5LmFsZ29yaXRobS5uYW1lICE9PSAnRWQ0NDgnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzQ2xvdWRmbGFyZVdvcmtlcnMoKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNBbGdvcml0aG0oa2V5LmFsZ29yaXRobSwgJ05PREUtRUQyNTUxOScpKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IHVudXNhYmxlKCdFZDI1NTE5LCBFZDQ0OCwgb3IgTk9ERS1FRDI1NTE5Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IHVudXNhYmxlKCdFZDI1NTE5IG9yIEVkNDQ4Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdFUzI1Nic6XG4gICAgICAgIGNhc2UgJ0VTMzg0JzpcbiAgICAgICAgY2FzZSAnRVM1MTInOiB7XG4gICAgICAgICAgICBpZiAoIWlzQWxnb3JpdGhtKGtleS5hbGdvcml0aG0sICdFQ0RTQScpKVxuICAgICAgICAgICAgICAgIHRocm93IHVudXNhYmxlKCdFQ0RTQScpO1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWQgPSBnZXROYW1lZEN1cnZlKGFsZyk7XG4gICAgICAgICAgICBjb25zdCBhY3R1YWwgPSBrZXkuYWxnb3JpdGhtLm5hbWVkQ3VydmU7XG4gICAgICAgICAgICBpZiAoYWN0dWFsICE9PSBleHBlY3RlZClcbiAgICAgICAgICAgICAgICB0aHJvdyB1bnVzYWJsZShleHBlY3RlZCwgJ2FsZ29yaXRobS5uYW1lZEN1cnZlJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ3J5cHRvS2V5IGRvZXMgbm90IHN1cHBvcnQgdGhpcyBvcGVyYXRpb24nKTtcbiAgICB9XG4gICAgY2hlY2tVc2FnZShrZXksIHVzYWdlcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gY2hlY2tFbmNDcnlwdG9LZXkoa2V5LCBhbGcsIC4uLnVzYWdlcykge1xuICAgIHN3aXRjaCAoYWxnKSB7XG4gICAgICAgIGNhc2UgJ0ExMjhHQ00nOlxuICAgICAgICBjYXNlICdBMTkyR0NNJzpcbiAgICAgICAgY2FzZSAnQTI1NkdDTSc6IHtcbiAgICAgICAgICAgIGlmICghaXNBbGdvcml0aG0oa2V5LmFsZ29yaXRobSwgJ0FFUy1HQ00nKSlcbiAgICAgICAgICAgICAgICB0aHJvdyB1bnVzYWJsZSgnQUVTLUdDTScpO1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWQgPSBwYXJzZUludChhbGcuc2xpY2UoMSwgNCksIDEwKTtcbiAgICAgICAgICAgIGNvbnN0IGFjdHVhbCA9IGtleS5hbGdvcml0aG0ubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGFjdHVhbCAhPT0gZXhwZWN0ZWQpXG4gICAgICAgICAgICAgICAgdGhyb3cgdW51c2FibGUoZXhwZWN0ZWQsICdhbGdvcml0aG0ubGVuZ3RoJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdBMTI4S1cnOlxuICAgICAgICBjYXNlICdBMTkyS1cnOlxuICAgICAgICBjYXNlICdBMjU2S1cnOiB7XG4gICAgICAgICAgICBpZiAoIWlzQWxnb3JpdGhtKGtleS5hbGdvcml0aG0sICdBRVMtS1cnKSlcbiAgICAgICAgICAgICAgICB0aHJvdyB1bnVzYWJsZSgnQUVTLUtXJyk7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZCA9IHBhcnNlSW50KGFsZy5zbGljZSgxLCA0KSwgMTApO1xuICAgICAgICAgICAgY29uc3QgYWN0dWFsID0ga2V5LmFsZ29yaXRobS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoYWN0dWFsICE9PSBleHBlY3RlZClcbiAgICAgICAgICAgICAgICB0aHJvdyB1bnVzYWJsZShleHBlY3RlZCwgJ2FsZ29yaXRobS5sZW5ndGgnKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ0VDREgnOiB7XG4gICAgICAgICAgICBzd2l0Y2ggKGtleS5hbGdvcml0aG0ubmFtZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ0VDREgnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ1gyNTUxOSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnWDQ0OCc6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IHVudXNhYmxlKCdFQ0RILCBYMjU1MTksIG9yIFg0NDgnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ1BCRVMyLUhTMjU2K0ExMjhLVyc6XG4gICAgICAgIGNhc2UgJ1BCRVMyLUhTMzg0K0ExOTJLVyc6XG4gICAgICAgIGNhc2UgJ1BCRVMyLUhTNTEyK0EyNTZLVyc6XG4gICAgICAgICAgICBpZiAoIWlzQWxnb3JpdGhtKGtleS5hbGdvcml0aG0sICdQQktERjInKSlcbiAgICAgICAgICAgICAgICB0aHJvdyB1bnVzYWJsZSgnUEJLREYyJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnUlNBLU9BRVAnOlxuICAgICAgICBjYXNlICdSU0EtT0FFUC0yNTYnOlxuICAgICAgICBjYXNlICdSU0EtT0FFUC0zODQnOlxuICAgICAgICBjYXNlICdSU0EtT0FFUC01MTInOiB7XG4gICAgICAgICAgICBpZiAoIWlzQWxnb3JpdGhtKGtleS5hbGdvcml0aG0sICdSU0EtT0FFUCcpKVxuICAgICAgICAgICAgICAgIHRocm93IHVudXNhYmxlKCdSU0EtT0FFUCcpO1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWQgPSBwYXJzZUludChhbGcuc2xpY2UoOSksIDEwKSB8fCAxO1xuICAgICAgICAgICAgY29uc3QgYWN0dWFsID0gZ2V0SGFzaExlbmd0aChrZXkuYWxnb3JpdGhtLmhhc2gpO1xuICAgICAgICAgICAgaWYgKGFjdHVhbCAhPT0gZXhwZWN0ZWQpXG4gICAgICAgICAgICAgICAgdGhyb3cgdW51c2FibGUoYFNIQS0ke2V4cGVjdGVkfWAsICdhbGdvcml0aG0uaGFzaCcpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0NyeXB0b0tleSBkb2VzIG5vdCBzdXBwb3J0IHRoaXMgb3BlcmF0aW9uJyk7XG4gICAgfVxuICAgIGNoZWNrVXNhZ2Uoa2V5LCB1c2FnZXMpO1xufVxuIiwiaW1wb3J0IHsgdW53cmFwIGFzIGFlc0t3IH0gZnJvbSAnLi4vcnVudGltZS9hZXNrdy5qcyc7XG5pbXBvcnQgKiBhcyBFQ0RIIGZyb20gJy4uL3J1bnRpbWUvZWNkaGVzLmpzJztcbmltcG9ydCB7IGRlY3J5cHQgYXMgcGJlczJLdyB9IGZyb20gJy4uL3J1bnRpbWUvcGJlczJrdy5qcyc7XG5pbXBvcnQgeyBkZWNyeXB0IGFzIHJzYUVzIH0gZnJvbSAnLi4vcnVudGltZS9yc2Flcy5qcyc7XG5pbXBvcnQgeyBkZWNvZGUgYXMgYmFzZTY0dXJsIH0gZnJvbSAnLi4vcnVudGltZS9iYXNlNjR1cmwuanMnO1xuaW1wb3J0IHsgSk9TRU5vdFN1cHBvcnRlZCwgSldFSW52YWxpZCB9IGZyb20gJy4uL3V0aWwvZXJyb3JzLmpzJztcbmltcG9ydCB7IGJpdExlbmd0aCBhcyBjZWtMZW5ndGggfSBmcm9tICcuLi9saWIvY2VrLmpzJztcbmltcG9ydCB7IGltcG9ydEpXSyB9IGZyb20gJy4uL2tleS9pbXBvcnQuanMnO1xuaW1wb3J0IGNoZWNrS2V5VHlwZSBmcm9tICcuL2NoZWNrX2tleV90eXBlLmpzJztcbmltcG9ydCBpc09iamVjdCBmcm9tICcuL2lzX29iamVjdC5qcyc7XG5pbXBvcnQgeyB1bndyYXAgYXMgYWVzR2NtS3cgfSBmcm9tICcuL2Flc2djbWt3LmpzJztcbmFzeW5jIGZ1bmN0aW9uIGRlY3J5cHRLZXlNYW5hZ2VtZW50KGFsZywga2V5LCBlbmNyeXB0ZWRLZXksIGpvc2VIZWFkZXIsIG9wdGlvbnMpIHtcbiAgICBjaGVja0tleVR5cGUoYWxnLCBrZXksICdkZWNyeXB0Jyk7XG4gICAgc3dpdGNoIChhbGcpIHtcbiAgICAgICAgY2FzZSAnZGlyJzoge1xuICAgICAgICAgICAgaWYgKGVuY3J5cHRlZEtleSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKV0VJbnZhbGlkKCdFbmNvdW50ZXJlZCB1bmV4cGVjdGVkIEpXRSBFbmNyeXB0ZWQgS2V5Jyk7XG4gICAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ0VDREgtRVMnOlxuICAgICAgICAgICAgaWYgKGVuY3J5cHRlZEtleSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKV0VJbnZhbGlkKCdFbmNvdW50ZXJlZCB1bmV4cGVjdGVkIEpXRSBFbmNyeXB0ZWQgS2V5Jyk7XG4gICAgICAgIGNhc2UgJ0VDREgtRVMrQTEyOEtXJzpcbiAgICAgICAgY2FzZSAnRUNESC1FUytBMTkyS1cnOlxuICAgICAgICBjYXNlICdFQ0RILUVTK0EyNTZLVyc6IHtcbiAgICAgICAgICAgIGlmICghaXNPYmplY3Qoam9zZUhlYWRlci5lcGspKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKV0VJbnZhbGlkKGBKT1NFIEhlYWRlciBcImVwa1wiIChFcGhlbWVyYWwgUHVibGljIEtleSkgbWlzc2luZyBvciBpbnZhbGlkYCk7XG4gICAgICAgICAgICBpZiAoIUVDREguZWNkaEFsbG93ZWQoa2V5KSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSk9TRU5vdFN1cHBvcnRlZCgnRUNESCB3aXRoIHRoZSBwcm92aWRlZCBrZXkgaXMgbm90IGFsbG93ZWQgb3Igbm90IHN1cHBvcnRlZCBieSB5b3VyIGphdmFzY3JpcHQgcnVudGltZScpO1xuICAgICAgICAgICAgY29uc3QgZXBrID0gYXdhaXQgaW1wb3J0SldLKGpvc2VIZWFkZXIuZXBrLCBhbGcpO1xuICAgICAgICAgICAgbGV0IHBhcnR5VUluZm87XG4gICAgICAgICAgICBsZXQgcGFydHlWSW5mbztcbiAgICAgICAgICAgIGlmIChqb3NlSGVhZGVyLmFwdSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBqb3NlSGVhZGVyLmFwdSAhPT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBKV0VJbnZhbGlkKGBKT1NFIEhlYWRlciBcImFwdVwiIChBZ3JlZW1lbnQgUGFydHlVSW5mbykgaW52YWxpZGApO1xuICAgICAgICAgICAgICAgIHBhcnR5VUluZm8gPSBiYXNlNjR1cmwoam9zZUhlYWRlci5hcHUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGpvc2VIZWFkZXIuYXB2ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGpvc2VIZWFkZXIuYXB2ICE9PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpXRUludmFsaWQoYEpPU0UgSGVhZGVyIFwiYXB2XCIgKEFncmVlbWVudCBQYXJ0eVZJbmZvKSBpbnZhbGlkYCk7XG4gICAgICAgICAgICAgICAgcGFydHlWSW5mbyA9IGJhc2U2NHVybChqb3NlSGVhZGVyLmFwdik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzaGFyZWRTZWNyZXQgPSBhd2FpdCBFQ0RILmRlcml2ZUtleShlcGssIGtleSwgYWxnID09PSAnRUNESC1FUycgPyBqb3NlSGVhZGVyLmVuYyA6IGFsZywgYWxnID09PSAnRUNESC1FUycgPyBjZWtMZW5ndGgoam9zZUhlYWRlci5lbmMpIDogcGFyc2VJbnQoYWxnLnNsaWNlKC01LCAtMiksIDEwKSwgcGFydHlVSW5mbywgcGFydHlWSW5mbyk7XG4gICAgICAgICAgICBpZiAoYWxnID09PSAnRUNESC1FUycpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNoYXJlZFNlY3JldDtcbiAgICAgICAgICAgIGlmIChlbmNyeXB0ZWRLZXkgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSldFSW52YWxpZCgnSldFIEVuY3J5cHRlZCBLZXkgbWlzc2luZycpO1xuICAgICAgICAgICAgcmV0dXJuIGFlc0t3KGFsZy5zbGljZSgtNiksIHNoYXJlZFNlY3JldCwgZW5jcnlwdGVkS2V5KTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdSU0ExXzUnOlxuICAgICAgICBjYXNlICdSU0EtT0FFUCc6XG4gICAgICAgIGNhc2UgJ1JTQS1PQUVQLTI1Nic6XG4gICAgICAgIGNhc2UgJ1JTQS1PQUVQLTM4NCc6XG4gICAgICAgIGNhc2UgJ1JTQS1PQUVQLTUxMic6IHtcbiAgICAgICAgICAgIGlmIChlbmNyeXB0ZWRLZXkgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSldFSW52YWxpZCgnSldFIEVuY3J5cHRlZCBLZXkgbWlzc2luZycpO1xuICAgICAgICAgICAgcmV0dXJuIHJzYUVzKGFsZywga2V5LCBlbmNyeXB0ZWRLZXkpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ1BCRVMyLUhTMjU2K0ExMjhLVyc6XG4gICAgICAgIGNhc2UgJ1BCRVMyLUhTMzg0K0ExOTJLVyc6XG4gICAgICAgIGNhc2UgJ1BCRVMyLUhTNTEyK0EyNTZLVyc6IHtcbiAgICAgICAgICAgIGlmIChlbmNyeXB0ZWRLZXkgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSldFSW52YWxpZCgnSldFIEVuY3J5cHRlZCBLZXkgbWlzc2luZycpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBqb3NlSGVhZGVyLnAyYyAhPT0gJ251bWJlcicpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpXRUludmFsaWQoYEpPU0UgSGVhZGVyIFwicDJjXCIgKFBCRVMyIENvdW50KSBtaXNzaW5nIG9yIGludmFsaWRgKTtcbiAgICAgICAgICAgIGNvbnN0IHAyY0xpbWl0ID0gKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5tYXhQQkVTMkNvdW50KSB8fCAxMDAwMDtcbiAgICAgICAgICAgIGlmIChqb3NlSGVhZGVyLnAyYyA+IHAyY0xpbWl0KVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKV0VJbnZhbGlkKGBKT1NFIEhlYWRlciBcInAyY1wiIChQQkVTMiBDb3VudCkgb3V0IGlzIG9mIGFjY2VwdGFibGUgYm91bmRzYCk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGpvc2VIZWFkZXIucDJzICE9PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSldFSW52YWxpZChgSk9TRSBIZWFkZXIgXCJwMnNcIiAoUEJFUzIgU2FsdCkgbWlzc2luZyBvciBpbnZhbGlkYCk7XG4gICAgICAgICAgICByZXR1cm4gcGJlczJLdyhhbGcsIGtleSwgZW5jcnlwdGVkS2V5LCBqb3NlSGVhZGVyLnAyYywgYmFzZTY0dXJsKGpvc2VIZWFkZXIucDJzKSk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnQTEyOEtXJzpcbiAgICAgICAgY2FzZSAnQTE5MktXJzpcbiAgICAgICAgY2FzZSAnQTI1NktXJzoge1xuICAgICAgICAgICAgaWYgKGVuY3J5cHRlZEtleSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKV0VJbnZhbGlkKCdKV0UgRW5jcnlwdGVkIEtleSBtaXNzaW5nJyk7XG4gICAgICAgICAgICByZXR1cm4gYWVzS3coYWxnLCBrZXksIGVuY3J5cHRlZEtleSk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnQTEyOEdDTUtXJzpcbiAgICAgICAgY2FzZSAnQTE5MkdDTUtXJzpcbiAgICAgICAgY2FzZSAnQTI1NkdDTUtXJzoge1xuICAgICAgICAgICAgaWYgKGVuY3J5cHRlZEtleSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKV0VJbnZhbGlkKCdKV0UgRW5jcnlwdGVkIEtleSBtaXNzaW5nJyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGpvc2VIZWFkZXIuaXYgIT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKV0VJbnZhbGlkKGBKT1NFIEhlYWRlciBcIml2XCIgKEluaXRpYWxpemF0aW9uIFZlY3RvcikgbWlzc2luZyBvciBpbnZhbGlkYCk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGpvc2VIZWFkZXIudGFnICE9PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSldFSW52YWxpZChgSk9TRSBIZWFkZXIgXCJ0YWdcIiAoQXV0aGVudGljYXRpb24gVGFnKSBtaXNzaW5nIG9yIGludmFsaWRgKTtcbiAgICAgICAgICAgIGNvbnN0IGl2ID0gYmFzZTY0dXJsKGpvc2VIZWFkZXIuaXYpO1xuICAgICAgICAgICAgY29uc3QgdGFnID0gYmFzZTY0dXJsKGpvc2VIZWFkZXIudGFnKTtcbiAgICAgICAgICAgIHJldHVybiBhZXNHY21LdyhhbGcsIGtleSwgZW5jcnlwdGVkS2V5LCBpdiwgdGFnKTtcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSk9TRU5vdFN1cHBvcnRlZCgnSW52YWxpZCBvciB1bnN1cHBvcnRlZCBcImFsZ1wiIChKV0UgQWxnb3JpdGhtKSBoZWFkZXIgdmFsdWUnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IGRlY3J5cHRLZXlNYW5hZ2VtZW50O1xuIiwiaW1wb3J0IHsgd3JhcCBhcyBhZXNLdyB9IGZyb20gJy4uL3J1bnRpbWUvYWVza3cuanMnO1xuaW1wb3J0ICogYXMgRUNESCBmcm9tICcuLi9ydW50aW1lL2VjZGhlcy5qcyc7XG5pbXBvcnQgeyBlbmNyeXB0IGFzIHBiZXMyS3cgfSBmcm9tICcuLi9ydW50aW1lL3BiZXMya3cuanMnO1xuaW1wb3J0IHsgZW5jcnlwdCBhcyByc2FFcyB9IGZyb20gJy4uL3J1bnRpbWUvcnNhZXMuanMnO1xuaW1wb3J0IHsgZW5jb2RlIGFzIGJhc2U2NHVybCB9IGZyb20gJy4uL3J1bnRpbWUvYmFzZTY0dXJsLmpzJztcbmltcG9ydCBnZW5lcmF0ZUNlaywgeyBiaXRMZW5ndGggYXMgY2VrTGVuZ3RoIH0gZnJvbSAnLi4vbGliL2Nlay5qcyc7XG5pbXBvcnQgeyBKT1NFTm90U3VwcG9ydGVkIH0gZnJvbSAnLi4vdXRpbC9lcnJvcnMuanMnO1xuaW1wb3J0IHsgZXhwb3J0SldLIH0gZnJvbSAnLi4va2V5L2V4cG9ydC5qcyc7XG5pbXBvcnQgY2hlY2tLZXlUeXBlIGZyb20gJy4vY2hlY2tfa2V5X3R5cGUuanMnO1xuaW1wb3J0IHsgd3JhcCBhcyBhZXNHY21LdyB9IGZyb20gJy4vYWVzZ2Nta3cuanMnO1xuYXN5bmMgZnVuY3Rpb24gZW5jcnlwdEtleU1hbmFnZW1lbnQoYWxnLCBlbmMsIGtleSwgcHJvdmlkZWRDZWssIHByb3ZpZGVkUGFyYW1ldGVycyA9IHt9KSB7XG4gICAgbGV0IGVuY3J5cHRlZEtleTtcbiAgICBsZXQgcGFyYW1ldGVycztcbiAgICBsZXQgY2VrO1xuICAgIGNoZWNrS2V5VHlwZShhbGcsIGtleSwgJ2VuY3J5cHQnKTtcbiAgICBzd2l0Y2ggKGFsZykge1xuICAgICAgICBjYXNlICdkaXInOiB7XG4gICAgICAgICAgICBjZWsgPSBrZXk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdFQ0RILUVTJzpcbiAgICAgICAgY2FzZSAnRUNESC1FUytBMTI4S1cnOlxuICAgICAgICBjYXNlICdFQ0RILUVTK0ExOTJLVyc6XG4gICAgICAgIGNhc2UgJ0VDREgtRVMrQTI1NktXJzoge1xuICAgICAgICAgICAgaWYgKCFFQ0RILmVjZGhBbGxvd2VkKGtleSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSk9TRU5vdFN1cHBvcnRlZCgnRUNESCB3aXRoIHRoZSBwcm92aWRlZCBrZXkgaXMgbm90IGFsbG93ZWQgb3Igbm90IHN1cHBvcnRlZCBieSB5b3VyIGphdmFzY3JpcHQgcnVudGltZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgeyBhcHUsIGFwdiB9ID0gcHJvdmlkZWRQYXJhbWV0ZXJzO1xuICAgICAgICAgICAgbGV0IHsgZXBrOiBlcGhlbWVyYWxLZXkgfSA9IHByb3ZpZGVkUGFyYW1ldGVycztcbiAgICAgICAgICAgIGVwaGVtZXJhbEtleSB8fCAoZXBoZW1lcmFsS2V5ID0gKGF3YWl0IEVDREguZ2VuZXJhdGVFcGsoa2V5KSkucHJpdmF0ZUtleSk7XG4gICAgICAgICAgICBjb25zdCB7IHgsIHksIGNydiwga3R5IH0gPSBhd2FpdCBleHBvcnRKV0soZXBoZW1lcmFsS2V5KTtcbiAgICAgICAgICAgIGNvbnN0IHNoYXJlZFNlY3JldCA9IGF3YWl0IEVDREguZGVyaXZlS2V5KGtleSwgZXBoZW1lcmFsS2V5LCBhbGcgPT09ICdFQ0RILUVTJyA/IGVuYyA6IGFsZywgYWxnID09PSAnRUNESC1FUycgPyBjZWtMZW5ndGgoZW5jKSA6IHBhcnNlSW50KGFsZy5zbGljZSgtNSwgLTIpLCAxMCksIGFwdSwgYXB2KTtcbiAgICAgICAgICAgIHBhcmFtZXRlcnMgPSB7IGVwazogeyB4LCBjcnYsIGt0eSB9IH07XG4gICAgICAgICAgICBpZiAoa3R5ID09PSAnRUMnKVxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMuZXBrLnkgPSB5O1xuICAgICAgICAgICAgaWYgKGFwdSlcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLmFwdSA9IGJhc2U2NHVybChhcHUpO1xuICAgICAgICAgICAgaWYgKGFwdilcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLmFwdiA9IGJhc2U2NHVybChhcHYpO1xuICAgICAgICAgICAgaWYgKGFsZyA9PT0gJ0VDREgtRVMnKSB7XG4gICAgICAgICAgICAgICAgY2VrID0gc2hhcmVkU2VjcmV0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2VrID0gcHJvdmlkZWRDZWsgfHwgZ2VuZXJhdGVDZWsoZW5jKTtcbiAgICAgICAgICAgIGNvbnN0IGt3QWxnID0gYWxnLnNsaWNlKC02KTtcbiAgICAgICAgICAgIGVuY3J5cHRlZEtleSA9IGF3YWl0IGFlc0t3KGt3QWxnLCBzaGFyZWRTZWNyZXQsIGNlayk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdSU0ExXzUnOlxuICAgICAgICBjYXNlICdSU0EtT0FFUCc6XG4gICAgICAgIGNhc2UgJ1JTQS1PQUVQLTI1Nic6XG4gICAgICAgIGNhc2UgJ1JTQS1PQUVQLTM4NCc6XG4gICAgICAgIGNhc2UgJ1JTQS1PQUVQLTUxMic6IHtcbiAgICAgICAgICAgIGNlayA9IHByb3ZpZGVkQ2VrIHx8IGdlbmVyYXRlQ2VrKGVuYyk7XG4gICAgICAgICAgICBlbmNyeXB0ZWRLZXkgPSBhd2FpdCByc2FFcyhhbGcsIGtleSwgY2VrKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ1BCRVMyLUhTMjU2K0ExMjhLVyc6XG4gICAgICAgIGNhc2UgJ1BCRVMyLUhTMzg0K0ExOTJLVyc6XG4gICAgICAgIGNhc2UgJ1BCRVMyLUhTNTEyK0EyNTZLVyc6IHtcbiAgICAgICAgICAgIGNlayA9IHByb3ZpZGVkQ2VrIHx8IGdlbmVyYXRlQ2VrKGVuYyk7XG4gICAgICAgICAgICBjb25zdCB7IHAyYywgcDJzIH0gPSBwcm92aWRlZFBhcmFtZXRlcnM7XG4gICAgICAgICAgICAoeyBlbmNyeXB0ZWRLZXksIC4uLnBhcmFtZXRlcnMgfSA9IGF3YWl0IHBiZXMyS3coYWxnLCBrZXksIGNlaywgcDJjLCBwMnMpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ0ExMjhLVyc6XG4gICAgICAgIGNhc2UgJ0ExOTJLVyc6XG4gICAgICAgIGNhc2UgJ0EyNTZLVyc6IHtcbiAgICAgICAgICAgIGNlayA9IHByb3ZpZGVkQ2VrIHx8IGdlbmVyYXRlQ2VrKGVuYyk7XG4gICAgICAgICAgICBlbmNyeXB0ZWRLZXkgPSBhd2FpdCBhZXNLdyhhbGcsIGtleSwgY2VrKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ0ExMjhHQ01LVyc6XG4gICAgICAgIGNhc2UgJ0ExOTJHQ01LVyc6XG4gICAgICAgIGNhc2UgJ0EyNTZHQ01LVyc6IHtcbiAgICAgICAgICAgIGNlayA9IHByb3ZpZGVkQ2VrIHx8IGdlbmVyYXRlQ2VrKGVuYyk7XG4gICAgICAgICAgICBjb25zdCB7IGl2IH0gPSBwcm92aWRlZFBhcmFtZXRlcnM7XG4gICAgICAgICAgICAoeyBlbmNyeXB0ZWRLZXksIC4uLnBhcmFtZXRlcnMgfSA9IGF3YWl0IGFlc0djbUt3KGFsZywga2V5LCBjZWssIGl2KSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSk9TRU5vdFN1cHBvcnRlZCgnSW52YWxpZCBvciB1bnN1cHBvcnRlZCBcImFsZ1wiIChKV0UgQWxnb3JpdGhtKSBoZWFkZXIgdmFsdWUnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyBjZWssIGVuY3J5cHRlZEtleSwgcGFyYW1ldGVycyB9O1xufVxuZXhwb3J0IGRlZmF1bHQgZW5jcnlwdEtleU1hbmFnZW1lbnQ7XG4iLCJleHBvcnQgZGVmYXVsdCAoZGF0ZSkgPT4gTWF0aC5mbG9vcihkYXRlLmdldFRpbWUoKSAvIDEwMDApO1xuIiwiZXhwb3J0IGRlZmF1bHQgKGI2NCwgZGVzY3JpcHRvcikgPT4ge1xuICAgIGNvbnN0IG5ld2xpbmVkID0gKGI2NC5tYXRjaCgvLnsxLDY0fS9nKSB8fCBbXSkuam9pbignXFxuJyk7XG4gICAgcmV0dXJuIGAtLS0tLUJFR0lOICR7ZGVzY3JpcHRvcn0tLS0tLVxcbiR7bmV3bGluZWR9XFxuLS0tLS1FTkQgJHtkZXNjcmlwdG9yfS0tLS0tYDtcbn07XG4iLCJmdW5jdGlvbiBtZXNzYWdlKG1zZywgYWN0dWFsLCAuLi50eXBlcykge1xuICAgIGlmICh0eXBlcy5sZW5ndGggPiAyKSB7XG4gICAgICAgIGNvbnN0IGxhc3QgPSB0eXBlcy5wb3AoKTtcbiAgICAgICAgbXNnICs9IGBvbmUgb2YgdHlwZSAke3R5cGVzLmpvaW4oJywgJyl9LCBvciAke2xhc3R9LmA7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICBtc2cgKz0gYG9uZSBvZiB0eXBlICR7dHlwZXNbMF19IG9yICR7dHlwZXNbMV19LmA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBtc2cgKz0gYG9mIHR5cGUgJHt0eXBlc1swXX0uYDtcbiAgICB9XG4gICAgaWYgKGFjdHVhbCA9PSBudWxsKSB7XG4gICAgICAgIG1zZyArPSBgIFJlY2VpdmVkICR7YWN0dWFsfWA7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBhY3R1YWwgPT09ICdmdW5jdGlvbicgJiYgYWN0dWFsLm5hbWUpIHtcbiAgICAgICAgbXNnICs9IGAgUmVjZWl2ZWQgZnVuY3Rpb24gJHthY3R1YWwubmFtZX1gO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgYWN0dWFsID09PSAnb2JqZWN0JyAmJiBhY3R1YWwgIT0gbnVsbCkge1xuICAgICAgICBpZiAoYWN0dWFsLmNvbnN0cnVjdG9yICYmIGFjdHVhbC5jb25zdHJ1Y3Rvci5uYW1lKSB7XG4gICAgICAgICAgICBtc2cgKz0gYCBSZWNlaXZlZCBhbiBpbnN0YW5jZSBvZiAke2FjdHVhbC5jb25zdHJ1Y3Rvci5uYW1lfWA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1zZztcbn1cbmV4cG9ydCBkZWZhdWx0IChhY3R1YWwsIC4uLnR5cGVzKSA9PiB7XG4gICAgcmV0dXJuIG1lc3NhZ2UoJ0tleSBtdXN0IGJlICcsIGFjdHVhbCwgLi4udHlwZXMpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiB3aXRoQWxnKGFsZywgYWN0dWFsLCAuLi50eXBlcykge1xuICAgIHJldHVybiBtZXNzYWdlKGBLZXkgZm9yIHRoZSAke2FsZ30gYWxnb3JpdGhtIG11c3QgYmUgYCwgYWN0dWFsLCAuLi50eXBlcyk7XG59XG4iLCJjb25zdCBpc0Rpc2pvaW50ID0gKC4uLmhlYWRlcnMpID0+IHtcbiAgICBjb25zdCBzb3VyY2VzID0gaGVhZGVycy5maWx0ZXIoQm9vbGVhbik7XG4gICAgaWYgKHNvdXJjZXMubGVuZ3RoID09PSAwIHx8IHNvdXJjZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBsZXQgYWNjO1xuICAgIGZvciAoY29uc3QgaGVhZGVyIG9mIHNvdXJjZXMpIHtcbiAgICAgICAgY29uc3QgcGFyYW1ldGVycyA9IE9iamVjdC5rZXlzKGhlYWRlcik7XG4gICAgICAgIGlmICghYWNjIHx8IGFjYy5zaXplID09PSAwKSB7XG4gICAgICAgICAgICBhY2MgPSBuZXcgU2V0KHBhcmFtZXRlcnMpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBwYXJhbWV0ZXIgb2YgcGFyYW1ldGVycykge1xuICAgICAgICAgICAgaWYgKGFjYy5oYXMocGFyYW1ldGVyKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFjYy5hZGQocGFyYW1ldGVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5leHBvcnQgZGVmYXVsdCBpc0Rpc2pvaW50O1xuIiwiZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGw7XG59XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc09iamVjdChpbnB1dCkge1xuICAgIGlmICghaXNPYmplY3RMaWtlKGlucHV0KSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaW5wdXQpICE9PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoaW5wdXQpID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBsZXQgcHJvdG8gPSBpbnB1dDtcbiAgICB3aGlsZSAoT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvKSAhPT0gbnVsbCkge1xuICAgICAgICBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90byk7XG4gICAgfVxuICAgIHJldHVybiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoaW5wdXQpID09PSBwcm90bztcbn1cbiIsImltcG9ydCB7IEpPU0VOb3RTdXBwb3J0ZWQgfSBmcm9tICcuLi91dGlsL2Vycm9ycy5qcyc7XG5pbXBvcnQgcmFuZG9tIGZyb20gJy4uL3J1bnRpbWUvcmFuZG9tLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBiaXRMZW5ndGgoYWxnKSB7XG4gICAgc3dpdGNoIChhbGcpIHtcbiAgICAgICAgY2FzZSAnQTEyOEdDTSc6XG4gICAgICAgIGNhc2UgJ0ExMjhHQ01LVyc6XG4gICAgICAgIGNhc2UgJ0ExOTJHQ00nOlxuICAgICAgICBjYXNlICdBMTkyR0NNS1cnOlxuICAgICAgICBjYXNlICdBMjU2R0NNJzpcbiAgICAgICAgY2FzZSAnQTI1NkdDTUtXJzpcbiAgICAgICAgICAgIHJldHVybiA5NjtcbiAgICAgICAgY2FzZSAnQTEyOENCQy1IUzI1Nic6XG4gICAgICAgIGNhc2UgJ0ExOTJDQkMtSFMzODQnOlxuICAgICAgICBjYXNlICdBMjU2Q0JDLUhTNTEyJzpcbiAgICAgICAgICAgIHJldHVybiAxMjg7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgSk9TRU5vdFN1cHBvcnRlZChgVW5zdXBwb3J0ZWQgSldFIEFsZ29yaXRobTogJHthbGd9YCk7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgKGFsZykgPT4gcmFuZG9tKG5ldyBVaW50OEFycmF5KGJpdExlbmd0aChhbGcpID4+IDMpKTtcbiIsImltcG9ydCB7IEpXVENsYWltVmFsaWRhdGlvbkZhaWxlZCwgSldURXhwaXJlZCwgSldUSW52YWxpZCB9IGZyb20gJy4uL3V0aWwvZXJyb3JzLmpzJztcbmltcG9ydCB7IGRlY29kZXIgfSBmcm9tICcuL2J1ZmZlcl91dGlscy5qcyc7XG5pbXBvcnQgZXBvY2ggZnJvbSAnLi9lcG9jaC5qcyc7XG5pbXBvcnQgc2VjcyBmcm9tICcuL3NlY3MuanMnO1xuaW1wb3J0IGlzT2JqZWN0IGZyb20gJy4vaXNfb2JqZWN0LmpzJztcbmNvbnN0IG5vcm1hbGl6ZVR5cCA9ICh2YWx1ZSkgPT4gdmFsdWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9eYXBwbGljYXRpb25cXC8vLCAnJyk7XG5jb25zdCBjaGVja0F1ZGllbmNlUHJlc2VuY2UgPSAoYXVkUGF5bG9hZCwgYXVkT3B0aW9uKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBhdWRQYXlsb2FkID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gYXVkT3B0aW9uLmluY2x1ZGVzKGF1ZFBheWxvYWQpO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShhdWRQYXlsb2FkKSkge1xuICAgICAgICByZXR1cm4gYXVkT3B0aW9uLnNvbWUoU2V0LnByb3RvdHlwZS5oYXMuYmluZChuZXcgU2V0KGF1ZFBheWxvYWQpKSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5leHBvcnQgZGVmYXVsdCAocHJvdGVjdGVkSGVhZGVyLCBlbmNvZGVkUGF5bG9hZCwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgY29uc3QgeyB0eXAgfSA9IG9wdGlvbnM7XG4gICAgaWYgKHR5cCAmJlxuICAgICAgICAodHlwZW9mIHByb3RlY3RlZEhlYWRlci50eXAgIT09ICdzdHJpbmcnIHx8XG4gICAgICAgICAgICBub3JtYWxpemVUeXAocHJvdGVjdGVkSGVhZGVyLnR5cCkgIT09IG5vcm1hbGl6ZVR5cCh0eXApKSkge1xuICAgICAgICB0aHJvdyBuZXcgSldUQ2xhaW1WYWxpZGF0aW9uRmFpbGVkKCd1bmV4cGVjdGVkIFwidHlwXCIgSldUIGhlYWRlciB2YWx1ZScsICd0eXAnLCAnY2hlY2tfZmFpbGVkJyk7XG4gICAgfVxuICAgIGxldCBwYXlsb2FkO1xuICAgIHRyeSB7XG4gICAgICAgIHBheWxvYWQgPSBKU09OLnBhcnNlKGRlY29kZXIuZGVjb2RlKGVuY29kZWRQYXlsb2FkKSk7XG4gICAgfVxuICAgIGNhdGNoIChfYSkge1xuICAgIH1cbiAgICBpZiAoIWlzT2JqZWN0KHBheWxvYWQpKSB7XG4gICAgICAgIHRocm93IG5ldyBKV1RJbnZhbGlkKCdKV1QgQ2xhaW1zIFNldCBtdXN0IGJlIGEgdG9wLWxldmVsIEpTT04gb2JqZWN0Jyk7XG4gICAgfVxuICAgIGNvbnN0IHsgaXNzdWVyIH0gPSBvcHRpb25zO1xuICAgIGlmIChpc3N1ZXIgJiYgIShBcnJheS5pc0FycmF5KGlzc3VlcikgPyBpc3N1ZXIgOiBbaXNzdWVyXSkuaW5jbHVkZXMocGF5bG9hZC5pc3MpKSB7XG4gICAgICAgIHRocm93IG5ldyBKV1RDbGFpbVZhbGlkYXRpb25GYWlsZWQoJ3VuZXhwZWN0ZWQgXCJpc3NcIiBjbGFpbSB2YWx1ZScsICdpc3MnLCAnY2hlY2tfZmFpbGVkJyk7XG4gICAgfVxuICAgIGNvbnN0IHsgc3ViamVjdCB9ID0gb3B0aW9ucztcbiAgICBpZiAoc3ViamVjdCAmJiBwYXlsb2FkLnN1YiAhPT0gc3ViamVjdCkge1xuICAgICAgICB0aHJvdyBuZXcgSldUQ2xhaW1WYWxpZGF0aW9uRmFpbGVkKCd1bmV4cGVjdGVkIFwic3ViXCIgY2xhaW0gdmFsdWUnLCAnc3ViJywgJ2NoZWNrX2ZhaWxlZCcpO1xuICAgIH1cbiAgICBjb25zdCB7IGF1ZGllbmNlIH0gPSBvcHRpb25zO1xuICAgIGlmIChhdWRpZW5jZSAmJlxuICAgICAgICAhY2hlY2tBdWRpZW5jZVByZXNlbmNlKHBheWxvYWQuYXVkLCB0eXBlb2YgYXVkaWVuY2UgPT09ICdzdHJpbmcnID8gW2F1ZGllbmNlXSA6IGF1ZGllbmNlKSkge1xuICAgICAgICB0aHJvdyBuZXcgSldUQ2xhaW1WYWxpZGF0aW9uRmFpbGVkKCd1bmV4cGVjdGVkIFwiYXVkXCIgY2xhaW0gdmFsdWUnLCAnYXVkJywgJ2NoZWNrX2ZhaWxlZCcpO1xuICAgIH1cbiAgICBsZXQgdG9sZXJhbmNlO1xuICAgIHN3aXRjaCAodHlwZW9mIG9wdGlvbnMuY2xvY2tUb2xlcmFuY2UpIHtcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgIHRvbGVyYW5jZSA9IHNlY3Mob3B0aW9ucy5jbG9ja1RvbGVyYW5jZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgIHRvbGVyYW5jZSA9IG9wdGlvbnMuY2xvY2tUb2xlcmFuY2U7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAndW5kZWZpbmVkJzpcbiAgICAgICAgICAgIHRvbGVyYW5jZSA9IDA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgY2xvY2tUb2xlcmFuY2Ugb3B0aW9uIHR5cGUnKTtcbiAgICB9XG4gICAgY29uc3QgeyBjdXJyZW50RGF0ZSB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBub3cgPSBlcG9jaChjdXJyZW50RGF0ZSB8fCBuZXcgRGF0ZSgpKTtcbiAgICBpZiAoKHBheWxvYWQuaWF0ICE9PSB1bmRlZmluZWQgfHwgb3B0aW9ucy5tYXhUb2tlbkFnZSkgJiYgdHlwZW9mIHBheWxvYWQuaWF0ICE9PSAnbnVtYmVyJykge1xuICAgICAgICB0aHJvdyBuZXcgSldUQ2xhaW1WYWxpZGF0aW9uRmFpbGVkKCdcImlhdFwiIGNsYWltIG11c3QgYmUgYSBudW1iZXInLCAnaWF0JywgJ2ludmFsaWQnKTtcbiAgICB9XG4gICAgaWYgKHBheWxvYWQubmJmICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwYXlsb2FkLm5iZiAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBKV1RDbGFpbVZhbGlkYXRpb25GYWlsZWQoJ1wibmJmXCIgY2xhaW0gbXVzdCBiZSBhIG51bWJlcicsICduYmYnLCAnaW52YWxpZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXlsb2FkLm5iZiA+IG5vdyArIHRvbGVyYW5jZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEpXVENsYWltVmFsaWRhdGlvbkZhaWxlZCgnXCJuYmZcIiBjbGFpbSB0aW1lc3RhbXAgY2hlY2sgZmFpbGVkJywgJ25iZicsICdjaGVja19mYWlsZWQnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocGF5bG9hZC5leHAgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAodHlwZW9mIHBheWxvYWQuZXhwICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEpXVENsYWltVmFsaWRhdGlvbkZhaWxlZCgnXCJleHBcIiBjbGFpbSBtdXN0IGJlIGEgbnVtYmVyJywgJ2V4cCcsICdpbnZhbGlkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBheWxvYWQuZXhwIDw9IG5vdyAtIHRvbGVyYW5jZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEpXVEV4cGlyZWQoJ1wiZXhwXCIgY2xhaW0gdGltZXN0YW1wIGNoZWNrIGZhaWxlZCcsICdleHAnLCAnY2hlY2tfZmFpbGVkJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9wdGlvbnMubWF4VG9rZW5BZ2UpIHtcbiAgICAgICAgY29uc3QgYWdlID0gbm93IC0gcGF5bG9hZC5pYXQ7XG4gICAgICAgIGNvbnN0IG1heCA9IHR5cGVvZiBvcHRpb25zLm1heFRva2VuQWdlID09PSAnbnVtYmVyJyA/IG9wdGlvbnMubWF4VG9rZW5BZ2UgOiBzZWNzKG9wdGlvbnMubWF4VG9rZW5BZ2UpO1xuICAgICAgICBpZiAoYWdlIC0gdG9sZXJhbmNlID4gbWF4KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSldURXhwaXJlZCgnXCJpYXRcIiBjbGFpbSB0aW1lc3RhbXAgY2hlY2sgZmFpbGVkICh0b28gZmFyIGluIHRoZSBwYXN0KScsICdpYXQnLCAnY2hlY2tfZmFpbGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFnZSA8IDAgLSB0b2xlcmFuY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBKV1RDbGFpbVZhbGlkYXRpb25GYWlsZWQoJ1wiaWF0XCIgY2xhaW0gdGltZXN0YW1wIGNoZWNrIGZhaWxlZCAoaXQgc2hvdWxkIGJlIGluIHRoZSBwYXN0KScsICdpYXQnLCAnY2hlY2tfZmFpbGVkJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBheWxvYWQ7XG59O1xuIiwiY29uc3QgbWludXRlID0gNjA7XG5jb25zdCBob3VyID0gbWludXRlICogNjA7XG5jb25zdCBkYXkgPSBob3VyICogMjQ7XG5jb25zdCB3ZWVrID0gZGF5ICogNztcbmNvbnN0IHllYXIgPSBkYXkgKiAzNjUuMjU7XG5jb25zdCBSRUdFWCA9IC9eKFxcZCt8XFxkK1xcLlxcZCspID8oc2Vjb25kcz98c2Vjcz98c3xtaW51dGVzP3xtaW5zP3xtfGhvdXJzP3xocnM/fGh8ZGF5cz98ZHx3ZWVrcz98d3x5ZWFycz98eXJzP3x5KSQvaTtcbmV4cG9ydCBkZWZhdWx0IChzdHIpID0+IHtcbiAgICBjb25zdCBtYXRjaGVkID0gUkVHRVguZXhlYyhzdHIpO1xuICAgIGlmICghbWF0Y2hlZCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIHRpbWUgcGVyaW9kIGZvcm1hdCcpO1xuICAgIH1cbiAgICBjb25zdCB2YWx1ZSA9IHBhcnNlRmxvYXQobWF0Y2hlZFsxXSk7XG4gICAgY29uc3QgdW5pdCA9IG1hdGNoZWRbMl0udG9Mb3dlckNhc2UoKTtcbiAgICBzd2l0Y2ggKHVuaXQpIHtcbiAgICAgICAgY2FzZSAnc2VjJzpcbiAgICAgICAgY2FzZSAnc2Vjcyc6XG4gICAgICAgIGNhc2UgJ3NlY29uZCc6XG4gICAgICAgIGNhc2UgJ3NlY29uZHMnOlxuICAgICAgICBjYXNlICdzJzpcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlKTtcbiAgICAgICAgY2FzZSAnbWludXRlJzpcbiAgICAgICAgY2FzZSAnbWludXRlcyc6XG4gICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgIGNhc2UgJ21pbnMnOlxuICAgICAgICBjYXNlICdtJzpcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlICogbWludXRlKTtcbiAgICAgICAgY2FzZSAnaG91cic6XG4gICAgICAgIGNhc2UgJ2hvdXJzJzpcbiAgICAgICAgY2FzZSAnaHInOlxuICAgICAgICBjYXNlICdocnMnOlxuICAgICAgICBjYXNlICdoJzpcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlICogaG91cik7XG4gICAgICAgIGNhc2UgJ2RheSc6XG4gICAgICAgIGNhc2UgJ2RheXMnOlxuICAgICAgICBjYXNlICdkJzpcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlICogZGF5KTtcbiAgICAgICAgY2FzZSAnd2Vlayc6XG4gICAgICAgIGNhc2UgJ3dlZWtzJzpcbiAgICAgICAgY2FzZSAndyc6XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSAqIHdlZWspO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQodmFsdWUgKiB5ZWFyKTtcbiAgICB9XG59O1xuIiwiY29uc3QgdmFsaWRhdGVBbGdvcml0aG1zID0gKG9wdGlvbiwgYWxnb3JpdGhtcykgPT4ge1xuICAgIGlmIChhbGdvcml0aG1zICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgKCFBcnJheS5pc0FycmF5KGFsZ29yaXRobXMpIHx8IGFsZ29yaXRobXMuc29tZSgocykgPT4gdHlwZW9mIHMgIT09ICdzdHJpbmcnKSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgXCIke29wdGlvbn1cIiBvcHRpb24gbXVzdCBiZSBhbiBhcnJheSBvZiBzdHJpbmdzYCk7XG4gICAgfVxuICAgIGlmICghYWxnb3JpdGhtcykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFNldChhbGdvcml0aG1zKTtcbn07XG5leHBvcnQgZGVmYXVsdCB2YWxpZGF0ZUFsZ29yaXRobXM7XG4iLCJpbXBvcnQgeyBKT1NFTm90U3VwcG9ydGVkIH0gZnJvbSAnLi4vdXRpbC9lcnJvcnMuanMnO1xuZnVuY3Rpb24gdmFsaWRhdGVDcml0KEVyciwgcmVjb2duaXplZERlZmF1bHQsIHJlY29nbml6ZWRPcHRpb24sIHByb3RlY3RlZEhlYWRlciwgam9zZUhlYWRlcikge1xuICAgIGlmIChqb3NlSGVhZGVyLmNyaXQgIT09IHVuZGVmaW5lZCAmJiBwcm90ZWN0ZWRIZWFkZXIuY3JpdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnIoJ1wiY3JpdFwiIChDcml0aWNhbCkgSGVhZGVyIFBhcmFtZXRlciBNVVNUIGJlIGludGVncml0eSBwcm90ZWN0ZWQnKTtcbiAgICB9XG4gICAgaWYgKCFwcm90ZWN0ZWRIZWFkZXIgfHwgcHJvdGVjdGVkSGVhZGVyLmNyaXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbmV3IFNldCgpO1xuICAgIH1cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkocHJvdGVjdGVkSGVhZGVyLmNyaXQpIHx8XG4gICAgICAgIHByb3RlY3RlZEhlYWRlci5jcml0Lmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICBwcm90ZWN0ZWRIZWFkZXIuY3JpdC5zb21lKChpbnB1dCkgPT4gdHlwZW9mIGlucHV0ICE9PSAnc3RyaW5nJyB8fCBpbnB1dC5sZW5ndGggPT09IDApKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnIoJ1wiY3JpdFwiIChDcml0aWNhbCkgSGVhZGVyIFBhcmFtZXRlciBNVVNUIGJlIGFuIGFycmF5IG9mIG5vbi1lbXB0eSBzdHJpbmdzIHdoZW4gcHJlc2VudCcpO1xuICAgIH1cbiAgICBsZXQgcmVjb2duaXplZDtcbiAgICBpZiAocmVjb2duaXplZE9wdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJlY29nbml6ZWQgPSBuZXcgTWFwKFsuLi5PYmplY3QuZW50cmllcyhyZWNvZ25pemVkT3B0aW9uKSwgLi4ucmVjb2duaXplZERlZmF1bHQuZW50cmllcygpXSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZWNvZ25pemVkID0gcmVjb2duaXplZERlZmF1bHQ7XG4gICAgfVxuICAgIGZvciAoY29uc3QgcGFyYW1ldGVyIG9mIHByb3RlY3RlZEhlYWRlci5jcml0KSB7XG4gICAgICAgIGlmICghcmVjb2duaXplZC5oYXMocGFyYW1ldGVyKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEpPU0VOb3RTdXBwb3J0ZWQoYEV4dGVuc2lvbiBIZWFkZXIgUGFyYW1ldGVyIFwiJHtwYXJhbWV0ZXJ9XCIgaXMgbm90IHJlY29nbml6ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoam9zZUhlYWRlcltwYXJhbWV0ZXJdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnIoYEV4dGVuc2lvbiBIZWFkZXIgUGFyYW1ldGVyIFwiJHtwYXJhbWV0ZXJ9XCIgaXMgbWlzc2luZ2ApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlY29nbml6ZWQuZ2V0KHBhcmFtZXRlcikgJiYgcHJvdGVjdGVkSGVhZGVyW3BhcmFtZXRlcl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycihgRXh0ZW5zaW9uIEhlYWRlciBQYXJhbWV0ZXIgXCIke3BhcmFtZXRlcn1cIiBNVVNUIGJlIGludGVncml0eSBwcm90ZWN0ZWRgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IFNldChwcm90ZWN0ZWRIZWFkZXIuY3JpdCk7XG59XG5leHBvcnQgZGVmYXVsdCB2YWxpZGF0ZUNyaXQ7XG4iLCJpbXBvcnQgYm9ndXNXZWJDcnlwdG8gZnJvbSAnLi9ib2d1cy5qcyc7XG5pbXBvcnQgY3J5cHRvLCB7IGlzQ3J5cHRvS2V5IH0gZnJvbSAnLi93ZWJjcnlwdG8uanMnO1xuaW1wb3J0IHsgY2hlY2tFbmNDcnlwdG9LZXkgfSBmcm9tICcuLi9saWIvY3J5cHRvX2tleS5qcyc7XG5pbXBvcnQgaW52YWxpZEtleUlucHV0IGZyb20gJy4uL2xpYi9pbnZhbGlkX2tleV9pbnB1dC5qcyc7XG5pbXBvcnQgeyB0eXBlcyB9IGZyb20gJy4vaXNfa2V5X2xpa2UuanMnO1xuZnVuY3Rpb24gY2hlY2tLZXlTaXplKGtleSwgYWxnKSB7XG4gICAgaWYgKGtleS5hbGdvcml0aG0ubGVuZ3RoICE9PSBwYXJzZUludChhbGcuc2xpY2UoMSwgNCksIDEwKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIGtleSBzaXplIGZvciBhbGc6ICR7YWxnfWApO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldENyeXB0b0tleShrZXksIGFsZywgdXNhZ2UpIHtcbiAgICBpZiAoaXNDcnlwdG9LZXkoa2V5KSkge1xuICAgICAgICBjaGVja0VuY0NyeXB0b0tleShrZXksIGFsZywgdXNhZ2UpO1xuICAgICAgICByZXR1cm4ga2V5O1xuICAgIH1cbiAgICBpZiAoa2V5IGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICByZXR1cm4gY3J5cHRvLnN1YnRsZS5pbXBvcnRLZXkoJ3JhdycsIGtleSwgJ0FFUy1LVycsIHRydWUsIFt1c2FnZV0pO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGludmFsaWRLZXlJbnB1dChrZXksIC4uLnR5cGVzLCAnVWludDhBcnJheScpKTtcbn1cbmV4cG9ydCBjb25zdCB3cmFwID0gYXN5bmMgKGFsZywga2V5LCBjZWspID0+IHtcbiAgICBjb25zdCBjcnlwdG9LZXkgPSBhd2FpdCBnZXRDcnlwdG9LZXkoa2V5LCBhbGcsICd3cmFwS2V5Jyk7XG4gICAgY2hlY2tLZXlTaXplKGNyeXB0b0tleSwgYWxnKTtcbiAgICBjb25zdCBjcnlwdG9LZXlDZWsgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmltcG9ydEtleSgncmF3JywgY2VrLCAuLi5ib2d1c1dlYkNyeXB0byk7XG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGF3YWl0IGNyeXB0by5zdWJ0bGUud3JhcEtleSgncmF3JywgY3J5cHRvS2V5Q2VrLCBjcnlwdG9LZXksICdBRVMtS1cnKSk7XG59O1xuZXhwb3J0IGNvbnN0IHVud3JhcCA9IGFzeW5jIChhbGcsIGtleSwgZW5jcnlwdGVkS2V5KSA9PiB7XG4gICAgY29uc3QgY3J5cHRvS2V5ID0gYXdhaXQgZ2V0Q3J5cHRvS2V5KGtleSwgYWxnLCAndW53cmFwS2V5Jyk7XG4gICAgY2hlY2tLZXlTaXplKGNyeXB0b0tleSwgYWxnKTtcbiAgICBjb25zdCBjcnlwdG9LZXlDZWsgPSBhd2FpdCBjcnlwdG8uc3VidGxlLnVud3JhcEtleSgncmF3JywgZW5jcnlwdGVkS2V5LCBjcnlwdG9LZXksICdBRVMtS1cnLCAuLi5ib2d1c1dlYkNyeXB0byk7XG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGF3YWl0IGNyeXB0by5zdWJ0bGUuZXhwb3J0S2V5KCdyYXcnLCBjcnlwdG9LZXlDZWspKTtcbn07XG4iLCJpbXBvcnQgeyBpc0Nsb3VkZmxhcmVXb3JrZXJzIH0gZnJvbSAnLi9lbnYuanMnO1xuaW1wb3J0IGNyeXB0bywgeyBpc0NyeXB0b0tleSB9IGZyb20gJy4vd2ViY3J5cHRvLmpzJztcbmltcG9ydCBpbnZhbGlkS2V5SW5wdXQgZnJvbSAnLi4vbGliL2ludmFsaWRfa2V5X2lucHV0LmpzJztcbmltcG9ydCB7IGVuY29kZUJhc2U2NCwgZGVjb2RlQmFzZTY0IH0gZnJvbSAnLi9iYXNlNjR1cmwuanMnO1xuaW1wb3J0IGZvcm1hdFBFTSBmcm9tICcuLi9saWIvZm9ybWF0X3BlbS5qcyc7XG5pbXBvcnQgeyBKT1NFTm90U3VwcG9ydGVkIH0gZnJvbSAnLi4vdXRpbC9lcnJvcnMuanMnO1xuaW1wb3J0IHsgdHlwZXMgfSBmcm9tICcuL2lzX2tleV9saWtlLmpzJztcbmNvbnN0IGdlbmVyaWNFeHBvcnQgPSBhc3luYyAoa2V5VHlwZSwga2V5Rm9ybWF0LCBrZXkpID0+IHtcbiAgICBpZiAoIWlzQ3J5cHRvS2V5KGtleSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihpbnZhbGlkS2V5SW5wdXQoa2V5LCAuLi50eXBlcykpO1xuICAgIH1cbiAgICBpZiAoIWtleS5leHRyYWN0YWJsZSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDcnlwdG9LZXkgaXMgbm90IGV4dHJhY3RhYmxlJyk7XG4gICAgfVxuICAgIGlmIChrZXkudHlwZSAhPT0ga2V5VHlwZSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBrZXkgaXMgbm90IGEgJHtrZXlUeXBlfSBrZXlgKTtcbiAgICB9XG4gICAgcmV0dXJuIGZvcm1hdFBFTShlbmNvZGVCYXNlNjQobmV3IFVpbnQ4QXJyYXkoYXdhaXQgY3J5cHRvLnN1YnRsZS5leHBvcnRLZXkoa2V5Rm9ybWF0LCBrZXkpKSksIGAke2tleVR5cGUudG9VcHBlckNhc2UoKX0gS0VZYCk7XG59O1xuZXhwb3J0IGNvbnN0IHRvU1BLSSA9IChrZXkpID0+IHtcbiAgICByZXR1cm4gZ2VuZXJpY0V4cG9ydCgncHVibGljJywgJ3Nwa2knLCBrZXkpO1xufTtcbmV4cG9ydCBjb25zdCB0b1BLQ1M4ID0gKGtleSkgPT4ge1xuICAgIHJldHVybiBnZW5lcmljRXhwb3J0KCdwcml2YXRlJywgJ3BrY3M4Jywga2V5KTtcbn07XG5jb25zdCBmaW5kT2lkID0gKGtleURhdGEsIG9pZCwgZnJvbSA9IDApID0+IHtcbiAgICBpZiAoZnJvbSA9PT0gMCkge1xuICAgICAgICBvaWQudW5zaGlmdChvaWQubGVuZ3RoKTtcbiAgICAgICAgb2lkLnVuc2hpZnQoMHgwNik7XG4gICAgfVxuICAgIGxldCBpID0ga2V5RGF0YS5pbmRleE9mKG9pZFswXSwgZnJvbSk7XG4gICAgaWYgKGkgPT09IC0xKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgY29uc3Qgc3ViID0ga2V5RGF0YS5zdWJhcnJheShpLCBpICsgb2lkLmxlbmd0aCk7XG4gICAgaWYgKHN1Yi5sZW5ndGggIT09IG9pZC5sZW5ndGgpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gc3ViLmV2ZXJ5KCh2YWx1ZSwgaW5kZXgpID0+IHZhbHVlID09PSBvaWRbaW5kZXhdKSB8fCBmaW5kT2lkKGtleURhdGEsIG9pZCwgaSArIDEpO1xufTtcbmNvbnN0IGdldE5hbWVkQ3VydmUgPSAoa2V5RGF0YSkgPT4ge1xuICAgIHN3aXRjaCAodHJ1ZSkge1xuICAgICAgICBjYXNlIGZpbmRPaWQoa2V5RGF0YSwgWzB4MmEsIDB4ODYsIDB4NDgsIDB4Y2UsIDB4M2QsIDB4MDMsIDB4MDEsIDB4MDddKTpcbiAgICAgICAgICAgIHJldHVybiAnUC0yNTYnO1xuICAgICAgICBjYXNlIGZpbmRPaWQoa2V5RGF0YSwgWzB4MmIsIDB4ODEsIDB4MDQsIDB4MDAsIDB4MjJdKTpcbiAgICAgICAgICAgIHJldHVybiAnUC0zODQnO1xuICAgICAgICBjYXNlIGZpbmRPaWQoa2V5RGF0YSwgWzB4MmIsIDB4ODEsIDB4MDQsIDB4MDAsIDB4MjNdKTpcbiAgICAgICAgICAgIHJldHVybiAnUC01MjEnO1xuICAgICAgICBjYXNlIGZpbmRPaWQoa2V5RGF0YSwgWzB4MmIsIDB4NjUsIDB4NmVdKTpcbiAgICAgICAgICAgIHJldHVybiAnWDI1NTE5JztcbiAgICAgICAgY2FzZSBmaW5kT2lkKGtleURhdGEsIFsweDJiLCAweDY1LCAweDZmXSk6XG4gICAgICAgICAgICByZXR1cm4gJ1g0NDgnO1xuICAgICAgICBjYXNlIGZpbmRPaWQoa2V5RGF0YSwgWzB4MmIsIDB4NjUsIDB4NzBdKTpcbiAgICAgICAgICAgIHJldHVybiAnRWQyNTUxOSc7XG4gICAgICAgIGNhc2UgZmluZE9pZChrZXlEYXRhLCBbMHgyYiwgMHg2NSwgMHg3MV0pOlxuICAgICAgICAgICAgcmV0dXJuICdFZDQ0OCc7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgSk9TRU5vdFN1cHBvcnRlZCgnSW52YWxpZCBvciB1bnN1cHBvcnRlZCBFQyBLZXkgQ3VydmUgb3IgT0tQIEtleSBTdWIgVHlwZScpO1xuICAgIH1cbn07XG5jb25zdCBnZW5lcmljSW1wb3J0ID0gYXN5bmMgKHJlcGxhY2UsIGtleUZvcm1hdCwgcGVtLCBhbGcsIG9wdGlvbnMpID0+IHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGxldCBhbGdvcml0aG07XG4gICAgbGV0IGtleVVzYWdlcztcbiAgICBjb25zdCBrZXlEYXRhID0gbmV3IFVpbnQ4QXJyYXkoYXRvYihwZW0ucmVwbGFjZShyZXBsYWNlLCAnJykpXG4gICAgICAgIC5zcGxpdCgnJylcbiAgICAgICAgLm1hcCgoYykgPT4gYy5jaGFyQ29kZUF0KDApKSk7XG4gICAgY29uc3QgaXNQdWJsaWMgPSBrZXlGb3JtYXQgPT09ICdzcGtpJztcbiAgICBzd2l0Y2ggKGFsZykge1xuICAgICAgICBjYXNlICdQUzI1Nic6XG4gICAgICAgIGNhc2UgJ1BTMzg0JzpcbiAgICAgICAgY2FzZSAnUFM1MTInOlxuICAgICAgICAgICAgYWxnb3JpdGhtID0geyBuYW1lOiAnUlNBLVBTUycsIGhhc2g6IGBTSEEtJHthbGcuc2xpY2UoLTMpfWAgfTtcbiAgICAgICAgICAgIGtleVVzYWdlcyA9IGlzUHVibGljID8gWyd2ZXJpZnknXSA6IFsnc2lnbiddO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1JTMjU2JzpcbiAgICAgICAgY2FzZSAnUlMzODQnOlxuICAgICAgICBjYXNlICdSUzUxMic6XG4gICAgICAgICAgICBhbGdvcml0aG0gPSB7IG5hbWU6ICdSU0FTU0EtUEtDUzEtdjFfNScsIGhhc2g6IGBTSEEtJHthbGcuc2xpY2UoLTMpfWAgfTtcbiAgICAgICAgICAgIGtleVVzYWdlcyA9IGlzUHVibGljID8gWyd2ZXJpZnknXSA6IFsnc2lnbiddO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1JTQS1PQUVQJzpcbiAgICAgICAgY2FzZSAnUlNBLU9BRVAtMjU2JzpcbiAgICAgICAgY2FzZSAnUlNBLU9BRVAtMzg0JzpcbiAgICAgICAgY2FzZSAnUlNBLU9BRVAtNTEyJzpcbiAgICAgICAgICAgIGFsZ29yaXRobSA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnUlNBLU9BRVAnLFxuICAgICAgICAgICAgICAgIGhhc2g6IGBTSEEtJHtwYXJzZUludChhbGcuc2xpY2UoLTMpLCAxMCkgfHwgMX1gLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGtleVVzYWdlcyA9IGlzUHVibGljID8gWydlbmNyeXB0JywgJ3dyYXBLZXknXSA6IFsnZGVjcnlwdCcsICd1bndyYXBLZXknXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdFUzI1Nic6XG4gICAgICAgICAgICBhbGdvcml0aG0gPSB7IG5hbWU6ICdFQ0RTQScsIG5hbWVkQ3VydmU6ICdQLTI1NicgfTtcbiAgICAgICAgICAgIGtleVVzYWdlcyA9IGlzUHVibGljID8gWyd2ZXJpZnknXSA6IFsnc2lnbiddO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0VTMzg0JzpcbiAgICAgICAgICAgIGFsZ29yaXRobSA9IHsgbmFtZTogJ0VDRFNBJywgbmFtZWRDdXJ2ZTogJ1AtMzg0JyB9O1xuICAgICAgICAgICAga2V5VXNhZ2VzID0gaXNQdWJsaWMgPyBbJ3ZlcmlmeSddIDogWydzaWduJ107XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnRVM1MTInOlxuICAgICAgICAgICAgYWxnb3JpdGhtID0geyBuYW1lOiAnRUNEU0EnLCBuYW1lZEN1cnZlOiAnUC01MjEnIH07XG4gICAgICAgICAgICBrZXlVc2FnZXMgPSBpc1B1YmxpYyA/IFsndmVyaWZ5J10gOiBbJ3NpZ24nXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdFQ0RILUVTJzpcbiAgICAgICAgY2FzZSAnRUNESC1FUytBMTI4S1cnOlxuICAgICAgICBjYXNlICdFQ0RILUVTK0ExOTJLVyc6XG4gICAgICAgIGNhc2UgJ0VDREgtRVMrQTI1NktXJzoge1xuICAgICAgICAgICAgY29uc3QgbmFtZWRDdXJ2ZSA9IGdldE5hbWVkQ3VydmUoa2V5RGF0YSk7XG4gICAgICAgICAgICBhbGdvcml0aG0gPSBuYW1lZEN1cnZlLnN0YXJ0c1dpdGgoJ1AtJykgPyB7IG5hbWU6ICdFQ0RIJywgbmFtZWRDdXJ2ZSB9IDogeyBuYW1lOiBuYW1lZEN1cnZlIH07XG4gICAgICAgICAgICBrZXlVc2FnZXMgPSBpc1B1YmxpYyA/IFtdIDogWydkZXJpdmVCaXRzJ107XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdFZERTQSc6XG4gICAgICAgICAgICBhbGdvcml0aG0gPSB7IG5hbWU6IGdldE5hbWVkQ3VydmUoa2V5RGF0YSkgfTtcbiAgICAgICAgICAgIGtleVVzYWdlcyA9IGlzUHVibGljID8gWyd2ZXJpZnknXSA6IFsnc2lnbiddO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgSk9TRU5vdFN1cHBvcnRlZCgnSW52YWxpZCBvciB1bnN1cHBvcnRlZCBcImFsZ1wiIChBbGdvcml0aG0pIHZhbHVlJyk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBjcnlwdG8uc3VidGxlLmltcG9ydEtleShrZXlGb3JtYXQsIGtleURhdGEsIGFsZ29yaXRobSwgKF9hID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmV4dHJhY3RhYmxlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYWxzZSwga2V5VXNhZ2VzKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBpZiAoYWxnb3JpdGhtLm5hbWUgPT09ICdFZDI1NTE5JyAmJlxuICAgICAgICAgICAgKGVyciA9PT0gbnVsbCB8fCBlcnIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVyci5uYW1lKSA9PT0gJ05vdFN1cHBvcnRlZEVycm9yJyAmJlxuICAgICAgICAgICAgaXNDbG91ZGZsYXJlV29ya2VycygpKSB7XG4gICAgICAgICAgICBhbGdvcml0aG0gPSB7IG5hbWU6ICdOT0RFLUVEMjU1MTknLCBuYW1lZEN1cnZlOiAnTk9ERS1FRDI1NTE5JyB9O1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KGtleUZvcm1hdCwga2V5RGF0YSwgYWxnb3JpdGhtLCAoX2IgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZXh0cmFjdGFibGUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGZhbHNlLCBrZXlVc2FnZXMpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGVycjtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IGZyb21QS0NTOCA9IChwZW0sIGFsZywgb3B0aW9ucykgPT4ge1xuICAgIHJldHVybiBnZW5lcmljSW1wb3J0KC8oPzotLS0tLSg/OkJFR0lOfEVORCkgUFJJVkFURSBLRVktLS0tLXxcXHMpL2csICdwa2NzOCcsIHBlbSwgYWxnLCBvcHRpb25zKTtcbn07XG5leHBvcnQgY29uc3QgZnJvbVNQS0kgPSAocGVtLCBhbGcsIG9wdGlvbnMpID0+IHtcbiAgICByZXR1cm4gZ2VuZXJpY0ltcG9ydCgvKD86LS0tLS0oPzpCRUdJTnxFTkQpIFBVQkxJQyBLRVktLS0tLXxcXHMpL2csICdzcGtpJywgcGVtLCBhbGcsIG9wdGlvbnMpO1xufTtcbmZ1bmN0aW9uIGdldEVsZW1lbnQoc2VxKSB7XG4gICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgIGxldCBuZXh0ID0gMDtcbiAgICB3aGlsZSAobmV4dCA8IHNlcS5sZW5ndGgpIHtcbiAgICAgICAgbGV0IG5leHRQYXJ0ID0gcGFyc2VFbGVtZW50KHNlcS5zdWJhcnJheShuZXh0KSk7XG4gICAgICAgIHJlc3VsdC5wdXNoKG5leHRQYXJ0KTtcbiAgICAgICAgbmV4dCArPSBuZXh0UGFydC5ieXRlTGVuZ3RoO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gcGFyc2VFbGVtZW50KGJ5dGVzKSB7XG4gICAgbGV0IHBvc2l0aW9uID0gMDtcbiAgICBsZXQgdGFnID0gYnl0ZXNbMF0gJiAweDFmO1xuICAgIHBvc2l0aW9uKys7XG4gICAgaWYgKHRhZyA9PT0gMHgxZikge1xuICAgICAgICB0YWcgPSAwO1xuICAgICAgICB3aGlsZSAoYnl0ZXNbcG9zaXRpb25dID49IDB4ODApIHtcbiAgICAgICAgICAgIHRhZyA9IHRhZyAqIDEyOCArIGJ5dGVzW3Bvc2l0aW9uXSAtIDB4ODA7XG4gICAgICAgICAgICBwb3NpdGlvbisrO1xuICAgICAgICB9XG4gICAgICAgIHRhZyA9IHRhZyAqIDEyOCArIGJ5dGVzW3Bvc2l0aW9uXSAtIDB4ODA7XG4gICAgICAgIHBvc2l0aW9uKys7XG4gICAgfVxuICAgIGxldCBsZW5ndGggPSAwO1xuICAgIGlmIChieXRlc1twb3NpdGlvbl0gPCAweDgwKSB7XG4gICAgICAgIGxlbmd0aCA9IGJ5dGVzW3Bvc2l0aW9uXTtcbiAgICAgICAgcG9zaXRpb24rKztcbiAgICB9XG4gICAgZWxzZSBpZiAobGVuZ3RoID09PSAweDgwKSB7XG4gICAgICAgIGxlbmd0aCA9IDA7XG4gICAgICAgIHdoaWxlIChieXRlc1twb3NpdGlvbiArIGxlbmd0aF0gIT09IDAgfHwgYnl0ZXNbcG9zaXRpb24gKyBsZW5ndGggKyAxXSAhPT0gMCkge1xuICAgICAgICAgICAgaWYgKGxlbmd0aCA+IGJ5dGVzLmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIGluZGVmaW5pdGUgZm9ybSBsZW5ndGgnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxlbmd0aCsrO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJ5dGVMZW5ndGggPSBwb3NpdGlvbiArIGxlbmd0aCArIDI7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBieXRlTGVuZ3RoLFxuICAgICAgICAgICAgY29udGVudHM6IGJ5dGVzLnN1YmFycmF5KHBvc2l0aW9uLCBwb3NpdGlvbiArIGxlbmd0aCksXG4gICAgICAgICAgICByYXc6IGJ5dGVzLnN1YmFycmF5KDAsIGJ5dGVMZW5ndGgpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IG51bWJlck9mRGlnaXRzID0gYnl0ZXNbcG9zaXRpb25dICYgMHg3ZjtcbiAgICAgICAgcG9zaXRpb24rKztcbiAgICAgICAgbGVuZ3RoID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1iZXJPZkRpZ2l0czsgaSsrKSB7XG4gICAgICAgICAgICBsZW5ndGggPSBsZW5ndGggKiAyNTYgKyBieXRlc1twb3NpdGlvbl07XG4gICAgICAgICAgICBwb3NpdGlvbisrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGJ5dGVMZW5ndGggPSBwb3NpdGlvbiArIGxlbmd0aDtcbiAgICByZXR1cm4ge1xuICAgICAgICBieXRlTGVuZ3RoLFxuICAgICAgICBjb250ZW50czogYnl0ZXMuc3ViYXJyYXkocG9zaXRpb24sIGJ5dGVMZW5ndGgpLFxuICAgICAgICByYXc6IGJ5dGVzLnN1YmFycmF5KDAsIGJ5dGVMZW5ndGgpLFxuICAgIH07XG59XG5mdW5jdGlvbiBzcGtpRnJvbVg1MDkoYnVmKSB7XG4gICAgY29uc3QgdGJzQ2VydGlmaWNhdGUgPSBnZXRFbGVtZW50KGdldEVsZW1lbnQocGFyc2VFbGVtZW50KGJ1ZikuY29udGVudHMpWzBdLmNvbnRlbnRzKTtcbiAgICByZXR1cm4gZW5jb2RlQmFzZTY0KHRic0NlcnRpZmljYXRlW3Ric0NlcnRpZmljYXRlWzBdLnJhd1swXSA9PT0gMHhhMCA/IDYgOiA1XS5yYXcpO1xufVxuZnVuY3Rpb24gZ2V0U1BLSSh4NTA5KSB7XG4gICAgY29uc3QgcGVtID0geDUwOS5yZXBsYWNlKC8oPzotLS0tLSg/OkJFR0lOfEVORCkgQ0VSVElGSUNBVEUtLS0tLXxcXHMpL2csICcnKTtcbiAgICBjb25zdCByYXcgPSBkZWNvZGVCYXNlNjQocGVtKTtcbiAgICByZXR1cm4gZm9ybWF0UEVNKHNwa2lGcm9tWDUwOShyYXcpLCAnUFVCTElDIEtFWScpO1xufVxuZXhwb3J0IGNvbnN0IGZyb21YNTA5ID0gKHBlbSwgYWxnLCBvcHRpb25zKSA9PiB7XG4gICAgbGV0IHNwa2k7XG4gICAgdHJ5IHtcbiAgICAgICAgc3BraSA9IGdldFNQS0kocGVtKTtcbiAgICB9XG4gICAgY2F0Y2ggKGNhdXNlKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ZhaWxlZCB0byBwYXJzZSB0aGUgWC41MDkgY2VydGlmaWNhdGUnLCB7IGNhdXNlIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZnJvbVNQS0koc3BraSwgYWxnLCBvcHRpb25zKTtcbn07XG4iLCJpbXBvcnQgeyBlbmNvZGVyLCBkZWNvZGVyIH0gZnJvbSAnLi4vbGliL2J1ZmZlcl91dGlscy5qcyc7XG5leHBvcnQgY29uc3QgZW5jb2RlQmFzZTY0ID0gKGlucHV0KSA9PiB7XG4gICAgbGV0IHVuZW5jb2RlZCA9IGlucHV0O1xuICAgIGlmICh0eXBlb2YgdW5lbmNvZGVkID09PSAnc3RyaW5nJykge1xuICAgICAgICB1bmVuY29kZWQgPSBlbmNvZGVyLmVuY29kZSh1bmVuY29kZWQpO1xuICAgIH1cbiAgICBjb25zdCBDSFVOS19TSVpFID0gMHg4MDAwO1xuICAgIGNvbnN0IGFyciA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdW5lbmNvZGVkLmxlbmd0aDsgaSArPSBDSFVOS19TSVpFKSB7XG4gICAgICAgIGFyci5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgdW5lbmNvZGVkLnN1YmFycmF5KGksIGkgKyBDSFVOS19TSVpFKSkpO1xuICAgIH1cbiAgICByZXR1cm4gYnRvYShhcnIuam9pbignJykpO1xufTtcbmV4cG9ydCBjb25zdCBlbmNvZGUgPSAoaW5wdXQpID0+IHtcbiAgICByZXR1cm4gZW5jb2RlQmFzZTY0KGlucHV0KS5yZXBsYWNlKC89L2csICcnKS5yZXBsYWNlKC9cXCsvZywgJy0nKS5yZXBsYWNlKC9cXC8vZywgJ18nKTtcbn07XG5leHBvcnQgY29uc3QgZGVjb2RlQmFzZTY0ID0gKGVuY29kZWQpID0+IHtcbiAgICBjb25zdCBiaW5hcnkgPSBhdG9iKGVuY29kZWQpO1xuICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYmluYXJ5Lmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaW5hcnkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYnl0ZXNbaV0gPSBiaW5hcnkuY2hhckNvZGVBdChpKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ5dGVzO1xufTtcbmV4cG9ydCBjb25zdCBkZWNvZGUgPSAoaW5wdXQpID0+IHtcbiAgICBsZXQgZW5jb2RlZCA9IGlucHV0O1xuICAgIGlmIChlbmNvZGVkIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICBlbmNvZGVkID0gZGVjb2Rlci5kZWNvZGUoZW5jb2RlZCk7XG4gICAgfVxuICAgIGVuY29kZWQgPSBlbmNvZGVkLnJlcGxhY2UoLy0vZywgJysnKS5yZXBsYWNlKC9fL2csICcvJykucmVwbGFjZSgvXFxzL2csICcnKTtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gZGVjb2RlQmFzZTY0KGVuY29kZWQpO1xuICAgIH1cbiAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIGlucHV0IHRvIGJlIGRlY29kZWQgaXMgbm90IGNvcnJlY3RseSBlbmNvZGVkLicpO1xuICAgIH1cbn07XG4iLCJjb25zdCBib2d1c1dlYkNyeXB0byA9IFtcbiAgICB7IGhhc2g6ICdTSEEtMjU2JywgbmFtZTogJ0hNQUMnIH0sXG4gICAgdHJ1ZSxcbiAgICBbJ3NpZ24nXSxcbl07XG5leHBvcnQgZGVmYXVsdCBib2d1c1dlYkNyeXB0bztcbiIsImltcG9ydCB7IEpXRUludmFsaWQgfSBmcm9tICcuLi91dGlsL2Vycm9ycy5qcyc7XG5jb25zdCBjaGVja0Nla0xlbmd0aCA9IChjZWssIGV4cGVjdGVkKSA9PiB7XG4gICAgY29uc3QgYWN0dWFsID0gY2VrLmJ5dGVMZW5ndGggPDwgMztcbiAgICBpZiAoYWN0dWFsICE9PSBleHBlY3RlZCkge1xuICAgICAgICB0aHJvdyBuZXcgSldFSW52YWxpZChgSW52YWxpZCBDb250ZW50IEVuY3J5cHRpb24gS2V5IGxlbmd0aC4gRXhwZWN0ZWQgJHtleHBlY3RlZH0gYml0cywgZ290ICR7YWN0dWFsfSBiaXRzYCk7XG4gICAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IGNoZWNrQ2VrTGVuZ3RoO1xuIiwiZXhwb3J0IGRlZmF1bHQgKGFsZywga2V5KSA9PiB7XG4gICAgaWYgKGFsZy5zdGFydHNXaXRoKCdSUycpIHx8IGFsZy5zdGFydHNXaXRoKCdQUycpKSB7XG4gICAgICAgIGNvbnN0IHsgbW9kdWx1c0xlbmd0aCB9ID0ga2V5LmFsZ29yaXRobTtcbiAgICAgICAgaWYgKHR5cGVvZiBtb2R1bHVzTGVuZ3RoICE9PSAnbnVtYmVyJyB8fCBtb2R1bHVzTGVuZ3RoIDwgMjA0OCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgJHthbGd9IHJlcXVpcmVzIGtleSBtb2R1bHVzTGVuZ3RoIHRvIGJlIDIwNDggYml0cyBvciBsYXJnZXJgKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG4iLCJpbXBvcnQgeyBjb25jYXQsIHVpbnQ2NGJlIH0gZnJvbSAnLi4vbGliL2J1ZmZlcl91dGlscy5qcyc7XG5pbXBvcnQgY2hlY2tJdkxlbmd0aCBmcm9tICcuLi9saWIvY2hlY2tfaXZfbGVuZ3RoLmpzJztcbmltcG9ydCBjaGVja0Nla0xlbmd0aCBmcm9tICcuL2NoZWNrX2Nla19sZW5ndGguanMnO1xuaW1wb3J0IHRpbWluZ1NhZmVFcXVhbCBmcm9tICcuL3RpbWluZ19zYWZlX2VxdWFsLmpzJztcbmltcG9ydCB7IEpPU0VOb3RTdXBwb3J0ZWQsIEpXRURlY3J5cHRpb25GYWlsZWQgfSBmcm9tICcuLi91dGlsL2Vycm9ycy5qcyc7XG5pbXBvcnQgY3J5cHRvLCB7IGlzQ3J5cHRvS2V5IH0gZnJvbSAnLi93ZWJjcnlwdG8uanMnO1xuaW1wb3J0IHsgY2hlY2tFbmNDcnlwdG9LZXkgfSBmcm9tICcuLi9saWIvY3J5cHRvX2tleS5qcyc7XG5pbXBvcnQgaW52YWxpZEtleUlucHV0IGZyb20gJy4uL2xpYi9pbnZhbGlkX2tleV9pbnB1dC5qcyc7XG5pbXBvcnQgeyB0eXBlcyB9IGZyb20gJy4vaXNfa2V5X2xpa2UuanMnO1xuYXN5bmMgZnVuY3Rpb24gY2JjRGVjcnlwdChlbmMsIGNlaywgY2lwaGVydGV4dCwgaXYsIHRhZywgYWFkKSB7XG4gICAgaWYgKCEoY2VrIGluc3RhbmNlb2YgVWludDhBcnJheSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihpbnZhbGlkS2V5SW5wdXQoY2VrLCAnVWludDhBcnJheScpKTtcbiAgICB9XG4gICAgY29uc3Qga2V5U2l6ZSA9IHBhcnNlSW50KGVuYy5zbGljZSgxLCA0KSwgMTApO1xuICAgIGNvbnN0IGVuY0tleSA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCdyYXcnLCBjZWsuc3ViYXJyYXkoa2V5U2l6ZSA+PiAzKSwgJ0FFUy1DQkMnLCBmYWxzZSwgWydkZWNyeXB0J10pO1xuICAgIGNvbnN0IG1hY0tleSA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCdyYXcnLCBjZWsuc3ViYXJyYXkoMCwga2V5U2l6ZSA+PiAzKSwge1xuICAgICAgICBoYXNoOiBgU0hBLSR7a2V5U2l6ZSA8PCAxfWAsXG4gICAgICAgIG5hbWU6ICdITUFDJyxcbiAgICB9LCBmYWxzZSwgWydzaWduJ10pO1xuICAgIGNvbnN0IG1hY0RhdGEgPSBjb25jYXQoYWFkLCBpdiwgY2lwaGVydGV4dCwgdWludDY0YmUoYWFkLmxlbmd0aCA8PCAzKSk7XG4gICAgY29uc3QgZXhwZWN0ZWRUYWcgPSBuZXcgVWludDhBcnJheSgoYXdhaXQgY3J5cHRvLnN1YnRsZS5zaWduKCdITUFDJywgbWFjS2V5LCBtYWNEYXRhKSkuc2xpY2UoMCwga2V5U2l6ZSA+PiAzKSk7XG4gICAgbGV0IG1hY0NoZWNrUGFzc2VkO1xuICAgIHRyeSB7XG4gICAgICAgIG1hY0NoZWNrUGFzc2VkID0gdGltaW5nU2FmZUVxdWFsKHRhZywgZXhwZWN0ZWRUYWcpO1xuICAgIH1cbiAgICBjYXRjaCAoX2EpIHtcbiAgICB9XG4gICAgaWYgKCFtYWNDaGVja1Bhc3NlZCkge1xuICAgICAgICB0aHJvdyBuZXcgSldFRGVjcnlwdGlvbkZhaWxlZCgpO1xuICAgIH1cbiAgICBsZXQgcGxhaW50ZXh0O1xuICAgIHRyeSB7XG4gICAgICAgIHBsYWludGV4dCA9IG5ldyBVaW50OEFycmF5KGF3YWl0IGNyeXB0by5zdWJ0bGUuZGVjcnlwdCh7IGl2LCBuYW1lOiAnQUVTLUNCQycgfSwgZW5jS2V5LCBjaXBoZXJ0ZXh0KSk7XG4gICAgfVxuICAgIGNhdGNoIChfYikge1xuICAgIH1cbiAgICBpZiAoIXBsYWludGV4dCkge1xuICAgICAgICB0aHJvdyBuZXcgSldFRGVjcnlwdGlvbkZhaWxlZCgpO1xuICAgIH1cbiAgICByZXR1cm4gcGxhaW50ZXh0O1xufVxuYXN5bmMgZnVuY3Rpb24gZ2NtRGVjcnlwdChlbmMsIGNlaywgY2lwaGVydGV4dCwgaXYsIHRhZywgYWFkKSB7XG4gICAgbGV0IGVuY0tleTtcbiAgICBpZiAoY2VrIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICBlbmNLZXkgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmltcG9ydEtleSgncmF3JywgY2VrLCAnQUVTLUdDTScsIGZhbHNlLCBbJ2RlY3J5cHQnXSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjaGVja0VuY0NyeXB0b0tleShjZWssIGVuYywgJ2RlY3J5cHQnKTtcbiAgICAgICAgZW5jS2V5ID0gY2VrO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYXdhaXQgY3J5cHRvLnN1YnRsZS5kZWNyeXB0KHtcbiAgICAgICAgICAgIGFkZGl0aW9uYWxEYXRhOiBhYWQsXG4gICAgICAgICAgICBpdixcbiAgICAgICAgICAgIG5hbWU6ICdBRVMtR0NNJyxcbiAgICAgICAgICAgIHRhZ0xlbmd0aDogMTI4LFxuICAgICAgICB9LCBlbmNLZXksIGNvbmNhdChjaXBoZXJ0ZXh0LCB0YWcpKSk7XG4gICAgfVxuICAgIGNhdGNoIChfYSkge1xuICAgICAgICB0aHJvdyBuZXcgSldFRGVjcnlwdGlvbkZhaWxlZCgpO1xuICAgIH1cbn1cbmNvbnN0IGRlY3J5cHQgPSBhc3luYyAoZW5jLCBjZWssIGNpcGhlcnRleHQsIGl2LCB0YWcsIGFhZCkgPT4ge1xuICAgIGlmICghaXNDcnlwdG9LZXkoY2VrKSAmJiAhKGNlayBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoaW52YWxpZEtleUlucHV0KGNlaywgLi4udHlwZXMsICdVaW50OEFycmF5JykpO1xuICAgIH1cbiAgICBjaGVja0l2TGVuZ3RoKGVuYywgaXYpO1xuICAgIHN3aXRjaCAoZW5jKSB7XG4gICAgICAgIGNhc2UgJ0ExMjhDQkMtSFMyNTYnOlxuICAgICAgICBjYXNlICdBMTkyQ0JDLUhTMzg0JzpcbiAgICAgICAgY2FzZSAnQTI1NkNCQy1IUzUxMic6XG4gICAgICAgICAgICBpZiAoY2VrIGluc3RhbmNlb2YgVWludDhBcnJheSlcbiAgICAgICAgICAgICAgICBjaGVja0Nla0xlbmd0aChjZWssIHBhcnNlSW50KGVuYy5zbGljZSgtMyksIDEwKSk7XG4gICAgICAgICAgICByZXR1cm4gY2JjRGVjcnlwdChlbmMsIGNlaywgY2lwaGVydGV4dCwgaXYsIHRhZywgYWFkKTtcbiAgICAgICAgY2FzZSAnQTEyOEdDTSc6XG4gICAgICAgIGNhc2UgJ0ExOTJHQ00nOlxuICAgICAgICBjYXNlICdBMjU2R0NNJzpcbiAgICAgICAgICAgIGlmIChjZWsgaW5zdGFuY2VvZiBVaW50OEFycmF5KVxuICAgICAgICAgICAgICAgIGNoZWNrQ2VrTGVuZ3RoKGNlaywgcGFyc2VJbnQoZW5jLnNsaWNlKDEsIDQpLCAxMCkpO1xuICAgICAgICAgICAgcmV0dXJuIGdjbURlY3J5cHQoZW5jLCBjZWssIGNpcGhlcnRleHQsIGl2LCB0YWcsIGFhZCk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgSk9TRU5vdFN1cHBvcnRlZCgnVW5zdXBwb3J0ZWQgSldFIENvbnRlbnQgRW5jcnlwdGlvbiBBbGdvcml0aG0nKTtcbiAgICB9XG59O1xuZXhwb3J0IGRlZmF1bHQgZGVjcnlwdDtcbiIsImltcG9ydCBjcnlwdG8gZnJvbSAnLi93ZWJjcnlwdG8uanMnO1xuY29uc3QgZGlnZXN0ID0gYXN5bmMgKGFsZ29yaXRobSwgZGF0YSkgPT4ge1xuICAgIGNvbnN0IHN1YnRsZURpZ2VzdCA9IGBTSEEtJHthbGdvcml0aG0uc2xpY2UoLTMpfWA7XG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KHN1YnRsZURpZ2VzdCwgZGF0YSkpO1xufTtcbmV4cG9ydCBkZWZhdWx0IGRpZ2VzdDtcbiIsImltcG9ydCB7IGVuY29kZXIsIGNvbmNhdCwgdWludDMyYmUsIGxlbmd0aEFuZElucHV0LCBjb25jYXRLZGYgfSBmcm9tICcuLi9saWIvYnVmZmVyX3V0aWxzLmpzJztcbmltcG9ydCBjcnlwdG8sIHsgaXNDcnlwdG9LZXkgfSBmcm9tICcuL3dlYmNyeXB0by5qcyc7XG5pbXBvcnQgeyBjaGVja0VuY0NyeXB0b0tleSB9IGZyb20gJy4uL2xpYi9jcnlwdG9fa2V5LmpzJztcbmltcG9ydCBpbnZhbGlkS2V5SW5wdXQgZnJvbSAnLi4vbGliL2ludmFsaWRfa2V5X2lucHV0LmpzJztcbmltcG9ydCB7IHR5cGVzIH0gZnJvbSAnLi9pc19rZXlfbGlrZS5qcyc7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVyaXZlS2V5KHB1YmxpY0tleSwgcHJpdmF0ZUtleSwgYWxnb3JpdGhtLCBrZXlMZW5ndGgsIGFwdSA9IG5ldyBVaW50OEFycmF5KDApLCBhcHYgPSBuZXcgVWludDhBcnJheSgwKSkge1xuICAgIGlmICghaXNDcnlwdG9LZXkocHVibGljS2V5KSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGludmFsaWRLZXlJbnB1dChwdWJsaWNLZXksIC4uLnR5cGVzKSk7XG4gICAgfVxuICAgIGNoZWNrRW5jQ3J5cHRvS2V5KHB1YmxpY0tleSwgJ0VDREgnKTtcbiAgICBpZiAoIWlzQ3J5cHRvS2V5KHByaXZhdGVLZXkpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoaW52YWxpZEtleUlucHV0KHByaXZhdGVLZXksIC4uLnR5cGVzKSk7XG4gICAgfVxuICAgIGNoZWNrRW5jQ3J5cHRvS2V5KHByaXZhdGVLZXksICdFQ0RIJywgJ2Rlcml2ZUJpdHMnKTtcbiAgICBjb25zdCB2YWx1ZSA9IGNvbmNhdChsZW5ndGhBbmRJbnB1dChlbmNvZGVyLmVuY29kZShhbGdvcml0aG0pKSwgbGVuZ3RoQW5kSW5wdXQoYXB1KSwgbGVuZ3RoQW5kSW5wdXQoYXB2KSwgdWludDMyYmUoa2V5TGVuZ3RoKSk7XG4gICAgbGV0IGxlbmd0aDtcbiAgICBpZiAocHVibGljS2V5LmFsZ29yaXRobS5uYW1lID09PSAnWDI1NTE5Jykge1xuICAgICAgICBsZW5ndGggPSAyNTY7XG4gICAgfVxuICAgIGVsc2UgaWYgKHB1YmxpY0tleS5hbGdvcml0aG0ubmFtZSA9PT0gJ1g0NDgnKSB7XG4gICAgICAgIGxlbmd0aCA9IDQ0ODtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxlbmd0aCA9XG4gICAgICAgICAgICBNYXRoLmNlaWwocGFyc2VJbnQocHVibGljS2V5LmFsZ29yaXRobS5uYW1lZEN1cnZlLnN1YnN0cigtMyksIDEwKSAvIDgpIDw8IDM7XG4gICAgfVxuICAgIGNvbnN0IHNoYXJlZFNlY3JldCA9IG5ldyBVaW50OEFycmF5KGF3YWl0IGNyeXB0by5zdWJ0bGUuZGVyaXZlQml0cyh7XG4gICAgICAgIG5hbWU6IHB1YmxpY0tleS5hbGdvcml0aG0ubmFtZSxcbiAgICAgICAgcHVibGljOiBwdWJsaWNLZXksXG4gICAgfSwgcHJpdmF0ZUtleSwgbGVuZ3RoKSk7XG4gICAgcmV0dXJuIGNvbmNhdEtkZihzaGFyZWRTZWNyZXQsIGtleUxlbmd0aCwgdmFsdWUpO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlRXBrKGtleSkge1xuICAgIGlmICghaXNDcnlwdG9LZXkoa2V5KSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGludmFsaWRLZXlJbnB1dChrZXksIC4uLnR5cGVzKSk7XG4gICAgfVxuICAgIHJldHVybiBjcnlwdG8uc3VidGxlLmdlbmVyYXRlS2V5KGtleS5hbGdvcml0aG0sIHRydWUsIFsnZGVyaXZlQml0cyddKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlY2RoQWxsb3dlZChrZXkpIHtcbiAgICBpZiAoIWlzQ3J5cHRvS2V5KGtleSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihpbnZhbGlkS2V5SW5wdXQoa2V5LCAuLi50eXBlcykpO1xuICAgIH1cbiAgICByZXR1cm4gKFsnUC0yNTYnLCAnUC0zODQnLCAnUC01MjEnXS5pbmNsdWRlcyhrZXkuYWxnb3JpdGhtLm5hbWVkQ3VydmUpIHx8XG4gICAgICAgIGtleS5hbGdvcml0aG0ubmFtZSA9PT0gJ1gyNTUxOScgfHxcbiAgICAgICAga2V5LmFsZ29yaXRobS5uYW1lID09PSAnWDQ0OCcpO1xufVxuIiwiaW1wb3J0IHsgY29uY2F0LCB1aW50NjRiZSB9IGZyb20gJy4uL2xpYi9idWZmZXJfdXRpbHMuanMnO1xuaW1wb3J0IGNoZWNrSXZMZW5ndGggZnJvbSAnLi4vbGliL2NoZWNrX2l2X2xlbmd0aC5qcyc7XG5pbXBvcnQgY2hlY2tDZWtMZW5ndGggZnJvbSAnLi9jaGVja19jZWtfbGVuZ3RoLmpzJztcbmltcG9ydCBjcnlwdG8sIHsgaXNDcnlwdG9LZXkgfSBmcm9tICcuL3dlYmNyeXB0by5qcyc7XG5pbXBvcnQgeyBjaGVja0VuY0NyeXB0b0tleSB9IGZyb20gJy4uL2xpYi9jcnlwdG9fa2V5LmpzJztcbmltcG9ydCBpbnZhbGlkS2V5SW5wdXQgZnJvbSAnLi4vbGliL2ludmFsaWRfa2V5X2lucHV0LmpzJztcbmltcG9ydCB7IEpPU0VOb3RTdXBwb3J0ZWQgfSBmcm9tICcuLi91dGlsL2Vycm9ycy5qcyc7XG5pbXBvcnQgeyB0eXBlcyB9IGZyb20gJy4vaXNfa2V5X2xpa2UuanMnO1xuYXN5bmMgZnVuY3Rpb24gY2JjRW5jcnlwdChlbmMsIHBsYWludGV4dCwgY2VrLCBpdiwgYWFkKSB7XG4gICAgaWYgKCEoY2VrIGluc3RhbmNlb2YgVWludDhBcnJheSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihpbnZhbGlkS2V5SW5wdXQoY2VrLCAnVWludDhBcnJheScpKTtcbiAgICB9XG4gICAgY29uc3Qga2V5U2l6ZSA9IHBhcnNlSW50KGVuYy5zbGljZSgxLCA0KSwgMTApO1xuICAgIGNvbnN0IGVuY0tleSA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCdyYXcnLCBjZWsuc3ViYXJyYXkoa2V5U2l6ZSA+PiAzKSwgJ0FFUy1DQkMnLCBmYWxzZSwgWydlbmNyeXB0J10pO1xuICAgIGNvbnN0IG1hY0tleSA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCdyYXcnLCBjZWsuc3ViYXJyYXkoMCwga2V5U2l6ZSA+PiAzKSwge1xuICAgICAgICBoYXNoOiBgU0hBLSR7a2V5U2l6ZSA8PCAxfWAsXG4gICAgICAgIG5hbWU6ICdITUFDJyxcbiAgICB9LCBmYWxzZSwgWydzaWduJ10pO1xuICAgIGNvbnN0IGNpcGhlcnRleHQgPSBuZXcgVWludDhBcnJheShhd2FpdCBjcnlwdG8uc3VidGxlLmVuY3J5cHQoe1xuICAgICAgICBpdixcbiAgICAgICAgbmFtZTogJ0FFUy1DQkMnLFxuICAgIH0sIGVuY0tleSwgcGxhaW50ZXh0KSk7XG4gICAgY29uc3QgbWFjRGF0YSA9IGNvbmNhdChhYWQsIGl2LCBjaXBoZXJ0ZXh0LCB1aW50NjRiZShhYWQubGVuZ3RoIDw8IDMpKTtcbiAgICBjb25zdCB0YWcgPSBuZXcgVWludDhBcnJheSgoYXdhaXQgY3J5cHRvLnN1YnRsZS5zaWduKCdITUFDJywgbWFjS2V5LCBtYWNEYXRhKSkuc2xpY2UoMCwga2V5U2l6ZSA+PiAzKSk7XG4gICAgcmV0dXJuIHsgY2lwaGVydGV4dCwgdGFnIH07XG59XG5hc3luYyBmdW5jdGlvbiBnY21FbmNyeXB0KGVuYywgcGxhaW50ZXh0LCBjZWssIGl2LCBhYWQpIHtcbiAgICBsZXQgZW5jS2V5O1xuICAgIGlmIChjZWsgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgIGVuY0tleSA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCdyYXcnLCBjZWssICdBRVMtR0NNJywgZmFsc2UsIFsnZW5jcnlwdCddKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNoZWNrRW5jQ3J5cHRvS2V5KGNlaywgZW5jLCAnZW5jcnlwdCcpO1xuICAgICAgICBlbmNLZXkgPSBjZWs7XG4gICAgfVxuICAgIGNvbnN0IGVuY3J5cHRlZCA9IG5ldyBVaW50OEFycmF5KGF3YWl0IGNyeXB0by5zdWJ0bGUuZW5jcnlwdCh7XG4gICAgICAgIGFkZGl0aW9uYWxEYXRhOiBhYWQsXG4gICAgICAgIGl2LFxuICAgICAgICBuYW1lOiAnQUVTLUdDTScsXG4gICAgICAgIHRhZ0xlbmd0aDogMTI4LFxuICAgIH0sIGVuY0tleSwgcGxhaW50ZXh0KSk7XG4gICAgY29uc3QgdGFnID0gZW5jcnlwdGVkLnNsaWNlKC0xNik7XG4gICAgY29uc3QgY2lwaGVydGV4dCA9IGVuY3J5cHRlZC5zbGljZSgwLCAtMTYpO1xuICAgIHJldHVybiB7IGNpcGhlcnRleHQsIHRhZyB9O1xufVxuY29uc3QgZW5jcnlwdCA9IGFzeW5jIChlbmMsIHBsYWludGV4dCwgY2VrLCBpdiwgYWFkKSA9PiB7XG4gICAgaWYgKCFpc0NyeXB0b0tleShjZWspICYmICEoY2VrIGluc3RhbmNlb2YgVWludDhBcnJheSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihpbnZhbGlkS2V5SW5wdXQoY2VrLCAuLi50eXBlcywgJ1VpbnQ4QXJyYXknKSk7XG4gICAgfVxuICAgIGNoZWNrSXZMZW5ndGgoZW5jLCBpdik7XG4gICAgc3dpdGNoIChlbmMpIHtcbiAgICAgICAgY2FzZSAnQTEyOENCQy1IUzI1Nic6XG4gICAgICAgIGNhc2UgJ0ExOTJDQkMtSFMzODQnOlxuICAgICAgICBjYXNlICdBMjU2Q0JDLUhTNTEyJzpcbiAgICAgICAgICAgIGlmIChjZWsgaW5zdGFuY2VvZiBVaW50OEFycmF5KVxuICAgICAgICAgICAgICAgIGNoZWNrQ2VrTGVuZ3RoKGNlaywgcGFyc2VJbnQoZW5jLnNsaWNlKC0zKSwgMTApKTtcbiAgICAgICAgICAgIHJldHVybiBjYmNFbmNyeXB0KGVuYywgcGxhaW50ZXh0LCBjZWssIGl2LCBhYWQpO1xuICAgICAgICBjYXNlICdBMTI4R0NNJzpcbiAgICAgICAgY2FzZSAnQTE5MkdDTSc6XG4gICAgICAgIGNhc2UgJ0EyNTZHQ00nOlxuICAgICAgICAgICAgaWYgKGNlayBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpXG4gICAgICAgICAgICAgICAgY2hlY2tDZWtMZW5ndGgoY2VrLCBwYXJzZUludChlbmMuc2xpY2UoMSwgNCksIDEwKSk7XG4gICAgICAgICAgICByZXR1cm4gZ2NtRW5jcnlwdChlbmMsIHBsYWludGV4dCwgY2VrLCBpdiwgYWFkKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBKT1NFTm90U3VwcG9ydGVkKCdVbnN1cHBvcnRlZCBKV0UgQ29udGVudCBFbmNyeXB0aW9uIEFsZ29yaXRobScpO1xuICAgIH1cbn07XG5leHBvcnQgZGVmYXVsdCBlbmNyeXB0O1xuIiwiZXhwb3J0IGZ1bmN0aW9uIGlzQ2xvdWRmbGFyZVdvcmtlcnMoKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgV2ViU29ja2V0UGFpciAhPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgPT09ICdDbG91ZGZsYXJlLVdvcmtlcnMnKSB8fFxuICAgICAgICAodHlwZW9mIEVkZ2VSdW50aW1lICE9PSAndW5kZWZpbmVkJyAmJiBFZGdlUnVudGltZSA9PT0gJ3ZlcmNlbCcpKTtcbn1cbiIsImltcG9ydCB7IEpPU0VFcnJvciwgSldLU1RpbWVvdXQgfSBmcm9tICcuLi91dGlsL2Vycm9ycy5qcyc7XG5jb25zdCBmZXRjaEp3a3MgPSBhc3luYyAodXJsLCB0aW1lb3V0LCBvcHRpb25zKSA9PiB7XG4gICAgbGV0IGNvbnRyb2xsZXI7XG4gICAgbGV0IGlkO1xuICAgIGxldCB0aW1lZE91dCA9IGZhbHNlO1xuICAgIGlmICh0eXBlb2YgQWJvcnRDb250cm9sbGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAgIGlkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aW1lZE91dCA9IHRydWU7XG4gICAgICAgICAgICBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgIH0sIHRpbWVvdXQpO1xuICAgIH1cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybC5ocmVmLCB7XG4gICAgICAgIHNpZ25hbDogY29udHJvbGxlciA/IGNvbnRyb2xsZXIuc2lnbmFsIDogdW5kZWZpbmVkLFxuICAgICAgICByZWRpcmVjdDogJ21hbnVhbCcsXG4gICAgICAgIGhlYWRlcnM6IG9wdGlvbnMuaGVhZGVycyxcbiAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGlmICh0aW1lZE91dClcbiAgICAgICAgICAgIHRocm93IG5ldyBKV0tTVGltZW91dCgpO1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgfSk7XG4gICAgaWYgKGlkICE9PSB1bmRlZmluZWQpXG4gICAgICAgIGNsZWFyVGltZW91dChpZCk7XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgIHRocm93IG5ldyBKT1NFRXJyb3IoJ0V4cGVjdGVkIDIwMCBPSyBmcm9tIHRoZSBKU09OIFdlYiBLZXkgU2V0IEhUVFAgcmVzcG9uc2UnKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgY2F0Y2ggKF9hKSB7XG4gICAgICAgIHRocm93IG5ldyBKT1NFRXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSB0aGUgSlNPTiBXZWIgS2V5IFNldCBIVFRQIHJlc3BvbnNlIGFzIEpTT04nKTtcbiAgICB9XG59O1xuZXhwb3J0IGRlZmF1bHQgZmV0Y2hKd2tzO1xuIiwiaW1wb3J0IHsgaXNDbG91ZGZsYXJlV29ya2VycyB9IGZyb20gJy4vZW52LmpzJztcbmltcG9ydCBjcnlwdG8gZnJvbSAnLi93ZWJjcnlwdG8uanMnO1xuaW1wb3J0IHsgSk9TRU5vdFN1cHBvcnRlZCB9IGZyb20gJy4uL3V0aWwvZXJyb3JzLmpzJztcbmltcG9ydCByYW5kb20gZnJvbSAnLi9yYW5kb20uanMnO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlU2VjcmV0KGFsZywgb3B0aW9ucykge1xuICAgIHZhciBfYTtcbiAgICBsZXQgbGVuZ3RoO1xuICAgIGxldCBhbGdvcml0aG07XG4gICAgbGV0IGtleVVzYWdlcztcbiAgICBzd2l0Y2ggKGFsZykge1xuICAgICAgICBjYXNlICdIUzI1Nic6XG4gICAgICAgIGNhc2UgJ0hTMzg0JzpcbiAgICAgICAgY2FzZSAnSFM1MTInOlxuICAgICAgICAgICAgbGVuZ3RoID0gcGFyc2VJbnQoYWxnLnNsaWNlKC0zKSwgMTApO1xuICAgICAgICAgICAgYWxnb3JpdGhtID0geyBuYW1lOiAnSE1BQycsIGhhc2g6IGBTSEEtJHtsZW5ndGh9YCwgbGVuZ3RoIH07XG4gICAgICAgICAgICBrZXlVc2FnZXMgPSBbJ3NpZ24nLCAndmVyaWZ5J107XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnQTEyOENCQy1IUzI1Nic6XG4gICAgICAgIGNhc2UgJ0ExOTJDQkMtSFMzODQnOlxuICAgICAgICBjYXNlICdBMjU2Q0JDLUhTNTEyJzpcbiAgICAgICAgICAgIGxlbmd0aCA9IHBhcnNlSW50KGFsZy5zbGljZSgtMyksIDEwKTtcbiAgICAgICAgICAgIHJldHVybiByYW5kb20obmV3IFVpbnQ4QXJyYXkobGVuZ3RoID4+IDMpKTtcbiAgICAgICAgY2FzZSAnQTEyOEtXJzpcbiAgICAgICAgY2FzZSAnQTE5MktXJzpcbiAgICAgICAgY2FzZSAnQTI1NktXJzpcbiAgICAgICAgICAgIGxlbmd0aCA9IHBhcnNlSW50KGFsZy5zbGljZSgxLCA0KSwgMTApO1xuICAgICAgICAgICAgYWxnb3JpdGhtID0geyBuYW1lOiAnQUVTLUtXJywgbGVuZ3RoIH07XG4gICAgICAgICAgICBrZXlVc2FnZXMgPSBbJ3dyYXBLZXknLCAndW53cmFwS2V5J107XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnQTEyOEdDTUtXJzpcbiAgICAgICAgY2FzZSAnQTE5MkdDTUtXJzpcbiAgICAgICAgY2FzZSAnQTI1NkdDTUtXJzpcbiAgICAgICAgY2FzZSAnQTEyOEdDTSc6XG4gICAgICAgIGNhc2UgJ0ExOTJHQ00nOlxuICAgICAgICBjYXNlICdBMjU2R0NNJzpcbiAgICAgICAgICAgIGxlbmd0aCA9IHBhcnNlSW50KGFsZy5zbGljZSgxLCA0KSwgMTApO1xuICAgICAgICAgICAgYWxnb3JpdGhtID0geyBuYW1lOiAnQUVTLUdDTScsIGxlbmd0aCB9O1xuICAgICAgICAgICAga2V5VXNhZ2VzID0gWydlbmNyeXB0JywgJ2RlY3J5cHQnXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEpPU0VOb3RTdXBwb3J0ZWQoJ0ludmFsaWQgb3IgdW5zdXBwb3J0ZWQgSldLIFwiYWxnXCIgKEFsZ29yaXRobSkgUGFyYW1ldGVyIHZhbHVlJyk7XG4gICAgfVxuICAgIHJldHVybiBjcnlwdG8uc3VidGxlLmdlbmVyYXRlS2V5KGFsZ29yaXRobSwgKF9hID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmV4dHJhY3RhYmxlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYWxzZSwga2V5VXNhZ2VzKTtcbn1cbmZ1bmN0aW9uIGdldE1vZHVsdXNMZW5ndGhPcHRpb24ob3B0aW9ucykge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBtb2R1bHVzTGVuZ3RoID0gKF9hID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLm1vZHVsdXNMZW5ndGgpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDIwNDg7XG4gICAgaWYgKHR5cGVvZiBtb2R1bHVzTGVuZ3RoICE9PSAnbnVtYmVyJyB8fCBtb2R1bHVzTGVuZ3RoIDwgMjA0OCkge1xuICAgICAgICB0aHJvdyBuZXcgSk9TRU5vdFN1cHBvcnRlZCgnSW52YWxpZCBvciB1bnN1cHBvcnRlZCBtb2R1bHVzTGVuZ3RoIG9wdGlvbiBwcm92aWRlZCwgMjA0OCBiaXRzIG9yIGxhcmdlciBrZXlzIG11c3QgYmUgdXNlZCcpO1xuICAgIH1cbiAgICByZXR1cm4gbW9kdWx1c0xlbmd0aDtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUtleVBhaXIoYWxnLCBvcHRpb25zKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgIGxldCBhbGdvcml0aG07XG4gICAgbGV0IGtleVVzYWdlcztcbiAgICBzd2l0Y2ggKGFsZykge1xuICAgICAgICBjYXNlICdQUzI1Nic6XG4gICAgICAgIGNhc2UgJ1BTMzg0JzpcbiAgICAgICAgY2FzZSAnUFM1MTInOlxuICAgICAgICAgICAgYWxnb3JpdGhtID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdSU0EtUFNTJyxcbiAgICAgICAgICAgICAgICBoYXNoOiBgU0hBLSR7YWxnLnNsaWNlKC0zKX1gLFxuICAgICAgICAgICAgICAgIHB1YmxpY0V4cG9uZW50OiBuZXcgVWludDhBcnJheShbMHgwMSwgMHgwMCwgMHgwMV0pLFxuICAgICAgICAgICAgICAgIG1vZHVsdXNMZW5ndGg6IGdldE1vZHVsdXNMZW5ndGhPcHRpb24ob3B0aW9ucyksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAga2V5VXNhZ2VzID0gWydzaWduJywgJ3ZlcmlmeSddO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1JTMjU2JzpcbiAgICAgICAgY2FzZSAnUlMzODQnOlxuICAgICAgICBjYXNlICdSUzUxMic6XG4gICAgICAgICAgICBhbGdvcml0aG0gPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ1JTQVNTQS1QS0NTMS12MV81JyxcbiAgICAgICAgICAgICAgICBoYXNoOiBgU0hBLSR7YWxnLnNsaWNlKC0zKX1gLFxuICAgICAgICAgICAgICAgIHB1YmxpY0V4cG9uZW50OiBuZXcgVWludDhBcnJheShbMHgwMSwgMHgwMCwgMHgwMV0pLFxuICAgICAgICAgICAgICAgIG1vZHVsdXNMZW5ndGg6IGdldE1vZHVsdXNMZW5ndGhPcHRpb24ob3B0aW9ucyksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAga2V5VXNhZ2VzID0gWydzaWduJywgJ3ZlcmlmeSddO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1JTQS1PQUVQJzpcbiAgICAgICAgY2FzZSAnUlNBLU9BRVAtMjU2JzpcbiAgICAgICAgY2FzZSAnUlNBLU9BRVAtMzg0JzpcbiAgICAgICAgY2FzZSAnUlNBLU9BRVAtNTEyJzpcbiAgICAgICAgICAgIGFsZ29yaXRobSA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnUlNBLU9BRVAnLFxuICAgICAgICAgICAgICAgIGhhc2g6IGBTSEEtJHtwYXJzZUludChhbGcuc2xpY2UoLTMpLCAxMCkgfHwgMX1gLFxuICAgICAgICAgICAgICAgIHB1YmxpY0V4cG9uZW50OiBuZXcgVWludDhBcnJheShbMHgwMSwgMHgwMCwgMHgwMV0pLFxuICAgICAgICAgICAgICAgIG1vZHVsdXNMZW5ndGg6IGdldE1vZHVsdXNMZW5ndGhPcHRpb24ob3B0aW9ucyksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAga2V5VXNhZ2VzID0gWydkZWNyeXB0JywgJ3Vud3JhcEtleScsICdlbmNyeXB0JywgJ3dyYXBLZXknXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdFUzI1Nic6XG4gICAgICAgICAgICBhbGdvcml0aG0gPSB7IG5hbWU6ICdFQ0RTQScsIG5hbWVkQ3VydmU6ICdQLTI1NicgfTtcbiAgICAgICAgICAgIGtleVVzYWdlcyA9IFsnc2lnbicsICd2ZXJpZnknXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdFUzM4NCc6XG4gICAgICAgICAgICBhbGdvcml0aG0gPSB7IG5hbWU6ICdFQ0RTQScsIG5hbWVkQ3VydmU6ICdQLTM4NCcgfTtcbiAgICAgICAgICAgIGtleVVzYWdlcyA9IFsnc2lnbicsICd2ZXJpZnknXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdFUzUxMic6XG4gICAgICAgICAgICBhbGdvcml0aG0gPSB7IG5hbWU6ICdFQ0RTQScsIG5hbWVkQ3VydmU6ICdQLTUyMScgfTtcbiAgICAgICAgICAgIGtleVVzYWdlcyA9IFsnc2lnbicsICd2ZXJpZnknXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdFZERTQSc6XG4gICAgICAgICAgICBrZXlVc2FnZXMgPSBbJ3NpZ24nLCAndmVyaWZ5J107XG4gICAgICAgICAgICBjb25zdCBjcnYgPSAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuY3J2KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnRWQyNTUxOSc7XG4gICAgICAgICAgICBzd2l0Y2ggKGNydikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ0VkMjU1MTknOlxuICAgICAgICAgICAgICAgIGNhc2UgJ0VkNDQ4JzpcbiAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtID0geyBuYW1lOiBjcnYgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpPU0VOb3RTdXBwb3J0ZWQoJ0ludmFsaWQgb3IgdW5zdXBwb3J0ZWQgY3J2IG9wdGlvbiBwcm92aWRlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0VDREgtRVMnOlxuICAgICAgICBjYXNlICdFQ0RILUVTK0ExMjhLVyc6XG4gICAgICAgIGNhc2UgJ0VDREgtRVMrQTE5MktXJzpcbiAgICAgICAgY2FzZSAnRUNESC1FUytBMjU2S1cnOiB7XG4gICAgICAgICAgICBrZXlVc2FnZXMgPSBbJ2Rlcml2ZUtleScsICdkZXJpdmVCaXRzJ107XG4gICAgICAgICAgICBjb25zdCBjcnYgPSAoX2IgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuY3J2KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAnUC0yNTYnO1xuICAgICAgICAgICAgc3dpdGNoIChjcnYpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdQLTI1Nic6XG4gICAgICAgICAgICAgICAgY2FzZSAnUC0zODQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ1AtNTIxJzoge1xuICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG0gPSB7IG5hbWU6ICdFQ0RIJywgbmFtZWRDdXJ2ZTogY3J2IH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdYMjU1MTknOlxuICAgICAgICAgICAgICAgIGNhc2UgJ1g0NDgnOlxuICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG0gPSB7IG5hbWU6IGNydiB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSk9TRU5vdFN1cHBvcnRlZCgnSW52YWxpZCBvciB1bnN1cHBvcnRlZCBjcnYgb3B0aW9uIHByb3ZpZGVkLCBzdXBwb3J0ZWQgdmFsdWVzIGFyZSBQLTI1NiwgUC0zODQsIFAtNTIxLCBYMjU1MTksIGFuZCBYNDQ4Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEpPU0VOb3RTdXBwb3J0ZWQoJ0ludmFsaWQgb3IgdW5zdXBwb3J0ZWQgSldLIFwiYWxnXCIgKEFsZ29yaXRobSkgUGFyYW1ldGVyIHZhbHVlJyk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiAoYXdhaXQgY3J5cHRvLnN1YnRsZS5nZW5lcmF0ZUtleShhbGdvcml0aG0sIChfYyA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5leHRyYWN0YWJsZSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogZmFsc2UsIGtleVVzYWdlcykpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGlmIChhbGdvcml0aG0ubmFtZSA9PT0gJ0VkMjU1MTknICYmXG4gICAgICAgICAgICAoZXJyID09PSBudWxsIHx8IGVyciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyLm5hbWUpID09PSAnTm90U3VwcG9ydGVkRXJyb3InICYmXG4gICAgICAgICAgICBpc0Nsb3VkZmxhcmVXb3JrZXJzKCkpIHtcbiAgICAgICAgICAgIGFsZ29yaXRobSA9IHsgbmFtZTogJ05PREUtRUQyNTUxOScsIG5hbWVkQ3VydmU6ICdOT0RFLUVEMjU1MTknIH07XG4gICAgICAgICAgICByZXR1cm4gKGF3YWl0IGNyeXB0by5zdWJ0bGUuZ2VuZXJhdGVLZXkoYWxnb3JpdGhtLCAoX2QgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZXh0cmFjdGFibGUpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IGZhbHNlLCBrZXlVc2FnZXMpKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlcnI7XG4gICAgfVxufVxuIiwiaW1wb3J0IGNyeXB0bywgeyBpc0NyeXB0b0tleSB9IGZyb20gJy4vd2ViY3J5cHRvLmpzJztcbmltcG9ydCB7IGNoZWNrU2lnQ3J5cHRvS2V5IH0gZnJvbSAnLi4vbGliL2NyeXB0b19rZXkuanMnO1xuaW1wb3J0IGludmFsaWRLZXlJbnB1dCBmcm9tICcuLi9saWIvaW52YWxpZF9rZXlfaW5wdXQuanMnO1xuaW1wb3J0IHsgdHlwZXMgfSBmcm9tICcuL2lzX2tleV9saWtlLmpzJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldENyeXB0b0tleShhbGcsIGtleSwgdXNhZ2UpIHtcbiAgICBpZiAoaXNDcnlwdG9LZXkoa2V5KSkge1xuICAgICAgICBjaGVja1NpZ0NyeXB0b0tleShrZXksIGFsZywgdXNhZ2UpO1xuICAgICAgICByZXR1cm4ga2V5O1xuICAgIH1cbiAgICBpZiAoa2V5IGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICBpZiAoIWFsZy5zdGFydHNXaXRoKCdIUycpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGludmFsaWRLZXlJbnB1dChrZXksIC4uLnR5cGVzKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCdyYXcnLCBrZXksIHsgaGFzaDogYFNIQS0ke2FsZy5zbGljZSgtMyl9YCwgbmFtZTogJ0hNQUMnIH0sIGZhbHNlLCBbdXNhZ2VdKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihpbnZhbGlkS2V5SW5wdXQoa2V5LCAuLi50eXBlcywgJ1VpbnQ4QXJyYXknKSk7XG59XG4iLCJpbXBvcnQgeyBpc0NyeXB0b0tleSB9IGZyb20gJy4vd2ViY3J5cHRvLmpzJztcbmV4cG9ydCBkZWZhdWx0IChrZXkpID0+IHtcbiAgICByZXR1cm4gaXNDcnlwdG9LZXkoa2V5KTtcbn07XG5leHBvcnQgY29uc3QgdHlwZXMgPSBbJ0NyeXB0b0tleSddO1xuIiwiaW1wb3J0IHsgaXNDbG91ZGZsYXJlV29ya2VycyB9IGZyb20gJy4vZW52LmpzJztcbmltcG9ydCBjcnlwdG8gZnJvbSAnLi93ZWJjcnlwdG8uanMnO1xuaW1wb3J0IHsgSk9TRU5vdFN1cHBvcnRlZCB9IGZyb20gJy4uL3V0aWwvZXJyb3JzLmpzJztcbmltcG9ydCB7IGRlY29kZSBhcyBiYXNlNjR1cmwgfSBmcm9tICcuL2Jhc2U2NHVybC5qcyc7XG5mdW5jdGlvbiBzdWJ0bGVNYXBwaW5nKGp3aykge1xuICAgIGxldCBhbGdvcml0aG07XG4gICAgbGV0IGtleVVzYWdlcztcbiAgICBzd2l0Y2ggKGp3ay5rdHkpIHtcbiAgICAgICAgY2FzZSAnb2N0Jzoge1xuICAgICAgICAgICAgc3dpdGNoIChqd2suYWxnKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnSFMyNTYnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ0hTMzg0JzpcbiAgICAgICAgICAgICAgICBjYXNlICdIUzUxMic6XG4gICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobSA9IHsgbmFtZTogJ0hNQUMnLCBoYXNoOiBgU0hBLSR7andrLmFsZy5zbGljZSgtMyl9YCB9O1xuICAgICAgICAgICAgICAgICAgICBrZXlVc2FnZXMgPSBbJ3NpZ24nLCAndmVyaWZ5J107XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0ExMjhDQkMtSFMyNTYnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ0ExOTJDQkMtSFMzODQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ0EyNTZDQkMtSFM1MTInOlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSk9TRU5vdFN1cHBvcnRlZChgJHtqd2suYWxnfSBrZXlzIGNhbm5vdCBiZSBpbXBvcnRlZCBhcyBDcnlwdG9LZXkgaW5zdGFuY2VzYCk7XG4gICAgICAgICAgICAgICAgY2FzZSAnQTEyOEdDTSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnQTE5MkdDTSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnQTI1NkdDTSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnQTEyOEdDTUtXJzpcbiAgICAgICAgICAgICAgICBjYXNlICdBMTkyR0NNS1cnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ0EyNTZHQ01LVyc6XG4gICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobSA9IHsgbmFtZTogJ0FFUy1HQ00nIH07XG4gICAgICAgICAgICAgICAgICAgIGtleVVzYWdlcyA9IFsnZW5jcnlwdCcsICdkZWNyeXB0J107XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0ExMjhLVyc6XG4gICAgICAgICAgICAgICAgY2FzZSAnQTE5MktXJzpcbiAgICAgICAgICAgICAgICBjYXNlICdBMjU2S1cnOlxuICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG0gPSB7IG5hbWU6ICdBRVMtS1cnIH07XG4gICAgICAgICAgICAgICAgICAgIGtleVVzYWdlcyA9IFsnd3JhcEtleScsICd1bndyYXBLZXknXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnUEJFUzItSFMyNTYrQTEyOEtXJzpcbiAgICAgICAgICAgICAgICBjYXNlICdQQkVTMi1IUzM4NCtBMTkyS1cnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ1BCRVMyLUhTNTEyK0EyNTZLVyc6XG4gICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobSA9IHsgbmFtZTogJ1BCS0RGMicgfTtcbiAgICAgICAgICAgICAgICAgICAga2V5VXNhZ2VzID0gWydkZXJpdmVCaXRzJ107XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBKT1NFTm90U3VwcG9ydGVkKCdJbnZhbGlkIG9yIHVuc3VwcG9ydGVkIEpXSyBcImFsZ1wiIChBbGdvcml0aG0pIFBhcmFtZXRlciB2YWx1ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnUlNBJzoge1xuICAgICAgICAgICAgc3dpdGNoIChqd2suYWxnKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnUFMyNTYnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ1BTMzg0JzpcbiAgICAgICAgICAgICAgICBjYXNlICdQUzUxMic6XG4gICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobSA9IHsgbmFtZTogJ1JTQS1QU1MnLCBoYXNoOiBgU0hBLSR7andrLmFsZy5zbGljZSgtMyl9YCB9O1xuICAgICAgICAgICAgICAgICAgICBrZXlVc2FnZXMgPSBqd2suZCA/IFsnc2lnbiddIDogWyd2ZXJpZnknXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnUlMyNTYnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ1JTMzg0JzpcbiAgICAgICAgICAgICAgICBjYXNlICdSUzUxMic6XG4gICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobSA9IHsgbmFtZTogJ1JTQVNTQS1QS0NTMS12MV81JywgaGFzaDogYFNIQS0ke2p3ay5hbGcuc2xpY2UoLTMpfWAgfTtcbiAgICAgICAgICAgICAgICAgICAga2V5VXNhZ2VzID0gandrLmQgPyBbJ3NpZ24nXSA6IFsndmVyaWZ5J107XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ1JTQS1PQUVQJzpcbiAgICAgICAgICAgICAgICBjYXNlICdSU0EtT0FFUC0yNTYnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ1JTQS1PQUVQLTM4NCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnUlNBLU9BRVAtNTEyJzpcbiAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ1JTQS1PQUVQJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc2g6IGBTSEEtJHtwYXJzZUludChqd2suYWxnLnNsaWNlKC0zKSwgMTApIHx8IDF9YCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAga2V5VXNhZ2VzID0gandrLmQgPyBbJ2RlY3J5cHQnLCAndW53cmFwS2V5J10gOiBbJ2VuY3J5cHQnLCAnd3JhcEtleSddO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSk9TRU5vdFN1cHBvcnRlZCgnSW52YWxpZCBvciB1bnN1cHBvcnRlZCBKV0sgXCJhbGdcIiAoQWxnb3JpdGhtKSBQYXJhbWV0ZXIgdmFsdWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ0VDJzoge1xuICAgICAgICAgICAgc3dpdGNoIChqd2suYWxnKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnRVMyNTYnOlxuICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG0gPSB7IG5hbWU6ICdFQ0RTQScsIG5hbWVkQ3VydmU6ICdQLTI1NicgfTtcbiAgICAgICAgICAgICAgICAgICAga2V5VXNhZ2VzID0gandrLmQgPyBbJ3NpZ24nXSA6IFsndmVyaWZ5J107XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0VTMzg0JzpcbiAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtID0geyBuYW1lOiAnRUNEU0EnLCBuYW1lZEN1cnZlOiAnUC0zODQnIH07XG4gICAgICAgICAgICAgICAgICAgIGtleVVzYWdlcyA9IGp3ay5kID8gWydzaWduJ10gOiBbJ3ZlcmlmeSddO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdFUzUxMic6XG4gICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobSA9IHsgbmFtZTogJ0VDRFNBJywgbmFtZWRDdXJ2ZTogJ1AtNTIxJyB9O1xuICAgICAgICAgICAgICAgICAgICBrZXlVc2FnZXMgPSBqd2suZCA/IFsnc2lnbiddIDogWyd2ZXJpZnknXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnRUNESC1FUyc6XG4gICAgICAgICAgICAgICAgY2FzZSAnRUNESC1FUytBMTI4S1cnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ0VDREgtRVMrQTE5MktXJzpcbiAgICAgICAgICAgICAgICBjYXNlICdFQ0RILUVTK0EyNTZLVyc6XG4gICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobSA9IHsgbmFtZTogJ0VDREgnLCBuYW1lZEN1cnZlOiBqd2suY3J2IH07XG4gICAgICAgICAgICAgICAgICAgIGtleVVzYWdlcyA9IGp3ay5kID8gWydkZXJpdmVCaXRzJ10gOiBbXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpPU0VOb3RTdXBwb3J0ZWQoJ0ludmFsaWQgb3IgdW5zdXBwb3J0ZWQgSldLIFwiYWxnXCIgKEFsZ29yaXRobSkgUGFyYW1ldGVyIHZhbHVlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdPS1AnOiB7XG4gICAgICAgICAgICBzd2l0Y2ggKGp3ay5hbGcpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdFZERTQSc6XG4gICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobSA9IHsgbmFtZTogandrLmNydiB9O1xuICAgICAgICAgICAgICAgICAgICBrZXlVc2FnZXMgPSBqd2suZCA/IFsnc2lnbiddIDogWyd2ZXJpZnknXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnRUNESC1FUyc6XG4gICAgICAgICAgICAgICAgY2FzZSAnRUNESC1FUytBMTI4S1cnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ0VDREgtRVMrQTE5MktXJzpcbiAgICAgICAgICAgICAgICBjYXNlICdFQ0RILUVTK0EyNTZLVyc6XG4gICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobSA9IHsgbmFtZTogandrLmNydiB9O1xuICAgICAgICAgICAgICAgICAgICBrZXlVc2FnZXMgPSBqd2suZCA/IFsnZGVyaXZlQml0cyddIDogW107XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBKT1NFTm90U3VwcG9ydGVkKCdJbnZhbGlkIG9yIHVuc3VwcG9ydGVkIEpXSyBcImFsZ1wiIChBbGdvcml0aG0pIFBhcmFtZXRlciB2YWx1ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBKT1NFTm90U3VwcG9ydGVkKCdJbnZhbGlkIG9yIHVuc3VwcG9ydGVkIEpXSyBcImt0eVwiIChLZXkgVHlwZSkgUGFyYW1ldGVyIHZhbHVlJyk7XG4gICAgfVxuICAgIHJldHVybiB7IGFsZ29yaXRobSwga2V5VXNhZ2VzIH07XG59XG5jb25zdCBwYXJzZSA9IGFzeW5jIChqd2spID0+IHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGlmICghandrLmFsZykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImFsZ1wiIGFyZ3VtZW50IGlzIHJlcXVpcmVkIHdoZW4gXCJqd2suYWxnXCIgaXMgbm90IHByZXNlbnQnKTtcbiAgICB9XG4gICAgY29uc3QgeyBhbGdvcml0aG0sIGtleVVzYWdlcyB9ID0gc3VidGxlTWFwcGluZyhqd2spO1xuICAgIGNvbnN0IHJlc3QgPSBbXG4gICAgICAgIGFsZ29yaXRobSxcbiAgICAgICAgKF9hID0gandrLmV4dCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2UsXG4gICAgICAgIChfYiA9IGp3ay5rZXlfb3BzKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBrZXlVc2FnZXMsXG4gICAgXTtcbiAgICBpZiAoYWxnb3JpdGhtLm5hbWUgPT09ICdQQktERjInKSB7XG4gICAgICAgIHJldHVybiBjcnlwdG8uc3VidGxlLmltcG9ydEtleSgncmF3JywgYmFzZTY0dXJsKGp3ay5rKSwgLi4ucmVzdCk7XG4gICAgfVxuICAgIGNvbnN0IGtleURhdGEgPSB7IC4uLmp3ayB9O1xuICAgIGRlbGV0ZSBrZXlEYXRhLmFsZztcbiAgICBkZWxldGUga2V5RGF0YS51c2U7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCdqd2snLCBrZXlEYXRhLCAuLi5yZXN0KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBpZiAoYWxnb3JpdGhtLm5hbWUgPT09ICdFZDI1NTE5JyAmJlxuICAgICAgICAgICAgKGVyciA9PT0gbnVsbCB8fCBlcnIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVyci5uYW1lKSA9PT0gJ05vdFN1cHBvcnRlZEVycm9yJyAmJlxuICAgICAgICAgICAgaXNDbG91ZGZsYXJlV29ya2VycygpKSB7XG4gICAgICAgICAgICByZXN0WzBdID0geyBuYW1lOiAnTk9ERS1FRDI1NTE5JywgbmFtZWRDdXJ2ZTogJ05PREUtRUQyNTUxOScgfTtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBjcnlwdG8uc3VidGxlLmltcG9ydEtleSgnandrJywga2V5RGF0YSwgLi4ucmVzdCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbn07XG5leHBvcnQgZGVmYXVsdCBwYXJzZTtcbiIsImltcG9ydCBjcnlwdG8sIHsgaXNDcnlwdG9LZXkgfSBmcm9tICcuL3dlYmNyeXB0by5qcyc7XG5pbXBvcnQgaW52YWxpZEtleUlucHV0IGZyb20gJy4uL2xpYi9pbnZhbGlkX2tleV9pbnB1dC5qcyc7XG5pbXBvcnQgeyBlbmNvZGUgYXMgYmFzZTY0dXJsIH0gZnJvbSAnLi9iYXNlNjR1cmwuanMnO1xuaW1wb3J0IHsgdHlwZXMgfSBmcm9tICcuL2lzX2tleV9saWtlLmpzJztcbmNvbnN0IGtleVRvSldLID0gYXN5bmMgKGtleSkgPT4ge1xuICAgIGlmIChrZXkgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBrdHk6ICdvY3QnLFxuICAgICAgICAgICAgazogYmFzZTY0dXJsKGtleSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICghaXNDcnlwdG9LZXkoa2V5KSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGludmFsaWRLZXlJbnB1dChrZXksIC4uLnR5cGVzLCAnVWludDhBcnJheScpKTtcbiAgICB9XG4gICAgaWYgKCFrZXkuZXh0cmFjdGFibGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignbm9uLWV4dHJhY3RhYmxlIENyeXB0b0tleSBjYW5ub3QgYmUgZXhwb3J0ZWQgYXMgYSBKV0snKTtcbiAgICB9XG4gICAgY29uc3QgeyBleHQsIGtleV9vcHMsIGFsZywgdXNlLCAuLi5qd2sgfSA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZXhwb3J0S2V5KCdqd2snLCBrZXkpO1xuICAgIHJldHVybiBqd2s7XG59O1xuZXhwb3J0IGRlZmF1bHQga2V5VG9KV0s7XG4iLCJpbXBvcnQgcmFuZG9tIGZyb20gJy4vcmFuZG9tLmpzJztcbmltcG9ydCB7IHAycyBhcyBjb25jYXRTYWx0IH0gZnJvbSAnLi4vbGliL2J1ZmZlcl91dGlscy5qcyc7XG5pbXBvcnQgeyBlbmNvZGUgYXMgYmFzZTY0dXJsIH0gZnJvbSAnLi9iYXNlNjR1cmwuanMnO1xuaW1wb3J0IHsgd3JhcCwgdW53cmFwIH0gZnJvbSAnLi9hZXNrdy5qcyc7XG5pbXBvcnQgY2hlY2tQMnMgZnJvbSAnLi4vbGliL2NoZWNrX3Aycy5qcyc7XG5pbXBvcnQgY3J5cHRvLCB7IGlzQ3J5cHRvS2V5IH0gZnJvbSAnLi93ZWJjcnlwdG8uanMnO1xuaW1wb3J0IHsgY2hlY2tFbmNDcnlwdG9LZXkgfSBmcm9tICcuLi9saWIvY3J5cHRvX2tleS5qcyc7XG5pbXBvcnQgaW52YWxpZEtleUlucHV0IGZyb20gJy4uL2xpYi9pbnZhbGlkX2tleV9pbnB1dC5qcyc7XG5pbXBvcnQgeyB0eXBlcyB9IGZyb20gJy4vaXNfa2V5X2xpa2UuanMnO1xuZnVuY3Rpb24gZ2V0Q3J5cHRvS2V5KGtleSwgYWxnKSB7XG4gICAgaWYgKGtleSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIGNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCdyYXcnLCBrZXksICdQQktERjInLCBmYWxzZSwgWydkZXJpdmVCaXRzJ10pO1xuICAgIH1cbiAgICBpZiAoaXNDcnlwdG9LZXkoa2V5KSkge1xuICAgICAgICBjaGVja0VuY0NyeXB0b0tleShrZXksIGFsZywgJ2Rlcml2ZUJpdHMnLCAnZGVyaXZlS2V5Jyk7XG4gICAgICAgIHJldHVybiBrZXk7XG4gICAgfVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoaW52YWxpZEtleUlucHV0KGtleSwgLi4udHlwZXMsICdVaW50OEFycmF5JykpO1xufVxuYXN5bmMgZnVuY3Rpb24gZGVyaXZlS2V5KHAycywgYWxnLCBwMmMsIGtleSkge1xuICAgIGNoZWNrUDJzKHAycyk7XG4gICAgY29uc3Qgc2FsdCA9IGNvbmNhdFNhbHQoYWxnLCBwMnMpO1xuICAgIGNvbnN0IGtleWxlbiA9IHBhcnNlSW50KGFsZy5zbGljZSgxMywgMTYpLCAxMCk7XG4gICAgY29uc3Qgc3VidGxlQWxnID0ge1xuICAgICAgICBoYXNoOiBgU0hBLSR7YWxnLnNsaWNlKDgsIDExKX1gLFxuICAgICAgICBpdGVyYXRpb25zOiBwMmMsXG4gICAgICAgIG5hbWU6ICdQQktERjInLFxuICAgICAgICBzYWx0LFxuICAgIH07XG4gICAgY29uc3Qgd3JhcEFsZyA9IHtcbiAgICAgICAgbGVuZ3RoOiBrZXlsZW4sXG4gICAgICAgIG5hbWU6ICdBRVMtS1cnLFxuICAgIH07XG4gICAgY29uc3QgY3J5cHRvS2V5ID0gYXdhaXQgZ2V0Q3J5cHRvS2V5KGtleSwgYWxnKTtcbiAgICBpZiAoY3J5cHRvS2V5LnVzYWdlcy5pbmNsdWRlcygnZGVyaXZlQml0cycpKSB7XG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShhd2FpdCBjcnlwdG8uc3VidGxlLmRlcml2ZUJpdHMoc3VidGxlQWxnLCBjcnlwdG9LZXksIGtleWxlbikpO1xuICAgIH1cbiAgICBpZiAoY3J5cHRvS2V5LnVzYWdlcy5pbmNsdWRlcygnZGVyaXZlS2V5JykpIHtcbiAgICAgICAgcmV0dXJuIGNyeXB0by5zdWJ0bGUuZGVyaXZlS2V5KHN1YnRsZUFsZywgY3J5cHRvS2V5LCB3cmFwQWxnLCBmYWxzZSwgWyd3cmFwS2V5JywgJ3Vud3JhcEtleSddKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUEJLREYyIGtleSBcInVzYWdlc1wiIG11c3QgaW5jbHVkZSBcImRlcml2ZUJpdHNcIiBvciBcImRlcml2ZUtleVwiJyk7XG59XG5leHBvcnQgY29uc3QgZW5jcnlwdCA9IGFzeW5jIChhbGcsIGtleSwgY2VrLCBwMmMgPSAyMDQ4LCBwMnMgPSByYW5kb20obmV3IFVpbnQ4QXJyYXkoMTYpKSkgPT4ge1xuICAgIGNvbnN0IGRlcml2ZWQgPSBhd2FpdCBkZXJpdmVLZXkocDJzLCBhbGcsIHAyYywga2V5KTtcbiAgICBjb25zdCBlbmNyeXB0ZWRLZXkgPSBhd2FpdCB3cmFwKGFsZy5zbGljZSgtNiksIGRlcml2ZWQsIGNlayk7XG4gICAgcmV0dXJuIHsgZW5jcnlwdGVkS2V5LCBwMmMsIHAyczogYmFzZTY0dXJsKHAycykgfTtcbn07XG5leHBvcnQgY29uc3QgZGVjcnlwdCA9IGFzeW5jIChhbGcsIGtleSwgZW5jcnlwdGVkS2V5LCBwMmMsIHAycykgPT4ge1xuICAgIGNvbnN0IGRlcml2ZWQgPSBhd2FpdCBkZXJpdmVLZXkocDJzLCBhbGcsIHAyYywga2V5KTtcbiAgICByZXR1cm4gdW53cmFwKGFsZy5zbGljZSgtNiksIGRlcml2ZWQsIGVuY3J5cHRlZEtleSk7XG59O1xuIiwiaW1wb3J0IGNyeXB0byBmcm9tICcuL3dlYmNyeXB0by5qcyc7XG5leHBvcnQgZGVmYXVsdCBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKTtcbiIsImltcG9ydCBzdWJ0bGVBbGdvcml0aG0gZnJvbSAnLi9zdWJ0bGVfcnNhZXMuanMnO1xuaW1wb3J0IGJvZ3VzV2ViQ3J5cHRvIGZyb20gJy4vYm9ndXMuanMnO1xuaW1wb3J0IGNyeXB0bywgeyBpc0NyeXB0b0tleSB9IGZyb20gJy4vd2ViY3J5cHRvLmpzJztcbmltcG9ydCB7IGNoZWNrRW5jQ3J5cHRvS2V5IH0gZnJvbSAnLi4vbGliL2NyeXB0b19rZXkuanMnO1xuaW1wb3J0IGNoZWNrS2V5TGVuZ3RoIGZyb20gJy4vY2hlY2tfa2V5X2xlbmd0aC5qcyc7XG5pbXBvcnQgaW52YWxpZEtleUlucHV0IGZyb20gJy4uL2xpYi9pbnZhbGlkX2tleV9pbnB1dC5qcyc7XG5pbXBvcnQgeyB0eXBlcyB9IGZyb20gJy4vaXNfa2V5X2xpa2UuanMnO1xuZXhwb3J0IGNvbnN0IGVuY3J5cHQgPSBhc3luYyAoYWxnLCBrZXksIGNlaykgPT4ge1xuICAgIGlmICghaXNDcnlwdG9LZXkoa2V5KSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGludmFsaWRLZXlJbnB1dChrZXksIC4uLnR5cGVzKSk7XG4gICAgfVxuICAgIGNoZWNrRW5jQ3J5cHRvS2V5KGtleSwgYWxnLCAnZW5jcnlwdCcsICd3cmFwS2V5Jyk7XG4gICAgY2hlY2tLZXlMZW5ndGgoYWxnLCBrZXkpO1xuICAgIGlmIChrZXkudXNhZ2VzLmluY2x1ZGVzKCdlbmNyeXB0JykpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGF3YWl0IGNyeXB0by5zdWJ0bGUuZW5jcnlwdChzdWJ0bGVBbGdvcml0aG0oYWxnKSwga2V5LCBjZWspKTtcbiAgICB9XG4gICAgaWYgKGtleS51c2FnZXMuaW5jbHVkZXMoJ3dyYXBLZXknKSkge1xuICAgICAgICBjb25zdCBjcnlwdG9LZXlDZWsgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmltcG9ydEtleSgncmF3JywgY2VrLCAuLi5ib2d1c1dlYkNyeXB0byk7XG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShhd2FpdCBjcnlwdG8uc3VidGxlLndyYXBLZXkoJ3JhdycsIGNyeXB0b0tleUNlaywga2V5LCBzdWJ0bGVBbGdvcml0aG0oYWxnKSkpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdSU0EtT0FFUCBrZXkgXCJ1c2FnZXNcIiBtdXN0IGluY2x1ZGUgXCJlbmNyeXB0XCIgb3IgXCJ3cmFwS2V5XCIgZm9yIHRoaXMgb3BlcmF0aW9uJyk7XG59O1xuZXhwb3J0IGNvbnN0IGRlY3J5cHQgPSBhc3luYyAoYWxnLCBrZXksIGVuY3J5cHRlZEtleSkgPT4ge1xuICAgIGlmICghaXNDcnlwdG9LZXkoa2V5KSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGludmFsaWRLZXlJbnB1dChrZXksIC4uLnR5cGVzKSk7XG4gICAgfVxuICAgIGNoZWNrRW5jQ3J5cHRvS2V5KGtleSwgYWxnLCAnZGVjcnlwdCcsICd1bndyYXBLZXknKTtcbiAgICBjaGVja0tleUxlbmd0aChhbGcsIGtleSk7XG4gICAgaWYgKGtleS51c2FnZXMuaW5jbHVkZXMoJ2RlY3J5cHQnKSkge1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYXdhaXQgY3J5cHRvLnN1YnRsZS5kZWNyeXB0KHN1YnRsZUFsZ29yaXRobShhbGcpLCBrZXksIGVuY3J5cHRlZEtleSkpO1xuICAgIH1cbiAgICBpZiAoa2V5LnVzYWdlcy5pbmNsdWRlcygndW53cmFwS2V5JykpIHtcbiAgICAgICAgY29uc3QgY3J5cHRvS2V5Q2VrID0gYXdhaXQgY3J5cHRvLnN1YnRsZS51bndyYXBLZXkoJ3JhdycsIGVuY3J5cHRlZEtleSwga2V5LCBzdWJ0bGVBbGdvcml0aG0oYWxnKSwgLi4uYm9ndXNXZWJDcnlwdG8pO1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYXdhaXQgY3J5cHRvLnN1YnRsZS5leHBvcnRLZXkoJ3JhdycsIGNyeXB0b0tleUNlaykpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdSU0EtT0FFUCBrZXkgXCJ1c2FnZXNcIiBtdXN0IGluY2x1ZGUgXCJkZWNyeXB0XCIgb3IgXCJ1bndyYXBLZXlcIiBmb3IgdGhpcyBvcGVyYXRpb24nKTtcbn07XG4iLCJpbXBvcnQgc3VidGxlQWxnb3JpdGhtIGZyb20gJy4vc3VidGxlX2RzYS5qcyc7XG5pbXBvcnQgY3J5cHRvIGZyb20gJy4vd2ViY3J5cHRvLmpzJztcbmltcG9ydCBjaGVja0tleUxlbmd0aCBmcm9tICcuL2NoZWNrX2tleV9sZW5ndGguanMnO1xuaW1wb3J0IGdldFNpZ25LZXkgZnJvbSAnLi9nZXRfc2lnbl92ZXJpZnlfa2V5LmpzJztcbmNvbnN0IHNpZ24gPSBhc3luYyAoYWxnLCBrZXksIGRhdGEpID0+IHtcbiAgICBjb25zdCBjcnlwdG9LZXkgPSBhd2FpdCBnZXRTaWduS2V5KGFsZywga2V5LCAnc2lnbicpO1xuICAgIGNoZWNrS2V5TGVuZ3RoKGFsZywgY3J5cHRvS2V5KTtcbiAgICBjb25zdCBzaWduYXR1cmUgPSBhd2FpdCBjcnlwdG8uc3VidGxlLnNpZ24oc3VidGxlQWxnb3JpdGhtKGFsZywgY3J5cHRvS2V5LmFsZ29yaXRobSksIGNyeXB0b0tleSwgZGF0YSk7XG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KHNpZ25hdHVyZSk7XG59O1xuZXhwb3J0IGRlZmF1bHQgc2lnbjtcbiIsImltcG9ydCB7IGlzQ2xvdWRmbGFyZVdvcmtlcnMgfSBmcm9tICcuL2Vudi5qcyc7XG5pbXBvcnQgeyBKT1NFTm90U3VwcG9ydGVkIH0gZnJvbSAnLi4vdXRpbC9lcnJvcnMuanMnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3VidGxlRHNhKGFsZywgYWxnb3JpdGhtKSB7XG4gICAgY29uc3QgaGFzaCA9IGBTSEEtJHthbGcuc2xpY2UoLTMpfWA7XG4gICAgc3dpdGNoIChhbGcpIHtcbiAgICAgICAgY2FzZSAnSFMyNTYnOlxuICAgICAgICBjYXNlICdIUzM4NCc6XG4gICAgICAgIGNhc2UgJ0hTNTEyJzpcbiAgICAgICAgICAgIHJldHVybiB7IGhhc2gsIG5hbWU6ICdITUFDJyB9O1xuICAgICAgICBjYXNlICdQUzI1Nic6XG4gICAgICAgIGNhc2UgJ1BTMzg0JzpcbiAgICAgICAgY2FzZSAnUFM1MTInOlxuICAgICAgICAgICAgcmV0dXJuIHsgaGFzaCwgbmFtZTogJ1JTQS1QU1MnLCBzYWx0TGVuZ3RoOiBhbGcuc2xpY2UoLTMpID4+IDMgfTtcbiAgICAgICAgY2FzZSAnUlMyNTYnOlxuICAgICAgICBjYXNlICdSUzM4NCc6XG4gICAgICAgIGNhc2UgJ1JTNTEyJzpcbiAgICAgICAgICAgIHJldHVybiB7IGhhc2gsIG5hbWU6ICdSU0FTU0EtUEtDUzEtdjFfNScgfTtcbiAgICAgICAgY2FzZSAnRVMyNTYnOlxuICAgICAgICBjYXNlICdFUzM4NCc6XG4gICAgICAgIGNhc2UgJ0VTNTEyJzpcbiAgICAgICAgICAgIHJldHVybiB7IGhhc2gsIG5hbWU6ICdFQ0RTQScsIG5hbWVkQ3VydmU6IGFsZ29yaXRobS5uYW1lZEN1cnZlIH07XG4gICAgICAgIGNhc2UgJ0VkRFNBJzpcbiAgICAgICAgICAgIGlmIChpc0Nsb3VkZmxhcmVXb3JrZXJzKCkgJiYgYWxnb3JpdGhtLm5hbWUgPT09ICdOT0RFLUVEMjU1MTknKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgbmFtZTogJ05PREUtRUQyNTUxOScsIG5hbWVkQ3VydmU6ICdOT0RFLUVEMjU1MTknIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBuYW1lOiBhbGdvcml0aG0ubmFtZSB9O1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEpPU0VOb3RTdXBwb3J0ZWQoYGFsZyAke2FsZ30gaXMgbm90IHN1cHBvcnRlZCBlaXRoZXIgYnkgSk9TRSBvciB5b3VyIGphdmFzY3JpcHQgcnVudGltZWApO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEpPU0VOb3RTdXBwb3J0ZWQgfSBmcm9tICcuLi91dGlsL2Vycm9ycy5qcyc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzdWJ0bGVSc2FFcyhhbGcpIHtcbiAgICBzd2l0Y2ggKGFsZykge1xuICAgICAgICBjYXNlICdSU0EtT0FFUCc6XG4gICAgICAgIGNhc2UgJ1JTQS1PQUVQLTI1Nic6XG4gICAgICAgIGNhc2UgJ1JTQS1PQUVQLTM4NCc6XG4gICAgICAgIGNhc2UgJ1JTQS1PQUVQLTUxMic6XG4gICAgICAgICAgICByZXR1cm4gJ1JTQS1PQUVQJztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBKT1NFTm90U3VwcG9ydGVkKGBhbGcgJHthbGd9IGlzIG5vdCBzdXBwb3J0ZWQgZWl0aGVyIGJ5IEpPU0Ugb3IgeW91ciBqYXZhc2NyaXB0IHJ1bnRpbWVgKTtcbiAgICB9XG59XG4iLCJjb25zdCB0aW1pbmdTYWZlRXF1YWwgPSAoYSwgYikgPT4ge1xuICAgIGlmICghKGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgYnVmZmVyJyk7XG4gICAgfVxuICAgIGlmICghKGIgaW5zdGFuY2VvZiBVaW50OEFycmF5KSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdTZWNvbmQgYXJndW1lbnQgbXVzdCBiZSBhIGJ1ZmZlcicpO1xuICAgIH1cbiAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0lucHV0IGJ1ZmZlcnMgbXVzdCBoYXZlIHRoZSBzYW1lIGxlbmd0aCcpO1xuICAgIH1cbiAgICBjb25zdCBsZW4gPSBhLmxlbmd0aDtcbiAgICBsZXQgb3V0ID0gMDtcbiAgICBsZXQgaSA9IC0xO1xuICAgIHdoaWxlICgrK2kgPCBsZW4pIHtcbiAgICAgICAgb3V0IHw9IGFbaV0gXiBiW2ldO1xuICAgIH1cbiAgICByZXR1cm4gb3V0ID09PSAwO1xufTtcbmV4cG9ydCBkZWZhdWx0IHRpbWluZ1NhZmVFcXVhbDtcbiIsImltcG9ydCBzdWJ0bGVBbGdvcml0aG0gZnJvbSAnLi9zdWJ0bGVfZHNhLmpzJztcbmltcG9ydCBjcnlwdG8gZnJvbSAnLi93ZWJjcnlwdG8uanMnO1xuaW1wb3J0IGNoZWNrS2V5TGVuZ3RoIGZyb20gJy4vY2hlY2tfa2V5X2xlbmd0aC5qcyc7XG5pbXBvcnQgZ2V0VmVyaWZ5S2V5IGZyb20gJy4vZ2V0X3NpZ25fdmVyaWZ5X2tleS5qcyc7XG5jb25zdCB2ZXJpZnkgPSBhc3luYyAoYWxnLCBrZXksIHNpZ25hdHVyZSwgZGF0YSkgPT4ge1xuICAgIGNvbnN0IGNyeXB0b0tleSA9IGF3YWl0IGdldFZlcmlmeUtleShhbGcsIGtleSwgJ3ZlcmlmeScpO1xuICAgIGNoZWNrS2V5TGVuZ3RoKGFsZywgY3J5cHRvS2V5KTtcbiAgICBjb25zdCBhbGdvcml0aG0gPSBzdWJ0bGVBbGdvcml0aG0oYWxnLCBjcnlwdG9LZXkuYWxnb3JpdGhtKTtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gYXdhaXQgY3J5cHRvLnN1YnRsZS52ZXJpZnkoYWxnb3JpdGhtLCBjcnlwdG9LZXksIHNpZ25hdHVyZSwgZGF0YSk7XG4gICAgfVxuICAgIGNhdGNoIChfYSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IHZlcmlmeTtcbiIsImV4cG9ydCBkZWZhdWx0IGNyeXB0bztcbmV4cG9ydCBjb25zdCBpc0NyeXB0b0tleSA9IChrZXkpID0+IGtleSBpbnN0YW5jZW9mIENyeXB0b0tleTtcbiIsImltcG9ydCB7IEpPU0VOb3RTdXBwb3J0ZWQgfSBmcm9tICcuLi91dGlsL2Vycm9ycy5qcyc7XG5leHBvcnQgY29uc3QgaW5mbGF0ZSA9IGFzeW5jICgpID0+IHtcbiAgICB0aHJvdyBuZXcgSk9TRU5vdFN1cHBvcnRlZCgnSldFIFwiemlwXCIgKENvbXByZXNzaW9uIEFsZ29yaXRobSkgSGVhZGVyIFBhcmFtZXRlciBpcyBub3Qgc3VwcG9ydGVkIGJ5IHlvdXIgamF2YXNjcmlwdCBydW50aW1lLiBZb3UgbmVlZCB0byB1c2UgdGhlIGBpbmZsYXRlUmF3YCBkZWNyeXB0IG9wdGlvbiB0byBwcm92aWRlIEluZmxhdGUgUmF3IGltcGxlbWVudGF0aW9uLicpO1xufTtcbmV4cG9ydCBjb25zdCBkZWZsYXRlID0gYXN5bmMgKCkgPT4ge1xuICAgIHRocm93IG5ldyBKT1NFTm90U3VwcG9ydGVkKCdKV0UgXCJ6aXBcIiAoQ29tcHJlc3Npb24gQWxnb3JpdGhtKSBIZWFkZXIgUGFyYW1ldGVyIGlzIG5vdCBzdXBwb3J0ZWQgYnkgeW91ciBqYXZhc2NyaXB0IHJ1bnRpbWUuIFlvdSBuZWVkIHRvIHVzZSB0aGUgYGRlZmxhdGVSYXdgIGVuY3J5cHQgb3B0aW9uIHRvIHByb3ZpZGUgRGVmbGF0ZSBSYXcgaW1wbGVtZW50YXRpb24uJyk7XG59O1xuIiwiaW1wb3J0ICogYXMgYmFzZTY0dXJsIGZyb20gJy4uL3J1bnRpbWUvYmFzZTY0dXJsLmpzJztcbmV4cG9ydCBjb25zdCBlbmNvZGUgPSBiYXNlNjR1cmwuZW5jb2RlO1xuZXhwb3J0IGNvbnN0IGRlY29kZSA9IGJhc2U2NHVybC5kZWNvZGU7XG4iLCJpbXBvcnQgeyBkZWNvZGUgYXMgYmFzZTY0dXJsIH0gZnJvbSAnLi9iYXNlNjR1cmwuanMnO1xuaW1wb3J0IHsgZGVjb2RlciB9IGZyb20gJy4uL2xpYi9idWZmZXJfdXRpbHMuanMnO1xuaW1wb3J0IGlzT2JqZWN0IGZyb20gJy4uL2xpYi9pc19vYmplY3QuanMnO1xuaW1wb3J0IHsgSldUSW52YWxpZCB9IGZyb20gJy4vZXJyb3JzLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBkZWNvZGVKd3Qoand0KSB7XG4gICAgaWYgKHR5cGVvZiBqd3QgIT09ICdzdHJpbmcnKVxuICAgICAgICB0aHJvdyBuZXcgSldUSW52YWxpZCgnSldUcyBtdXN0IHVzZSBDb21wYWN0IEpXUyBzZXJpYWxpemF0aW9uLCBKV1QgbXVzdCBiZSBhIHN0cmluZycpO1xuICAgIGNvbnN0IHsgMTogcGF5bG9hZCwgbGVuZ3RoIH0gPSBqd3Quc3BsaXQoJy4nKTtcbiAgICBpZiAobGVuZ3RoID09PSA1KVxuICAgICAgICB0aHJvdyBuZXcgSldUSW52YWxpZCgnT25seSBKV1RzIHVzaW5nIENvbXBhY3QgSldTIHNlcmlhbGl6YXRpb24gY2FuIGJlIGRlY29kZWQnKTtcbiAgICBpZiAobGVuZ3RoICE9PSAzKVxuICAgICAgICB0aHJvdyBuZXcgSldUSW52YWxpZCgnSW52YWxpZCBKV1QnKTtcbiAgICBpZiAoIXBheWxvYWQpXG4gICAgICAgIHRocm93IG5ldyBKV1RJbnZhbGlkKCdKV1RzIG11c3QgY29udGFpbiBhIHBheWxvYWQnKTtcbiAgICBsZXQgZGVjb2RlZDtcbiAgICB0cnkge1xuICAgICAgICBkZWNvZGVkID0gYmFzZTY0dXJsKHBheWxvYWQpO1xuICAgIH1cbiAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpXVEludmFsaWQoJ0ZhaWxlZCB0byBwYXJzZSB0aGUgYmFzZTY0dXJsIGVuY29kZWQgcGF5bG9hZCcpO1xuICAgIH1cbiAgICBsZXQgcmVzdWx0O1xuICAgIHRyeSB7XG4gICAgICAgIHJlc3VsdCA9IEpTT04ucGFyc2UoZGVjb2Rlci5kZWNvZGUoZGVjb2RlZCkpO1xuICAgIH1cbiAgICBjYXRjaCAoX2IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpXVEludmFsaWQoJ0ZhaWxlZCB0byBwYXJzZSB0aGUgZGVjb2RlZCBwYXlsb2FkIGFzIEpTT04nKTtcbiAgICB9XG4gICAgaWYgKCFpc09iamVjdChyZXN1bHQpKVxuICAgICAgICB0aHJvdyBuZXcgSldUSW52YWxpZCgnSW52YWxpZCBKV1QgQ2xhaW1zIFNldCcpO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4iLCJpbXBvcnQgeyBkZWNvZGUgYXMgYmFzZTY0dXJsIH0gZnJvbSAnLi9iYXNlNjR1cmwuanMnO1xuaW1wb3J0IHsgZGVjb2RlciB9IGZyb20gJy4uL2xpYi9idWZmZXJfdXRpbHMuanMnO1xuaW1wb3J0IGlzT2JqZWN0IGZyb20gJy4uL2xpYi9pc19vYmplY3QuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIGRlY29kZVByb3RlY3RlZEhlYWRlcih0b2tlbikge1xuICAgIGxldCBwcm90ZWN0ZWRCNjR1O1xuICAgIGlmICh0eXBlb2YgdG9rZW4gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbnN0IHBhcnRzID0gdG9rZW4uc3BsaXQoJy4nKTtcbiAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMyB8fCBwYXJ0cy5sZW5ndGggPT09IDUpIHtcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIFtwcm90ZWN0ZWRCNjR1XSA9IHBhcnRzO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiB0b2tlbiA9PT0gJ29iamVjdCcgJiYgdG9rZW4pIHtcbiAgICAgICAgaWYgKCdwcm90ZWN0ZWQnIGluIHRva2VuKSB7XG4gICAgICAgICAgICBwcm90ZWN0ZWRCNjR1ID0gdG9rZW4ucHJvdGVjdGVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVG9rZW4gZG9lcyBub3QgY29udGFpbiBhIFByb3RlY3RlZCBIZWFkZXInKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHByb3RlY3RlZEI2NHUgIT09ICdzdHJpbmcnIHx8ICFwcm90ZWN0ZWRCNjR1KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBKU09OLnBhcnNlKGRlY29kZXIuZGVjb2RlKGJhc2U2NHVybChwcm90ZWN0ZWRCNjR1KSkpO1xuICAgICAgICBpZiAoIWlzT2JqZWN0KHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGNhdGNoIChfYSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIFRva2VuIG9yIFByb3RlY3RlZCBIZWFkZXIgZm9ybWF0dGluZycpO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBKT1NFRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgc3RhdGljIGdldCBjb2RlKCkge1xuICAgICAgICByZXR1cm4gJ0VSUl9KT1NFX0dFTkVSSUMnO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMuY29kZSA9ICdFUlJfSk9TRV9HRU5FUklDJztcbiAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICAoX2EgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwoRXJyb3IsIHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBKV1RDbGFpbVZhbGlkYXRpb25GYWlsZWQgZXh0ZW5kcyBKT1NFRXJyb3Ige1xuICAgIHN0YXRpYyBnZXQgY29kZSgpIHtcbiAgICAgICAgcmV0dXJuICdFUlJfSldUX0NMQUlNX1ZBTElEQVRJT05fRkFJTEVEJztcbiAgICB9XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgY2xhaW0gPSAndW5zcGVjaWZpZWQnLCByZWFzb24gPSAndW5zcGVjaWZpZWQnKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLmNvZGUgPSAnRVJSX0pXVF9DTEFJTV9WQUxJREFUSU9OX0ZBSUxFRCc7XG4gICAgICAgIHRoaXMuY2xhaW0gPSBjbGFpbTtcbiAgICAgICAgdGhpcy5yZWFzb24gPSByZWFzb247XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEpXVEV4cGlyZWQgZXh0ZW5kcyBKT1NFRXJyb3Ige1xuICAgIHN0YXRpYyBnZXQgY29kZSgpIHtcbiAgICAgICAgcmV0dXJuICdFUlJfSldUX0VYUElSRUQnO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBjbGFpbSA9ICd1bnNwZWNpZmllZCcsIHJlYXNvbiA9ICd1bnNwZWNpZmllZCcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMuY29kZSA9ICdFUlJfSldUX0VYUElSRUQnO1xuICAgICAgICB0aGlzLmNsYWltID0gY2xhaW07XG4gICAgICAgIHRoaXMucmVhc29uID0gcmVhc29uO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBKT1NFQWxnTm90QWxsb3dlZCBleHRlbmRzIEpPU0VFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuY29kZSA9ICdFUlJfSk9TRV9BTEdfTk9UX0FMTE9XRUQnO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IGNvZGUoKSB7XG4gICAgICAgIHJldHVybiAnRVJSX0pPU0VfQUxHX05PVF9BTExPV0VEJztcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgSk9TRU5vdFN1cHBvcnRlZCBleHRlbmRzIEpPU0VFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuY29kZSA9ICdFUlJfSk9TRV9OT1RfU1VQUE9SVEVEJztcbiAgICB9XG4gICAgc3RhdGljIGdldCBjb2RlKCkge1xuICAgICAgICByZXR1cm4gJ0VSUl9KT1NFX05PVF9TVVBQT1JURUQnO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBKV0VEZWNyeXB0aW9uRmFpbGVkIGV4dGVuZHMgSk9TRUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5jb2RlID0gJ0VSUl9KV0VfREVDUllQVElPTl9GQUlMRUQnO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSAnZGVjcnlwdGlvbiBvcGVyYXRpb24gZmFpbGVkJztcbiAgICB9XG4gICAgc3RhdGljIGdldCBjb2RlKCkge1xuICAgICAgICByZXR1cm4gJ0VSUl9KV0VfREVDUllQVElPTl9GQUlMRUQnO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBKV0VJbnZhbGlkIGV4dGVuZHMgSk9TRUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5jb2RlID0gJ0VSUl9KV0VfSU5WQUxJRCc7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgY29kZSgpIHtcbiAgICAgICAgcmV0dXJuICdFUlJfSldFX0lOVkFMSUQnO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBKV1NJbnZhbGlkIGV4dGVuZHMgSk9TRUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5jb2RlID0gJ0VSUl9KV1NfSU5WQUxJRCc7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgY29kZSgpIHtcbiAgICAgICAgcmV0dXJuICdFUlJfSldTX0lOVkFMSUQnO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBKV1RJbnZhbGlkIGV4dGVuZHMgSk9TRUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5jb2RlID0gJ0VSUl9KV1RfSU5WQUxJRCc7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgY29kZSgpIHtcbiAgICAgICAgcmV0dXJuICdFUlJfSldUX0lOVkFMSUQnO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBKV0tJbnZhbGlkIGV4dGVuZHMgSk9TRUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5jb2RlID0gJ0VSUl9KV0tfSU5WQUxJRCc7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgY29kZSgpIHtcbiAgICAgICAgcmV0dXJuICdFUlJfSldLX0lOVkFMSUQnO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBKV0tTSW52YWxpZCBleHRlbmRzIEpPU0VFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuY29kZSA9ICdFUlJfSldLU19JTlZBTElEJztcbiAgICB9XG4gICAgc3RhdGljIGdldCBjb2RlKCkge1xuICAgICAgICByZXR1cm4gJ0VSUl9KV0tTX0lOVkFMSUQnO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBKV0tTTm9NYXRjaGluZ0tleSBleHRlbmRzIEpPU0VFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuY29kZSA9ICdFUlJfSldLU19OT19NQVRDSElOR19LRVknO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSAnbm8gYXBwbGljYWJsZSBrZXkgZm91bmQgaW4gdGhlIEpTT04gV2ViIEtleSBTZXQnO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IGNvZGUoKSB7XG4gICAgICAgIHJldHVybiAnRVJSX0pXS1NfTk9fTUFUQ0hJTkdfS0VZJztcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgSldLU011bHRpcGxlTWF0Y2hpbmdLZXlzIGV4dGVuZHMgSk9TRUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5jb2RlID0gJ0VSUl9KV0tTX01VTFRJUExFX01BVENISU5HX0tFWVMnO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSAnbXVsdGlwbGUgbWF0Y2hpbmcga2V5cyBmb3VuZCBpbiB0aGUgSlNPTiBXZWIgS2V5IFNldCc7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgY29kZSgpIHtcbiAgICAgICAgcmV0dXJuICdFUlJfSldLU19NVUxUSVBMRV9NQVRDSElOR19LRVlTJztcbiAgICB9XG59XG5TeW1ib2wuYXN5bmNJdGVyYXRvcjtcbmV4cG9ydCBjbGFzcyBKV0tTVGltZW91dCBleHRlbmRzIEpPU0VFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuY29kZSA9ICdFUlJfSldLU19USU1FT1VUJztcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gJ3JlcXVlc3QgdGltZWQgb3V0JztcbiAgICB9XG4gICAgc3RhdGljIGdldCBjb2RlKCkge1xuICAgICAgICByZXR1cm4gJ0VSUl9KV0tTX1RJTUVPVVQnO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBKV1NTaWduYXR1cmVWZXJpZmljYXRpb25GYWlsZWQgZXh0ZW5kcyBKT1NFRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLmNvZGUgPSAnRVJSX0pXU19TSUdOQVRVUkVfVkVSSUZJQ0FUSU9OX0ZBSUxFRCc7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9ICdzaWduYXR1cmUgdmVyaWZpY2F0aW9uIGZhaWxlZCc7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgY29kZSgpIHtcbiAgICAgICAgcmV0dXJuICdFUlJfSldTX1NJR05BVFVSRV9WRVJJRklDQVRJT05fRkFJTEVEJztcbiAgICB9XG59XG4iLCJ2YXIgaW5kZXhCcm93c2VyID0gZ2xvYmFsVGhpcy5mZXRjaDtcclxuY29uc3QgeyBmZXRjaCwgUmVzcG9uc2UsIFJlcXVlc3QsIEhlYWRlcnMgfSA9IGdsb2JhbFRoaXM7XG5cbmV4cG9ydCB7IEhlYWRlcnMsIFJlcXVlc3QsIFJlc3BvbnNlLCBpbmRleEJyb3dzZXIgYXMgZGVmYXVsdCwgZmV0Y2ggfTtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9pbmRleC5icm93c2VyLnRzXCIpO1xuIiwiIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9